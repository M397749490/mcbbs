{
    "title": "如何检测玩家手持不少于X个某物品？",
    "author": "dpy0428",
    "replyCount": 15,
    "timestamp": 1537341120,
    "txt_content": "如何检测玩家手持不少于X个某物品？",
    "replies": [
        {
            "author": "SPGoding",
            "timestamp": 1537341120,
            "txt_content": "欢迎题主来到 8102 年。\n\n首先是准备工作，只需要执行一次。\n/scoreboard objectives add result dummy\n\n然后按顺序高频以下三个命令。\nstats entity @p set AffectedItems @p result\nexecute @p ~ ~ ~ clear @s minecraft:diamond 0 0\nstats entity @p clear AffectedItems\n其中 minecraft:diamond 是要检测的物品 ID\n\n最后，用选择器来选择合适的玩家。例如\nkill @a[score_result_min=5]\n将会杀死所有背包中钻石数量大于等于五的玩家，具体的你可以根据需求更改。\n\n\n另外，如果你指的必须是手里拿着的物品，而不是背包里的物品，上面给出的方法无法使用，只能穷举，会麻烦很多。楼上给的命令全部错误无法使用。\nscoreboard players tag @a add passed {SelectedItem:{id:\"minecraft:diamond\",Count:1b}}\nscoreboard players tag @a add passed {SelectedItem:{id:\"minecraft:diamond\",Count:2b}}\nscoreboard players tag @a add passed {SelectedItem:{id:\"minecraft:diamond\",Count:3b}}\nscoreboard players tag @a add passed {SelectedItem:{id:\"minecraft:diamond\",Count:4b}}\n\n然后用 @a[tag=!passed] 选择所有手里的钻石大于等于 5 的玩家。（没错，大于等于 5 其实就是不小于等于 4，我们根本没有穷举那么多命令的必要，只需要来一个反选）\n\n最后清除 tag\nscoreboard players tag @a remove passed\n\n\n你看我这么认真加点金粒怎么样啊 hhh"
        },
        {
            "author": "dpy0428",
            "timestamp": 1537341120,
            "txt_content": "版本：1.12.2"
        },
        {
            "author": "拾暮_",
            "timestamp": 1537348440,
            "txt_content": "命令是：/testfor @a {SelectedItem:{id:minecraft:stone_sword,Count:1,Damage:0,tag:{display:{Name:\"Test\"}}}} ，如果要检测玩家手上的物品的话必须要打上 Selectedltem，然后id 是要检测的物品的id，stone_sword 顾名思义就是石剑，Count 就是数量，写2就是要拿两把才能检测的到，对不能叠加数量的物品你只能写1"
        },
        {
            "author": "dpy0428",
            "timestamp": 1537350240,
            "txt_content": "qq913577161 发表于 2018-9-19 17:14\n命令是：/testfor @a {SelectedItem:{id:minecraft:stone_sword,Count:1,Damage:0,tag:{display:{Name:\"Tes ...\n我要检测不少于x个，不是检测是x个"
        },
        {
            "author": "xiaowei233v",
            "timestamp": 1537350480,
            "txt_content": "dpy0428 发表于 2018-9-19 17:44\n我要检测不少于x个，不是检测是x个\n好像只有一个一个去穷举吧。。\n先检测 x\n然后使 x+1\nx+2\nx+3\n......"
        },
        {
            "author": "dpy0428",
            "timestamp": 1537350780,
            "txt_content": "xiaowei233v 发表于 2018-9-19 17:48\n好像只有一个一个去穷举吧。。\n先检测 x\n然后使 x+1\n穷举我怎么用啊..."
        },
        {
            "author": "xiaowei233v",
            "timestamp": 1537351980,
            "txt_content": "CCB:/testfor @a {SelectedItem:{id:minecraft:stone,Count:1}} \nCCB:/testfor @a {SelectedItem:{id:minecraft:stone,Count:2}}\nCCB:/testfor @a {SelectedItem:{id:minecraft:stone,Count:3}}\nCCB:/testfor @a {SelectedItem:{id:minecraft:stone,Count:4}}\nCCB:/testfor @a {SelectedItem:{id:minecraft:stone,Count:5}} \n............\nCCB:/testfor @a {SelectedItem:{id:minecraft:stone,Count:64}}\nCCB(条件制约)：/你需要执行的命令"
        },
        {
            "author": "dpy0428",
            "timestamp": 1537361820,
            "txt_content": "SPGoding 发表于 2018-9-19 18:59\n欢迎题主来到 8102 年。\n\n首先是准备工作，只需要执行一次。\nstats我没用过，你看我理解的对不对\n第一条是给玩家添加一条修改物品数量的计分板计入之前创建的计分板中（这个AffectedItems具体检测的啥？）。第二条扣除0个物品，会被AffectedItems检测到。第三条清除计分板。（为什么不直接创建AffectedItems规则的计分板呢？）"
        },
        {
            "author": "dpy0428",
            "timestamp": 1537363380,
            "txt_content": "dpy0428 发表于 2018-9-19 20:57\nstats我没用过，你看我理解的对不对\n第一条是给玩家添加一条修改物品数量的计分板计入之前创建的计分板中 ...\n我好像有点明白了，是将该玩家本该反馈到屏幕上的指令反馈信息存到计分板是吧"
        },
        {
            "author": "SPGoding",
            "timestamp": 1537365420,
            "txt_content": "dpy0428 发表于 2018-9-19 21:23\n我好像有点明白了，是将该玩家本该反馈到屏幕上的指令反馈信息存到计分板是吧 ...\n没有 AffectedItems 这种规则\n在 1.12 里 Mojang 用一种很弱智的办法：通过 stats 把命令的执行结果绑定到某个人的某个记分板上…\n在使用 stats set 以后，执行的所有命令的 AffectedItems(影响的物品个数) 就会存到记分板 result 里，然后用 stats clear 来取消绑定（取消不会清掉记分板的值，只是在之后执行命令不会再修改那个记分板了。其实不取消也行…）"
        },
        {
            "author": "_Rainbow_",
            "timestamp": 1537631340,
            "txt_content": "给个大概的建议，1.13+适用\n创建计分板result或者什么的请随意\n通过execute as @a store result score @s result run data get entity @s SelectedItem.Count\n可以将手持的物品的数量导入到result\n然后通过 scoreboard players set Count result 指定物品数（是我会用我还没做好的支持库一步到位）\n然后比较它们的大小，我对operation不是很了解，没有更好的办法的话用玩家分数减去Count的分数，大于即可使用接下来的指令这样\n背包的话有一个会有不良效果（物品错位、背包满的话会溢出消失）的方法就是通过 store result+clear获得数据。然后再通过给一个少一分的方法给回去"
        },
        {
            "author": "_Rainbow_",
            "timestamp": 1537631340,
            "txt_content": "刚刚脑子抽了，直接用@a[scores={result=数值..}]就可以了。诶等等已解决吗？"
        },
        {
            "author": "_Rainbow_",
            "timestamp": 1537631520,
            "txt_content": "dpy0428 发表于 2018-9-19 20:57\nstats我没用过，你看我理解的对不对\n第一条是给玩家添加一条修改物品数量的计分板计入之前创建的计分板中 ...\nAffectedItems字面意思是影响到的物品"
        },
        {
            "author": "dpy0428",
            "timestamp": 1537698120,
            "txt_content": "_Rainbow_ 发表于 2018-9-22 23:49\n给个大概的建议，1.13+适用\n创建计分板result或者什么的请随意\n通过execute as @a store result score @s r ...\n 谢谢，虽然我要得是1.12的，这个就是1.13可以使用SelectedItem.Count对吧"
        },
        {
            "author": "_Rainbow_",
            "timestamp": 1537813440,
            "txt_content": "dpy0428 发表于 2018-9-23 18:22\n谢谢，虽然我要得是1.12的，这个就是1.13可以使用SelectedItem.Count对吧\n对，低版本的话我暂时没办法代替"
        }
    ]
}