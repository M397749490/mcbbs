{
    "title": "原版合并经验球",
    "author": "dpy0428",
    "replyCount": 13,
    "timestamp": 1558658940,
    "txt_content": "求一个算法，能把同一格内的经验球合并\n版本1.14.2",
    "replies": [
        {
            "author": "ruhuasiyu",
            "timestamp": 1558658940,
            "txt_content": "简单来说就是检测经验球距离为0.001..1内是否存在经验球，如果存在进行一个函数，函数内将它们的Value存储在记分板变量并相加，然后返回存储至一开始那个经验球的Value，最后kill这些经验球"
        },
        {
            "author": "Freez！流年",
            "timestamp": 1558662780,
            "txt_content": "在服务端配置文件里面找到 spigot   merge-radius:       item: -       exp: -  把这exp改小，但是不要太小了最好还是2-4这个数值吧"
        },
        {
            "author": "dpy0428",
            "timestamp": 1558662900,
            "txt_content": "Freez！流年 发表于 2019-5-24 09:53\n在服务端配置文件里面找到 spigot   merge-radius:       item: -       exp: -  把这exp改小，但是不要太 ...\n亲，原版！"
        },
        {
            "author": "Freez！流年",
            "timestamp": 1558663380,
            "txt_content": "亲，在本地架设个服务器127.0.0.1连着玩（我才不会说我眼瞎，然后又不知道怎么回答了"
        },
        {
            "author": "dpy0428",
            "timestamp": 1558680420,
            "txt_content": "ruhuasiyu 发表于 2019-5-24 14:44\n简单来说就是检测经验球距离为0.001..1内是否存在经验球，如果存在进行一个函数，函数内将它们的Value存储 ...\n怎样返回储存至一开始的经验球呢？"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1558680540,
            "txt_content": " 本帖最后由 ruhuasiyu 于 2019-5-24 14:50 编辑 \ndpy0428 发表于 2019-5-24 14:47\n怎样返回储存至一开始的经验球呢？\n假设已经在函数中了，execute store result entity @s Value short 1 run scoreboard players get #temp value"
        },
        {
            "author": "dpy0428",
            "timestamp": 1558681200,
            "txt_content": "ruhuasiyu 发表于 2019-5-24 14:49\n假设已经在函数中了，execute store result entity @s Value short 1 run scoreboard players get #temp v ...\n最后问一下，1.13之后函数必须打在数据包里吗？"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1558681740,
            "txt_content": "dpy0428 发表于 2019-5-24 15:00\n最后问一下，1.13之后函数必须打在数据包里吗？\n是的，需要数据包才能用函数"
        },
        {
            "author": "dpy0428",
            "timestamp": 1558682700,
            "txt_content": "dpy0428 发表于 2019-5-24 15:00\n最后问一下，1.13之后函数必须打在数据包里吗？\n#temp是什么意思呀？"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1558683180,
            "txt_content": "一个名为 #temp 的虚拟玩家。\ntemp既temporary，意为临时。\n#的作用是保证不会被真实存在的temp玩家扰乱咱们的数据。\n#还有一个作用是不会在记分板display时显示。\n如果希望既显示于记分板，又能保证不为真实玩家，可用$\n\n$temp"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1558683300,
            "txt_content": "dpy0428 发表于 2019-5-24 15:25\n#temp是什么意思呀？\n就是一个临时变量，一般用#开头是为了和玩家区分，以免用的变量名和玩家名一样。"
        },
        {
            "author": "dpy0428",
            "timestamp": 1558684920,
            "txt_content": "ruhuasiyu 发表于 2019-5-24 15:35\n就是一个临时变量，一般用#开头是为了和玩家区分，以免用的变量名和玩家名一样。 ...\n求助怎么去重遍历呀？假设有两个挨在一起的经验球，我执行下面的命令会把两个经验球都kill掉，\n/execute as @e[type= minecraft:experience_orb] at @s if entity @e[type=minecraft:experience_orb,distance=0.001..1] run kill @e[type=minecraft:experience_orb,distance=0.001..1]复制代码\n如果用@e[type= minecraft:experience_orb,limit=1]的话就无法遍历"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1558687500,
            "txt_content": " 本帖最后由 ruhuasiyu 于 2019-5-24 16:46 编辑 \ndpy0428 发表于 2019-5-24 16:02\n求助怎么去重遍历呀？假设有两个挨在一起的经验球，我执行下面的命令会把两个经验球都kill掉，\n\n如果用@e ...首先distance=0.001..1其实还是有点不好的，因为可能会完全重叠。然后在执行过程中不能直接kill，所以我先给了一个tag然后再kill\n\n\nexecute as @e[type=experience_orb] store result score @s cppValue run data get entity @s Value\nexecute as @e[type=experience_orb] at @s run function cpp:combine_xp_orb_each\nkill @e[tag=remove,type=experience_orb]\n复制代码\nfunction cpp:combine_xp_orb_eachtag @s add self\nscoreboard players operation #temp cppValue = @s cppValue \nexecute as @e[type=experience_orb,tag=!self,distance=..1] run scoreboard players operation #temp cppValue += @s cppValue\nexecute store result entity @s Value short 1 run scoreboard players get #temp cppValue\nexecute as @s[tag=!remove] run tag @e[type=experience_orb,tag=!self,distance=..1] add remove\ntag @s remove self复制代码"
        }
    ]
}