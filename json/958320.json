{
    "title": "[1.15.x-1.6.x]Mod自动更新 —— 将服务器的主要资源文件夹快速同步到本地",
    "author": "Erlnesa",
    "replyCount": 10,
    "timestamp": 1581499860,
    "txt_content": " 本帖最后由 Erlnesa 于 2020-5-31 18:34 编辑 \n\n每次更新了服务器端mod以后，总是需要玩家在群文件里下载新的mods文件夹覆盖\n很麻烦，非常麻烦，太难顶了\n\n\n所以自己写了一个程序让玩家可以一键傻瓜式更新，mods文件夹，config文件夹，shaderpacks文件夹\n作为用户，只需要启动更新程序即可对客户端进行更新作为服务器管理者，更改mod，config或者光影包只需要把文件拖到对应文件夹即可网络带宽依赖不高（本人服务器2M小水管也能正常运行）客户端与服务端在Linux与Windows环境下皆可运行\n\n目前的缺点有以下几点，请斟酌是否使用客户端更新时会先清空文件夹，然后全部重新下载服务器的对应文件夹（例如更新mod会清空客户端的mods文件夹）无图形操作界面（客户端和服务器端都没有）依赖java环境，运行前请务必确保机器有java环境。但是考虑到能运行mc，那应该都有java的，吧？不支持中文的文件夹路径，请确保文件路径、mod文件名为全英文（且不含空格）不支持同步材质包文件夹和其他自定义名称的文件夹\n\n\n您可以点击 这里，跳转到github下载客户端与服务端的程序本体ModUpdate_Client是客户端程序\nModUpdate_Server是服务器端程序\n请分别下载这两个文件夹，然后就可以开始配置程序的运行参数了\n\n\n\n\n\n服务器端配置方法下载得到这样三个文件\nModUpdate_Server.jarModUpdate_Server.inireadme.txt\n\n\n\n\n\nQQ截图20200214230937.png (14.54 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-14 23:09 上传\n\n\n\n\n请确保您没有下载错其他文件，下面开始配置运行参数\n配置ini文件，配置方法打开readme.txt即可看到。主要是配置端口号和mods，config，shaderpacks文件夹的绝对路径。在服务器的防火墙里放行端口，协议是TCP。如果放行后无法运行，需要服务器运营商那边需要同步配置防火墙规则（例如我是阿里云，需要在阿里云的控制台里面添加一个端口放行规则）将ModUpdate_Server.jar和ModUpdate_Server.ini放在同一个文件夹下命令行启动ModUpdate_Server.jar。如果您的服务器环境是Windows，切记不要直接双击ModUpdate_Server.jar\n到此服务器端已经配置并且启动，界面如下\n\n\n\n\n\n\nQQ截图20200212162725.png (5.27 KB, 下载次数: 1)\n\n下载附件\n\n2020-2-12 16:39 上传\n\n\n\n\n\n如果这里报错或者显示其他文字，就是服务器端缺少java环境（装java，配环境变量），或者端口申请被拒绝（防火墙配置一下即可）\n特别说明，您仅可以在服务器端配置希望用户从服务器端更新到的内容，例如：仅允许mods文件夹允许mods文件夹和config文件夹允许config文件夹，shaderpacks文件夹\n等等，这里就不一一列举了\n如果用户在客户端更新了您没有允许的文件夹（例如服务器端设置禁止shaderpacks文件夹，用户强行更新shaderpacks时），服务器端会报一个错误如下。这是正常现象，不是程序运行错误。\n\n\n\n\n\nQQ截图20200214230937.png (4.2 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-14 23:19 上传\n\n\n\n\n\n\n\n客户端配置方法\n下载之后得到这样四个文件\nModUpdate_Client.jarModUpdate_Client.inireadme.txtUpdate.bat\n\n\n\n\n\n\nQQ截图20200214230937.png (22.64 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-14 23:21 上传\n\n\n\n\n配置ini文件，配制方法请看readme.txt，需要注意端口号与服务器配置一致，服务器IP地址处不要填写服务器域名将ModUpdate_Client.jar和ModUpdate_Client.ini和Update.bat放在同一个文件夹下启动Update.bat对文件夹进行更新，不要直接运行ModUpdate_Client.jar\n到此客户端配置完成，运行Update.bat可以看到一个文字界面，按照提示引导即可\n\n\n\n\n\nQQ截图20200214230937.png (5.93 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-14 23:23 上传\n\n\n\n\n\n\n\n\n\n\nQQ截图20200214230937.png (32.11 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-14 23:24 上传\n\n\n\n\n\n\n到此本程序已经可以跑起来了\n\n\n本人测试使用的设备：服务器系统 Ubuntu 16.04.6 LTS\n客户端系统 Windows10 x64\n目前发现的BUG无\n\n已经修复的BUG服务器使用Windows系统时客户端无法正常请求mod文件(已修复)客户端异常显示调试信息(已修复)\n\n未来可能的更新加入文件校验，更新无需再全部重新下载整个文件夹（但是根据测试，将MD5加入到传输中会严重拉低小文件的传输效率比如config文件夹）加入对任意名称文件夹的更新选项\n\n如果您想下载源代码二次开发，点击这里如果您想查看客户端的查毒报告，点击这里如果您想查看服务器端的查毒报告，点击这里（我太菜了，如果发现BUG，或者别的什么需求，可以联系我QQ3516904120）\n\n\n\n\n\n",
    "replies": [
        {
            "author": "Erlnesa",
            "timestamp": 1581500220,
            "txt_content": "补充一下，如果客户端的bat启动报错或者闪退。\n检查配置文件内的服务器IP和端口是否正确\n检查设备是否存在java环境"
        },
        {
            "author": "本诺先森",
            "timestamp": 1581502980,
            "txt_content": "阿、全部下载所有mod感觉有点难顶啊\n毕竟多mod服务器一次就是几百m的文件"
        },
        {
            "author": "yiingshii",
            "timestamp": 1581515700,
            "txt_content": "Mcbbs有你更精彩~"
        },
        {
            "author": "Erlnesa",
            "timestamp": 1581585480,
            "txt_content": "本诺先森 发表于 2020-2-12 18:23\n阿、全部下载所有mod感觉有点难顶啊\n毕竟多mod服务器一次就是几百m的文件\n ...\n确实，目前全部重新下载的逻辑不适合过大的mods文件夹，后续会针对每个mod文件计算特征值比对以后再下载。"
        },
        {
            "author": "Dirito",
            "timestamp": 1581588300,
            "txt_content": "请问是否可以用于更新材质包？而不是用于更新mod"
        },
        {
            "author": "Erlnesa",
            "timestamp": 1581694740,
            "txt_content": " 本帖最后由 Erlnesa 于 2020-2-15 02:19 编辑 \nDirito 发表于 2020-2-13 18:05\n请问是否可以用于更新材质包？而不是用于更新mod\n\n更新任意文件夹的功能下个版本就会加入，目前只能更新mods，config，shaderpacks这三个文件夹"
        },
        {
            "author": "qq971171944",
            "timestamp": 1582884600,
            "txt_content": "这我不确定用户把客户端放在哪里咋办"
        },
        {
            "author": "Erlnesa",
            "timestamp": 1583506020,
            "txt_content": "qq971171944 发表于 2020-2-28 18:10\n这我不确定用户把客户端放在哪里咋办\n那就可以让用户把客户端程序放在.minecraft的同级文件夹里，然后ini用默认配置的相对路径。或者可以让用户自己配置ini文件，记事本打开ini文件即可，客户端的配置也写了很详细的read_me.txt"
        },
        {
            "author": "5165165161",
            "timestamp": 1583578260,
            "txt_content": "\nMCBBS有你更精彩~"
        },
        {
            "author": "xiaoyuny",
            "timestamp": 1585057320,
            "txt_content": "加油加油！？？？？？"
        }
    ]
}