{
    "title": "ProtocolLib Reload问题",
    "author": "张杨晨曦...",
    "replyCount": 7,
    "timestamp": 1562432220,
    "txt_content": "每次/reload后无法正常调用protocolmanager\n[00:41:37 INFO]: A_FlyingPig_ issued server command: /addnpc\n[00:41:37 ERROR]: null\norg.bukkit.command.CommandException: Unhandled exception executing command 'addnpc' in plugin Npctest v1.0-SNAPSHOT\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:46) ~[spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:141) ~[spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at org.bukkit.craftbukkit.v1_8_R3.CraftServer.dispatchCommand(CraftServer.java:641) ~[spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at net.minecraft.server.v1_8_R3.PlayerConnection.handleCommand(PlayerConnection.java:1162) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at net.minecraft.server.v1_8_R3.PlayerConnection.a(PlayerConnection.java:997) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at net.minecraft.server.v1_8_R3.PacketPlayInChat.a(PacketPlayInChat.java:45) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at net.minecraft.server.v1_8_R3.PacketPlayInChat.a(PacketPlayInChat.java:1) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at net.minecraft.server.v1_8_R3.PlayerConnectionUtils$1.run(SourceFile:13) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_181]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_181]\n        at net.minecraft.server.v1_8_R3.SystemUtils.a(SourceFile:44) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at net.minecraft.server.v1_8_R3.MinecraftServer.B(MinecraftServer.java:715) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at net.minecraft.server.v1_8_R3.DedicatedServer.B(DedicatedServer.java:374) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at net.minecraft.server.v1_8_R3.MinecraftServer.A(MinecraftServer.java:654) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at net.minecraft.server.v1_8_R3.MinecraftServer.run(MinecraftServer.java:557) [spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]\nCaused by: java.lang.ExceptionInInitializerError\n        at com.comphenix.protocol.injector.netty.InjectionFactory.fromPlayer(InjectionFactory.java:93) ~[?:?]\n        at com.comphenix.protocol.injector.netty.ProtocolInjector$4.injectPlayer(ProtocolInjector.java:373) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.initializePlayers(PacketFilterManager.java:946) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.incrementPhases(PacketFilterManager.java:462) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:759) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:745) ~[?:?]\n        at fp.npctest.Npctest.onCommand(Npctest.java:40) ~[?:?]\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:44) ~[spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        ... 15 more\nCaused by: java.lang.IllegalArgumentException: 'PROTOCOL-0' is already in use\n        at io.netty.util.UniqueName.<init>(UniqueName.java:53) ~[spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at io.netty.util.AttributeKey.<init>(AttributeKey.java:47) ~[spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at io.netty.util.AttributeKey.valueOf(AttributeKey.java:39) ~[spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        at com.comphenix.protocol.injector.netty.ChannelInjector.<clinit>(ChannelInjector.java:88) ~[?:?]\n        at com.comphenix.protocol.injector.netty.InjectionFactory.fromPlayer(InjectionFactory.java:93) ~[?:?]\n        at com.comphenix.protocol.injector.netty.ProtocolInjector$4.injectPlayer(ProtocolInjector.java:373) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.initializePlayers(PacketFilterManager.java:946) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.incrementPhases(PacketFilterManager.java:462) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:759) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:745) ~[?:?]\n        at fp.npctest.Npctest.onCommand(Npctest.java:40) ~[?:?]\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:44) ~[spigot-1.8.8.jar:git-Spigot-21fe707-e1ebe52]\n        ... 15 more\n复制代码\n",
    "replies": [
        {
            "author": "gooding300",
            "timestamp": 1562432940,
            "txt_content": "java.lang.IllegalArgumentException: 'PROTOCOL-0' is already in use\nPROTOCOL-0这个名字已经被使用了，可能是重启的过程未能使protocolmanager清空之前注册的协议。\n\n如果对您的问题有所帮助，希望可以给我最高的评分！"
        },
        {
            "author": "张杨晨曦...",
            "timestamp": 1562458140,
            "txt_content": "gooding300 发表于 2019-7-7 01:09\nPROTOCOL-0这个名字已经被使用了，可能是重启的过程未能使protocolmanager清空之前注册的协议。\n\n如果对您 ...\n请问怎么清空之前的协议呢\n\n具体代码\n\npackage fp.npctest;\n\nimport com.comphenix.protocol.PacketType;\nimport com.comphenix.protocol.ProtocolLib;\nimport com.comphenix.protocol.ProtocolLibrary;\nimport com.comphenix.protocol.ProtocolManager;\nimport com.comphenix.protocol.events.*;\nimport com.comphenix.protocol.injector.GamePhase;\nimport com.comphenix.protocol.wrappers.EnumWrappers;\nimport com.comphenix.protocol.wrappers.WrappedChatComponent;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\nimport org.bukkit.plugin.java.JavaPlugin;\n\nimport java.lang.reflect.InvocationTargetException;\n\npublic final class Npctest extends JavaPlugin {\n\n    ProtocolManager manager;\n\n    @Override\n    public void onEnable() {\n        manager = ProtocolLibrary.getProtocolManager();\n    }\n\n    @Override\n    public void onDisable() {\n    }\n\n    @Override\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n        PacketContainer packet = manager.createPacket(PacketType.Play.Server.TITLE);\n        packet.getTitleActions().write(0, EnumWrappers.TitleAction.TITLE);\n        packet.getChatComponents().write(0, WrappedChatComponent.fromText(\"sb\"));\n        packet.getIntegers().write(0,1);\n        packet.getIntegers().write(1,10);\n        packet.getIntegers().write(2,1);\n        try{\n            manager.sendServerPacket((Player)sender,packet,false);\n        }catch (InvocationTargetException ex){\n            ex.printStackTrace();\n        }\n        return true;\n    }\n}\n复制代码"
        },
        {
            "author": "licrafter",
            "timestamp": 1562458200,
            "txt_content": "Protocollib 是禁止使用 reload 指令的，只能使用该插件内置的 /protocol reload 指令这不是 bug 这是 feature\nhttps://github.com/dmulloy2/ProtocolLib/blob/master/modules/ProtocolLib/src/main/java/com/comphenix/protocol/ProtocolLib.java#L367"
        },
        {
            "author": "张杨晨曦...",
            "timestamp": 1562458440,
            "txt_content": "licrafter 发表于 2019-7-7 08:10\nProtocollib 是禁止使用 reload 指令的，只能使用该插件内置的 /protocol reload 指令这不是 bug 这是 feat ...\n那请问我是不是单独reload一个protocollib的附属插件是ok的\n不reload protocollib就行"
        },
        {
            "author": "licrafter",
            "timestamp": 1562458800,
            "txt_content": "张杨晨曦... 发表于 2019-7-7 08:14\n那请问我是不是单独reload一个protocollib的附属插件是ok的\n不reload protocollib就行 ...\n应该是这样子的，protocollib只能重启或者内置的reload"
        },
        {
            "author": "张杨晨曦...",
            "timestamp": 1562458920,
            "txt_content": "licrafter 发表于 2019-7-7 08:20\n应该是这样子的，protocollib只能重启或者内置的reload\nthx 顺便再问一句 怎么伪造假人啊"
        },
        {
            "author": "licrafter",
            "timestamp": 1562462880,
            "txt_content": "张杨晨曦... 发表于 2019-7-7 08:22\nthx 顺便再问一句 怎么伪造假人啊\n不清楚你要伪造什么类型的假人，我没弄过，你可以参考下其他插件\nhttps://www.spigotmc.org/resources/fakeplayersonline.6685/\nhttps://www.spigotmc.org/resources/corpsereborn.29875/"
        }
    ]
}