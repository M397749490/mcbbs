{
    "title": "[C#]unturned Rocket插件开发基础教程",
    "author": "诺羽",
    "replyCount": 1,
    "timestamp": 1477126320,
    "txt_content": " 本帖最后由 诺羽 于 2016-10-22 17:01 编辑 \n\n插件开发其实是一件非常简单的事情，本人学习开发只花了两天左右，如果有误，欢迎提出\n\n注意：观看本教程时，你需要对c#有一定的了解，略懂visual studio的使用\n开发前准备工作\n本次教程所用软件和文件如下（可选其他版本的visual studio），RocketAPI下载地址：https://rocketmod.net/get-rocket\n\n第一步，打开Visual Studio，新建一个项目\n\n选择visual c#-类库，你可以修改你的项目名\n\n第二步：添加引用\n右键你的解决方案，添加-引用\n这时候就要用到你下载的rocketapi了，一般来说是个zip，解压，你会发现有这些东西\n\n选择浏览，选中所有.dll格式的文件，当然这还不够，你还需要引用另外一个dll\n\n就在你的unturned所在的目录中\n\n将其复制出来，并引用即可。\n\n点击确定。然后我们就能进行插件的开发了.\n开发标准和实例我们先可以定义在这个sayhello类中做两件事，第一件Load();第二件Unload();(其实override是重写的意思)\n其实，这样一个插件其实就已经写完了，但是我们并不满足于此。我们还能定义一些其他的方法，比如FixedUpdate(),这个方法在Rocket中将被循环执行.\n如图，我定义了一个全局bool变量，当info=true的时候，将会输出Hello Loser，并将全局变量info改为false，最终效果是只会输出一个Hello Loser，当然你也可以做别的事情，具体请见Rocket的wiki\n现在开始介绍如何写一个命令（command），Rocket API给我们提供了一个创建命令的接口，我们只需要继承“IRocketCommand”这个类，然后将没实现的属性和方法实现了即可。我建议将这个命令的实现放到另一个.cs文件中。我们先创建一个类文件（右键你的解决方案，添加-新建项）\n按照惯例我们还是要using一些东西，因为这次我们用到的是接口，所以我们在头文件中写上using Rocket.API；并在你的类后面写上“:IRocketCommand”，注意，我们写完这些之后一般来说会报错（出现红色波浪线），不要害怕，因为我们还没把这些接口成员实现，把鼠标移到波浪线上。点击“显示可能的修补程序”或者直接“Ctrl”+“.”,点击“实现接口”\n我们会发现多了一堆东西。但是这个实现接口的方式过于恶俗，居然就是new一个异常出来。我们需要将它们改成我们需要的。public List<string> Aliases\n        {\n            get\n            {\n               return new List<string>() {/*这里可以写上你想要放到这个List泛型集合里的成员，用逗号隔开（注意，因为是string，所以不要忘记引号）*/};\n            }\n        }\n\n        public AllowedCaller AllowedCaller\n        {\n            get\n            {\n                return AllowedCaller.Both;//允许被调用\n            }\n        }\n\n        public string Help\n        {\n            get\n            {\n                return \"say hello command\";//这里可以写你的命令的介绍\n            }\n        }\n\n        public string Name\n        {\n            get\n            {\n                return \"sayhello\";//这里写你的命令的名称，例如，我写的是sayhello，所以调用这个命令就是“/sayhello”\n            }\n        }\n\n        public List<string> Permissions\n        {\n            get\n            {\n                return new List<string>() {\"sayhello.permission\"};//这里写上你的命令的权限\n            }\n        }\n\n        public string Syntax\n        {\n            get\n            {\n                return \"<player>\";//这里写上你的命令需要的参数，所以使用这个命令的时候应该是“/sayhello <player>”\n            }\n        }复制代码这些是实现属性的示例，具体可见注释\n接下来就是最重要的一个方法的实现，这个方法叫做“Execute(IRocketPlayer caller, string[] command)”这个方法是当命令被调用的时候将会执行的东西。可以发现，这个方法有两个参数，一个参数是IRocketPlayer类的，叫做caller，caller这个对象包含了一些调用这个方法的人的信息，另一个就是command，是一个string数组，我们现在细细分析\n通过visual studio强大的补全功能，我们发现caller对象有这些成员基本上都是字面意思，我们可以通过查阅Rocket的文档了解，在此不详细介绍\n接下来就是这个command，他是一个数组。想象一下，你输入命令的时候的样子，/xxxx 参数0 参数1是的，这个数组里包含的就是这些参数，用空格分隔的不同的参数分别属于数组的不同成员。知道这个我们就简单了。因为我们要做的是一个sayhello的插件，只拥有一个player参数，所以我们要先判断command.length是否是1，如果不是1，显然是输入指令的人输错了，我们需要另外处理，所以可以这样写。\n我们要做的是在聊天框输出我们想要的sayhello，所以我们还需要using Rocket.Unturned.Chat；这样，我们就能这样写，自此，我们的sayhello插件就编写完成了当然，我们还能实现其他功能，具体我们可以查阅Rocket的文档，里面有更为详细的介绍Rocket文档 http://docs.rocketmod.net/\n",
    "replies": [
        {
            "author": "Forge_Storm",
            "timestamp": 1556929920,
            "txt_content": "不错，幸亏我会C# =.="
        }
    ]
}