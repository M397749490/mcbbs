{
    "title": "【ProtocolLib/报错】请问如何使实体发光（且只有自己或者固定玩家能看见发光轮廓）?",
    "author": "纯白剑姬",
    "replyCount": 15,
    "timestamp": 1534676460,
    "txt_content": " 本帖最后由 纯白剑姬 于 2018-8-23 21:11 编辑 \n本想写一个类似于标记的功能（如：shift+左键能使视线上的生物发光）\n问题在于我只想让自己或者朋友看见这个放光轮廓的效果\n所以想到用protocolLib发包 让客户端显示指定的生物附上发光药水效果\n\n请问这能实现吗？如果可以我应该调用NMS的哪个类呢？\n实在是找不到对应类了，请各位大腿能指点一下，谢谢！\n\n----------------------------------------------------------------------------------------\n以上问题已解决  新的问题又出现啦！\n当reload后 再尝试发包就会出现报错！\n报错如下：\n\n[21:13:12] [Server thread/INFO]: DoloC8 issued server command: /eaglevision\n[21:13:14] [Server thread/ERROR]: Could not pass event PlayerInteractEntityEvent to EagleVision v1.0\norg.bukkit.event.EventException\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:306) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:502) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:487) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PlayerConnection.a(PlayerConnection.java:1537) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PacketPlayInUseEntity.a(SourceFile:69) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PacketPlayInUseEntity.a(SourceFile:13) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PlayerConnectionUtils$1.run(SourceFile:13) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_144]\n        at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_144]\n        at net.minecraft.server.v1_11_R1.SystemUtils.a(SourceFile:46) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.D(MinecraftServer.java:747) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.DedicatedServer.D(DedicatedServer.java:399) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.C(MinecraftServer.java:678) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.run(MinecraftServer.java:576) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_144]\nCaused by: java.lang.ExceptionInInitializerError\n        at com.comphenix.protocol.injector.netty.InjectionFactory.fromPlayer(InjectionFactory.java:93) ~[?:?]\n        at com.comphenix.protocol.injector.netty.ProtocolInjector$4.injectPlayer(ProtocolInjector.java:373) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.initializePlayers(PacketFilterManager.java:946) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.incrementPhases(PacketFilterManager.java:462) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:759) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:740) ~[?:?]\n        at com.Dolo.EagleVision.Main.addGlow(Main.java:123) ~[?:?]\n        at com.Dolo.EagleVision.Main.onPlayerClickEntity(Main.java:82) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_144]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:302) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        ... 15 more\nCaused by: java.lang.IllegalArgumentException: 'PROTOCOL-0' is already in use\n        at io.netty.util.UniqueName.<init>(UniqueName.java:53) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at io.netty.util.AttributeKey.<init>(AttributeKey.java:47) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at io.netty.util.AttributeKey.valueOf(AttributeKey.java:39) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at com.comphenix.protocol.injector.netty.ChannelInjector.<clinit>(ChannelInjector.java:88) ~[?:?]\n        at com.comphenix.protocol.injector.netty.InjectionFactory.fromPlayer(InjectionFactory.java:93) ~[?:?]\n        at com.comphenix.protocol.injector.netty.ProtocolInjector$4.injectPlayer(ProtocolInjector.java:373) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.initializePlayers(PacketFilterManager.java:946) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.incrementPhases(PacketFilterManager.java:462) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:759) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:740) ~[?:?]\n        at com.Dolo.EagleVision.Main.addGlow(Main.java:123) ~[?:?]\n        at com.Dolo.EagleVision.Main.onPlayerClickEntity(Main.java:82) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_144]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:302) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        ... 15 more\n[21:13:14] [Server thread/ERROR]: Could not pass event PlayerInteractEntityEvent to EagleVision v1.0\norg.bukkit.event.EventException\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:306) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:502) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:487) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PlayerConnection.a(PlayerConnection.java:1537) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PacketPlayInUseEntity.a(SourceFile:69) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PacketPlayInUseEntity.a(SourceFile:13) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PlayerConnectionUtils$1.run(SourceFile:13) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_144]\n        at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_144]\n        at net.minecraft.server.v1_11_R1.SystemUtils.a(SourceFile:46) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.D(MinecraftServer.java:747) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.DedicatedServer.D(DedicatedServer.java:399) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.C(MinecraftServer.java:678) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.run(MinecraftServer.java:576) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_144]\nCaused by: java.lang.NoClassDefFoundError: Could not initialize class com.comphenix.protocol.injector.netty.ChannelInjector\n        at com.comphenix.protocol.injector.netty.InjectionFactory.fromPlayer(InjectionFactory.java:93) ~[?:?]\n        at com.comphenix.protocol.injector.netty.ProtocolInjector$4.sendServerPacket(ProtocolInjector.java:403) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:786) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:740) ~[?:?]\n        at com.Dolo.EagleVision.Main.addGlow(Main.java:123) ~[?:?]\n        at com.Dolo.EagleVision.Main.onPlayerClickEntity(Main.java:82) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_144]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:302) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        ... 15 more\n复制代码\n",
    "replies": [
        {
            "author": "纯白剑姬",
            "timestamp": 1534680780,
            "txt_content": "呜哇 一个人都没有回复诶...."
        },
        {
            "author": "耗子",
            "timestamp": 1534682100,
            "txt_content": " 本帖最后由 耗子 于 2018-8-19 20:36 编辑 \n\n楼主都用ProtocolLib了，就没有必要调用啥NMS类了。。。\n我们需要发送一个实体药水效果包（Entity Effect），其数据结构在这里。\nProtocolLib相关教程在这里。若需要详细代码请回复我。\n\n如果我的答案有帮助的话，请给我最高的评分。"
        },
        {
            "author": "纯白剑姬",
            "timestamp": 1534694400,
            "txt_content": "耗子 发表于 2018-8-19 20:35\n楼主都用ProtocolLib了，就没有必要调用啥NMS类了。。。\n我们需要发送一个实体药水效果包（Entity Effect） ...\n你好大腿，再打扰一下\n我在运行的时候报错了 想问一下哪里写错了吗？\n代码如下\n\n        @EventHandler(ignoreCancelled=true)\n        public void onPlayerClickEntity(PlayerInteractEntityEvent e){\n                \n                e.getPlayer().sendMessage(\"发光！\");\n                if(isEV){\n                        setEntityEffect(e.getPlayer(),e.getRightClicked());\n                }\n        }\n        \n        public void setEntityEffect(Player p , Entity en){\n                PacketContainer packet = new PacketContainer(PacketType.Play.Server.ENTITY_EFFECT);\n                \n                packet.getIntegers().write(0, en.getEntityId());//Entity ID        VarInt\n                packet.getBytes().write(0, (byte)24);                        //Effect ID        Byte\n                packet.getBytes().write(1, (byte)0);                        //Amplifier        Byte\n                packet.getIntegers().write(1, 100);                                //Duration        VarInt\n                packet.getBytes().write(2,(byte)0x02);                        //Flags                Byte\n                \n                try{\n                        pm.sendServerPacket(p, packet,false);\n                } catch (InvocationTargetException ex) {\n                        ex.printStackTrace();\n                }\n        }复制代码"
        },
        {
            "author": "a8105",
            "timestamp": 1534700220,
            "txt_content": "纯白剑姬 发表于 2018-8-20 00:00\n你好大腿，再打扰一下\n我在运行的时候报错了 想问一下哪里写错了吗？\n代码如下\nhttps://www.spigotmc.org/resources/protocollib.1997/\n\nPacketWrapper\n\nWrapperPlayServerEntityEffect.java\n\n看下里面的实现内容就知道如何设置了\n不需要用这个库,看他里面是如何write的就行了←_←\n你没报错根本不知道错在哪里\n"
        },
        {
            "author": "纯白剑姬",
            "timestamp": 1534701060,
            "txt_content": "810587921 发表于 2018-8-20 01:37\nhttps://www.spigotmc.org/resources/protocollib.1997/\n\nPacketWrapper\n我看到了entity effect的实现和参数 都write进去了。\n报错就是看到了我这个setEntityEffect用protocol发包报错了\n明天我把报错贴上来吧  谢谢大腿的回复！"
        },
        {
            "author": "纯白剑姬",
            "timestamp": 1534754700,
            "txt_content": "810587921 发表于 2018-8-20 01:37\nhttps://www.spigotmc.org/resources/protocollib.1997/\n\nPacketWrapper\n大腿你好 我把你发的实现内容一个一个write进去了\n结果是发包完全没反应....到底是为什么呢....\n还有我发现报错是在reload之后才会出现，reload前就是没反应的（插件正常 发包没任何显示了...）\n代码如下\n\npublic void setEntityEffect(Player p , Entity en){\n                PacketContainer packet = new PacketContainer(PacketType.Play.Server.ENTITY_EFFECT);\n                \n                packet.getIntegers().write(0, (int)en.getEntityId());        //Entity ID        VarInt\n                packet.getBytes().write(0, (byte)(24&255));                                //Effect ID        Byte\n                packet.getBytes().write(1, (byte)(0&255));                                //Amplifier        Byte\n                packet.getIntegers().write(1, (int)100);                                //Duration        VarInt\n                packet.getBytes().write(2,(byte)1);                                                //Flags                Byte\n                \n                try{\n                        pm.sendServerPacket(p, packet,false);\n                } catch (InvocationTargetException ex) {\n                        ex.printStackTrace();\n                }\n        }\n复制代码\n报错如下：\n[16:42:45] [Server thread/ERROR]: Could not pass event PlayerInteractEntityEvent to EagleVision v1.0\norg.bukkit.event.EventException\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:306) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:502) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:487) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PlayerConnection.a(PlayerConnection.java:1537) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PacketPlayInUseEntity.a(SourceFile:69) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PacketPlayInUseEntity.a(SourceFile:13) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PlayerConnectionUtils$1.run(SourceFile:13) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_144]\n        at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_144]\n        at net.minecraft.server.v1_11_R1.SystemUtils.a(SourceFile:46) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.D(MinecraftServer.java:747) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.DedicatedServer.D(DedicatedServer.java:399) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.C(MinecraftServer.java:678) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.run(MinecraftServer.java:576) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_144]\nCaused by: java.lang.ExceptionInInitializerError\n        at com.comphenix.protocol.injector.netty.InjectionFactory.fromPlayer(InjectionFactory.java:93) ~[?:?]\n        at com.comphenix.protocol.injector.netty.ProtocolInjector$4.injectPlayer(ProtocolInjector.java:373) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.initializePlayers(PacketFilterManager.java:946) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.incrementPhases(PacketFilterManager.java:462) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:759) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:745) ~[?:?]\n        at com.Dolo.EagleVision.Main.setEntityEffect(Main.java:99) ~[?:?]\n        at com.Dolo.EagleVision.Main.onPlayerClickEntity(Main.java:79) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_144]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:302) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        ... 15 more\nCaused by: java.lang.IllegalArgumentException: 'PROTOCOL-0' is already in use\n        at io.netty.util.UniqueName.<init>(UniqueName.java:53) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at io.netty.util.AttributeKey.<init>(AttributeKey.java:47) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at io.netty.util.AttributeKey.valueOf(AttributeKey.java:39) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at com.comphenix.protocol.injector.netty.ChannelInjector.<clinit>(ChannelInjector.java:88) ~[?:?]\n        at com.comphenix.protocol.injector.netty.InjectionFactory.fromPlayer(InjectionFactory.java:93) ~[?:?]\n        at com.comphenix.protocol.injector.netty.ProtocolInjector$4.injectPlayer(ProtocolInjector.java:373) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.initializePlayers(PacketFilterManager.java:946) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.incrementPhases(PacketFilterManager.java:462) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:759) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:745) ~[?:?]\n        at com.Dolo.EagleVision.Main.setEntityEffect(Main.java:99) ~[?:?]\n        at com.Dolo.EagleVision.Main.onPlayerClickEntity(Main.java:79) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_144]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:302) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        ... 15 more\n[16:42:45] [Server thread/ERROR]: Could not pass event PlayerInteractEntityEvent to EagleVision v1.0\norg.bukkit.event.EventException\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:306) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:502) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:487) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PlayerConnection.a(PlayerConnection.java:1537) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PacketPlayInUseEntity.a(SourceFile:69) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PacketPlayInUseEntity.a(SourceFile:13) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.PlayerConnectionUtils$1.run(SourceFile:13) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_144]\n        at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_144]\n        at net.minecraft.server.v1_11_R1.SystemUtils.a(SourceFile:46) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.D(MinecraftServer.java:747) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.DedicatedServer.D(DedicatedServer.java:399) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.C(MinecraftServer.java:678) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.run(MinecraftServer.java:576) [spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_144]\nCaused by: java.lang.NoClassDefFoundError: Could not initialize class com.comphenix.protocol.injector.netty.ChannelInjector\n        at com.comphenix.protocol.injector.netty.InjectionFactory.fromPlayer(InjectionFactory.java:93) ~[?:?]\n        at com.comphenix.protocol.injector.netty.ProtocolInjector$4.sendServerPacket(ProtocolInjector.java:403) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:786) ~[?:?]\n        at com.comphenix.protocol.injector.PacketFilterManager.sendServerPacket(PacketFilterManager.java:745) ~[?:?]\n        at com.Dolo.EagleVision.Main.setEntityEffect(Main.java:99) ~[?:?]\n        at com.Dolo.EagleVision.Main.onPlayerClickEntity(Main.java:79) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_144]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_144]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:302) ~[spigot-1.11.2-R0.1-SNAPSHOT.jar:git-Spigot-3fb9445-2b6c9f4]\n        ... 15 more\n复制代码"
        },
        {
            "author": "gooding300",
            "timestamp": 1534755180,
            "txt_content": "纯白剑姬 发表于 2018-8-20 16:45\n大腿你好 我把你发的实现内容一个一个write进去了\n结果是发包完全没反应....到底是为什么呢....\n还有我发 ...Caused by: java.lang.ExceptionInInitializerError\n可以参考一下这一篇 https://blog.csdn.net/fykhlp/article/details/6236316"
        },
        {
            "author": "纯白剑姬",
            "timestamp": 1534756080,
            "txt_content": "gooding300 发表于 2018-8-20 16:53\n可以参考一下这一篇 https://blog.csdn.net/fykhlp/article/details/6236316\n看了您的链接的变量初始化问题\n我也有onEnable()重新获取api\n\nProtocolManager pm;\n        @Override\n        public void onEnable()\n        {\n                Bukkit.getServer().getPluginManager().registerEvents(this, this);\n                pm = ProtocolLibrary.getProtocolManager();\n                getLogger().info(\"插件已加载\");\n        }复制代码\n为什么就是pm.sendServerPacket时会初始化出错.....\n难道还是我write的参数有问题吗？"
        },
        {
            "author": "耗子",
            "timestamp": 1534758180,
            "txt_content": "纯白剑姬 发表于 2018-8-20 16:45\n大腿你好 我把你发的实现内容一个一个write进去了\n结果是发包完全没反应....到底是为什么呢....\n还有我发 ...\n先获取一个ProtocolManager\nProtocolManager manager = ProtocolLibrary.getProtocolManager();复制代码\n然后创建包\nPacketContainer packet = manager.createPacket(PacketType.Play.Server.ENTITY_EFFECT);复制代码"
        },
        {
            "author": "纯白剑姬",
            "timestamp": 1534758660,
            "txt_content": "耗子 发表于 2018-8-20 17:43\n先获取一个ProtocolManager\n\n然后创建包\n和直接new的 packetContainer有什么区别吗？\n试了一下 情况还是一样呢....."
        },
        {
            "author": "纯白剑姬",
            "timestamp": 1534759980,
            "txt_content": "耗子 发表于 2018-8-20 17:43\n先获取一个ProtocolManager\n\n然后创建包\n我测试服务器版本是spigot-1.11.2-R0.1-SNAPSHOT\n这是protocol的下载地址版本好像是4.0.3吧\nhttp://ci.dmulloy2.net/job/ProtocolLib/403/"
        },
        {
            "author": "纯白剑姬",
            "timestamp": 1534760100,
            "txt_content": "刚刚找到了一个发光api 可惜貌似只支持1.9与1.10（非常残念\n[API] GlowAPI [1.9 | 1.10] 1.4.6-SNAPSHOT"
        },
        {
            "author": "纯白剑姬",
            "timestamp": 1534760760,
            "txt_content": "gooding300 发表于 2018-8-20 16:53\n可以参考一下这一篇 https://blog.csdn.net/fykhlp/article/details/6236316\n这里的第二行下载的！\nIf you're running 1.8, 1.9, 1.10, 1.11, or 1.12, use the dev build 403."
        },
        {
            "author": "耗子",
            "timestamp": 1534769700,
            "txt_content": "纯白剑姬 发表于 2018-8-20 18:26\n这里的第二行下载的！\nIf you're running 1.8, 1.9, 1.10, 1.11, or 1.12, use the dev build 403. ...\n原因不明，需要更多信息以供测试。。。如源代码，运行环境等等"
        },
        {
            "author": "纯白剑姬",
            "timestamp": 1534770540,
            "txt_content": "耗子 发表于 2018-8-20 20:55\n原因不明，需要更多信息以供测试。。。如源代码，运行环境等等\n谢谢大佬的回复 问题暂时解决了\n具体问题在于发Entity Effect的包是没有效果的\n附上发光需要用Entity Metadata\nSpigot赛高！（虽然英文苦手..."
        }
    ]
}