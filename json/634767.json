{
    "title": "[sponge]插件开发教程-创建一个简单的命令",
    "author": "Fa_de",
    "replyCount": 5,
    "timestamp": 1474140780,
    "txt_content": "<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"http://music.163.com/outchain/player?type=2&id=35528482&auto=1&height=66\"></iframe>\n第一次写教程可能语言组织不是很好，见谅。更新的话不出意外（天更）\n1.创建一个命令\n首先我们在主类中添加以下代码\n\n\n\n\nQQ截图20160918024812.png (100.84 KB, 下载次数: 1)\n\n下载附件\n\n2016-9-18 02:52 上传\n\n\n\n\n\n\nCommandSpec myCommandSpec = CommandSpec.builder()\n\n\n\n                        .description(Text.of(\"Hello World Command\"))\n                        .permission(\"myplugin.command.helloworld\")\n                        .executor(new HahCommand())\n                        .build();\n\n\n第一个：builder（）方法/函数，可以理解为开启一个新的构造器，源代码中这个方法/函数会放回一个新建的构造器。\n第二个：description是构造器的参数，作用是简短的描述你命令是用来干什么的。\n第三个：permission同上，作用是运行命令前会检测是否拥有该权限。\n第四个：executor同上，作用就是这个命令的逻辑业务。\n第五个：build（）方法/函数，用来生成你所定义的命令。\n当然还有的参数我就不列举了。\n\n\n2.定义命令的逻辑业务。\n你需要创建一个新的类去实现CommandExecutor这个接口并重写execute方法/函数。\n因为在CommandSpec.builder()\n.executor中给予的是HahCommand这个类对象，所以我需要以HahCommand这个名字去实现CommandExecutor这个接口并重写execute方法/函数。\n\n\n\n\n\nQQ截图20160918031115.png (15.32 KB, 下载次数: 1)\n\n下载附件\n\n2016-9-18 03:04 上传\n\n\n\n\n\n\npublic class HahCommand implements CommandExecutor {\n\n        public CommandResult execute(CommandSource arg0, CommandContext arg1) throws CommandException {\n        arg0.sendMessage(Text.of(\"Hello World\")); \n        return CommandResult.success();\n        }\n}\n这里我简单的发送了Hello World文本消息。\n\nexecute中的参数\n第一个：arg0是执行命令的对象，例如如服务端命令。\n第二个：命令上下文这个下一章会说到。\n这里需要return一个命令的结果集。\n.success（）返回一个常量SUCCESS表示执行成功。\n\n3.注册这个命令。\n\n\n\n\nQQ截图20160918032125.png (16.38 KB, 下载次数: 4)\n\n下载附件\n\n2016-9-18 03:23 上传\n\n\n\n\n\n\n在主类的onServer中\n       @Listener\n        public void onServer(GameStartedServerEvent event) {\n                Sponge.getCommandManager().register(this, myCommandSpec, \"helloworld\", \"hello\", \"test\");\n        }\n\n.register中的参数\n第一个：是Object对象，也就是你主类的对象。\n第二个：是CommandCallable对象，也就是上面你创建的命令。\n第三个：也就是你执行这个命令的名字啦。可以多个。\n\n到这里命令也就创建完成了。\n码字不易，如果对你有帮助就回个帖。\n",
    "replies": [
        {
            "author": "Tollainmear",
            "timestamp": 1502469600,
            "txt_content": "谢谢分享，但是我有点儿懵逼的地方是，CommandCallable在哪儿。。。。。"
        },
        {
            "author": "Godpower",
            "timestamp": 1502592840,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "Fa_de",
            "timestamp": 1528859400,
            "txt_content": "Tollainmear 发表于 2017-8-12 00:40\n谢谢分享，但是我有点儿懵逼的地方是，CommandCallable在哪儿。。。。。\n不知道你还在不在学，CommandCallable是接口 CommandSpec是它的实现类。"
        },
        {
            "author": "Tollainmear",
            "timestamp": 1528860300,
            "txt_content": "Fa_de 发表于 2018-6-13 11:10\n不知道你还在不在学，CommandCallable是接口 CommandSpec是它的实现类。\n我仍然在Sponge的路上学习，谢谢你的启蒙和指导，请继续努力，希望你制作的教程能够指导更多的Sponge死忠粉"
        },
        {
            "author": "Fa_de",
            "timestamp": 1528860600,
            "txt_content": "Tollainmear 发表于 2018-6-13 11:25\n我仍然在Sponge的路上学习，谢谢你的启蒙和指导，请继续努力，希望你制作的教程能够指导更多的Sponge死忠 ...\n刚写了一个实战教程，模拟登陆。感兴趣可以去看看，地址自己在我个人资料找吧。"
        }
    ]
}