{
    "title": "【提问】关于启动器读取JSON加载libraries的问题",
    "author": "Lensual",
    "replyCount": 2,
    "timestamp": 1456815780,
    "txt_content": " 本帖最后由 Lensual 于 2016-3-1 16:21 编辑 \n\n环境：\nwindows 10 x64jdk1.8 x64Minecraft 1.6.4\n\n\n情况：\n通过分析发现旋律启动器和官方启动器发现加载了以下jar（省略了其他的，只写出了用于讨论的）\n\norg.lwjgl.lwjgl:lwjgl:2.9.0org.lwjgl.lwjgl:lwjgl_util:2.9.0\n\n而以下jar在version/1.6.4.json有记录，但是没有加载\norg.lwjgl.lwjgl:lwjgl-platform:2.9.0org.lwjgl.lwjgl:lwjgl:2.9.1-nightly-20130708-debug3org.lwjgl.lwjgl:lwjgl_util:2.9.1-nightly-20130708-debug3org.lwjgl.lwjgl:lwjgl-platform:2.9.1-nightly-20130708-debug3\n\n我的做法是扫描libraries文件夹所有jar文件路径 & version/1.6.4.jar路径，添加到java的-cp参数里\n可以正常启动并且进行游戏√\n\n问题来了：\n挖掘机哪家强（x\n加载了所有jar在特殊情况是否会出现兼容问题加载无用的jar浪费资源吧，浪费大不大，有没有必要判断加载这些jar如何判断该不该加载某个jar另外关于启动参数-Djava.library.path=\".minecraft\\natives\"这个文件夹的内容是固定还是会更新的？旋律是固定的，官方是每次解压到游戏jar目录里\n\n自己分析的：\n可能有误 请大触指导 求轻喷\n\n看JSON文件\n\n\"action\": \"allow\" 代表需要加载，如果指定了os，则根据环境判断是否加载\n\"action\": \"disallow\" 代表不加载，如果指定了os，则根据环境判断是否加载\n\n一些看不懂的疑问：\nos下的\"version\": \"^10\\\\.5\\\\.\\\\d$\" 是转义之后的版本号？转义规则是什么？\nos下的\"name\": \"osx\" win linux系统该怎么写\nexclude和natives里面写的是什么\n\n附上JSON片段：\n{\n      \"name\": \"org.lwjgl.lwjgl:lwjgl:2.9.0\",\n      \"rules\": [\n        {\n          \"action\": \"allow\"\n        },\n        {\n          \"action\": \"disallow\",\n          \"os\": {\n            \"name\": \"osx\",\n            \"version\": \"^10\\\\.5\\\\.\\\\d$\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl_util:2.9.0\",\n      \"rules\": [\n        {\n          \"action\": \"allow\"\n        },\n        {\n          \"action\": \"disallow\",\n          \"os\": {\n            \"name\": \"osx\",\n            \"version\": \"^10\\\\.5\\\\.\\\\d$\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl-platform:2.9.0\",\n      \"rules\": [\n        {\n          \"action\": \"allow\"\n        },\n        {\n          \"action\": \"disallow\",\n          \"os\": {\n            \"name\": \"osx\",\n            \"version\": \"^10\\\\.5\\\\.\\\\d$\"\n          }\n        }\n      ],\n      \"natives\": {\n        \"linux\": \"natives-linux\",\n        \"windows\": \"natives-windows\",\n        \"osx\": \"natives-osx\"\n      },\n      \"extract\": {\n        \"exclude\": [\n          \"META-INF/\"\n        ]\n      }\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl:2.9.1-nightly-20130708-debug3\",\n      \"rules\": [\n        {\n          \"action\": \"allow\",\n          \"os\": {\n            \"name\": \"osx\",\n            \"version\": \"^10\\\\.5\\\\.\\\\d$\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl_util:2.9.1-nightly-20130708-debug3\",\n      \"rules\": [\n        {\n          \"action\": \"allow\",\n          \"os\": {\n            \"name\": \"osx\",\n            \"version\": \"^10\\\\.5\\\\.\\\\d$\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl-platform:2.9.1-nightly-20130708-debug3\",\n      \"rules\": [\n        {\n          \"action\": \"allow\",\n          \"os\": {\n            \"name\": \"osx\",\n            \"version\": \"^10\\\\.5\\\\.\\\\d$\"\n          }\n        }\n      ],\n      \"natives\": {\n        \"linux\": \"natives-linux\",\n        \"windows\": \"natives-windows\",\n        \"osx\": \"natives-osx\"\n      },\n      \"extract\": {\n        \"exclude\": [\n          \"META-INF/\"\n        ]\n      }\n    },复制代码\n\n\n",
    "replies": [
        {
            "author": "gamerteam",
            "timestamp": 1456892700,
            "txt_content": "natives代表那个是需要解压的jar文件，你用压缩包的方式打开就知道了，是不用添加在启动指令里的。\n部分版本所使用的库版本不一样，如果同时加载几个的话，就会boom shakalaka\n这个其实就是考验你对json的理解了，这玩意儿其实很好懂的，不过新版本mc的json又有变化了，这点需要注意。\n简单地说，就是把他的name里的.和:都替换为/就行，这就是这个libraries的路径，比如org.lwjgl替换了就是libraries/org/lwjgl，这点能看懂吧"
        },
        {
            "author": "Lensual",
            "timestamp": 1456893600,
            "txt_content": "gamerteam 发表于 2016-3-2 12:25\nnatives代表那个是需要解压的jar文件，你用压缩包的方式打开就知道了，是不用添加在启动指令里的。\n部分版 ...\nlibraries的路径我已经理解了，关于部分版本所使用的库版本可以在哪查询？只能每个版本自己挨个分析么"
        }
    ]
}