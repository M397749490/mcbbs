{
    "title": "[1.14.3]消耗经验的附魔升级系统",
    "author": "Argon_gas",
    "replyCount": 8,
    "timestamp": 1564476180,
    "txt_content": " 本帖最后由 Argon_gas 于 2019-7-30 16:46 编辑 \n\n大概是萌新的第一次发帖吼。\n\n\n首先是视频演示：https://www.bilibili.com/video/av60958584该系统能够通过消耗经验（20级）来升级玩家手持的物品附魔，升级有一定几率失败（50%），但失败也不会返还经验值。\n升级若成功，则附魔等级+1；若失败则-1。\n附魔无最大等级限制，但有最小等级限制，最低不会低于0级，但0级时附魔便已经失效。\n具有多种附魔的物品，其每种附魔的升级判断是分离的，所以可能有的附魔等级升高，而有的附魔等级降低。\n\n下面是原理讲解：\n视频开头的tellraw和trigger的部分相对简单，不多赘述。\n该系统的核心内容就是手持物品附魔等级的获取/赋值,通过execute命令的store子命令实现。execute as @a[tag=level_up] store result score @s Enchstore run data get entity @s SelectedItem.tag.Enchantments[0].lvl复制代码然后通过随机选择盔甲架的方式对Enchstore上的分数进行加减。\n最后重新赋值到玩家手持物品上。execute as @a[tag=level_up] at @s run summon armor_stand ~ ~ ~ {Tags:[\"Y\",\"level_up\"],Invisible:1b,NoGravity:1b,Marker:1b}\nexecute as @a[tag=level_up] at @s run summon armor_stand ~ ~ ~ {Tags:[\"N\",\"level_up\"],Invisible:1b,NoGravity:1b,Marker:1b}\n\nexecute as @e[type=armor_stand,tag=level_up,sort=random,limit=1] run tag @s remove level_up\nexecute as @e[type=armor_stand,tag=Y,tag=!level_up] run scoreboard players add @a[tag=level_up] Enchstore 1\nexecute as @e[type=armor_stand,tag=Y,tag=!level_up] run execute store result entity @a[tag=level_up,limit=1] SelectedItem.tag.Enchantments[0].lvl short 1 run scoreboard players get @a[tag=level_up,limit=1] Enchstore\nexecute as @e[type=armor_stand,tag=N,tag=!level_up] run scoreboard players remove @a[tag=level_up,limit=1] Enchstore 1\nexecute as @a[tag=level_up,scores={Enchstore=..0}] run scoreboard players set @s Enchstore 0\nexecute as @e[type=armor_stand,tag=N,tag=!level_up] run execute store result entity @a[tag=level_up,limit=1] SelectedItem.tag.Enchantments[0].lvl short 1 run scoreboard players get @a[tag=level_up,limit=1] Enchstore复制代码\n当然，由于附魔有多个项目，所以将该模块穷举了8遍，应该是足够了吼\n我觉得命令代码能进一步压缩，不过实在懒得去想，毕竟CV大法多简单是吧。\n最后放上数据包，仅供参考。\n网盘链接：戳我qwq 提取码：y6z2\n\n",
    "replies": [
        {
            "author": "(=°ω°)丿",
            "timestamp": 1564476900,
            "txt_content": " 本帖最后由 Teenager_Yang 于 2019-7-30 20:31 编辑 \n\ndata 和 loot 是两个好指令\n修改玩家背包物品信息(免穷举)\n好吧，我又犯傻了。"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1564481400,
            "txt_content": "Teenager_Yang 发表于 2019-7-30 16:55\ndata 和 loot 是两个好指令\n修改玩家背包物品信息(免穷举)\n↑ 这个帖子里还有我的黑历史\n不知道你在说什么,这个根本不需要用那个技巧.."
        },
        {
            "author": "LittleAGGBIBS",
            "timestamp": 1565063460,
            "txt_content": "这个一次消耗20级可以修改吗QWQ"
        },
        {
            "author": "LittleAGGBIBS",
            "timestamp": 1565613000,
            "txt_content": "请问这个怎么用"
        },
        {
            "author": "QAQexe",
            "timestamp": 1565861040,
            "txt_content": "顶一下，支持"
        },
        {
            "author": "碟血小子",
            "timestamp": 1567938960,
            "txt_content": "哭了，楼主这个概率太低了，时运3的钻石镐没了"
        },
        {
            "author": "nn7944",
            "timestamp": 1573478400,
            "txt_content": "顶贴d=====(￣▽￣*)b"
        },
        {
            "author": "2737414049",
            "timestamp": 1574010660,
            "txt_content": "感谢分享"
        }
    ]
}