{
    "title": "需要一个优良的服务端启动脚本",
    "author": "LiNXinYA",
    "replyCount": 6,
    "timestamp": 1546785780,
    "txt_content": "其实是想换脚本又不会写23333\n要求：1. 不要烂大街的脚本\n2. Jvm优化参数齐全\n（或者针对Sponge、Mod服务器多线程优化的参数）\n\n3. 功能齐全、实用\n",
    "replies": [
        {
            "author": "恋",
            "timestamp": 1546785780,
            "txt_content": " 本帖最后由 HTL9257 于 2019-1-7 00:53 编辑 \n\n我用的是这个 sponge2768 不需要太多优化参数 带自动重启 \n@echo[/url] OFF\ntitle 1.12.2sponge\n:head\njava -Xms16G -Xmx16G -XX:+UseG1GC -d64 -server -XX:+AggressiveOpts -XX:+UseCompressedOops -jar forge-1.12.2-14.23.5.2768-universal.jar\necho **********************************************************\necho 服务器关闭，将会重新启动服务端\necho **********************************************************\ngoto head复制代码"
        },
        {
            "author": "xmdhs",
            "timestamp": 1546786740,
            "txt_content": "http://www.mcbbs.net/forum.php?m ... DE3NzA0NDJ8ODMyNjA2\n启动参数优化不大"
        },
        {
            "author": "Zapic",
            "timestamp": 1546817580,
            "txt_content": "启动参数对游戏的优化确实不大,过多反而会导致性能严重下降,比如关于G1GC这个参数,有个帖子是这么说的:\nGC回收模式等等参数都应该由JVM自动选择，例如国外论坛流传的使用G1GC可以优化MC性能，的确，G1GC减少了Full GC的时间，但是会额外增加10%~30%的CPU时间占用，完全得不偿失。\n我也是试过带一大堆启动参数开服,确实,各种意义上的卡,有时甚至会影响你在后台的操作.\n大部分人说的启动参数都是为了优化内存占用,而用更多的CPU占用来实现的.然而,在内存够用的情况下,影响玩家游戏体验的更多的是CPU,因为CPU的性能很大程度上影响了服务器的TPS(Tick Per Second),所以,启动参数尽量的少,才是对服务器帮助最大的.\n我在用的启动命令行:\njava -jar xx.jar -Xms512M -Xmx1200M -XX:+AggressiveOpts -XX:+UseCompressedOops复制代码\n因为我的服务器人比较少,性能也比较低,所以内存比较寒酸,但不过5人不间断随机传送还是吃得起的(至少内存不会溢出).\n使用\"-XX:+AggressiveOpts\",把内存优化托付给Java,Java对内存的占用情况总比你清楚,所以还是托付给它比较好.\n使用\"-XX:+UseCompressedOops\",压缩指针,优化一定的内存.\n\n一些废话:\n1.多线程的优化是由程序来做的,并不是启动参数.\n2.烂大街的脚本?每个脚本至少都有个-jar吧,是不是可以理解为所有脚本都一样?\n3.优化参数齐全?你完全可以去查阅Java的帮助文档,看看启动命令行的参数有哪些,全加上保证卡死你.\n4.启动参数对服务器来说只是启动,想优化服务器请通过修改配置文件或者干脆升级服务器配置."
        },
        {
            "author": "LiNXinYA",
            "timestamp": 1546861380,
            "txt_content": "Zapic 发表于 2019-1-7 07:33\n启动参数对游戏的优化确实不大,过多反而会导致性能严重下降,比如关于G1GC这个参数,有个帖子是这么说的:\n\n我 ...\n-server 和 -d64 参数不需要嘛"
        },
        {
            "author": "Zapic",
            "timestamp": 1546863660,
            "txt_content": "rucy 发表于 2019-1-7 19:43\n-server 和 -d64 参数不需要嘛\n没什么太大用处,基本不大会影响性能,也不是必须参数."
        },
        {
            "author": "a1294790523",
            "timestamp": 1547311740,
            "txt_content": " 本帖最后由 a1294790523 于 2019-1-13 00:52 编辑 \n启动参数来源：https://www.spigotmc.org/threads ... on%E2%9A%A1.283181/\n启动参数出处：https://mcflags.emc.gs/\n（据说适用于99%的服务器）\nbat脚本内容：\n@echo off\nset a=0\n:restart\ntitle XXX服务器 崩溃/重启次数：%a%\nrem 注意xms和xmx的内存要保持一致\njava -Xms多少G -Xmx多少G -XX:+UseG1GC -XX:+UnlockExperimentalVMOptions -XX:MaxGCPauseMillis=100 -XX:+DisableExplicitGC -XX:TargetSurvivorRatio=90 -XX:G1NewSizePercent=50 -XX:G1MaxNewSizePercent=80 -XX:G1MixedGCLiveThresholdPercent=35 -XX:+AlwaysPreTouch -XX:+ParallelRefProcEnabled -Dusing.aikars.flags=mcflags.emc.gs -jar 你的启动jar名称.jar\necho 服务器已经崩溃/关闭 正在重启....\nrem 延迟5秒钟\nping 127.0.0.1>nul\nset /a a=%a%+1\ngoto restart复制代码"
        }
    ]
}