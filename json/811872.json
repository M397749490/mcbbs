{
    "title": "[ComputerCraft]请问这段代码出现了什么错误？",
    "author": "Sinbad_Official",
    "replyCount": 0,
    "timestamp": 1533431940,
    "txt_content": "-- GPS Detector by Cpt. Jerry\n\n-- Data\nlocal version = \"0.1-BETA\"\nlocal timeout = 2\n\n-- Theme\nlocal theme = nil\nif term.isColor() then\n  theme = {\n    [\"background\"] = colors.lightBlue,\n    [\"person\"] = colors.white,\n    [\"me\"] = colors.green\n  }\nelse\n  theme = {\n    [\"background\"] = colors.black,\n    [\"person\"] = colors.white,\n    [\"me\"] = colors.white\n  }\nend\n\n-- Function\nfunction Split(szFullString, szSeparator)\n  local nFindStartIndex = 1\n  local nSplitIndex = 1\n  local nSplitArray = {}\n  while true do\n    local nFindLastIndex = string.find(szFullString, szSeparator, nFindStartIndex)\n    if not nFindLastIndex then\n      nSplitArray[nSplitIndex] = string.sub(szFullString, nFindStartIndex, string.len(szFullString))\n      break\n    end\n    nSplitArray[nSplitIndex] = string.sub(szFullString, nFindStartIndex, nFindLastIndex - 1)\n    nFindStartIndex = nFindLastIndex + string.len(szSeparator)\n    nSplitIndex = nSplitIndex + 1\n  end\n  return nSplitArray\nend\n\nfunction findModem()\n  local sSide, sFreeSide\n  for i,sSide in pairs(rs.getSides()) do        \n    if peripheral.getType( sSide ) == \"modem\" then\n      sFreeSide = sSide\n    end\n  end\n  return sFreeSide\nend\n\nfunction printLocation(table, vr)\n  local cx, cy = term.getSize()\n  if table:getn() == 3 then\n    local vra = vector.new(table[0], table[1], table[2])\n    local vrb = vra - vr\n    local lock1 = math.round(32)\n    local lock2 = math.round(32)\n    local vrc = vrb + vector.new(lock1, 0, lock2)\n    local round1 = math.round(vrc.x)\n    local round2 = math.round(vrc.z)\n    term.setBackgroundColor(theme[\"person\"])\n    term.setCursorPos(round1, round2)\n    term.write(\"o\")\n    return true\n  end\n  return false\nend\n\nfunction printMyLocation()\n  local lock1 = math.round(32)\n  local lock2 = math.round(32)\n  term.setCursorPos(lock1, lock2)\n  term.write(\"o\")\nend\n\n-- Main\nlocal side = findModem()\nlocal tab = {}\nperipheral.call(side, \"open\", 92)\nrednet.open(side)\nterm.setBackgroundColor(theme[\"background\"])\nterm.clear()\nwhile true do\n  local me = vector.new(gps.locate(timeout))\n  printMyLocation(me)\n  rednet.broadcast(\"locate\")\n  while true do\n    local id, result = rednet.receive(timeout)\n    if result == nil then\n      break\n    elseif result == \"locate\" then\n      rednet.send(id, me.tostring())\n    else\n      local array = Split(message, \", \")\n      printLocation(array)\n    end\n  end\nend复制代码\n它居然 显示我在71行 引用了nil？\n还有 如何使得内容适应屏幕 26x20 或 64x64\n建议小白不要随意发帖，否则我会[数据删除]\n如果有好的答案我会重金酬谢！\n\n",
    "replies": []
}