{
    "title": "linux用脚本会导致开服加载不出mod",
    "author": "a131313pp",
    "replyCount": 6,
    "timestamp": 1582939560,
    "txt_content": "启动参数是这个\n java -server -Xincgc -Xmx3400M -Xms64M -Xss512K -XX:+AggressiveOpts -XX:+UseCompressedOops -XX:+UseCMSCompactAtFullCollection -XX:+UseFastAccessorMethods -XX:ParallelGCThreads=2 -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=2 -XX:CMSInitiatingOccupancyFraction=70 -XX:-DisableExplicitGC -XX:TargetSurvivorRatio=90 -jar /root/minecraft/CatServer.jar\n手动在命令行输入这个可以正常运行。于是我把它做成了一个bash脚本内容是这样的,名字是launch.sh\n#!/bin/sh\nscreen -dmS mc java -server -Xincgc -Xmx3400M -Xms64M -Xss512K -XX:+AggressiveOpts -XX:+UseCompressedOops -XX:+UseCMSCompactAtFullCollection -XX:+UseFastAccessorMethods -XX:ParallelGCThreads=2 -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=2 -XX:CMSInitiatingOccupancyFraction=70 -XX:-DisableExplicitGC -XX:TargetSurvivorRatio=90 -jar /root/minecraft/CatServer.jar\n我运行bash launch.sh，它也会正常的启动。但是似乎加载不出任何MOD。 变成一个纯净服。比如在线人数变成默认的20，后台输入如gc之类的命令都提示没有找到命令。\n",
    "replies": [
        {
            "author": "天辉胡萝卜",
            "timestamp": 1582939620,
            "txt_content": "改成这样\n\n#!/bin/sh\nscreen -dmS mc bash -c 'cd /root/minecraft & java -server -Xincgc -Xmx3400M -Xms64M -Xss512K -XX:+AggressiveOpts -XX:+UseCompressedOops -XX:+UseCMSCompactAtFullCollection -XX:+UseFastAccessorMethods -XX:ParallelGCThreads=2 -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=2 -XX:CMSInitiatingOccupancyFraction=70 -XX:-DisableExplicitGC -XX:TargetSurvivorRatio=90 -jar /root/minecraft/CatServer.jar'\n复制代码\n"
        },
        {
            "author": "Xiaoxinzhi",
            "timestamp": 1582939980,
            "txt_content": "放一下log日志"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1582941000,
            "txt_content": "脚本改成下面这样\n也就是需要在screen后先进入/root/minecraft\n\n#!/bin/sh\nscreen -dmS mc cd /root/minecraft & java -server -Xincgc -Xmx3400M -Xms64M -Xss512K -XX:+AggressiveOpts -XX:+UseCompressedOops -XX:+UseCMSCompactAtFullCollection -XX:+UseFastAccessorMethods -XX:ParallelGCThreads=2 -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=2 -XX:CMSInitiatingOccupancyFraction=70 -XX:-DisableExplicitGC -XX:TargetSurvivorRatio=90 -jar /root/minecraft/CatServer.jar\n复制代码"
        },
        {
            "author": "a131313pp",
            "timestamp": 1582942620,
            "txt_content": "疾风暗影 发表于 2020-2-29 09:50\n脚本改成下面这样\n也就是需要在screen后先进入/root/minecraft\n试了一下，这样变成了直接前台运行了。不会在一个screen里面执行。需要手动开一个screen……能有办法解决吗"
        },
        {
            "author": "a131313pp",
            "timestamp": 1582943640,
            "txt_content": "Xiaoxinzhi 发表于 2020-2-29 09:33\n放一下log日志\n有点晕，刚才运行脚本后立马切到screen 里面盯着去就能正常加载了。现在有玩家在玩不好频繁重启复现一次不切到前台的的情况。等12点例行重启的时候我在试一试。"
        },
        {
            "author": "a131313pp",
            "timestamp": 1582944060,
            "txt_content": "疾风暗影 发表于 2020-2-29 10:34\n改成这样\n谢谢，根据你的提示我想应该是找到原因了。\n必须要在/root/minecraft目录下执行catserver.jar 才能正常加载。我给我朋友的命令是bash /root/minecraft/launch.sh。他是在~/目录直接运行的。没想到还有这样的限制。\n我刚才因为是在 /root/minecraft下运行的launch.sh 所以正常启动并且加载到mod了。并不是我将screen切到前台的原因。"
        }
    ]
}