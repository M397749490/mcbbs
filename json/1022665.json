{
    "title": "服务器卡顿 掉tps",
    "author": "白可乐",
    "replyCount": 34,
    "timestamp": 1587219540,
    "txt_content": " 本帖最后由 白可乐 于 2020-4-25 21:58 编辑 \n\nRT\n两次Timings报告，分先后\n\nhttps://timings.spigotmc.org/?url=ulavojucej\n\n\n\n\nhttps://timings.spigotmc.org/?url=eluvazojas\n\n\n\n已经自行解决：找人优化一下，删掉了一些不必要的优化插件",
    "replies": [
        {
            "author": "lengshao233",
            "timestamp": 1587219840,
            "txt_content": "是不是科技服，tiles挺高的，\n\n\n\n\nimage.png (3.22 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-18 22:24 上传\n\n\n\n\n这里显示了是机器卡服，机器处理方块数据"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587219840,
            "txt_content": "还有就是lr插件占用了点性能"
        },
        {
            "author": "白可乐",
            "timestamp": 1587219840,
            "txt_content": "lengshao233 发表于 2020-4-18 22:24\n是不是科技服，tiles挺高的，这里显示了是机器卡服，机器处理方块数据\n宝可梦服务器\n\n并没有科技模组"
        },
        {
            "author": "白可乐",
            "timestamp": 1587219900,
            "txt_content": "lengshao233 发表于 2020-4-18 22:24\n还有就是lr插件占用了点性能\n我在挖矿的时候，tps会掉下来"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587219900,
            "txt_content": "白可乐 发表于 2020-4-18 22:24\n宝可梦服务器\n\n并没有科技模组\n是一些方块处理数据导致卡顿"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587219900,
            "txt_content": "白可乐 发表于 2020-4-18 22:25\n我在挖矿的时候，tps会掉下来\n能否贴出服务器配置"
        },
        {
            "author": "白可乐",
            "timestamp": 1587219960,
            "txt_content": "lengshao233 发表于 2020-4-18 22:25\n能否贴出服务器配置\nx5675*2\n80G"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587220020,
            "txt_content": "白可乐 发表于 2020-4-18 22:26\nx5675*2\n80G\n贴张任务管理器的图片可以吗，另外加一种mods文件夹的截图，谢谢"
        },
        {
            "author": "深拥v",
            "timestamp": 1587220080,
            "txt_content": "安装yum插件，使用它的能耗检测与主线程检测"
        },
        {
            "author": "Tommer",
            "timestamp": 1587220200,
            "txt_content": " 本帖最后由 Tommer 于 2020-4-18 22:36 编辑 \n\nSuperOptimization 宝可梦优化 没设置好\n令服务器瞬卡 建议根据服务器自身情况来配置插件\n\n如果trmenu有玩家头颅 则建议换成其他物品 减少主线程加载头颅"
        },
        {
            "author": "白可乐",
            "timestamp": 1587220200,
            "txt_content": "lengshao233 发表于 2020-4-18 22:27\n贴张任务管理器的图片可以吗，另外加一种mods文件夹的截图，谢谢\n"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587220200,
            "txt_content": "很明显是在处理实体的时候卡顿了有几个方法，减小服务器视距，不会影响游戏体验\n配置文件中减少服务器实体的生成数量\n有条件的话一定要升级一下服务器配置，主频优先\n\n建议添加这个插件\n\n[优化]Simple Anti-Mob Lag —— 冻结生物以缓解卡服|已兼容至1.15[1.9-1.15]\nhttps://www.mcbbs.net/thread-874306-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587220380,
            "txt_content": "lengshao233 发表于 2020-4-18 22:24\n是不是科技服，tiles挺高的，这里显示了是机器卡服，机器处理方块数据\nFull Server Tick是服务器总计，当然数值上最大了\n不存在处理方块的问题，有，但是没有实体问题大"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587220440,
            "txt_content": "深拥v 发表于 2020-4-18 22:28\n安装yum插件，使用它的能耗检测与主线程检测\n这个可以，但是其实Yum对于网络管控比较好用，对于主线程的网络访问很有效，其他的也基本上只能检测，不能过多地干预影响"
        },
        {
            "author": "白可乐",
            "timestamp": 1587220500,
            "txt_content": "安少An_Shao 发表于 2020-4-18 22:30\n很明显是在处理实体的时候卡顿了有几个方法，减小服务器视距，不会影响游戏体验\n配置文件中减少服务器实体 ...\n但是宝可梦服务器安装这个有用么？"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587220620,
            "txt_content": " 本帖最后由 安少An_Shao 于 2020-4-18 22:40 编辑 \n白可乐 发表于 2020-4-18 22:35\n但是宝可梦服务器安装这个有用么？\n有用，你可以尝试一下，但是视距一定要调低一点，这并不影响游戏体验，况且连Timings都提示你建议调视距\n还有就是实体损耗非常的大，一定要优化一下服务器配置文件，像是生物生成什么的，关于楼上的SuperOptimization 也是有用的 ， 有条件一定要升级服务器配置，特别是你主频虽然不低，但是CPU性能缺不够好，就这么多"
        },
        {
            "author": "深拥v",
            "timestamp": 1587220860,
            "txt_content": "配置还好啦，跟我们服差不多\n要不你发一下核心配置文件，看看是不是优化问题\n另外记得照我说的做"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587220920,
            "txt_content": "核心配置文件一定要配置好"
        },
        {
            "author": "白可乐",
            "timestamp": 1587221040,
            "txt_content": "安少An_Shao 发表于 2020-4-18 22:37\n有用，你可以尝试一下，但是视距一定要调低一点，这并不影响游戏体验，况且连Timings都提示你建议调视距\n ...\n我已经把视距改成3了"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587221040,
            "txt_content": "白可乐 发表于 2020-4-18 22:44\n我已经把视距改成3了\n4其实就差不多了   太低不知道会不会有问题  timings建议4"
        },
        {
            "author": "Hunter_Sun",
            "timestamp": 1587221400,
            "txt_content": "用spark插件的分析看看，spark比较具体（某些方面）"
        },
        {
            "author": "白可乐",
            "timestamp": 1587221760,
            "txt_content": "安少An_Shao 发表于 2020-4-18 22:44\n4其实就差不多了   太低不知道会不会有问题  timings建议4\n服务器安装了 LagAssist"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587221940,
            "txt_content": "白可乐 发表于 2020-4-18 22:56\n服务器安装了 LagAssist\n怎么说呢，那玩意总感觉有点负优化，但也不是一无是处，可以用，还是建议按照服务器优化方法来优化一下  \nhttps://www.mcbbs.net/thread-478126-1-1.html"
        },
        {
            "author": "白可乐",
            "timestamp": 1587222180,
            "txt_content": "安少An_Shao 发表于 2020-4-18 22:59\n怎么说呢，那玩意总感觉有点负优化，但也不是一无是处，可以用，还是建议按照服务器优化方法来优化一下   ...\n已经按照这个教程优化过了"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587222240,
            "txt_content": "白可乐 发表于 2020-4-18 23:03\n已经按照这个教程优化过了\n最终有什么效果吗   tps有没有回升或是减少卡顿的现象"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587222360,
            "txt_content": "白可乐 发表于 2020-4-18 23:03\n已经按照这个教程优化过了\n我最后给你一个压箱底的教程吧  能告诉你的都告诉你了  \nhttps://www.mcbbs.net/thread-939322-1-1.html\n还有问题可以私信我  乐意效劳"
        },
        {
            "author": "白可乐",
            "timestamp": 1587222360,
            "txt_content": "安少An_Shao 发表于 2020-4-18 23:04\n最终有什么效果吗   tps有没有回升或是减少卡顿的现象\n进服会卡顿，搭建服务端一开始就用这个教程优化过一次了"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587222420,
            "txt_content": "白可乐 发表于 2020-4-18 23:06\n进服会卡顿，搭建服务端一开始就用这个教程优化过一次了\nhttps://www.mcbbs.net/thread-939322-1-1.html"
        },
        {
            "author": "白可乐",
            "timestamp": 1587223560,
            "txt_content": "安少An_Shao 发表于 2020-4-18 23:07\nhttps://www.mcbbs.net/thread-939322-1-1.html\n这个也参考过了"
        },
        {
            "author": "夕离丶青春",
            "timestamp": 1587224700,
            "txt_content": "第一，你发tim是没有用的\n第二，你需要安装https://www.mcbbs.net/thread-823209-1-1.html\nSpark —— Spark性能分析器\nCPU侧写(进程分析)\n这是spark最主要的部分,一个基于WarmRoast的轻量的CPU分析与Web视图.\n采样器记录每个行为消耗运算时间的统计数据,这些统计数据可以用来分析出服务器的某个部分，或者某个插件存在的潜在的性能问题.\n数据记录之后,可以在浏览器中显示一个函数调用关系图,来帮助分析.\n一个像spark中所包含这个一样的分析器并,不能\"如同魔法般地\"修复卡顿--他只是一个帮助分析性能问题原因的工具.\nTick监视器(监视服务器tick)\n这个模块可以监视游戏服务器处理\"ticks\"的速度,它可以观察趋势并且分辨出与其他系统事件(垃圾回收,游戏行为,等)相关的性能问题的本质.\n内存检查(堆分析与GC 监视)\n这部分可以生成系统内存使用快照,包含潜在地存在问题的类,其占据空间的大小,与其相关的对象实例数量的信息.\n与其他具有相似功能的分析器不同,它并不大上完整的替代内存分析工具,它指提供一个简单的概览.\nspark同样包含提取完整的Hprof快照的功能,这些快照可以使用传统的内存分析工具分析.\n服务器健康报告\n提供关于服务器当前\"健康\"状态的信息,可以使用游戏内命令查看.输出的信息包含:\n    ·服务器TPS(ticks per second 每秒tick的数量)的信息,比/tps命令显示的要准确的多.\n    ·服务器进程的CPU占用,以及整个系统的CPU占用.\n    ·内存使用\n    ·硬盘使用\n\n然后你把记录发出来，或者自己分析，可以清楚的知道是什么东西在卡服，比如mek机器，ic机器，或者是神秘时代实体，或者是时装工坊卡服，都可以一目了然"
        },
        {
            "author": "nrkdj",
            "timestamp": 1587224940,
            "txt_content": "厉害6666666"
        },
        {
            "author": "白可乐",
            "timestamp": 1587227340,
            "txt_content": "夕离丶青春 发表于 2020-4-18 23:45\n第一，你发tim是没有用的\n第二，你需要安装https://www.mcbbs.net/thread-823209-1-1.html\nSpark —— Spar ...\nhttps://spark.lucko.me/#cqsSc5Uir0\nhttps://timings.spigotmc.org/?url=pizidiwuwi\n\n这个是刚刚跑出来的两个"
        },
        {
            "author": "无尽の咸羊",
            "timestamp": 1587246780,
            "txt_content": "mod吃单核的....\n你要提高你CPU的主频\n\n游戏内的话建议调整一下头颅掉落和怪物随机生成"
        },
        {
            "author": "安少An_Shao",
            "timestamp": 1587255480,
            "txt_content": "白可乐 发表于 2020-4-19 00:29\nhttps://spark.lucko.me/#cqsSc5Uir0\nhttps://timings.spigotmc.org/?url=pizidiwuwi\ntiming和spark都可以同样检测cpu活动，只不过spark可以更细化，对于判断卡顿问题，timing其实就足够了，其次，楼上我也提了，最好升级配置，优先主频，其次内存"
        }
    ]
}