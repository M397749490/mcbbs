{
    "title": "Inventory点击添加或更改Lore问题.",
    "author": "Gyzerccc",
    "replyCount": 4,
    "timestamp": 1504084380,
    "txt_content": " 本帖最后由 Gyzerccc 于 2017-8-30 17:19 编辑 \n\n先上代码:\n\n\n复制代码 if(event.getRawSlot() == 13 )\n                 { \n                     event.setCancelled(true);\n                \n               \n//检查第四格的物品名称是不是叫§3§l测试物品\nif (inv.getItem(4).getItemMeta().getDisplayName().equals(\"§3§l测试物品\")) {\n                            //获得玩家手中的物品\n                            ItemStack hi = p.getInventory().getItemInMainHand();\n                                ItemMeta im = hi.getItemMeta();\n                            List<String> lore = im.getLore();\n                            \n                            \n                   \n                            String old1= \"测试1”;\n                            String newString1= \"测试2;\n                   //检查手中物品有没有old的Lore\n                            else if (lore.contains(old1)) {\n                            lore.set(lore.indexOf(old1), newString1);\n                            im.setLore(lore);\n                        hi.setItemMeta(im);\n                        p.sendMessage(\"lore替换成功\");\n                        }\n//如果没有old1的Lore则添加old\n                            else {\n                                    lore.add(old1);\n                          im.setLore(lore);\n                        hi.setItemMeta(im);\n\n                            }\n                        \n                     //如果第四格物品不正确的话\n                     else {\n                             p.sendMessage(\"请放入正确的物品\");\n                     }\n\n\n\n功能:\n\n玩家将指定名称的物品放入 inv 的第四格后\n点击第13格,检查第四格的物品名称是不是指定的物品\n如果是{\n\n如果手上物品有 old1的Lore则替换为newString1\n如果没有就添加newString0的Lore\n}\n如果不是{\n发送: 请放正确的物品\n}\n\n\n我也找不到哪里错误\n总之把指定物品放进去后台确报错..\n希望大佬指点！\n\n",
    "replies": [
        {
            "author": "Gyzerccc",
            "timestamp": 1504162320,
            "txt_content": "没人教下吗- -||"
        },
        {
            "author": "耗子",
            "timestamp": 1504194360,
            "txt_content": "你确定第四格一定有物品吗？没有的话会抛NPE。请做null检查"
        },
        {
            "author": "Ir.Nep",
            "timestamp": 1504261140,
            "txt_content": " 本帖最后由 qzz740827 于 2017-9-1 18:25 编辑 \n\n第一个if少大括号Inventory获取物品也是从0开始\ngetItem()之后一系列都用!=null判断不然就会像耗子大佬说的一样NPE\nItemStack item = getItem();\nItemMeta im; //我觉得这样重用率高啦不知道有没有什么实际用处\nif(item != null && (im = item.getItemMeta()) != null && im.hasDisplayName() && im.getDisplayName().equals(\"§3§l测试物品\")){\n  item = p.getEquipment().getItemInMainHand();\n  im = item.getItemMeta();\n  xxxx;\n}复制代码\n"
        },
        {
            "author": "Gyzerccc",
            "timestamp": 1504262100,
            "txt_content": "qzz740827 发表于 2017-9-1 18:19\n第一个if少大括号Inventory获取物品也是从0开始\ngetItem()之后一系列都用!=null判断不然就会像耗子大佬说的 ...\n明白了！感谢！"
        }
    ]
}