{
    "title": "BungeeCord 攻击 & 防御 & 漏洞 深度解析",
    "author": "UltraPanda",
    "replyCount": 4,
    "timestamp": 1558094700,
    "txt_content": " 本帖最后由 407 于 2019-5-17 20:18 编辑 \n\n先前已经有人发布过关于此类的帖子了，这里不会和他重复说明，如果您没有阅读过，建议先看这一篇\n\n1. 假人压测攻击 & 防御\n这里首先针对的是比较完善的EndMinecraftPlus，它是由国人落花雨开发的一款服务器压测工具。目前已知可靠的方案就是 Bot-Sentry (似乎MCBBS已有此付费插件的搬运贴) 、 代理检测 和 特征检测。\n(1). Bot-Sentry 等反假人集群压测插件jiongjionger 的 AntiFakePlayer 不建议使用，但在无其他可用方案的前提下，你也可以选择它。AntiFakePlayer 的工作原理你也可以在本论坛内找到，通过其工作原理就可得知不建议使用的原因，它需要大数据支持。\nBot-Sentry 使用的又是什么原理？\n玩家加入频率。它可以在配置文件内设置一个阈值，如果超过了这个阈值，就开启 “防护模式”所谓防护模式，就是开启一个 MOTD 检测， 它会要求玩家刷新 N 次MOTD，当然一般是2次，我也针对本防御模式进行过攻击，我在假人压测方面进行了判断，使其自动刷新MOTD，这也使得本方案变得可靠又不可靠。\n内置于 Bot-Sentry 的判断机制，也会自动调整刷新MOTD数量，我使用的自动刷新MOTD也将 要求刷新的数量提升到了 100余次\n\n(2).  代理检测\n你可以使用代理检测API来检测玩家的IP是否合法，自己曾经提出过一个思路并实现过，具体是：\n玩家登陆 -> 数据库查询玩家IP是否存在于白名单内\n不存在 -> 记录IP，使用代理检测API，检测IP地址并保存结果。存在 -> 通行。\n你同时也可以通过Hook EndMinecraftPlus 的免费代理API，定期获取添加到黑名单。\n\n相关检测API网址： https://proxycheck.io/\n\n\n（这一检测方法似乎对高匿代理行不通）\n\n(3). 特征检测\n\n目前 EndMinecraftPlus 有一定的漏洞，使假人特征显而易见。当然，一旦漏洞公开，作者也会火速修复。\n这里也是公布一个漏洞出来，仅供参考。\n\n普通玩家进入服务器后会发送 REGISTER(有时) 或 MC|Brand 数据包，假人则不会，或在发送数据包方面有缺陷。\n没有对此进行过深度研究，可能还有更大、更实用、更可信的漏洞。\n\n在与国外的一位开发者聊天时谈到假人压测这一方面，他也是推荐过我一个 BungeeCord 核心，在Github开源，由 俄罗斯人 开发，\n由于语言障碍，我没有对此进行过深度研究，具体这个核心做了什么？\n\n它在玩家加入服务器时，对玩家进行重力检测（置玩家于空中，让玩家自由落体），假人不会自由落体（这一特性似乎是可以被添加的，难道不会损耗资源吗，亦或是添加后会有一定的破绽），故可以有效检测出正常流量。\n\n当然这里还有更多的方法来检测，不一一列举。\n\n\n未完待续 ...\n",
    "replies": [
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1558095960,
            "txt_content": "像我这种想为反压测做出贡献但是由于技术太烂没法做贡献的人来说, 看见这些写攻击器的人我就想********, 记得那是我大一的时候本来说好了和小姐姐吃饭, 然而服务器被假人攻击我不得不留在宿舍写过滤器, 结果错失良机. 真令人头大"
        },
        {
            "author": "xmdhs",
            "timestamp": 1558103520,
            "txt_content": "感觉用 yggdrasil 来防御假人，效果应该不错。\n\n毕竟类似正版登录嘛。"
        },
        {
            "author": "1656752101",
            "timestamp": 1588214820,
            "txt_content": "鸭蛋只吃黄 发表于 2019-5-17 20:26\n像我这种想为反压测做出贡献但是由于技术太烂没法做贡献的人来说, 看见这些写攻击器的人我就想********, 记 ...\n老哥不如先弄个白名单顶上，替你节哀"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1601823600,
            "txt_content": "xmdhs 发表于 2019-5-17 22:32\n感觉用 yggdrasil 来防御假人，效果应该不错。\n\n毕竟类似正版登录嘛。\n黑卡压测还挺精彩的\n毕竟正版登入 也只不过是交互嘛~"
        }
    ]
}