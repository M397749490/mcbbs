{
    "title": "服务器无人登陆时持续警告can't keep up!",
    "author": "阿杰举高高",
    "replyCount": 10,
    "timestamp": 1591103460,
    "txt_content": "服务器无人登陆时，提示 can't keep up! Is the server overloaded? Running xxxxms o xxx ticks behind [sup]1[/sup]，伴有Saving oversized chunk [-2, -4] (xxxx bytes} to external  file ./woeld/region/c.-2.-4.mcc[sup]2[/sup]的警告。与此同时，服务器tps极低（最低一次是3.37, 3.52, 3.61）。\n服务器有人登陆后，tps会逐步上升，并最终稳定在20,20,20。当所有玩家下线后，服务器最初仍能保持tps 在20，但一段时间后（具体时长未详细测试），tps开始下降，并开始出现上述的两个警告。\n经查证，提示Saving oversized chunk的区块，是经验熔炉（水流收集，漏斗矿车分发）刷取仙人掌、羊毛毯的部分。\n\n我的问题是，这两个警告为什么基本只在无人登陆时出现？是否与经验熔炉有关？是否与出生点区块保持加载有关？我应该如何解决或优化这个问题？欢迎大佬不吝赐教。\n\n补充说明：\n1.服务器配置：腾讯云1核2GB，私设了3GB的虚拟内存\n2.mc服务器版本：paper 1.15.2 321\n3.服务器启用的插件： CatSeedLogin、dynmap\n4.我认为可能相关的配置变更：fix-zero-tick-instant-grow-farms: false（paper.yml)\n\n5.其它：在未安装任何插件时，服务器仍存在上述问题。但那时使用的是百度云1核1GB，私设1GB虚拟内存。\n\n",
    "replies": [
        {
            "author": "EmptyLava",
            "timestamp": 1591103460,
            "txt_content": " 本帖最后由 EmptyLava 于 2020-6-2 21:18 编辑 \n服务器有人登陆后，tps会逐步上升，并最终稳定在20,20,20。当所有玩家下线后，服务器最初仍能保持tps 在20，但一段时间后（具体时长未详细测试），tps开始下降，并开始出现上述的两个警告。\n?迷惑\n\n看起来是区块保存的卡顿\nchunk [-2, -4]这个区块过大\n因为有玩家的时候这个区块加载在内存中，没有玩家的时候这个区块保存在硬盘里，但是一个区块超过1mb好像就会出问题，所以有一部分文件就储存在了外部。而且你服务器内的这个区块好像就超了\n\n将这个区块的文件大小降至1mb以下就行\n\n经验熔炉不是直接原因"
        },
        {
            "author": "阿杰举高高",
            "timestamp": 1591103580,
            "txt_content": "由于鄙人是初次编辑，所以出现了错误。帖子中[sup]1[/sup]和[sup]2[/sup]仅为了表示那是两条警告，并非服务器弹出的警告内容。"
        },
        {
            "author": "阿杰举高高",
            "timestamp": 1591103760,
            "txt_content": " 本帖最后由 阿杰举高高 于 2020-6-2 21:19 编辑 \nEmptyLava 发表于 2020-6-2 21:13\n?迷惑\n\n看起来是区块保存的卡顿\n请问如何降低它的大小呢？"
        },
        {
            "author": "深拥v",
            "timestamp": 1591104180,
            "txt_content": "说白了就是，，，配置太低了\n卫星地图在一个最低配的服务器上并不推荐使用，你可以考虑先关闭这个\n或者拆了某些机器"
        },
        {
            "author": "阿杰举高高",
            "timestamp": 1591104360,
            "txt_content": "深拥v 发表于 2020-6-2 21:23\n说白了就是，，，配置太低了\n卫星地图在一个最低配的服务器上并不推荐使用，你可以考虑先关闭这个\n或者拆了 ...\n有关闭过一晚上，第二天查日志，仍然是几百次这样的警告信息。"
        },
        {
            "author": "深拥v",
            "timestamp": 1591104480,
            "txt_content": "阿杰举高高 发表于 2020-6-2 21:26\n有关闭过一晚上，第二天查日志，仍然是几百次这样的警告信息。\n那你删了2，4 的区块文件呢（\n记得备份"
        },
        {
            "author": "阿杰举高高",
            "timestamp": 1591104600,
            "txt_content": "深拥v 发表于 2020-6-2 21:28\n那你删了2，4 的区块文件呢（\n记得备份\n偶尔问题会严重到这个区块完全加载不出来，然后客户端卡死，这时候我才会扇2，4区块。就是受不了隔三岔五恢复区块才发的帖子"
        },
        {
            "author": "深拥v",
            "timestamp": 1591104660,
            "txt_content": "阿杰举高高 发表于 2020-6-2 21:30\n偶尔问题会严重到这个区块完全加载不出来，然后客户端卡死，这时候我才会扇2，4区块。就是受不了隔三岔五 ...\n那个区块都有什么啊= =\n不如加个清理插件，卸载出生点区块防止无人时机器仍然工作\n毕竟你这配置太低了（"
        },
        {
            "author": "阿杰举高高",
            "timestamp": 1591105140,
            "txt_content": "深拥v 发表于 2020-6-2 21:31\n那个区块都有什么啊= =\n不如加个清理插件，卸载出生点区块防止无人时机器仍然工作\n毕竟你这配置太低了（ ...\n谢谢你的建议，但我更倾向于不使用插件解决这个问题。如果我找不到其它方法的话，我会加一个清理插件的(=^ω^=)"
        },
        {
            "author": "阿杰举高高",
            "timestamp": 1591183980,
            "txt_content": "我的最终解决方案是，移动出生点，使出生点与经验熔炉更近（我怀疑经验熔炉的一部分在出生点区块内，一部分在出生点区块以外，刷出来的仙人掌和羊毛毯不能进入未加载的区块，就不停地堆叠在出生点区块边缘）"
        }
    ]
}