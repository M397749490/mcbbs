{
    "title": "生成箭平方：多个函数互相调用循环 for 1.13",
    "author": "qaz1-qaz1-",
    "replyCount": 8,
    "timestamp": 1533290760,
    "txt_content": " 本帖最后由 qaz1-qaz1- 于 2018-8-3 18:40 编辑 \n\n引言\n\n\n这个东西应（我）该（猜）有很多人做过了，但是，毕竟做出来了，就写一写，希望能够抛砖引玉，带给大家一些新的思路\n版本在1.13\n思路\n\n\n要生成一个9x9的平方，有两个思路\n1.利用发射器，直接在头顶上射一箭，用2个fill就好了（这是我在前1秒想出的，所以我倒腾了5个小时是为了什么啊啊啊啊）\n2.利用循环，一个一个生成箭，逻辑图如下\n\n\n\n\n捕获.PNG (31.89 KB, 下载次数: 0)\n\n下载附件\n\n2018-8-3 17:39 上传\n\n\n\n\n\n其实说白了就是类似于打印机的动作，一个一个扫过去\n命令\n\n\n需要数据包，附件下载在下面\n\n\n\nbow.zip\n(3.3 KB, 下载次数: 3)\n\n\n\n2018-8-3 17:44 上传\n点击文件名下载附件\n使用的数据包\n\n\n\n\n\n几个函数贴在下面了\n\nstart.mcfunction\n#盔甲架设置\n\n#行\nexecute at @s run summon minecraft:armor_stand ~ ~ ~ {Tags:[\"bow_hang\"]}\n#列\nexecute at @s run summon minecraft:armor_stand ~ ~ ~ {Tags:[\"bow_lie\"]}\n#相对坐标盔甲架\nexecute at @s run summon minecraft:armor_stand ~4 ~10 ~4 {Tags:[\"bow_zuobiao\"],NoGravity:1b}\n\n#计分板设置\n\n#添加主计分板\nscoreboard objectives add bow_main dummy\n#设置行的分数（不必须）\nscoreboard players set @e[tag=bow_hang] bow_main 0\n#设置列的分数（不必须）\nscoreboard players set @e[tag=bow_lie] bow_main 0\n\n#初始化完毕，转到主函数\n\nfunction bow:bow/main复制代码\n\nmain.mcfunction\n#调用递归\n\n#调用行递归\nfunction bow:bow/hangdigui\n\n#结束时命令\n\n#清场\nkill @e[tag=bow_hang]\nkill @e[tag=bow_lie]\nkill @e[tag=bow_zuobiao]\n#清除记分板\nscoreboard objectives remove bow_main复制代码\nhangdigui.mcfunction\n\n<div>#调用生成新的一行</div><div>execute if entity @e[tag=bow_hang,scores={bow_main=..8}] run function bow:bow/starthang</div>复制代码\nstarthang.mcfunction\n#记分板设置\n\n#重置分数\nscoreboard players set @e[tag=bow_lie] bow_main 0\n#增加分数\nscoreboard players add @e[tag=bow_hang] bow_main 1\n\n#递归的调用与返回&结束时改变位置\n\n#进入列递归\nfunction bow:bow/liedigui\n#行结束时改变到下一行的位置\nexecute at @e[tag=bow_zuobiao] run tp @e[tag=bow_zuobiao] ~9 ~ ~-1\n#返回行递归\nfunction bow:bow/hangdigui复制代码\nliedigui.mcfunction\n#调用生成新的一列\nexecute if entity @e[tag=bow_lie,scores={bow_main=..8}] run function bow:bow/startblock复制代码\n\nstartblock.mcfunction\n#生产箭矢\nexecute at @e[tag=bow_zuobiao] run summon arrow ~ ~-2 ~ {pickup:2b}\n#增加分数\nscoreboard players add @e[tag=bow_lie] bow_main 1\n\n#递归的调用与返回&结束时改变位置\n\n#块结束时改变到下一次位置\nexecute at @e[tag=bow_zuobiao] run tp @e[tag=bow_zuobiao] ~-1 ~ ~\n#返回列递归\nfunction bow:bow/liedigui复制代码\n\n注释可以看的很清楚（我想），内容就不讲了。\n\n\n核心：循环\n循环的原理是两个函数的互相调用，类似于：\na=>b=>a=>b=>...... \n那么，怎么让循环产生次数呢？要用到记分板\n在上面，我先刷出了一只盔甲架，积分版上的分数设置为1\n然后在互相调用时加了这样的一个execute串\nexecute if entity @e[tag=bow_lie,scores={bow_main=..8}] run function bow:bow/startblock\n和这样一段命令\nscoreboard players add @e[tag=bow_lie] bow_main 1\n\n这样调用一次循环就增加一次分数，直到分数达到9，if条件不成立，就跳出了循环\n其他想说的\ntp指令中的坐标（指下面的），如果是相对坐标的话，那么是要以命令执行处的坐标开始计算的，所以有时不要忘记加execute at\ntp 实体 坐标\n还有，怎么样可以将积分版上的数据赋予到nbt上啊\n\n参考\n1.https://minecraft-zh.gamepedia.com/命令 官方百科\n2.http://www.mcbbs.net/thread-774235-1-1.html 数据包使用教程\n\n\n",
    "replies": [
        {
            "author": "langyo_v3",
            "timestamp": 1533291120,
            "txt_content": "请将代码部分使用spoiler标签包裹起来，防止大篇幅占用页面影响观看"
        },
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1533292620,
            "txt_content": "langyo_v3 发表于 2018-8-3 18:12\n请将代码部分使用spoiler标签包裹起来，防止大篇幅占用页面影响观看\n谢谢，长知识了，一直在找那个按钮的说"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1533295260,
            "txt_content": "1.13好评，比较简单吧"
        },
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1533300540,
            "txt_content": "ruhuasiyu 发表于 2018-8-3 19:21\n1.13好评，比较简单吧\n是比较简单的，不过数据包的文件格式把我闪瞎了。然后做了5小时，发现用fill放发射器就可以搞定，几近崩溃，还有，感谢大大的np++的格式"
        },
        {
            "author": "chyx",
            "timestamp": 1533470700,
            "txt_content": "没看懂 什么是9*9的平方？"
        },
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1533544380,
            "txt_content": "chyx 发表于 2018-8-5 20:05\n没看懂 什么是9*9的平方？\n就是在长9宽9的范围内，每一格生成一只箭"
        },
        {
            "author": "chyx",
            "timestamp": 1533827160,
            "txt_content": "qaz1-qaz1- 发表于 2018-8-6 16:33\n就是在长9宽9的范围内，每一格生成一只箭\n一共就81个指令\n每个位置来一出不就好了\n随便拿个语言两个for 把输出粘到记事本里保存改名字mcfunction就完了……"
        },
        {
            "author": "乙烯_中国",
            "timestamp": 1533830040,
            "txt_content": "关于排版请不要使用七号字，尤其不要多用。"
        }
    ]
}