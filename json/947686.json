{
    "title": "[Bukkit插件开发]如何将CraftBukkit的World类型转化为WorldEdit API中的World类型",
    "author": "Jonjs_Dada",
    "replyCount": 7,
    "timestamp": 1580222700,
    "txt_content": " 本帖最后由 Jonjs_Dada 于 2020-1-31 17:02 编辑 \n\n如题，Spigot-1.13.2/1.14.4/1.15\nWorldEdit 7.1.0\ncom.sk89q.worldedit.world.World world = (com.sk89q.worldedit.world.World) player.getWorld();复制代码是无效的",
    "replies": [
        {
            "author": "RuGuojave",
            "timestamp": 1580226540,
            "txt_content": "冒个泡。加油。。。。"
        },
        {
            "author": "秋韵",
            "timestamp": 1580440500,
            "txt_content": " 本帖最后由 秋韵 于 2020-1-31 13:59 编辑 \n\nwe创世神插件里好像有这个功能\n建议查询API，既然插件本体有提供相关功能的指令，那也应该能找到实现相关功能的API"
        },
        {
            "author": "Tale丿神话",
            "timestamp": 1580625000,
            "txt_content": " 本帖最后由 Tale丿神话 于 2020-2-3 01:58 编辑 \n\nPlayer p = ((WorldEditPlugin) Bukkit.getPluginManager().getPlugin(\"WorldEdit\")).wrapPlayer(player);\nWorld world = p.getWorld();"
        },
        {
            "author": "Jonjs_Dada",
            "timestamp": 1580637060,
            "txt_content": "Tale丿神话 发表于 2020-2-2 14:30\nPlayer p = ResidenceBlock.getInstance().worldEditPlugin.wrapPlayer(player);\nWorld world = p.getWorld ...\n请问ResidenceBlock是什么类？"
        },
        {
            "author": "Karlatemp",
            "timestamp": 1580641200,
            "txt_content": "BukkitAdapter.adapt(player.getWorld())"
        },
        {
            "author": "Jonjs_Dada",
            "timestamp": 1580643240,
            "txt_content": " 本帖最后由 Jonjs_Dada 于 2020-2-2 20:05 编辑 \nKarlatemp 发表于 2020-2-2 19:00\nBukkitAdapter.adapt(player.getWorld())\n已经解决，WorldEdit版本必须和游戏版本严格对应\n\nnull\nCaused by: java.lang.IllegalAccessError: com/sk89q/worldedit/bukkit/BukkitAdapter\nat com.jonjs.sp.Main.onCommand(Main.java:42) ~[?:?]\n复制代码\n\nMain.java:\ncom.sk89q.worldedit.world.World world = BukkitAdapter.adapt(p.getWorld());\n                        \n                        Clipboard clipboard = null;\n\n                        ClipboardFormat format = ClipboardFormats.findByFile(file);\n                        try (ClipboardReader reader = format.getReader(new FileInputStream(file))) {\n                            clipboard = reader.read();\n                        } catch (FileNotFoundException e) {\n                                // TODO 自动生成的 catch 块\n                                e.printStackTrace();\n                        } catch (IOException e) {\n                                // TODO 自动生成的 catch 块\n                                e.printStackTrace();\n                        }\n                        \n                        try (EditSession editSession = WorldEdit.getInstance().getEditSessionFactory().getEditSession(world, -1)) {\n                            Operation operation = new ClipboardHolder(clipboard)\n                                    .createPaste(editSession)\n                                    .to(BlockVector3.at(p.getLocation().getX(), p.getLocation().getY(), p.getLocation().getZ()))\n                                    .build();\n                            Operations.complete(operation);\n                        } catch (WorldEditException e) {\n                                // TODO 自动生成的 catch 块\n                                e.printStackTrace();\n                        }复制代码"
        },
        {
            "author": "Tale丿神话",
            "timestamp": 1580666280,
            "txt_content": "Jonjs_Dada 发表于 2020-2-2 17:51\n请问ResidenceBlock是什么类？\n抱歉 那个是我获取WorldEdit插件实例的变量 已经修改了"
        }
    ]
}