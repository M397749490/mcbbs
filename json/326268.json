{
    "title": "【Mod PE Script常用函数教程】⑦ entityRemovedHook  函数与 deathHook 函数",
    "author": "1162885631",
    "replyCount": 0,
    "timestamp": 1408612020,
    "txt_content": " 本帖最后由 1162885631 于 2014-8-21 17:07 编辑 \n\n下次我去发个索引，篇篇做目录太累了\n看本帖之前请先看http://www.mcbbs.net/thread-204040-1-3.html\n大家好，这次我们来讲讲entityRemovedHook函数和deathHook函数\n本来我是想与entityAddedHook函数一起讲的\n可是上次忘记了\n那么你肯定会问我为什么要放在一起讲\n这个问题就放在这，我们先来了解entityRemovedHook函数\n首先entityRemovedHook函数属于Hook函数\n那么我们来看看它的触发条件\n\n\nentityRemovedHook函数触发条件\n当一个实体(包括箭，下落的方块，点燃的TNT等)消失或死亡时会触发\n\n\n看到了没有，它与entityAddedHook函数的触发条件正好相反\n既然了解了触发条件，我们就来看看使用格式\nfunction entityRemovedHook(entity){}复制代码\n同样的，它与我们上一次讲的entityAddedHook函数格式相同\n后面参数entity返回是被移除的实体\n\n这个entit可以是任意实体（箭，下落的方块，点燃的TNT，生物，玩家）\n好，那我们来看一个实例\nfunction entityRemovedHook(entity){\n        var A=Entity.getEntityTypeId(entity);\n        if(A==80){\n                clientMessage(\"箭呢？\");\n        }\n}复制代码\n这个，讲解类似于entityAddedHook函数，我就不多讲了\n这个JS的效果与entityAddedHook函数刚好相反\n当玩家拿走箭或箭掉岩浆（反正就是消失了）\n会在聊天框里输出“箭呢？”\n\n\n好，我们了解了entityRemovedHook函数后我们再来看看deathHook函数\n同样的deathHook函数也属于Hook函数\n触发条件如下\n\ndeathHook函数触发条件\n当一个生物mod死亡时会触发\n\n\n发现了没有它与entityRemovedHook函数作用类似\n不过它只有生物实体死亡才会触发（箭，下落的方块，点燃的TNT则不会）\n既然了解了触发条件，那我们就来看看使用格式\nfunction deathHook(murderer, victim){}复制代码\n我们可以发现deathHook函数后面有两个参数（murderer, victim）\nmurderer返回的是造成死亡的实体ID\nvictim返回的是死亡的实体ID\n这样说说可能看不懂，我们来看一个实例\nfunction deathHook(murderer, victim){\n        var A=getPlayerEnt();\n        //获取玩家实体ID\n        var B=Entity.getEntityTypeId(victim);\n        //判断死亡生物种类ID\n        if(murderer==A&&B==12){\n                //当攻击者是玩家并且死亡生物种类ID为12时\n                clientMessage(\"你打了死猪！\");\n                //输出\"你打了死猪！\"\n        }\n}复制代码\n明白了吗？\n还不明白的话自己去动手做一做\n注意安卓系统默认文字编码为UTF-8，而windows一般都是简体中文(GBK)\n在电脑上的中文显示会在方块启动器中乱码\n在电脑上编写JS完成后请转换编码成UTF-8\n那么，entityRemovedHook函数和deathHook函数我就讲到这里\n我们下次再见！\n\n\n\n\n\n\n\n\n",
    "replies": []
}