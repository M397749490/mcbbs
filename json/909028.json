{
    "title": "利用 批处理文件(.bat) 在同一个.minecraft文件夹中同时支持多个不同的整合包",
    "author": "common",
    "replyCount": 9,
    "timestamp": 1566986940,
    "txt_content": " 本帖最后由 common 于 2019-8-28 19:10 编辑 \n\n当你自制或下载了一个大型整合包，想要调整mod，该怎么办？将 .jar 文件剪切\\粘贴 入\\出 mods 文件夹。但是，如果你想要两个甚至至多个不同的整合包，该怎么办？复制一份.minecraft的上级文件夹？还是版本分离？但是，不管是复制.minecraft的上级文件夹还是版本分离，都带来了一个问题——数据一致性。例如 当你升级mod版本的时候，你需要在多个不同的文件夹中更新 .jar 文件，当你修改配置文件的时候，你需要在多个文件夹中修改，当你写MT/CT脚本，你需要把脚本文件复制到多个文件夹。总之，所有更新数据的操作，在你拥有两个甚至多个不同的整合包的时候，都会乘二甚至乘n。\n当你有一堆可选择的优化/配置MC的mod的时候(例如AIImprovements BetterPlacement BetterSprinting Bloodmoon HardCoreDarkness ClassicCombat fencejumper等)，当你因为某些原因(比如玩某些地图时禁用所有对战斗增幅/调整的mod)而要禁用一些mod，原来的方法是手动将所有要禁用的mod找出来放到其他地方，但很容易漏掉一些，导致玩了一段时间才发现，还要关掉MC调整mod后重启。\n\n看了一下启动器版，发现貌似没有拥有这个功能的启动器，于是本着 不屈 不挠 不作 不死心 的精神，选择了 windows 自带的批处理文件(.bat)功能(在linux /mac下有类似的sh脚本)，通过在mods和一个闲置mod文件夹(modl)之间移动.jar文件的方式，实现了自动将需要的mod放入mods文件夹的功能\n\n下面是脚本教程\n\n\n禁用所有mod.bat\nset disknow=%~d0\nrem 注释：获取盘符存入disknow备用\n\nset pathnow=%cd%\nrem 注释：获取当前路径存入pathnow备用\n\nset modspath=%pathnow%\\.minecraft\\mods\nrem 注释：计算mods文件夹路径存入modspath备用\n\nset modlpath=%pathnow%\\.minecraft\\modl\nrem 注释：计算modl文件夹路径存入modlpath备用\n\n%disknow%\nrem 注释：调用disknow切换到当前驱动器\n\nmove \"%modspath%\\*.*\" \"%modlpath%\"\nrem 注释：将mods文件夹中的所有文件放入modl文件夹\n\ncd %modspath%\nrem 注释：调用modspath切换到mods文件夹\n\nfor /D %%i in (*) do move %%i \"%modlpath%\"\nrem 注释：将mods文件夹中的所有子文件夹放入modl文件夹\n\npause\nrem 注释：执行完毕，暂停以查看查看结果和排查错误，不想暂停的可以删除pause这一行复制代码\n\n启用所有mod.bat\nset disknow=%~d0\nrem 注释：获取盘符存入disknow备用\n\nset pathnow=%cd%\nrem 注释：获取当前路径存入pathnow备用\n\nset modspath=%pathnow%\\.minecraft\\mods\nrem 注释：计算mods文件夹路径存入modspath备用\n\nset modlpath=%pathnow%\\.minecraft\\modl\nrem 注释：计算modl文件夹路径存入modlpath备用\n\n%disknow%\nrem 注释：调用disknow切换到当前驱动器\n\nmove \"%modlpath%\\*.*\" \"%modspath%\"\nrem 注释：将modl文件夹中的所有文件放入mods文件夹\n\ncd %modlpath%\nrem 注释：调用modlpath切换到modl文件夹\n\nfor /D %%i in (*) do move %%i \"%modspath%\"\nrem 注释：将modl文件夹中的所有子文件夹放入mods文件夹\n\npause\nrem 注释：执行完毕，暂停以查看查看结果和排查错误，不想暂停的可以删除pause这一行复制代码\n自定义名称.batcall 【需要先执行的其他批处理文件文件名1，含.bat后缀】\ncall 【需要先执行的其他批处理文件文件名2，含.bat后缀】\n\nset pathnow=%cd%\nrem 注释：获取当前路径存入pathnow备用\n\nset modspath=%pathnow%\\.minecraft\\mods\nrem 注释：计算mods文件夹路径存入modspath备用\n\nset modlpath=%pathnow%\\.minecraft\\modl\nrem 注释：计算modl文件夹路径存入modlpath备用\n\nrem 注释：三行set语句必须在所有move语句之前，否则move语句找不到路径\n\nmove \"%modlpath%\\【需要启用的MOD文件名1，包含.jar后缀】\" \"%modspath%\"\nmove \"%modlpath%\\【需要启用的MOD文件名2，包含.jar后缀】\" \"%modspath%\"\n\npause\nrem 注释：执行完毕，暂停以查看查看结果和排查错误，不想暂停的可以删除pause这一行复制代码\n\n包含move语句的脚本必须在所有move语句之前有那三句set语句，否则找不到路径\n用这个模板的批处理文件管理mod，需要一个非版本分离的MC，将所有脚本文件放到与.minecraft文件夹同一个目录下，将中文中括号【】内的内容连同中括号一起替换为你需要的内容。将所有的mod分组，分别放入 各自的分组.bat 比如，启用战斗辅助mod.bat 启用信息助手类mod.bat 启用科技类mod.bat 启用魔法类mod.bat 启用性能优化mod.bat 启用生存辅助mod.bat \n\n ，然后通过 call调用其他批处理文件 的方式，将这些模块组合成启动脚本\n比如\n启用基础mod.batcall 启用信息助手类mod.bat\ncall 启用性能优化mod.bat\ncall 启用原版微调mod.bat复制代码启用原版风格整合包.bat\ncall 启用基础mod.bat\ncall 启用战斗辅助mod.bat复制代码启用正常生存整合包.bat\ncall 启用原版风格整合包.bat\ncall 启用生存辅助mod.bat\ncall 启用魔法类mod.bat\ncall 启用科技类mod.bat复制代码\n当你的mod升级，改名，增加，删除的时候，直接修改对应的模块的move语句，这样不管这个模块有多少次调用，都只用修改一个地方\n运行批处理文件，可以直接双击写好的.bat文件，当然，在执行前，要执行一次 禁用所有mod.bat 或者把 call 禁用所有mod.bat 语句放到顶层批处理文件的开头\n\n修改脚本前，备份.minecraft文件夹，因为这是直接对文件系统操作，所以如果写错了可能把mod文件放到其他地方\n\n这些脚本调用 windows系统的功能，所以与所有非强制版本隔离的启动器兼容，linux/mac 系统也可以利用.sh脚本实现类似的功能，只是脚本就要你自己写了，如果有谁提供了linux/mac系统用的脚本，可以私信或回复我，我会更新到帖子里\n这些脚本基于win10系统，不清楚windows的批处理脚本语法是否有过改变，所以在win10以外的windows不一定能运行，出现这种问题，可以在脚本文件的最后一句加上 Pause 暂停以查看执行结果及是否报错，然后根据报错情况排查解决问题\n\n这些脚本用到了.minecraft文件夹下modl文件夹作为中转，如果这个文件夹在你的.minecraft文件夹中已经存在并且有其他作用，可以将脚本中所有modl修改为其他用不到的文件夹\n\n按照这个思路，不仅可以管理mod，还可以管理多个不同设置的配置文件，就不举例子了，可以自行修改脚本\n核心思路是，利用批处理文件，将 替换文件 这一动作标准化，可以反复执行，组合调用，节省了时间，同时减少错误\n\n我不会制作启动器，如果可以的话，启动器作者可以按照这个思路，将这个功能加入启动器",
    "replies": [
        {
            "author": "1051218683",
            "timestamp": 1567003140,
            "txt_content": "技术类教程，真的走心了，厉害"
        },
        {
            "author": "991200448",
            "timestamp": 1567083840,
            "txt_content": "真的很需要这个教程，以前一个模组版本一个mods,搞得很占空间"
        },
        {
            "author": "common",
            "timestamp": 1567084500,
            "txt_content": " 本帖最后由 common 于 2019-8-29 21:18 编辑 \n991200448 发表于 2019-8-29 21:04\n真的很需要这个教程，以前一个模组版本一个mods,搞得很占空间\n希望做地图的可以用这个思路去发布地图，发布地图时只发布 脚本文件 与 修改过的文件，这样能大大减小 地图 文件夹的大小\n\n另，13年注册的六级号+新人勋章？怎么做到的？"
        },
        {
            "author": "991200448",
            "timestamp": 1567085100,
            "txt_content": "以前注册了号没怎么管，最近才开始使用\n另：你知道mcltimc那种实例化模组包是什么原理吗？每个包的模组可以独立的，只需要版本配置好"
        },
        {
            "author": "common",
            "timestamp": 1567145340,
            "txt_content": "991200448 发表于 2019-8-29 21:25\n以前注册了号没怎么管，最近才开始使用\n另：你知道mcltimc那种实例化模组包是什么原理吗？每个包的模组可以 ...\nmctlimc的原理依然是复制.mineraft文件夹，只不过把公用的部分提取出来了\n比如MultiMC\\instances\\Space Astronomy\\.minecraft文件夹下就有config mods resources scripts文件夹\nMultiMC\\instances\\TerraFirmaPunk\\.minecraft文件夹下就有config coremods mods resourcepacks saves screenshots scripts texturepacks文件夹"
        },
        {
            "author": "我的工业2",
            "timestamp": 1567221840,
            "txt_content": "有没有考虑做个带清奇的交互界面的？"
        },
        {
            "author": "common",
            "timestamp": 1567224480,
            "txt_content": " 本帖最后由 common 于 2019-8-31 12:20 编辑 \n我的工业2 发表于 2019-8-31 11:24\n有没有考虑做个带清奇的交互界面的？带清奇的交互界面 是什么鬼，GUI的另一种说法？\n暂时不考虑GUI，需要这个教程的玩家大概率是陈年老玩家，陈年老玩家在有教程的情况下修改我的脚本应该不难吧。不过，欢迎其他人把这个思路整合到启动器 Or 其他软件。我本来想找个带类似功能的启动器，但翻遍了启动器版的精品贴都没看到有类似的功能的启动器，都在复制.minecraft文件夹的路上狂奔，于是乎自己造轮子......"
        },
        {
            "author": "坏2333",
            "timestamp": 1567606320,
            "txt_content": "思路不错 帮助到了我"
        },
        {
            "author": "Twilight_Two",
            "timestamp": 1570807500,
            "txt_content": "硬核教程，硬核排版，硬核代码"
        }
    ]
}