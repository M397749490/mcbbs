{
    "title": "1.12.2Forge如何使用HUD绘制纹理",
    "author": "ReinEchoes",
    "replyCount": 9,
    "timestamp": 1575784440,
    "txt_content": "在网上找了些资料发现了1.7.2的绘制方法,但是已经不适用1.12.2,请教一下dalao如何在1.12.2里绘制一个纹理\nfinal int textureWidth = 1440; //纹理的宽\nfinal int textureHeight = 900; //纹理的高\nfloat vHeight = 1440*(height/(float)width);\nfloat factorX = 1.0F / textureWidth; //将UV从整数归一化到实数的系数.\nfloat factorY = 1.0F / textureHeight;\nGL11.glEnable(GL11.GL_BLEND); //打开OpenGL混合模式\nTessellator tessellator = Tessellator.instance;\ntessellator.startDrawingQuads();\nif(mc.theWorld != null) //如果是在游戏中,则修改颜色,增加透明效果.\n    tessellator.setColorRGBA(255, 255, 255, 64);\ntessellator.addVertexWithUV(0    , height, 0, 0                   , vHeight*factorY);\ntessellator.addVertexWithUV(width, height, 0, textureWidth*factorX, vHeight*factorY);\ntessellator.addVertexWithUV(width, 0     , 0, textureWidth*factorX, 0              );\ntessellator.addVertexWithUV(0    , 0     , 0, 0                   , 0              );\ntessellator.draw();\nGL11.glDisable(GL11.GL_BLEND); //用完了别忘了关掉复制代码这是1.7.2的方法",
    "replies": [
        {
            "author": "ReinEchoes",
            "timestamp": 1575784440,
            "txt_content": "主要是Tessellator里这些方法都没有了"
        },
        {
            "author": "roj234",
            "timestamp": 1575784740,
            "txt_content": " 本帖最后由 roj234 于 2019-12-8 14:24 编辑 \n<blockquote>import net.minecraft.block.state.IBlockState;复制代码      public static void renderQuadBrightAlpha(double scale, int brightness, int alpha) {\n        int b1 = brightness >> 16 & '\\uffff';\n        int b2 = brightness & '\\uffff';\n        Tessellator tessellator = Tessellator.getInstance();\n        BufferBuilder buffer = tessellator.getBuffer();\n        buffer.begin(7, DefaultVertexFormats.POSITION_TEX_LMAP_COLOR);\n        renderQuadBrightAlphaIn(buffer, scale, b1, b2, alpha);\n        tessellator.draw();        // 反面\n        GlStateManager.rotate(180.0F, 0.0F, 1.0F, 0.0F);\n        buffer.begin(7, DefaultVertexFormats.POSITION_TEX_LMAP_COLOR);\n        renderQuadBrightAlphaIn(buffer, scale, b1, b2, alpha);\n        tessellator.draw();\n    }\n\n    public static void renderQuadBrightAlphaIn(BufferBuilder buffer, double scale, int b1, int b2, int alpha) {\n        // --\n        // -+\n        // ++\n        // +-\n        buffer.pos(-scale, -scale, 0.0D).tex(0.0D, 0.0D).lightmap(b1, b2).color(255, 255, 255, alpha).endVertex();\n        buffer.pos(-scale, scale, 0.0D).tex(0.0D, 1.0D).lightmap(b1, b2).color(255, 255, 255, alpha).endVertex();\n        buffer.pos(scale, scale, 0.0D).tex(1.0D, 1.0D).lightmap(b1, b2).color(255, 255, 255, alpha).endVertex();\n        buffer.pos(scale, -scale, 0.0D).tex(1.0D, 0.0D).lightmap(b1, b2).color(255, 255, 255, alpha).endVertex();\n    }\n\npublic static void renderPNG(ResouceLocation loc) {\n       GlStateManager.pushMatrix();\n\n        GlStateManager.enableAlpha();\n        Minecraft.getMinecraft().renderEngine.bindTexture(loc);\n        renderQuadBrightAlpha(1, 240, 255);\n\n        GlStateManager.disableAlpha();\n        GlStateManager.popMatrix();\n}\n\n\n"
        },
        {
            "author": "ReinEchoes",
            "timestamp": 1575785400,
            "txt_content": "roj234 发表于 2019-12-8 13:59\npublic static void renderQuadBrightAlpha(double scale, int brightness, int alpha) {[/backcolo ...\n请问如果是绘制一个.png图片如何绘制"
        },
        {
            "author": "roj234",
            "timestamp": 1575785460,
            "txt_content": "924025038 发表于 2019-12-8 14:10\n请问如果是绘制一个.png图片如何绘制\n放在材质包里，用ResourceLocation调用\n然后把代码中this.bindTexture换成Minecraft.getMinecraft().renderEngine.bindTexture(resloc)"
        },
        {
            "author": "ReinEchoes",
            "timestamp": 1575785700,
            "txt_content": "roj234 发表于 2019-12-8 14:11\n放在材质包里，用ResourceLocation调用\n然后把代码中this.bindTexture换成Minecraft.getMinecraft().rend ...\n你好能不能放一下完整源码,算上class的那种"
        },
        {
            "author": "ReinEchoes",
            "timestamp": 1575787080,
            "txt_content": "roj234 发表于 2019-12-8 14:11\n放在材质包里，用ResourceLocation调用\n然后把代码中this.bindTexture换成Minecraft.getMinecraft().rend ...\n这里运行后报错,而且也绘制不出来图片\n[14:36:38] [Client thread/INFO] [minecraft/AdvancementList]: Loaded 30 advancements\n[14:36:39] [pool-2-thread-1/WARN] [mojang/YggdrasilMinecraftSessionService]: Couldn't look up profile properties for com.mojang.authlib.GameProfile@65876b7e[id=3584c7cd-614b-3687-b1ad-b239e7a37bd8,name=Player129,properties={},legacy=false]\ncom.mojang.authlib.exceptions.AuthenticationException: The client has sent too many requests within a certain amount of time\n        at com.mojang.authlib.yggdrasil.YggdrasilAuthenticationService.makeRequest(YggdrasilAuthenticationService.java:79) ~[YggdrasilAuthenticationService.class:?]\n        at com.mojang.authlib.yggdrasil.YggdrasilMinecraftSessionService.fillGameProfile(YggdrasilMinecraftSessionService.java:180) [YggdrasilMinecraftSessionService.class:?]\n        at com.mojang.authlib.yggdrasil.YggdrasilMinecraftSessionService$1.load(YggdrasilMinecraftSessionService.java:60) [YggdrasilMinecraftSessionService$1.class:?]\n        at com.mojang.authlib.yggdrasil.YggdrasilMinecraftSessionService$1.load(YggdrasilMinecraftSessionService.java:57) [YggdrasilMinecraftSessionService$1.class:?]\n        at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3716) [guava-21.0.jar:?]\n        at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2424) [guava-21.0.jar:?]\n        at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2298) [guava-21.0.jar:?]\n        at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2211) [guava-21.0.jar:?]\n        at com.google.common.cache.LocalCache.get(LocalCache.java:4154) [guava-21.0.jar:?]\n        at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4158) [guava-21.0.jar:?]\n        at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5147) [guava-21.0.jar:?]\n        at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5153) [guava-21.0.jar:?]\n        at com.mojang.authlib.yggdrasil.YggdrasilMinecraftSessionService.fillProfileProperties(YggdrasilMinecraftSessionService.java:170) [YggdrasilMinecraftSessionService.class:?]\n        at net.minecraft.client.Minecraft.getProfileProperties(Minecraft.java:3182) [Minecraft.class:?]\n        at net.minecraft.client.resources.SkinManager$3.run(SkinManager.java:138) [SkinManager$3.class:?]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_131]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_131]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_131]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_131]\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]\n[14:36:41] [Server thread/INFO] [minecraft/IntegratedServer]: Saving and pausing game...\n[14:36:41] [Server thread/INFO] [minecraft/MinecraftServer]: Saving chunks for level '新的世界'/overworld\n[14:37:22] [Server thread/INFO] [minecraft/IntegratedServer]: Saving and pausing game...\n[14:37:22] [Server thread/INFO] [minecraft/MinecraftServer]: Saving chunks for level '新的世界'/overworld\n复制代码"
        },
        {
            "author": "ReinEchoes",
            "timestamp": 1575789060,
            "txt_content": "roj234 发表于 2019-12-8 13:59\npublic static void renderQuadBrightAlpha(double scale, int brightness, int alpha) {[/backcolo ...\n我在RenderGameOverlayEvent事件里调用renderPNG,没有绘制出图像,这个需要怎么解决"
        },
        {
            "author": "gooding300",
            "timestamp": 1575792060,
            "txt_content": "924025038 发表于 2019-12-8 14:38\n这里运行后报错,而且也绘制不出来图片\n这个报错和材质渲染没有半毛钱关系吧……这个报错是加载皮肤的时候请求了太多次的MojangAPI"
        },
        {
            "author": "roj234",
            "timestamp": 1576300920,
            "txt_content": "924025038 发表于 2019-12-8 15:11\n我在RenderGameOverlayEvent事件里调用renderPNG,没有绘制出图像,这个需要怎么解决 ...\n1.如果自己画了需要取消事件: \n                event.setCanceled(true);\n2. 设定位置?        GL11.glTranslatef(x, y, 0);\n位置从这里获取: event.getResolution().getScaledWidth(), event.getResolution().getScaledHeight()\n缩放后的宽高(xy)"
        }
    ]
}