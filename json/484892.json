{
    "title": "怎么删除原版合成方法?",
    "author": "JIE__",
    "replyCount": 21,
    "timestamp": 1439276220,
    "txt_content": "RT，请附上指令，和way",
    "replies": [
        {
            "author": "fyfly",
            "timestamp": 1439276220,
            "txt_content": "fyfly 发表于 2015-8-12 21:42\n花了十几分钟写了个Helper类，吐槽一下MC坑爹的代码，ItemStack和IRecipe的equals()方法竟然都没有Overri ...\n补充一下原理：\n\n通过下面这段代码可以获取所有注册过的合成表，类型为List(其实是List<IRecipe>，但是要转换)：\nList recipeList = CraftingManager.getInstance().getRecipeList();复制代码\n获取之后你就可以随意操作这个List了，如果想要删除一个配方，直接使用remove()方法就行了。\n\n我的那个Helper目前暂时无法修改使用OreDict的配方(不过你改的原版配方应该用不到)，回来再改，不过如果使用利用物品删的那个是可以的。\n\n推荐如果不是有多种合成方法的，都用查找物品那个方法删，那个肯定是没问题的，不过只能删一个配方。另外如果你不知道如何创建ShapedRecipes和ShapelessRecipes可以去CraftingManager的addRecipe和addShapelessRecipe来查看，虽然的确复杂了点。"
        },
        {
            "author": "泰米瑞斯",
            "timestamp": 1439276400,
            "txt_content": "哈？这是mod问答版撒，如果要再服务器禁止物品的话，可以用banitem插件哦。（mod物品也可用）\n指令是/banitem+物品ID"
        },
        {
            "author": "JIE__",
            "timestamp": 1439276580,
            "txt_content": "泰米瑞斯 发表于 2015-8-11 15:00\n哈？这是mod问答版撒，如果要再服务器禁止物品的话，可以用banitem插件哦。（mod物品也可用）\n指令是/banit ...\n不是服务器，请看清楚标题"
        },
        {
            "author": "泰米瑞斯",
            "timestamp": 1439276760,
            "txt_content": "1048139283 发表于 2015-8-11 15:03\n不是服务器，请看清楚标题\n这就复杂了、、应该针对客户端修改N个java文件..."
        },
        {
            "author": "theEinstein",
            "timestamp": 1439278260,
            "txt_content": "http://www.mcbbs.net/thread-306970-1-1.html用这个mod就可以了"
        },
        {
            "author": "JIE__",
            "timestamp": 1439278320,
            "txt_content": "我要源代码=.="
        },
        {
            "author": "ksjsk",
            "timestamp": 1439278920,
            "txt_content": "一看到RT就想到了我刚做的解直角三角形的题。"
        },
        {
            "author": "west.myth",
            "timestamp": 1439287860,
            "txt_content": "不需要自定义合成mod，只要在npc mod全局设置里删掉你不要的合成方式即可。满意请给最佳，如有问题请回复我，我会尽力为你解答"
        },
        {
            "author": "JIE__",
            "timestamp": 1439295900,
            "txt_content": "我要源代码=.="
        },
        {
            "author": "west.myth",
            "timestamp": 1439303280,
            "txt_content": "1048139283 发表于 2015-8-11 20:25\n我要源代码=.=\n[1.8beta-1.6.x][SSP/SMP/LAN]Custom NPCs-自定义NPC[1710d更新]\nhttp://www.mcbbs.net/thread-165632-1-1.html\n下载这个mod，用npc魔杖右击地面打开全局设置，然后你会看到一个管理合成的菜单，在里面编辑你想要的合成方式即可"
        },
        {
            "author": "JIE__",
            "timestamp": 1439333100,
            "txt_content": "west.myth 发表于 2015-8-11 22:28\n[1.8beta-1.6.x][SSP/SMP/LAN]Custom NPCs-自定义NPC[1710d更新]\nhttp://www.mcbbs.net/thread-165632-1- ...\n我不要mod啊\n我要反注册的代码\njava的语法"
        },
        {
            "author": "west.myth",
            "timestamp": 1439352540,
            "txt_content": "1048139283 发表于 2015-8-12 06:45\n我不要mod啊\n我要反注册的代码\njava的语法\n原版删除我不知道，但要删mod合成方式我还是略懂。除非你会做mod，否则只有npc mod是可以做到你的要求并且方法够简单。其实npcmod挺好的，你要ban物品合成是为了服务器吧？（我的猜测）很多服都有npc mod。如果真的是服务器，插件就够了"
        },
        {
            "author": "JIE__",
            "timestamp": 1439354520,
            "txt_content": "west.myth 发表于 2015-8-12 12:09\n原版删除我不知道，但要删mod合成方式我还是略懂。除非你会做mod，否则只有npc mod是可以做到你的要求并 ...\n就是做mod，不知道才问的"
        },
        {
            "author": "2545320709",
            "timestamp": 1439384460,
            "txt_content": "west.myth 发表于 2015-8-11 18:11\n不需要自定义合成mod，只要在npc mod全局设置里删掉你不要的合成方式即可。满意请给最佳，如有问题请回复我 ...\nNPCmod只能删除NPCmod新创建的合成，其他的都不行"
        },
        {
            "author": "fyfly",
            "timestamp": 1439386920,
            "txt_content": "1048139283 发表于 2015-8-12 12:42\n就是做mod，不知道才问的\n花了十几分钟写了个Helper类，吐槽一下MC坑爹的代码，ItemStack和IRecipe的equals()方法竟然都没有Override，导致我的写的这个方法这么麻烦。\n\n这个类我放在Gist上，你可以到这里来查看: https://gist.github.com/Meow-J/61e2ab64a9bd5a48447b\n由于代码太多而且不好看就不贴在论坛里了，如果你打不开我再帮你贴过来。\n\n使用：        // 删除指定物品的合成\n        RecipeRemover.removeRecipe(new ItemStack(Items.stick));\n\n        // 删除指定无序合成\n        List<ItemStack> inputList = new ArrayList<ItemStack>();\n        inputList.add(new ItemStack(Items.ender_pearl, 1));\n        inputList.add(new ItemStack(Items.blaze_powder, 1));\n\n        RecipeRemover.removeShapelessRecipe(new ShapelessRecipes(new ItemStack(Items.ender_eye, 1), inputList));\n        // 删除指定有序合成\n        RecipeRemover.removeShapedRecipe(new ShapedRecipes(1, 1, new ItemStack[]{new ItemStack(Blocks.log, 1, BlockPlanks.EnumType.OAK.getMetadata())}, new ItemStack(Blocks.planks, 4, BlockPlanks.EnumType.OAK.getMetadata())));复制代码\n\n这三个方法分别删除了木棍，末影之眼和橡木木板的合成，放到你的init里面(注意不是preInit或者是postInit)就行了"
        },
        {
            "author": "fyfly",
            "timestamp": 1439399280,
            "txt_content": "fyfly 发表于 2015-8-12 22:30\n补充一下原理：\n\n通过下面这段代码可以获取所有注册过的合成表，类型为List(其实是List，但是要转换)：\n继续更新，已经添加了OreDictionary的支持，脑子抽了拖得有点久，地址仍然在这里不变: https://gist.github.com/Meow-J/61e2ab64a9bd5a48447b\n\n示例：\n        RecipeRemover.removeShapedOreRecipe(new ShapedOreRecipe(Items.minecart, \"X X\", \"XXX\", 'X', \"ingotIron\"));\n        RecipeRemover.removeShapelessOreRecipe(new ShapelessOreRecipe(Items.flint_and_steel, Items.flint, \"ingotIron\"));复制代码\n仍然和上面一样添加到Init里面，现在这两行代码删除了矿车和打火石的配方，不得不承认Forge终于把Recipe的构造器改得像人样了。注意原版一共有200+配方被替换成了OreDictionary形式，如果用上上贴那两个方法是不能删除的(当然如果只搜索物品删除还是可以的)。\n\n对了，我一直是在1.8版本下的测试的，到1.7.10应该也一样，如果不行再叫我。还有一点，每个方法都是有返回值的，如果删除成功会返回true，删除失败会返回false."
        },
        {
            "author": "fyfly",
            "timestamp": 1439446080,
            "txt_content": "fyfly 发表于 2015-8-13 01:08\n继续更新，已经添加了OreDictionary的支持，脑子抽了拖得有点久，地址仍然在这里不变: https://gist.gith ...\n鉴于最近各种屏蔽外网，现在把代码直接从Gist上贴上来，我仍然建议你去Gist上查看代码: https://gist.github.com/Meow-J/61e2ab64a9bd5a48447b\n\n代码（注：Meow J就是我，代码很难看别吐槽了orz）：\n/**\n * A collection of methods that help remove recipes from the registered recipes list.(Code is soooooooo ugly. I blame Mojang)\n *\n * [url=home.php?mod=space&uid=1231151]@author[/url] Meow J\n */\npublic class RecipeRemover {\n\n    /**\n     * Removes the first recipe found by its output.\n     *\n     * @param stack The output itemStack\n     * [url=home.php?mod=space&uid=491268]@Return[/url] true if successfully removed the recipe\n     */\n    public static boolean removeRecipe(ItemStack stack) {\n        for (Object rcp : CraftingManager.getInstance().getRecipeList()) {\n            if (rcp != null && rcp instanceof IRecipe && ((IRecipe) rcp).getRecipeOutput() != null\n                    && ((IRecipe) rcp).getRecipeOutput().isItemEqual(stack)) {\n                CraftingManager.getInstance().getRecipeList().remove(rcp);\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Remove the exact shaped recipe from the registered recipe list.\n     *\n     * @param shapedRecipe The shaped recipe you want to remove\n     * @return true if successfully removed the recipe\n     */\n    public static boolean removeShapedRecipe(ShapedRecipes shapedRecipe) {\n        for (Object rcp : CraftingManager.getInstance().getRecipeList()) {\n            if (rcp != null && rcp instanceof ShapedRecipes && shapedRecipe.getRecipeOutput().isItemEqual(((ShapedRecipes) rcp).getRecipeOutput())\n                    && shapedRecipe.recipeItems.length == ((ShapedRecipes) rcp).recipeItems.length) {\n                // The equals() method in IRecipe is not overridden!!!!!!!!\n                boolean equalRecipe = true;\n                ItemStack stack1, stack2;\n                for (int i = 0; i < shapedRecipe.recipeItems.length; ++i) {\n                    stack1 = shapedRecipe.recipeItems[i];\n                    stack2 = ((ShapedRecipes) rcp).recipeItems[i];\n                    if (!(stack1 == null && stack2 == null || ((stack1 != null && stack2 != null) && stack1.isItemEqual(stack2))))\n                        equalRecipe = false;\n                }\n                if (equalRecipe) {\n                    CraftingManager.getInstance().getRecipeList().remove(rcp);\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Remove the exact shapeless recipe from the registered recipe list.\n     *\n     * @param shapelessRecipes The shapeless recipe you want to remove\n     * @return true if successfully removed the recipe\n     */\n    @SuppressWarnings(\"unchecked\")\n    public static boolean removeShapelessRecipe(ShapelessRecipes shapelessRecipes) {\n        for (Object rcp : CraftingManager.getInstance().getRecipeList()) {\n            if (rcp != null && rcp instanceof ShapelessRecipes && shapelessRecipes.getRecipeOutput().isItemEqual(((ShapelessRecipes) rcp).getRecipeOutput())) {\n                if (areItemStackListsEqual(shapelessRecipes.recipeItems, ((ShapelessRecipes) rcp).recipeItems)) {\n                    CraftingManager.getInstance().getRecipeList().remove(rcp);\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Remove the exact shaped ore recipe from the registered recipe list.\n     *\n     * @param shapedOreRecipe The shaped ore recipe you want to remove\n     * @return true if successfully removed the recipe\n     */\n    @SuppressWarnings(\"unchecked\")\n    public static boolean removeShapedOreRecipe(ShapedOreRecipe shapedOreRecipe) {\n        for (Object rcp : CraftingManager.getInstance().getRecipeList()) {\n            if (rcp != null && rcp instanceof ShapedOreRecipe && shapedOreRecipe.getRecipeOutput().isItemEqual(((ShapedOreRecipe) rcp).getRecipeOutput())\n                    && shapedOreRecipe.getInput().length == ((ShapedOreRecipe) rcp).getInput().length) {\n                boolean equalRecipe = true;\n                Object stack1, stack2;\n                for (int i = 0; i < shapedOreRecipe.getInput().length; ++i) {\n                    stack1 = shapedOreRecipe.getInput()[i];\n                    stack2 = ((ShapedOreRecipe) rcp).getInput()[i];\n                    if (stack1 instanceof ItemStack && stack2 instanceof ItemStack) {\n                        if (!((ItemStack) stack1).isItemEqual(((ItemStack) stack2)))\n                            equalRecipe = false;\n                    } else if (stack1 instanceof List && stack2 instanceof List) {\n                        if (!areItemStackListsEqual((List<ItemStack>) stack1, (List<ItemStack>) stack2))\n                            equalRecipe = false;\n                    } else if (stack1 == null || stack2 == null) {\n                        // My brain explodes\n                        if (stack1 != null || stack2 != null) {\n                            equalRecipe = false;\n                        }\n                    } else {\n                        equalRecipe = false;\n                    }\n                }\n                if (equalRecipe) {\n                    CraftingManager.getInstance().getRecipeList().remove(rcp);\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Remove the exact shapeless ore recipe from the registered recipe list.\n     *\n     * @param shapelessOreRecipe The shaped ore recipe you want to remove\n     * @return true if successfully removed the recipe\n     */\n    @SuppressWarnings(\"unchecked\")\n    public static boolean removeShapelessOreRecipe(ShapelessOreRecipe shapelessOreRecipe) {\n        for (Object rcp : CraftingManager.getInstance().getRecipeList()) {\n            if (rcp != null && rcp instanceof ShapelessOreRecipe && shapelessOreRecipe.getRecipeOutput().isItemEqual(((ShapelessOreRecipe) rcp).getRecipeOutput())) {\n                boolean equalRecipe = true;\n                for (Object stack1 : shapelessOreRecipe.getInput()) {\n                    boolean equalItem = false;\n                    for (Object stack2 : ((ShapelessOreRecipe) rcp).getInput()) {\n                        if (stack1 instanceof ItemStack && stack2 instanceof ItemStack) {\n                            if (((ItemStack) stack1).isItemEqual(((ItemStack) stack2)))\n                                equalItem = true;\n                        } else if (stack1 instanceof List && stack2 instanceof List) {\n                            if (areItemStackListsEqual(((List) stack1), (List) stack2))\n                                equalItem = true;\n                        }\n                    }\n                    if (!equalItem) equalRecipe = false;\n                }\n                if (equalRecipe) {\n                    CraftingManager.getInstance().getRecipeList().remove(rcp);\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Determine whether the two input lists are equal\n     *\n     * @return true if the two lists are equal\n     */\n    private static boolean areItemStackListsEqual(List<ItemStack> list1, List<ItemStack> list2) {\n        // The equals() method in ItemStack is not overridden!!!!!!!!\n        boolean equalList = true;\n\n        for (ItemStack stack1 : list1) {\n            boolean containsItem = false;\n            for (ItemStack stack2 : list2) {\n                if (stack1 != null && stack2 != null && stack1.isItemEqual(stack2))\n                    containsItem = true;\n            }\n            if (!containsItem) equalList = false;\n        }\n        return equalList;\n    }\n}复制代码\n\n"
        },
        {
            "author": "fyfly",
            "timestamp": 1439446200,
            "txt_content": "fyfly 发表于 2015-8-13 14:08\n鉴于最近各种屏蔽外网，现在把代码直接从Gist上贴上来，我仍然建议你去Gist上查看代码: https://gist.git ...\n代码被mcbbs编辑器搞得有点问题，还是建议去Gist上看"
        },
        {
            "author": "MC.cdasc",
            "timestamp": 1439458920,
            "txt_content": "minetweaker转载自Minetweaker wiki\n1.6.4\nSpecific recipe removalSo far we decided that we would be removing all recipes for the stick. In vanilla minecraft, there is also only one, so that's not an issue. But what if we want to be more specific? Often there are multiple recipes for the same item, and we may want to remove one yet keep the others.It is possible to be more specific in that case:recipes.removeShaped(<item.stick>, [[<tile.wood:*>], [<tile.wood:*>]]);This will remove only a single recipe - even if there are other recipes.It is also possible to remove all recipes that are shaped, or all recipes that are shapeless, by simply calling:recipes.removeShaped(<item.stick>);recipes.removeShapeless(<item.stick>);Also, wildcard patterns can be used to indicate that any kind of item would match for a certain position, as long as it's not empty:recipes.removeShaped(<item.stick>, [[<*>], [<*>]]);Likewise, when removing shapeless recipes, it is possible to only specify one or more ingredients of the shapeless recipe and then tell minetweaker that the remainder of the recipe may contain anything:recipes.removeShapeless(<tile.cloth:*>, [<tile.cloth>]); // removes all wool coloring recipesDon't be fooled by the item name - it is the wool block.\n\n1.7\nBasic RecipesThere is no visual editor, so you have to understand how to write your recipes as text.As a little introduction, let's consider the recipe for sticks. In vanilla minecraft, it takes 2 wood planks to make 4 sticks, and they have to put above each other. But what if we want to change that? What if, say, we find it more logical to put the two wood block diagonally instead? (this stick is diagonal, right?)Modifying the sticks recipe is wonderfully easy. Make a script with the following contents:recipes.remove(<minecraft:stick>);recipes.addShaped(<minecraft:stick> * 4, [[<minecraft:planks>, null], [null, <minecraft:planks>]]);Open a new game (or reload scripts, if you are already in a game). Now take 2 oak wood planks and test your recipe.It works? Great! But now you may have noticed a flaw in the recipe: if you put birch or spruce wood, it doesn't work!Why doesn't it work? The \"planks\" item has subitems that are distinguished by not only the item name, but also by its meta value. By default, if you retrieve an item with the bracket syntax, MineTweaker assumes you want the item with meta value 0. And that's what it returned - the \"oak planks\" item. But we want an ingredient which essentially means \"any kind of wood\".Luckily, this is easy to fix. When using the bracket syntax, besides the name, we can also define a meta value. For instance, <minecraft:planks:1> refers to spruce wood. We can also use the wildcard (*) to get an item meaning \"any meta value is good\": <minecraft:planks:*>.Thus, change your recipe and reload:recipes.remove(<minecraft:stick>);recipes.addShaped(<minecraft:stick> * 4, [[<minecraft:planks:*>, null], [null, <minecraft:planks:*>]]);Fixed! Of course, you should use the ore dictionary entry for planks, which would be even better as it would be compatible with mod-added planks :)If need the full name of an item, you can hold it in your hand and use the /minetweaker hand command. It will print the name and copy it to the clipboard, so you can just paste it directly in your script.\n\n简单来说就是打代码\n例如recipes.removeShapeless(<tile.cloth:*>, [<tile.cloth>]); 移除所有羊毛染色配方recipes.remove(<minecraft:stick>); 移除输出木棍的所有配方"
        },
        {
            "author": "JIE__",
            "timestamp": 1439459580,
            "txt_content": "MC.cdasc 发表于 2015-8-13 17:42\nminetweaker转载自Minetweaker wiki\n1.6.4\n有1.8的吗??"
        },
        {
            "author": "fyfly",
            "timestamp": 1439465220,
            "txt_content": "1048139283 发表于 2015-8-13 17:53\n有1.8的吗??\n那几个命令是mod定义出来的脚本(并且不是代码!)必须要安装mod才能够使用。如果你想自己写mod删除原版的合成方法，请看我上面的几个帖子，用我的那个RecipeHelper。(正好对应是1.8版本的)"
        }
    ]
}