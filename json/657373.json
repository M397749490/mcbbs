{
    "title": "[已解决]插件的事件无法使用，后台报错",
    "author": "帅比小樊",
    "replyCount": 2,
    "timestamp": 1482841380,
    "txt_content": " 本帖最后由 帅比小樊 于 2016-12-27 20:44 编辑 \n\n  自己写的一个插件，使用了事件，但是在服务器里事件根本没用，包括让玩家说一句话也是不行，大概在明天都是可以的\n尝试做了很多改动，替换代码等等，结果都是在服务器里完全没有提示告终,发下我写的代码，来看看有没有什么问题\npackage my.Polymorph.PolymorphSpell;\n\nimport java.util.Random;\n\nimport org.bukkit.ChatColor;\nimport org.bukkit.DyeColor;\nimport org.bukkit.Location;\nimport org.bukkit.Material;\nimport org.bukkit.World;\nimport org.bukkit.entity.Player;\nimport org.bukkit.entity.Sheep;\nimport org.bukkit.entity.Wolf;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.Action;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.event.player.PlayerJoinEvent;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class PolymorphSpell extends JavaPlugin implements Listener {\n        @EventHandler\n        public void onJoin(PlayerJoinEvent event) {\n                event.setJoinMessage(\"欢迎你!\"+event.getPlayer().getCustomName());\n   }\n\n        \n        @SuppressWarnings(\"deprecation\")\n        @EventHandler\n        public void onInteract(PlayerInteractEvent event) {\n                if(event.getMaterial()==Material.STICK){\n                        if(event.getAction().equals(Action.RIGHT_CLICK_AIR));\n                        Player player = event.getPlayer();\n                        Location loc = player.getLocation();\n                        World world = player.getWorld();\n                if(event.getAction().equals(Action.LEFT_CLICK_AIR)){\n                        Wolf wolf0 = world.spawn(loc,Wolf.class);\n                        wolf0.setCustomName(\"凶恶的狗\");\n                        \n                }\n                        Sheep sheep0 = world.spawn(loc,Sheep.class);\n                        Random r = new Random();\n                        int i = r.nextInt(DyeColor.values().length);\n                        sheep0.setColor(DyeColor.values()[i]);\n                        sheep0.setCustomName(ChatColor.RED + \"一只萌萌的羊\");\n                        sheep0.setMaxHealth(30);\n        }\n        }\n}复制代码还有后台的报错信息\n[20:28:21 INFO]: [PolymorphSpell] Enabling PolymorphSpell v0.1\n[20:28:21 INFO]: [PolymorphSpell] 插件已经加载\n[20:28:21 ERROR]: Error occurred while enabling PolymorphSpell v0.1 (Is it up to\n date?)\njava.lang.IllegalArgumentException: Plugin already initialized!\n        at org.bukkit.plugin.java.PluginClassLoader.initialize(PluginClassLoader\n.java:98) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-\n50-gdce2b35-b3019jnks]\n        at org.bukkit.plugin.java.JavaPlugin.<init>(JavaPlugin.java:59) ~[craftb\nukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce2b35-b3019j\nnks]\n        at my.Polymorph.PolymorphSpell.PolymorphSpell.<init>(PolymorphSpell.java\n:20) ~[?:?]\n        at my.Polymorph.PolymorphSpell.myzhulei.onEnable(myzhulei.java:9) ~[?:?]\n\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:250) ~[c\nraftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce2b35-b\n3019jnks]\n        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader\n.java:350) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-\n50-gdce2b35-b3019jnks]\n        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManage\nr.java:389) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2\n-50-gdce2b35-b3019jnks]\n        at org.bukkit.craftbukkit.v1_7_R1.CraftServer.loadPlugin(CraftServer.jav\na:439) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-g\ndce2b35-b3019jnks]\n        at org.bukkit.craftbukkit.v1_7_R1.CraftServer.enablePlugins(CraftServer.\njava:375) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-5\n0-gdce2b35-b3019jnks]\n        at net.minecraft.server.v1_7_R1.MinecraftServer.m(MinecraftServer.java:3\n42) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce\n2b35-b3019jnks]\n        at net.minecraft.server.v1_7_R1.MinecraftServer.g(MinecraftServer.java:3\n19) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce\n2b35-b3019jnks]\n        at net.minecraft.server.v1_7_R1.MinecraftServer.a(MinecraftServer.java:2\n75) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce\n2b35-b3019jnks]\n        at net.minecraft.server.v1_7_R1.DedicatedServer.init(DedicatedServer.jav\na:175) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-g\ndce2b35-b3019jnks]\n        at net.minecraft.server.v1_7_R1.MinecraftServer.run(MinecraftServer.java\n:424) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gd\nce2b35-b3019jnks]\n        at net.minecraft.server.v1_7_R1.ThreadServerApplication.run(SourceFile:6\n17) [craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce\n2b35-b3019jnks]\nCaused by: java.lang.IllegalStateException: Initial initialization\n        at org.bukkit.plugin.java.PluginClassLoader.initialize(PluginClassLoader\n.java:101) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2\n-50-gdce2b35-b3019jnks]\n        at org.bukkit.plugin.java.JavaPlugin.<init>(JavaPlugin.java:59) ~[craftb\nukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce2b35-b3019j\nnks]\n        at my.Polymorph.PolymorphSpell.myzhulei.<init>(myzhulei.java:5) ~[?:?]\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n ~[?:1.7.0_79]\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n ~[?:1.7.0_79]\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Sou\nrce) ~[?:1.7.0_79]\n        at java.lang.reflect.Constructor.newInstance(Unknown Source) ~[?:1.7.0_7\n9]\n        at java.lang.Class.newInstance(Unknown Source) ~[?:1.7.0_79]\n        at org.bukkit.plugin.java.PluginClassLoader.<init>(PluginClassLoader.jav\na:52) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-g\ndce2b35-b3019jnks]\n        at org.bukkit.plugin.java.JavaPluginLoader.loadPlugin(JavaPluginLoader.j\nava:133) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-5\n0-gdce2b35-b3019jnks]\n        at org.bukkit.plugin.SimplePluginManager.loadPlugin(SimplePluginManager.\njava:313) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-\n50-gdce2b35-b3019jnks]\n        at org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager\n.java:236) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2\n-50-gdce2b35-b3019jnks]\n        at org.bukkit.craftbukkit.v1_7_R1.CraftServer.loadPlugins(CraftServer.ja\nva:350) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50\n-gdce2b35-b3019jnks]\n        at org.bukkit.craftbukkit.v1_7_R1.CraftServer.<init>(CraftServer.java:31\n2) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce\n2b35-b3019jnks]\n        at net.minecraft.server.v1_7_R1.PlayerList.<init>(PlayerList.java:63) ~[\ncraftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce2b35-\nb3019jnks]\n        at net.minecraft.server.v1_7_R1.DedicatedPlayerList.<init>(SourceFile:14\n) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-gdce2\nb35-b3019jnks]\n        at net.minecraft.server.v1_7_R1.DedicatedServer.init(DedicatedServer.jav\na:126) ~[craftbukkit-1.7.2-R0.3-20140211.200058-44.jar:git-Bukkit-1.7.2-R0.2-50-\ngdce2b35-b3019jnks]复制代码\n\n就是这些了，很大的一个问题就是插件里写的事件似乎就是无法被加载一样，之前那个让玩家说句话的事件是可以加载并在服务器里能显示的，但是\n过几天，就无法显示了，真不知道是为啥,希望有dalao来解决\n\n\n\n\n\n\n\n\n\n\n不用审核了，问题已经解决，http://www.mcbbs.net/thread-48069-1-1.html在此处解决，删帖\n\n\n",
    "replies": [
        {
            "author": "tdiant",
            "timestamp": 1482899820,
            "txt_content": "第一，java.lang.IllegalArgumentException: Plugin already initialized!\nPlugin already initialized 这个报错记录多详细。就是说，你的服务器plugins文件夹里，有两个这个插件，重了，删一个就行了。\n\n第二，监听器得注册，这个问题应该意识到才对。你想想，你的监听器，方法名是可以自己起的，那Bukkit是怎么知道这是个监听器，有事件了去掉用这个方法的？Bukkit又是怎么知道这个类里有监听器的？那必然有一个渠道，来给Bukkit起到通风报信的作用，就是注册他们。\n\n第三，咱写代码不能说让他能运行就OK，不要做“能用主义者”。Notch的早起代码和Forge的Src生动形象的告诫了我们“能用主义”的巨大危害。杜绝“能用主义”，从代码格式开始，把代码的格式写整齐了，文明你我他。\n\n遍观这个类，我心中充满了波澜。尽管我也挺垃圾，可是你这个代码。。。得注意注意啊。。。"
        },
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1483154640,
            "txt_content": "tdiant 发表于 2016-12-28 12:37\n第一，java.lang.IllegalArgumentException: Plugin already initialized!\nPlugin already initialized 这 ...\n别讲了，你不是也是能用就行的么？看来我对你的印象有误？"
        }
    ]
}