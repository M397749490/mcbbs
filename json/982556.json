{
    "title": "NMS求助（net.minecraft.server）",
    "author": "Levi_Marvin",
    "replyCount": 14,
    "timestamp": 1583892300,
    "txt_content": "我想在我的插件实现ActionBar和title，\n当我用nms的时候有这个问题，版本是1.12.2，用spigot（不是API）开发\n\n\n\n\n\nU3IRU3)_SDV@VFTR@R42M}B.png (6.62 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-11 10:05 上传\n\n\n\n\n\n大佬们怎么解决啊\n",
    "replies": [
        {
            "author": "天辉胡萝卜",
            "timestamp": 1583893740,
            "txt_content": "是不能cast吗？CraftPlayer和Player一直可以相互cast\n\n有完整点的代码吗？"
        },
        {
            "author": "Levi_Marvin",
            "timestamp": 1583893920,
            "txt_content": "疾风暗影 发表于 2020-3-11 10:29\n是不能cast吗？CraftPlayer和Player一直可以相互cast\n\n有完整点的代码吗？\n有的，\n//发送title内容\n                ChatComponentText chat = new ChatComponentText(titleMessagesList.get(Variable.b));\n                PacketPlayOutTitle pack = new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.TITLE,chat,1,Variable.titleStayTime,1);\n                //发送\n                CraftPlayer craftPlayer = (CraftPlayer)player;\n                EntityPlayer entityPlayer = craftPlayer.getHandle();\n                PlayerConnection playerConnection = entityPlayer.playerConnection;\n                playerConnection.sendPacket(pack);复制代码"
        },
        {
            "author": "Levi_Marvin",
            "timestamp": 1583894100,
            "txt_content": "疾风暗影 发表于 2020-3-11 10:29\n是不能cast吗？CraftPlayer和Player一直可以相互cast\n\n有完整点的代码吗？\n要不你加我好友吧，我直接让你远程看代码qwq"
        },
        {
            "author": "Mohist-Communit",
            "timestamp": 1583894580,
            "txt_content": "//屏幕下方\n    public static void sendPlayerAbar(Player p, String text) {\n        IChatBaseComponent icbc = IChatBaseComponent.ChatSerializer.a(\"{\"text\": \"\" + text + \"\"}\");\n        PacketPlayOutChat ppoc = new PacketPlayOutChat(icbc, ChatMessageType.GAME_INFO);\n        ((CraftPlayer)p).getHandle().playerConnection.sendPacket(ppoc);\n    }\n    //屏幕中间\n    public static void sendPlayerTitle(Player player, int fadeIn, int stay, int fadeOut, String title) {\n        PlayerConnection connection = ((CraftPlayer)player).getHandle().playerConnection;\n        PacketPlayOutTitle packetPlayOutTimes = new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.TIMES, null, fadeIn, stay, fadeOut);\n        connection.sendPacket(packetPlayOutTimes);\n        IChatBaseComponent titleMain = IChatBaseComponent.ChatSerializer.a(\"{\"text\": \"\" + title + \"\"}\");\n        PacketPlayOutTitle packetPlayOutTitle = new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.TITLE, titleMain);\n        connection.sendPacket(packetPlayOutTitle);\n    }\n    //屏幕中间二排\n    public static void sendPlayerSubTitle(Player player, int fadeIn, int stay, int fadeOut, String subTitle) {\n        PlayerConnection connection = ((CraftPlayer)player).getHandle().playerConnection;\n        PacketPlayOutTitle packetPlayOutTimes = new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.TIMES, null, fadeIn, stay, fadeOut);\n        connection.sendPacket(packetPlayOutTimes);\n        IChatBaseComponent titleSub = IChatBaseComponent.ChatSerializer.a(\"{\"text\": \"\" + subTitle + \"\"}\");\n        PacketPlayOutTitle packetPlayOutSubTitle = new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.SUBTITLE, titleSub);\n        connection.sendPacket(packetPlayOutSubTitle);\n        IChatBaseComponent titleMain = IChatBaseComponent.ChatSerializer.a(\"{\"text\": \"\"}\");\n        PacketPlayOutTitle packetPlayOutTitle = new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.TITLE, titleMain);\n        connection.sendPacket(packetPlayOutTitle);\n    }\n    // 双排显示\n    public static void sendFullTitle(Player player, int fadeIn, int stay, int fadeOut, String title, String subtitle) {\n        PlayerConnection connection = ((CraftPlayer)player).getHandle().playerConnection;\n        PacketPlayOutTitle packetPlayOutTimes = new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.TIMES, null, fadeIn, stay, fadeOut);\n        connection.sendPacket(packetPlayOutTimes);\n        IChatBaseComponent titleSub = IChatBaseComponent.ChatSerializer.a(\"{\"text\": \"\" + subtitle + \"\"}\");\n        PacketPlayOutTitle packetPlayOutSubTitle = new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.SUBTITLE, titleSub);\n        connection.sendPacket(packetPlayOutSubTitle);\n        IChatBaseComponent titleMain = IChatBaseComponent.ChatSerializer.a(\"{\"text\": \"\" + title + \"\"}\");\n        PacketPlayOutTitle packetPlayOutTitle = new PacketPlayOutTitle(PacketPlayOutTitle.EnumTitleAction.TITLE, titleMain);\n        connection.sendPacket(packetPlayOutTitle);\n    }复制代码"
        },
        {
            "author": "Levi_Marvin",
            "timestamp": 1583909340,
            "txt_content": "Mohist-Communit 发表于 2020-3-11 10:43\n墨端开发者好呀！我现在用的墨端！支持一下\n我是想实现ActionBar和Title，然后发现问题，\n用的1.12.2的Spigot做的lib"
        },
        {
            "author": "Mohist-Communit",
            "timestamp": 1583909580,
            "txt_content": "暗夜Dark 发表于 2020-3-11 14:49\n墨端开发者好呀！我现在用的墨端！支持一下\n我是想实现ActionBar和Title，然后发现问题，\n用的1. ...\n所以你发现了什么问题？直接用我给的代码就行"
        },
        {
            "author": "Levi_Marvin",
            "timestamp": 1583910300,
            "txt_content": "Mohist-Communit 发表于 2020-3-11 14:53\n所以你发现了什么问题？直接用我给的代码就行\n唔。。直接用的话还是不行，不过我发现我最开始自己实现的时候\nPlayer player没有声明player是啥类型，所以报错了。现在ok了\n虽然没用上你的代码，但还是谢谢帮助！\n（吹爆Mohist！"
        },
        {
            "author": "Levi_Marvin",
            "timestamp": 1583911740,
            "txt_content": "Mohist-Communit 发表于 2020-3-11 10:43\n终于向java屈服的我，来找大佬您了qwq\nIChatBaseComponent titleMain = IChatBaseComponent.ChatSerializer.a(\"{\"text\": \"\" + title + \"\"}\");\n这一段我写进去以后显示“(\"{\"text\": \"\" + title + \"\"}\");”这块有问题qwq"
        },
        {
            "author": "Mohist-Communit",
            "timestamp": 1583912880,
            "txt_content": "暗夜Dark 发表于 2020-3-11 15:29\n终于向java屈服的我，来找大佬您了qwq\n\n这一段我写进去以后显示“(\"{\"text\": \"\" + title + \"\"}\");”这块 ...\na(\"{\\\"text\\\": \\\"\" + text + \"\\\"}\");  这样 斜杠被吞了"
        },
        {
            "author": "Levi_Marvin",
            "timestamp": 1583914260,
            "txt_content": "Mohist-Communit 发表于 2020-3-11 15:48\na(\"{\\\"text\\\": \\\"\" + text + \"\\\"}\");  这样 斜杠被吞了\n大佬，那这个是不是执行一次就可以给全部玩家发一次？qwq"
        },
        {
            "author": "Mohist-Communit",
            "timestamp": 1583917260,
            "txt_content": "暗夜Dark 发表于 2020-3-11 16:11\n大佬，那这个是不是执行一次就可以给全部玩家发一次？qwq\n这是单个玩家的 全部玩家 你遍历在线玩家然后发送就行"
        },
        {
            "author": "Gmosuu59",
            "timestamp": 1583918580,
            "txt_content": "感谢学到了"
        },
        {
            "author": "luanmenglei",
            "timestamp": 1584370740,
            "txt_content": "其实使用ProtocolLib更方便呢。"
        },
        {
            "author": "Levi_Marvin",
            "timestamp": 1584844260,
            "txt_content": "Mohist-Communit 发表于 2020-3-11 17:01\n这是单个玩家的 全部玩家 你遍历在线玩家然后发送就行\n大佬，我用for遍历发现还是没用啊\n玩家物品栏上面一点还是不显示"
        }
    ]
}