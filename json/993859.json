{
    "title": "救救孩子！内存和cpu都充足，tps个位数",
    "author": "kiod",
    "replyCount": 24,
    "timestamp": 1584883200,
    "txt_content": "服务器绝对内存充足，cpu完全没问题。但是tps有时候飙到了2.3！正常都是个位数！有谁见过这么低的？\n优化插件装了，但不太有效果，谁知道这是什么问题吗？timings：http:/ /www.spigotmc.org/go/ timings\n\n\n\n\n\n1 (2).png (7.4 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-22 21:19 上传\n\n\n\n\n\n\n\n\n\n\n1 (1).png (111.48 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-22 21:19 上传\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "EmptyLava",
            "timestamp": 1584883200,
            "txt_content": " 本帖最后由 EmptyLava 于 2020-3-22 22:05 编辑 \n\n漏斗炸了\npct tick 280%\n原因(2)\n1.漏斗这个方块实体导致的(200%)\n2.实体(35%)\n优化方案\n1.在spigot.yml中设置\nhopper-transfer: 40\nhopper-check: 40\n可以大幅下降漏斗占用\n2.在spigot.yml中设置\nentity-tracking-range\nanimals: 24\nmonsters: 24\n3.在spigot.yml中设置\nentity-activation-range\nanimals: 20\nmonsters: 24\n4.在bukkit.yml中设置\nmonster-spawns: 3(如果设置过了就增加2)\n5.windows系统的话,在任务管理器中右键javaw.exe,转详细信息后右键javaw.exe将优先级改为实时,这可以增加cpu的占用率从而提升tps(但服务器重启后需要重新配置,建议配合计划任务)\n6.\n服务器目录下的tileentities这个文件进去之后找到卡服的物品 默认是     \ntick-interval: 1\n改成5或者更高\n能有效的对症优化这样可以修改漏斗的传输时间间隔主要优化1和6\n\n预计tps提升至:15-19"
        },
        {
            "author": "结城希亚",
            "timestamp": 1584883260,
            "txt_content": "你这timings链接不正确"
        },
        {
            "author": "xmdhs",
            "timestamp": 1584883260,
            "txt_content": "能重新发一下 timings 吗"
        },
        {
            "author": "kiod",
            "timestamp": 1584883740,
            "txt_content": "御炎Roinflam 发表于 2020-3-22 21:21\n你这timings链接不正确\n等等啊，现在弄一下"
        },
        {
            "author": "kiod",
            "timestamp": 1584883860,
            "txt_content": "御炎Roinflam 发表于 2020-3-22 21:21\n你这timings链接不正确\nhttp://www.spigotmc.org/go/timing"
        },
        {
            "author": "结城希亚",
            "timestamp": 1584883920,
            "txt_content": "kiod 发表于 2020-3-22 21:31\nhttp://www.spigotmc.org/go/timing\n你给我水龙头社区干什么？"
        },
        {
            "author": "kiod",
            "timestamp": 1584883980,
            "txt_content": "御炎Roinflam 发表于 2020-3-22 21:32\n你给我水龙头社区干什么？\n不是打timings report？第一次遇到这个 有的不懂"
        },
        {
            "author": "结城希亚",
            "timestamp": 1584883980,
            "txt_content": "kiod 发表于 2020-3-22 21:33\n不是打timings report？第一次遇到这个 有的不懂\n先输入/timings on，等个几十分钟采样\n然后再输入/timings paste\n把链接发过来就行"
        },
        {
            "author": "kiod",
            "timestamp": 1584884100,
            "txt_content": "御炎Roinflam 发表于 2020-3-22 21:33\n先输入/timings on，等个几十分钟采样\n然后再输入/timings paste\n把链接发过来就行 ...\n行，我试试看"
        },
        {
            "author": "x269361945",
            "timestamp": 1584884340,
            "txt_content": "优化一下服务端吧"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1584884580,
            "txt_content": "？迷了\n你不会复制的话就直接给完整的提示 the report can be\n如果链接后面没有go/timing/xxxxx的话，上传服务器目录下timings文件夹内最近一次的文件"
        },
        {
            "author": "kiod",
            "timestamp": 1584885360,
            "txt_content": "御炎Roinflam 发表于 2020-3-22 21:33\n先输入/timings on，等个几十分钟采样\n然后再输入/timings paste\n把链接发过来就行 ...\nhttps://www.spigotmc.org/go/timings?url=ututihejiy    是这个？"
        },
        {
            "author": "kiod",
            "timestamp": 1584885420,
            "txt_content": "EmptyLava 发表于 2020-3-22 21:43\n？迷了\n你不会复制的话就直接给完整的提示 the report can be\n如果链接后面没有go/timing/xxxxx的话，上传 ...\nhttps://www.spigotmc.org/go/timings?url=ututihejiy"
        },
        {
            "author": "结城希亚",
            "timestamp": 1584885480,
            "txt_content": " 本帖最后由 御炎Roinflam 于 2020-3-22 22:09 编辑 \n\n你的漏斗真的多到爆炸\n在spigot.yml中将\nhopper-transfer, hopper-check, hopper-amount（漏斗传输/检查/数量）\n默认: transfer:8, check:8, amount:1\n建议: transfer:24, check:24, amount:3\n把这些数值调高，调很高可以很有效的防止漏斗计算过多卡服\n\n然后就是NoSpawnChunks这个插件，负优化，建议换成\n[管理|修正|机械|综合|整地]pTweaks+—— 优化插件全新归来[1.7-1.12]\nhttps://www.mcbbs.net/thread-800399-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\nDIM2这个世界有人跑图，按照我下面通用优化方案的WB填充下\n\n在就是默认的世界保存也会卡服\n在Bukkit.yml里把autosave设置为0\n然后加上这个异步保存插件\n\n[管理] AutoSave 0.2.6 —— 更好的更流畅的自动保存地图等等 [全版本]\nhttps://www.mcbbs.net/thread-775843-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n至于机器的话可以用我写的插件限制一下\n[管理]ChunkBlockLimit ——  可视化的区块限制插件[1.6-1.14.X]\nhttps://www.mcbbs.net/thread-984759-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n如果以后还有什么卡服的物品，你可以找到它的英文名\n在服务端搜tileentities.yml，ctrl+f搜对应的，把数值调大就行\n\n通用优化方案：\n1、加装优化插件\n[SCT][优化][付费]LagAssist —— 不可直视的九合一优化插件[1.8-1.14]\nhttps://www.mcbbs.net/thread-881861-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n2、把服务端下spigot.yml文件里的视距view-distance数值改小，最好2-4\n3、把服务端下spigot.yml文件里的max-tick-time数值\n     可以适当减少（降低玩家体验提高tps）或者适当提高（降低tps提高玩家体验）\n4、参考站外一个比较详细的配置优化\nhttps://help.mcstory.net/Optimization.html\n5、可以尝试通过世界边界插件填充来让跑图不卡\n[管理|安全] WorldBorder —— 世界边界★还在担心被跑图吗 【汉化】[全版本]\nhttps://www.mcbbs.net/thread-608265-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n\n\n\n\n\n"
        },
        {
            "author": "kiod",
            "timestamp": 1584885660,
            "txt_content": "御炎Roinflam 发表于 2020-3-22 21:58\n你的漏斗真的多到爆炸\nTileEntityHopper占用非常高\n还有机器什么的\n这.......不过才十几个人 居然这么多问题"
        },
        {
            "author": "结城希亚",
            "timestamp": 1584885720,
            "txt_content": "kiod 发表于 2020-3-22 22:01\n这.......不过才十几个人 居然这么多问题\n几十人也够了，漏斗随便放的时候把你服都扬咯"
        },
        {
            "author": "kiod",
            "timestamp": 1584887460,
            "txt_content": "EmptyLava 发表于 2020-3-22 22:02\n漏斗炸了\npct tick 280%\n原因(2)\n我全改一下试试"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1584887880,
            "txt_content": "kiod 发表于 2020-3-22 22:31\n我全改一下试试\n非红色字体里有一部分可能会影响玩家游戏体验\n\n如果服务器内还是卡的话可以继续提升下第一条的两个数值"
        },
        {
            "author": "结城希亚",
            "timestamp": 1584887940,
            "txt_content": "kiod 发表于 2020-3-22 22:31\n我全改一下试试\n你玩家会喷你的，严重影响游戏体验"
        },
        {
            "author": "kiod",
            "timestamp": 1584888420,
            "txt_content": "御炎Roinflam 发表于 2020-3-22 22:39\n你玩家会喷你的，严重影响游戏体验\n那只改那俩红色的 够吗"
        },
        {
            "author": "kiod",
            "timestamp": 1584888480,
            "txt_content": "EmptyLava 发表于 2020-3-22 22:02\n漏斗炸了\npct tick 280%\n原因(2)\n还有是 我这个好像是猫端，不知道有些地方是不是不好"
        },
        {
            "author": "结城希亚",
            "timestamp": 1584888480,
            "txt_content": "kiod 发表于 2020-3-22 22:47\n那只改那俩红色的 够吗\n不够，因为不止漏斗卡你的服\n\n还有很多因素，只是漏斗是最最最明显的一个（你的nospawnchunk能飞10000%信不信）"
        },
        {
            "author": "kiod",
            "timestamp": 1584888660,
            "txt_content": "EmptyLava 发表于 2020-3-22 22:02\n漏斗炸了\npct tick 280%\n原因(2)\n似乎没有叫tileentities的文件夹"
        },
        {
            "author": "坑货到家",
            "timestamp": 1584890400,
            "txt_content": "你确定不是服务器机房差劲嘛\n"
        }
    ]
}