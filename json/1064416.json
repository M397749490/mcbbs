{
    "title": "如何让玩家在输入指令后执行一些东西",
    "author": "Iron-HIM",
    "replyCount": 5,
    "timestamp": 1592628780,
    "txt_content": "FabricMod 1.15.2：\n例如，一个叫“AAbb”的玩家，在游戏内输入“/shoo”，输入完毕后服务器向玩家发送“HelloWorld”消息，并播放“minecraft:ui.toast.challenge_complete ambient”声音\n\n\n\n\n\nimage.png (20.45 KB, 下载次数: 0)\n\n下载附件\n\n2020-6-20 12:53 上传\n\n\n\n\n\n\n\n我用System.out.println()会将消息发送至控制台，我想让其发送到玩家游戏聊天框，并且播放Minecraft原版声音：minecraft:ui.toast.challenge_complete ambient\n",
    "replies": [
        {
            "author": "南柯郡守",
            "timestamp": 1592633880,
            "txt_content": "因为没接触过mod\n所以只能提供一点思路\n\n先获取到输入指令的玩家 以player为例\n当player输入指令后 先要给他发消息\n应该是类似player.sendMessage(msg);\n然后是播放声音 player.playSound(sound);\n\n以上代码是Bukkit的代码 这里只是作为例子提供思路\n\n具体实现以fabric的方法为准"
        },
        {
            "author": "Orion_shadow",
            "timestamp": 1592639580,
            "txt_content": "我是个新手，，不过下面这个方法可以试试看\n\nICommand接口内有个方法叫做\nvoid execute(MinecraftServer server, ICommandSender sender, String[] args) throws CommandException;复制代码\n可以实现这个接口的方法或者继承这个接口的实现类，CommandBase，都可以自己实现这个方法。\n播放音乐可以在execute内部使用下面这个方法试试\n        world.playSound(null, player.posX, player.posY, player.posZ, SoundLoader.TRANSMUTE, SoundCategory.PLAYERS, 1, 1);\n复制代码\n然后就是利用sender的这个方法，就可以吧需要发送的发送到玩家聊天窗口\nsender.sendMessage(new TextComponentTranslation(\"commands.success\");复制代码"
        },
        {
            "author": "Orion_shadow",
            "timestamp": 1592640180,
            "txt_content": "Orion_shadow 发表于 2020-6-20 15:53\n我是个新手，，不过下面这个方法可以试试看\n\nICommand接口内有个方法叫做\n我这个事1.12.2的，，"
        },
        {
            "author": "2534503188",
            "timestamp": 1593074460,
            "txt_content": "编程新手，来学习下呀"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1593092460,
            "txt_content": " 本帖最后由 洞穴夜莺 于 2020-6-25 21:44 编辑 \n\n首先由于你要发送消息给玩家，所以你的命令要改成只有玩家有权执行，对于服务器后台等杂七杂八的CommandSource直接告诉他没有权限\n.requires(src -> src.getEntity() instanceof ServerPlayerEntity)复制代码\n然后发送消息\nplayer.sendMessage(new LiteralText(\"Hello World\"));复制代码\nplayer.networkHandler.sendPacket(new PlaySoundS2CPacket(SoundEvents.UI_TOAST_CHALLENGE_COMPLETE, SoundCategory.AMBIENT,\n                        player.getX() + 0.5, player.getY() + 1.0, player.getZ() + 0.5,0.5f, 1.0f));复制代码\n其中0.5是音量，1.0是音调，这里直接发包而不是调用playSound是因为playSound会让该玩家附近的玩家也听到声音\n综上所述\nCommandRegistry.INSTANCE.register(false, dispatcher -> {\n            dispatcher.register(CommandManager.literal(\"shoo\").requires(src -> src.getEntity() instanceof ServerPlayerEntity).executes( ctx -> {\n                ServerPlayerEntity player = ctx.getSource().getPlayer();\n                player.sendMessage(new LiteralText(\"Hello World\"));\n                player.networkHandler.sendPacket(new PlaySoundS2CPacket(SoundEvents.UI_TOAST_CHALLENGE_COMPLETE, SoundCategory.AMBIENT,\n                        player.getX() + 0.5, player.getY() + 1.0, player.getZ() + 0.5,0.5f, 1.0f));\n                return 1;\n            }));\n        });复制代码\n"
        }
    ]
}