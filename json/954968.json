{
    "title": "PVP服务器人多之后就会掉TPS！附Timings报告！求解决QAQ！",
    "author": "Evasi0n丶",
    "replyCount": 10,
    "timestamp": 1581150600,
    "txt_content": "Spigot 1.12.2服务器的timings报告：\nhttps://timings.spigotmc.org/?url=hohikikuke\n大佬们能不能帮忙看看是哪些原因占用服务器的性能资源！\n\n这个服务器是纯命令方块的，没有用插件或者mod，\n因为是PVP服务器，所以对TPS要求比较高！\n特别是当服务器的TPS降低到19左右的时候，会有比较明显的吞刀、空刀的现象！\n还有就是有时候所有玩家会瞬间卡住一下，游戏画面会定格住，过1秒左右才恢复正常。\n\n在服务器不能装插件或者修改一些服务器设置的前提下，\n有没有什么在游戏内进行优化的方法，求大佬解惑！\n\n感激不尽QAQ！！！",
    "replies": [
        {
            "author": "xmdhs",
            "timestamp": 1581150600,
            "txt_content": "Evasi0n丶 发表于 2020-2-8 16:41\n谢谢！\n\n因为我们服是命令方块做的技能PVP，部分会涉及到召唤怪物来攻击敌方玩家的操作.. /gamerule doMo ...\n自动保存是瞬卡的原因。pvp 服务器也不需要保存地图\n\n别的话，ChunkSavePlugin  可以考虑删除"
        },
        {
            "author": "xmdhs",
            "timestamp": 1581150840,
            "txt_content": "关闭服务器的自动保存，bukkit.yml 里设置\n\nautosave:0\n\n既然是 pvp 服务器的话，怪物也没有必要生成了，输入 /gamerule doMobSpawning false"
        },
        {
            "author": "Evasi0n丶",
            "timestamp": 1581151260,
            "txt_content": "xmdhs 发表于 2020-2-8 16:34\n关闭服务器的自动保存，bukkit.yml 里设置\n\nautosave:0\n谢谢！\n\n因为我们服是命令方块做的技能PVP，部分会涉及到召唤怪物来攻击敌方玩家的操作.. /gamerule doMobSpawning false 有设置了，不让怪物自然生成~\n\n那timings报告上能体现出哪些是卡服的主要原因吗0.0"
        },
        {
            "author": "Evasi0n丶",
            "timestamp": 1581152400,
            "txt_content": "xmdhs 发表于 2020-2-8 16:45\n自动保存是瞬卡的原因。pvp 服务器也不需要保存地图\n\n别的话，ChunkSavePlugin  可以考虑删除 ...\n哦哦~ 原来如此\n\n还有一些疑问，除了瞬卡，就是timings报告内的“world - doTick”这一项占比非常高，这个world - doTick指的是服务器内命令方块高频执行的事件吗？\n\n以及Entities似乎也占比很高，这个指的是实体过多吗？"
        },
        {
            "author": "xmdhs",
            "timestamp": 1581152580,
            "txt_content": "Evasi0n丶 发表于 2020-2-8 17:00\n哦哦~ 原来如此\n\n还有一些疑问，除了瞬卡，就是timings报告内的“world - doTick”这一项占比非常高，这 ...\n不一定是命令，实体才 300 多，不可能卡的\nAverage Entities: 278.65 / 309.57"
        },
        {
            "author": "2546168529",
            "timestamp": 1581222660,
            "txt_content": "把视野调低一些\n在server.properties的view-distance 调到4-5"
        },
        {
            "author": "Evasi0n丶",
            "timestamp": 1581243660,
            "txt_content": " 本帖最后由 Evasi0n丶 于 2020-2-9 18:28 编辑 \n2546168529 发表于 2020-2-9 12:31\n把视野调低一些\n在server.properties的view-distance 调到4-5\n谢谢！\n\n那报告里的 world - doTick 一般指什么服务器里的哪些事件呢？\n还有 world - tickEntities 呢？"
        },
        {
            "author": "Evasi0n丶",
            "timestamp": 1581244080,
            "txt_content": "xmdhs 发表于 2020-2-8 17:03\n不一定是命令，实体才 300 多，不可能卡的\nAverage Entities: 278.65 / 309.57\n哦哦！因为我命令里有很多execute @e的内容，会一直探测实体.. 也就是说如果300个实体的话，我用命令不断地去高频检测他们，应该会对服务器整体的TPS有影响（这里指的不是瞬卡0.0）\n\n那报告里的 world - doTick 一般指什么服务器里的哪些事件呢？\n还有 world - tickEntities 呢？"
        },
        {
            "author": "xmdhs",
            "timestamp": 1581244500,
            "txt_content": "Evasi0n丶 发表于 2020-2-9 18:28\n哦哦！因为我命令里有很多execute @e的内容，会一直探测实体.. 也就是说如果300个实体的话，我用命令不断 ...\n都说了这个看不清的，paper 生成的 timings 要更详细，才能知道是哪些"
        },
        {
            "author": "Evasi0n丶",
            "timestamp": 1581245460,
            "txt_content": "xmdhs 发表于 2020-2-9 18:35\n都说了这个看不清的，paper 生成的 timings 要更详细，才能知道是哪些\n好的，谢谢大佬~"
        }
    ]
}