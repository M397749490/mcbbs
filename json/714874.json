{
    "title": "插件编写时关于事件PlayerPickupItemEvent监听修改物品的问题",
    "author": "ouqianwei",
    "replyCount": 0,
    "timestamp": 1501725240,
    "txt_content": " 本帖最后由 ouqianwei 于 2017-8-3 10:01 编辑 \n\n请教各位大佬\n我的代码想要实现当玩家捡起一个物品时更改被捡起的物品\n为何getItem().setItemStack(item)无效\n而getItem().getItemStack.setItemMeta(meta)就有效呢\n\n例如我想要将玩家捡起的[泥土]加上nbt标签更名为[泥土样本]\n我像这样写是没有效果的 捡起来的东西依旧是泥土\n public void onPickup(PlayerPickupItemEvent event){\n        if(event.getItem().getItemStack().equals(new ItemStack(Material.DIRT))){\n            ItemMeta meta = plugin.getServer().getItemFactory().getItemMeta(Material.DIRT);\n            meta.setDisplayName(\"§2DirtClumps\");\n            ItemStack item = event.getItem().getItemStack().clone();\n            item.setItemMeta(meta);\n            event.getItem().setItemStack(item);\n        }\n    }\n\n而我如果这样写就有效果 捡起的[泥土]确实被改名为了[泥土样本] 这是为什么呢？\n\n\n public void onPickup(PlayerPickupItemEvent event){\n        if(event.getItem().getItemStack().equals(new ItemStack(Material.DIRT))){\n            ItemMeta meta = plugin.getServer().getItemFactory().getItemMeta(Material.DIRT);\n            meta.setDisplayName(\"§2DirtClumps\");\n            event.getItem().getItemStack().setItemMeta(meta);\n        }\n    }\n\n在我取消事件之后我发现即使使用setItemStack靠近一个我要修改的物品之后它也的确被修改了\n但若我不取消事件 进入我的背包的仍然是原来的物品而不是修改后的物品\n\n\n我原以为修改物品只是修改你快要捡起的时候的物品\n而这个事件当中物品你已经获得了 是不会修改的\n但setItemMeta就不会出现这样的情况 于是我就很奇怪了\n\n实在是不明白为什么，希望各位赐教\n\n\n\n\n",
    "replies": []
}