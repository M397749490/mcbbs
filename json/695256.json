{
    "title": "服务器TPS和区块卸载问题",
    "author": "音凉",
    "replyCount": 7,
    "timestamp": 1496140440,
    "txt_content": "开的1.7.10mod服，用的是i5 7500，三星120g ssd，金士顿16g内存，性能完全够，40人的情况下TPS还是18.5-20这样\n但是服务器60人的时候TPS就会到15-16，最低能到12-13，CPU占用也不高，也没有一个核心占用很高的情况。\n内存和硬盘显示都没问题，宽带也是20M共享占用也才7或8M，优化插件LaggRemover、NeverLag 也用了，\n优化教程也看了，但是人一多TPS就上不去，偶尔也会瞬降6、7秒左右，服务器区块加载有点多，而且插件卸载不掉。\n并没有区块加载器之类的东西（有也都ban了，不可能让玩家乱加载），但是区块卸载没有作用。\n\n，服务器用的是thermos端，mod也不是很多，是服务器配置不能充分利用还是服务端的问题？问一下大佬们怎么解决下？\n多出来20人难道就真能这么卡么。。\n",
    "replies": [
        {
            "author": "906761258",
            "timestamp": 1496151540,
            "txt_content": "服务器默认视距改了么[建议4-5区块]然后再加一个区块卸载插件试试"
        },
        {
            "author": "weiliang_dada",
            "timestamp": 1496156160,
            "txt_content": "cpu不够吧，升级cpu把，cpu频率太低，如果内存剩余少也有可能是内存的问题"
        },
        {
            "author": "音凉",
            "timestamp": 1496218020,
            "txt_content": "weiliang_dada 发表于 2017-5-30 22:56\ncpu不够吧，升级cpu把，cpu频率太低，如果内存剩余少也有可能是内存的问题\n看清我说的好么，60人频率每个核心超不过1.2， cpu是3.4的，内存开不到两天占用不到60%    16g的"
        },
        {
            "author": "音凉",
            "timestamp": 1496218140,
            "txt_content": "906761258 发表于 2017-5-30 21:39\n服务器默认视距改了么[建议4-5区块]然后再加一个区块卸载插件试试\n视距是限定4，按论坛大家都推荐的那个优化教程优化的，比如限制每人在线的动物数量等等，\n服务器系统是win7的，和这个有关么？"
        },
        {
            "author": "nikoniko_ni",
            "timestamp": 1496284080,
            "txt_content": "我敢说 你服大部分都是科技类mod吧？\n拥有多个世界，例如 资源、登录、地皮、活动其他mod创建的世界 外域等等等...\n服务器区块 数量非常高 几千左右\n输入GC  tiles好几万...\n\n装了各种优化插件 区块卸载插件 都没用 区块占用还是很多很多\n如果还有地皮的话，并且地皮的大小还不大(100格以下)\n\n那么恐怕没有什么好的办法，我建议你这样做将服务器视距缩小到 4-6卸载无用的世界删除开服脚本里的(如果有的话) -XX:+UseCompressedOop mod服开启这个通常会导致TPS巨低不要使用插件卸载区块 使用服务端自带的区块卸载功能 (开启方法在bukkit.yml 里的 chunk-gc)\n\n\n进行这些操作前可以输入 /forge tps 查看各个世界的性能报告\n完成这些操作后再次输入 应该会稍微提升一点服务器的负载\n\n但最根本的原因还是因为你装了太多模组，玩家回到自己的家后 家中的自动化机器全部启动 导致开始大量加载区块，然后机器区块加载到了其他玩家的家中，导致其他玩家家中的自动化机器也开始运行...恶性循环\nmod服无人权啊 这是真理"
        },
        {
            "author": "C5bb",
            "timestamp": 1496305980,
            "txt_content": "1421312987 发表于 2017-6-1 10:28\n我敢说 你服大部分都是科技类mod吧？\n拥有多个世界，例如 资源、登录、地皮、活动其他mod创建的世界 外域等 ...\n如果玩家没有在机器旁边 机器是会停止运行的。  好比熔炉 需要玩家站旁边"
        },
        {
            "author": "C5bb",
            "timestamp": 1496305980,
            "txt_content": "楼主 试试看这个 http://www.mcbbs.net/forum.php?m ... ghlight=LaggRemover"
        }
    ]
}