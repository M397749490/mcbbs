{
    "title": "插件 Essentials相关指令导致服务器卡死全服掉线（内附报错）",
    "author": "DGai",
    "replyCount": 10,
    "timestamp": 1561372260,
    "txt_content": " 本帖最后由 DGai 于 2019-6-24 18:33 编辑 \n\n服务器玩家（包括OP）输入部分ESS指令会导致服务器卡死 然后全服掉线\n之后显示：链接超时\n例如 /seen ID  /balance ID  /mute ID\n（大概就是执行带玩家ID的指令都会出现这种现象）服务器版本1.7.10\n查看后台会有以下报错\n\n\n[15:11:34] [Server thread/INFO]: 2398319431 issued server command: /SEEN smart9999\n[15:11:35] [Timer-0/INFO]: [Yum] [线程管理] 插件 Essentials 在主线程进行网络操作 服务器处于停止状态...\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 java.net.SocketInputStream.socketRead0(未知:-2)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 java.net.SocketInputStream.socketRead(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 java.net.SocketInputStream.read(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 java.net.SocketInputStream.read(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.security.ssl.InputRecord.readFully(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.security.ssl.InputRecord.read(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.security.ssl.SSLSocketImpl.readRecord(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.security.ssl.SSLSocketImpl.performInitialHandshake(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.security.ssl.SSLSocketImpl.startHandshake(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.security.ssl.SSLSocketImpl.startHandshake(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.net.www.protocol.https.HttpsClient.afterConnect(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.net.www.protocol.http.HttpURLConnection.access$100(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.net.www.protocol.http.HttpURLConnection$8.run(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.net.www.protocol.http.HttpURLConnection$8.run(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 java.security.AccessController.doPrivileged(未知:-2)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 java.security.AccessController.doPrivilegedWithCombiner(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.net.www.protocol.http.HttpURLConnection.getOutputStream(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(未知:-1)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.mojang.authlib.HttpAuthenticationService.performPostRequest(HttpAuthenticationService.java:73)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.mojang.authlib.yggdrasil.YggdrasilAuthenticationService.makeRequest(YggdrasilAuthenticationService.java:54)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.mojang.authlib.yggdrasil.YggdrasilGameProfileRepository.findProfilesByNames(YggdrasilGameProfileRepository.java:50)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.server.management.PlayerProfileCache.func_152650_a(PlayerProfileCache.java:93)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.server.management.PlayerProfileCache.func_152655_a(PlayerProfileCache.java:179)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 org.bukkit.craftbukkit.v1_7_R4.CraftServer.getOfflinePlayer(CraftServer.java:1333)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.OfflinePlayer.<init>(OfflinePlayer.java:43)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.UserMap.load(UserMap.java:107)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.UserMap.load(UserMap.java:17)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 guava10.com.google.common.cache.CustomConcurrentHashMap$ComputingValueReference.compute(CustomConcurrentHashMap.java:3426)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 guava10.com.google.common.cache.CustomConcurrentHashMap$Segment.compute(CustomConcurrentHashMap.java:2322)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 guava10.com.google.common.cache.CustomConcurrentHashMap$Segment.getOrCompute(CustomConcurrentHashMap.java:2291)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 guava10.com.google.common.cache.CustomConcurrentHashMap.getOrCompute(CustomConcurrentHashMap.java:3802)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 guava10.com.google.common.cache.ComputingCache.get(ComputingCache.java:46)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.UserMap.getUser(UserMap.java:67)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.Essentials.getOfflineUser(Essentials.java:623)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.Essentials.getUser(Essentials.java:615)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.commands.EssentialsCommand.getPlayer(EssentialsCommand.java:76)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.commands.EssentialsCommand.getPlayer(EssentialsCommand.java:48)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.commands.EssentialsCommand.getPlayer(EssentialsCommand.java:56)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.commands.Commandseen.seen(Commandseen.java:44)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.commands.Commandseen.run(Commandseen.java:33)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.commands.EssentialsCommand.run(EssentialsCommand.java:135)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.Essentials.onCommandEssentials(Essentials.java:505)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 com.earth2me.essentials.Essentials.onCommand(Essentials.java:372)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 org.bukkit.command.PluginCommand.execute(PluginCommand.java:44)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:181)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 org.bukkit.craftbukkit.v1_7_R4.CraftServer.dispatchCommand(CraftServer.java:740)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.network.NetHandlerPlayServer.func_147361_d(NetHandlerPlayServer.java:1370)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.network.NetHandlerPlayServer.func_147354_a(NetHandlerPlayServer.java:1107)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.network.play.client.C01PacketChatMessage.func_148833_a(C01PacketChatMessage.java:38)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.network.play.client.C01PacketChatMessage.func_148833_a(C01PacketChatMessage.java:53)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.network.NetworkManager.func_74428_b(NetworkManager.java:245)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.network.NetworkSystem.func_151269_c(NetworkSystem.java:181)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.server.MinecraftServer.func_71190_q(MinecraftServer.java:1023)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.server.dedicated.DedicatedServer.func_71190_q(DedicatedServer.java:432)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.server.MinecraftServer.func_71217_p(MinecraftServer.java:841)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 net.minecraft.server.MinecraftServer.run(MinecraftServer.java:693)\n[15:11:35] [Timer-0/INFO]: [Yum]     位于 java.lang.Thread.run(未知:-1)\n[15:12:06] [Server thread/INFO]: 2398319431 issued server command: /seen mc_shit\n[15:12:14] [Spigot Watchdog Thread/WARN]: The server is going slow. Last server tick was 39804ms ago\n[15:12:14] [Spigot Watchdog Thread/WARN]: Last Tick: 1561360294582 Current Time: 1561360334386 Warning: 30000 Timeout: 90000\n[15:12:14] [Spigot Watchdog Thread/WARN]: [TPS]: 19.6 Server Tick #657722\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 258 Active Chunks: 0 Entities: 73 Tile Entities: 10\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 50\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:-1\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 0 Active Chunks: 0 Entities: 0 Tile Entities: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:21\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 7 Active Chunks: 0 Entities: 0 Tile Entities: 24\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:9\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 1 Active Chunks: 0 Entities: 2 Tile Entities: 2\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:13\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 498 Active Chunks: 90 Entities: 146 Tile Entities: 1724\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 78\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 344\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:22\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 251 Active Chunks: 0 Entities: 760 Tile Entities: 129\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 59\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:4\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 264 Active Chunks: 0 Entities: 15 Tile Entities: 6\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 14\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:11\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 0 Active Chunks: 0 Entities: 0 Tile Entities: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:37\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 209 Active Chunks: 0 Entities: 233 Tile Entities: 66\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 190\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Dimension:6\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Loaded Chunks: 253 Active Chunks: 0 Entities: 0 Tile Entities: 2\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Entities Last Tick: 0\n[15:12:14] [Spigot Watchdog Thread/WARN]:   Tiles Last Tick: 0\n[15:12:21] [Timer-0/INFO]: [Yum] [线程管理] 服务器处于停止状态 已超过 45.0 秒 激活心跳 防止线程关闭...\n[15:12:22] [Timer-0/INFO]: [Yum] [线程管理] 服务器处于停止状态 已超过 45.5 秒 激活心跳 防止线程关闭...\n\n如果解决方法较复杂 可以联系QQ：1092946932\n（可以赏金）\n这个问题纠缠了我服很久了，真的很头疼\n若能解决难题，必然重谢大佬！\n\n\n",
    "replies": [
        {
            "author": "世予予",
            "timestamp": 1561372260,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "瑞哥123",
            "timestamp": 1561372320,
            "txt_content": "更换ESS插件至ESSX\n"
        },
        {
            "author": "skyliye",
            "timestamp": 1561372380,
            "txt_content": " 本帖最后由 skyliye 于 2019-6-24 18:38 编辑 \n\n建议移除YUM插件，已经非常老旧了而且降低运行速度。我推测是你的ESS插件与服务端不适配或者有bug，试试我的\n\n1.7.10（专用）ESS全家桶\n链接：https://pan.baidu.com/s/1dmE5wflD4ll2mzFRovBu7Q \n提取码：kxgw \n\n1.7.10~1.12.2(全版本)ESSX全家桶\n链接：https://pan.baidu.com/s/1DI39Myi2IP8lnD1MdY_7cg \n提取码：r9wq \n\n已有配套权限插件，原来的权限插件就可以卸载掉了"
        },
        {
            "author": "DGai",
            "timestamp": 1561372440,
            "txt_content": "哦对了 服务器版本是1710的"
        },
        {
            "author": "DGai",
            "timestamp": 1561372440,
            "txt_content": "世予 发表于 2019-6-24 18:33\n换一套试试呢 建议卸载Yum\n这一套对1710兼容性如何"
        },
        {
            "author": "世予予",
            "timestamp": 1561372440,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "skyliye",
            "timestamp": 1561372500,
            "txt_content": "DGai 发表于 2019-6-24 18:34\n这一套对1710兼容性如何\nESSX应该也是兼容1.7.10的，但是个人在用的ESS在1.7.10上也没出现过问题，你可以都试试，哪个好用用哪个"
        },
        {
            "author": "DGai",
            "timestamp": 1561372560,
            "txt_content": "skyliye 发表于 2019-6-24 18:33\n建议移除YUM插件，已经非常老旧了而且降低运行速度。我推测是你的ESS插件与服务端不适配或者有bug，试试我 ...\n请问 我直接更换这套插件的话，玩家数据会不会受到影响"
        },
        {
            "author": "skyliye",
            "timestamp": 1561372620,
            "txt_content": "DGai 发表于 2019-6-24 18:36\n请问 我直接更换这套插件的话，玩家数据会不会受到影响\n不会有影响的，不过建议备份原有服务端，ESS更新到ESSX可能会导致数据变化，后者是前者的重制版本"
        },
        {
            "author": "世予予",
            "timestamp": 1561372680,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        }
    ]
}