{
    "title": "如何增强数据包的可读性、可维护性和通用性以及代码可重用性？",
    "author": "(=°ω°)丿",
    "replyCount": 3,
    "timestamp": 1562246100,
    "txt_content": " 本帖最后由 Teenager_Yang 于 2019-7-5 19:54 编辑 \n\n如何增强数据包的可读性、可维护性和通用性以及代码可重用性？\n你们别只评分不回答问题啊喂（跑",
    "replies": [
        {
            "author": "SPGoding",
            "timestamp": 1562246100,
            "txt_content": " 本帖最后由 SPGoding 于 2019-7-4 22:36 编辑 \n\n这题问得不怎么样，随便编几条糊弄糊弄好了。\n\n\n可读性/可维护性：\n1. 保持良好的命名规则（文件名、记分项名、玩家假名、实体标签名等），切忌不要用莫名其妙的缩写或是英文拼音中文混用。\n1.1. 有关临时分数储存，可以建立一个名为 tmp 的记分项。该记分项应当在 #tick 函数内的最后部分使用 reset 全部重置，保证不会跨刻传递。\n1.2. 需要跨刻传递或在函数间传递的分数应该使用另一个记分项储存。\n2. 函数里写注释。注释应该表明这个函数是做什么的/由谁执行的，这一部分（比如大片的穷举）是做什么的，等。\n3. 干相同/相关事情的函数放到同一个命名空间/文件夹下面。\n4. 与某函数有关的进度/战利品表等最好在文件结构上也有对应。\n5. 写函数的时候适当空点行。\n5.1. 如在不同逻辑块之间。\n\n至于通用性与可重用性：\n1. 不要过度追求这个，MCFunction 本身不适合过度抽象为模块。\n1.1. 「过度抽象」指大而泛的妄图一己之力改变世界其实啥用也没有的模块（是，我在说数学库）。像随机数生成模块等小而精的模块是较为适合 MCFunction 系统的。\n2. 当你发现自己在各个函数间经常大段复制命令的时候，再考虑把那段命令提到单独的函数里去吧。\n3. 不同文件夹中的函数尽量做到互不调用（即「模块化」），由最根的 tick 函数负责调动不同文件夹中的函数。这样可以做到在不影响过多函数文件的情况下整块地添加/删除功能。"
        },
        {
            "author": "chyx",
            "timestamp": 1562246520,
            "txt_content": "把需要重用的部分包起来作为新的函数。\n不把大量函数放在同一个文件夹里。函数所在的路径和调用逻辑一致。\n函数里多写注释\n加的临时tag及早移除，避免移除不了的情况\n"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1562325780,
            "txt_content": "那我也来编点什么...\n\n数据包的可读性、可维护性和通用性\n给主tick下的函数添加注释从性能方面考虑，除了尽量使用@s之外，也尽量减少重复的参数检测。极...端点的就算是两条命令也会创一个函数。\n那么结果就是function吃像难看，添加的注释可能要打开多个函数才能看懂/完整，也不方便往后的修改，既是用可读性和可维护性换取性能。\n所以，一般是所有东西都完成，作品发布前，十分自信或保证不会在去修改时才进行修改命名时，批量查找关键字并替换创建一个memo，记录某些可以手动赐予的标签/分数的作用，和使用方法/注意事项...\n如果能把所有用到的标签/记分板也记录，写uninstall时就会很方便创建bat，一键备份存档/资源包，养成每次备份的习惯避免使用普通的命名导致数据包之间撞车，如uin_temp而非temp，uin_test而非test管好自己的命令...类似kill @e这种的会误伤其他数据包的东西尽量假名取代选择器\n至于通用性，不要想太多。包与包之间，既不同制作者之间的思路和事情处理方法，稍有点冲突就凉了。\n\n所以其实我更看中性能，吃像难看，我也乐意！...\n那么选择器下的参数使用就有必要纳入考虑的范围了。如\n参数的填写顺序...可以的话添加type以快速筛选出列表中的适格对象尽量使用tag而非nbt等...\n\n详细看这...https://minecraftcommands.github.io/commanders-handbook/selector-argument-order\n\n\n代码可重用性\n想不出来...也就把基本数据的写成一个函数（如实体数据，坐标,朝向,血量等）。一句话，写成@s就对了...\n\n个人制作中的一个单人存档的数据包，主tick内的执行内容顺序，供参考\n开头归位(标签,分数...) >\n获取玩家基本数据(状态,坐标,朝向...) >\n各种检测(是否于特定范围,手持...) >\n函数真正处理事情的地方 >\n【留些空位，方便新函数的添加/编辑/调整，和一些打算制作的点子。完成后丢至上/下对应的执行顺序】>\n结尾归位\n"
        }
    ]
}