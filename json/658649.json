{
    "title": "[教程][开服]在docker容器内架设nukkit，使服务器维护更加高效！",
    "author": "carre1",
    "replyCount": 8,
    "timestamp": 1483256880,
    "txt_content": " 本帖最后由 PQguanfang 于 2020-1-24 13:14 编辑 \n本篇文章讲了如何在docker上架设nukkit服务器，面向有一些Linux基础的读者，如果你只是想简单地搭建一个nukkit服务器，可以看这个教程。 如果本文内有错误，欢迎指出。转载请联系本人，本教程禁止**、葫芦侠、游戏狗、4399等非nukkit专门讨论区转载。\n本教程使用的服务器环境是:\nubuntu-16.04.1-server-amd64;\ndocker version 1.12.1, build 23cf638\n\n基本流程：\n1.检查服务器环境\n2.安装一个更好的apt源\n\n检查服务器环境1.操作系统操作系统可以是任何能安装Docker的linux发行版，操作系统必须是64bit，32bit已经不再受docker支持, Centos版本必须要 ＞Centos6.0,个人推荐使用Ubuntu16.04。查看操作系统发行版名称：$ cat /etc/issue复制代码\n\n2.kernel版本Kernel版本必须 ≥2.6.32-431，在Kernel3.8上运行效果最佳。查看Kernel版本：$ uname -r复制代码\n\n 3.储存驱动docker的存储驱动是Device Mapper，检查驱动是否符合要求：$ grep device-mapper /proc/devices复制代码\n\n\n安装一个更好的apt源apt源服务器的速度决定了你通过apt安装应用程序的效率。Ubuntu默认的的apt源服务器在美国，速度奇慢，因此我建议大家安装一个国内的apt源。如果你的服务器在世界的其他位置，你也可以选择安装当地的apt源。如果你认为你的apt源已经够快，那么你可以跳过此步骤。备份旧源$ sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak复制代码\n\n使用nano编辑器打开 /etc/apt/sources.list $ sudo nano /etc/apt/sources.list复制代码\n\n粘贴以下内容(这里使用的是阿里云镜像)：<div align=\"left\"># deb cdrom:[Ubuntu 16.04 LTS _Xenial Xerus_ - Release amd64 (20160420.1)]/ xenial main restricted</div><div align=\"left\">deb-src http://archive.ubuntu.com/ubuntu xenial main restricted #Added by software-properties</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted</div><div align=\"left\">deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe #Added by software-properties</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted</div><div align=\"left\">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe #Added by software-properties</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial universe</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial multiverse</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiverse</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse</div><div align=\"left\">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse #Added by software-properties</div><div align=\"left\">deb http://archive.canonical.com/ubuntu xenial partner</div><div align=\"left\">deb-src http://archive.canonical.com/ubuntu xenial partner</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted</div><div align=\"left\">deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe #Added by software-properties</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe</div><div align=\"left\">deb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse</div>复制代码\n\n\n# 更新apt$ sudo apt update -y复制代码\n\n三、安装docker、pull镜像、新建容器\n 修改root密码\n$ sudo passwd root复制代码\n\n提权至root\n$ su复制代码\n\n安装docker并运行\n# sudo apt install docker.io复制代码\n\npull一个centos6.5的镜像（镜像来自网易蜂巢）\n# docker pull hub.c.163.com/public/centos:6.5复制代码\n\n\n\n运行一个新容器\n# docker run -i -t hub.c.163.com/public/centos /bin/bash复制代码\n\n\n\n此时，你已经在容器内了\n\n\n在容器内安装Nukkit\n\n安装JDK\n# yum install java-1.6.0-openjdk.x86_64 -y复制代码\n\n\n前往Nukkit官网获得最新版本Nukkit http://nukkit.io/\n为nukkit准备一个工作目录\n# mkdir /home/nukkit复制代码\n\n将nukkit拷贝进这个目录\n然后运行nukkit:# screen -S nk\n# java -jar nukkit.jar复制代码\n等待几秒，即可安装完成。\n\n\n小技巧\n\n待更新。。。\n\n\n\n参考资料：docker容器扫盲 - http://blog.csdn.net/socho/article/details/51999744\n\n\n\n",
    "replies": [
        {
            "author": "Snake1999",
            "timestamp": 1485515040,
            "txt_content": " 本帖最后由 Snake1999 于 2017-1-27 19:05 编辑 \n\n迟到的评价。\n虽然只可能算是小技巧，但是依然很实用"
        },
        {
            "author": "wujipohh",
            "timestamp": 1485776400,
            "txt_content": " 本帖最后由 wujipohh 于 2017-7-5 22:04 编辑 \n\n-----------"
        },
        {
            "author": "carre1",
            "timestamp": 1486381740,
            "txt_content": "Snake1999 发表于 2017-1-27 19:04\n迟到的评价。\n虽然只可能算是小技巧，但是依然很实用\n谢谢支持！"
        },
        {
            "author": "qertyumoho",
            "timestamp": 1498129440,
            "txt_content": "你能告诉我为什么高效么？（你没扣题）"
        },
        {
            "author": "最简单的",
            "timestamp": 1500006900,
            "txt_content": " 本帖最后由 最简单的 于 2017-7-14 12:37 编辑 \n\n别人已经构建好了镜像为什么不用...?\n要说方便管理的话，不结合起 DaoCloud 或者其他管理工具用的话反而更麻烦\n sudo apt install docker.io\n docker run -it  -v /home/data:/srv/nukkit -p 19132:19132/udp ixilon/nukkit:1.1.3复制代码"
        },
        {
            "author": "carre1",
            "timestamp": 1500467520,
            "txt_content": "最简单的 发表于 2017-7-14 12:35\n别人已经构建好了镜像为什么不用...?\n要说方便管理的话，不结合起 DaoCloud 或者其他管理工具用的话反而更 ...\n这就看个人习惯咯，我不喜欢用别人的镜像。如果自己对linux命令行不太熟悉也可也用shipyard或DaoCloud之类的工具，这些都是可以的！"
        },
        {
            "author": "1416868137",
            "timestamp": 1575456180,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "ddoc",
            "timestamp": 1577332560,
            "txt_content": "教程真的不错，特别棒，感谢分享呢"
        }
    ]
}