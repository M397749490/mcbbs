{
    "title": "ItemStack与ItemMeta问题",
    "author": "1252251361",
    "replyCount": 23,
    "timestamp": 1596856020,
    "txt_content": "itemMeta.getDisplayName()与itemMeta.getLocalizedName()有什么区别吗\n如果是直接从物品栏里拿出的物品这两个方法都获取不到物品的名字\n只有用铁砧修改过的可以用getDisplayName()获取\n想知道怎么获取物品的名字(默认的名字 例如：橡木木板 铁斧) 如果可以本地化最好了\n先谢谢大佬们的解答",
    "replies": [
        {
            "author": "洞穴夜莺",
            "timestamp": 1596856200,
            "txt_content": "这是没有办法的，“橡木木板” ，“铁斧”这些名字存储在客户端上，Bukkit等仅服务端的API无论如何都不能操作的"
        },
        {
            "author": "1252251361",
            "timestamp": 1596856860,
            "txt_content": "洞穴夜莺 发表于 2020-8-8 11:10\n这是没有办法的，“橡木木板” ，“铁斧”这些名字存储在客户端上，Bukkit等仅服务端的API无论如何都不能操 ...\nitemMeta.getLocalizedName() 有什么用吗"
        },
        {
            "author": "辣鸡小悠璃",
            "timestamp": 1596858480,
            "txt_content": "首先要本地化的话，是无解的，因为那些东西都在客户端层，服务端没法获取。\n\n针对Localized Name有啥用的问题：\n有用啊，一般做东西都用的Localized Name。\nDisplay Name的效果只是“显示名称”，就跟玩家用铁砧改个名效果一样，\n但是Localized Name设置的是物品本身的名称。\n\n举个例子\nItemStack itemStack1 = new ItemStack(Material.DIAMOND_AXE);\n        ItemMeta itemMeta1 = Bukkit.getItemFactory().getItemMeta(Material.DIAMOND_AXE);\n        itemMeta1.setLocalizedName(\"testName\");\n        itemStack1.setItemMeta(itemMeta1);\n\n        ItemStack itemStack2 = new ItemStack(Material.GOLD_AXE);\n        ItemMeta itemMeta2 = Bukkit.getItemFactory().getItemMeta(Material.GOLD_AXE);\n        itemMeta2.setDisplayName(\"testName\");\n        itemStack2.setItemMeta(itemMeta2);\n\n        p.getInventory().addItem(itemStack1);        p.getInventory().addItem(itemStack2);\n复制代码\n\n在游戏里物品itemStack1和itemStack2，你从样子上就能看出来，拿到手里1的名字是正体的  testName，2是斜体 testName。\n你做个实验：\n用铁砧把这俩物品名字都改成try，然后再用铁砧把这俩名字给删了，试试看。\n结果是1的名字又变成了 testName，而2变成了 Golden Axe（会因客户端语言的选择而有区别）。\n\n因为1设置了localized name，所以它的名字一出生就是 testName，而2设置的你可以理解成玩家用铁砧改的显示名，玩家可以用铁砧擦掉。"
        },
        {
            "author": "1252251361",
            "timestamp": 1596859140,
            "txt_content": "辣鸡小悠璃 发表于 2020-8-8 11:48\n首先要本地化的话，是无解的，因为那些东西都在客户端层，服务端没法获取。\n\n针对Localized Name有啥用的问 ...\n很详细的解答 谢谢大佬"
        },
        {
            "author": "1252251361",
            "timestamp": 1596865020,
            "txt_content": "辣鸡小悠璃 发表于 2020-8-8 11:48\n首先要本地化的话，是无解的，因为那些东西都在客户端层，服务端没法获取。\n\n针对Localized Name有啥用的问 ...\nitemStack.getType().name() 为什么获取到的物品名字是AIR 原物品是干海带 南瓜 不知道还有没有其他的也是这样"
        },
        {
            "author": "William_Shi",
            "timestamp": 1596866700,
            "txt_content": "1252251361 发表于 2020-8-8 13:37\nitemStack.getType().name() 为什么获取到的物品名字是AIR 原物品是干海带 南瓜 不知道还有没有其他的也 ...\nMaterial#name和Material#toString应该是一样的方法\n\n另外关于没有显示名的物品堆的翻译本地化键问题，PVPINCore已经通过走NMS底层的方式，完全彻底地解决了，提示：NMS中的ItemStack有一个name的field"
        },
        {
            "author": "1252251361",
            "timestamp": 1596867600,
            "txt_content": "William_Shi 发表于 2020-8-8 14:05\nMaterial#name和Material#toString应该是一样的方法\n\n另外关于没有显示名的物品堆的翻译本地化键问题，PV ...\n能详细说一下怎么获取NMS的ItemStack 我不了解NMS 非常感谢"
        },
        {
            "author": "William_Shi",
            "timestamp": 1596873780,
            "txt_content": "1252251361 发表于 2020-8-8 14:20\n能详细说一下怎么获取NMS的ItemStack 我不了解NMS 非常感谢\nCraftItemStack#asNMSCopy\n不了解NMS的话先看我的《浅谈NMS与OBC对象》，然后再去看相关ItemStackNBT的两篇，再去看yhzyhz的配套拔刀剑NBT教程，最后自己去看NMS源码摸索"
        },
        {
            "author": "1252251361",
            "timestamp": 1596873840,
            "txt_content": "William_Shi 发表于 2020-8-8 16:03\nCraftItemStack#asNMSCopy\n不了解NMS的话先看我的《浅谈NMS与OBC对象》，然后再去看相关ItemStackNBT的两 ...\n好的谢谢"
        },
        {
            "author": "1252251361",
            "timestamp": 1596901980,
            "txt_content": "William_Shi 发表于 2020-8-8 16:03\nCraftItemStack#asNMSCopy\n不了解NMS的话先看我的《浅谈NMS与OBC对象》，然后再去看相关ItemStackNBT的两 ...\n但是net.minecraft.server.v1_16_R1.ItemStack这里面只有a b c这种不知道什么意义的函数和变量"
        },
        {
            "author": "William_Shi",
            "timestamp": 1596934260,
            "txt_content": "1252251361 发表于 2020-8-8 23:53\n但是net.minecraft.server.v1_16_R1.ItemStack这里面只有a b c这种不知道什么意义的函数和变量\n ...\n是啊，mc是商业软件，这是被混淆的变量名，其实类名也应该是这样的，只不过CraftBukkit团队和spigot一些人一起做了一个反混淆，而且不同于Forge，但是变量名什么的没反混淆。这些玩意正式名称Notch名。\n\n一般来说我建议少用被混淆的变量名、函数名，因为这些东西不同版本不同混淆会改变的，导致即使使用反射，兼容性也会非常差，比如说1.14.4一个叫做k的方法可能在1.15叫做r，但是逻辑是完全一样的。\n\n但是多数public的方法没有被混淆，你可以调用这些方法啊。\n\n针对你的问题，获取到了net.minecraft.server.v1_16_R1.ItemStack之后\n你有没有看到这里面有一个String类型的变量name？想办法获取她，就好了。\n\n\n话说NMS好像真的变成我的专长了？"
        },
        {
            "author": "1252251361",
            "timestamp": 1596940500,
            "txt_content": "William_Shi 发表于 2020-8-9 08:51\n是啊，mc是商业软件，这是被混淆的变量名，其实类名也应该是这样的，只不过CraftBukkit团队和spigot一些 ...\n然而这里面除了abc就没有别的东西了"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1596940860,
            "txt_content": " 本帖最后由 洞穴夜莺 于 2020-8-9 10:46 编辑 \n\n\n\n\n\nfile_1596941075000.jpg (251.31 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-9 10:44 上传\n\n\n\n\n1252251361 发表于 2020-8-9 10:35\n然而这里面除了abc就没有别的东西了\n对照mcwiki上的混淆映射表"
        },
        {
            "author": "1252251361",
            "timestamp": 1596941400,
            "txt_content": "洞穴夜莺 发表于 2020-8-9 10:41\n对照mcwiki上的混淆映射表\n这个表应该怎么找\n找ItemStack关键字吗"
        },
        {
            "author": "1252251361",
            "timestamp": 1596942000,
            "txt_content": "William_Shi 发表于 2020-8-9 08:51\n是啊，mc是商业软件，这是被混淆的变量名，其实类名也应该是这样的，只不过CraftBukkit团队和spigot一些 ...\n还有一个小问题，就是从玩家背包里拿出来的ItemStack要怎么转成net.minecraft.server.v1_16_R1.ItemStack，但这两个不同类，不能强转，恕我无知"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1596943620,
            "txt_content": "1252251361 发表于 2020-8-9 10:50\n这个表应该怎么找\n找ItemStack关键字吗\n你需要两张表，这张mcwiki上的是 开发用符号名与原版符号名的对应关系\n另一张是 原版符号名与Bukkit符号名的对应关系，要去Bukkit的网站上下载\nbukkit的表格式是这样的\nbukkit-<版本号>-cl.csrg\n<原版类名> <Bukkit类名>复制代码\nbukkit-<版本号>-members.csrg\n<Bukkit类名> <原版成员符号名> [方法字节码格式签名] <Bukkit成员符号名>复制代码\n你需要先查Bukkit的表获取原版符号名，然后再去查原版的表，最后可以得出一个开发用的符号名\n这个开发用的符号名是反映Minecraft开发者的意志的，可以用来揭示这个变量/方法是干什么用的"
        },
        {
            "author": "1252251361",
            "timestamp": 1596945300,
            "txt_content": "洞穴夜莺 发表于 2020-8-9 11:27\n你需要两张表，这张mcwiki上的是 开发用符号名与原版符号名的对应关系\n另一张是 原版符号名与Bukkit符号 ...\n好的感谢"
        },
        {
            "author": "William_Shi",
            "timestamp": 1596946920,
            "txt_content": "1252251361 发表于 2020-8-9 11:00\n还有一个小问题，就是从玩家背包里拿出来的ItemStack要怎么转成net.minecraft.server.v1_16_R1.ItemStack ...\n你读我写的教程了吗？？？？？？？？？？？？？？？？\n不去读还来提问，那叫伸手\n我记得我说过\nCraftItemStack#asNMSCopy\n你没看我的回复吗？？？就在这个帖子第一页啊！！！！\n我现在在用surface，打字很难受，自己先去读再来问否则我拒绝回答你的追问"
        },
        {
            "author": "William_Shi",
            "timestamp": 1596947160,
            "txt_content": "洞穴夜莺 发表于 2020-8-9 11:27\n你需要两张表，这张mcwiki上的是 开发用符号名与原版符号名的对应关系\n另一张是 原版符号名与Bukkit符号 ...\n其实多数情况下都是直接看forgemcp或者fabric的反混淆的\n类名的话bukkit和forge还是稍有差别\n其他的参数、方法、变量全都是Notch名可以查mcp对应forge\nfabric环境没搭建，也不知道是怎么样的\n大佬觉得forgemcp和fabric哪个反混淆好？"
        },
        {
            "author": "1252251361",
            "timestamp": 1596949200,
            "txt_content": "William_Shi 发表于 2020-8-9 12:22\n你读我写的教程了吗？？？？？？？？？？？？？？？？\n不去读还来提问，那叫伸手\n我记得我说过\n你的教程我确实读过了，我已经解决问题了 用了net.minecraft.server.v1_16_R1.PlayerInventory\n虽然读了你的教程 但是我是真的还是什么都不会\n还是感谢你给我耐心解答"
        },
        {
            "author": "William_Shi",
            "timestamp": 1596949320,
            "txt_content": "1252251361 发表于 2020-8-9 13:00\n你的教程我确实读过了，我已经解决问题了 用了net.minecraft.server.v1_16_R1.PlayerInventory\n虽然读了 ...\n你正使用一种奇奇怪怪的方法\n万一某个物品堆不在玩家背包怎么办？\n当然是CraftItemStack#asNMSCopy更好\n"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1596949620,
            "txt_content": "William_Shi 发表于 2020-8-9 12:26\n其实多数情况下都是直接看forgemcp或者fabric的反混淆的\n类名的话bukkit和forge还是稍有差别\n其他的参数 ...\nForge MCP反混淆基本是完整的，拥有较多注释，但是格式有点复杂，获取途径很难受\nFabric Yarn的相对来说容易阅读，但是偶尔能见到没有反混淆的，并且注释只是偶尔有\nMojang表是官方的表，可信度高，也最容易获取\nBukkit反混淆离上面三张表都差得很远，我之前为了移植一个Bukkit插件成Fabric Mod（后来弃坑了）做过一张1.15.2的Bukkit/Yarn的混淆表，可以看出Bukkit就没几个符号是反混淆了的，可以说是常见反混淆中最劣质的反混淆\n比较Mojang和MCP和Yarn三张表，MCP和Mojang是比较像的，说明MCP的反混淆质量更高，毕竟过去许多年Forge都是老大\n个人见解，仅供参考"
        },
        {
            "author": "William_Shi",
            "timestamp": 1596949980,
            "txt_content": "洞穴夜莺 发表于 2020-8-9 13:07\nForge MCP反混淆基本是完整的，拥有较多注释，但是格式有点复杂，获取途径很难受\nFabric Yarn的相对来说 ...\nu1s1，forge确实有注释告诉你什么方法有什么意义\n至于Bukkit的反混淆，基本就反混淆了类名\n我现在对NMS做研究如果实在搞不定也会求助于forge反混淆\n但是再移回到bukkit就挺麻烦的\n比如说有一些方法明明是getter，但是一开始对应的field是nullable的，你在调用这个方法的时候再去初始化给这个field进行赋值，而且方法名还是被混淆的，版本兼容性极差，最后我只能反射获取类的所有方法，然后判断ReturnType是不是相符合（所幸是String，同类返回的几乎没有）"
        }
    ]
}