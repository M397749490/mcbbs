{
    "title": "[插件开发求助]打不倒的java.lang.NoClassDefFoundError",
    "author": "GA_空人",
    "replyCount": 4,
    "timestamp": 1475448960,
    "txt_content": " 本帖最后由 GA_空人 于 2016-10-3 07:00 编辑 \n\n第一次开发插件,写完之后打包好本地开个服务器进行测试,然而加载阶段直接报错;我尝试过重构掉所有的static/给这个类改名/更换引用的craftbukkit成和我测试环境一样版本的cauldron,但是这个报错就像某个空气人一样.附上报错信息\n[06:52:21] [Server thread/INFO]: [Vault][Chat] GroupManager - Chat hooked.\n[06:52:21] [Server thread/INFO]: [EndangerSpecies] Enabling EndangerSpecies v0.1.2\n[06:52:21] [Server thread/INFO]: [EndangerSpecies] 初始化0.1.2\n[06:52:21] [Server thread/ERROR]: Error occurred while enabling EndangerSpecies v0.1.2 (Is it up to date?)\njava.lang.NoClassDefFoundError: com/endanger/sorato/EndangerManager\n        at com.endanger.sorato.PluginMain.onEnable(PluginMain.java:40) ~[?:?]\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:316) ~[JavaPlugin.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:368) [JavaPluginLoader.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:410) [SimplePluginManager.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at org.bukkit.craftbukkit.v1_7_R4.CraftServer.loadPlugin(CraftServer.java:415) [CraftServer.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at org.bukkit.craftbukkit.v1_7_R4.CraftServer.enablePlugins(CraftServer.java:349) [CraftServer.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at net.minecraft.server.MinecraftServer.func_71243_i(MinecraftServer.java:500) [MinecraftServer.class:?]\n        at net.minecraft.server.MinecraftServer.func_71222_d(MinecraftServer.java:474) [MinecraftServer.class:?]\n        at net.minecraft.server.MinecraftServer.func_71247_a(MinecraftServer.java:434) [MinecraftServer.class:?]\n        at net.minecraft.server.dedicated.DedicatedServer.func_71197_b(DedicatedServer.java:335) [lt.class:?]\n        at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:620) [MinecraftServer.class:?]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_102]\nCaused by: java.lang.ClassNotFoundException: Failed to remap class com.endanger.sorato.EndangerManager\n        at org.bukkit.plugin.java.PluginClassLoader.remappedFindClass(PluginClassLoader.java:488) ~[PluginClassLoader.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:409) ~[PluginClassLoader.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:211) ~[PluginClassLoader.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_102]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_102]\n        ... 12 more\nCaused by: java.lang.IllegalArgumentException: INVOKESPECIAL/STATIC on interfaces require ASM 5\n        at org.objectweb.asm.MethodVisitor.visitMethodInsn(Unknown Source) ~[asm-all-5.0.3.jar:5.0.3]\n        at org.objectweb.asm.ClassReader.a(Unknown Source) ~[asm-all-5.0.3.jar:5.0.3]\n        at org.objectweb.asm.ClassReader.b(Unknown Source) ~[asm-all-5.0.3.jar:5.0.3]\n        at org.objectweb.asm.ClassReader.accept(Unknown Source) ~[asm-all-5.0.3.jar:5.0.3]\n        at org.objectweb.asm.ClassReader.accept(Unknown Source) ~[asm-all-5.0.3.jar:5.0.3]\n        at net.md_5.specialsource.JarRemapper.remapClassFile(JarRemapper.java:246) ~[JarRemapper.class:?]\n        at net.md_5.specialsource.JarRemapper.remapClassFile(JarRemapper.java:232) ~[JarRemapper.class:?]\n        at org.bukkit.plugin.java.PluginClassLoader.remappedFindClass(PluginClassLoader.java:453) ~[PluginClassLoader.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:409) ~[PluginClassLoader.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:211) ~[PluginClassLoader.class:git-Cauldron-Reloaded-1.7.10-1.1388.1.0]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_102]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_102]\n        ... 12 more\n[06:52:21] [Server thread/INFO]: [Essentials] Enabling Essentials v2.0.1-b342复制代码附上相关部分的代码\n\n\n\n\n\ncode1.png (50.24 KB, 下载次数: 0)\n\n下载附件\n\n2016-10-3 07:10 上传\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "914554688wyt",
            "timestamp": 1475491500,
            "txt_content": "很少用单例.. 直接用静态更好"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1475524860,
            "txt_content": "目测 Cauldron 和 Java8 存在兼容性问题。\n尝试换用 Java7 或者升级 Cauldron 版本。"
        },
        {
            "author": "liach",
            "timestamp": 1475532660,
            "txt_content": "你用的SpecialSource版本太老，用的ASM4不支持Java8接口里面的default方法。\n在这个commit后SpecialSource才支持Java8。\nhttps://github.com/md-5/SpecialS ... d9d48e3026536c6a4a0\n\n推荐把你服务器库的SpecialSource用1.7.2以上版本。不行的话用Java6编插件。"
        },
        {
            "author": "GA_空人",
            "timestamp": 1475573700,
            "txt_content": "liach 发表于 2016-10-4 06:11\n你用的SpecialSource版本太老，用的ASM4不支持Java8接口里面的default方法。\n在这个commit后SpecialSource ...\n感谢,确实是是这个的锅;1.7.10-1388的cauldron已经用了asm5但是用的旧SpecialSource..."
        }
    ]
}