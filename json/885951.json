{
    "title": "[安全]ArmorStandProtect —— 防止你服玩家乱动盔甲架。[1.8-1.14.x]",
    "author": "子德",
    "replyCount": 8,
    "timestamp": 1563115500,
    "txt_content": " 本帖最后由 zide888@qq.com 于 2019-7-14 22:55 编辑 \n\nFunction\n只有OP能动盔甲架\n\nDownload\n\n\n\n\nArmorStandProtect.jar\n(1.91 KB, 下载次数: 92)\n\n\n\n2019-7-14 22:47 上传\n点击文件名下载附件\n\n\n\n\n\n\n\nSourceCode\n\npackage online.hymc.ArmorStandProtect;\n\nimport org.bukkit.Material;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.entity.ArmorStand;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.EventPriority;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.Action;\nimport org.bukkit.event.entity.EntityDamageByEntityEvent;\nimport org.bukkit.event.player.PlayerArmorStandManipulateEvent;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class ArmorStandProtect extends JavaPlugin implements Listener, CommandExecutor\n{\n\n    @Override\n    public void onEnable() {\n\n        getServer().getPluginManager().registerEvents(this,this);\n        getLogger().info(\"[ArmorStandProtect] plugin load.\");\n\n    }\n\n    @EventHandler\n    public void playerInteractEventHandler (PlayerInteractEvent event) {\n\n        if ( event.getAction().equals( Action.RIGHT_CLICK_BLOCK) )\n            if ( event.getItem() != null && event.getItem().getType().equals(Material.ARMOR_STAND) && !event.getPlayer().isOp())\n                event.setCancelled(true);\n\n    }\n\n    @EventHandler\n    public void entityDamageByEntityEventHandler (EntityDamageByEntityEvent event) {\n\n        if (event.getDamager() instanceof  Player && event.getEntity() instanceof ArmorStand) {\n            Player p = (Player) event.getDamager();\n            if( !p.isOp() )\n                event.setCancelled(true);\n        }\n\n    }\n\n    @EventHandler\n    public void playerArmorStandManipulateEventHandler (PlayerArmorStandManipulateEvent event) {\n\n        if ( !event.getPlayer().isOp() )\n            event.setCancelled(true);\n\n    }\n\n}复制代码\n\n\n\n跑遍bbs和整个spigot没有一个能用的盔甲架保护，连WorldGuard都没有这功能。于是常年写Skript的我花一个晚上现学现写搞出来了这玩意儿。\n\n\n有用请评分\n",
    "replies": [
        {
            "author": "世予予",
            "timestamp": 1563124080,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1564557480,
            "txt_content": "脚本？ 还是插件？"
        },
        {
            "author": "子德",
            "timestamp": 1564558380,
            "txt_content": "mcKaiFuxia 发表于 2019-7-31 15:18\n脚本？ 还是插件？\n是插件。"
        },
        {
            "author": "天空树",
            "timestamp": 1564560840,
            "txt_content": "好用，感谢。"
        },
        {
            "author": "小喵咪_owo",
            "timestamp": 1564563120,
            "txt_content": "感谢！不做伸手党"
        },
        {
            "author": "Luckily_Baby",
            "timestamp": 1582710960,
            "txt_content": "小喵咪_owo 发表于 2019-7-31 16:52\n感谢！不做伸手党\n插件不错，非常实用，感谢分享！"
        },
        {
            "author": "2697552240",
            "timestamp": 1582711320,
            "txt_content": "终于可以防住熊孩子了哈哈哈"
        },
        {
            "author": "1519261477",
            "timestamp": 1582793100,
            "txt_content": "这个厉害,顶一个"
        }
    ]
}