{
    "title": "Rift Mod 中如何使用 Access Transformer？",
    "author": "sjx",
    "replyCount": 1,
    "timestamp": 1534862640,
    "txt_content": "环境设置（build.gradle）：buildscript {\n    repositories {\n        jcenter()\n        maven { url \"https://www.dimdev.org/maven/\" }\n    }\n    dependencies {\n        classpath 'org.dimdev:ForgeGradle:2.3-SNAPSHOT'\n    }\n}\napply plugin: 'net.minecraftforge.gradle.tweaker-client'\n\nversion = \"1.0.0\"\ngroup = \"com.sjx233.testmod\"\narchivesBaseName = \"testmod\"\n\nsourceCompatibility = targetCompatibility = '1.8'\ncompileJava {\n    sourceCompatibility = targetCompatibility = '1.8'\n}\n\nrepositories {\n    mavenCentral()\n    maven { url 'https://www.dimdev.org/maven/' }\n}\n\ndependencies {\n    implementation 'org.dimdev:rift:1.0.4-52:dev'\n}\n\nminecraft {\n    version = \"1.13\"\n    runDir = \"run\"\n    mappings = \"snapshot_20180817\"\n    tweakClass = \"org.dimdev.riftloader.launch.RiftLoaderTweaker\"\n}复制代码Access Transformer（access_transformations.at）：public class wu$a # net/minecraft/tags/BlockTags$Wrapper\nprotected field coj d # net/minecraft/client/renderer/entity/model/ModelIronGolem ironGolemLeftArm\npublic method p a (Ls;)Ls; # net/minecraft/advancements/CriteriaTriggers register复制代码结果重新运行 gradle setupDevWorkspace --refresh-dependencies --rerun-tasks 之后只有 CriteriaTriggers.register 变为 public，是什么原因？",
    "replies": [
        {
            "author": "gooding300",
            "timestamp": 1534865340,
            "txt_content": " 本帖最后由 gooding300 于 2018-8-22 08:44 编辑 \n\n我看了Rift官方提供的教程\n里面有写到\nAt the moment, owner, name, and desc must be notch names, but implementing compile-time reobfuscation of at files such that you can use MCP names is a planned feature.\n也就是说，at需要使用Notch Name而不是MCP Name\n请您修改一下您的at，Rift目前还不支持像Forge那样的运行时反混淆上面是我看错了，重新看了一次\n\n第一个\n应该是Rift的bug，对于内部类的访问级修改选择了和普通类完全一样的处理方式\n内部类较普通类有一个最为特殊的存在，除了在自己类中声明访问级以外，还会在外部类的InnerClasses中声明访问级\n以wu$a为例，使用javap -verbose wu.class可以看到\nInnerClasses:\n     static #8= #7 of #2; //a=class wu$a of class wu\n     public static final #13= #10 of #12; //Lookup=class java/lang/invoke/MethodHandles$Lookup of class java/lang/invoke/MethodHandles复制代码而Rift只处理了wu$a.class中的访问级，没去处理wu.class中内部类的访问级\n这怕不是要笑死我\n\n第二个\n是您写错了， 按照官方文档应该是\n<visibility> field <owner> <name> <desc> \n应该改为\nprotected field coj d Lcql;复制代码这个desc真是无语..难道同一变量名还能不同类型吗..\n\n第三个\n按照您的描述没有问题\n\n辣鸡Rift\n如果解决了您的问题，欢迎给我评分\n\n如果您需要的话，我可以帮忙写个将forge那样的AT(半混淆和AT格式等)转换成Rift格式的脚本\n\n\n\n\n"
        }
    ]
}