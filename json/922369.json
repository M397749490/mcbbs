{
    "title": "[Bukkit]自定义文件读取问题[已自行解决]",
    "author": "弥猫うた",
    "replyCount": 3,
    "timestamp": 1572066840,
    "txt_content": " 本帖最后由 Mucrazy 于 2019-10-26 19:00 编辑 \n\nPlayerJoinEvent ePlayer p = e.getPlayer();\n\nConfigurationSection cs = Main.getInstance().getConfig();\nif (!cs.contains(p.getName)) {\n\n     cs.set(p.getName+\".xx\",Boolean.valueOf(false));\n     File file = new File(Main.getInstance().getDataFolder(), \"PlayerData.yml\");\n                        try {\n                                Main.getInstance().getConfig().save(file);\n                        } catch (IOException ex) {\n                                ex.printStackTrace();\n                        }\n\n}\n\n到这里PlayerData.yml里就是\nPlayerName:\n  xx:false\n\n里面的值修改后退出在进cs.contains(p.getName) =true，但是重启服务器后在进cs.contains(p.getName) 就会=False\n求解\n\n楼下答案不hao使，问题已自行解决\n答案:\nFile file = new File(Main.getInstance().getDataFolder(), \"PlayerData.yml\");\nFileConfiguration fc = file.exists()?YamlConfiguration.loadConfiguration(file):new YamlConfiguration();\nif (!fc.contains(p.getName)) {\nfc.set(String.valueOf(p2) + \".Achievement.Shoes\", Boolean.valueOf(false));\n\n}\n\n",
    "replies": [
        {
            "author": "TheRam_",
            "timestamp": 1572071160,
            "txt_content": " 本帖最后由 TheRam_ 于 2019-10-26 14:28 编辑 \nPlayer p = e.getPlayer();\nFile file = new File(new File(Main.getInstance().getDataFolder(),\"/\").getAbsolutePath() + \"/PlayerData.yml\");\nFileConfiguration config = YamlConfiguration.loadConfiguration(file);\nBoolean exist = config.getConfigurationSection(\"PlayerData\").getKeys(false).contains(p.getName());\n复制代码\n"
        },
        {
            "author": "a1294790523",
            "timestamp": 1572086820,
            "txt_content": " 本帖最后由 a1294790523 于 2019-10-26 18:54 编辑 \nTheRam_ 发表于 2019-10-26 14:26\n不推荐这种方法，这样你每次玩家加入的时候就载入一遍配置文件，还有不必要的对象创建\n还有潜在的不兼容linux系统的问题.....\n应该将FileConfiguration缓存在内存中，在服务器开启时读取，在服务器关闭时才进行更新\n还有，为什么你要以默认的配置文件为模板保存玩家数据....\n"
        },
        {
            "author": "弥猫うた",
            "timestamp": 1572088020,
            "txt_content": "a1294790523 发表于 2019-10-26 18:47\n不推荐这种方法，这样你每次玩家加入的时候就载入一遍配置文件，还有不必要的对象创建\n还有潜在的不兼容li ...\n请问如何在关闭时更新指定的配置文件呢?我只知道saveDefaultConfig()，但是这是保存Config.yml来着qwq"
        }
    ]
}