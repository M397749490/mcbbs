{
    "title": "TileEntity服务端数据不正确",
    "author": "tt36999",
    "replyCount": 0,
    "timestamp": 1543654500,
    "txt_content": "我在尝试做一个包含两个液体罐的方块，逻辑是拿着有液体的桶右击方块就会把桶的液体装到方块的储罐A里，空桶右击就把储罐B的液体装到桶里。但是在我写完onBlockActivated的代码后测试时却发现一个问题，在逻辑服务端(world.isRemote = false的情况下)每次通过worle.getTileEntity(pos)获得的TileENtity中储罐包含的液体一直是null，而客户端则工作正常，没有任何问题。\n尝试过使用world.markChunkDirty()但是没有解决，求一个大佬帮忙提供思路\n方块右击逻辑代码\n    @Override\n    public boolean onBlockActivated(World worldIn, BlockPos pos, IBlockState state, EntityPlayer playerIn, EnumHand hand, EnumFacing facing, float hitX, float hitY, float hitZ) {\n        ItemStack itemHeld = playerIn.getHeldItem(hand);\n        IFluidHandlerItem handlerItem = FluidUtil.getFluidHandler(itemHeld);\n        if (handlerItem != null) {\n            TileEntityPurifier purifier = (TileEntityPurifier) worldIn.getTileEntity(pos);\n            IItemHandler iItemHandler = new InvWrapper(playerIn.inventory);\n            FluidActionResult emptyResult = FluidUtil.tryEmptyContainerAndStow(itemHeld, purifier.tank, iItemHandler, purifier.tank.getCapacity(), playerIn, true);\n            if (emptyResult.isSuccess()) {\n                playerIn.setHeldItem(hand, emptyResult.getResult());\n                worldIn.markChunkDirty(pos, purifier);\n                return true;\n            }\n            FluidActionResult fillResultOut = FluidUtil.tryFillContainerAndStow(itemHeld, purifier.outputTank, iItemHandler, purifier.outputTank.getFluidAmount(), playerIn, true);\n            if (fillResultOut.isSuccess()) {\n                playerIn.setHeldItem(hand, fillResultOut.getResult());\n                worldIn.markChunkDirty(pos, purifier);\n                return true;\n            }\n            FluidActionResult fillResult = FluidUtil.tryFillContainerAndStow(itemHeld, purifier.outputTank, iItemHandler, purifier.tank.getFluidAmount(), playerIn, true);\n            if (fillResult.isSuccess()) {\n                playerIn.setHeldItem(hand, fillResult.getResult());\n                worldIn.markChunkDirty(pos, purifier);\n                return true;\n            }\n        } else {\n            BrewingCraft.openGui(playerIn, getGui(), worldIn, pos.getX(), pos.getY(), pos.getZ());\n            return true;\n        }\n        return false;\n    }复制代码\n\n",
    "replies": []
}