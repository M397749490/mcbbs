{
    "title": "一个插件想法 优化服务器网络",
    "author": "494308843",
    "replyCount": 11,
    "timestamp": 1439863560,
    "txt_content": "{:10_514:}很多情况下\n玩家不多移动\n网络消耗是很低的\n如果玩家跑图\n几乎可以达到一个玩家每秒站掉服务器1M的网络\n\n我有一个想法\n不知道各位能否实现\n\n那就是\n\n单独处理区块数据\n限速\n现在每秒多少多少KB之类的╮(╯_╰)╭\n\n岂不是可以缓解这个问题了\n而大部分  非恶意跑图（加速作弊等  疯狂跑图  消耗网络）\n一般瞬发的网络消耗\n\n如果有这种插件限制\n玩家顶多是多了几秒的加载区块\n\n但是能节省不少流量\n减少网络负担\n\n很棒的插件有木有{:10_552:}！！！\n\n\n\n\n",
    "replies": [
        {
            "author": "andylizi",
            "timestamp": 1439987460,
            "txt_content": "然而这样会让玩家觉得很卡= =\n优化区块加载速度是每个服务器都希望的事，而你要减慢速度。。\n还不如按这个帖子说的，把spigot.yml里的max-bulk-chunks改大。"
        },
        {
            "author": "tdiant",
            "timestamp": 1439988060,
            "txt_content": "=A= 咋可能1M，服务器优化做好了绝对达不到1M\n并且这个插件设想一点也不好，你要是想限制服务端信息包发送速度的话那你的服务器会变得更卡。根本不会缓解这个问题。\n你还不如写个插件，让内存里闲置的chunks卸载掉，那才叫真正的优化了"
        },
        {
            "author": "jiongjionger",
            "timestamp": 1440217440,
            "txt_content": "NoLagg有这个功能，意义不大，只会更卡"
        },
        {
            "author": "494308843",
            "timestamp": 1440231060,
            "txt_content": "jiongjionger 发表于 2015-8-22 12:24\nNoLagg有这个功能，意义不大，只会更卡\n{:10_493:}什么鬼\n\n我去看看\n\n话说为什么会更卡\n\n我的意思不是管理区块\n而是接管发送区块的地方\n为什么会更卡？\n限制每秒发送的区块数据速率\n不影响玩家交互的通讯\n只接管发送区块数据的\n避免突发占用高宽带\n{:10_493:}\nQAQ适用于小宽带服\n{:10_503:}我觉得应该很不错啊"
        },
        {
            "author": "iSteven",
            "timestamp": 1440242460,
            "txt_content": "楼主应该了解下网络协议"
        },
        {
            "author": "494308843",
            "timestamp": 1440242880,
            "txt_content": "iSteven 发表于 2015-8-22 19:21\n楼主应该了解下网络协议\n{:10_493:}懂一点\n我的意思是\n让玩家不突发产生那么多流量\n让网络稳定\n产生的后果顶多是玩家加载地图和区块的时候  慢了几秒\n但是换来的是服务器整体网络的稳定"
        },
        {
            "author": "494308843",
            "timestamp": 1440243120,
            "txt_content": "iSteven 发表于 2015-8-22 19:21\n楼主应该了解下网络协议\n不是单纯的限速\n单纯的限速的话\n肯定会导致  玩家正常的交互和区块数据堵塞\n下载区块数据 区块数据较大  限制每秒速度 如果发不完 的时候玩家没反应接不到任何其他数据\n\n我的意思是插件上限制区块的发送速度\n应该不难\n适用于视距低的服务器\n比如3\n{:10_493:}\n如果这样优化\n说不定15M可以稳定带300人"
        },
        {
            "author": "jiongjionger",
            "timestamp": 1440249360,
            "txt_content": "494308843 发表于 2015-8-22 16:11\n什么鬼\n\n我去看看\n首先你要管理发包，需要自己实现，必然额外有消耗\n其次做发包速度和发送策略需要更多的逻辑判断和队列保存将要发送给玩家的包\n如果还没发出去的包所对应区块又更新了，你有两种可选做法\n1. 以前在队列的包依然发，然后再发新的包，这样做反而额外吃宽带\n2. 在队列里面删除旧包，插入新包，根据策略调整优先级，这样做额外占用CPU时间，降低TPS\n\n所以明白为何会更卡了么"
        },
        {
            "author": "v_sky",
            "timestamp": 1440254940,
            "txt_content": "localchunkcache不是更好吗啊喵"
        },
        {
            "author": "qwqw2250294368",
            "timestamp": 1440255240,
            "txt_content": "有道理{:10_512:}"
        },
        {
            "author": "Alove_",
            "timestamp": 1440297780,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        }
    ]
}