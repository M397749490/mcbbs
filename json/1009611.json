{
    "title": "服务器升级到1.15.2后TPS掉的很严重 帮忙看一下Timings",
    "author": "水煮清娃",
    "replyCount": 8,
    "timestamp": 1586176980,
    "txt_content": " 本帖最后由 水煮清娃 于 2020-4-7 23:03 编辑 \n\n服务器主机是较高配置的VPS不存在性能问题，最近升级到1.15.2后服务器经常性TPS极低， 服务器严重掉TPS的时候CPU占用率只有百分之三十左右，游戏内未发觉明显卡顿，但TPS只有12~14左右(十来个人时)，服务端按照MCBBS优秀教材帖进行过配置优化，感觉没什么用，问题应该出在插件上，全服有六十来个插件...\n\n后台一直刷服务器过载 (本地整合服务端的时候就一直刷这个，本地测试未发现掉TPS的问题，应该是因为只有一个人在测试的原因):[20:28:38 WARN]: Can't keep up! Is the server overloaded? Running 5046ms or 100 ticks behind复制代码\n\n\n这是没什么人的时候测的Timings，不知道参考价值高不高，本人不会看，求指教https://timings.aikar.co/?id=a1a58516ae16499386ecdf38b16ce\n",
    "replies": [
        {
            "author": "安少An_Shao",
            "timestamp": 1586176980,
            "txt_content": "这就是版本的锅了，非常建议用这几个插件，我也是1.15.2的服务器，饱受实体烦扰\n\n[优化]EntityTrackerFixer —— 修复entityTick导致的卡顿[1.14.4-1.15]\nhttps://www.mcbbs.net/thread-910338-1-1.html\n[优化]Simple Anti-Mob Lag —— 冻结生物以缓解卡服|已兼容至1.15[1.9-1.15]\nhttps://www.mcbbs.net/thread-874306-1-1.html\n\n\n"
        },
        {
            "author": "皮皮懒不懒",
            "timestamp": 1586177280,
            "txt_content": "占用最高的就是实体了，尝试加入实体清理插件\n另外1.15.2比较新优化本身就不好，建议使用较低版本"
        },
        {
            "author": "Daleyworld",
            "timestamp": 1586177340,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "帕帕武",
            "timestamp": 1586177520,
            "txt_content": "1.15.2一直都是反向优化，特别是区块，根本不卸载，建议楼主用比较好的CPU，提升CPU性能和核数，优化插件有个付费的可以卸载区块，但100R+，不如就升级CPU去"
        },
        {
            "author": "Daleyworld",
            "timestamp": 1586177640,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "Czy2019",
            "timestamp": 1586178180,
            "txt_content": "https://www.mcbbs.net/thread-935265-1-1.html\n高版本原版优化插件。\n如果还不行建议提升CPU。\n有帮助麻烦最佳"
        },
        {
            "author": "结城希亚",
            "timestamp": 1586180160,
            "txt_content": "还是生物问题，按照这配置改一下试试呢？没什么用是数值设置的不够狠\n而且1.15的优化比1.14好，这情况还真不清楚\n\n1、在bukkit.yml里\n（1）spawn-limits值设为\n  monsters: 20\n  animals: 4\n  water-animals: 1\n  ambient: 1\n（2）chunk-gc\nperiod-in-ticks设为300\n（3）ticks-per.monster-spawns设为6\n2、在spigot.yml里\n（1）save-user-cache-on-stop-only改为true\n（2）max-tick-time数值改为5或者3000\n（3）mob-spawn-range设为3\n（4）entity-activation-range分别改为8、6、12、2\n（5）tick-inactive-villagers改为false\n（6）merge-radius都设置为64\n（7）nerf-spawner-mobs改为true\n（8）arrow-despawn-rate改为400\n（9）view-distance改为2\n\n3、在Paper.yml里\n（1）max-auto-save-chunks-per-tick改为6\n（2）optimize-explosions改为true\n（3）mob-spawner-tick-rate改为4\n（4）max-entity-collisions改为1\n（5）despawn-ranges分别改为28和96"
        },
        {
            "author": "2398196414",
            "timestamp": 1586185500,
            "txt_content": "设置实体刷新范围，比如玩家16格以内32格以外不刷实体"
        }
    ]
}