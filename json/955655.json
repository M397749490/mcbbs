{
    "title": "关于“函数”内执行函数是否能获取返回值并存储的问题",
    "author": "HangBack_",
    "replyCount": 7,
    "timestamp": 1581228780,
    "txt_content": " 本帖最后由 DoYo_GZ 于 2020-2-9 14:44 编辑 \n\n\n\n\n\n\nTIM图片20200209141124.png (53.78 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-9 14:12 上传\n\n\n\n\n\n\n\n\n\nTIM图片20200209141119.png (34.88 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-9 14:12 上传\n\n\n\n\n\norder.mcfunction\n\n\n\n\n\nTIM图片20200209141059.png (11.27 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-9 14:12 上传\n\n\n\n\n\n三个函数都能执行，要的效果是，玩家执行该函数后，执行order.mcfunction（递归）后的命令返回数*0.5这个值储存到doyo_front:default中的player_info_transfer.Order然后再将其存到player_info_transfer.Uid，再通过告示牌将玩家名字存储到player_info_transfer.Name，最后把player_info_transfer的值追加到player_info中，可是如果这些命令是我一个个自己执行的（按顺序），是能达到效果的，用函数执行，却未能达到效果（希望的结果：返回值存储到player_info_transfer中,目前的结果：值来源未知为“0”）这是怎么回事uid.mcfunction\ndata modify storage doyo_front:default player_info_store set from storage doyo_front:default player_info\nexecute as @s store result storage doyo_front:default player_info_transfer.Order long 0.5 run function doyo_front:player/order\nexecute store result storage doyo_front:default player_info_transfer.Uid long 1 run data get storage doyo_front:default player_info_transfer.Order\nexecute at @s run setblock ~ ~ ~ minecraft:acacia_sign{Text1:\"{\"selector\":\"@p\"}\"}\ndata modify storage doyo_front:default player_info_transfer.Name set from block ~ ~ ~ Text1\ndata modify storage doyo_front:default player_info prepend from storage doyo_front:default player_info_transfer复制代码\norder.mcfunction\nexecute if data storage doyo_front:default player_info_store[0] run data remove storage doyo_front:default player_info_store[0]\nexecute if data storage doyo_front:default player_info_store[0] run function doyo_front:player/order复制代码\n\n\n\n",
    "replies": [
        {
            "author": "Chelover_C60",
            "timestamp": 1581228780,
            "txt_content": " 本帖最后由 Chelove_C60 于 2020-2-10 15:35 编辑 \n\n测试中发现函数内执行函数的返回值只会是0（没有执行任何命令）或1（执行了命令，不管多少个）mjsb就完事了\n由于乘以了0.5的倍率，且保存的数据类型为长整形，所以结果必定是0\n所以只能考虑其他方案\n\n不知这条命令是不是你需要的\nexecute store result storage doyo_front:default player_info_transfer.Order long 1 if data storage doyo_front:default player_info_store[]\n替换掉uid.mcfunction的前两行命令，然后order.mcfunction应该没啥用了"
        },
        {
            "author": "(=°ω°)丿",
            "timestamp": 1581309300,
            "txt_content": " 本帖最后由 隐退 于 2020-2-10 12:37 编辑 \n三个函数都能执行\n你不是只给了 uid 和 order 两个函数吗？\nuid 第4行似乎没转义。execute at @s run setblock ~ ~ ~ minecraft:acacia_sign{Text1:\"{\"selector\":\"@p\"}\"}复制代码好像转义是被论坛吞了。"
        },
        {
            "author": "HangBack_",
            "timestamp": 1581310740,
            "txt_content": "隐退 发表于 2020-2-10 12:35\n你不是只给了 uid 和 order 两个函数吗？\nuid 第4行似乎没转义。好像转义是被论坛吞了。\n ...\n本身就只写了两个函数，第一张图是nbt参考，转义的确是被论坛吞了awa"
        },
        {
            "author": "(=°ω°)丿",
            "timestamp": 1581316440,
            "txt_content": "DoYo_GZ 发表于 2020-2-10 12:59\n本身就只写了两个函数，第一张图是nbt参考，转义的确是被论坛吞了awa\n我怀疑你本来就写错了，我想知道你要干什么（\nfunction doyo_front:uid\ndata modify storage doyo_front:default player_info_store set from storage doyo_front:default player_info\n#将 player_info 存到 player_info_store\nexecute store result storage doyo_front:default player_info_transfer.Order long 0.5 run function doyo_front:player/order\n#递归, 结果 × 0.5 存到 player_info_transfer.Order\nexecute store result storage doyo_front:default player_info_transfer.Uid long 1 run data get storage doyo_front:default player_info_transfer.Order\n#将 player_info_transfer.Order 存到 player_info_transfer.Uid\nsetblock ~ ~ ~ minecraft:acacia_sign{Text1:'{\"selector\":\"@p\"}'}\n#将玩家名字存到 Text1\ndata modify storage doyo_front:default player_info_transfer.Name set from block ~ ~ ~ Text1\n#将 Text1 存到 player_info_transfer.Name\ndata modify storage doyo_front:default player_info prepend from storage doyo_front:default player_info_transfer\n#将 player_info_transfer 追加到 player_info复制代码\nfunction doyo_front:player/order\nexecute if data storage doyo_front:default player_info_store[0] run data remove storage doyo_front:default player_info_store[0]\n#存在 player_info_store[0] 则移除它\nexecute if data storage doyo_front:default player_info_store[0] run function doyo_front:player/order\n#存在 player_info_store[0] 则再运行一次该函数复制代码"
        },
        {
            "author": "HangBack_",
            "timestamp": 1581331320,
            "txt_content": "Chelove_C60 发表于 2020-2-10 15:27\n测试中发现函数内执行函数的返回值只会是0（没有执行任何命令）或1（执行了命令，不管多少个）mjsb就完事了 ...\n我不知道有这种操作，这条命令在函数执行中是成功的吗？"
        },
        {
            "author": "Chelover_C60",
            "timestamp": 1581332580,
            "txt_content": "DoYo_GZ 发表于 2020-2-10 18:42\n我不知道有这种操作，这条命令在函数执行中是成功的吗？\n“这条命令”是指哪条命令？\n你的函数里所有命令执行都是成功的，只是由于mjsb等原因没能正确返回执行结果。\n我写的那个命令，就是把 if 的结果作为返回值处理，执行也是成功的"
        },
        {
            "author": "HangBack_",
            "timestamp": 1581333000,
            "txt_content": "Chelove_C60 发表于 2020-2-10 19:03\n“这条命令”是指哪条命令？\n你的函数里所有命令执行都是成功的，只是由于mjsb等原因没能正确返回执行结 ...\n有劳了，感谢"
        }
    ]
}