{
    "title": "求解nukkitEntity谜之报错和解决办法",
    "author": "超神的冰凉",
    "replyCount": 4,
    "timestamp": 1581997260,
    "txt_content": " 本帖最后由 超神的冰凉 于 2020-2-18 11:45 编辑 \n\n我尝试新建一个自定义的实体，并且展示给玩家，但是却发生了以下的报错，不知为什么会空指针？\nThrowing\njava.lang.NullPointerException: null\n        at cn.nukkit.utils.BinaryStream.putString(BinaryStream.java:533) ~[nukkit.jar:?]\n        at cn.nukkit.network.protocol.AddEntityPacket.encode(AddEntityPacket.java:166) ~[nukkit.jar:?]\n        at cn.nukkit.Server.batchPackets(Server.java:680) ~[nukkit.jar:?]\n        at cn.nukkit.network.RakNetInterface.putPacket(RakNetInterface.java:254) ~[nukkit.jar:?]\n        at cn.nukkit.Player.dataPacket(Player.java:1082) ~[nukkit.jar:?]\n        at cn.nukkit.Player.dataPacket(Player.java:1063) ~[nukkit.jar:?]\n        at cn.nukkit.entity.Entity.spawnTo(Entity.java:908) ~[nukkit.jar:?]\n        at cn.nukkit.Player.doFirstSpawn(Player.java:909) ~[nukkit.jar:?]\n        at cn.nukkit.Player.sendNextChunk(Player.java:839) ~[nukkit.jar:?]\n        at cn.nukkit.Player.checkNetwork(Player.java:1851) ~[nukkit.jar:?]\n        at cn.nukkit.Server.tick(Server.java:1140) ~[nukkit.jar:?]\n        at cn.nukkit.Server.tickProcessor(Server.java:905) [nukkit.jar:?]\n        at cn.nukkit.Server.start(Server.java:882) [nukkit.jar:?]\n        at cn.nukkit.Server.<init>(Server.java:567) [nukkit.jar:?]\n        at cn.nukkit.Nukkit.main(Nukkit.java:112) [nukkit.jar:?]\n复制代码这是我的实体floatingtext:(已经正确的在插件启动时注册)\nimport cn.nukkit.entity.Entity;\nimport cn.nukkit.level.format.FullChunk;\nimport cn.nukkit.nbt.tag.CompoundTag;\n\npublic class floatingtext extends Entity {\n    public floatingtext(FullChunk chunk, CompoundTag nbt){\n        super(chunk, nbt);\n    }\n    @Override\n    public int getNetworkId() {\n        return -1;\n    }\n\n}复制代码这是我创建并显示这个实体的代码：import cn.nukkit.Server;\nimport cn.nukkit.entity.Entity;\nimport cn.nukkit.level.Level;\nimport cn.nukkit.math.Vector3;\n\nimport java.time.LocalDateTime;\nimport java.util.*;\n\npublic class displayer {\nEntity entity = createTextEntity(\"try\",128,87,150,Server.getInstance().getLevelByName(\"world\"));\nlevel.addEntity(entity);\nentity.spawnToAll();\n}\npublic Entity createTextEntity(String name,int x,int y,int z,Level level){\n        Entity tmp = Entity.createEntity(\"floatingtextentity\", level.getChunk(x>>4,z>>4),Entity.getDefaultNBT(new Vector3(x,y,z)));\n        tmp.setNameTagVisible(true);\n        tmp.setNameTag(name);\n        tmp.setNameTagAlwaysVisible(true);\n        tmp.setMaxHealth(9999);\n        tmp.setHealth(9999);\n        tmp.setPosition(new Vector3(x,y,z));\n        tmp.setScale(1.0f);\n        tmp.setLevel(level);\n        return tmp;\n    }复制代码\n我现在不知道错nbt误为何发生，为何会在写入nbt(如报错所言)时候出错？\n请问如何修改呢，解决方案是什么？\n\n",
    "replies": [
        {
            "author": "Kenneth_z",
            "timestamp": 1581997260,
            "txt_content": "Network Id 不能-1 因为添加一个实体现在版本需要一个identifier 比如说僵尸就是minecraft:zombie -1找不到对应的identifier 所以报错了 浮空字你可以试试继承EntityHuman 然后让这个实体的scale为0 如果觉得好请给个最佳"
        },
        {
            "author": "超神的冰凉",
            "timestamp": 1582017360,
            "txt_content": "Kenneth_z 发表于 2020-2-18 11:41\nNetwork Id 不能-1 因为添加一个实体现在版本需要一个identifier 比如说僵尸就是minecraft:zombie -1找不到 ...\n十分感谢"
        },
        {
            "author": "ruo_shui",
            "timestamp": 1582167600,
            "txt_content": "你也可以将 NetWorkId 设置为64 也可以达到一样的效果 不用继承 EntityHuman"
        },
        {
            "author": "ruo_shui",
            "timestamp": 1582167840,
            "txt_content": "继承 Entity 类生成的实体有重力效果 \n所以只需执行 setImmobile() 即可\n注意要重写 getWidth() 与 getHeight() 生物碰撞箱\n不然显示内容会很低"
        }
    ]
}