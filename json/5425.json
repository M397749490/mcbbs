{
    "title": "minecraft 1.6 全功能车站设计",
    "author": "hwei",
    "replyCount": 34,
    "timestamp": 1307177820,
    "txt_content": " 本帖最后由 hwei 于 2011-6-4 21:24 编辑 \n\n想尝试设计一个功能最全的车站。\n于是几乎把所有能用到的车站技术全都用上了（包括最新的1.6才有的技术喔）。{:10_530:} \n现在来展示下成果，顺便写点教程。（这里只是功能设计，外观不在探讨范围之内。）\n实际应用中如果用不到这么多功能，可以自行删减。这么复杂的车站建起来也是很累的一件事。{:10_564:} \n\n\n功能：\n4方向。发车点有4个启动按钮，对应4个发车方向。\n不下车中转。4个方向来车都会到达本站发车点，不用下车即可选择下一站。\n有车库。按叫车按钮就会出现一辆空车。\n空车判断。发车后判断车上是否有人，没人的车都回收到车库中。\n溢出处理。车库满了会自动把多余的车叠放在一个特殊轨道上等待处理。（无限矿车叠加）\n\n侧视图：\n\n\n\n俯视图：\n\n\n\n视频演示：\nhttp://you.video.sina.com.cn/api/sinawebApi/outplayrefer.php/vid=53921118_1301837827_PBm8SCJsB2LK+l1lHz2stqkP7KQNt6nkimq1s1GjLQxeQ0/XM5GcYdQF4SjXCNkEqDhAQZs2d/8n1hU/s.swf\n\n\n讲解目录：\n\n■方向选择\n　□轨道设计\n　□按钮系统\n　□进站复位\n■空矿车检测\n　□空矿车检测变轨\n　□载人矿车激活红石电路\n　□空矿车激活红石电路\n■车库\n　□舱盖门存车\n　□脉冲发生器\n　□矿车溢出处理\n\n\n\n存档下载：\nhttp://www.box.net/shared/zmpq4nzeis\n或者\nhttp://www.rayfile.com/files/df9f18b3-8eac-11e0-ab81-0015c55db73d/\n\n\n\n（貌似不上传附件，首页上就不会显示图片！？那就别怪我了，上传一张已经贴过的图片，请无视……{:10_532:} ）\n\n\n\n\n俯视_.png (76.37 KB, 下载次数: 51)\n\n下载附件\n\n俯视图\n2011-6-4 19:56 上传\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "hwei",
            "timestamp": 1307177940,
            "txt_content": " 本帖最后由 hwei 于 2011-6-4 18:30 编辑 \n\n■方向选择\n　□轨道设计\n\n首先把轨道摆放成这种样子：\n（这是所有岔道开关都关闭时的状态）\n\n[blank][minecart_track][blank][minecart_track][blank][minecart_track][blank][minecart_track][blank]\n[minecart_track1][rail_corner3][minecart_track1][rail_corner3][minecart_track1][rail_corner3][minecart_track1][rail_corner3][minecart_track1]\n[blank][redstone_torch][blank][redstone_torch][blank][redstone_torch][blank][redstone_torch][blank]\n\n发车的情况：\n发车时车应该从右边进入。\n哪一个岔道开关打开车就会从哪一个岔道出去。\n如果所有岔道开关都是关闭状态，那么车就会从左边驶出。\n\n进站的情况：\n如果所有岔道开关都是关闭状态，那么所有从上方进站的车都会从左边驶出。\n\n可以看到，这种轨道对于多方向车站正合适。\n右边是发车口，左边是进站口，上面是各个方向的出入口。\n\n现在的问题就变成了：如何控制岔道开关。\n\n\n　□按钮系统\n\n用拉杆开关固然可以控制岔道，但是它很不方便。\n对用户来说操作方式不直观，开关的两个状态意义不明。\n无法避免错误选择状态，即会同时开启两个岔道。\n无法自动复位。轨道只有处于默认状态，所有方向的进站车辆才能正确进站。\n按钮则可以避免以上缺陷，但代价是红石电路复杂化。\n不过好在已经有人给出了一个体积很小的按钮系统设计方案，只要套用这种设计就行了。\n\n按钮系统的功能为：\n多个按钮分别控制多个信号输出状态。\n同时只能最多有一个信号输出激活，其它输出处于关闭状态。\n整个系统可以一直保持当前状态。\n整个系统可以复位，使所有输出处于关闭状态。\n这正是控制上面那种铁轨岔道所需要的东西。\n\n这套按钮系统的来源是这里 http://www.minecraftforum.net/viewtopic.php?f=1020&t=126312\n设计图纸如下\n\n这两个设计图都是侧视图。搭建的时候按照奇偶交错顺序，将这两种片叠放在一起。\n（实际上这个设计图的下半部分有一些电路只是将后面的输出引到前面显示而已，不是很重要，一般可以去掉。）\n搭建出来的效果可以参考我以前发的贴： 高度压缩的红石电路按钮系统\n为了方便，这里给一张效果图：\n\n\n\n最终，把按钮系统的输出接到那套轨道岔道上，就行了。\n连接的时候还是需要一点红石电路技巧，因为按钮系统的输出是紧密排列的，而轨道岔道的控制点是相互空一格的。\n轨道朝着不同方向，其岔道的默认状态有可能不一样，这时候只要添加个非门就可以解决了。\n下图大概展示我是怎么连接的。\n纯电路连接技巧，想了解具细节可以去下载存档看。\n\n\n\n\n　□进站复位\n因为只有岔道都处于复位状态时，进站车辆才会正确走左边的进站路线。所以进站前必须保证岔道复位。\n这其实比较简单。就是在各个方向的出入口上放上踏板轨道。\n这样实际上每次出站时就进行复位。这样进站时早已经是复位状态了。\n\n\n\n下方铺上红石电路。然后引导到上面的那套按钮系统的复位总线上。\n\n\n\n中间有那么多中继器是为了防止干扰附近的电路。\n\n如果你不清楚那套按钮系统的复位总线在哪里，可以看这个电路分析图：\n\n"
        },
        {
            "author": "hwei",
            "timestamp": 1307178000,
            "txt_content": " 本帖最后由 hwei 于 2011-6-4 19:06 编辑 \n\n■空矿车检测\n　□空矿车检测变轨\n\n基本思路是通过载人与否矿车的加速效果不同，从而将是否有人的矿车导向不同的轨道。\n首先让矿车加速，然后用一个踏板铁轨来检测矿车。\n踏板铁轨控制矿车接下来要经过的一个岔道。\n那个岔道默认情况下是空矿车路线，但是踏板激活后，会导向载人矿车的路线。\n载人矿车加速效果较大，经过踏板，趁岔道还没恢复就经过岔道，导向载人矿车的路线。\n而空矿车加速效果小，经过踏板，岔道已经恢复后才走到岔道，结果被导向空矿车路线。\n\n\n\n这个车站进站时，运用了这种空矿车检测办法，将空矿车变轨到车库中去。\n\n　□载人矿车激活红石电路\n\n想检测载人矿车而不检测空矿车，那么把铁轨这样摆放就可以办到了。\n\n\n\n　□空矿车激活红石电路\n\n有了上面的基础，接下来就可以理解只检测空矿车而不检测载人矿车的结构了。\n\n\n\n进入这种结构之前，也得要求矿车先加速到一定程度。\n空矿车经过时，对中继器没有影响。接下来到踏板铁轨上，输出的信号反向后再反向，于是产生输出。\n而载人矿车经过时，中继器会激活，导致接下来踏板的反向信号无效，于是检测不到载人矿车。\n\n\n本车站系统在刚发车后的那段路上用到了这种空矿车激活红石电路的结构。一旦发现发车的车是空车，那么就激发按钮系统的复位总线，导致岔路系统复位，于是空矿车不会从任何一个方向出去，而是直接走进站路线。\n下面这张图里的电路与上面例子中的电路是一样的。只是这里空间有限，所以扭曲压缩了。具体技巧请下载存档研究。\n\n\n\n而进站路线上用到了空矿车检测变轨，一旦发现空矿车就会把它放到车库中去。\n\n\n"
        },
        {
            "author": "hwei",
            "timestamp": 1307178060,
            "txt_content": " 本帖最后由 hwei 于 2011-6-4 19:37 编辑 \n\n■车库\n　□舱盖门存车\n舱盖门是1.6中才有的物品。这个东西用来做车库很合适。\n它立起来的时候，会阻止矿车下落，而盖上的时候则相反。（很奇怪的特性）\n而且矿车堆叠在它上面也相当稳定，旁边没有任何墙壁都没问题。\n下面这个例子展示了仓盖门车库的样子。\n\n\n\n\n　□脉冲发生器\n\n上面那个例子中控制舱盖门用到了脉冲发生器。\n因为按钮的按下弹起时间太长，导致可能有多个矿车落下，所以必须用脉冲发生器缩短舱盖门关闭时间。\n基本的脉冲发生器电路如下：\n\n\n\n它能将较长时间的脉冲变成了极短脉冲。是一个用处很广泛的结构。\n\n　□矿车溢出处理\n\n如果车库满了，仍放进矿车，那么必须要处理这个溢出事件。\n上面的例子中，可以看到入车库的路上有一块石头挡路。\n矿车是可以从下向上通过的，而反向不能。这就能使最后一辆矿车紧紧卡住不溜走，同时阻挡后续矿车进入。\n\n返回的矿车应该让它去哪呢？\n有种车库结构很合适，可以无限存放矿车。代价是矿车进去之后只能手动取出。\n\n下图就是无限车库的结构。很简单。\n\n\n\n下面的那条轨道上能存放无限多个上面轨道上过来的矿车。\n搭建的时候先修下面那条铁轨，稍长一点。然后再修上面那条铁轨，这样这两条铁轨就不会连起来。\n最后敲掉下面铁轨的多余部分，两端堵死。\n\n\n\n\n"
        },
        {
            "author": "hwei",
            "timestamp": 1307178060,
            "txt_content": " 本帖最后由 hwei 于 2011-6-7 00:36 编辑 \n\n备用楼\n\n其他车站设计方案\n\n以上的设计是全功能的并且有扩展性，所以非常复杂。\n在多人游戏中，如果只是想建一个简单的4口车站，那么推荐下面这种设计方案： 1.5 车站 按钮选择四个发车方向 【10*6*6 更简洁的设计】\n少了车库与扩展其他功能的可能性之后，车站就变得相当简洁了。\n\n\n\n\n我用到的卡通材质下载\n\n来源： http://www.minecraftforum.net/topic/43474-16-&#9812;-frenden-&#9812;-16x-its-compatible/\n分牛\n文件名:  FrendenTPv9_14.zip\n下载地址:  http://www.rayfile.com/files/02a559c2-8eab-11e0-bdc6-0015c55db73d/\n"
        },
        {
            "author": "netpot",
            "timestamp": 1307179260,
            "txt_content": "好东西，太好了太好了～～～"
        },
        {
            "author": "lingjianshiwo",
            "timestamp": 1307180100,
            "txt_content": "115过期了……LZ处理下"
        },
        {
            "author": "lingjianshiwo",
            "timestamp": 1307180160,
            "txt_content": "115过期了，LZ处理一下"
        },
        {
            "author": "qrox",
            "timestamp": 1307193180,
            "txt_content": "弱弱的问一句，如何解决两辆车对开撞开的问题。。。（困扰了我很久）"
        },
        {
            "author": "hwei",
            "timestamp": 1307193720,
            "txt_content": " 本帖最后由 hwei 于 2011-6-4 21:23 编辑 \n\n回复 qrox 的帖子\n\n难道是指在同一个铁轨上，两辆车撞上了？\n\n那就只能修两条轨道啦，每个轨道一个只能单方向行驶。这样就不会撞上了。{:10_535:}"
        },
        {
            "author": "john180",
            "timestamp": 1307195820,
            "txt_content": "这个很高级啊"
        },
        {
            "author": "qw87375832",
            "timestamp": 1307206980,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "hhyx",
            "timestamp": 1307248020,
            "txt_content": "唔 果然是引发奇迹的能力啊。。"
        },
        {
            "author": "green丶bastard",
            "timestamp": 1307250780,
            "txt_content": "好厉害 真牛×-w- lz是车站神喵 膜拜"
        },
        {
            "author": "Minecrafthero",
            "timestamp": 1307252340,
            "txt_content": "竟然看见了楼主！"
        },
        {
            "author": "aizuo",
            "timestamp": 1307261280,
            "txt_content": " 本帖最后由 baizuo 于 2011-6-5 16:36 编辑 \n\n我来说说心得吧。\n\n这样的车站我也做过，不过是借助Minecart Mania！还存在的时候，Mania有两个非常好用的功能：收纳箱子和压力轨道\n\n压力轨道类似于现在的检测轨道，但是当时没有用新道具，而是直接使用压力盘，很简陋，优点是可以使用木质的也可以使用石头的。相信lz看到这里已经知道这个特性能够多大地简化铁路系统了\n\n收纳箱子则是，在铁轨的尽头连上一个箱子，在旁边树立一块牌子，写上各种设定参数，箱子就能完成无红石时自动收纳过来的矿车，有红石电流时释放矿车的功能。\n\n也就是说，一个箱子就能取代你所有的车库设计\n\n当然Minecart Mania已经成为过去了，现在用原版道具建车站才是王道。\n\n\n关于岔路系统，相信lz在建设的过程中也遇到了“发车时正常，但是来车时会走向错误的方向”的问题。\n你使用的方法是使用复杂的按钮电路，而且也只能同一时间处理单个方向的车流。\n我使用的是笨办法，即，在外出段设置一个全部连锁的反馈脉冲，然后接回来和岔道并成一个锁存器，一个做R一个做S。当设置好岔道形态，有任何一辆车走出去之后系统就会自动复位。这时就可以正常接收来车了。\n\n这样的缺点：一次也只能处理一个发送/接收请求，间隔时间必须大于[设置岔道-发车]整个时间段（因此还用到了controller block mod，用于发送ready信号）\n\n优点：系统状态与时间无关，其优越性就相当于延时请求和开中断的区别一样。没有Minecart Mania的话，你的空车检验等系统都是time based的，这样的东西不是特别稳定。但是目前好像也没有什么取代方法。\n而且特别省材料，多加一个这样的反馈，脉冲发生器外加一个锁存器，只多出了30多红石和几块石头，几个火炬\n\n\n另外我的岔路选择系统使用的是俩摇杆和一个锁定按钮，可以选择2^2=4路，以后要扩建的话，再加一根摇杆就能选择2^3=8路，虽然很简洁不过对用户要求有点高，旁白还有个说明，00走城堡，01回农村，10去怪物塔，11到地下blah blah，不如按钮直观\n\n\n现在的问题就是，我还没有找到与时间/动量/速度（或者说矿车对象的非静态属性）无关的空车检验方法，大家有什么好点子么\n\n虽然好像斜坡检测是目前唯一的区分方法，但是这玩意不是那么reliable，或许将来Notch会加入木质detector和石制detector？我不是很抱期望……他对车站系统不是特别感兴趣- -"
        },
        {
            "author": "圣诞袜",
            "timestamp": 1307268120,
            "txt_content": "先顶下楼主  "
        },
        {
            "author": "hwei",
            "timestamp": 1307271120,
            "txt_content": "回复 baizuo 的帖子\n\n你说的岔路系统好像和我这个设计的特性差不多么，都是“任何一辆车走出去之后系统就会自动复位”。所谓“复杂的按钮电路”本质上也就是几个锁存器、一个复位线路。\n设计这个全功能车站相当于某种探索研究。为了验证1.6版本游戏建造全功能车站的可能性。\n实际使用时建成这样我觉得可能性不大。建造麻烦，会维护的人也很少。\n\n如果在多人游戏里再建个车站，我肯定就用这个设计： 1.5 车站 按钮选择四个发车方向 【10*6*6 更简洁的设计】。简单了很多，唯一需要的是用户自备矿车。\n\n\nNotch最早的设想估计是用火车头推矿车，但是结果被玩家利用bug搞成自动化的火车系统了，他才被动的加入了动力轨道、踏板轨道。存车、空车判断这种东西，估计以后很难会有简化用的新物品出现吧。"
        },
        {
            "author": "Jakob.z",
            "timestamp": 1307343840,
            "txt_content": "不是一般智商能搞出来的东西.非常优秀..我这种低智商得好好学习.谢谢楼主教程."
        },
        {
            "author": "KOL梦幻",
            "timestamp": 1307346000,
            "txt_content": "求楼主的材质包……"
        },
        {
            "author": "KOL梦幻",
            "timestamp": 1307346000,
            "txt_content": "求楼主的材质包……"
        },
        {
            "author": "aizuo",
            "timestamp": 1307362440,
            "txt_content": "hwei 发表于 2011-6-5 18:52 \n回复 baizuo 的帖子\n\n你说的岔路系统好像和我这个设计的特性差不多么，都是“任何一辆车走出去之后系统就会 ...\n于是没有空车检验，我做成了双层结构，一楼发车，二楼到站，要乘车的客人都到一楼去，二楼专门引接前来的列车，这样就不冲突了，而且可以同时处理多个来车。为了简便只弄了极其简单的双车道处理，也只能处理靠得很近的车子，如果两个车相距时间比较短又不是太短就会相撞XD\n因为没有办法做停车/发车点的同时又做矿车检测，所以……\n\n然后那个收车顶上的石头相当实用呀，可以把多出来的顶回去的同时不会碰到已经排列好的车队"
        },
        {
            "author": "Jakob.z",
            "timestamp": 1307513040,
            "txt_content": " 本帖最后由 Jakob.z 于 2011-6-8 14:40 编辑 \n\n楼主你好,我按照你的整个系统一模一样建了一个,,为什么我的会出现位置信号中继器加一档才能使载人矿车进其它站点,空车检测正常回发车点.如果位置信号中继器用默认档位岔道变轨还没等载人矿车到就复位了,然后载人矿车和空车都回发车点.\n      整个系统保证是一模一样的,只是我都是用石头材质搭的,我版本是1.6.6,\n      还有更奇怪的,脉冲发生器在两个方向是正常的,另两个方向顶部的火把不会闪..........我在你的存档里搭的也是一样情况..不懂了."
        },
        {
            "author": "搞基佬",
            "timestamp": 1307521260,
            "txt_content": "LZ你是正版用户吗？"
        },
        {
            "author": "hwei",
            "timestamp": 1307542680,
            "txt_content": "Jakob.z 发表于 2011-6-8 14:04 \n楼主你好,我按照你的整个系统一模一样建了一个,,为什么我的会出现位置信号中继器加一档才能使载人矿车进其它 ...\n这个我也不清楚……\n按照实际情况调整好就行了吧。"
        },
        {
            "author": "vintene",
            "timestamp": 1308744240,
            "txt_content": "lz我太崇拜你了！你太牛了，你使我看到minecraft的无所不能！"
        },
        {
            "author": "faifai",
            "timestamp": 1308745020,
            "txt_content": "我做了出來一定很有成功感"
        },
        {
            "author": "Lok魂之翼",
            "timestamp": 1308763080,
            "txt_content": "请问一下这个是有用MOD吗？"
        },
        {
            "author": "mooncalf",
            "timestamp": 1340554500,
            "txt_content": "挖坟看到了好设计.. 顶一下.."
        },
        {
            "author": "dxsc",
            "timestamp": 1386317520,
            "txt_content": "Minecrafthero 发表于 2011-6-5 13:39 \n竟然看见了楼主！\n马克1234512345"
        },
        {
            "author": "幽先生",
            "timestamp": 1392622560,
            "txt_content": "挖个坟。不知楼主还在吗。首先对这个火车系统表示钦佩，其次有个问题：按下发车按钮后并无法进入正常的轨道，由于轨道复位过快，会直接回到发车点，即使在楼主你的存档里也是这样。我试过1.6,1.7的几个版本，结果都是如此。所以，这个按钮系统真的具备可行性吗？"
        },
        {
            "author": "lhylh1978",
            "timestamp": 1392623280,
            "txt_content": "看着很上档次 就是视频看不了"
        },
        {
            "author": "1036780155",
            "timestamp": 1423460340,
            "txt_content": "呵呵感觉还不错啊"
        },
        {
            "author": "0ZERO",
            "timestamp": 1424055960,
            "txt_content": "Mcbbs有你更精彩~"
        },
        {
            "author": "kuangwenxin",
            "timestamp": 1424056380,
            "txt_content": "um。。。视频已被删除\n坟贴也。@hwei\n"
        }
    ]
}