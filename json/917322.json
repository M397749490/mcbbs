{
    "title": "forge 1.13+ 进入服务器 断开连接事件 代替方法",
    "author": "冰冷冷",
    "replyCount": 3,
    "timestamp": 1570028460,
    "txt_content": " 本帖最后由 冰冷冷 于 2019-10-2 23:13 编辑 \n\nforge 1.13+ 进入/断开服务器连接事件的临时替代方法\n\n在1.13以前的版本中两个事件为FMLNetworkEvent.ClientConnectedToServerEvent 当FML客户端发送连接服务端的请求时触发FMLNetworkEvent.ClientDisconnectionFromServerEvent 当FML客户端和服务端断开时触发而在1.13+版本中有很大变化，以上两个事件已删除\n\n\n解决办法\n@Mod.EventBusSubscriber(modid = VexMusic.MODID, value = Dist.CLIENT)\nprivate static class ConnectedToServerListener {\n    @SubscribeEvent\n    public static void onGuiOpen(GuiOpenEvent event) {\n        GuiScreen gui = event.getGui();\n        if (gui instanceof GuiMainMenu || gui instanceof GuiConnecting) {\n            //你需要做的事情相当于  FMLNetworkEvent.ClientConnectedToServerEvent \n            MinecraftForge.EVENT_BUS.unregister(ConnectedToServerListener.class);\n        }\n    }\n}\n@Mod.EventBusSubscriber(modid = VexMusic.MODID, value = Dist.CLIENT)\nprivate static class DisconnectionFromServerListener {\n    @SubscribeEvent\n    public static void onGuiOpen(GuiOpenEvent event) {\n        if (event.getGui() instanceof GuiMultiplayer) {\n            //你需要做的事情 相当于 FMLNetworkEvent.ClientDisconnectionFromServerEvent\n            MusicPlayer.mp3Player.stop();\n            MusicPlayer.playerList.stop();\n        }\n    }\n}暂时只能通过检测gui来判断断开与连接\n\n如果有更好方法或者哪里有错误还希望各位大佬多多指点\n\n\n",
    "replies": [
        {
            "author": "85302485",
            "timestamp": 1570032300,
            "txt_content": "可以！ 精华帖子，有很大帮助"
        },
        {
            "author": "3TUSK",
            "timestamp": 1570149840,
            "txt_content": "你提到了 https://github.com/MinecraftForge/MinecraftForge/issues/5536。这个 issue ticket 由下面这笔 commit 关闭：\n\nhttps://github.com/MinecraftForg ... d0fabdc91540b67cc8f\n\n这笔 commit 中追加了 ClientPlayerNetworkEvent.LoggedInEvent 和 ClientPlayerNetworkEvent.LoggedOutEvent，应该能解决楼主的问题了吧？"
        },
        {
            "author": "冰冷冷",
            "timestamp": 1580368680,
            "txt_content": "3TUSK 发表于 2019-10-4 08:44\n你提到了 https://github.com/MinecraftForge/MinecraftForge/issues/5536。这个 issue ticket 由下面这笔  ...\n但是在1.13.2中没有这两个事件。所以只能用这两个来代替，之后的版本就有了\n\n\n\n\n1.png (37.98 KB, 下载次数: 0)\n\n下载附件\n\n2020-1-30 15:17 上传\n\n\n\n\n\n\n\n\n\n4.png (31.2 KB, 下载次数: 0)\n\n下载附件\n\n2020-1-30 15:17 上传\n\n\n\n\n\n\n\n\n3.png (114.31 KB, 下载次数: 0)\n\n下载附件\n\n2020-1-30 15:17 上传\n\n\n\n\n\n\n"
        }
    ]
}