{
    "title": "lore獲取",
    "author": "超級寶寶",
    "replyCount": 10,
    "timestamp": 1489808040,
    "txt_content": " 本帖最后由 超級寶寶 于 2017-3-20 21:48 编辑 \n\n有大神知道要如何判斷和獲取數字嗎\n像這樣\n\n假設那個玩家 手上有個武器 在x行lore 是    §6子彈防禦+4\n     if (p.getInventory().getItemInHand().getItemMeta().getLore().contains(\"    §6子彈防禦+\")數字)\n{\ne.setdamage(e.getdamage()-數字)\n}\n數字 = 4\n\n2017/3/20://\n用百分比的話 百分之20\n要怎寫?\n\n那如果不使用double 而使用Int?(子彈數量)",
    "replies": [
        {
            "author": "602723113",
            "timestamp": 1489822860,
            "txt_content": " 本帖最后由 602723113 于 2017-3-18 15:44 编辑 \n\n恩... 要知道Lore是以List的方式存在的\n\n所以我们要这样\n//运用Java多态的特性,实例化一个ArrayList\n                                List<String> lore = new ArrayList<String>();\n                                lore.addAll(player.getItemInHand().getItemMeta().getLore());\n                                //这里我使用forEach遍历这个ArrayList,如果你已知这行Lore所存在的位置那可以不需要遍历 直接 lore.get(x) 之后进行判断\n                                for (String string : lore) {\n                                        if (string.indexOf(\"子彈防禦\") != -1) {\n                                                //这里我们已知Lore是这样的 §6子彈防禦+4所以我们去分割这个字符串为一个字符串数组\n                                                //分割后我们得到了是这样的   §6子彈防禦     4\n                                                //                           [0]    [1]\n                                                double protect = Double.valueOf(string.split(\"+\")[1]);\n                                                e.setDamage(e.getDamage() - protect);\n                                        }\n                                }复制代码\n\n\n\n\n\n\n\nJB7%MC8_HC74G20QKEFATW7.png\n(21.18 KB, 下载次数: 3)\n\n\n\n\n下载附件\n\n\n2017-3-18 15:44 上传\n\n\n\n\n\n\n\n\n也许看图片会好些...\n\n\n\n\n\n\n"
        },
        {
            "author": "寂",
            "timestamp": 1489827180,
            "txt_content": "请问你是想问，如果一个物品的叙述（lore）中存在类似于这样的字符串\n§6子彈防禦:233\n如何提取后面的数值(233)吗？\n如果是的话，代码片段如图所示。\n\n传入ItemStack，当物品没有lore或未找到合适的lore或非数字返回0。"
        },
        {
            "author": "City_of_Sky",
            "timestamp": 1489827840,
            "txt_content": "做任务需要理由吗？需要吗？不需要吗？"
        },
        {
            "author": "超級寶寶",
            "timestamp": 1489843020,
            "txt_content": "602723113 发表于 2017-3-18 15:41\n恩... 要知道Lore是以List的方式存在的\n\n所以我们要这样\n這就是我要的答案 \n但-1是?"
        },
        {
            "author": "602723113",
            "timestamp": 1489845840,
            "txt_content": "超級寶寶 发表于 2017-3-18 22:14\n我將代碼改成這樣\n\n在遊戲中只會顯示6個1\n那首先呢这个Lore一共有6行,但是这六行的内容都没有 \"子彈防禦\"\nstring.indexOf(\"子彈防禦\") != -1\n\n这行代码就是判断本次循环的string中 存不存在 \"子彈防禦\" 不存在则不执行，存在则执行if块的代码"
        },
        {
            "author": "超級寶寶",
            "timestamp": 1489846440,
            "txt_content": "602723113 发表于 2017-3-18 15:41\n恩... 要知道Lore是以List的方式存在的\n\n所以我们要这样\n我將代碼改成這樣\n        List<String> lorefp = new ArrayList<String>();\n        lorefp.addAll(p.getItemInHand().getItemMeta().getLore());\n        //这里我使用forEach遍历这个ArrayList,如果你已知这行Lore所存在的位置那可以不需要遍历 直接 lore.get(x) 之后进行判断\n        for (String string : lorefp) {\n                p.sendMessage(\"1\");\n                if (string.indexOf(\"子彈防禦\") != -1) {\n                        //这里我们已知Lore是这样的 §6子彈防禦+4所以我们去分割这个字符串为一个字符串数组\n                        //分割后我们得到了是这样的   §6子彈防禦     4\n                        //                           [0]    [1]\n                        double protect = Double.valueOf(string.split(\"+\")[1]);\n                        p.sendMessage(e.getDamage()+\"\"+protect);\n                        e.setDamage(e.getDamage() - protect);\n                }复制代码\n在遊戲中只會顯示6個1\n並不會觸發接下來的代碼.."
        },
        {
            "author": "超級寶寶",
            "timestamp": 1489847160,
            "txt_content": " 本帖最后由 超級寶寶 于 2017-3-18 22:29 编辑 \n602723113 发表于 2017-3-18 22:04\n那首先呢这个Lore一共有6行,但是这六行的内容都没有 \"子彈防禦\"\nstring.indexOf(\"子彈防禦\") != -1後台報錯\nCaused by: java.util.regex.PatternSyntaxException: Dangling meta character '+' near index 0\n+\n^\n部分省略复制代码\n\n\nlore總共有10行\n我在第六行有這個LORE\nlore是以下\n\"   §6子彈防禦 +4\""
        },
        {
            "author": "602723113",
            "timestamp": 1489848600,
            "txt_content": "超級寶寶 发表于 2017-3-18 22:26\n後台報錯\n噢噢 这里需要用正则才行 你把 string.split(\"+\") 改为 string.split(\"\\\\+\") 即可"
        },
        {
            "author": "超級寶寶",
            "timestamp": 1489849260,
            "txt_content": " 本帖最后由 超級寶寶 于 2017-3-18 23:15 编辑 \n\n用百分比的話 百分之20\n要怎寫?\n\n那如果不使用double 而使用Int?(子彈數量)"
        },
        {
            "author": "超級寶寶",
            "timestamp": 1490178900,
            "txt_content": "來點人幫忙阿!\n推~!!"
        }
    ]
}