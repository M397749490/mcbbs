{
    "title": "怎么给玩家发送一条ActionBar",
    "author": "1850343382",
    "replyCount": 6,
    "timestamp": 1509293040,
    "txt_content": "如题，好像涉及到NMS。。求教",
    "replies": [
        {
            "author": "浅念哥",
            "timestamp": 1509317220,
            "txt_content": "ActionBarAPI会帮助你：https://www.spigotmc.org/resources/actionbarapi-1-8-1-12-1.1315/\n如果你不想你的插件依赖于它，你可以参考它的源代码实现你自己的。\nActionBarAPI：https://github.com/ConnorLinfoot/ActionBarAPI"
        },
        {
            "author": "耗子",
            "timestamp": 1509339840,
            "txt_content": "https://github.com/UnknownStudio ... util/ActionBar.java"
        },
        {
            "author": "1850343382",
            "timestamp": 1509341940,
            "txt_content": "谢谢两位大佬=-="
        },
        {
            "author": "子然君",
            "timestamp": 1509360420,
            "txt_content": "楼上两位，一个没有戳中要点，一个乘机推广UDPL\n你可以直接 Player.sendActionBar(String); 来发送\n但是，你的IDE用需要使用1.9版本以上的服务端核心才会有这个API"
        },
        {
            "author": "602723113",
            "timestamp": 1509376440,
            "txt_content": " 本帖最后由 602723113 于 2017-10-30 23:16 编辑 \n\n5L的评论不知道如何评价...但sendActionbar()这个方法是Paper自己偷偷塞进核心的,你可以去查询最新的BukkitAPI,里面并无该方法\n\n但是你要知道要使用nms的话就差不多找对方向了...\n\n首先我们看 Minecraft协议里的Chat http://wiki.vg/Protocol#Chat_Message_.28clientbound.29\n对应过来的就是nms下的PacketPlayOutChat这个封包\n\n那么我们从协议里面得知  封包内的 \nprivate IChatBaseComponent a; ---> 就是 JSON Data\nprivate byte b; ---> 就是Position [0: chat (chat box), 1: system message (chat box), 2: game info (above hotbar)]\n\n所以我们就可以这么做,我们要用actionbar,那无非就是 Position 设置为2咯\n所以我们可以写出以下代码\n\n\nPacketPlayOutChat packetPlayOutChat = new PacketPlayOutChat(IChatBaseComponent.ChatSerializer.a(\"test\"), (byte) 2);\nEntityPlayer entityPlayer = ((CraftPlayer) player).getHandle();\nentityPlayer.playerConnection.sendPacket(packetPlayOutChat);</p><p>\n// 注:以上的代码使用 spigot1.10.2 编写,不同版本代码会有所改变!\n// 比如以下为1.12的\nIChatBaseComponent iChatBaseComponent = IChatBaseComponent.ChatSerializer.a(\"test\");\n        \nPacketPlayOutChat packetPlayOutChat = new PacketPlayOutChat(iChatBaseComponent, ChatMessageType.GAME_INFO);\nEntityPlayer entityPlayer = ((CraftPlayer) player).getHandle();\nentityPlayer.playerConnection.sendPacket(packetPlayOutChat);\n// 可以看到不同的就是nms下把 byte 封装成了ChatMessageType\n复制代码以上便是我利用nms给玩家发送actionbar的研究过程"
        },
        {
            "author": "耗子",
            "timestamp": 1509900300,
            "txt_content": "子然君 发表于 2017-10-30 18:47\n楼上两位，一个没有戳中要点，一个乘机推广UDPL\n你可以直接 Player.sendActionBar(String); 来发送\n ...\n┐(‘～`；)┌大家使用统一的API又没什么不对，再说了如果要知道原理也可以看其中的源码"
        }
    ]
}