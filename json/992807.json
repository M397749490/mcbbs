{
    "title": "TZG API - Mojang Helper —— 解决无法调用Mojang API玩家数据的问题",
    "author": "TheZihanGu.",
    "replyCount": 3,
    "timestamp": 1584788280,
    "txt_content": " 本帖最后由 TheZihanGu. 于 2020-3-21 18:58 编辑 \n\nTZG API - Mojang Helper\n解决无法调用Mojang API玩家数据的问题\n\n\n起因\n本人原本一直想写一个获取玩家Minecraft和Hypixel资料的网站。但是JavaScript在获取Mojang API的玩家Profiles的时候会报错 —— No 'Access-Control-Allow-Origin' header is present on the requested resource.\n主要是因为Mojang API的Header里没有Access-Control-Allow-Origin，而被浏览器拦截了下来。解决方法只能在Server端加上或者在浏览器进行关闭。\n让Mojang加上不大可能。因为在我Google时就看到很多人都遇到了这个问题，而且在Mojang Bugs网站上的反馈也没有人回复...\n因此我直接用NodeJS写了个接口解决了这个问题。注意：此API解决的是获取https://api.mojang.com/users/profiles/minecraft/和https://sessionserver.mojang.com/session/minecraft/profile/的问题。如果有其他Mojang接口出现了“No 'Access-Control-Allow-Origin' header”，将继续更新。欢迎回帖补充.\n\n实现原理\n这个接口的实现其实非常简单。通过XMLHttpRequest获取到Mojang API的数据，然后进行返回。\n流程图如下：（直接画的，很难看hhh\n\n\n\n\n\nfile_1584786365000.jpg (301.18 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-21 18:26 上传\n\n\n\n\n\n\n\n请求方式\n\nhttps://api.tzgz6.com/api/mcprofiles?name=[username]复制代码https://api.tzgz6.com/api/mcsession?id=[uuid]复制代码\nusername: 正版玩家名称（必填）\nuuid: 玩家UUID（必填）\n\n\n返回内容\n与Mojang API返回内容一致。\n\n\n开源\nTZG API中涉及Mojang Helper的接口全部开源。如果有兴趣，请前往https://github.com/TheZihanGu/TZG-API进行查看。\n",
    "replies": [
        {
            "author": "tian12138",
            "timestamp": 1584789540,
            "txt_content": "腻害腻害腻害，不愧是你"
        },
        {
            "author": "鬼畜畜",
            "timestamp": 1584792300,
            "txt_content": "有做缓存吗 MOJANG API 调用有频率限制"
        },
        {
            "author": "TheZihanGu.",
            "timestamp": 1584793800,
            "txt_content": "Ghost_chu 发表于 2020-3-21 20:05\n有做缓存吗 MOJANG API 调用有频率限制\n做了的，缓存120分钟后失效，不过这是在反向代理的nginx做的设置。"
        }
    ]
}