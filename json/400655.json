{
    "title": "问个Waila附属mod“Waila NBT”的名称获取BUG",
    "author": "xkywrcom",
    "replyCount": 12,
    "timestamp": 1422841200,
    "txt_content": "先简单说明下这个mod，这个MOD是NEI的附属Waila(头顶高亮信息显示)的附属MOD，功能是将NBT的数据添加显示到Waila的信息框中，可以实现显示游戏中大部分不可视数据以及部分需要点开物品才可显示的数据。\n\n\n\n接下来的就是个人遇见的问题了：\n1：Waila NBT配置文件中支持的代码names[]所填写的ID有局限性？\n详情：\n普通物品ID为{48、85……}这种简单的数字ID\n有些物品ID方便归类，为{5/0、5/1……}这种带后缀的数字ID\n经过自己尝试，names[]应该是数组，所以应该获取不了第二种ID，不知有没有使用过Waila NBT的有解决方案。\n\n2：names[]获取的名称‘错误’\n详情：\n个人测试IC2 EXP中的‘所有(经过测试的)’物品通过names[]获取后皆为“英文ID+.name”\n虽然可以通过JS代码再翻译一遍，但还是感觉应该有办法解决\n\n\n3：关于换行和引用其他数据\n详情：\n貌似Waila NBT的配置文件不支持换行和引用其他NBT数据进行操作，不知有何方法可以\n",
    "replies": [
        {
            "author": "萤火虫",
            "timestamp": 1422842880,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "庐州月",
            "timestamp": 1422842880,
            "txt_content": "虽然一些mod的显示看着挺蛋疼，不过不要在意这些细节就好"
        },
        {
            "author": "xkywrcom",
            "timestamp": 1422870600,
            "txt_content": "大概是这个mod不支持吧，个人也不知道这个mod是如何编写的，也没时间去研究了……暂时也联系不到这个MOD的中文翻译者……\n换行和引用其他数据目前应该也是不支持，只能暂时用无效的数据用来说明部分物品的文本了……\n目前的解决方案大概是自己翻译一遍了……"
        },
        {
            "author": "3TUSK",
            "timestamp": 1422882360,
            "txt_content": "xkywrcom 发表于 2015-2-2 17:50\n大概是这个mod不支持吧，个人也不知道这个mod是如何编写的，也没时间去研究了……暂时也联系不到这个MOD的 ...\n这MOD是国人做的……\n你去试试@作者"
        },
        {
            "author": "xkywrcom",
            "timestamp": 1422928200,
            "txt_content": "u.s.knowledge 发表于 2015-2-2 21:06\n这MOD是国人做的……\n你去试试@作者\n原来是国人做的，看原帖还以为作者国外的。不过看了下原帖中作者和他‘朋友’貌似最近还没有登录过MCBBS……"
        },
        {
            "author": "xkywrcom",
            "timestamp": 1422928380,
            "txt_content": "@exzhawk @ViKaleidoscope 两位是否还愿意讨论下这些功能？"
        },
        {
            "author": "exzhawk",
            "timestamp": 1425384840,
            "txt_content": "op说的问题确实, 因为wailanbt做的时候水平有限\n所以现已推出wailanbt的继承者: Omni Ocular\n地址 http://blog.exz.me/omni-ocular/\n楼主关心的问题已经解决(大概\n名字改用name()方法, 具体见文档\n配置文件使用xml格式所以换行大概无压力\n现在整个nbt数据是在一个变量里可以任意调用, 玩家身上的部分信息也可以使用, 具体见文档\nOmni Ocular因为我最近比较懒, 一直没有正式发布= =..."
        },
        {
            "author": "xkywrcom",
            "timestamp": 1425608580,
            "txt_content": "exzhawk 发表于 2015-3-3 20:14\nop说的问题确实, 因为wailanbt做的时候水平有限\n所以现已推出wailanbt的继承者: Omni Ocular\n地址 http://b ...\nnbt数据一般是mod方块的吧？直接用nbt看原版方块(植物)看不了，求科普下。\n然后就是关于工业2实验版mod的建议了。\n工业2实验版出了新的核电站，虽然没出新核电之前，旧核电站也是无法直接与核心方块互动的……\n总的说，就是建立一个模板，自动识别周围的核电，当然其中识别部分难度较高。\n(如果已经实现了这个功能，就请无视掉好了。)"
        },
        {
            "author": "exzhawk",
            "timestamp": 1425652800,
            "txt_content": "xkywrcom 发表于 2015-3-6 10:23\nnbt数据一般是mod方块的吧？直接用nbt看原版方块(植物)看不了，求科普下。\n然后就是关于工业2实验版mod的 ...\n(omni ocular/ingame nbtedit能显示的)nbt数据来源只有tile entity(比如熔炉), entity(比如羊), item(物品).\n原版的草不是这三种而是普通的block, 没有nbt数据所以看不了. 原版的小麦也是block所以看不了. (小麦成熟信息是存在meta里的\n\n多方块这个问题一直没实现...因为不知道怎么给用户建\"模板\".\n现在想的最简单的是读目标方块周围的方块存一个变量然后提供给用户, 但是每次都读数个方块担心效率问题.\n你有什么想法吗("
        },
        {
            "author": "3TUSK",
            "timestamp": 1425658620,
            "txt_content": "exzhawk 发表于 2015-3-6 22:40\n(omni ocular/ingame nbtedit能显示的)nbt数据来源只有tile entity(比如熔炉), entity(比如羊), item(物 ...\n多方块结构都是有一个“主”方块存储信息的（比如RC大水槽）\n如果能直接从任意方块读取到主方块信息的话……"
        },
        {
            "author": "exzhawk",
            "timestamp": 1425705420,
            "txt_content": "u.s.knowledge 发表于 2015-3-7 00:17\n多方块结构都是有一个“主”方块存储信息的（比如RC大水槽）\n如果能直接从任意方块读取到主方块信息的话 ...\n对... 但是不是omni ocular自己写好代码直接查找rc水槽主方块, 而是提供一个途径, 允许写配置文件的人查找主方块...\n就是这个配置文件里写的查找方式没想法现在"
        },
        {
            "author": "xkywrcom",
            "timestamp": 1425731940,
            "txt_content": "exzhawk 发表于 2015-3-7 13:17\n对... 但是不是omni ocular自己写好代码直接查找rc水槽主方块, 而是提供一个途径, 允许写配置文件的人查 ...\n个人想到两个方式(其实差不多，只不过一个对于编写配置文件的人较方便，一个较麻烦)\n(字都是现打的，方法都是现想的，所以就懒得排版了=。=，实现顺序不对就勉勉强强凑合看着吧，如果实在不理解，可以再回复我。)\n\n【方式一：omni ocular建立对应地图数据库(数据代码)】\n详细步骤：\n1.存储：\nomni ocular根据对应地图(存档)建立对应的数据库(数据代码)，存储信息大致可以为：副(次级)方块信息，副(次级)方块所隶属副方块信息……，副(次级)方块所隶属的主方块信息。\n每次查看方块的时候先确认数据库内是否留有数据，有则不进行搜索，没有则进行搜索主方块的操作。当然也要想办法清除(已拆除)旧方块留下的信息，2333，这里我就懒得想了。\n\n2.搜索：\n使用一个函数(子程序)统一归类搜索方式，大概代码可以如下文本所述（省略号代表数据可无限延伸,理论上）\n\n函数名称(主方块ID或名称,“副方块ID或名称，副方块ID或名称|副方块ID或名称|……”,搜索方式,搜寻方式,……)\n\n解释：\n\n函数名称——不用解释了，只是一串代码而已\n\n主方块ID或名称——所需获取信息的主方块ID\n\n副方块ID或名称——自身方块可能隶属副方块ID(注：就是本方块上一级的ID了)\n\n副方块ID或名称参数项符号解释(符号皆可替换为其他符号、代码)——\n“”双引号内内容为文本，参数用文本主要是有比较好的扩展性\n‘，’逗号为同级副方块的分割符号，即功能相同的副方块\n‘|’竖杠为副方块分级分割符号，越靠后等级越低，但最低的副方块也务必隶属于当前方块之上\n\n搜索方式——用数字代表搜索方式，如1是进行下方所说的核反应仓方式搜索，2是进行下面反应堆访问接口方式搜索。不填写则默认为第一种方式\n\n搜寻方式——值为真或假，使用数字方式填写，非0为真。默认为0(假)。此处主要是为了搜寻时判断是否要沿着副方块一直搜索上去还是直接搜索到主方块便停止。\n\n——————我是不萌的分割线——————\n个人只有IC2EXP的1.7.10版本mod进行测试，这里就拿核电站的方块当例子了\n\n①核反应仓：核反应仓只允许附着在核反应堆上。如有两个核反应堆放置在核反应仓旁或周围的核反应仓消失，则核反应仓会自动掉落成可拾取方块。\n从上文可以看出，核反应仓周围一格内只允许存在一个核反应堆（主方块），并且需要附着在核反应堆（主方块）上，由此可推断出核反应仓周围只有6个位置可能存在主方块(上下左右前后)。\n此处的搜索方式可为，XYZ每个左边分别加减1并查询对应位置是否存在核反应堆（主方块），如存在，则可以选择继续查询(遍历)核反应堆（主方块）的周围是否存在核反应堆（副方块）。\n这里的多重遍历(查询核反应堆周围的核反应仓)在放置完核反应仓的时候比较便利，但其余时候如没写好查询算法，可能会进行多次重复动作，所以此种方法建议只搜索周围是否存在主方块，之后的遍历可以省略掉。\n——————分割线——————\n②反应堆访问接口：这个方块的主方块辨识有点特殊，是搜索以自身为中心的3*3范围内是否存在反应堆或者反应仓，因此，此方块所需搜索的范围扩大到了26个位置，虽然搜索只要搜索到第一个主方块即可停止，但其效率还是会有些拖慢进度。虽然比起某些MOD，这种算是很简单的了。\n上面的介绍中提到了反应堆访问接口会查找反应堆和反应仓，找到反应堆自然是简单，直接设置反应堆为主方块即可，但如果找到反应仓，还得继续反应仓的搜索，这使反应堆访问接口所需搜寻的位置又多了6格，所需搜寻的格数范围为2~34格。\n其他的搜索方式和上面差不多，可以选择找到第一个主方块即可，也可以选择继续遍历周围副方块。\n但这里的搜索会略麻烦，因为此方块可以无主方块放置，如果无主方块，则会导致每次查看方块信息的时候都会搜索一遍。\n\n【方式二：提供几种搜索方式供用户写配置文件时自行选择】\n【此种方式偏向熟悉代码的使用人群，一般有时间写配置文件的基本上都有一定能力来写的了】\n详细的部分下次再回复给你，如果你看标题也懂了的话，我就懒得再想和打字了。\n此处建议使用的函数(子程序)和上面相同，但是可以填上更多自定义搜索数据。(如是否建立主副方块数据库、搜索范围、主方块、副方块[二级]、副方块[三级]……)\n注：此处的副方块理论上为可以无尽延伸的参数，建议使用一个参数，然后使用文本方式传递，使用分隔符进行参数分割。"
        }
    ]
}