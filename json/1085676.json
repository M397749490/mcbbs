{
    "title": "【已解决】两个Gui不可兼得问题",
    "author": "laozictou",
    "replyCount": 2,
    "timestamp": 1595614920,
    "txt_content": " 本帖最后由 laozictou 于 2020-7-25 09:22 编辑 \n\n在1.12.2版本的forge（2847）中，我写了两个方块，a和b，代码几乎一样，但先写好了a，接着就直接复制a并且修改了一些参数改了个名字就产生了b，但是，启动游戏后，a的gui打不开了。（如果把b的gui相关的代码注释掉却a的gui又能打开）有大佬知道应该如何解决吗？万分感谢。\n\na的代码如下：\n//a.java（省略了自动导入的包）\npublic class a extends BlockBase implements ITileEntityProvider {\n\n    public static final PropertyDirection FACING = PropertyDirection.create(\"facing\");\n\n    public a(String name, Material material){\n\n        super(name,material);\n\n        setDefaultState(blockState.getBaseState().withProperty(FACING, EnumFacing.SOUTH));\n\n    }\n\n    @Nullable\n    @Override\n    public TileEntity createNewTileEntity(World worldIn, int meta){\n\n        return new Tile_a();\n    }\n\n    @Override\n    public IBlockState getStateForPlacement(World worldIn,BlockPos pos,EnumFacing facing,float hitX,float hitY,float hitZ,int meta,EntityLivingBase placer){\n\n        return this.getDefaultState().withProperty(\n                FACING,\n                EnumFacing.getDirectionFromEntityLiving(pos,placer));\n    }\n\n    @Override\n    protected BlockStateContainer createBlockState() {\n        return new BlockStateContainer(this, FACING);\n    }\n\n    @Override\n    public IBlockState getStateFromMeta(int meta) {\n        return this.getDefaultState().withProperty(FACING,EnumFacing.getFront(meta & 7));\n    }\n\n    @Override\n    public int getMetaFromState(IBlockState state) {\n        return state.getValue(FACING).getIndex();\n    }\n\n    @Override\n    public boolean onBlockActivated(World worldIn,BlockPos pos,IBlockState state,EntityPlayer playerIn,EnumHand hand,EnumFacing facing,\n            float hitX, float hitY, float hitZ) {\n\n        if (worldIn.isRemote) {\n\n            return true;\n        }\n\n        TileEntity te = worldIn.getTileEntity(pos);\n\n        if (!(te instanceof TileIronFurnace)) {\n\n            return false;\n        }\n\n        playerIn.openGui(Main.Instance, 0, worldIn, pos.getX(), pos.getY(), pos.getZ());\n        return true;\n    }\n}复制代码//Tile_a.java(省略自动导入的包)\npublic class Tile_a extends TileEntity{\n\n\n    public static final int SIZE = 6;\n    private ItemStackHandler itemStackHandler = new ItemStackHandler(SIZE) {\n\n        @Override\n        protected void onContentsChanged(int slot) {\n\n            Tile_a.this.markDirty();\n        }\n    };\n\n    @Override\n    public void readFromNBT(NBTTagCompound compound) {\n\n        super.readFromNBT(compound);\n        if (compound.hasKey(\"items\")){\n\n            itemStackHandler.deserializeNBT((NBTTagCompound) compound.getTag(\"items\"));\n        }\n    }\n\n    @Override\n    public NBTTagCompound writeToNBT(NBTTagCompound compound) {\n\n        super.writeToNBT(compound);\n        compound.setTag(\"items\", itemStackHandler.serializeNBT());\n        return compound;\n    }\n\n    public boolean canInteractWith(EntityPlayer playerIn) {\n\n        return !isInvalid() && playerIn.getDistanceSq(pos.add(0.5D, 0.5D, 0.5D)) <= 64D;\n    }\n\n    @Override\n    public boolean hasCapability(Capability<?> capability, EnumFacing facing) {\n\n        if (capability == CapabilityItemHandler.ITEM_HANDLER_CAPABILITY) {\n\n            return true;\n        }\n        return super.hasCapability(capability, facing);\n    }\n\n    @Override\n    public <T> T getCapability(Capability<T> capability, EnumFacing facing) {\n\n        if (capability == CapabilityItemHandler.ITEM_HANDLER_CAPABILITY) {\n\n            return CapabilityItemHandler.ITEM_HANDLER_CAPABILITY.cast(itemStackHandler);\n        }\n        return super.getCapability(capability, facing);\n    }\n}复制代码//container_a.java(省略自动导入的包)复制代码//Gui_a.java（省略自动导入项）\npublic class Gui_a extends GuiContainer {\n\n    public static final int WIDTH = 175;\n    public static final int HEIGHT = 165;\n\n    private static final ResourceLocation background = new ResourceLocation(\n            Reference.MOD_ID, \"textures/gui/iron_furnace.png\");\n\n    public Gui_a(Tile_a tileEntity, Container_a container) {\n\n        super(container);\n\n        xSize = WIDTH;\n        ySize = HEIGHT;\n    }\n\n    @Override\n    protected void drawGuiContainerBackgroundLayer(float partialTicks, int mouseX, int mouseY) {\n\n        mc.getTextureManager().bindTexture(background);\n        drawTexturedModalRect(guiLeft, guiTop, 0, 0, xSize, ySize);\n    }\n}复制代码//GuiHandler_a.java(省略自动导入项)\npublic class GuiHandler_a implements IGuiHandler {\n\n    @Nullable\n    @Override\n    public Object getServerGuiElement(int ID, EntityPlayer player, World world, int x, int y, int z) {\n\n        BlockPos pos = new BlockPos(x, y, z);\n        TileEntity te = world.getTileEntity(pos);\n        if (te instanceof Tile_a) {\n            return new Container_a(player.inventory, (Tile_a) te);\n        }\n        return null;\n    }\n\n    @Nullable\n    @Override\n    public Object getClientGuiElement(int ID, EntityPlayer player, World world, int x, int y, int z) {\n\n        BlockPos pos = new BlockPos(x, y, z);\n        TileEntity te = world.getTileEntity(pos);\n        if (te instanceof Tile_a) {\n            Tile_a containerTileEntity = (Tile_a) te;\n            return new Gui_a(containerTileEntity, new Container_a(player.inventory, containerTileEntity));\n        }\n        return null;\n    }\n}复制代码//注册复制代码\n\n",
    "replies": [
        {
            "author": "3TUSK",
            "timestamp": 1595618580,
            "txt_content": "你的 GuiHandler_a 只处理了 a 的 GUI，没有处理 b 的。\n一个 Mod 只应该有一个 IGuiHandler。请在你唯一的 IGuiHandler 里处理 b 的 GUI。"
        },
        {
            "author": "laozictou",
            "timestamp": 1595640120,
            "txt_content": "3TUSK 发表于 2020-7-25 03:23\n你的 GuiHandler_a 只处理了 a 的 GUI，没有处理 b 的。\n一个 Mod 只应该有一个 IGuiHandler。请在你唯一的 ...\n谢谢大佬！"
        }
    ]
}