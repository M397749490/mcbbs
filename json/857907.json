{
    "title": "【1.14】/data modify——不用一秒钟，批量驯服宠物！",
    "author": "liach",
    "replyCount": 22,
    "timestamp": 1555305480,
    "txt_content": " 本帖最后由 liach 于 2019-4-15 13:18 编辑 \n\n/data modify——不用一秒钟，批量驯服宠物！\n\n有没有想过在 Minecraft 中过上后宫宠物三千的日子，但又懒得一只一只驯？1.14 最新命令能完成你的愿望！\n\n原先……一群恶狼看到一只美味的肥羊，凶猛地扑了上去！\n\n\n\n\nfile_1555301393000.jpg (153.71 KB, 下载次数: 27)\n\n下载附件\n\n2019-4-15 12:09 上传\n\n\n\n\n\n\n一秒钟以后……\n\n\n\n\n\nfile_1555301473000.jpg (148.49 KB, 下载次数: 27)\n\n下载附件\n\n2019-4-15 12:11 上传\n\n\n\n\n\n\n原先的羊羊尸骨未寒没看到左边的羊毛和地上的生肉吗，一群饿狼就全变成了乖狗狗！\n\n\n\n众所周知，在 1.14 中 Minecraft 又添加了更多命令和战利品上的技术性内容，尤其是/loot\n/data modify复制代码两个让人尤其喜闻乐见的指令。\n\n/data modify\n/data modify 大致相当于 /execute store <entity/block> 的一个替代版本（同样是只能抄到一个实体上），可以把 NBT 中的数据从一个（方块）实体复制到另一个（方块）实体。\n然而 /data modify 可以复制 NBT 字符串！这也是它可以设置宠物类生物 NBT 中主人标签所必须的属性（主人标签是字符串形式的一个 UUID）\n\n但是就算能复制 UUID 字符串，这个 UUID 字符串哪里来？\n根据英文 Minecraft Wiki 玩家数据页所述，玩家 NBT 数据中只有 UUIDLeast 和 UUIDMost，没有现成的 UUID 字符串。所以从玩家身上抄数据是行不通的。\n\n那么有什么东西可以自动补齐玩家 UUID 字符串呢？\n老司机不用问就知道用玩家头可以获得玩家皮肤 Base 64 码和 UUID 信息。喜闻乐见的是，玩家头里面的 UUID 也是字符串，可以直接抄到宠物身上！\n但是……要让玩家头颅自动补齐数据，也需要把玩家的用户名放进 NBT 里面。而玩家 NBT 数据中也没有玩家用户名，所以……卡壳了？\n\n等等！我们有战利品表！\n在 1.14 中，战利品表函数中新增了一个 minecraft:fill_player_head 可以根据发送命令的玩家实体生成一个对应的头颅。这样我们就好办了！\n（注意：这里 /loot 执行时执行实体必须是玩家才能正确获得头！在 /execute 中使用时小心）\n\n战利品要怎么放？\n在 1.14 中，/loot 命令可以把战利品在世界中生成，或者把战利品放在能存贮物品的（方块）实体中，或者直接给玩家。\n\n为了安全起见（避免和游戏中正常方块/实体冲突），我选择把战利品放在一个实体中。\n虽然 /loot spawn 可以直接刷出一个物品实体，但是无法添加 NBT 标签，会导致它可以被玩家捡起，会受伤，等等。所以不使用此方法。\n剩下就 /loot give 和 /loot insert 了。我选择 /loot insert，这样好知道物品会放在哪个格子中，方便抄 NBT。\n\n战利品要放哪个实体上？\n这里相对比较自由了。我最早选择放盔甲架头部格子（又是什么都用盔甲架的流水线作业），感觉比较方便。\n但是我后来为了性能考虑改用物品展示框，将头放到物品展示框的唯一一格中（可以用 hotbar.0），在 NBT 格式中存在根 NBT 中的 Item 这个 NBT 对象里面。\n如果你需要缓存头颅的实体完全看不见，可以考虑箱子矿车，不会渲染背包里面的物品。\n当然你最好加个记分板标签，这样作为宠物找有数据的实体找起来比较简单，最后把这个实体删除也简单。\n\n怎么抄？\n我们有一群宠物，但是 /data modify 和 /execute store 都只能有一个被修改的目标。幸亏 Minecraft 有 /execute 和命令函数，可以用 /execute 把多个宠物中每一个作为命令执行者，把数据从带着头颅的实体上抄过来，这样就不怕一个被修改的目标的限定了。数据路径啊……宠物的 UUID 是自己的 OwnerUUID 字段，头颅的 UUID 是在物品 NBT 对象根目录底下的 tag.SkullOwner.Id 里面。实在不懂就看看下面宠物抄数据的函数内容吧。\n\n技术听不懂，来看看代码吧\n这个小例子放在了 GitHub 上。\n主函数\n可以把这里的选择器的 type 参数里面换成 entity type tag（实体类型数据包标签），这样你可以就用数据包标签套用模板了。阿猫阿狗一起驯\n为了更真实，这里限定只有 20 格以内的宠物会被驯服，有兴趣请改掉。\n每个宠物抄数据的函数\n用来拿头颅的战利品表\n\n说这么多，这东西到底有什么实际用途\n以后原版伪 mod （数据包 + 资源包、地图）可以加个物品一键驯服大批宠物之类的。\n没人愿意玩原版模组，还要给每个世界装，烦\n那么等你下次玩原版 PvP 地图，对面玩家放个技能把你的狗全部变成他的，你被狗咬死的时候你就知道了。\n\n欢迎评论，有问题或建议楼主会回复！\n\n[groupid=1496]MC百科[/groupid]",
    "replies": [
        {
            "author": "roothu",
            "timestamp": 1555306080,
            "txt_content": "驯服马这种还行，狗的话用不上吧"
        },
        {
            "author": "liach",
            "timestamp": 1555306200,
            "txt_content": "roothu 发表于 2019-4-15 13:28\n驯服马这种还行，狗的话用不上吧\n马驯服很简单，直接一个 /summon minecraft:horse ~ ~ ~ {Tame:1b} 就一只驯服的出来了\n猫狗驯服实际上很烦，主要猫狗只有一个主人，马就是随便谁骑的"
        },
        {
            "author": "roothu",
            "timestamp": 1555306320,
            "txt_content": "liach 发表于 2019-4-15 13:30\n马驯服很简单，直接一个 /summon minecraft:horse ~ ~ ~ {Tame:1b} 就一只驯服的出来了\n猫狗驯服实际上很 ...\n这不太清楚  我是就玩家角度来看\n驯服马有点麻烦  狗这种一直喂东西就行了"
        },
        {
            "author": "liach",
            "timestamp": 1555306680,
            "txt_content": "roothu 发表于 2019-4-15 13:32\n这不太清楚  我是就玩家角度来看\n驯服马有点麻烦  狗这种一直喂东西就行了 ...\n好吧，我应该说清楚这是指令类的东西的\n还有这个可以把别人的狗改成你的，所以我最后说\n对面玩家放个技能把你的狗全部变成他的，你被狗咬死的时候你就知道了"
        },
        {
            "author": "xmdhs",
            "timestamp": 1555755840,
            "txt_content": "roothu 发表于 2019-4-15 13:32\n这不太清楚  我是就玩家角度来看\n驯服马有点麻烦  狗这种一直喂东西就行了 ...\n主要作用大概是在 pvp 类的地图，而不是原版生存吧。。"
        },
        {
            "author": "1141840659",
            "timestamp": 1555829220,
            "txt_content": "前提是我得找到那么多的狼"
        },
        {
            "author": "liach",
            "timestamp": 1555861500,
            "txt_content": "xmdhs 发表于 2019-4-20 18:24\n主要作用大概是在 pvp 类的地图，而不是原版生存吧。。\n对，可以做个大自然友谊（策反野狗/敌方宠物）的技能"
        },
        {
            "author": "liach",
            "timestamp": 1555861620,
            "txt_content": "1141840659 发表于 2019-4-21 14:47\n前提是我得找到那么多的狼\n的确这个比较鸡肋（技术类），主要就是讲用战利品表来实现一个指令做不到的东西（当然你有mod这一切都是鸡肋了，就可以拿机器驯狗了）"
        },
        {
            "author": "3246093361",
            "timestamp": 1556196600,
            "txt_content": "666666666666"
        },
        {
            "author": "w3118313636",
            "timestamp": 1556201040,
            "txt_content": "感谢楼主分享，拿去试试"
        },
        {
            "author": "幻世末影",
            "timestamp": 1556271900,
            "txt_content": "非常快捷，但好像用处不大"
        },
        {
            "author": "awa?owo?",
            "timestamp": 1556341920,
            "txt_content": "不怕羊被狼给搞了咩"
        },
        {
            "author": "伏羲大大",
            "timestamp": 1556429820,
            "txt_content": "至今还没能体验1.14，要尽快赶去体验一下呀，看起来很棒！"
        },
        {
            "author": "3496997578",
            "timestamp": 1556621100,
            "txt_content": "想去体验一下1.14鸭"
        },
        {
            "author": "魔法豆子",
            "timestamp": 1556622420,
            "txt_content": "指令能解决一切问题"
        },
        {
            "author": "ALONE[][",
            "timestamp": 1579570440,
            "txt_content": "大佬厉害厉害"
        },
        {
            "author": "Leokk",
            "timestamp": 1579658220,
            "txt_content": "qwq绝了，，，，，，，，"
        },
        {
            "author": "Leokk",
            "timestamp": 1579658340,
            "txt_content": "liach 发表于 2019-4-15 13:30\n马驯服很简单，直接一个 /summon minecraft:horse ~ ~ ~ {Tame:1b} 就一只驯服的出来了\n猫狗驯服实际上很 ...\n随便谁 骑 的 （？） "
        },
        {
            "author": "liach",
            "timestamp": 1579666500,
            "txt_content": "Leokk 发表于 2020-1-22 09:59\n随便谁 骑 的 （？）\n是的minecraft里面马只有驯服状态，不管是谁驯服的都一样"
        },
        {
            "author": "分享",
            "timestamp": 1579748160,
            "txt_content": "额没看懂能来个视频讲一下吗"
        },
        {
            "author": "1537237773",
            "timestamp": 1579792740,
            "txt_content": "大佬真多学习到了呢"
        },
        {
            "author": "tangguoshuai",
            "timestamp": 1579793940,
            "txt_content": "蝙蝠要是驯服就可以飞了"
        }
    ]
}