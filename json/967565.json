{
    "title": "Skript 如何检测 特定范围内是否存在特定数量的方块/实体",
    "author": "幽冥冥",
    "replyCount": 2,
    "timestamp": 1582509540,
    "txt_content": "RTTTTTTTTTTT\n\n我觉得我现在啥都要发帖过来问了x\n\n比如说：我想检测以玩家为中心，周围20格内是否存在一个铁傀儡，如果铁傀儡存在，变量返回值true，否则返回false\n或者：以玩家为中心，检测周围10格内是否有10个草方块，如果有10个草方块，返回true，一个都没有或者数量不达标返回false\n",
    "replies": [
        {
            "author": "极光creeper",
            "timestamp": 1582509540,
            "txt_content": " 本帖最后由 极光creeper 于 2020-2-24 20:46 编辑 \n\n抱歉，悬赏贴发布10小时后才看到\n\nsk版本2.1以下与2.2以上的loop语法有些微差别\n高版本更加注重的是比较\n\n使用loop语句可能是比较正常且普遍的做法\n\n很不巧，我不知道铁傀儡在sk里面的名字，所以我注册一个指令来看看到底是叫什么\n由于不会有什么越权的情况，我不添加使用权限了，请在使用后直接删除即可。\ncommand /LoopMyLovelyEntity:\n    trigger:\n        loop entities in radius 10 around player:\n            send  \"%loop-value%\"\n\n\n输入这个指令以后，将会输出你身边10格的生物名\n你需要造一个铁傀儡，然后就能通过这个指令看到铁傀儡的名字了\n当然请不要忘记，你也是一个生物，所以输出的第一个肯定是\"你\"的ID\n(麻烦让铁傀儡在呆你周围10格内)\n\n可能是  iron golem ？ 我猜的\n\n我举一个例子吧，把指令换成触发器\non break of bedrock:\n#破坏基岩时\n    loop entities in radius 10 around event-block:\n#这里的event-block是破坏的基岩\n        if \"%loop-value%\" is \"iron golem\":\n#这个iron golem是我猜的\n            send \"你周围10格内有铁傀儡\"\n            exit loop\n#当判断到有铁傀儡就退出loop，而不是loop所有范围内的生物后自然结束，这有助性能\n\n方块同理\non break of bedrock:\n    loop blocks in radius 10 around event-block:\n        if \"%loop-value%\" is \"dirt\":\n            send \"你周围10格内有泥土\"\n            exit loop\n\n你的要求？\non break of bedrock:\n    loop blocks in radius 10 around event-block:\n        if \"%loop-value%\" is \"dirt\":\n            add 1 to {_ThisBreak}\n            if {_ThisBreak} is 10:\n                send \"完蛋了，10个泥土了\"\n                exit loop\n\n#{_巴拉巴拉}前的_代表这是一个可爱的临时变量，仅在该事件中使用，在使用后立刻销毁\n#当然gc就是销毁之后的后事了\n#这货比private还private，这事件外的完全无法\"访问\"\n#你也不必担心有两个玩家一起在用的问题，虽然我不确定实现的原理是什么，但是肯定是不用担心的\n\n返回false的话，写一个elif就好了，欸 话说有elif语句么，写成else if吧\n\n\n\n\n\n\n\n"
        },
        {
            "author": "幽冥冥",
            "timestamp": 1582550340,
            "txt_content": " 本帖最后由 幽冥冥 于 2020-2-24 21:45 编辑 \n极光creeper 发表于 2020-2-24 19:46\n抱歉，悬赏贴发布10小时后才看到\n\nsk版本2.1以下与2.2以上的loop语法有些微差别\n事实上发帖后，中午一直看没人回复我就自己尝试解决了emm\n语法什么的基本都差不多，最佳回答就给你吧233\n\n我主要就是死在 如何检测特定实体及实体数量是否达标 的问题上，其他都OK\n而且这里的 %loop-value% 应该是 Iron Golems，我也不知道为什么自带s，单填Iron Golem是无效的，无法被检测到\n我也曾在铁傀儡的ID这里卡着，最后是通过输出检测值才知道要改成 Iron Golems，不管是一个还是多个都应如此\n至于如此写法：\n\non break of bedrock:\n    loop blocks in radius 10 around event-block:\n        if \"%loop-value%\" is \"dirt\":\n            add 1 to {_ThisBreak}\n            if {_ThisBreak} is 10:\n                send \"完蛋了，10个泥土了\"\n                exit loop\n\n直接使用并不奏效，貌似2.3版本的 on break of xxx 失效了？（可能是后续版本修复但我没更新233）\n而且 dirt 应该是要改成 dirt block，否则也不会起效。\n\n经过修改后能生效的写法是：\n\non break:\n\n        if event-block is bedrock:\n\n                loop blocks in radius 10 around event-block:\n        \n                        if \"%loop-block%\" is \"Dirt block\":\n                        \n                                add 1 to {_ThisBreak}\n                                \n                                if {_ThisBreak} is 10:\n                                \n                                        send \"完蛋了，10个泥土了\"\n                                        \n                                        exit loop\n\n（每行中间习惯加空格了233，方便自己阅读）\n至于实体的话可以直接照抄，如：\n\non break:\n\n        if event-block is bedrock:\n\n                loop entities in radius 10 around event-block:\n        \n                        if \"%loop-entity%\" is \"Villager\":\n                        \n                                add 1 to {_ThisBreak}\n                                \n                                if {_ThisBreak} is 10:\n                                \n                                        send \"完蛋了，10个村民了\"\n                                        \n                                        exit loop\n\n总之，还是谢谢了。\n\n\n\n\n\n"
        }
    ]
}