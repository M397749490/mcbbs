{
    "title": "利用Forge API开发联机MOD【基础篇】【第二章】",
    "author": "yuxuanchiadm",
    "replyCount": 40,
    "timestamp": 1343735040,
    "txt_content": " 本帖最后由 yuxuanchiadm 于 2013-5-30 03:45 编辑 \n\n利用Forge API开发联机MOD【基础篇】【第二章】\n制作你的第一个基础MOD\n作者：yuxuanchiadm\n\n索引贴地址：http://www.mcbbs.net/thread-38211-1-1.html\n\n请确定你已经阅读完成第一章的内容:\nhttp://www.mcbbs.net/thread-38223-1-1.html\n否则不要阅读此贴！\n\n序：\n（警告：前方高能量反应，非战斗人员请迅速撤离！）\n在上一章里，你已经学会如何构建一个开发环境，以及成功构建了一个。现在，是时候制作你的第一个MOD了 :D。\n首先，说明一下我写帖子的格式：\n红色：章节和重要内容。\n蓝色：知识点\n灰色：作者的唠叨和闲话（可忽略）\n绿色：容易出错的地方\n\n使用Forge制作你的第一个小MOD：\n现在，是时候制作你的第一个利用Forge API制作的MOD了，为自己欢呼吧：)。\n首先找到Eclipse下的MinecraftForgeClient项目。\n打开资源文件夹minecraft，你以后几乎所有的工作都要在此包下进行（不要在net.minecraft包下做任何事情，醒目）。\n\n\n\n\nQQ截图20120829035935.png (16.21 KB, 下载次数: 32)\n\n下载附件\n\n2012-8-29 15:52 上传\n\n\n\n\n\n/**知识点：什么是包\n如果你不知道什么是包，那么我真的没办法相信你会JAVA，当然我也佩服你的勇气，一直学到这里，只不过此贴并非零基础教学贴，是给能掌握JAVA语法的人的入门贴。JAVA的包和文件夹是紧密相连的，在WINDOWS下，项目文件夹下，一个文件夹就代表一个包，例如你可以在\\MCPForgeMod\\src\\minecraft下找到一些包。\n**/\n右击这个资源文件夹选择：新建->包\n\n\n\n\nQQ截图20120829035935.png (105.4 KB, 下载次数: 27)\n\n下载附件\n\n2012-8-29 15:58 上传\n\n\n\n\n\n打开如下界面：\n\n\n\n\nQQ截图20120829035935.png (98.48 KB, 下载次数: 30)\n\n下载附件\n\n2012-8-29 16:03 上传\n\n\n\n\n\n在名称那一栏的后面加包：myFirstMod，输入后应该是这个样子：myFirstMod。\n点击完成按钮，在顶级包下创建你的MOD包myFirstMod。\n在资源文件夹找到这个包并右键选择：新建->类：\n\n\n\n\nQQ截图20120829035935.png (108.76 KB, 下载次数: 37)\n\n下载附件\n\n2012-8-29 16:06 上传\n\n\n\n\n\n打开新建JAVA类后，修改名称为mod_myFirstMod，点击完成：\n\n\n\n\nQQ截图20120829035935.png (162.78 KB, 下载次数: 33)\n\n下载附件\n\n2012-8-29 16:09 上传\n\n\n\n\n\n现在，看到你刚刚新建好的类，此时这个类应该在myFirstMod包中。\n首先，用Annotation注解类型：Mod、NetworkMod修饰myFirstMod类。在public class mod_myFirstMod的前面添加：import cpw.mods.fml.common.Mod;import cpw.mods.fml.common.network.NetworkMod; @Mod( modid = \"myFirstMod\", name=\"myFirstMod\", version=\"1.0.0\")\n@NetworkMod(clientSideRequired = true, serverSideRequired = false, channels={\"myFirstMod\"}, packetHandler=PacketHandler.class)复制代码在这里一定要注意了，channels的长度必须小于或等于16，大于16则MOD无法运行，注意+醒目\n另外，我们目前尚未定义PacketHandler.class类，所以会报错，先不要管他，就像自上而下的编程方法所说的那样，先做框架，再做细节。\n/**知识点：什么是Annotation注解类型\n注解类型在JAVA里通常用于编译时对编译器的提示，使编译器可以根据某个对象的注解，提出警告、抛出错误、忽略警告等，在JDK5或以上版本中，你可以自定义注解类型，Forge4.x后用注解类型来描述某些信息，具体使用方法可以参考JAVA提供的相关帮助文档，Annotation通常具有实质性作用，不可以随意删除、修改及添加。\n**/\n然后，定义一个载入方法，并用@Init对其修饰，此方法会在MOD载入时调用。 \n\n@Mod.Init\npublic void load(FMLInitializationEvent evt)\n{\n    System.out.println(\"我的第一个MOD\");\n}复制代码/**知识点：既然需要用Init注解类型修饰，方法名称必须是load么？\n方法名称不一定要是load。但是，这是提倡的，如果你用其他名字，其他开发此MOD的人员可能不会理解你的用意（如果有的话）。只要使用Init注解类型对其进行了修饰。\n**/\n这时，Eclipse会报错，是使用了未导入的类导致的，使用Eclipse自动修复这些错误。\n以此类推，再分别添加MOD载入前和载入后调用的函数：\n@Mod.PreInit\npublic void preInit(FMLPreInitializationEvent event)\n{\n    \n}\n@Mod.PostInit\npublic void postInit(FMLPostInitializationEvent event)\n{\n    \n}\n复制代码/**知识点：3个MOD载入时调用的函数的参数是什么？\n分别是3个Event（事件），这是Forge的新功能，这些事件中含有有用的信息，你可以在3个事件的类源码中了解有神马用处，此内容较为高级，暂时不做细节介绍\n**/\n最后，代码应该是这个样子：\npackage myFirstMod; import cpw.mods.fml.common.Mod;\nimport cpw.mods.fml.common.event.FMLInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPostInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPreInitializationEvent;\nimport cpw.mods.fml.common.network.NetworkMod; @Mod( modid = \"myFirstMod\", name=\"myFirstMod\", version=\"1.0.0\")\n@NetworkMod(clientSideRequired = true, serverSideRequired = false, channels={\"myFirstMod\"}, packetHandler=PacketHandler.class)\npublic class mod_myFirstMod\n{\n    @Mod.Init\n    public void load(FMLInitializationEvent evt)\n    {\n        System.out.println(\"我的第一个MOD\");\n    }\n    @Mod.PreInit\n    public void preInit(FMLPreInitializationEvent event)\n    {\n        \n    }\n    @Mod.PostInit\n    public void postInit(FMLPostInitializationEvent event)\n    {\n        \n    }\n}复制代码蛋疼的代码编辑 : (\n运行你的第一个MOD：\n按下Ctrl+S保存，现在测试你的第一个MOD吧！（大雾 :D）\n\n如果你此时想要运行这个MOD是绝对不可能的，别忘了PacketHandler类还没定义呢。而且在这一章里就弄PacketHandler过早，所以现在有个临时解决方案：\n\n替换：\n@NetworkMod(clientSideRequired = true, serverSideRequired = false, channels={\"myFirstMod\"}, packetHandler=PacketHandler.class)复制代码为：@NetworkMod(clientSideRequired = true, serverSideRequired = false)复制代码\nOK，现在不会报错了，但是记住，我们删除了PacketHandler和channel，记得测试完要还原。\n\n按下Ctrl+S保存。\n\n1.首先打开recompile.bat批处理文件，并等待编译完成。然后打开startclient.bat批处理文件，启动游戏LOL。（普通青年）\n2.轻轻点击你的F11键，选择JAVA应用程序，然后选择Start类。（文艺青年）\n3.猛击你的reobfuscate.bat批处理文件，等运行完成后，打开\"mcp725ForgeMOD\\reobf\"文件夹，把所有文件打包成ZIP，丢进一个装了Forge的客户端，开始游戏（2B青年）\n4.以上方法全做一遍（火星人泥嚎）\n\n你可以再控制台看到类似“我的第一个MOD”的字样，进入游戏后，点击MODS按钮，你可以看到你的MOD正在运行：)\n\n\n\n\nQQ截图20120731200303.png (145.18 KB, 下载次数: 36)\n\n下载附件\n\n2012-7-31 19:55 上传\n\n\n\n\n\n这虽然看起来毫无用处，但是这是你的第一个MOD，恭喜你已经学会了制作ForgeMOD的第一步 :D！\n\n总结：\n恭喜你已经学会了制作ForgeMOD的最基础的知识，而且做出了第一个MOD :D！\n\n\n\n",
    "replies": [
        {
            "author": "qaz13727245717",
            "timestamp": 1343735640,
            "txt_content": "不会弄了路过，路过加分"
        },
        {
            "author": "qq1575550349",
            "timestamp": 1343739300,
            "txt_content": "看不懂得路过，加分"
        },
        {
            "author": "daifei4321",
            "timestamp": 1344226800,
            "txt_content": "说一个重要的：\nClass的名字有规定的，不能随便取。根据1.2.5对应的FORGE，在cpw.mods.fml.common.Loader前面定义的Pattern modClass，必须满足编译后的文件名是\"(.+/|)(mod\\\\_[^\\\\s$]+).class$\"基本上就是要以mod_这4个字母开头。不然加载不到的。"
        },
        {
            "author": "micone",
            "timestamp": 1344841200,
            "txt_content": "基类NetworkMod是什么作用的?"
        },
        {
            "author": "yuxuanchiadm",
            "timestamp": 1344846240,
            "txt_content": "micone 发表于 2012-8-13 15:00 \n基类NetworkMod是什么作用的?\n所有单机MOD可以继承自BaseMod和NetworkMod，所有联机MOD必须继承自NetworkMod,BaseMod是FML的一部分。NetworkMod是Forge的一部分，所以一般用安装了Forge源码的MCP来制作ModLoaderMOD一般用BaseMod，而制作ForgeMOD一般是用NetworkMod"
        },
        {
            "author": "qw4wer",
            "timestamp": 1346469060,
            "txt_content": "1.31以上，modloader与Forge分手，各种代码大改动，现在都是去找原型方法，不想用其提供的方法了{:10_528:}"
        },
        {
            "author": "xiaoxiami",
            "timestamp": 1356178920,
            "txt_content": "编译报错了，如何解决？\n== MCP 7.25 (data: 7.25, client: 1.4.6, server: 1.4.6) ==\n# found ff, ff patches, srgs, name csvs, doc csvs, param csvs, renumber csv, ast\nyle, astyle config\n== Recompiling client ==\n> Cleaning bin\n> Recompiling\n'\"C:\\Program Files\\Java\\jdk1.7.0_05\\bin\\javac\" -encoding UTF-8 -Xlint:-options -\ndeprecation -g -sourc...' failed : 1\n\n== ERRORS FOUND ==\n\nsrc\\minecraft\\net\\minecraft\\src\\myFirstMod\\mod_myFirstMod.java:20: 错误: 编码UTF\n-8的不可映射字符\n        System.out.println(\"???????MOD\");\n                            ^"
        },
        {
            "author": "t789852",
            "timestamp": 1356268620,
            "txt_content": "无法解析cpw是怎们回事？"
        },
        {
            "author": "katetem4",
            "timestamp": 1356271620,
            "txt_content": "xiaoxiami 发表于 2012-12-22 20:22 \n编译报错了，如何解决？\n== MCP 7.25 (data: 7.25, client: 1.4.6, server: 1.4.6) ==\n# found ff, ff pa ...\nSystem.out.Println(\"???????MOD\");"
        },
        {
            "author": "xiaoxiami",
            "timestamp": 1356271680,
            "txt_content": "katetem4 发表于 2012-12-23 22:07 \nSystem.out.Println(\"???????MOD\");\n编码问题，已解决"
        },
        {
            "author": "katetem4",
            "timestamp": 1356271800,
            "txt_content": "xiaoxiami 发表于 2012-12-23 22:08 \n编码问题，已解决\nunicode 還是utf-8..."
        },
        {
            "author": "xiaoxiami",
            "timestamp": 1356273120,
            "txt_content": "katetem4 发表于 2012-12-23 22:10 \nunicode 還是utf-8...\n把项目改成UTF-8就好了"
        },
        {
            "author": "katetem4",
            "timestamp": 1356313860,
            "txt_content": "xiaoxiami 发表于 2012-12-23 22:32 \n把项目改成UTF-8就好了\no.............\n需要jenkin嗎?"
        },
        {
            "author": "t789852",
            "timestamp": 1356314220,
            "txt_content": "can't not find server sources是什么情况"
        },
        {
            "author": "wenjinghuan999",
            "timestamp": 1358012340,
            "txt_content": "t789852 发表于 2012-12-24 09:57 \ncan't not find server sources是什么情况\n同求问               "
        },
        {
            "author": "wenjinghuan999",
            "timestamp": 1358012580,
            "txt_content": "wenjinghuan999 发表于 2013-1-13 01:39 \n同求问\n好像不管他就行了，直接运行start_client可以看到自己的mod"
        },
        {
            "author": "wuyuanyi",
            "timestamp": 1359448860,
            "txt_content": "学习留名，感谢lz"
        },
        {
            "author": "LAM878787",
            "timestamp": 1359531120,
            "txt_content": "不会弄了路过，路过加分"
        },
        {
            "author": "wanglava",
            "timestamp": 1371568680,
            "txt_content": "* 第一种调试方法能够正常编译和运行程序。\n\n*第二种debug模式下报如下的错误。请问楼主该怎么解决呢？\n\nSource not found\n\nThe source attachement doest not contain the source for the file Sys.class\nYou can chang the source attachement by clicking Change Attached Source below:\n\n// Compiled from Sys.java (version 1.4 : 48.0, super bit)\npublic final class org.lwjgl.Sys {\n  \n  // Field descriptor #76 Ljava/lang/String;\n  private static final java.lang.String JNI_LIBRARY_NAME = \"lwjgl\";\n  \n  // Field descriptor #76 Ljava/lang/String;\n  private static final java.lang.String VERSION = \"2.4.2\";\n  \n  // Field descriptor #80 Lorg/lwjgl/SysImplementation;\n  private static final org.lwjgl.SysImplementation implementation;\n  \n  // Field descriptor #76 Ljava/lang/String;\n  private static final java.lang.String POSTFIX64BIT = \"64\";\n  \n  // Field descriptor #83 Ljava/lang/Class;\n  static synthetic java.lang.Class class$java$lang$String;\n  \n  // Field descriptor #83 Ljava/lang/Class;\n  static synthetic java.lang.Class class$java$net$URL;\n  \n(下面还有三百多行内容，我就省略了。)"
        },
        {
            "author": "zyl_",
            "timestamp": 1372941000,
            "txt_content": "运行recompile.bat的时候它报java.lang.outofMemoryError:Java Heap space 这个错误。。。肿么办...."
        },
        {
            "author": "简单",
            "timestamp": 1374048900,
            "txt_content": "糟了=。=看完这贴我才发现我得去补习下注解。。。。还完全没有学过。。。。大神求鞭策。。。"
        },
        {
            "author": "yuxuanchiadm",
            "timestamp": 1374250200,
            "txt_content": "简单 发表于 2013-7-17 16:15 \n糟了=。=看完这贴我才发现我得去补习下注解。。。。还完全没有学过。。。。大神求鞭策。。。\n注解又不是啥很难的东西，难的东西多了去了，注解说白了就是进击版的注释，不仅可以在编译期间，为编译器提供一些信息（比如该被注解的方法应该重载了父类的某方法，没有重载则无法通过编译），而且一旦注解类自身被注解成@Retention(RetentionPolicy.RUNTIME)，那么还可以在运行时通过反射获取到注解，并获取其中的数据。"
        },
        {
            "author": "129124",
            "timestamp": 1374367620,
            "txt_content": "好复杂啊，看得要抓狂了"
        },
        {
            "author": "kuafuzhuguang",
            "timestamp": 1375610880,
            "txt_content": "先顶后看。。。"
        },
        {
            "author": "kuafuzhuguang",
            "timestamp": 1375798320,
            "txt_content": "1.首先打开recompile.bat批处理文件，并等待编译完成。然后打开startclient.bat批处理文件，启动游戏LOL。（普通青年）\n2.轻轻点击你的F11键，选择JAVA应用程序，然后选择Start类。（文艺青年）\n3.猛击你的reobfuscate.bat批处理文件，等运行完成后，打开\"mcp725ForgeMOD\\reobf\"文件夹，把所有文件打包成ZIP，丢进一个装了Forge的客户端，开始游戏（2B青年）\n4.以上方法全做一遍（火星人泥嚎）\n做到第十章的时候发现贴图的文件夹不知道为啥得手动添加到压缩包，而且rar的格式居然不认识得用zip\n果然是因为zip的算法简单么"
        },
        {
            "author": "瞎东西",
            "timestamp": 1381930500,
            "txt_content": "我没有找到net.minecraft怎么办"
        },
        {
            "author": "tyhong",
            "timestamp": 1382961540,
            "txt_content": " 本帖最后由 tyhong 于 2013-10-28 20:00 编辑 \n\n我看不懂啊\n肿么打开介玩意\n\n\n\n\n360截图20131026215510093.jpg (35.78 KB, 下载次数: 0)\n\n下载附件\n\n2013-10-28 19:59 上传\n\n\n\n\n"
        },
        {
            "author": "lincong999",
            "timestamp": 1384664940,
            "txt_content": "kuafuzhuguang 发表于 2013-8-6 22:12 \n做到第十章的时候发现贴图的文件夹不知道为啥得手动添加到压缩包，而且rar的格式居然不认识得用zip\n果然 ...\n因为rar是商业授权，不给钱就无权使用。"
        },
        {
            "author": "jjxxz2",
            "timestamp": 1386155400,
            "txt_content": "实际上我还不会打开Eclipse。。。"
        },
        {
            "author": "adaer",
            "timestamp": 1386567600,
            "txt_content": "daifei4321 发表于 2012-8-6 12:20 \n说一个重要的：\nClass的名字有规定的，不能随便取。根据1.2.5对应的FORGE，在cpw.mods.fml.common.Loader前 ...\n和自己的命名习惯不符合好忧伤，还有就是反编译出来的函数很多par1这样的命名，重命名后也算是修改了源文件，好蛋疼"
        },
        {
            "author": "hlrlqy",
            "timestamp": 1388013600,
            "txt_content": "大神，我想要一个空mod= =能在服务端运行，只挂个名字就ok"
        },
        {
            "author": "hyb518",
            "timestamp": 1401722160,
            "txt_content": "正准备学习MC的插件和MOD开发技术，非常需要这些教程，赞！"
        },
        {
            "author": "nlbbkb",
            "timestamp": 1402388940,
            "txt_content": "基础不是很好的大部分看不懂的说……另外哪里可以查到API，有哪些函数完全靠自己找= =简直给跪了"
        },
        {
            "author": "zbw001",
            "timestamp": 1407490620,
            "txt_content": "xiaoxiami 发表于 2012-12-22 20:22\n编译报错了，如何解决？\n== MCP 7.25 (data: 7.25, client: 1.4.6, server: 1.4.6) ==\n# found ff, ff patc ...\n有中文，要转码"
        },
        {
            "author": "sycsky",
            "timestamp": 1412935860,
            "txt_content": "为什么我没找到net.minecraft.src这个包 ？"
        },
        {
            "author": "codefans",
            "timestamp": 1413090720,
            "txt_content": "1.7.2 的有点不一样了"
        },
        {
            "author": "忆昨天",
            "timestamp": 1431692940,
            "txt_content": "那个net.minecraft.src到底在哪"
        },
        {
            "author": "忆昨天",
            "timestamp": 1431693480,
            "txt_content": "如果知道加我QQ1194916141告诉我"
        },
        {
            "author": "hester_123",
            "timestamp": 1439119260,
            "txt_content": "请问楼主，我点了recompile.bat后，它最后提示!! Can not find server sources, try decompiling !!，这个改怎么办呀！！"
        },
        {
            "author": "tpachinese",
            "timestamp": 1455194220,
            "txt_content": "我说为何用reobfuscate.bat到reobf文件夹里看了都是class\n没有直接jar吗\n源码是没问题的\n求怎么导出mod"
        }
    ]
}