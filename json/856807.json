{
    "title": "[已解决][1.12.2插件]怎么扣除玩家的钱??",
    "author": "mcbzhu",
    "replyCount": 8,
    "timestamp": 1554962040,
    "txt_content": " 本帖最后由 mcbzhu 于 2019-4-13 01:00 编辑 \n\n我翻了ValueAPI，没弄明白 , 大佬们过来帮我解释一下 ， 解决了给金粒Economy 这个接口有一个bankHas(java.lang.String name, double amount) 方法方法解释(官方)：\nReturns true or false whether the bank has the amount specified - DO NOT USE NEGATIVE AMOUNTS 返回账户是否有指定金额(有为true无则false) - 不要使用负数 \n\n它说的是返回一个true 或者 false ，，，实际上是一个EconomyResponse对象\n我现在想要这个 boolean 类型的值 怎么办呀？我的功能就是判断里边有没有指定的金额,有就给它扣掉,没有就其他操作.\n\n\n\n\n\n\n怎么使用这个对象.png\n(40.36 KB, 下载次数: 1)\n\n\n\n\n下载附件\n\n\n2019-4-11 13:45 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "lliiooll",
            "timestamp": 1554962340,
            "txt_content": "if(economy.bankHas(player.getName(), vaultCost))//玩家如果有指定钱\n{\n//执行扣钱\n}"
        },
        {
            "author": "mcbzhu",
            "timestamp": 1554962400,
            "txt_content": "lliiooll 发表于 2019-4-11 13:59\nif(economy.bankHas(player.getName(), vaultCost))//玩家如果有指定钱\n{\n//执行扣钱\n它economy.bankHas(player.getName(), vaultCost) 返回的并不是boolean类型的..而是EconomyResponse这个鬼"
        },
        {
            "author": "lliiooll",
            "timestamp": 1554962520,
            "txt_content": "等我翻下api"
        },
        {
            "author": "鬼畜畜",
            "timestamp": 1554962700,
            "txt_content": "package org.maxgamer.quickshop.Economy;\n\nimport java.util.UUID;\n\nimport net.milkbowl.vault.economy.Economy;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.OfflinePlayer;\nimport org.bukkit.plugin.RegisteredServiceProvider;\nimport org.maxgamer.quickshop.QuickShop;\nimport org.maxgamer.quickshop.Util.Util;\n\npublic class Economy_Vault implements EconomyCore {\n   private Economy vault;\n   QuickShop plugin;\n\n   public Economy_Vault() {\n      setupEconomy();\n   }\n\n   private boolean setupEconomy() {\n      RegisteredServiceProvider<Economy> economyProvider = Bukkit.getServicesManager().getRegistration(Economy.class);\n      if (economyProvider != null) {\n         this.vault = ((Economy) economyProvider.getProvider());\n      }\n      return this.vault != null;\n   }\n\n   @Override\n   public boolean isValid() {\n      return this.vault != null;\n   }\n\n   @Override\n   public String format(double balance) {\n      try {\n         return this.vault.format(balance);\n      } catch (Exception e) {\n      }\n      try {\n      return String.valueOf(QuickShop.instance.getConfig().getString(\"shop.alternate-currency-symbol\") + balance);\n      }catch(Exception e) {\n         return String.valueOf('$' + balance);\n      }\n   }\n\n   @Override\n   public boolean deposit(UUID name, double amount) {\n      OfflinePlayer p = Bukkit.getOfflinePlayer(name);\n      boolean result = this.vault.depositPlayer(p, amount).transactionSuccess();\n      return result;\n   }\n\n   @Override\n   public boolean withdraw(UUID name, double amount) {\n      OfflinePlayer p = Bukkit.getOfflinePlayer(name);\n      boolean result = this.vault.withdrawPlayer(p, amount).transactionSuccess();\n      return result;\n   }\n\n   @Override\n   public boolean transfer(UUID from, UUID to, double amount) {\n      OfflinePlayer pFrom = Bukkit.getOfflinePlayer(from);\n      OfflinePlayer pTo = Bukkit.getOfflinePlayer(to);\n      if (this.vault.getBalance(pFrom) >= amount) {\n         if (this.vault.withdrawPlayer(pFrom, amount).transactionSuccess()) {\n            if (!this.vault.depositPlayer(pTo, amount).transactionSuccess()) {\n               this.vault.depositPlayer(pFrom, amount);\n               return false;\n            }\n            return true;\n         }\n         return false;\n      }\n      return false;\n   }\n\n   @Override\n   public double getBalance(UUID name) {\n      OfflinePlayer p = Bukkit.getOfflinePlayer(name);\n      return this.vault.getBalance(p);\n   }\n}"
        },
        {
            "author": "lliiooll",
            "timestamp": 1554962760,
            "txt_content": "Ghost_chu 发表于 2019-4-11 14:05\npackage org.maxgamer.quickshop.Economy;\n\nimport java.util.UUID;\n看这位大佬"
        },
        {
            "author": "mcbzhu",
            "timestamp": 1554962880,
            "txt_content": "lliiooll 发表于 2019-4-11 14:02\n等我翻下api\n我换方式了 ... 我还是用has()吧  ...我把player强转为offlinePlayer对象,也一样能判断...但是我还是不明白这个返回EconomyResponse对象的bankHas()咋用"
        },
        {
            "author": "mcbzhu",
            "timestamp": 1554963120,
            "txt_content": "Ghost_chu 发表于 2019-4-11 14:05\npackage org.maxgamer.quickshop.Economy;\n\nimport java.util.UUID;\n一脸懵逼的我....我只是想知道那个bankHas()的用法"
        },
        {
            "author": "hghet",
            "timestamp": 1555058460,
            "txt_content": "不知道 这个很难 玩不起 不过如果真的不行的话你可以试试去吧这个改下"
        }
    ]
}