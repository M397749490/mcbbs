{
    "title": "JDBC的rs.getInt()方法的问题",
    "author": "李泽天才小子",
    "replyCount": 5,
    "timestamp": 1461210000,
    "txt_content": "数据表\nint date 长度2\nverchat player 长度20\nint id 主键\n\n主要程序\n 贴出关键代码\n 贴出关键代码\npublic void run(){\nint date=0;\nString sql=\"SELECT * FROM player where player=\"+player;\nCalendar ca = Calendar.getInstance();\nint day=ca.get(Calendar.DATE);//获取日\ntry {\nStatement ps =(Statement) conn.createStatement();\nResultSet rs = ps.executeQuery(sql);\nwhile(rs.next()){\ndate=rs.getInt(\"date\");\n\nSystem.out.println(rs.getInt(\"date\"));\nif(date==0){\nSystem.out.println(\"我运行了\");\nps.executeUpdate(\"INSERT INTO player (player,date)VALUES(\"+player+\",\"+day+\")\");\n\n\n}\n}\n} catch (SQLException e) {\n// TODO 自动生成的 catch 块\nSystem.out.println(\"连接失败\");\ne.printStackTrace();\n}\n实际输出 无\n情况是\n玩家名称为666的根本不存在\n当为null时rs.getInt方法会输出0\n但实际是并没有输出\nif条件中的语句也没执行\n如果是纯在的数据可以正常输出\n求告知错误之处QWQ\n或者判断数据为空的方法\n对了eclipse是中文的QWQ\n\n\n\n",
    "replies": [
        {
            "author": "q549365815",
            "timestamp": 1461325860,
            "txt_content": "这样的排版没有人愿意看\n\n可以截图？"
        },
        {
            "author": "xiweihai",
            "timestamp": 1461328080,
            "txt_content": " 本帖最后由 xiweihai 于 2016-4-23 02:55 编辑 \n\n把\"SELECT * FROM player where player=\"+player;改成这样\"SELECT * FROM player where player='\"+player+\"';\";另外不要这样直接拼接sql语句，这样会被数据库注入，后果很严重，鉴于你是新手建议你找个轻量级的面向对象操作数据库框架。比如说JDiy这种框架可以尝试一下。后面你会接触到很多东西，比如说联表查询，子查询分组查询"
        },
        {
            "author": "ColorsWind",
            "timestamp": 1469669160,
            "txt_content": "如果这个玩家不存在\n那么ResultSet就是个空集\n判断是否有这个玩家你应该if(rs.next()) {\n  return rs.getInt(1);\n} else {\n  return 0;\n}"
        },
        {
            "author": "914554688wyt",
            "timestamp": 1469869380,
            "txt_content": "xiweihai 发表于 2016-4-22 20:28\n把\"SELECT * FROM player where player=\"+player;改成这样\"SELECT * FROM player where player='\"+player+\" ...\n被注入的可能不大吧。。。信息只在控制台上啊"
        },
        {
            "author": "云闪",
            "timestamp": 1469894880,
            "txt_content": "= =如果玩家不存在，当然就没有任何数据，你的while(rs.nest()){.....}部分就不会执行= =很奇怪吗....."
        }
    ]
}