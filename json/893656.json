{
    "title": "[Forge]如何获取ItemStack的伤害值？",
    "author": "1742986756",
    "replyCount": 4,
    "timestamp": 1564408440,
    "txt_content": "如题，怎么样得到一个物品的伤害值（如果是剑附魔了锋利之后的加成伤害也要得到）。",
    "replies": [
        {
            "author": "森林蝙蝠",
            "timestamp": 1564410360,
            "txt_content": "http://www.mcbbs.net/thread-827002-1-1.html"
        },
        {
            "author": "3TUSK",
            "timestamp": 1564444020,
            "txt_content": "ItemStack stack = ...;\nint damage = stack.getItemDamage(); // func_77952_i复制代码"
        },
        {
            "author": "1742986756",
            "timestamp": 1564452900,
            "txt_content": "u.s.knowledge 发表于 2019-7-30 07:47\ngetItemDamage()这个获取的是损失了多少耐久值。"
        },
        {
            "author": "3TUSK",
            "timestamp": 1564481700,
            "txt_content": " 本帖最后由 u.s.knowledge 于 2019-7-31 07:54 编辑 \n1742986756 发表于 2019-7-30 10:15\ngetItemDamage()这个获取的是损失了多少耐久值。\n\n那就再获取当前物品的最大损害值：\nint maxDamage = stack.getMaxDamage();复制代码\n这样就可以求出当前的剩余耐久：\nint dura = maxDamage - damage;复制代码\n\n\n\n等一下，非常抱歉我读错题了——\n\n玩家的攻击力是以物品的基础攻击力、附魔修正、冷却时间和暴击修正共同决定的，其计算方式（根据 EntityPlayer.attackTargetEntityWithCurrentItem）为：float damage = entityBaseAttack + itemAttack;\nfloat enchantmentModifiers = EnchantmentHelper.getModifierForCreature(itemInHand, creatureAttribute) * getCooledAttackStrength(0.5F);\nfloat coolDownModifiers = getCooledAttackStrength(0.5F);\ndamage *= 0.2F + coolDownModifiers * coolDownModifiers * 0.8;\nenchantmentModifiers *= coolDownModifiers;\nif (criticalHit) { // 计入暴击修正\n  damage *= 1.5F;\n}\ndamage += enchantmentModifiers;\n复制代码\n（来源：EntityPlayer.attackTargetEntityWithCurrentItem（func_71059_n），上述代码为伪代码，不反映原版的底层细节，只反映原版的逻辑。）"
        }
    ]
}