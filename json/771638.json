{
    "title": "【50a】使用局部坐标做到找到玩家指的地方",
    "author": "chyx",
    "replyCount": 23,
    "timestamp": 1513068600,
    "txt_content": " 本帖最后由 SPGoding 于 2019-10-13 01:11 编辑 \n\n众所周知 50a加入了局部坐标这一概念（参见新闻版和这里）\n\n我刚刚用这个做出检查鼠标指针指的石头\n花了我大约5分钟\n\n没有使用任何marker实体/记分板/nbt\n\n只用了3个指令 1个函数（其中一个指令是可以省略的）\n\n\n\n#chyx:ray\nexecute unless entity @s[distance=..6] run say none\nexecute if entity @s[distance=..6] if block ~ ~ ~ stone run say 1\nexecute if entity @s[distance=..6] unless block ~ ~ ~ stone positioned ^ ^ ^0.005 run function chyx:ray复制代码\n\n原理很好懂 就是如果检查距离超过了6格  那么放弃 并且输出none\n如果发现石头  那么就停止 并且输出1\n如果仍未发现 那么往前进0.005（可自行在速度和准确度上决定）\n当然 如果你不需要输出none  那么第一个指令可以省掉的\n当然咯 因为玩家的眼睛离他的原点有一些距离\n游戏里使用的时候应该输入execute as @a at @s anchored eyes positioned ^ ^ ^ anchored feet run function chyx:ray（由命令方块时）\n或者execute anchored eyes positioned ^ ^ ^ anchored feet run function chyx:ray（聊天栏）\n\n将命令更新到了最新版本的格式\n原文内容附在如下\n\n—— SPGoding\n众所周知 50a加入了局部坐标这一概念（参见新闻版和这里）\n\n我刚刚用这个做出检查鼠标指针指的石头\n花了我大约5分钟\n\n没有使用任何marker实体/记分板/nbt\n\n只用了3个指令 1个函数（其中一个指令是可以省略的）\n\n\n\n#chyx:ray\nexecute unless entity @s[distance=..6] run say none\nexecute if entity @s[distance=..6] if block ~ ~ ~ stone run say 1\nexecute if entity @s[distance=..6] unless block ~ ~ ~ stone offset ^ ^ ^0.005 run function chyx:ray复制代码\n\n原理很好懂 就是如果检查距离超过了6格  那么放弃 并且输出none\n如果发现石头  那么就停止 并且输出1\n如果仍未发现 那么往前进0.005（可自行在速度和准确度上决定）\n当然 如果你不需要输出none  那么第一个指令可以省掉的\n当然咯 因为玩家的眼睛离他的原点有一些距离\n游戏里使用的时候应该输入execute as @a at @s offset ~ ~1.62 ~ run function chyx:ray（由命令方块时）\n或者execute offset ~ ~1.62 ~ run function chyx:ray（聊天栏）",
    "replies": [
        {
            "author": "ruhuasiyu",
            "timestamp": 1513070460,
            "txt_content": "这个可以\n\n@pineapple_  你要的放置方块的效果可以用这个"
        },
        {
            "author": "pineapple_",
            "timestamp": 1513085220,
            "txt_content": "ruhuasiyu 发表于 2017-12-12 17:21\n这个可以\n\n@pineapple_  你要的放置方块的效果可以用这个\n是的，这就是我要的那个！\n\n目前我所知道的由于局部坐标淘汰的东西:\n船的水平免穷举\n选择器r(distance)画圆\n刷怪蛋生成一些模组内需要用的特殊方块(本帖)\n\n没想到这个居然是通过局部坐标解决的\n\n另外rua你的模组里的刷怪蛋是不是也该改改了\n预谋开坑1.13rpg/pve地图"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1513085760,
            "txt_content": "pineapple_ 发表于 2017-12-12 21:27\n是的，这就是我要的那个！\n\n目前我所知道的由于局部坐标淘汰的东西:\n但是我不太确定，比如说手上有一个特殊方块，然后放置的时候手上的物品已经消失了，这时候怎么检测这个玩家？"
        },
        {
            "author": "pineapple_",
            "timestamp": 1513087320,
            "txt_content": " 本帖最后由 pineapple_ 于 2017-12-12 22:30 编辑 \nruhuasiyu 发表于 2017-12-12 21:36\n但是我不太确定，比如说手上有一个特殊方块，然后放置的时候手上的物品已经消失了，这时候怎么检测这个玩 ...\n这样行不\n\n#scoreboard objectives add use_block useitem.xxx\n\ntag @a[nbt={SlectedItem:…}] add keep_block\n\nexecute as @a[tag=keep_block,score…] run function chyx:ray\n\n#chyx:ray\nexecute unless entity @s[distance=..7] run say none\nexecute if entity @s[distance=.7.] if block ~ ~ ~ stone run tag @a[tag=keep_block,score…] add used_block\nexecute if entity @s[distance=..7] unless block ~ ~ ~ stone offset ^ ^ ^0.005 run function chyx:ray\nsummon area_effect_cloud ~ ~ ~ {Tags:[\"block\"]}\n#对@a[tag=used_block]和@e[tag=block]操作\n\ntag @a remove use_block\ntag @a remove keep_block"
        },
        {
            "author": "玄素",
            "timestamp": 1513087440,
            "txt_content": " 本帖最后由 玄素 于 2017-12-12 22:09 编辑 \nruhuasiyu 发表于 2017-12-12 21:36\n但是我不太确定，比如说手上有一个特殊方块，然后放置的时候手上的物品已经消失了，这时候怎么检测这个玩 ...\n标记留1tick延迟，或者execute as @a[tag=xxx] ......\n......\ntag @a remove xxx\ntag @a[nbt={}] add xxx 复制代码即可跨tick检测物品\n当然说的话，还是顺带获取一下Count做个减法比较稳妥就是\n看起来我又忘了useitem....."
        },
        {
            "author": "雷鸣·翾鹗",
            "timestamp": 1513415160,
            "txt_content": "有局部坐标，导什么弹.jpg"
        },
        {
            "author": "逆风的帆",
            "timestamp": 1514976600,
            "txt_content": "长知识啊！！！天哪"
        },
        {
            "author": "雷鸣·翾鹗",
            "timestamp": 1515220920,
            "txt_content": "对了说起来你有没有遇到过实际与局部坐标设置不同的情况？比如我弄个使用钓竿往前跑一段距离的玩意，但多次试验后并不一定是往前跑，甚至还会停在原地不动的情况，以及我今天用你这个也发生了类似的事，站在原地时可以正确检测范围内指向是否为石头，移动一下之后就一万个none了"
        },
        {
            "author": "chyx",
            "timestamp": 1515258900,
            "txt_content": "雷鸣·翾鹗 发表于 2018-1-6 14:42\n对了说起来你有没有遇到过实际与局部坐标设置不同的情况？比如我弄个使用钓竿往前跑一段距离的玩意，但多次 ...\n表示没懂\n\n我用我的这个是时一边跑跑跳跳没有什么问题啊"
        },
        {
            "author": "qq2670163455",
            "timestamp": 1515563340,
            "txt_content": "66666666666666666666666666666666666"
        },
        {
            "author": "qq2670163455",
            "timestamp": 1515563340,
            "txt_content": "这么高端 我在服务器里试试去"
        },
        {
            "author": "qq2670163455",
            "timestamp": 1515563400,
            "txt_content": "这波操作很可以---   ---"
        },
        {
            "author": "wurichengn",
            "timestamp": 1525658040,
            "txt_content": "您好，我的版本是  18w 16a\n我执行这段代码貌似报offset这里出错，我在其他地方也试了下，貌似我这个版本不支持offset\n不知道具体是什么问题导致的"
        },
        {
            "author": "a570729721a",
            "timestamp": 1525691280,
            "txt_content": " 可以的，很棒棒，虽然没看"
        },
        {
            "author": "a570729721a",
            "timestamp": 1525691400,
            "txt_content": " 可以的，很棒棒，虽然没看"
        },
        {
            "author": "缤纷的烟火",
            "timestamp": 1531965240,
            "txt_content": "感觉很厉害"
        },
        {
            "author": "546514561",
            "timestamp": 1532051760,
            "txt_content": "....................."
        },
        {
            "author": "xiangke7530",
            "timestamp": 1532102940,
            "txt_content": "支持支持支持支持支持支持"
        },
        {
            "author": "129382354",
            "timestamp": 1586601720,
            "txt_content": "楼主您好\n请问在使用这个命令时\nexecute as @a at @s anchored eyes positioned ^ ^ ^ anchored feet run function chyx:ray为什么还需要再输入anchored feet呢？"
        },
        {
            "author": "SPGoding",
            "timestamp": 1586652060,
            "txt_content": "129382354 发表于 2020-4-11 18:42\n楼主您好\n请问在使用这个命令时\nexecute as @a at @s anchored eyes positioned ^ ^ ^ anchored feet run f ...\n\n相关漏洞：MC-124140\n\n\n由于曾经版本的一个漏洞，如果不设置回 feet 会导致之后每一次用的 ^ ^ ^ 坐标都会往上偏移。现在已经修了。\n\n"
        },
        {
            "author": "129382354",
            "timestamp": 1586663040,
            "txt_content": "SPGoding 发表于 2020-4-12 08:41\n十分感谢！"
        },
        {
            "author": "不忘吃心",
            "timestamp": 1598113080,
            "txt_content": "汉子我都认识  咋凑到一起就看不懂了呢"
        },
        {
            "author": "himv",
            "timestamp": 1604717220,
            "txt_content": "厉害~~~~~~~~~~"
        }
    ]
}