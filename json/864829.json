{
    "title": "[直播贴][登录模组 - HELogin][MOD服][脱坑]",
    "author": "Hellmessage01",
    "replyCount": 11,
    "timestamp": 1557592320,
    "txt_content": " 本帖最后由 Hellmessage01 于 2019-5-14 15:17 编辑 \n\n\n\n\n为什么想做这个插件呢~~~~~\n最近想做开个MOD服务器 \n然后呢找来找去 没找到一个合适的MOD服登录模组,\n思来想去,自己动手撸一个,\n然后呢 这个帖子是一个直播贴!不定时更新~~~\n\n\n\n\n\n\n先来说说预想功能吧\n登录 - 这个是必须要的 不然怎么叫登录模组对吧\n支持MYSQL数据库存储数据 - 话说回来 之前看到论坛有一个大佬 做了一个 GUILogin 可惜只能使用File存储信息\n[我绝对不会说 我就是借鉴这位大佬的思路来写的] \n权限管理 - 额 这个插件服就很常见了吧 具体功能我就不多说了\n\n\n\n\n然后呢 就是一个坑一点的 这个MOD \n我可能会写后续的一些其他功能 [只是可能]\n比如 真正的权限管理,\nVIP功能,交易系统等一系列\n\n\n\n\n\n好了废话不多说 下面是正式的内容:\n版本呢 我考虑了一下 现在就1.7.10以后没有像MCPC+ 差不多的第三方服务端,无法加载MOD 但是呢 除了1.12.2 我其他都没去看过[主要是懒]\n所以呢 这个模组 可能只会支持 1.12.2\n\n我用的是IDEA + Windows[有时候也会用MAC] 服务器是Centos7.6\nForge版本是: 2836\nMC版本: 1.12.2\n入门的东西我就不说了 比如配置环境啥的 大家可以看下这个大佬的帖子:[Mod开发教程] [长期更新]1.12Forge mod开发教程\n\n\n\n\n\n\nProject-File.png (40.04 KB, 下载次数: 0)\n\n下载附件\n\n2019-5-12 00:22 上传\n\n\n\n\n\n这就是项目目录结构了 都挺好理解的 \ndao 数据库操作的都写这里\ngui 一些界面上的东西\nlib 放一些库类\nnetwork 网络通信有关的 都丢这里\nproxy 代理 不理解的小伙伴可以去看 文档\nutil 一些公共方法或者定义\n\n然后就是配置文件了:\n\n\n\n\n\nConfig.png (97.97 KB, 下载次数: 0)\n\n下载附件\n\n2019-5-12 00:27 上传\n\n\n\n\n\n\n注释我已经写得挺明白了 \n我们可以看下配置文档读取的实现方法\n\n\n\n\n\n\nimage.png (54.46 KB, 下载次数: 0)\n\n下载附件\n\n2019-5-12 00:28 上传\n\n\n\n\n\n\n看函数名 大家应该已经猜到差不多啥意思了 \n我是先在资源文件下创建了一个默认的配置文件\n然后这边读取 再写入到Server的Config下\n\n\n\n\n\n\nimage.png (93.09 KB, 下载次数: 0)\n\n下载附件\n\n2019-5-12 00:30 上传\n\n\n\n\n\n\n解析方法 比较笨的一个办法 后面再优化 现在\n\n\n\n\n\n\nimage.png (48.98 KB, 下载次数: 0)\n\n下载附件\n\n2019-5-12 00:32 上传\n\n\n\n\n\n\n这就是整的一个配置文件读取流程了 \n新增了2个类 负责管理数据库连接 防止服务器 数据库 开销过大问题\n\n总所周知 一般我们在操作数据库时候，需要频繁的打开和关闭连接，而创建数据库连接往往开销比较大\n所以呢 这个就可以解决这个问题啦 实现原理也很简单 在启动的时候 创建多个connection 然后存在连接集中\n当需要执行数据库操作时 从连接池中取出一个连接 进行操作 \n当操作完成后 再把连接放回连接池\n\n\n下面是详细代码\n\n\n\n\n\n\nimage.png (90.83 KB, 下载次数: 0)\n\n下载附件\n\n2019-5-12 02:46 上传\n\n\n\n\n\n\n\n\n\n\n\nimage.png (107.33 KB, 下载次数: 0)\n\n下载附件\n\n2019-5-12 02:46 上传\n\n\n\n\n\n\n下面是使用方法\n\n\n\n\n\n\nimage.png (68.51 KB, 下载次数: 0)\n\n下载附件\n\n2019-5-12 02:48 上传\n\n\n\n\n\n\n文件命名与注释我已经写得挺清楚的 \nHEDateBasePool 就是连接池\n HEDBUtil 当然就是操作数据库连接的工具类\n这里可能会存在一个BUG 如果是多个线程并发的获取的话，当连接池中没有连接的时候，那么这候再获取的时候就会报错，而且该操作属于非线程安全的\n这个问题我在考虑是否使用同步synchronized\n\n\n\n\n未完待续......\n\n\n",
    "replies": [
        {
            "author": "Hellmessage01",
            "timestamp": 1557592440,
            "txt_content": " 本帖最后由 Hellmessage01 于 2019-5-12 02:56 编辑 \n\n数据库连接池 有几个知识点需要注意一下不知道大家有没有注意到:\n[attachimg]1**[/attachimg]\n\n很多做JAVA开发的小伙伴应该会很疑惑\n这里我为什么不使用 Connection.getClass.getInterfaces()\n 我来为大家解答一下 \nConnection.getClass.getInterfaces()的结果与你的数据库驱动有关,驱动不同,其结果也就不同\nConnection.getClassInterfaces()返回的是一个Class数组，\n它的第一个元素必须是一个Connection才能将创建的代理转化为Connection\n所以呢 根据以上的结论得出 我还不如直接new 一个给他 这样确保不会出现一些奇奇怪怪的问题\n\n\n\n\n\nimage.png\n(32.17 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-5-12 02:52 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "Hellmessage01",
            "timestamp": 1557592500,
            "txt_content": "\n占楼 当更新用  手动滑稽 嘻嘻  新人发帖 不规范 大家请原谅"
        },
        {
            "author": "Freez！流年",
            "timestamp": 1557595200,
            "txt_content": "为什么不用插件????"
        },
        {
            "author": "Hellmessage01",
            "timestamp": 1557595500,
            "txt_content": "Freez！流年 发表于 2019-5-12 01:20\n为什么不用插件????\n服务器小白 MOD服怎么装插件"
        },
        {
            "author": "Freez！流年",
            "timestamp": 1557637560,
            "txt_content": "Hellmessage01 发表于 2019-5-12 01:25\n服务器小白 MOD服怎么装插件\n????现在1.12主流是catserver和sponge都是可以装插件的"
        },
        {
            "author": "roj234",
            "timestamp": 1557639240,
            "txt_content": "switch(key.intern())吧我不清楚但是，，，算了"
        },
        {
            "author": "Yu_Ge_Pro",
            "timestamp": 1557649020,
            "txt_content": "mod登录。。。 插件是个好东西"
        },
        {
            "author": "小卡子吖",
            "timestamp": 1557702000,
            "txt_content": "支持一下"
        },
        {
            "author": "caizhong3",
            "timestamp": 1557726540,
            "txt_content": "我还以为你要写界面呢... 如果不写界面 为啥要用mod写.... 你可以选择  Sponge服务端  或者 某猫端 用插件的形式实现"
        },
        {
            "author": "mc_baoyu",
            "timestamp": 1557757800,
            "txt_content": "厉害了我的mcbbs"
        },
        {
            "author": "Hellmessage01",
            "timestamp": 1557818220,
            "txt_content": "caizhong3 发表于 2019-5-13 13:49\n我还以为你要写界面呢... 如果不写界面 为啥要用mod写.... 你可以选择  Sponge服务端  或者 某猫端 用插件 ...\nGUI 也在做  这个帖子废了 不准备开这个坑了"
        }
    ]
}