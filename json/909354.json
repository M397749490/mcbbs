{
    "title": "[管理][SCT]SlimeWorldManager —— 史莱姆世界管理，优化性能加载世界[1.8-1.14]",
    "author": "狡诈师",
    "replyCount": 4,
    "timestamp": 1566997620,
    "txt_content": " 本帖最后由 爱国民主 于 2019-8-28 23:13 编辑 \n\n\nSlime World Manager史莱姆世界管理—— 优化性能加载世界 ——\n\nSlimeWorldManager是一款Minecraft服务器插件，它根据Hypixel开发团队开发的Slime Region Format而诞生\n其目的是为服务器管理员提供更容易使用并管理世界，还能更快地加载世界并节省空间\n\n\n使用SWM插件存储并管理世界有四个主要的好处：\n速度：Minecraft是使用zlib压缩世界，虽然这个库更新得好，但是已经有24年了。而现在有了更新得压缩算法。SRF使用Zstd保存世界，它既更快又具有更大得压缩优势。你可以看到zlib和zstd的比较：减少硬盘占用：ARF（Minecraft用于存储世界的格式）包含了大量不必要的数据，因为它是为大型生存世界设计的，而不是为小型服务器设计的。当你存储迷你游戏地图或大厅时，实际上可以节省大量无关的东西。如果你想了解更多相关消息，可以看Minikloon制作的视频（需要科学上网，我木有梯子莫得办法）没有性能影响：SWM使用内存世界，这说明整个世界能立即加载。如果每次服务器需要加载一个区块时，它是从内容中读取的，而不是从文件系统中读取，然而将其转换为可用的内容。于是，这就实现了无缝加载区块允许存储世界于其它位置：传统的世界必须保存于服务器根目录中，不过，SWM允许你从各种渠道（如MySQL或MongoDB）加载世界。多亏这一点，你可以同时从多个服务器加载相同的世界，而无需重复创建它的副本。另外，如果你想使用SWM不支持的其它数据渠道中存储世界，你可以通过API创建自己的世界加载器\n\n\n注意，SWM并非应用于大型生存世界，而是用于小型世界，诸如迷你游戏地图或服务器大厅\n\n下载地址：https://www.spigotmc.org/resources/slimeworldmanager.69974/（需要科学上网）\n能科学上网的尽量去原帖下载以支持作者\n附件：https://pan.baidu.com/s/1b8WEPI2RtHyugDVBIlpdVg 提取码: 8qbi\n\n\n命令&权限（注：<>为必填参数，[]为选填参数，<data-source>在教程配置中提到）\n/swm help\n权限：无\n说明：显示插件帮助，仅显示你有权访问的命令\n\n/swm version\n权限：无\n说明：显示插件版本\n\n/swm reload\n权限：swm.reload\n说明：重载配置文件\n\n/swm goto\n权限：swm.togo\n用法：/swm goto <世界> [玩家]\n说明：将自己或其它玩家传送到指定世界\n（该命令也可以用于传统的世界）\n\n/swm list\n权限：swm.worldlist\n用法：/swm list [ slime ] [页数]\n说明：列出所有世界。包括非SRF世界，如果使用slime参数，则仅显示SRF世界\n\n/swm dslist\n权限：swm.dslist\n用法：/swm list <data-source> [页数]\n说明：列出指定数据渠道中所有世界。注意，该命令不仅列出配置文件中的世界，也会列出数据渠道中的世界\n\n/swm import\n权限：swm.importworld\n用法：/swm improt <path-to-world> <data-source> [页数]\n说明：将世界转换为SRF世界并存储到指定数据渠道中。你可以看更多相关信息：点击\n\n/swm load\n权限：swm.loadworld\n用法：/swm load <世界>\n说明：从配置文件中重载指定世界。请不要忘记在转换为SRF世界后去配置一下。更多相关信息：点击\n\n/swm load-template\n权限：swm.loadworld.template\n用法：/swm load-template <template-world> <world>\n说明：复制提供的模板世界。这样可以创建同一世界的需要副本\n\n/swm create\n权限：swm.createworld\n用法：/swm create <世界> <data-source>\n说明：创建一个空的世界并存储于指定数据渠道中。该命令还会自动将世界保存于配置文件中\n\n/swm unload\n权限：swm.unloadworld\n用法：/swm unload <世界>\n说明：从服务器中卸载该世界\n\n/swm migrate\n权限：swm.migrate\n用法：/swm migrate <世界> <new-data-source>\n说明：将世界从当前存储的数据渠道传输到指定的数据渠道\n\n/swm unlock\n权限：swm.unlockworld\n用法：/swm unlock <世界> [data-source]\n说明：从世界中删除锁定，因而可以在不使用只读模式下访问\n当加载 没有启用只读模式的世界时，SWM会自动锁定世界，因此没有其它服务器可以同时加载它，以防世界损坏。但是，如果服务器崩溃，则可能永远无法删除该锁\n注意：你必须在SWM告诉你使用此命令，否则你的世界可能会损害。为了确保你没有错误地执行该操作，你必须输入两次命令\n\n/swm delete\n权限：swm.deleteworld\n用法：/swm delete <世界> [data-source]\n说明：完整地删除世界。如果没有提供数据渠道，则将使用配置文件中指定地数据渠道\n要注意，该操作的结果是永久性的，一旦删除世界，无法还原。为了确保你没有错误地执行该操作，你必须输入两次命令\n\n\n服主-教程安装插件方式\n\n安装SWM是一个很容易的操作，首先从原帖下载最新版本\n然后接着以下步骤操作\n打开下载的zip压缩包将 slimeworldmanager-plugin-.jar 放在服务器插件文件夹中\n\n覆盖默认世界或Spigot-1.14中使用SWM的额外步骤\n将 slimeworldmanager-classmodifier-.jar 放在服务器的主目录中（而不是插件文件夹）在 bat 加上服务器启动参数-javaagent:slimeworldmanager-classmodifier-<version>.jar复制代码\n\n如何使用SWM\n \nSWM需要加载世界，否则是没用的。首先，你必须将世界转换为SRF，因而SWM可以加载它\n将传统地世界转换为SRF\n1.使用命令（推荐）\n将世界放在服务器的根目录中确保世界是未使用状态。因为被使用中的世界无法进行转换使用命令 /swm import <世界文件夹名称> <data-source> [new-world-name] 如果你希望世界与world文件夹具有相同的名称，只需要忽略[new-world-name]参数即可完成！世界现在被存储于你提供的数据渠道（data-source）\n2.使用导入工具（也就是...编程那样的工具吧，后面文中会提到，即“导入工具”）\n不推荐你使用该方式，因为上面提供的方式更快更容易。但是你如果仍想使用该方式，请按以下步骤进行操作\n将世界与导入工具放在一起打开cmd输入以下命令java -jar slimeworldmanager-importer-1.0.0.jar <世界文件夹名称>复制代码它会自动扫描世界并在你放置它的同一目录中生成.slime文件，那就是你的世界！\n\n一旦你将世界存储到指定数据渠道中，你必须对其进行配置，以便插件知道存储世界的位置以及生成位置等\n配置世界，请打开SWM配置文件夹中的 world.yml\n以下是worlds.yml文件的示例：\nworlds：\n     my_great_world：\n         source：mongodb \n        loadOnStartup：false \n        readOnly：true \n        spawn：940,2 ，-370 \n        allowMonsters：false \n        allowAnimals：false \n        difficulty：peaceful \n        pvp：false复制代码然后使用 /swm reload 命令保存并重新加载\n\n配置说明\nsource\n说明：存储世界的数据渠道名称\n可选：file mysql mongodb，也可以使用第三方插件提供的任何其它数据渠道\nloadOnStartup\n说明：服务器启用时是否加载世界\n可选：true false\nreadOnly\n说明：如果为true，则永远不会存储世界的更改。如果为false，则世界将被锁定，因而没有其它服务器可以访问它\n可选：true false\n默认：false\nspawn\n说明：世界出生坐标\n可选：x,y,z\n默认：0,255,0\nallowMonsters\n说明：怪物可否在该世界生成\n可选：true false\n默认：true\nallowAnimals\n说明：动物可否在该世界生成\n可选：true false\n默认：true\ndifficulty\n说明：世界的难度\n可选：peaceful（和平） easy（简单） normal（普通） hard（困难）\n默认：peaceful\npvp\n说明：是否允许在该世界战斗PVP\n可选：true false\n默认：true\n完成以上简单的操作就表示你已经保存并配置了新的世界，那么是时候加载它了，使用命令 /swm load <世界>\n现在，你还可以使用命令 /swm goto <世界> 传送到这个世界\n\n更多，咱们也继续吧设置数据渠道在使用MySQL或MongoDB存储你的世界之前，你必须配置它们为此，请到plugins文件夹中的SWM配置文件夹，打开 sources.yml 文件，里面有你需要设置的所有参数以下是 sources.yml示例file:\n    path: slime_worlds # 存储该世界文件的路径\nmysql:\n    enabled: true\n    host: 127.0.0.1\n    port: 3306\n    username: my_mysql_username\n    password: my_mysql_password\n    database: slimeworldmanager\nmongodb:\n    enabled: true\n    host: 127.0.0.1\n    port: 27017\n    username: my_mongo_username\n    password: my_mongo_password\n    auth: admin\n    database: slimeworldmanager\n    collection: worlds复制代码如果要使用他们就别忘记去启用MySQL或MongoDB\n其它数据渠道（请跳到开发者教程）\n\n\n开发者-教程载入世界\n首先，检查SlimeWorldManager插件API：\nSlimePlugin plugin = (SlimePlugin) Bukkit.getPluginManager().getPlugin(\"SlimeWorldManager\");复制代码想使用API，理所当然地添加库\nSlimeLoader是一个从数据渠道读取和村粗世界地类\n在现在情况下，我们将以MySQL为加载器为示例\nSlimeLoader sqlLoader = plugin.getLoader(\"mysql\");复制代码在加载世界之前，你还需要new SlimeProperties一个一个一个new对象，其包含了世界地所有设置方法\n创建一个的使用 SlimeProperties.builder() 方法\n这是SlimeProperties对象的示例\n\nSlimeWorld.SlimeProperties props = SlimeWorld.SlimeProperties.builder().difficulty(0).allowAnimals(false).allowMonsters(false).spawnX(96).spawnY(50).spawnZ(47).pvp(false).readOnly(true).build();复制代码\n然后，让我们从数据渠道加载世界并生成它\n\ntry {\n    // 注意，这方法应是异步调用\n    SlimeWorld world = plugin.loadWorld(sqlLoader, \"my-world\", props);\n\n    // 必须同步调用此方法\n    plugin.generateWorld(world);\n} catch (UnknownWorldException | IOException | CorruptedWorldException | NewerFormatException | WorldInUseException | UnsupportedWorldException ex) {\n    /* 异常处理 */\n}复制代码\n\n迁移世界\n迁移世界需要三件事：世界文件夹，世界名称和数据渠道\n以下是世界迁移示例\n\nSlimePlugin plugin = (SlimePlugin) Bukkit.getPluginManager().getPlugin(\"SlimeWorldManager\");\n\nString worldName = \"my_world\";\nSlimeLoader currentLoader = plugin.getLoader(\"mysql\");\nSlimeLoader newLoader = plugin.getLoader(\"mongodb\");\n\ntry {\n    // 注意，此方法应是异步\n    plugin.migrateWorld(worldName, currentLoader, newLoader);\n} catch (IOException | WorldInUseException | WorldAlreadyExistsException | UnknownWorldException ex) {\n    /* 异常处理 */\n}复制代码\n\n导入工具-导入世界\n导入世界需要的三件事：世界文件夹，世界名称和数据渠道\n以下是如何导入世界的示例（非开发者请绕道）\n\nSlimePlugin plugin = (SlimePlugin) Bukkit.getPluginManager().getPlugin(\"SlimeWorldManager\");\n\nFile worldDir = new File(\"my_world_foler\");\nString worldName = \"my_world\";\nSlimeLoader loader = plugin.getLoader(\"mysql\");\n\ntry {\n    // 注意，该方法应是异步\n    plugin.importWorld(worldDir, worldName, loader);\n} catch (WorldAlreadyExistsException | InvalidWorldException | WorldLoadedException | WorldTooBigException | IOException ex) {\n    /* 异常处理 */\n}复制代码\n\n使用其它数据渠道\nSWM本身支持三种数据渠道：文件，MySQL，MongoDB\n但是在某些情况下你可能希望使用其它数据渠道，为此，你可以使用SlimeLoader接口实现\nSlimeLoader是用于从特定数据渠道加载世界的类。在使用SlimeLoader接口时请先查阅文档，文档中包含需要内容\n你还可以查阅FlieLoader类以获取SlimeLoader的示例\n一旦你有了自己的SlimeLoader，请不要忘记注册它\nSlimePlugin plugin = (SlimePlugin) Bukkit.getPluginManager().getPlugin(\"SlimeWorldManager\");\n\nplugin.registerLoader(\"my_data_source\", new MyCustomSlimeLoader());复制代码\n\n最后？理所当然地给予人气金粒\n\n\n[groupid=1511]Server CT[/groupid]",
    "replies": [
        {
            "author": "X836696023",
            "timestamp": 1567043220,
            "txt_content": "插件很好用，虽然节省了磁盘占用，但是提高了内存占用吧"
        },
        {
            "author": "飞皇之圣",
            "timestamp": 1568185860,
            "txt_content": "不知道是我用的姿势不对还是怎么回事，反正就是不能把已有的世界转换成相应的格式，所以还是顶上去看看有没有高手能解决吧"
        },
        {
            "author": "Catnies",
            "timestamp": 1574960040,
            "txt_content": "说实话，实际的作用其实并不是很大吧。。。\n如果这款插件能在转换后实现一些与众不同的功能的话\n那就非常的有意思了"
        },
        {
            "author": "q2529608758",
            "timestamp": 1584232020,
            "txt_content": "这个网站也不需要科学上网啊"
        }
    ]
}