{
    "title": "1.NMS简介",
    "author": "asdfg25855",
    "replyCount": 4,
    "timestamp": 1471511640,
    "txt_content": " 本帖最后由 asdfg25855 于 2016-8-18 17:31 编辑 \n                        1.NMS简介\n\n各位在处理某些插件的报错的时候经常会发现包含net.minecraft.server.1.x.x_Rx\n的信息 即是我们要讲的NMS\nNMS是包net.minecraft.server的简称\n平时大家用的可能是官方提供的接口包org\n而除了以上这两个包外 服务端还有另一个包CraftBukkit\n\n1.三者大体关系\nCraftBukkit的类实现了org中的接口,而NMS的对象包含在CraftBukkit中\n比如:Org中的接口Player被CraftBukkit中的CraftPlayer实现,而CraftPlayer包含了NMS的EntityPlayer对象(如果晕的话,喝杯开水)\n\n2.对他们进行操作\nORG的接口和CraftBukkit的类之间可以强转 \nCraftBukkit对象通过特殊方法getHandle()获得NMS对象\nNMS对象通过getBukkitEntity()方法获得CraftBukkit对象\n\n一段代码:\npublic static net.minecraft.server.Entity getAsNms(org.bukkit.entity.Entity orge){\n                net.minecraft.server.Entity nmse;\n                org.bukkit.craftbukkit.v1_8_R3.entity.CraftEntity ce=(CraftEntity) orge;\n                nmse=ce.getHandle();\n                return nmse;\n        }\npublic static org.bukkit.entity.Entity getAsOrg(net.minecraft.server.Entity nmse){\n                org.bukkit.entity.Entity orge;\n                org.bukkit.craftbukkit.v1_8_R3.entity.CraftEntity ce=(CraftEntity)nmse.getBukkitEntity();\n                orge=ce;\n                return orge;\n        }\n\nSo 我们可以从上获得信息:(以下简称CraftBukkit为CB)\n1.三者是共通的\n2.CB与NMS对象用过方法互访\n\n3.nms类命名规则:\n实体:nms会为所有实体加上-Entity前缀以区分\n如:EntityPlayer EntityArrow\n方块:nms会为所有方块加上-Block前缀以区分\n如:BlockBeacon BlockBed\n包:nms会为所有包加上-Packet前缀以区分\n如:PacketPlayOutNamedSoundEffect PacketPlayOutEntity\n大体的看,从类名即可推测大部分类的属\n4.内剖\n以下是对nms下的Entity的部分截取\n public abstract class Entity\n/*      */   implements ICommandListener {\n/*      */   private static final int CURRENT_LEVEL = 2;//正常变量\n/*      */   private static int entityCount;//正常变量\n/*      */   private int id;//正常变量\n/*      */   public double j;//单字母变量\n/*      */   public boolean k;//单字母变量\n/*      */   public Entity passenger;//正常变量\n/*      */   public Entity vehicle;//正常变量\n/*      */   public World world;//正常变量\n/*      */   public int getId(){//正常方法\n/*  129 */     return this.id;\n/*      */   }\n/*      */ \n/*      */   public void d(int i) {//单字母方法\n/*  133 */     this.id = i;\n/*      */   }\nNMS类中的变量和方法普通情况下分为两种\n一种是未经混淆等加密操作的正常方法和变量\n一种是处理后的单字母变量和单字母方法 需要配合MCP解读\n\n\n\n5.余话\n请注意，有时在调用nms时，若出现空指针一类的错误,则会使服务器主线崩溃\n导致服务器关闭,所以在写调用nms的代码时务必谨慎 如果能正确的运用nms 能为插件润色不少,但nms只是一个添色的工具,主画板还是org\n\n\n\n\n该教程不定期更新.8(好气啊,写个帖的时间和重新排版的时间一样多)\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "JackC92",
            "timestamp": 1471677840,
            "txt_content": "nms看起来是个好东西..可以做好多好玩的样子"
        },
        {
            "author": "RE_OVO",
            "timestamp": 1483149960,
            "txt_content": "说起NMS，反射大法就要跳出来来装逼了"
        },
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1483155240,
            "txt_content": "jebme 发表于 2016-12-31 10:06\n说起NMS，反射大法就要跳出来来装逼了\n反射现在装不了了。我加了你的那个群，简直了"
        },
        {
            "author": "q88724653",
            "timestamp": 1493442060,
            "txt_content": "NMS如何做到在一个插件添加多个服务端的版本，做到多版本兼容\n"
        }
    ]
}