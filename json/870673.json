{
    "title": "Forge写的GUI界面数组越界",
    "author": "Tale丿神话",
    "replyCount": 1,
    "timestamp": 1559456880,
    "txt_content": " 本帖最后由 ok1120137764 于 2019-6-2 14:30 编辑 \n\n不知道什么原因 我拦截打开背包 然后把背包界面替换成我自己写的gui界面然后点击一个格子 会有数组越界异常 下面放代码\n监听类\n\npackage mc.modu.tale_sh.modugui;\n\nimport mc.modu.tale_sh.modugui.guis.GuiBackpack;\nimport net.minecraft.client.Minecraft;\nimport net.minecraft.client.gui.Gui;\nimport net.minecraft.client.gui.inventory.GuiChest;\nimport net.minecraft.client.gui.inventory.GuiInventory;\nimport net.minecraft.client.renderer.GlStateManager;\nimport net.minecraft.entity.player.EntityPlayer;\nimport net.minecraft.util.ResourceLocation;\nimport net.minecraft.util.math.BlockPos;\nimport net.minecraft.world.World;\nimport net.minecraftforge.client.event.GuiOpenEvent;\nimport net.minecraftforge.client.event.RenderGameOverlayEvent;\nimport net.minecraftforge.common.MinecraftForge;\nimport net.minecraftforge.fml.common.eventhandler.SubscribeEvent;\nimport net.minecraftforge.fml.common.network.FMLNetworkEvent;\nimport org.lwjgl.opengl.GL11;\n\nimport java.awt.*;\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.util.*;\nimport java.util.List;\n\npublic class EventLoader {\n    private static final String TEXTURE_PATH = ModuGui.MOD_ID + \":\" + \"textures/gui/container/hatred.png\";\n    private static final ResourceLocation TEXTURE = new ResourceLocation(TEXTURE_PATH);\n\n    public EventLoader() {\n        MinecraftForge.EVENT_BUS.register(this);\n    }\n\n    @SubscribeEvent\n    public void onGuiOpen(GuiOpenEvent event) {\n        if (event.getGui() instanceof GuiInventory) {\n            event.setGui(new GuiBackpack(Minecraft.getMinecraft().player));\n        }\n    }\n}复制代码\n\nGUI类\n\npackage mc.modu.tale_sh.modugui.guis;\n\nimport mc.modu.tale_sh.modugui.ModuGui;\nimport mc.modu.tale_sh.modugui.container.BackpackContainer;\nimport net.minecraft.client.gui.Gui;\nimport net.minecraft.client.gui.inventory.GuiContainer;\nimport net.minecraft.client.renderer.GlStateManager;\nimport net.minecraft.entity.player.EntityPlayer;\nimport net.minecraft.util.ResourceLocation;\n\nimport java.awt.*;\n\npublic class GuiBackpack extends GuiContainer {\n    private static final String TEXTURE_PATH = ModuGui.MOD_ID + \":\" + \"textures/gui/container/backpack.png\";\n    private static final ResourceLocation TEXTURE = new ResourceLocation(TEXTURE_PATH);\n    private double scale;\n\n    public GuiBackpack(EntityPlayer player) {\n        super(new BackpackContainer(player));\n        scale = 0.3;\n        this.xSize = (int) Math.ceil(733 * scale);\n        this.ySize = (int) Math.ceil(1000 * scale);\n    }\n\n    @Override\n    public void initGui() {\n        super.initGui();\n    }\n\n    @Override\n    protected void drawGuiContainerBackgroundLayer(float partialTicks, int mouseX, int mouseY) {\n        int screenMouseX = mouseX - guiLeft;\n        int screenMouseY = mouseY - guiTop;\n        drawString(mc.fontRenderer, mouseX + \" \" + mouseY, 50, 50, Color.WHITE.getRGB());\n        drawString(mc.fontRenderer, screenMouseX + \" \" + screenMouseY, 50, 60, Color.WHITE.getRGB());\n        GlStateManager.pushMatrix();\n        mc.getTextureManager().bindTexture(TEXTURE);\n        GlStateManager.translate(guiLeft, guiTop, 0);\n        GlStateManager.scale(0.306, scale, scale);\n        GlStateManager.enableBlend();\n        GlStateManager.blendFunc(GlStateManager.SourceFactor.SRC_ALPHA, GlStateManager.DestFactor.ONE_MINUS_SRC_ALPHA);\n        GlStateManager.color(1.0F, 1.0F, 1.0F, 1F);\n        //画背景\n        Gui.drawModalRectWithCustomSizedTexture(0, 0, 0, 0, 733, 1000, 856, 1000);\n        GlStateManager.disableBlend();\n        GlStateManager.popMatrix();\n    }\n}复制代码\n\n容器类\n\npackage mc.modu.tale_sh.modugui.container;\n\nimport net.minecraft.entity.player.EntityPlayer;\nimport net.minecraft.entity.player.InventoryPlayer;\nimport net.minecraft.inventory.Container;\nimport net.minecraft.inventory.IInventory;\nimport net.minecraft.inventory.InventoryBasic;\nimport net.minecraft.inventory.Slot;\nimport net.minecraftforge.items.ItemStackHandler;\nimport net.minecraftforge.items.SlotItemHandler;\n\npublic class BackpackContainer extends Container {\n    public ItemStackHandler items = new ItemStackHandler(45);\n\n    public BackpackContainer(EntityPlayer player) {\n        for (int i = 0; i < 5; i++) {\n            for (int j = 0; j < 9; j++) {\n                addSlotToContainer(new SlotItemHandler(items, i * 9 + j, 12 + j * 23, 41 + i * 22));\n            }\n        }\n        for (int i = 0; i < 4; i++) {\n            for (int j = 0; j < 9; j++) {\n                addSlotToContainer(new Slot(player.inventory, i * 9 + j, 12 + j * 23, 171 + i * 23));\n            }\n        }\n    }\n\n    @Override\n    public boolean canInteractWith(EntityPlayer playerIn) {\n        return true;\n    }\n}复制代码\n\n\n\n异常\n\n[Server thread/FATAL]: Error executing task\njava.util.concurrent.ExecutionException: java.lang.IndexOutOfBoundsException: Index: 67, Size: 46\n        at java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[?:1.8.0_191]\n        at java.util.concurrent.FutureTask.get(FutureTask.java:192) ~[?:1.8.0_191]\n        at net.minecraft.util.Util.runTask(Util.java:30) [Util.class:?]\n        at net.minecraft.server.MinecraftServer.updateTimeLightAndEntities(MinecraftServer.java:754) [MinecraftServer.class:?]\n        at net.minecraft.server.MinecraftServer.tick(MinecraftServer.java:699) [MinecraftServer.class:?]\n        at net.minecraft.server.integrated.IntegratedServer.tick(IntegratedServer.java:156) [IntegratedServer.class:?]\n        at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:548) [MinecraftServer.class:?]\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]\nCaused by: java.lang.IndexOutOfBoundsException: Index: 67, Size: 46\n        at java.util.ArrayList.rangeCheck(ArrayList.java:657) ~[?:1.8.0_191]\n        at java.util.ArrayList.get(ArrayList.java:433) ~[?:1.8.0_191]\n        at net.minecraft.inventory.Container.slotClick(Container.java:287) ~[Container.class:?]\n        at net.minecraft.network.NetHandlerPlayServer.processClickWindow(NetHandlerPlayServer.java:1168) ~[NetHandlerPlayServer.class:?]\n        at net.minecraft.network.play.client.CPacketClickWindow.processPacket(CPacketClickWindow.java:47) ~[CPacketClickWindow.class:?]\n        at net.minecraft.network.play.client.CPacketClickWindow.processPacket(CPacketClickWindow.java:12) ~[CPacketClickWindow.class:?]\n        at net.minecraft.network.PacketThreadUtil$1.run(PacketThreadUtil.java:21) ~[PacketThreadUtil$1.class:?]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_191]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_191]\n        at net.minecraft.util.Util.runTask(Util.java:29) ~[Util.class:?]\n        ... 5 more复制代码\n\n琢磨好久了 求大佬给点帮助\n\n",
    "replies": [
        {
            "author": "无归",
            "timestamp": 1559460120,
            "txt_content": "很好的帖子"
        }
    ]
}