{
    "title": "【CBL·K_bai】 制作一个显示总游戏时间的告示栏~ 【1.8 /stats query教程】",
    "author": "kongbaiyo",
    "replyCount": 10,
    "timestamp": 1423056960,
    "txt_content": " 本帖最后由 kongbaiyo 于 2015-2-5 10:26 编辑 \n\n====================前言====================\n\nsteam游戏平台上会显示游戏已玩的时长\n\n今天就在MC里复原一个~\n\n\n它会实时显示这张地图已经玩过的时间~\n\n------------------视频------------------\n\nhttp://www.bilibili.com/video/av1958673/\n[bili=1958673]1[/bili]\n\n======================原理解释======================\n\n\n\n\n/time query gametime\nquery翻译成中文是询问的意思\n这个指令可以获得整张地图从建立到现在所经过的gametick数\ngametick和现实生活中的秒的换算关系众所周知是\n20 gametick = 1 second\n通过/stats指令获取总游戏时间后\n再经过计分板operation的运算即可获得总游戏时间的天数 小时数 分钟数和秒数\n\n\n======================详细指令======================\n\n首先是用/stats建立命令方块的运行结果和计分板的联系\n\n\n\n位于x=914 y=56 z=-20处的 也就是它下面的命令方块内部的指令是:\n\n----------------------------\n/time query gametime\n----------------------------\n\n/stats命令将运行结果存入了time下的dtime玩家中\n\n接下来将总gametick数除以20就是总秒数\n总秒数存在tSec中，\n首先让tSec的值等于dtime的值才能运算, 因为dtime和命令方块建立了连接,\n其数值不能改变\n\n------------------------------------------------------------------------------------\n/scoreboard players operation tSec time = dtime time\n------------------------------------------------------------------------------------\n\n然后给tSec除以20\n先把20这个数存在gt里 MC里是没办法直接运算的\n注:MC计分板中的除是\"整除\"\n除法运算过后只保留商数而舍弃余数 并非四舍五入\n\n\n------------------------------------------------------------------------------------\n/scoreboard players set gt time 20\n/scoreboard players operation tSec time /= gt time\n------------------------------------------------------------------------------------\n\n这样得到的tSec就是总秒数了\n\n接下来算天数\n一天是24*60*60秒\n总秒数除以24*60*60 即可得到总天数\n\n\n------------------------------------------------------------------------------------\n/scoreboard players set d_day time 86400\n/scoreboard players operation day time = tSec time\n/scoreboard players operation day time /= d_day time\n------------------------------------------------------------------------------------\n\n然后是小时数\n1小时是3600秒 同理\n\n\n------------------------------------------------------------------------------------\n/scoreboard players set d_hour time 3600\n/scoreboard players operation hour time = tSec time\n/scoreboard players operation hour time /= d_hour time\n------------------------------------------------------------------------------------\n\n重要：\n只是这样算出的小时数是总小时数\n如果游戏天数比1天多\n那总小时数肯定是要大于24的了\n这样看着非常不科学 因此我们要将总小时数\n除以24求余数 得到的就是不足一天的小时数了\n就像时钟一样\n\n\n------------------------------------------------------------------------------------\n/scoreboard players set d_hour2 time 24\n/scoreboard players operation hour time %= d_hour2 time\n------------------------------------------------------------------------------------\n\n求分钟数也同理啦\n\n\n\n------------------------------------------------------------------------------------\n/scoreboard players set d_min time 60\n/scoreboard players operation min time = tSec time\n/scoreboard players operation min time /= d_min time\n/scoreboard players operation min time %= d_min time\n------------------------------------------------------------------------------------\n\n秒数这里有一点不同\n总秒数直接求除以60后的余数即可~\n\n------------------------------------------------------------------------------------\n/scoreboard players operation sec time = tSec time\n/scoreboard players operation sec time %= d_min time\n------------------------------------------------------------------------------------\n\n至此我们就获得了所有我们要显示的参数啦~\n最后再将它们显示在牌子上~\n用/blockdata实时更新牌子~\n\n------------------------------------------------------------------------------------\n/blockdata [x] [y] [z] {Text1:\"{score:{name:\\\"假玩家名\\\",objective:\\\"变量名\\\"}}\"}\n------------------------------------------------------------------------------------\n\n======================结语======================\n\n关于/stats里的QueryResult的应用\n就只有/time query和/gamerule了\n这里是一个小应用~\n欢迎大家继续讨论呀~\nPS.我觉得这个应用挺炫酷的233\n\n前置教程:[CBL·K_bai] \"见光死\"与\"安检门\"——/stats指令教程\nhttp://www.mcbbs.net/thread-399876-1-1.html\n[groupid=546]Command Block Logic[/groupid]",
    "replies": [
        {
            "author": "末影矿工",
            "timestamp": 1423057140,
            "txt_content": "空白声音吓死了！"
        },
        {
            "author": "sulu",
            "timestamp": 1423057860,
            "txt_content": "bbs大触就是多...."
        },
        {
            "author": "sulu",
            "timestamp": 1423058340,
            "txt_content": "请问lz一个小小小的问题...  那个展示框的字怎么弄.."
        },
        {
            "author": "1292029552",
            "timestamp": 1423058400,
            "txt_content": "大触说的话就只是拿来欣赏的。。。"
        },
        {
            "author": "pca006132",
            "timestamp": 1423059180,
            "txt_content": "沒想過用%"
        },
        {
            "author": "kongbaiyo",
            "timestamp": 1423101060,
            "txt_content": "pca006132 发表于 2015-2-4 22:13\n沒想過用%\n有时候还是挺有用的233\n可以用的比较巧妙XD"
        },
        {
            "author": "NuclearWolf",
            "timestamp": 1423118520,
            "txt_content": "求旁边的记分板怎么弄"
        },
        {
            "author": "pca006132",
            "timestamp": 1423124100,
            "txt_content": "NuclearWolf 发表于 2015-2-5 14:42\n求旁边的记分板怎么弄\nscoreboard objectives setdisplay sidebar 對象名（objective)"
        },
        {
            "author": "lzs1234",
            "timestamp": 1427613540,
            "txt_content": "还是没看懂这个模式的用处…难道想要连接time query和gamerule两个指令和记分板只能用这个模式？"
        },
        {
            "author": "chyx",
            "timestamp": 1496635800,
            "txt_content": "运算, 因为dtime和命令方块建立了连接,\n其数值不能改变\n\n\n我觉得是可以改变的\nstats的作用相当于每次带有stats的cb执行指令 就顺便运行一个scoreboard set指令\n\n@玄素 @pca006132 "
        }
    ]
}