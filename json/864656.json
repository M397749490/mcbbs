{
    "title": "【教程】自建资源库，让你的服务器高效化！",
    "author": "LittleHei",
    "replyCount": 10,
    "timestamp": 1557565320,
    "txt_content": " 本帖最后由 987987 于 2019-7-17 22:20 编辑 \n\n序言\n  你是否遇到过以下情况？\n  1.新浪图床限制了外链使用，很多图片都无法正常显示了，而sm.ms/upload.cc等知名免费图床速度实在是让人难以忍受，新兴图床虽速度快，但有数据不稳定的风险和今后限速的可能，若用一些市面上商业化的付费图床，价格又极其昂贵。  2.百度网盘限速让你备份服务器难，玩家下载客户端难？  3.想要用xx图片Mod/插件应用于服务器，却苦于服务器带宽过小，体验不佳？  4.规划了服务器官网，使用高规格带宽云服务器价格过于昂贵，无法上线官网？\n  如果有，那么恭喜你，在看完这篇帖子之后，你的大部分问题都会得到解决！\n\n\n序言\n  你是否遇到过以下情况？\n  1.新浪图床限制了外链使用，很多图片都无法正常显示了，而sm.ms/upload.cc等知名免费图床速度实在是让人难以忍受，新兴图床虽速度快，但有数据不稳定的风险和今后限速的可能，若用一些市面上商业化的付费图床，价格又极其昂贵。  2.百度网盘限速让你备份服务器难，玩家下载客户端难？  3.想要用xx图片Mod/插件应用于服务器，却苦于服务器带宽过小，体验不佳？  4.规划了服务器官网，使用高规格带宽云服务器价格过于昂贵，无法上线官网？\n  如果有，那么恭喜你，在看完这篇帖子之后，你的大部分问题都会得到解决！\n\n\n一、主要用途\n先来看一下自建资源库对服务器的主要用途\n  1.服务器宣传贴图片（如Mcbbs服务器版）；  2.分享文件；  3.各类联网型图片插件/Mod；  4.服务器官网资源加速 。\n   还有更多，在应用过程中可以根据自己所需进行改动。眼见为实，本人的搬运帖全部图片均在资源库上，体验可见下帖。https://www.mcbbs.net/thread-848463-1-1.html\n\n\n二、准备搭建\n1.保证每个月能有35元或以上的资金投入到资源库中。\n2.一个经过备案的域名（例如.com/.net/.cn ……）因为下面教程所需，建议从阿里云购入域名，避免转出流程带来的不必要时间消耗。如果不知道怎么买阿里云的域名，这里给一个教程如果是阿里云的域名但不知道如何备案，请见这里\n3.会动鼠标、会按键盘\n请务必满足以上3个条件后再继续浏览本帖！\n\n\n三（1）、搭建步骤①——创建Bucket\nOSS-Bucket是我们一切资源的存储点及发出点，了解如何创建一个Bucket是自建资源库最基础的步骤，本章，我会讲解如何正确创建一个Oss-Bucket\n\n1.在登录阿里云后，点击主页面右上角——控制台\n2.鼠标滑动到左边，展开菜单，点击——对象存储OSS若无，请使用上方搜索，输入“OSS”即可\n3.点击——左上角“+”\n4.按需填写Bucket名称，注意读写权限为“私有”防止滥用\n5.点击这里购买一个9元一年的40GB存储包按需购买更大的存储包，40GB对本人来说完全够用\n\n至此，一个崭新的资源Bucket就创建完成了但还不能用，为什么？\n1.若直接使用OSS进行资源传输，产生的费用将是巨大且无法负担的（本人3天10G OSS流量流出惨剧以身试法）2.使用OSS直接进行资源传输，必须设置读写权限为“公共读”，无法保证不被滥用\n综上所述，我们不能直接利用OSS进行数据传输，那么怎么办呢？\n请见：搭建步骤②——部署CDN\n\n\n三（2）、搭建步骤②——部署CDN\n在讲解部署CDN之前，我觉得讲述一下CDN基础原理是有必要的。\n先来看一下直接使用OSS的资源分发过程：可见OSS分别对A、B、C、D、E进行了单独的资源分发，多次且重复。\n再来看一下使用CDN后的资源分发过程：可见OSS仅与CDN产生了交互，由CDN进行了A、B、C、D、E的资源分发\n这中间产生的价格差是极大的，以流量计费，我这里给出两个数据这里不计算回源流量，不用担心，回源流量价格为0.15/G基本上不可能达到1G回源流量：指CDN向OSS提取数据到CDN进行缓存所产生的流量\nOSS+CDN（10G）= 0.24*10 = 2.4元OSS（10G）= 0.5*10 = 5元\n价格差了足足两倍之多！所以采用CDN是极其有必要的\n\n在了解CDN原理之后，就是学习如何部署CDN了\n1.在登录阿里云后，点击主页面右上角——控制台\n2.鼠标滑动到左边，展开菜单，点击——CDN若无，请使用上方的“搜索”，输入“CDN”即可\n3.一开始应该会叫你选择计费方式，这里给出选择方案：①：若有单个较大的资源，且经常被下载，请使用“按带宽计费”②：如果只是小资源传输，如图片传输，请使用“按流量计费”使用按流量计费，别忘记部署完CDN后购买流量包不用担心，可以根据个人实际情况在之后随时进行改动\n4.点击——域名管理——添加域名\n5.将源站类型改为“OSS域名”，将自定义OSS域名改为刚才创建Bucket的域名（可直接点击更改）其他按自身所需更改即可注意加速域名，不要填主域名（如arkepic.com）请务必使用子域名（例如test.arkepic.com）\n6.第一次使用CDN，会遇到信息审核，请耐心等待通过通过后，回到“域名管理”，将对应CNAME信息复制这里以我新建的一个子域名为例子\n鼠标滑动到左边，展开菜单，点击——域名若无，请使用上方的“搜索”，输入“域名”即可\n直接点击你的域名\n点击——“域名解析”\n点击——“添加记录”\n输入相关信息记录类型改为——CNAME主机记录——之前填写的加速域名（如test.arkepic.com就写test即可）记录值——前面复制的CNAME信息别改解析线路！别改解析线路！别改解析线路！若TTL为10分钟，那么10分钟后就可以使用了以picture.arkepic.com为例检测方法：运行CMD，输入ping picture.arkepic.com\n7.回到CDN的“域名管理”，点击对应域名——“管理”将“回源配置”内的“私有Bucket回源”打开\n\n至此，CDN配置完毕，那么如何使用呢？\n请见：开始使用①——基础应用\n\n\n四（1）、开始使用①——基础应用\n在这一章节里，我将会讲述一些基础应用步骤请看仔细，特别是第4步\n\n1.在登录阿里云后，点击主页面右上角——控制台\n2.鼠标滑动到左边，展开菜单，点击——对象存储OSS若无，请使用上方搜索，输入“OSS”即可\n3.以我本人的名为arkepic的bucket为例进入其中的“文件管理”上传文件——即为上传一个文件新建目录——可看做创建一个文件夹\n4.我上传一个名为logobd2.png的图片并点击其名称将“自有域名”从“不使用自有域名”改为“picture.arkepic.com”其中“picture.arkepic.com”为“arkepic”对应配置的CDN域名若不进行相关操作便无法使用CDN，资源将直接从OSS-Bucket进行数据传输！对于链接有效时间，其实不用管将下方“URL”内的链接仅复制到“?”之前即可，达成永久效果以本图为例即为，“https://picture.arkepic.com/logobd2.png”作为图床链接使用即可↑成功案例↑分享下载文件同理，复制到“?”前的链接给对方即可\n\n至此，基础应用已然不成问题但有些时候我们不想让自己的资源随便被盗用到其他网站上，怎么办呢？\n请见：开始使用②——基础安全\n\n\n四（2）、开始使用②——基础安全\n显然，我们不想让自己的资源白白分享给一些别有用心的人那么如何实现控制资源的显示呢？当我们使用CDN后，因为CDN会直接从OSS-Bucket取得资源所以从CDN获取的资源可以绕过OSS层面的防护这也导致了必须从CDN设置入手\n\n1.在登录阿里云后，点击主页面右上角——控制台\n2.鼠标滑动到左边，展开菜单，点击——CDN若无，请使用上方的“搜索”，输入“CDN”即可\n3.进入“域名管理”，点击对应域名——“管理”进入“访问控制”内的——“Refer防盗链”——点击“修改配置”如果我想让我的资源只能在“www.arkepic.com”和“www.mcbbs.net”上显示①选择白名单模式②输入www.arkepic.com后按回车③再输入www.mcbbs.net不用输入https/httpss\n如果需要类似于服务器客户端下载的功能，而自己也没有官网那么请将“允许通过浏览器地址栏直接访问资源URL”勾上\n\n\n尾言\n希望各位服主能够通过这个教程，提升自己服务器的效率和专业化程度！也感谢你们能够看到这里，谢谢！\n最后更新：2019.5.11未经本人允许禁止一切转载行为[groupid=1306]Bone Studio[/groupid]",
    "replies": [
        {
            "author": "3208447506",
            "timestamp": 1557566160,
            "txt_content": "............................"
        },
        {
            "author": "zjjxs",
            "timestamp": 1557569220,
            "txt_content": "先收藏了，目前用的腾讯云，好像比阿里云贵一点。\n\n另外。。有部分链接出错了。。"
        },
        {
            "author": "LittleHei",
            "timestamp": 1557569760,
            "txt_content": "zjjxs 发表于 2019-5-11 18:07\n先收藏了，目前用的腾讯云，好像比阿里云贵一点。\n\n另外。。有部分链接出错了。。 ...\n是那个“购买存储包”的吗，我看了下现在应该可以了，还有其他链接出错吗\n可能是编辑的时候出了点问题，如果有的话务必回复哦，谢谢！"
        },
        {
            "author": "。—。",
            "timestamp": 1557579840,
            "txt_content": "这样部署的话一个月需要投入多少预算呢？"
        },
        {
            "author": "LittleHei",
            "timestamp": 1557581340,
            "txt_content": "a6809936 发表于 2019-5-11 21:04\n这样部署的话一个月需要投入多少预算呢？\n本人的搬运帖都用这套系统进行图片传输\n每个月大概20元左右的开销\n如果应用面更广的话可能开销会增大，但不会太高，选择合适的计费方式是最为重要的"
        },
        {
            "author": "xmdhs",
            "timestamp": 1558105140,
            "txt_content": "可以看看这个软件，更加方便\n\nhttps://github.com/Molunerfinn/PicGo"
        },
        {
            "author": "rooke_zb",
            "timestamp": 1558752000,
            "txt_content": " 本帖最后由 brooke1999 于 2019-5-25 10:42 编辑 \n\n域名是不是必须要经过备案才能添加到CDN中？加速域名那一栏是不是随便填个前缀+已有域名就ok了？\n我的域名还没备案，添加至cdn中时显示domain name is not registered是不是还没备案的意思？\n备案那里我搞不太懂，选择云服务那里该选哪个或者还需要什么操作，那一栏我无论选哪个都没有可以选择的相应选项还是说我还要建一个网站来备案？\n\n感谢了"
        },
        {
            "author": "LittleHei",
            "timestamp": 1558759020,
            "txt_content": "brooke1999 发表于 2019-5-25 10:40\n域名是不是必须要经过备案才能添加到CDN中？加速域名那一栏是不是随便填个前缀+已有域名就ok了？\n我的域名 ...\n前提准备内有写明“经备案域名”\n如果想要钻空子，可以选择非大陆加速绕过备案程序，但费用会上升"
        },
        {
            "author": "rooke_zb",
            "timestamp": 1559393220,
            "txt_content": " 本帖最后由 brooke1999 于 2019-6-1 20:56 编辑 \n\n这东西就是个无底深坑我发现了\n一开始只是想修复原先保存在微博相册的图，于是看着楼主的教程边学边搞，然后发现域名未经备案只能选择费用更高的国外线路进行cdn加速，于是乎开始捣鼓域名备案，然后发现备案必须绑定一个实例才能备案，于是又去搞了一个ECS，然后备案又需要提供网站信息，于是又去学了建站基础知识，写了一个网页，顺利提交了备案，然后发现自己对html和css等web开发很感兴趣，便开始了我的web开发深坑（当然现在仅仅停留在十分浅显的阶段）。。。逐渐偏离主题.jpg\n喏，这是初步成果\n\n啊不对不对，放错图了#滑稽\n\n总之还是十分感谢楼主的教程\n\n\n\n\n\nfile_1559393141000.jpg (267.69 KB, 下载次数: 0)\n\n下载附件\n\n2019-6-1 20:45 上传\n\n\n\n\n\n\n\n\nfile_1559392183000.jpg (257.16 KB, 下载次数: 0)\n\n下载附件\n\n2019-6-1 20:29 上传\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "LittleHei",
            "timestamp": 1559454000,
            "txt_content": "brooke1999 发表于 2019-6-1 20:47\n这东西就是个无底深坑我发现了\n一开始只是想修复原先保存在微博相册的图，于是看着楼主的教程边学边搞，然 ...\n某宝阿里云备案码1元一个..."
        }
    ]
}