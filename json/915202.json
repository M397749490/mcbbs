{
    "title": "[编程|信息]LangSwitch —— 为你的插件提供多语言环境[1.8-1.14]",
    "author": "Jovel",
    "replyCount": 3,
    "timestamp": 1569153900,
    "txt_content": " 本帖最后由 Jovel 于 2019-9-22 20:16 编辑 \n\nLangSwitch\nLangSwitch提供了一个自动的插件翻译系统，这个插件为所有Sponge插件提供自动的本土化翻译服务，作为开发者，你可以调用它给你的插件提供多语言翻译。作为用户，你也可以通过它自动翻译一些符合格式要求的插件。\n\n功能\n关于基础：对目前已有的，符合语言文件路径要求的插件进行多语言翻译。更多特性：在进行插件开发时，可以调用该插件API自动生成你的插件的多语言文件。\n\n\n关于插件配置您可以通过两种方式使用该插件。\n     A.集成：如果您已经有一个插件，但该插件未提供本土化语言服务，您在某些情况下可以直接使用它。     B.调用：作为插件开发者，您可以在开发期间调用该插件提供的API生成多语言文件。\nA.集成说明将插件放置在 mods 文件夹中并重启。如果您的插件符合下列要求：语言目录路径格式为 <SERVER>\\config\\<PLUGIN>\\Lang\\<LOCALE>.lang，语言文件以 语言_国家 命名，类似 zh_CN、en_US 等。同时，语言文件内遵循文本对应格式 Translation Path:Translation Text ，所有的注释均适用 # 为标识符。那么该插件会自动将您现有的语言文件翻译为本土化语言，在config中进行设置即可实现。\n\nB.调用说明将插件放置在 mods 文件夹中并重启。作为开发者，可以使用该插件提供的API，类似与经济插件的通信。private <b>LanguageService languageService = null;</b>\n@Listener\npublic void onChangeServiceProvider(ChangeServiceProviderEvent event) {\n  if (event.getService().equals(LanguageService.class)) {\n    languageService = (LanguageService) event.getNewProvider();\n    languageService.registerTranslation(this); //add this plugin to the translation provider\n  }\n}\npublic static LanguageService getTranslator() { return instance.languageService; }复制代码\n调用 languageService.registerTranslation(this) 方法实现对回显输出文本的翻译。如果您的插件要使用翻译功能，请在mcmod.info中添加依赖 \"dependencies\": [ \"langswitch\" ]，声明关联。调用时，replace方法返回翻译过后的文本，resolve返回翻译的状态，如果失败则返回为空。Localized<String> localized = translation.local(\"cmd.success\");\nlocalized.replace(\"%name%\", displayName);\nplayer.sendMessage(Text.of(localized.resolve(player).orElse(\"[翻译文本]\")));复制代码如果您需要翻译过后的文本是可以点击的链接，那么应该像下面这样。Localized<Text> localized = translation.localText(\"cmd.success\");\nlocalized.replace(\"%name%\", Text.of(TextColors.GREEN, displayName));\nplayer.sendMessage(localized.resolve(player).orElse(Text.of(\"[翻译文本]\")));复制代码\n\n\n关于插件配置\n配置文件详解 langswitch.conf# 本土化语言种类，即翻译后的语言。\nDefaultLocale=en_US\n\n# 是否开启日志，反馈翻译是否成功等信息。\nVerboseLogging=true\n\n# 检查更新。\nVersionChecker=false复制代码\n\n\nJitpack的配置\n在Gradle中添加下列代码即可实现全局调用repositories {\n    ...\n    maven { url \"https://jitpack.io\" }\n}\ndependencies {\n    ...\n    compile 'com.github.DosMike:LangSwitch:master-SNAPSHOT'\n}复制代码\n当您作为开发者使用该插件的时候，该插件应默认成为前置插件。\n\n插件更新记录\n*                  V1.5* 更新依赖项\n* 修复了编辑插件配置文件问题\n\n*                  V1.4.1\n* 更新为新的库存结构\n* 更新依赖项\n\n*                  v1.4\n* 修复日志输出的一些显示问题\n\n\n*                  V1.4.3\n* 更多修复\n* 修复时间戳偶尔可能出现错误\n\n\n\n资源下载\n插件下载地址：原帖下载",
    "replies": [
        {
            "author": "12321wangjiawei",
            "timestamp": 1569155520,
            "txt_content": "多国语言的话感觉还蛮有用的，一会儿试一下。支持！"
        },
        {
            "author": "1394112041",
            "timestamp": 1569160500,
            "txt_content": "可以翻译的话  对不会英语的腐竹来说很实用呀2333"
        },
        {
            "author": "dark7",
            "timestamp": 1577235540,
            "txt_content": "似乎对没有语言文件的不怎么管用呢\n\n\n某些开发者的代码不够规范啊"
        }
    ]
}