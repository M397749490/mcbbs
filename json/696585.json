{
    "title": "防止坏人盗用游戏ID",
    "author": "微尘",
    "replyCount": 17,
    "timestamp": 1496740020,
    "txt_content": " 本帖最后由 微尘 于 2017-6-6 18:00 编辑 \n\n    一般服务器稍微大点之后都得面对这个问题(正版服务器无视)，防止坏人盗用op的游戏id或者VIP的游戏id等等。现有的解决方案一般是用AuthMe等登录插件，想省事的用AuthMe登录器插件是最好的，唯一的缺点就是第一次登录器游戏得用/register注册，以后登录也要输入之前注册的口令。今天我们讨论并实现另外一种防止游戏ID盗用的手段，这种手段有个好处就是可以做到对于玩家来说完全透明。\n    思路其实很简单，如果玩家在进入服务器之前我们可以对玩家id进行一些校验甚至修正就能做到了。比如对玩家id做数字摘要之后带给服务器，服务器如果发现摘要不正确就T掉玩家。\n\n    为了最及时地检测或者修正玩家的id，我们得在玩第一个报告玩家id的数据包阶段做事情（不然玩家的id就已经被记录到了系统里），这个阶段就是Login Start，可以在wiki.vg上查到这个阶段的报文信息：\n\n\n\n\n\n\n\n\n130662AE-4716-497A-B202-E9593AFE165A.png (55.51 KB, 下载次数: 1)\n\n下载附件\n\n2017-6-6 17:34 上传\n\n\n\n\n\n\n\n\n    可以看到玩家的id是一个16字节长的字符串，我们如果能将玩家的原始id混淆编码放到这16个字节里，一般人就很难伪造他人的id。\n\n\n    要操作mc网络数据包我们可以借助ProtocolLib这个插件，在收到Login Start包的时候进行处理。\n\n\n\n\n\n\n7602A9D9-EBD7-4130-9AF3-6DB4BD68F7BD.jpg (340.18 KB, 下载次数: 0)\n\n下载附件\n\n2017-6-6 17:51 上传\n\n\n\n\n\n\n\n红线覆盖部分的代码基本就是对混淆的玩家id进行反解，比如mc启动器传过来的玩家id为S8Xk3t3EsqoSe7R0，实际反解之后是zig，服务器里面实际使用的也将是zig。\n\n玩家id的混淆规则只要不流出去，我们在登录器使用的混淆玩家id也将很难被攻破，盗用他人的游戏id也将不会发生。\n\nPS: 我们是一个叫fantastyboys(幻徒)的开发者团，这个团伙正在开发一些很酷的项目，如果你想做一些很酷的事情，欢迎PM\n",
    "replies": [
        {
            "author": "Yaossg",
            "timestamp": 1496760780,
            "txt_content": "你的红线什么都没有挡住我全看见了\n麻烦打马赛克好吗=。="
        },
        {
            "author": "0x3B800001",
            "timestamp": 1496761800,
            "txt_content": "说得好，我选择authlib-agent\n另外看了半天没看懂你的意思。。"
        },
        {
            "author": "微尘",
            "timestamp": 1496833020,
            "txt_content": "丶皇天 发表于 2017-6-6 23:10\n说得好，我选择authlib-agent\n另外看了半天没看懂你的意思。。\n。。。这个真好用"
        },
        {
            "author": "SmallFatCYW",
            "timestamp": 1496838720,
            "txt_content": " 本帖最后由 SmallFatCYW 于 2017-6-7 20:36 编辑 \n\n你的意思是在启动器那边先加盐混淆一次ID，然后服务器这边再解一次？然后比对？还是哪怕ID一样，启动器传过来的字符串也不一样（因为有不同的UUID？）这个意思？表示没有理解ID那块。。。"
        },
        {
            "author": "微尘",
            "timestamp": 1496840220,
            "txt_content": "SmallFatCYW 发表于 2017-6-7 20:32\n你的意思是在启动器那边先加盐混淆一次ID，然后服务器这边再解一次？然后比对？还是哪怕ID一样，启动器传过 ...\n启动器把玩家id加盐混淆，服务器解开"
        },
        {
            "author": "微尘",
            "timestamp": 1496840280,
            "txt_content": "姚氏帅哥 发表于 2017-6-6 22:53\n你的红线什么都没有挡住我全看见了\n麻烦打马赛克好吗=。=\n马赛克是什么。。"
        },
        {
            "author": "Yaossg",
            "timestamp": 1496841000,
            "txt_content": "微尘 发表于 2017-6-7 20:58\n马赛克是什么。。\n像这样：\n"
        },
        {
            "author": "言灵乀Poison",
            "timestamp": 1496896860,
            "txt_content": "没太懂你打算怎么做到客户端登录时发混淆后的名字\n如果不需要mod配合的话，就得玩家在启动器输，让玩家用一堆乱码一样的字母数字登录太不友好，而且玩家客户端识别的自身游戏ID是那串乱码，感觉可能出事\n;\n如果需要mod配合的话，那就是说玩家可以在启动器输原始ID登录咯，那熊孩子也可以在启动器输OP的ID登录啊\n;\n如果是mod配合+玩家手动输识别码(识别码为统称，这里指混淆用的盐或其它与识别玩家身份相关的字符)，倒不如直接弄成外置登录好了…"
        },
        {
            "author": "微尘",
            "timestamp": 1496897580,
            "txt_content": "姚氏帅哥 发表于 2017-6-7 21:10\n像这样：\nsoga。。"
        },
        {
            "author": "微尘",
            "timestamp": 1496898060,
            "txt_content": " 本帖最后由 ustc_zzzz 于 2017-6-8 14:29 编辑 \n言灵乀Poison 发表于 2017-6-8 12:41\n没太懂你打算怎么做到客户端登录时发混淆后的名字\n如果不需要mod配合的话，就得玩家在启动器输，让玩家用一 ...\n要做到对玩家透明确实是需要三方登录器的。"
        },
        {
            "author": "1392684709",
            "timestamp": 1496898660,
            "txt_content": "其实我比较好奇以后网易会怎么做到避免玩家盗用id"
        },
        {
            "author": "微尘",
            "timestamp": 1496899260,
            "txt_content": "1392684709 发表于 2017-6-8 13:11\n其实我比较好奇以后网易会怎么做到避免玩家盗用id\n拭目以待吧"
        },
        {
            "author": "cxh20000210",
            "timestamp": 1496923980,
            "txt_content": "第三方效验服务器也行"
        },
        {
            "author": "微尘",
            "timestamp": 1496983920,
            "txt_content": "cxh20000210 发表于 2017-6-8 20:13\n第三方效验服务器也行\n诶。是的。。这里只是提出一种新的技术方案"
        },
        {
            "author": "宅宅蛙",
            "timestamp": 1499186880,
            "txt_content": " 本帖最后由 homeforg 于 2017-7-6 03:33 编辑 \n\n这个功能我已经做出来了，不过不是写的插件而是直接改的核心。\n\n你可以看一下我给别人的这个回复，希望能帮助到你。\nhttp://www.mcbbs.net/forum.php?m ... 698733&pid=11958353"
        },
        {
            "author": "z2525625",
            "timestamp": 1499281740,
            "txt_content": "既然是可逆算法 .而且又是在登录器 加密的  .那就意味着可以破解\n还是用登录插件的方式 好  名字+密码"
        },
        {
            "author": "Pumpkincn",
            "timestamp": 1499414400,
            "txt_content": "我还是选择authme  简单方便美滋滋"
        }
    ]
}