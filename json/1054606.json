{
    "title": "关于CD系统",
    "author": "_XuanFsant_",
    "replyCount": 4,
    "timestamp": 1590908220,
    "txt_content": "想写一个类似技能cd系统的东西供以插件的某些功能使用，没什么好的思路，有没有一些比较好点的方法\n实现的内容大概就是在使用功能后进入cd，cd状态下再次使用会给提示\n\n",
    "replies": [
        {
            "author": "666885489",
            "timestamp": 1590910920,
            "txt_content": "定义一个Map，值记录时间戳，监听里减一下就行了"
        },
        {
            "author": "_XuanFsant_",
            "timestamp": 1590911040,
            "txt_content": "666885489 发表于 2020-5-31 15:42\n定义一个Map，值记录时间戳，监听里减一下就行了\n。。那个，我听得不是很懂，能具体解释一下吗"
        },
        {
            "author": "新科",
            "timestamp": 1590911220,
            "txt_content": " 本帖最后由 新科 于 2020-5-31 15:48 编辑 \n\n比如可以建立一个 map 存储玩家上一次释放技能(etc.)的时间戳:\nHashMap<UUID, Long> status = new HashMap<>();\n玩家成功释放技能的时候:status.put(player.getUUID(), System.currentTimeMillis());\n把玩家释放技能的时间存到 Map 里。\n以后释放技能之前都检查一下 System.currentTimeMillis() - status.get(player.getUUID()) 的值是否 >= 你的CD时间, 如果 < CD时间则说明间隔时间不够长, 那么就提示未到达CD并不执行技能逻辑。\n\n你还可以使用 Bukkit 的定时器, 设置定时器在指定时间之后清除某玩家的CD状态, 到时候先判断玩家是否处在CD中, CD状态用 Cache/Map 啥的, 存都可以存\n或者用 Cache 然后通过 setExpiryPolicyFactory 来通过指定过期时间的方式, 来判断玩家是否还在CD时间内。啊其实 Cache 类这个不太懂, 刚学的。"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1590913860,
            "txt_content": "Bukkit.runTaskLater"
        }
    ]
}