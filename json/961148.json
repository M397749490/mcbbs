{
    "title": "[已解决]1.12.2mod如何实现在熔炉（自己写的）工作状态下实现发出光亮",
    "author": "一个老萌新",
    "replyCount": 4,
    "timestamp": 1581815820,
    "txt_content": " 本帖最后由 一个老萌新 于 2020-2-16 21:08 编辑 \n\n自己写了一个高级熔炉，想要在熔炉工作时发出光亮。于是尝试判断熔炉是否在工作状态并在高级熔炉相应的Block类通过this.setLightLevel();来实现目的。但是在实际测试时，发现这种方**直接给所有blockstate的熔炉一个参数，结果是要么熔炉全部都会发出光亮，要么全部熔炉都不会发出光亮。查看了原版熔炉代码后发现，mojang直接将熔炉的工作状态与非工作状态分成两种不同的方块。但是由于高级熔炉涉及到许多已经设定好了的功能，如果要重做无疑会带来许多不必要的时间与精力的消耗。故求教，如何在高级熔炉处于工作状态时发出光亮。\n解决方法：覆盖public int getLightValue(IBlockState state, IBlockAccess world, BlockPos pos)\n或\npublic int getLightValue(IBlockState state, IBlockAccess world, BlockPos pos)方法并返回相对应的光照值",
    "replies": [
        {
            "author": "飞翔之歌",
            "timestamp": 1581834240,
            "txt_content": "首先，因为所有的高级熔炉都是引用一个Block类的，所以如果你直接用this.setLightLevel()当然会导致所有的熔炉都发亮。建议你建一个新的类继承于原本的熔炉的类，在那个类里setLightLevel()试一下，在工作时使用新的Block,工作后变成旧的Block。"
        },
        {
            "author": "清晨w",
            "timestamp": 1581834720,
            "txt_content": "可以考虑重写Block类里的public int getLightValue(IBlockState state)方法,依据传入的blockstate来判断光照\n如果需要更高级的可以重写public int getLightValue(IBlockState state, IBlockAccess world, BlockPos pos)方法(这是forge打的补丁)\n(版本Forge-1.12.2-14.23.5.2847)\n=====================\n源码是个好东西"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1581835020,
            "txt_content": "把你的关于高级熔炉的代码发出来。关于高级熔炉这东西，应该会用到关于GUI的。你可以在关闭GUI后检查是否在工作，如果在工作就调用那个方块的setLightLevel()函数。记得把源码发出来。如果没有GUI，建议赶紧学一学。"
        },
        {
            "author": "一个老萌新",
            "timestamp": 1581856740,
            "txt_content": " 本帖最后由 一个老萌新 于 2020-2-16 21:09 编辑 \n飞翔之歌 发表于 2020-2-16 14:37\n把你的关于高级熔炉的代码发出来。关于高级熔炉这东西，应该会用到关于GUI的。你可以在关闭GUI后检查是否在 ...\ngui是有，但这种方式的原理与我的方法相仿，都是指定了高级熔炉下所有blockstate的光亮值（已经实测过，这里就不贴代码了），解决方式应该是通过指定特定blockstate并指定光亮值"
        }
    ]
}