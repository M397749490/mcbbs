{
    "title": "[Java故障]任何服务器都无法连接",
    "author": "Kenhuey",
    "replyCount": 5,
    "timestamp": 1564235520,
    "txt_content": " 本帖最后由 Kenhuey 于 2019-7-28 00:31 编辑 \n\n问题描述\n『1』所有版本的Minecraft都无法进入任何服务器。包括LocalHost（本地服务器）。\n『2』服务器列表内的服务器状态一直处于Ping状态，且完全无法Ping通。包括LocalHost（本地服务器）。\n\n\n不想重装系统... ...\n\n\n已排除故障\n『1』非网络问题，尝试过电信与联通的宽带依然如此。且已尝试用手机流量共享热点仍不起效。\n『2』已尝试重新装Java8/7，尝试过1.7.10 与1.8-1.12.2等版本（包括Forge与原版），仍不起效。\n『3』已尝试dos命令<netsh winsock reset>，仍不起效。\n『4』已尝试编写简单的Java Socket连接，通讯成功（可以排除是Socket的问题）。\n『5』已排除服务器问题，因为无论是本地的还是云端的服务器都无法连接。（其他玩家连接正常）\n\n\n补充：\n『测试Socket的代码，随便复制的一段代码』\n// Server\npackage socket;\n\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class Server {\n        public static void main_(String[] args) {\n                BufferedReader br = null;\n                PrintWriter pw = null;\n                try {\n                        @SuppressWarnings(\"resource\")\n                        Socket socket = new ServerSocket(2000).accept();\n                        br = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n                        pw = new PrintWriter(socket.getOutputStream(), true);\n                        String s = br.readLine();\n                        System.out.println(\"client->server:\"+s);\n                        pw.println(\"server->client:\" + s);\n                } catch (Exception e) {\n                        e.printStackTrace();\n                } finally {\n                        try {\n                                br.close();\n                                pw.close();\n                        } catch (Exception e) {\n                        }\n                }\n        }\n}\n复制代码// Client\npackage socket;\n\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\n\npublic class Client {\n        public static void main_(String[] args) {\n                BufferedReader br = null;\n                PrintWriter pw = null;\n                try {\n                        final Socket socket = new Socket(\"localhost\", 2000);\n                        br = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n                        pw = new PrintWriter(socket.getOutputStream(), true);\n                        pw.println(\"Socket sent.\");\n                        String s = null;\n                        while (true) {\n                                s = br.readLine();\n                                if (s != null) {\n                                        break;\n                                }\n                        }\n                        System.out.println(s);\n                } catch (Exception e) {\n                        e.printStackTrace();\n                } finally {\n                        try {\n                                br.close();\n                                pw.close();\n                        } catch (Exception e) {\n                        }\n                }\n        }\n}\n复制代码// Entry\npackage socket;\n\npublic class Entry {\n        public static void main(String args[]) {\n                Thread th1 = new Thread() {\n                        @Override\n                        public void run() {\n                                Server.main_(null);\n                                super.run();\n                        }\n                };\n                Thread th2 = new Thread() {\n                        @Override\n                        public void run() {\n                                Client.main_(null);\n                                super.run();\n                        }\n                };\n                th1.start();\n                th2.start();\n                return;\n        }\n}\n复制代码输出结果\nclient->server:Socket sent.\nserver->client:Socket sent.复制代码『Minecraft Log日志在连接左右的输出(Forge带Mod 1.12.2。且因避嫌，IP域名改成了xxx)』\n最后stop非闪退，而是再无法连接后手动退出。所有版本的几乎都只提示高亮部分的请求连接的日志，输出无报错。\n[21:07:16] [Client thread/INFO] [Config]: [OptiFine] *** Reloading custom textures ***\n[21:07:16] [Client thread/INFO] [Config]: [OptiFine] RandomEntities: textures/entity/spider/spider.png, properties: mcpatcher/mob/spider/spider.properties\n[21:07:16] [Client thread/INFO] [Config]: [OptiFine] RandomEntities: textures/entity/spider_eyes.png, properties: mcpatcher/mob/spider_eyes.properties\n[21:07:18] [Realms Notification Availability checker #1/INFO] [com.mojang.realmsclient.client.RealmsClient]: Could not authorize you against Realms server: Invalid session id\n[21:07:19] [ThaumicJEI Aspect Cache/INFO] [thaumicjei]: ItemStack Aspect checking at 90%\n[21:07:19] [ThaumicJEI Aspect Cache/INFO] [thaumicjei]: Finished Aspect ItemStack Thread.\n[21:07:36] [Forge Version Check/INFO] [forge.VersionCheck]: [buildcraftlib] Starting version check at https://mod-buildcraft.com/version/versions.json\n[21:07:38] [Forge Version Check/INFO] [forge.VersionCheck]: [buildcraftlib] Found status: UP_TO_DATE Target: null\n[21:07:38] [Forge Version Check/INFO] [forge.VersionCheck]: [twilightforest] Starting version check at https://raw.githubusercontent.com/TeamTwilight/twilightforest/1.12.x/update.json\n[21:07:59] [Forge Version Check/INFO] [forge.VersionCheck]: [nei] Starting version check at http://chickenbones.net/Files/notification/version.php?query=forge&version=1.12&file=NotEnoughItems\n[21:08:56] [Client thread/INFO] [net.minecraft.client.multiplayer.GuiConnecting]: Connecting to xxxxxx.xxx.com, 26665\n[21:09:24] [Client thread/INFO] [net.minecraft.client.Minecraft]: Stopping!\n[21:09:24] [Client thread/INFO] [net.minecraft.client.audio.SoundManager]: SoundSystem shutting down...\n[21:09:24] [Client thread/WARN] [net.minecraft.client.audio.SoundManager]: Author: Paul Lamb, www.paulscode.com复制代码[21:08:56] [Client thread/INFO] [net.minecraft.client.multiplayer.GuiConnecting]: Connecting to xxxxxx.xxx.com, 26665",
    "replies": [
        {
            "author": "森林蝙蝠",
            "timestamp": 1564235520,
            "txt_content": "单纯拿socket测没有用，MC的服务端是netty，这个只是单纯的连接失败（因为netty经常失败绑定local_epoll），重启几次或者重装一下MC/睡一觉就好了。"
        },
        {
            "author": "Kenhuey",
            "timestamp": 1564237020,
            "txt_content": "森林蝙蝠 发表于 2019-7-27 22:13\n单纯拿socket测没有用，MC的服务端是netty，这个只是单纯的连接失败，重启几次或者重装一下MC/睡一觉就好了 ...\n并不是单纯的连接失败，很多方法我都测试过了。我刚刚也弄个Netty的框架下来测试，就是没有任何报错的情况下不知道为啥连本地的服务端都没法连接，而且在长连接测试里面一直是请求状态。我怀疑过是Forge的问题，但是连原版的都是一样的情况而且好多版本都试过了...我崩溃了"
        },
        {
            "author": "Kenhuey",
            "timestamp": 1564244700,
            "txt_content": " 本帖最后由 Kenhuey 于 2019-7-28 00:38 编辑 \n\n如果同时出现以下的特殊情况请使用我研究了一天的解决方法...\n『1』单人模式也是进不去，创建存档卡在创建地形之后的服务器启动（Log会有写）/进入存档游戏主线程卡死且依然在提示加载地形之后出现。\n『2』间歇性地Ping通了服务器或者成功进入/创建存档，但下次启动仍然无法正常进行游戏。\n\n已解决，方法总览\n『1』策略组内禁止JavaUpdate.exe后重启电脑确保该进程没有再启动。这个原因导致问题我也不了解，貌似是一个Jre的Bug把端口某些Local的参数定死了导致javaw.exe/java.exe的一些网络请求一直被占用阻塞。\n『2』重装Jre7/8，并在Jre的检测更新程序连接服务器之前把自动更新关掉或直接执行第一步。"
        },
        {
            "author": "z2939736828",
            "timestamp": 1564462680,
            "txt_content": "用整合包试试"
        },
        {
            "author": "MCxianyu",
            "timestamp": 1565755860,
            "txt_content": "Kenhuey 发表于 2019-7-28 00:25\n如果同时出现以下的特殊情况请使用我研究了一天的解决方法...\n『1』单人模式也是进不去，创建存档卡在创建 ...\n同样问题，如何解决"
        }
    ]
}