{
    "title": "【已解决】1.12.2 PAPI的变量进游戏没有加载",
    "author": "GhostSkyV9",
    "replyCount": 35,
    "timestamp": 1595044800,
    "txt_content": " 本帖最后由 sky295 于 2020-7-18 17:53 编辑 \npublic class Events implements Listener {\n    @EventHandler\n    public void onPlayerJoin(PlayerJoinEvent event){\n        Player player=event.getPlayer();\n        ScoreboardManager scoreboardManager= Bukkit.getScoreboardManager();\n        Scoreboard scoreboard=scoreboardManager.getNewScoreboard();\n        Objective objective=scoreboard.registerNewObjective(\"scoreboar\",\"dummy\");\n        objective.setDisplaySlot(DisplaySlot.SIDEBAR);\n        objective.setDisplayName(ChatColor.AQUA+\"巅峰荣耀\");\n        Score name=objective.getScore(ChatColor.AQUA+\"游戏名称： \"+ChatColor.GREEN+player.getDisplayName());\n        name.setScore(1);\n        Score health=objective.getScore(ChatColor.RED+\"血量： \"+\"§6\"+player.getHealth());\n        health.setScore(2);\n        Score level=objective.getScore(ChatColor.BLUE+\"当前等级： \"+\"§c\"+player.getLevel());\n        level.setScore(3);\n        String money=\"%vault_eco_balance%\";\n        money=PlaceholderAPI.setPlaceholders(player,money);\n        Score money1=objective.getScore(\"§e游戏币： \"+money);\n        money1.setScore(4);\n        String pp=\"%playerpoints_points%\";\n        pp=PlaceholderAPI.setPlaceholders(player,pp);\n        Score points=objective.getScore(\"§d点卷： \"+\"§f\"+pp);\n        points.setScore(5);\n        player.setScoreboard(scoreboard);\n    }复制代码依赖库也加了，可为什么进游戏变量没有被替换掉？\n\n\n\n\n\nQQ截图20200718115753.png\n(6.14 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2020-7-18 11:58 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "喵喵喵222",
            "timestamp": 1595046720,
            "txt_content": "我的也是这个问题"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1595048640,
            "txt_content": "pqpi的expan加载了吗？\n\n尝试执行\n/papi ecloud download Vault\n/papi reload\n\n之后重启"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595049840,
            "txt_content": "疾风暗影 发表于 2020-7-18 13:04\npqpi的expan加载了吗？\n\n尝试执行\n已解决了，expan加载了，问题是出在自身的金币数量为零，才会显示这样的，我加了ess插件给自己金币后就而已了，只是金币为零的时候不显示0这个数字，而是显示这个占位符"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595049900,
            "txt_content": "疾风暗影 发表于 2020-7-18 13:04\npqpi的expan加载了吗？\n\n尝试执行package com.github.sky295.event;\n\nimport com.github.sky295.scoreboar;\nimport me.clip.placeholderapi.PlaceholderAPI;\nimport org.bukkit.Bukkit;\nimport org.bukkit.ChatColor;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.PlayerJoinEvent;\nimport org.bukkit.scheduler.BukkitRunnable;\nimport org.bukkit.scoreboard.*;\n\npublic class Events extends BukkitRunnable implements Listener {\n    scoreboar plugin;\n    public Events(scoreboar plugin){\n        this.plugin=plugin;\n    }\n    @EventHandler\n    public void onPlayerJoin(PlayerJoinEvent event){\n        Player player=event.getPlayer();\n        ScoreboardManager scoreboardManager= Bukkit.getScoreboardManager();\n        Scoreboard scoreboard=scoreboardManager.getNewScoreboard();\n        Objective objective=scoreboard.registerNewObjective(\"scoreboar\",\"dummy\");\n        objective.setDisplaySlot(DisplaySlot.SIDEBAR);\n        objective.setDisplayName(ChatColor.AQUA+\"巅峰荣耀\");\n\n        Score name=objective.getScore(ChatColor.AQUA+\"游戏名称： \"+ChatColor.GREEN+player.getDisplayName());\n        name.setScore(5);\n\n        String healthy=\"%player_health%\";\n        healthy=PlaceholderAPI.setPlaceholders(player,healthy);\n        Score health=objective.getScore(ChatColor.RED+\"血量： \"+\"§6\"+healthy);\n        health.setScore(4);\n\n        Score level=objective.getScore(ChatColor.BLUE+\"当前等级： \"+\"§c\"+player.getLevel());\n        level.setScore(3);\n\n        String money=\"%vault_eco_balance%\";\n        money=PlaceholderAPI.setPlaceholders(player,money);\n        Score money1=objective.getScore(\"§e游戏币： \"+money);\n        money1.setScore(2);\n\n        String pp=\"%playerpoints_points%\";\n        pp=PlaceholderAPI.setPlaceholders(player,pp);\n        Score points=objective.getScore(\"§d点卷： \"+\"§f\"+pp);\n        points.setScore(1);\n\n        player.setScoreboard(scoreboard);\n    }\n    @Override\n    public void run() {\n        \n    }\n}\n复制代码\n还有个问题请教下，就是我想让这个记分板每秒刷新一次，BukkitRunnable这个可以写在事件类里么？大概是这个意思，run里面是写什么"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1595050080,
            "txt_content": "runnable的位置无影响 但是要注意在playerjoin注册就要在playerquit里面cancel，不然线程池堆积影响性能\n\n至于刷新逻辑，与你的event中类似"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595050320,
            "txt_content": "疾风暗影 发表于 2020-7-18 13:28\nrunnable的位置无影响 但是要注意在playerjoin注册就要在playerquit里面cancel，不然线程池堆积影响性能\n\n ...\n刷新逻辑有点不太明白，可否详细说下"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1595050620,
            "txt_content": "sky295 发表于 2020-7-18 13:32\n刷新逻辑有点不太明白，可否详细说下\n把你event里面的逻辑拎出来变成为特定player更新scoreboard的程序\n\nevent和runnable都调用该函数"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595050860,
            "txt_content": "疾风暗影 发表于 2020-7-18 13:37\n把你event里面的逻辑拎出来变成为特定player更新scoreboard的程序\n\nevent和runnable都调用该函数 ...    @EventHandler\n    public void onPlayerJoin(PlayerJoinEvent event){\n        Player player=event.getPlayer();\n        Scoreboard(player);\n    }\n    @Override\n    public void run() {\n        Scoreboard();\n    }\n    public void Scoreboard(Player player){\n        ScoreboardManager scoreboardManager= Bukkit.getScoreboardManager();\n        Scoreboard scoreboard=scoreboardManager.getNewScoreboard();\n        Objective objective=scoreboard.registerNewObjective(\"scoreboar\",\"dummy\");\n        objective.setDisplaySlot(DisplaySlot.SIDEBAR);\n        objective.setDisplayName(ChatColor.AQUA+\"巅峰荣耀\");\n\n        Score name=objective.getScore(ChatColor.AQUA+\"游戏名称： \"+ChatColor.GREEN+player.getDisplayName());\n        name.setScore(5);\n\n        String healthy=\"%player_health%\";\n        healthy=PlaceholderAPI.setPlaceholders(player,healthy);\n        Score health=objective.getScore(ChatColor.RED+\"血量： \"+\"§6\"+healthy);\n        health.setScore(4);\n\n        Score level=objective.getScore(ChatColor.BLUE+\"当前等级： \"+\"§c\"+player.getLevel());\n        level.setScore(3);\n\n        String money=\"%vault_eco_balance%\";\n        money=PlaceholderAPI.setPlaceholders(player,money);\n        Score money1=objective.getScore(\"§e游戏币： \"+money);\n        money1.setScore(2);\n\n        String pp=\"%playerpoints_points%\";\n        pp=PlaceholderAPI.setPlaceholders(player,pp);\n        Score points=objective.getScore(\"§d点卷： \"+\"§f\"+pp);\n        points.setScore(1);\n\n        player.setScoreboard(scoreboard);\n    }复制代码\n是这样么"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1595051100,
            "txt_content": "请自行测试\n以及你runnable里面调用少参\n以及你需要set建立player和scheduler间的映射，以供后续cancel释放"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595052420,
            "txt_content": "疾风暗影 发表于 2020-7-18 13:45\n请自行测试\n以及你runnable里面调用少参\n以及你需要set建立player和scheduler间的映射，以供后续cancel释放 ...package com.github.sky295.event;\n\nimport me.clip.placeholderapi.PlaceholderAPI;\nimport org.bukkit.Bukkit;\nimport org.bukkit.ChatColor;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.PlayerJoinEvent;\nimport org.bukkit.plugin.Plugin;\nimport org.bukkit.scoreboard.*;\n\npublic class Events implements Listener {\n    @EventHandler\n    public void onPlayerJoin(PlayerJoinEvent event){\n        Player player=event.getPlayer();\n        updateScoreboard(player);\n    }\n    public void updateScoreboard(Player player){\n        Bukkit.getScheduler().runTaskTimer((Plugin) this, new Runnable() {\n            @Override\n            public void run() {\n                ScoreboardManager scoreboardManager= Bukkit.getScoreboardManager();\n                Scoreboard scoreboard=scoreboardManager.getNewScoreboard();\n                Objective objective=scoreboard.registerNewObjective(\"scoreboar\",\"dummy\");\n                objective.setDisplaySlot(DisplaySlot.SIDEBAR);\n                objective.setDisplayName(ChatColor.AQUA+\"巅峰荣耀\");\n\n                Score name=objective.getScore(ChatColor.AQUA+\"游戏名称： \"+ChatColor.GREEN+player.getDisplayName());\n                name.setScore(5);\n\n                String healthy=\"%player_health%\";\n                healthy=PlaceholderAPI.setPlaceholders(player,healthy);\n                Score health=objective.getScore(ChatColor.RED+\"血量： \"+\"§6\"+healthy);\n                health.setScore(4);\n\n                Score level=objective.getScore(ChatColor.BLUE+\"当前等级： \"+\"§c\"+player.getLevel());\n                level.setScore(3);\n\n                String money=\"%vault_eco_balance%\";\n                money=PlaceholderAPI.setPlaceholders(player,money);\n                Score money1=objective.getScore(\"§e游戏币： \"+money);\n                money1.setScore(2);\n\n                String pp=\"%playerpoints_points%\";\n                pp=PlaceholderAPI.setPlaceholders(player,pp);\n                Score points=objective.getScore(\"§d点卷： \"+\"§f\"+pp);\n                points.setScore(1);\n                player.setScoreboard(scoreboard);\n            }\n        }, 0L, 20L);\n    }\n}\n复制代码[14:04:53 ERROR]: 无法加载位于文件夹 plugins 中的 plugins\\Scoreboar.jar ，因为插件无效\n org.bukkit.plugin.InvalidPluginException: Cannot find main class `com.github.sky295.scoreboar'\n        at org.bukkit.plugin.java.PluginClassLoader.<init>(PluginClassLoader.java:56) ~[PluginClassLoader.class:1.12.2-b704e64]\n        at org.bukkit.plugin.java.JavaPluginLoader.loadPlugin(JavaPluginLoader.java:126) ~[JavaPluginLoader.class:1.12.2-b704e64]\n        at org.bukkit.plugin.SimplePluginManager.loadPlugin(SimplePluginManager.java:323) ~[SimplePluginManager.class:1.12.2-b704e64]\n        at org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager.java:245) [SimplePluginManager.class:1.12.2-b704e64]\n        at org.bukkit.craftbukkit.v1_12_R1.CraftServer.loadPlugins(CraftServer.java:389) [CraftServer.class:1.12.2-b704e64]\n        at org.bukkit.craftbukkit.v1_12_R1.CraftServer.reload(CraftServer.java:868) [CraftServer.class:1.12.2-b704e64]\n        at org.bukkit.Bukkit.reload(Bukkit.java:544) [Bukkit.class:1.12.2-b704e64]\n        at org.bukkit.command.defaults.ReloadCommand.execute(ReloadCommand.java:27) [ReloadCommand.class:1.12.2-b704e64]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:161) [SimpleCommandMap.class:1.12.2-b704e64]\n        at org.bukkit.craftbukkit.v1_12_R1.CraftServer.dispatchCommand(CraftServer.java:748) [CraftServer.class:1.12.2-b704e64]\n        at org.bukkit.craftbukkit.v1_12_R1.CraftServer.dispatchServerCommand(CraftServer.java:734) [CraftServer.class:1.12.2-b704e64]\n        at net.minecraft.server.dedicated.DedicatedServer.func_71333_ah(DedicatedServer.java:509) [nz.class:?]\n        at net.minecraft.server.dedicated.DedicatedServer.func_71190_q(DedicatedServer.java:467) [nz.class:?]\n        at net.minecraft.server.MinecraftServer.func_71217_p(MinecraftServer.java:778) [MinecraftServer.class:?]\n        at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:624) [MinecraftServer.class:?]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_221]\nCaused by: java.lang.ClassNotFoundException: Failed to remap class com.github.sky295.scoreboar\n        at org.bukkit.plugin.java.PluginClassLoader.remappedFindClass(PluginClassLoader.java:169) ~[PluginClassLoader.class:1.12.2-b704e64]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:99) ~[PluginClassLoader.class:1.12.2-b704e64]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:76) ~[PluginClassLoader.class:1.12.2-b704e64]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_221]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_221]\n        at java.lang.Class.forName0(Native Method) ~[?:1.8.0_221]\n        at java.lang.Class.forName(Unknown Source) ~[?:1.8.0_221]\n        at org.bukkit.plugin.java.PluginClassLoader.<init>(PluginClassLoader.java:54) ~[PluginClassLoader.class:1.12.2-b704e64]\n        ... 15 more\nCaused by: java.io.FileNotFoundException: JAR entry com/github/sky295/scoreboar.class not found in D:\\Mohist\\plugins\\Scoreboar.jar\n        at sun.net.www.protocol.jar.JarURLConnection.connect(Unknown Source) ~[?:1.8.0_221]\n        at sun.net.www.protocol.jar.JarURLConnection.getInputStream(Unknown Source) ~[?:1.8.0_221]\n        at java.net.URL.openStream(Unknown Source) ~[?:1.8.0_221]\n        at org.bukkit.plugin.java.PluginClassLoader.remappedFindClass(PluginClassLoader.java:153) ~[PluginClassLoader.class:1.12.2-b704e64]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:99) ~[PluginClassLoader.class:1.12.2-b704e64]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:76) ~[PluginClassLoader.class:1.12.2-b704e64]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_221]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_221]\n        at java.lang.Class.forName0(Native Method) ~[?:1.8.0_221]\n        at java.lang.Class.forName(Unknown Source) ~[?:1.8.0_221]\n        at org.bukkit.plugin.java.PluginClassLoader.<init>(PluginClassLoader.java:54) ~[PluginClassLoader.class:1.12.2-b704e64]\n        ... 15 more复制代码\n这样后台直接报错了，是哪里的问题"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1595052900,
            "txt_content": "sky295 发表于 2020-7-18 14:07\n这样后台直接报错了，是哪里的问题\n注册scheduler的主类指向插件主类而非this\n你的this是event类而非主类\n\nrunnable也许延迟1tick执行防止同tick 2触发"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595053440,
            "txt_content": "疾风暗影 发表于 2020-7-18 14:15\n注册scheduler的主类指向插件主类而非this\n你的this是event类而非主类\n        Bukkit.getScheduler().runTaskTimer(new scoreboar(), new Runnable() {\n            @Override\n            public void run() {\n                player.setScoreboard(scoreboard);\n            }\n        }, 0L, 20L);\n我这个指向主类了，为啥还是报这个错误"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1595053620,
            "txt_content": "sky295 发表于 2020-7-18 14:24\nBukkit.getScheduler().runTaskTimer(new scoreboar(), new Runnable() {\n            @Override ...\n指向主类而不是让你新建一个\n\n插件加载那个类你就要指向哪一个"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595053680,
            "txt_content": "疾风暗影 发表于 2020-7-18 14:27\n指向主类而不是让你新建一个\n\n插件加载那个类你就要指向哪一个\n你是说plugin.yml文件的？"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1595054040,
            "txt_content": "sky295 发表于 2020-7-18 14:28\n你是说plugin.yml文件的？\n请自行补充java中最基本的生命期和classloader的知识\n\n主类\npublic class Main extends JavaPlugin {\n  public static Main instance;\n  public Main() { instance=this; }\n}复制代码\n\n\n其他类中调用主类\n例如\nBukkit.getScheduler().runxxx(Main.instance, xxx, xxx, xxx)\n\n\n后续其他问题请补充知识后自行解决   类似的问题我看到你之前的提问帖中也问过"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595054580,
            "txt_content": "疾风暗影 发表于 2020-7-18 14:34\n请自行补充java中最基本的生命期和classloader的知识\n\n主类\n    public static scoreboar instance;\n\n    public static scoreboar getInstance() {\n        return instance;\n    }\n        Bukkit.getScheduler().runTaskTimer(scoreboar.getInstance(), new Runnable() {\n            @Override\n            public void run() {\n                player.setScoreboard(scoreboard);\n            }\n        }, 0L, 20L);\n\n这样好像还是不行"
        },
        {
            "author": "William_Shi",
            "timestamp": 1595055960,
            "txt_content": "sky295 发表于 2020-7-18 14:43\npublic static scoreboar instance;\n\n    public static scoreboar getInstance() {\n主类实例的获取教程，我已经写了一篇了\n\nhttps://www.mcbbs.net/thread-1077792-1-3.html"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595057400,
            "txt_content": " 本帖最后由 sky295 于 2020-7-18 15:35 编辑 \nWilliam_Shi 发表于 2020-7-18 15:06\n主类实例的获取教程，我已经写了一篇了\n\nhttps://www.mcbbs.net/thread-1077792-1-3.html ...\n好了，我的问题，是因为没有重启服务器导致的报错"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595058540,
            "txt_content": "疾风暗影 发表于 2020-7-18 14:34\n请自行补充java中最基本的生命期和classloader的知识\n\n主类\n请问，在玩家退出后cancel是这样嘛？    @EventHandler\n    public void onPlayerQuit(PlayerQuitEvent event){\n        Bukkit.getScheduler().cancelTasks(scoreboar.instance);\n    }复制代码"
        },
        {
            "author": "William_Shi",
            "timestamp": 1595059020,
            "txt_content": "sky295 发表于 2020-7-18 15:49\n请问，在玩家退出后cancel是这样嘛？\nhttps://bukkit.windit.net/javado ... kkit.plugin.Plugin-\n\n这个是取消掉你插件的所有定时任务了\n你如果想要实现一个玩家一个任务调度\n玩家加入时分配任务调度，玩家退出时取消任务\n那就不能这样"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595060520,
            "txt_content": "William_Shi 发表于 2020-7-18 15:57\nhttps://bukkit.windit.net/javadoc/org/bukkit/scheduler/BukkitScheduler.html#cancelTasks-org.bukkit ...\n那我可以使用cancelTask这个么"
        },
        {
            "author": "William_Shi",
            "timestamp": 1595070780,
            "txt_content": "sky295 发表于 2020-7-18 16:22\n那我可以使用cancelTask这个么\n可以，存一下taskID就行"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595075280,
            "txt_content": "William_Shi 发表于 2020-7-18 19:13\n可以，存一下taskID就行\n呃，，请问怎么存taskID"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595075640,
            "txt_content": "sky295 发表于 2020-7-18 20:28\n呃，，请问怎么存taskID\nint taskid = Bukkit.getSc.........(.....,1L,20L).getTaskID();\n\n建一个map 对应Player和int  把这个存起来\n\n玩家退出的时候取Value  cancel掉这个taskid的任务 然后remove这个Player"
        },
        {
            "author": "William_Shi",
            "timestamp": 1595075760,
            "txt_content": "南柯郡守 发表于 2020-7-18 20:34\nint taskid = Bukkit.getSc.........(.....,1L,20L).getTaskID();\n\n建一个map 对应Player和int  把这个存 ...\n不要直接存Player对象，存Player的UUID"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595075880,
            "txt_content": "William_Shi 发表于 2020-7-18 20:36\n不要直接存Player对象，存Player的UUID\n我觉得只要在玩家退出的时候删掉Player就没什么问题吧"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595077680,
            "txt_content": "南柯郡守 发表于 2020-7-18 20:34\nint taskid = Bukkit.getSc.........(.....,1L,20L).getTaskID();\n\n建一个map 对应Player和int  把这个存 ...\n    @EventHandler\n    public void onPlayerQuit(PlayerQuitEvent event){\n        Player player=event.getPlayer();\n        Map map=new HashMap();\n        int taskId=Bukkit.getScheduler().runTaskTimer(scoreboar.instance, new Runnable() {\n            @Override\n            public void run() {\n\n            }\n        },0L,20L).getTaskId();\n    }\n是这样的嘛"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595077920,
            "txt_content": "sky295 发表于 2020-7-18 21:08\n@EventHandler\n    public void onPlayerQuit(PlayerQuitEvent event){\n        Player player=event ...\n你这个map要在onEnable部分public初始化\n\n然后\n\n\n\n        Map map=new HashMap();\n@EventHandler\n    public void onPlayerQuit(PlayerQuitEvent event){\n        Player player=event.getPlayer();\n        int taskId=Bukkit.getScheduler().runTaskTimer(scoreboar.instance, new Runnable() {\n            @Override\n            public void run() {\n\n            }\n        },0L,20L).getTaskId();\n        map.put(player,taskId);\n    }复制代码\n\n然后在玩家退出游戏的事件中 先map.getValue(player) 拿到id后cancel\n再map.remove(Player)"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595078280,
            "txt_content": "南柯郡守 发表于 2020-7-18 21:12\n你这个map要在onEnable部分public初始化\n\n然后\nonEnable部分是主类的吧？这样的话，调用就要从主类调用这个Map了"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595078700,
            "txt_content": "sky295 发表于 2020-7-18 21:18\nonEnable部分是主类的吧？这样的话，调用就要从主类调用这个Map了\n是的 因为你这个id要一直存着 所以放在主类比较保险"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595078760,
            "txt_content": "南柯郡守 发表于 2020-7-18 21:25\n是的 因为你这个id要一直存着 所以放在主类比较保险\ngetValues这个方法只有Map.Entry才有，那我岂不是要声明这个东西，结果。。。。。\n    Map.Entry<Player, Integer> map= new Map.Entry<Player, Integer>() {\n        @Override\n        public Player getKey() {\n            return null;\n        }\n\n        @Override\n        public Integer getValue() {\n            return null;\n        }\n\n        @Override\n        public Integer setValue(Integer value) {\n            return null;\n        }\n\n        @Override\n        public boolean equals(Object o) {\n            return false;\n        }\n\n        @Override\n        public int hashCode() {\n            return 0;\n        }\n    };复制代码"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595078880,
            "txt_content": "sky295 发表于 2020-7-18 21:26\ngetValues这个方法只有Map.Entry才有，那我岂不是要声明这个东西，结果。。。。。\n ...\nemmmm\nmap好像是直接.get(player)就行 你试试吧\n\nentry 一般是遍历时候用到的"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595081820,
            "txt_content": "南柯郡守 发表于 2020-7-18 20:34\nint taskid = Bukkit.getSc.........(.....,1L,20L).getTaskID();\n\n建一个map 对应Player和int  把这个存 ...\n    @EventHandler\n    public void onPlayerQuit(PlayerQuitEvent event){\n        Player player=event.getPlayer();\n        Map map=new HashMap();\n        int taskId=Bukkit.getScheduler().runTaskTimer(scoreboar.instance, new Runnable() {\n            @Override\n            public void run() {\n            }\n        },1L,20L).getTaskId();\n        map.put(player,taskId);\n        map.get(player);\n        Bukkit.getScheduler().cancelTask(taskId);\n        map.remove(player);\n    }\n麻烦大佬帮我纠正一下，有点乱。。。。。"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595081940,
            "txt_content": " 本帖最后由 南柯郡守 于 2020-7-18 22:21 编辑 \nsky295 发表于 2020-7-18 22:17\n@EventHandler\n    public void onPlayerQuit(PlayerQuitEvent event){\n        Player player=event ...        int taskId = map.get(player);\n        Bukkit.getScheduler().cancelTask(taskId);\n        map.remove(player);复制代码\n这一部分是PlayerQuitEvent该做的\n\n不然你这里任务一开始就结束了\n\n还有Map map=new HashMap();复制代码\n放到主类 然后用scoreboar.map\n\n你这个map的初始化没有报错嘛\n还是说put的时候也没有报错嘛\n\n不是应该\nMap<Player,Integer> map = new HashMap<>();复制代码"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595082120,
            "txt_content": "南柯郡守 发表于 2020-7-18 22:19\n这一部分是PlayerQuitEvent该做的\n\n不然你这里任务一开始就结束了\nmap初始化，put都没报错，scoreboar获取不到map这个"
        }
    ]
}