{
    "title": "[提议]关于插件中使用可自定义Inventory界面的设想（2）",
    "author": "鸭蛋只吃黄",
    "replyCount": 0,
    "timestamp": 1495597080,
    "txt_content": " 本帖最后由 凋灵兔子 于 2017-5-24 19:24 编辑 \n\n没看第一篇的先看第一篇\nhttp://mcbbs.tvt.im/thread-693784-1-1.html\n\n\n\n\n        昨天那个帖子我说的可能比较简略，有的东西没说明白，有jvlao在QQ也提出了一些问题。这里进一步讲一下。\n首先还是要强调两点：这种方式不能实现Bossshop那样完全自定义的界面，我所说的自定义并不是让腐竹自己添加界面（一个强化插件让他们自己加界面干啥子？），而是对已有的界面布局进行自定义。第二点就是别指望我能把这个完全讲的明明白白，对这项技术我能说到30%就已经不错了，剩下的需要大家自己去想，因为我说死了那这就是教程贴而不是讨论帖。\n\n\n        首先一个问题就是：界面布局依然是死的，作者已经在配置文件写了蓝玻璃绿玻璃，自定义又能怎样呢？这么问的可能是被我那个配置文件迷惑了，我们插件内部实现绝对不允许出现这样的代码：\nYamlConfig.getString(\"A.B.C\")复制代码        因为这样你等于是写死了路径，别人自己加的路径根本不会被读取到，所以我建议使用循环读取一个节点下全部的子节点。比如我把全部的物品都分为两类：具备lore的说明性物品和只有名字的物品，这样两个节点就有了，循环获取物品即可。至于怎么获取节点，怎么获取，那都是你自己的事情，当然，也可以私信我要参考代码。\n\n\n\n\n\n\n        第二个就是对我这个设想的性能上的质疑。其实认识楼主的人都知道楼主为性能宁愿砍掉/缩减功能，所以这个问题我也仔细考虑过。\n        在这里我想先说一下我们讨论的几个场景：\n                1. 我们并不是在说的不是单例的Inventory对象，因为那样的话一个玩家在操作，另一个也能看见，这显然不合适，我们获取的每一个Inv对象都应该是新创建的。\n                2. 我们界面涉及到的全部物品都应该是静态的、公共的并已经创建好的\n        大部分死代码都有两种写法，一种是先铺满，然后摆上按钮，另一个就是一溜setItem，其实这种的性能应该是稍快于前一中的，毕竟少set了几次...而有人质疑我这种需要先读取key，然后再找到这个对象然后摆放不如上面那种。\n        其实这完全看你自己的代码怎么优化。我的方式是新建一个List（我习惯直接确定长度，你们随意），把物品从0到53都放进去，反正ItemStack属于复杂类型，其实你也就存了一个指针，不用担心内存。然后getInventory的时候循环摆放然后发出去就搞定。\n        只要优化得当，这些Key什么的操作都是在服务器加载过程中进行的。再说了，你开服时间+1s又能怎么样呢？\n\n\n\n\n\n\n        最后我想说：楼主自认为活的简简单单，不想和你们打太极，也别假惺惺的说什么我注意言辞，对了就是对了，错了就是错了，别那么多弯弯绕，还有那些动不动就“阁下...”“您认为...”“那您这样说是不是...”拜托，Just a Minecraft。你和家人也说“阁下”的话他们绝对会以为你发烧了。\n        其实这玩意儿是我上厕所的时候一拍脑袋想出来的，回去用代码一写，矮油，确实能行嗨，然后就自己归纳总结了一下发上来了。\n        希望各位jvlao和dalao帮帮忙，自己感觉这个还算不错的，至少界面能自定义了嘛...\n        补充：我又试验了一遍，相比原来的写法，能节省90%以上的代码量（一共12行实现...）\n",
    "replies": []
}