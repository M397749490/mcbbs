{
    "title": "Inventory实现翻页效果",
    "author": "q549365815",
    "replyCount": 8,
    "timestamp": 1511966340,
    "txt_content": " 本帖最后由 q549365815 于 2017-11-29 23:02 编辑 \n\n各位伙伴对 全球市场的下一页和上一页的效果 感兴趣吗？\n今天我在这写出 我个人的翻页效果\n各位有什么更好的方法 可以在下面回复！\n\nprivate static final JSONObject obj = new JSONObject();\nfor(int x = 0;x<20;x++) {\n    StringBuilder sb = new StringBuilder();\n    sb.append(x);\n    obj.put(sb.toString(),x);\n}复制代码一个json对象  存储20条数据\nkey的排序是无序排序\n\n\nInv类private class inv {    private Inventory[] inv = new Inventory[1024];    public inv() {        int page = 0;        List<String> item_Name = new ArrayList<String>();        List<ItemStack> item_Stack = new ArrayList<ItemStack>();        Iterator<String> it = obj.keys();        while(it.hasNext()) {            item_Name.add(it.next())        }        for(int x = 0,size = item_Name.size(),num = 0;x<size;x++,num++) {            if(num == 9) {                inv_page inv_page = new inv_page(item_Stack,page);                inv= inv_page.getInv();                num =0;page++;                item_Stack.clear();            }            item_Stack.add(item(item_Name.get(x)));   // item()方法返回一个ItemStack 自己实现        }        if(item_Stack.iesEmpty() == false) {            inv_page inv_page = new inv_page(item,page);            inv= inv_page.getInv();            item.clear();        }    }Inv_page类\n\nprivate class Inv_page {\n        private List<ItemStack> items;\n        private Inventory inv;\n        private int page;\n        public inv_page(List<ItemStack> items,int page) {\n                this.items = items;\n                this.page = page;\n                this.inv = InventoryInit();\n        }\n        private Inventory InventoryInit() {\n                StringBuilder arg = new StringBuilder();\n                arg.append(\"第\");arg.append(page);arg.append(\"页\");\n                Inventory inv = Bukkit.createInventory(null,18,arg.toString());\n                for(int x = 0,size = items.size();x<size;x++) {\n                        inv.setItem(x,items.get(x));\n                }\n                return inv;\n        }\n        public Inventory getInv() {\n                return this.inv;\n        }\n}       \n\n具体就是这样的了\n\n\n对翻页进行InventoryClick监听即可 \n\n\n\n\n\n\n2017-11-29_230110.png (125.19 KB, 下载次数: 0)\n\n下载附件\n\n2017-11-29 23:02 上传\n\n\n\n\n\n\n\n\n2017-11-29_230226.png (122.68 KB, 下载次数: 0)\n\n下载附件\n\n2017-11-29 23:02 上传\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "q549365815",
            "timestamp": 1511966400,
            "txt_content": "我选择 死亡  \nmcbbs的编辑帖子的模板还不换？？\n\n写了半小时就这样？？？\n\n又要重新写一遍"
        },
        {
            "author": "1850343382",
            "timestamp": 1511968680,
            "txt_content": "为什么你签名档挂的技术讨论群没有人= ="
        },
        {
            "author": "ddyy163",
            "timestamp": 1512034260,
            "txt_content": "我感觉翻页的本质就是contents的指定范围的切换,当然也可以直接做成Inventory的切换"
        },
        {
            "author": "q549365815",
            "timestamp": 1512040080,
            "txt_content": "ddyy163 发表于 2017-11-30 17:31\n我感觉翻页的本质就是contents的指定范围的切换,当然也可以直接做成Inventory的切换 ...\n嗯  都差不多"
        },
        {
            "author": "q549365815",
            "timestamp": 1512064080,
            "txt_content": "ddyy163 发表于 2017-11-30 17:31\n我感觉翻页的本质就是contents的指定范围的切换,当然也可以直接做成Inventory的切换 ...\n这是我写了半小时的代码\n简便不少   谢谢你的想法\n\nclass inv {\n    private Inventory inv; \n    private ItemStack[][] item_two = ItemStack[512][];\n    private List<ItemStack> item_list = new ArrayList<ItemStack>();\n    priate int page = 0;\n    public inv() {\n        for(int x = 0,num = 0,size = 19;x<size;x++,num++) {\n                if( num == 9) {\n                    item_2= item_list.toArray(new ItemStack[9]);\n                    page++;\n                    num = 0;\n                    item_list.clear();\n                }\n                item_list.add(item());\n            }\n            if(item_list.isEmpty() == false) {\n                item_2= item_list.toArray(new ItemStack[9])\n                item_list.clear();\n            }\n    }\n    public Inventory inv() {\n        reutrn this.inv;\n    }\n    public boolean getItemPage(int page) {\n        if(item_2== null) {\n            return false;\n        }\n        for(int x = 0,size = item_2.length;x<size;x++) {\n            inv.setItem(x,item_2[x]);\n        }\n        return true;\n    }\n}"
        },
        {
            "author": "jiangzizhong",
            "timestamp": 1512265500,
            "txt_content": "Inventory[] inv = new Inventory[1024]\n这一条是指1024个GUI吗？\n我还是习惯inv.clear();然后再把页数的东西放进去。"
        },
        {
            "author": "q549365815",
            "timestamp": 1512283740,
            "txt_content": "jiangzizhong 发表于 2017-12-3 09:45\nInventory[] inv = new Inventory[1024]\n这一条是指1024个GUI吗？\n我还是习惯inv.clear();然后再把页数的东 ...\n看我上面一楼写的\n\n这里1024是指数值空间大小  只要没有赋值是没有数据的"
        },
        {
            "author": "a8105",
            "timestamp": 1512298200,
            "txt_content": "\nInventory i=Bukkit.createInventory(............................);\nint page=1;\nList<ShopItem> items=......................;\nint pageSize=5*9;\nint index=pageSize*page-pageSize;\nif(index>=items.size())\n{\n    index=0;\n    page=1;\n}\nint max=index+pageSize;\nint slot=0;\n\nif(items.size()>pageSize)\n{\n    maxPage=(int)Math.ceil((double)items.size()/pageSize);\n}\nelse\n    maxPage=1;\nwhile(index<max && slot<items.size())\n{\n    ShopItem item=items.get(slot);\n    i.setItem(slot,item.getInfoItem(player));\n    this.items.put(slot,item);\n    index+=1;\n    slot+=1;\n}\n\n复制代码\n\n"
        }
    ]
}