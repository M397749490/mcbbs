{
    "title": "PlayerLoginEvent对玩家无作用",
    "author": "阳光不小",
    "replyCount": 9,
    "timestamp": 1562280900,
    "txt_content": "我的服务端是1.12.2的水桶端，我发现PlayerLoginEvent类的成员在getPlayer()后调用sendMessage()和teleport()函数时对玩家没有作用，后台也没有报错，但是使用getPlayer().getName()时是可以返回玩家昵称的。我无意间看到论坛开源的进服强制TP插件的源码在触发PlayerLoginEvent后对玩家进行传送操作也对玩家没有作用（1.12.2服务端）。请问大佬们这个问题要如何解决。",
    "replies": [
        {
            "author": "咸鱼气功王",
            "timestamp": 1562283660,
            "txt_content": "你需要做一个延迟处理.延迟个2秒的样子"
        },
        {
            "author": "鬼畜畜",
            "timestamp": 1562284740,
            "txt_content": "呼叫PlayerLoginEvent事件时，玩家实体还没有生成，自然没有用\n换用PlayerJoinEvent事件吧"
        },
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1562286420,
            "txt_content": "建议使用 PlayerJoinEvent, API 中说的很明确, 这个事件是玩家正在登陆的时候触发, 我没有看过其源码, 但是看方法大多数都是和网络连接相关的, 所以猜着应该是在玩家已经连接服务器, 但是尚未真正的登录(最起码这个时候其他玩家是看不见他的), 同时在 API 非常醒目的位置还写了\nNote that this event is called early in the player initialization process. It is recommended that most options involving the Player entity be postponed to the PlayerJoinEvent instead.\n就算看不懂英语的也能注意到后面的 PlayerJoinEvent, 所以还是用这个吧, 方法也更加丰富.\n\n说一点题外话:\n从 Login 事件的方法上推断这个事件更加适合用来在 \"ban\" 或者是从数据库读取数据的时候调用, 因为这时候服务端尚未对玩家作出更多的处理, 如果你认为他不能登陆, 那么在这个时候将他踢掉明显要等到 Join 事件运行, 玩家实体都出来了更加节省资源. 想起以前我写的插件大多数都是用 Join 的, 真是辣鸡. 不禁想起我上学的时候(当然, 现在也还在上学, 更早的时候)我问老师说\"写多少行代码才能提高水平?\"我的老师说:\"要是在写代码的过程中不断思考, 那么几百行代码就足够让人上一个台阶, 要是只是机械的敲, 仅仅为了实现功能而写代码, 那写几万行代码仍然没有用\". 最后老师还加了一句:\"豆芽长到十米高也是豆芽, 变不成树\"\n\n虽然我可能以后再也不会开发 mc 插件, 但是建议楼主一定要, 一定要多看看 API, 论坛内很多自制插件往往都对 API 中更加简单的方法视而不见, 转而去用一些自己的复杂的实现, 比较典型的就是那个利用数据库做跨服聊天的, 这种的功能上当然没问题, 但是这种代码对你是没有提高的. 多看 API, 多看看其他 dalao 的代码, 有的时候可能 dalao 无意中的一句话就能给你带来不小的好处(反正我已经感受到了)"
        },
        {
            "author": "mcpanglei",
            "timestamp": 1562290440,
            "txt_content": "做延迟处理可以解决很多问题"
        },
        {
            "author": "阳光不小",
            "timestamp": 1562313060,
            "txt_content": "凋灵兔子 发表于 2019-7-5 08:27\n建议使用 PlayerJoinEvent, API 中说的很明确, 这个事件是玩家正在登陆的时候触发, 我没有看过其源码, 但是 ...\n嗯呢，刚刚查了一下API，多谢神犇提醒。"
        },
        {
            "author": "阳光不小",
            "timestamp": 1562313180,
            "txt_content": "Ghost_chu 发表于 2019-7-5 07:59\n呼叫PlayerLoginEvent事件时，玩家实体还没有生成，自然没有用\n换用PlayerJoinEvent事件吧 ...\n谢谢神犇，忘记查API啦，没注意有两种事件emmm"
        },
        {
            "author": "阳光不小",
            "timestamp": 1562313180,
            "txt_content": "xiazhen3938 发表于 2019-7-5 07:41\n你需要做一个延迟处理.延迟个2秒的样子\n解决啦，谢谢神犇"
        },
        {
            "author": "阳光不小",
            "timestamp": 1562313240,
            "txt_content": "mcpanglei 发表于 2019-7-5 09:34\n做延迟处理可以解决很多问题\n解决啦，谢谢神犇"
        },
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1562314740,
            "txt_content": "xiazhen3938 发表于 2019-7-5 07:41\n你需要做一个延迟处理.延迟个2秒的样子\n我认为你的回答完全错误, 而且错的非常离谱. 在程序中除了测试锁之外我认为不应该有任何 \"赌\" 的行为, 你延时两秒, 万一只用了 2ms 就完成了呢? 剩下的 1800ms 就这么浪费掉了? 万一两秒内没有完成呢? 难道再等两秒么?\n\n当然, 您说的等两秒也不是完全不可以, 但那是在非常**的情况下. 类库没有提示, 也没有任何办法能够在期待的动作发生时给一个提示, 那没办法, 只能等一会再看看, 不行的话再等一会儿. 而在 api 明显有解决方案的情况下还等用这种方法, 您觉得合适么? 说句不好听的, 如果您发布的插件都是以这种态度在编码的话, 那我看还是全部进回收区为好.\n\n我有时候确实喜欢嘲讽新人, 我也知道那样非常讨人厌, 但是我绝对不会给别人提供错误的答案."
        }
    ]
}