{
    "title": "【CBL|SYL】1.9掉落表WIKI翻译及实例分析",
    "author": "sylqiuyifeng",
    "replyCount": 20,
    "timestamp": 1445574300,
    "txt_content": " 本帖最后由 sylqiuyifeng 于 2015-10-23 18:11 编辑 \n\nWIKI的掉落表页面也出了，然后自己也尝试理解和解读了一下掉落表\n于是来分享一下心得和翻译\n以下资料和图片资源皆出自英文wiki Loot table页面\n\n首先是掉落表于箱子和生物的指定方式\n可参考这个新闻\n\n箱子:\n根标签\n├LootTable: 指定箱子使用哪个掉落表，如果这是一个双格箱子的话，那么只有被指定的一半会被这个标签影响\n└LootTableSeed: 用于掉落表的随机器种子，不写或者为0的时候将随机产生种子\n箱子内容被访问时(/blockdata访问除外)，这些标签将会被移除，并且产生物品(感谢5L修正)\n\n生物:\n根标签\n├DeathLootTable: 指定实体使用哪个掉落表\n└DeathLootTableSeed: 用于掉落表的随机器种子，不写或者为0的时候将随机产生种子。\n\n箱子和实体的掉落表可以使用/entitydata和 /blockdata 来改变\n掉落表标签\n掉落表使用JSON格式来定义，具体格式如下：\n\n根标签\n└pools: 物品池列表，每一个物品池都将从中随机抽取一些物品，具体取决于该物品池的rolls（你可以理解为掷骰）数目\n   └一个物品池\n      ├conditions: 决定了是否使用这个物品池的条件\n      │└一个条件\n      │   └condition: 条件名称，可用的条件请见下\n      ├rolls: 决定了具体的rolls数目（即从物品池抽取多少次物品），和范围相对（即要么使用这个具体数量的标签，要么使用下方的范围标签）\n      ├rolls: 决定了rolls的最小和最大值\n      │├min: 最小值\n      │└max: 最大值\n      └items: 物品池中的物品列表\n         └一个物品\n            ├conditions: 决定了物品的掉落条件\n            │└一个条件\n            │   └condition: 条件名称，可用条件请见下方\n            ├item: 物品ID，例如minecraft:diamond\n            ├functions: 功能，设置一个施加于物品的特别行动（如附魔等），没有设定的functions将不会使用\n            │ └一个功能\n            │    ├function: 功能的名称，可用的功能见下方\n            │    └conditions: 决定了使用该功能的条件\n            │       └一个条件\n            │          └condition: 条件名称，可用条件请见下方\n            └weight: 决定了物品被选中的权重，越高权重的物品将越容易被选\n                              （根据个人经验来看被选中的几率应该为 物品权重/物品池中的总权重）\n功能\n掉落表使用不同的功能来施加一些特殊的行动于物品上，例如设定物品堆叠数量或设定附魔，下面是可用的功能列表和其使用的标签，这些标签将被放置在和function:同样的标签之下（也就是说，function填好名字之后，如果这个功能有附加标签的话那么就写在下面）[注：后面有实例说明]\n\nenchant_with_levels – 决定了物品将拥有多少级的附魔（即等同于在附魔台里面使用多少级经验来产生附魔）\n├treasure: 决定了物品是否可以使用“藏宝附魔”（即冰霜，修复这类不可透过附魔台获得的附魔）\n├levels: 具体使用多少级经验附魔，和下方的范围相对\n│               （即要么使用这个具体数量的标签，要么使用下方的范围标签，后文不再作解释）\n└levels: 同上\n   ├min: 最少使用多少级\n   └max:最多使用多少级\n\nfurnace_smelt – 产生如同将物品放入熔炉熔炼的效果，例如用于将烧死的动物肉烤熟\n\nlooting_enchant – 决定了掠夺附魔对此物品产生的效果，如果不使用该功能的话掠夺附魔将不起效果\n├count: 决定了掠夺附魔将额外掉落多少该物品，和范围相对\n│              （个人理解是每一级附魔带来的额外掉落，例如这是1的话掠夺1将掉多1个，掠夺2将多2个）\n└count: 决定了每一级掠夺附魔的额外掉落范围\n   ├min: 最小增加数量\n   └max: 最大增加数量\n\nset_count – 决定了物品的堆叠数量，如果不设定的话将默认为1个物品\n├count: 决定具体数量，和范围相对\n└count: 同上\n   ├min: 最小堆叠数量\n   └max: 最大堆叠数量\n\nset_data – 决定了物品的损害值（例如不同颜色的羊毛有不同的损害值）\n├data: 具体的损害值，和范围相对\n└data: 同上\n   ├min: 最小的损害值\n   └max: 最大的损害值\n\nset_nbt – 添加NBT标签到物品上\n└tag: 需要添加的标签，和命令使用的Data tag相似，值得注意的是第一个括号需要书写（即最外面的{}）并且里面的双引号需要用\\转义（JSON书写规则） \n条件\n掉落表可以向掉落物，物品池或者功能增加不同的条件，决定他们是否被使用。下面是一系列的可用条件，和功能一样，额外标签放置在和condition:一样的位置\n\nentity_properties – 决定了该条件需求的特性（简单来说就是要符合某些条件啦）\n├entity: 决定了被检查特性的实体，设置成this检查死亡的实体, killer检查杀死他的实体，killer_player检查杀死他的玩家\n│              （简单来说就是究竟是谁要满足条件）\n└properties: 满足条件的特性\n   └on_fire: 实体必须着火\n（目前来说看来只有着火这一个，以后可能会有更多）\n\nentity_scores – 检查实体的分数以决定是否掉落（这个应该不会是系统自带的条件，反而是方便地图制作者的条件）\n├entity: 同前\n└scores: 需要检查的分数\n   ├A score: 键名为objective名（即前面标签名A score是一个objective的名称），值则为一个具体分数，和范围相对\n   │请注意在15w43b不能正常使用（mojang plz）   \n   └A score:同上\n      ├min: 最小的分数\n      └max: 最大的分数\n\nkilled_by_player – 要求实体必须被玩家击杀\n└inverse: 反转条件需求，物品只在实体不是被玩家击杀的时候掉落\n\nrandom_chance – 改变物品池被使用的几率（目前来说我还没找到这个条件哪里被使用了）\n└chance: 决定了这个物品掉落的几率\n\nrandom_chance_with_looting – 基于掠夺附魔改变物品池被使用的几率（广泛应用于生物的稀有掉落物）\n├chance: 基础掉落几率\n└looting_multiplier: 每一级掠夺附魔增加的几率\n\n那么翻译就在这里，之后的一些实例分析等我晚上再做吧……\n做这玩意差点没累死我……\n分析见后页\n\n那么在你能愉快玩JSON之前\n强烈建议安装一个notepad++\n不然系统自带笔记本会玩死你的\n就这样\n基础说明\n掉落表看着很复杂，估计你已经被我吓傻了吧\n不过其实呢，有时候也并没有那么复杂，仔细看的话光conditions自己已经重复3次了\n并且一般情况下并不是全部标签都有的比如拿creeper的掉落表来说：\n\ncreeper掉落表代码：\n\n{\n    \"pools\": [\n        {\n            \"rolls\": 1,\n            \"items\": [\n                {\n                    \"item\": \"minecraft:gunpowder\",\n                    \"weight\": 1,\n                    \"functions\": [\n                        {\n                            \"function\": \"set_count\",\n                            \"count\": {\n                                \"min\": 0,\n                                \"max\": 2\n                            }\n                        },\n                        {\n                            \"function\": \"looting_enchant\",\n                            \"count\": {\n                                \"min\": 0,\n                                \"max\": 1\n                            }\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}复制代码\n\n这个是一个比较简单的掉落表，没有conditions的出现\n首先最外层的括号就是根标签了然后是pools，代表creeper的物品池，这次只有一个rolls采用的是指定数量那个，代表每次在这个物品池里面抽取一次\n       说起物品池，你可能会不太明白这个概念\n       说白了就是我现在有一个抽奖箱，里面有一个个球球，代表一种物品\n       我roll一次，就是我伸手进去抽一次\n物品池里面也只有gunpowder（火药）这个掉落物，因为creeper只会掉这个然后这个物品具有两个functions，set count和looting enchant前者是用于设置creeper掉落的火药数量，这里是0~1，代表每次要么不掉，要么掉一个后者是用于和掠夺标签互动的，这代表我每级掠夺能额外掉落多少火药，这里的数值是0~1，要么不多掉要么多掉一个\n\n例如我有掠夺1，我击杀了creeper，那么系统开始判定\n首先从物品池里面抽一次，这里只有一个物品，于是我们摸出了火药“球球”\n这个球球本身是代表随机数量的火药（setcount 0~1）\n我们运气不好，摸到了0\n然后掠夺1再次进行判断，结果我们脸太黑，额外掉落出了0（looting enchant 0~1）\n于是没有火药\n\n但是如果我们运气好，第一次随机到了1\n掠夺判定也随机到了1\n于是我们会获得2个火药\n\n但运气一般的话，第一次随机到了0，但附魔判定出了1的话\n那么我们会有一个火药\n\n更高等级的附魔情况一样，不过每一级附魔都要进行一次判定，II级就2次，III级就3次\n如此类推，这就是为什么如果自定义一个等级非常非常高的掠夺会卡死你\n因为一次掉落太多火药了……functions补充\n然后想补充说明一下functions\n看到functions开头的说明你可能不太明白这些标签将放置在同样的标签下是什么意思\n这里就是最好的例子\n功能名称当然就是set count和looting enchant，我们填了下去\n但是我们想要设定范围，于是我们就在下面跟着添加了count这个compound\n其他功能的操作也是一样的\n\n\n物品池conditions\n\n\n然后是conditions，其实就是是否启动物品池/物品/功能的条件判断\n这是烈焰人的掉落表，可见和creeper的差不多\n唯一的区别是在物品池中有了conditions，条件为killed_by_player\n就是说，烈焰人一定是要系统判断为玩家击杀，才会掉落物品\n不然被什么其他意外搞死的话是不会出烈焰棒的\n\n功能的conditions\n\n\n这是猪的掉落表\nset count和looting_enchant我们都很熟悉了\n唯独是furnace_smelt，这功能可以让物品“烧过”\n而且这个功能是有限定条件的：\n必须是猪本身着火的时候死亡才启用这功能\n这时候生猪扒就会被烤成熟猪扒\n达到了动物烧死会掉落熟肉的效果\n(未完待续)\n\n[groupid=546]Command Block Logic[/groupid]",
    "replies": [
        {
            "author": "无敌_WaveXT",
            "timestamp": 1445574360,
            "txt_content": "看不懂。。"
        },
        {
            "author": "122qweswd",
            "timestamp": 1445574600,
            "txt_content": "好厉害！支持！"
        },
        {
            "author": "chyx",
            "timestamp": 1445574780,
            "txt_content": "conditions: 决定了是否使用这个物品池的条\n忘了一个件"
        },
        {
            "author": "siiftun1857",
            "timestamp": 1445575980,
            "txt_content": "当箱子被打开时这些标签将会被移除，并且物品才会生成\n不止是打开时，还有被漏斗提取、放入物品时，和箱子被破坏时。\n可总结为\"箱子内容被访问时(/blockdata访问除外)\"。"
        },
        {
            "author": "sylqiuyifeng",
            "timestamp": 1445576040,
            "txt_content": "siiftun1857 发表于 2015-10-23 12:53\n不止是打开时，还有被漏斗提取、放入物品时，和箱子被破坏时。\n可总结为\"箱子内容被访问时(/blockdata访问 ...\n唔\n这点wiki到是没有提到\n感谢修正"
        },
        {
            "author": "chyx",
            "timestamp": 1445579280,
            "txt_content": "siiftun1857 发表于 2015-10-23 12:53\n不止是打开时，还有被漏斗提取、放入物品时，和箱子被破坏时。\n可总结为\"箱子内容被访问时(/blockdata访问 ...\n还有比较器探测你忘了\n这些字段运输矿车漏斗矿车也能用"
        },
        {
            "author": "chyx",
            "timestamp": 1445579940,
            "txt_content": " 本帖最后由 chyx 于 2015-10-23 14:06 编辑 \nchyx 发表于 2015-10-23 13:48\n还有比较器探测你忘了\n这些字段运输矿车漏斗矿车也能用\n我有一个问题 为何所有物品都有一个0~1级的附魔？\n\n\n\nassets.zip\n(66.52 KB, 下载次数: 2)\n\n\n\n2015-10-23 14:06 上传\n点击文件名下载附件\n阅读权限: 150\n\n\n\n\n\n\n\n"
        },
        {
            "author": "915633650",
            "timestamp": 1445582400,
            "txt_content": "请问生物的根标签里的用于掉落表的随机器种子是啥意思"
        },
        {
            "author": "lzs1234",
            "timestamp": 1445590740,
            "txt_content": "权重应该就是个体权重/总权重\n因为刷怪笼也是这么用的\n然而我觉得条件里面的killer并没有什么用，僵尸弄死这个村民也不会把村民掉的东西捡起来2333\n等着猪骑的深夜研究"
        },
        {
            "author": "sylqiuyifeng",
            "timestamp": 1445592660,
            "txt_content": "915633650 发表于 2015-10-23 14:40\n请问生物的根标签里的用于掉落表的随机器种子是啥意思\n应该就是用于计算由于物品权重不同时物品掉落几率用的\n这个是技术方面的专业知识了\n一般来说忽略就好"
        },
        {
            "author": "sylqiuyifeng",
            "timestamp": 1445592720,
            "txt_content": "chyx 发表于 2015-10-23 13:59\n我有一个问题 为何所有物品都有一个0~1级的附魔？\n并没有吧？\n我是没看到哪里有"
        },
        {
            "author": "915633650",
            "timestamp": 1445592960,
            "txt_content": "sylqiuyifeng 发表于 2015-10-23 17:31\n应该就是用于计算由于物品权重不同时物品掉落几率用的\n这个是技术方面的专业知识了\n一般来说忽略就好 ...\n所以并不是打错字了是嘛   随机器种子"
        },
        {
            "author": "siiftun1857",
            "timestamp": 1445594160,
            "txt_content": "chyx 发表于 2015-10-23 13:48\n还有比较器探测你忘了\n这些字段运输矿车漏斗矿车也能用\n我干嘛要全说出来\n还有漏斗矿车我当然知道"
        },
        {
            "author": "chyx",
            "timestamp": 1445603160,
            "txt_content": "sylqiuyifeng 发表于 2015-10-23 17:32\n并没有吧？\n我是没看到哪里有\n比如猪的肉就有"
        },
        {
            "author": "sylqiuyifeng",
            "timestamp": 1445603640,
            "txt_content": "chyx 发表于 2015-10-23 20:26\n比如猪的肉就有\n然而那是looting_enchant\n看我后面分析有说过"
        },
        {
            "author": "chyx",
            "timestamp": 1445607960,
            "txt_content": "sylqiuyifeng 发表于 2015-10-23 20:34\n然而那是looting_enchant\n看我后面分析有说过\n噢（捂脸）"
        },
        {
            "author": "chyx",
            "timestamp": 1445664840,
            "txt_content": "新版本改了 快更新！"
        },
        {
            "author": "⭐✔️",
            "timestamp": 1445947380,
            "txt_content": "https://jsfiddle.net/j9gfxeen/5/embedded/result/\n编辑器"
        },
        {
            "author": "sylqiuyifeng",
            "timestamp": 1445956320,
            "txt_content": "贰逼 发表于 2015-10-27 20:03\nhttps://jsfiddle.net/j9gfxeen/5/embedded/result/\n编辑器\n然而俺们家pca也有我会说？"
        },
        {
            "author": "唔咩",
            "timestamp": 1469341800,
            "txt_content": "我遇到一个问题，请问如何解决？\n原代码是这样的：\n                {\"type\":\"item\",\"name\":\"minecraft:leather_boots\",\"weight\":13,\n                        \"functions\":[\n                                {\"function\":\"set_nbt\",\"tag\":\"{display:{Name:\"弹跳鞋\",Lore:[\"[脚部装备]\",\"跳跃后获得跳跃提升\"],color:7377883}}\"}\n                                ]}\n复制代码\n然而在箱子里变成了这样：\n\n{:10_522:}求解决方法！"
        }
    ]
}