{
    "title": "[ForgeMod开发]基础教程：合成与冶炼",
    "author": "hao19891029",
    "replyCount": 4,
    "timestamp": 1380889800,
    "txt_content": " 本帖最后由 hao19891029 于 2013-10-10 16:37 编辑 \n\n注：下面文章基本转自Forge论坛里的教程（原地址），游戏版本为1.6.2。缓慢更新。。。\n索引贴地址：点我 \n\n引\n    那么，到目前为止，你已经成功建立了一个基本的mod，并且已经准备好了修改游戏内容了对吧？接下来，我们来给游戏添加一个或者两个简单的合成公式！总共有三种合成类型：指定好位置的，没有指定位置的；以及冶炼合成。\n基本的合成知识\n    给游戏添加合成公式通常是发生在基本类的“@Init”注解的方法里。对于教程的“generic mod”，就是在“tutorial.generic.Generic”类的“load”方法里面。在这个教程的最后，修改过的“Generic”类会列出所有添加进来的合成公式，你可以在教程最后看到它们。\n    添加合成公式的方法是静态方法，它们都跟在“GameRegister”（给合成管理器传递数据用）的后面。在Eclipse里面，添加合成公式的方法名用斜体字显示。\n物品栈（ItemStacks）\n    每种不同方块/物品类型的方块、物品在Minecraft里面都没有多个实例，相反的，这些同样类型的方块或物品都被存储在“ItemStacks”里面。你可以在“net.minecraft.block.Block”和“net.minecraft.item.Item”类里面找到所有原版的方块和物品，通常这些物品都在那两个类的顶部定义，如果你想增加一个合成公式，直接使用那些方块和物品列表里的方块物品是个好主意！一个“ItemStacks”有两个构造方法，这取决于该物品的数量和被使用时的耐久度。\n\n只有一个，没有耐久度\n    通常，你都会想建立的物品没有耐久度的属性。这是个简单的活，只要引用“item”自己的构造方法就可以了。代码如下：\nItemStack dirtStack = new ItemStack(Block.dirt);复制代码上面代码表示这是一个名为“dirtStack”的包含一块泥土方块的栈（Stacks）。\n\n有多个，但还是没有耐久度\n    当然你不能设定成多个物品合成以后结果是物品本身，这样的合成公式不会有任何输出结果。\n    可以最多堆叠64个（这也是游戏规定的堆叠最大数量），并且没有耐久度的代码如下：\nItemStack diamondsStack = new ItemStack(Item.diamond, 64);复制代码上面代码表示这是一个可以堆叠64个，数量也为64的装着钻石的栈。\n\n有耐久度的\n    不幸的是，如果你希望你的物品有耐久度，那你必须同时设定它的数量。代码如下：\nItemStack blackWoolStack = new ItemStack(Block.cloth, 42, 15);复制代码上面代码表示一个装了42块羊毛的栈（羊毛的旧名字是“cloth”），羊毛的元数据值为15。（元数据\"metadata\"：我的理解是方块本身可以存储的数据，这些数据存储在地图里面，如一个小麦不同的生长情况都是不一样的metadata值）\n\n\n我知道物品的ID！\n    如果你不知道物品或方块的内部名称，但是知道它们的id，你可以使用最后的一个构造方法来实例化。我不建议你这样，但为了介绍完整我仍然把这个方法写出来。代码如下：\nItemStack unknownItemStack = new ItemStack(1, 3, 0);复制代码   这是一个装有3个id为“1”的方块的栈。也许这是泥土？最好还是先去看看物品和方块的引用，再提示一下，所有原版的物品方块都可以在“net.minecraft.block.Block”和“net.minecraft.item.Item”里找到。\n\n没有指定位置的合成（Shapeless Crafting）\n    没指定位置的合成（Shapeless Crafting）是一种物品次序无关紧要的合成公式。例如原版里书和蘑菇汤的合成。基本的添加没指定位置的合成公式的代码如下：\nGameRegistry.addShapelessRecipe(ItemStack result, Object... recipe)\n复制代码   不知道“...”代表什么意思？它是java的语法，意思是“剩下后面的参数也是对象(Object)类型，并且存放在一个叫‘recipe’的对象数组(Object[])里面”。\n    接下来，我们试试将泥土转换为钻石。代码如下：\nGameRegistry.addShapelessRecipe(new ItemStack(Item.diamond, 64), new ItemStack(Block.dirt));复制代码\n\n\n\n\n3-1.png (9.75 KB, 下载次数: 7)\n\n下载附件\n\n3-1\n2013-10-4 16:31 上传\n\n\n\n\n    如果你想要弄成需要多个物品才能合成，只要把指定的物品的“ItemStack”放进去就行了。如果你想要指定多个同样的物品，也是一样，把相同的物品的“ItemStack”放进去。例如，下面的代码表示稍微昂贵一点的合成公式：合成钻石需要6块泥土、沙子、沙砾、圆石。代码如下：\nItemStack dirtStack = new ItemStack(Block.dirt);\nGameRegistry.addShapelessRecipe(new ItemStack(Item.diamond, 64),\n                dirtStack, dirtStack, dirtStack,\n                dirtStack, dirtStack, dirtStack,\n                new ItemStack(Block.sand), gravelStack, cobbleStack);复制代码\n\n指定位置的合成（Shaped Crafting）\n    指定位置的合成公式是从1x1到3x3的九宫格中指定位置。字符用来表示合成的规范和值。合成方法的写法大致如下：\nGameRegistry.addRecipe(String row1, [String row2[, String row3]]\n        char itemType1, ItemStack itemStackType1[, ... char itemTypeN, ItemStack itemStackTypeN]);复制代码   上面的代码也许很混乱让人难以看懂，所以下面给出一个清晰点的例子。例如，我们想要一个2x2的合成，合成公式为在左上角需要两块泥土和两块沙砾，合成出一个圆石。代码如下：\nItemStack dirtStack = new ItemStack(Block.dirt);\nItemStack gravelStack = new ItemStack(Block.gravel);\n\nGameRegistry.addRecipe(new ItemStack(Block.cobblestone), \"xy\", \"yx\", \n        'x', dirtStack, 'y', gravelStack);复制代码\n\n\n\n\n3-2.png (15.46 KB, 下载次数: 5)\n\n下载附件\n\n3-2\n2013-10-4 16:52 上传\n\n\n\n\n\n    上面的例子相信大家都能看懂，“xy”、“yx”就分别代表九宫格第一行的“###”前面两个#，和第二行的“###”前面两个#。\n    以此类推，如果想要在某行的三个格子中空出第二个格子，可以这样写“x y”，注意，“x y”中间是有一个空格的。下面我们继续第二个例子，我们用泥土和沙砾围成一圈来合成一个石头，代码如下：\nGameRegistry.addRecipe(new ItemStack(Block.stone), \"xyx\", \"y y\", \"xyx\",\n        'x', dirtStack, 'y', gravelStack);复制代码\n\n\n\n\n3-3.png (12.96 KB, 下载次数: 8)\n\n下载附件\n\n3-3\n2013-10-4 17:01 上传\n\n\n\n\n\n\n冶炼（Smelting）\n    冶炼是三种合成类型里最容易的，因为它是一对一进行物品转换并且唯一能设定的值只有冶炼给予的经验多少。冶炼的大致方法代码如下：\nGameRegistry.addSmelting(int inputItemID, ItemStack result, float experience);复制代码   这里有两个参数值需要解释一下：物品ID(ItemID)和经验值(experience)。    物品ID，也许就像你想象的那样，是游戏里的某个物品的ID。如果是方块ID就是BlockID，与物品ID同理，这里就只写物品ID了。\n    经验值就是指冶炼完成以后给予玩家的经验值数量。在原版游戏中，这个值的范围从0.1f 到 1.0f ，你可以在Minecraft Wiki's smelting artical找到相关的数值说明。你自己的mod可以使用任何正数，不需要跟随原版游戏的设定。\n    教程的例子演示如何把石头冶炼成石砖，代码如下：\nGameRegistry.addSmelting(Block.stone.blockID, new ItemStack(Block.stoneBrick), 0.1f);复制代码\n元数据(metadata)解释\n    你可能注意到了，元数据和耐久度没办法传到冶炼台里去。这个确实很麻烦，但是“GameRegistry”没有一个“addSmelting”变量来接受元数据。为此，我们可以导入“FurnaceRecipes”，获取它的实例，然后使用它的“addSmelting”方法来添加冶炼公式。\n    下面的例子演示冶炼黑羊毛来得到白羊毛。\nFurnaceRecipes.smelting().addSmelting(Block.cloth.blockID, 15, new ItemStack(Block.cloth, 1, 0), 0.1f);复制代码\n结束\n    现在教程新增的合成公式都加进去了，下面是“tutorial.generic.Generic”类的全部代码：\npackage tutorial.generic;\n\n// 随着教程的进行，这个导入列表会越来越长\nimport net.minecraft.block.Block;\nimport net.minecraft.block.material.Material;\nimport net.minecraft.creativetab.CreativeTabs;\nimport net.minecraft.item.Item;\nimport net.minecraft.item.ItemStack;\nimport net.minecraft.item.crafting.FurnaceRecipes;\nimport net.minecraftforge.common.MinecraftForge;\nimport cpw.mods.fml.common.Mod;\n//import cpw.mods.fml.common.Mod.Init;\nimport cpw.mods.fml.common.Mod.Instance;  //1.6.X使用\n//import cpw.mods.fml.common.Mod.PostInit;\n//import cpw.mods.fml.common.Mod.PreInit;\nimport cpw.mods.fml.common.Mod.EventHandler;\nimport cpw.mods.fml.common.SidedProxy;\nimport cpw.mods.fml.common.event.FMLInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPostInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPreInitializationEvent;\nimport cpw.mods.fml.common.network.NetworkMod;\nimport cpw.mods.fml.common.registry.GameRegistry;\nimport cpw.mods.fml.common.registry.LanguageRegistry;\n\n@Mod(modid = \"Generic\", name = \"Generic\", version = \"0.0.0\")\n@NetworkMod(clientSideRequired = true, serverSideRequired = false, channels = { \"GenericRandom\" })\npublic class Generic {\n\n    @Instance(\"Generic\")\n    public static Generic instance;\n\n    @SidedProxy(clientSide = \"tutorial.generic.client.ClientProxy\", serverSide = \"tutorial.generic.CommonProxy\")\n    public static CommonProxy proxy;\n\n    @EventHandler\n    public void preInit (FMLPreInitializationEvent event) {\n        // Stub Method\n    }\n\n    @EventHandler\n    public void load (FMLInitializationEvent event) {\n        proxy.registerRenderers();\n\n        ItemStack dirtStack = new ItemStack(Block.dirt);\n        ItemStack diamondsStack = new ItemStack(Item.diamond, 64);\n        ItemStack blackWoolStack = new ItemStack(Block.cloth, 42, 15);\n        ItemStack gravelStack = new ItemStack(Block.gravel);\n        ItemStack cobbleStack = new ItemStack(Block.cobblestone);\n\n        GameRegistry.addShapelessRecipe(diamondsStack, dirtStack);\n\n        GameRegistry.addShapelessRecipe(diamondsStack, dirtStack, dirtStack,\n                dirtStack, dirtStack, dirtStack, dirtStack, new ItemStack(\n                        Block.sand), gravelStack, cobbleStack);\n\n        GameRegistry.addRecipe(new ItemStack(Block.cobblestone), \"xy\", \"yx\",\n                'x', dirtStack, 'y', gravelStack);\n\n        GameRegistry.addRecipe(new ItemStack(Block.stone), \"xyx\", \"y y\", \"xyx\",\n                'x', dirtStack, 'y', gravelStack);\n\n        GameRegistry.addSmelting(Block.stone.blockID, new ItemStack(\n                Block.stoneBrick), 0.1f);\n\n        FurnaceRecipes.smelting().addSmelting(Block.cloth.blockID, 15,\n                new ItemStack(Block.cloth, 1, 0), 0.1f);\n    }\n\n    @EventHandler\n    public void postInit (FMLPostInitializationEvent event) {\n        // Stub Method\n    }\n}复制代码\n下一步做什么？\n    下一步我们来建立新的方块和物品：\n    基本物品 ------ 教你建立一个基本的新物品；    基本方块 ------ 教你建立一个基本的新方块。\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "a18964819868",
            "timestamp": 1380889860,
            "txt_content": "辛苦LZ了，支持一个~"
        },
        {
            "author": "番茄茄",
            "timestamp": 1380889920,
            "txt_content": "卤煮辛苦了！~~~···"
        },
        {
            "author": "黑色小白。",
            "timestamp": 1380890280,
            "txt_content": "其实我觉得不用单独做一个教程的"
        },
        {
            "author": "wwww123456wwwww",
            "timestamp": 1388499660,
            "txt_content": "555.代码有问题吧,Eclipse总说代码总是标记\"++\"上有语法错误,在此标记前应是\"*\"\n我哪里出错了求原因\n FurnaceRecipes.smelting().addSmelting(Block.cloth.blockID, 15, new ItemStack(Block.cloth, 1, 0), 0.1f);\n{:10_535:}"
        }
    ]
}