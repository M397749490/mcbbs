{
    "title": "有关于储存物品方式的疑问",
    "author": "870830676",
    "replyCount": 4,
    "timestamp": 1516048980,
    "txt_content": "最近在写插件时遇到需要将一个物品从完完整整包括NBT信息都保存下来\n物品是ItemStack类，而ItemStack类有序列化与反序列化的方法\n是将ItemStack转为Map<String,Object>的方法\n然后我打算使用FileOutputStream和FileInputStream进行将Map保存进一个单独文件里\n然后下次服务器运行就可以进行读取\n\n然而无论是强转Map变成HashMap\n或者new一个HashMap进行手动赋值  \n在输出的时候都会提示该类未实现序列化（NotSerializableException）\n而查了下明明HashMap是实现了Seializable接口的\n\n\n所以想问下大家这样情况该如何处理\n或者大家有什么好的存储物品信息的方法（如果放yml文件里的话读取之类有点麻烦）\n谢谢大家_(:з」∠)_\n",
    "replies": [
        {
            "author": "a103060",
            "timestamp": 1516065780,
            "txt_content": "bukkit的序列化已经实现了File输出输入流的部分，不用再写\n序列化的类需要ConfigurationSerialization.registerClass(类名.class);"
        },
        {
            "author": "Ir.Nep",
            "timestamp": 1516077900,
            "txt_content": "yml读取怎么麻烦呢= =\nyml.set(path, itemStack);\nyml.getItemStack(path);\n相当简便"
        },
        {
            "author": "870830676",
            "timestamp": 1516088160,
            "txt_content": "qzz740827 发表于 2018-1-16 12:45\nyml读取怎么麻烦呢= =\nyml.set(path, itemStack);\nyml.getItemStack(path);\n读取是不麻烦。。麻烦的是我不知道怎么完整遍历ItemStack里面可能出现的所有数据来保存到Yml里。。包括NBT那些啥的_(:з」∠)_。。。"
        },
        {
            "author": "ddyy163",
            "timestamp": 1516090740,
            "txt_content": " 本帖最后由 ddyy163 于 2018-1-16 16:28 编辑 \n\n我自己写的一个ItemStack[]序列和反序列化的库 支持1.7的mod和插件服,及以上所有版本,1.7以下没试过,你有兴趣就看一下吧\n可以在插件加载以后把serializer的byte数组写成文件来看一下源码\n\n\n对了,1.8以上的版本的itemstack已经自带存储NBT了 你可以试下直接存到config里面 和1.7的版本对比下\n\n\n\n\n\n\n\nKWngsLib.jar\n\n\n2018-1-16 16:17 上传\n点击文件名下载附件\n\n\n\n\n11.75 KB, 下载次数: 6\n\n\n\n\n\n"
        }
    ]
}