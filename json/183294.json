{
    "title": "[ForgeMod开发]基础教程：基本方块",
    "author": "hao19891029",
    "replyCount": 8,
    "timestamp": 1381312800,
    "txt_content": " 本帖最后由 hao19891029 于 2013-10-10 16:38 编辑 \n\n注：下面文章基本转自Forge论坛里的教程（原地址），游戏版本为1.6.2。缓慢更新。。。\n索引贴地址：点我 \n目标\n\n学会在Minecraft里新增一个方块\n           ---增加类似泥土、石头、萤石的方块\n学会如何使用下列方法\n           ---setStepSound（设置走在方块上的脚步声）\n           ---setResistance\n           ---setHardness\n           ---setCreativeTab\n学会如何重写下列方法\n           ---idDropped\n           ---quantityDropped提前准备\n\n已经安装了Forge开发环境（教学）建立了你的基础Mod\n引\n    方块（Block）遍布于Minecraft世界的每个角落。除了玩家、怪物、图画、物品等实体以外，Minecraft世界里的所有东西都是一个方块。\n    创建一个简单的方块要比创建一个物品容易一些，因为方块的构造函数是默认公开（public）的。换句话说，方块可以更容易地设置属性。每个方块都有以下的属性：\n方块ID（Block ID）\n    可以运行设置的数值范围是0~4095。教程新建的方块将会从500开始，并且每个新方块的ID增加 1。\n图标（Icon）\n    显示给玩家看的方块图标。\n材料（Material）\n    在接下来的部分会讲到材料Material需要设置的多个属性。\n爆炸范围（Blast Resistance）\n    设定会爆炸的方块爆炸的范围。\n方块亮度（Luminance）\n    设定方块自身的亮度。\n硬度（Hardness）\n    设定收货一个方块需要消耗的时间，或方块有多硬。\n创造模式标签（Creative Tab）\n    设定方块位于创造模式的哪个标签下。\n脚步声（Sounds）\n    设定实体走在方块上面时的脚步声。所有声音的列表位于“Block”类里，以“sound”为前缀。\n\n材料Materials\n    对比一下所有方块的属性，材料是最复杂的一个，好消息是，你不一定要自己建立一个材料，你可以使用游戏自带的材料。材料可以设定一下属性：\n方块是否可以燃烧方块掉落物是否是它自己方块是否可以被活塞等推动方块在地图上显示的颜色方块是不是半透明的（例如叶子或雪）方块是否是表面覆盖物（例如雪）\n你可以在“net.minecraft.src.Material”里找到完整的材料列表。里面的材料应该都可以符合你的要求，如果没有合适你用的，你也可以自己建立一种材料供自己使用。\n基本方块（GenericBlock）\n   在你的“tutorial.generic”包里新建下面的类，并且照着下面代码添加（ 不继承“Block”而新建一种方块也是可行的，这样可以给自定义材质提供很多帮助。）\npackage tutorial.generic;\n\nimport net.minecraft.block.Block;\nimport net.minecraft.block.material.Material;\nimport net.minecraft.client.renderer.texture.IconRegister;\n\npublic class GenericBlock extends Block \n{\n\n        public GenericBlock (int id, Material material) \n        {\n                super(id, material);\n        }\n\n}\n复制代码   上面代码的构造函数调用了父类“Block”的构造方法。从“Block”类唯一能自定义的方法就是重写“registerIcons”来载入对应的材质文件。接下来的设置会在基本类的属性设置方法链里完成。\n基本泥土方块（Generic Dirt）\n    看一下“Block”类，泥土的硬度是 0.5F，脚步声跟砂砾的一样。它使用了“Material.ground”作为它自己的材料。这些都是对我们很有用的信息。\npublic final static Block genericDirt = new GenericBlock(500, Material.ground)\n        .setHardness(0.5F).setStepSound(Block.soundGravelFootstep)\n        .setUnlocalizedName(\"genericDirt\").setCreativeTab(CreativeTabs.tabBlock);\n复制代码如你所见，上面的代码表示声明一个新方块“genericDirt”，它的ID为500，使用“ground”材料。\nsetHardness\n    用浮点数设置，0.5F为泥土硬度，50F为黑曜石硬度。\nsetStepSound\n    如之前所说，所有的声音都可以在“Block”类里找到。\nsetUnlocalizedName\n    给方块设定一个内部名字。\nsetCreativeTab\n    设置创造模式时方块所位于的标签。因为我们创造的是方块，因此让它位于“block”标签下。\n其它所有属性我们都不用设定，使用默认值。\n提示：材料需要导入“net.minecraft.block.material.Material”类。\n注册方块（Block Registration）\n    方块要被Forge注册才能存在。注册使用“GameRegistry.registerBlock(Block block, String internalName)”方法。在基本类的“load”方法里添加以下代码：\nGameRegistry.registerBlock(genericDirt, \"genericDirt\");\n复制代码   上面代码里的内部名字必须是跟你自己的mod其它内部名字不一样的。让方块内部名字独一无二是个好主意，设定的名字最终会保存在一个“id->block”一一对应的map里。\n游戏里显示的名字（Public Names）\n    需要注意的是，内部名字在游戏里是看不见的。如果你在游戏里的方块标签里找到这个方块，你会看到它是没有名字的。为了给方块一个名字，你必须用“LanguageRegistry”来给方块注册游戏里用的名字。示例代码如下：\nLanguageRegistry.addName(Object toName, String readableName);\n复制代码   上面代码里的“Object”对象可以是一个Item，一个ItemStack，或者一个方块。现在我们传一个方块“Block”进去。在“Generic”类的“load”方法里，添加以下的代码：\nLanguageRegistry.addName(genericDirt, \"Generic Dirt\");\n复制代码   现在当玩家拿起一个“generic dirt”，游戏界面将会显示这个方块的名字是“Generic Dirt”。\n对方块起作用的工具（Effective Tools）\n    现在，新的方块已经被创建出来了，但是如果你想用任何东西收获它（除了剑），都需要消耗1.5秒，即使你用一把铲子。所以它还不像泥土。我们使用“setBlockHarvestLevel”来设定能收获它的工具的采集级别属性。示例代码如下：\nMinecraftForge.setBlockHarvestLevel(Block block, String toolClass, int tier);\n复制代码   工具栏名称是“pickaxe”(镐)、“shovel”(铲)、“axe”(斧)中的一个，或者你自己新建的工具类。“tier”属性中，0代表木头，1代表石头，2代表铁，3代表钻石。    让我们用这个方法使得“genericDirt”可以被木铲收获得更快一点：\nMinecraftForge.setBlockHarvestLevel(genericDirt, \"shovel\", 0);\n复制代码这个方法需要导入“net.minecraftforge.common.MinecraftForge”。\n材质\n    给方块赋材质，请看教程：如何给物品方块赋材质。\n普通矿石（Generic Ore）\n    现在，“generic dirt”已经跟游戏里的泥土一样了，是时候进行下一个方块的创建了。\n    “GenericOre”是一种会掉落“Generic Ingot”(该物品在基本物品教程里创建)的矿石。如果你还没有看过创建基本物品的教程，你可以把下面代码里的“Generic.genericIngot”替换成“Item.ingotIron”。或者你也可以现在看看如何创建基本物品的教程，听你的。\n    “Generic Ore”比钻石要硬一些。它将会位于比钻石硬度更高的层次，并且需要使用钻石镐才能收获。\n    接下来，让我们来创建“GenericOre”类：\npackage tutorial.generic;\n\nimport net.minecraft.block.material.Material;\nimport net.minecraft.block.Block;\n\npublic class GenericOre extends Block \n{\n        public GenericOre(int id, Material material) \n        {\n                super(id, material);\n        }\n}\n复制代码   然后，将下面代码添加到上面的“GenericOre”类里的构造函数中：\nsetHardness(4.0F); // 比钻石硬33%\nsetStepSound(Block.soundStoneFootstep);\nsetUnlocalizedName(\"genericOre\");\nsetCreativeTab(CreativeTabs.tabBlock);\n复制代码   接着，进到基本类里，把下面代码添加进去：\npublic final static Block genericOre = new GenericOre(501, Material.rock);\n复制代码  然后再把下面的代码添加带基本类的“load”方法里：\nLanguageRegistry.addName(genericOre, \"Generic Ore\");\nMinecraftForge.setBlockHarvestLevel(genericOre, \"pickaxe\", 3);\nGameRegistry.registerBlock(genericOre, \"genericOre\");\n复制代码\n\n掉落矿石（Dropping Ore）\n    我们选择的材料意味着这个方块被破坏时不会掉落东西。这样似乎跟我们想要的效果有点差别，实际上这意味着只有与设定的采集级别相同或者更高的物品才可以收获这个方块。因此，一把钻石镐或者比钻石镐更高级别的工具才可以收获这个方块来获得“generic ingot”。其它的工具物品只会破坏这个方块而没有任何收获。\n    我们通常不希望一个方块被破坏以后会掉落一个方块。一般我们想掉落的是物品，比如钻石、红石或者“generic ingot”。方块“Block”有一个方法----“idDropeed”可以控制掉落什么物品。它有以下的参数：\npublic int idDropped(int metadata, Random random, int fortune);\n复制代码   第一个参数代表方块的元数据。对于教程的方块，元数据一般是 0。第二个参数代表一个随机数，用来控制物品掉落的概率。第三个参数代表所使用工具的幸运等级。你应该在这个方法里返回你想掉落的物品或方块的ID。如果你不想掉落任何东西，返回 -1。\n    “Generic Ore”目前是一个不会掉落它本身的方块。它应该掉落它自己，然后需要像游戏里其它矿石一样拿到熔炉里冶炼，但是这样的话我们还需要很多步骤，也许你也不想看到那么繁琐的说明，所以这个矿石方块就直接掉落“Generic Ingot”。\n    在“GenericOre”类里添加如下代码：\npublic int idDropped(int par1, Random random, int zero) {\n        return Generic.genericIngot.itemID;\n}\n复制代码提示：你需要导入“java.util.Random”并且要把“genericIngot”参数设置为“Public”的。在“基本物品”教程里，这个参数是设置为“Private”的。\n结束\n下面是本教程的所有代码：\n基本类（Generic）\npackage tutorial.generic;\n\nimport net.minecraft.block.Block;\nimport net.minecraft.creativetab.CreativeTabs;\nimport net.minecraft.item.Item;\nimport net.minecraft.item.ItemStack;\nimport net.minecraft.block.material.Material;\nimport net.minecraftforge.common.ForgeHooks;\nimport net.minecraftforge.common.MinecraftForge;\nimport cpw.mods.fml.common.Mod;\nimport cpw.mods.fml.common.Mod.EventHandler;\nimport cpw.mods.fml.common.Mod.Init;\nimport cpw.mods.fml.common.Mod.Instance;\nimport cpw.mods.fml.common.Mod.PostInit;\nimport cpw.mods.fml.common.Mod.PreInit;\nimport cpw.mods.fml.common.SidedProxy;\nimport cpw.mods.fml.common.event.FMLInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPostInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPreInitializationEvent;\nimport cpw.mods.fml.common.network.NetworkMod;\nimport cpw.mods.fml.common.registry.GameRegistry;\nimport cpw.mods.fml.common.registry.LanguageRegistry;\n\n@Mod(modid=\"generic\", name=\"Generic\", version=\"0.0.0\")\n@NetworkMod(clientSideRequired=true, serverSideRequired=false)\npublic class Generic \n{\n        // 在“基本物品”教程里可以看到如何创建这个物品\n        public static Item genericIngot;\n        \n        public static Block genericDirt;\n        public static Block genericOre;\n        \n        @Instance(value=\"generic\")\n        public static Generic instance;\n        \n        @SidedProxy(clientSide=\"tutorial.generic.client.ClientProxy\",\n                        serverSide=\"tutorial.generic.CommonProxy\")\n        public static CommonProxy proxy;\n        \n        @EventHandler\n        public void preInit(FMLPreInitializationEvent event) \n        {\n                genericIngot = new GenericItem(5001)\n                .setMaxStackSize(16).setUnlocalizedName(\"specificItem\");\ngenericDirt = new GenericBlock(500, Material.ground)\n                .setHardness(0.5F).setStepSound(Block.soundGravelFootstep)\n                .setUnlocalizedName(\"genericDirt\").setCreativeTab(CreativeTabs.tabBlock);\ngenericOre = new GenericOre(501, Material.rock);\n        }\n        \n        @EventHandler\n        public void load(FMLInitializationEvent event) \n        {\n                LanguageRegistry.addName(genericIngot, \"Generic Ingot\");\n                \n                LanguageRegistry.addName(genericDirt, \"Generic Dirt\");\n                MinecraftForge.setBlockHarvestLevel(genericDirt, \"shovel\", 0);\n                GameRegistry.registerBlock(genericDirt, \"genericDirt\");\n                \n                LanguageRegistry.addName(genericOre, \"Generic Ore\");\n                MinecraftForge.setBlockHarvestLevel(genericOre, \"pickaxe\", 3);\n                GameRegistry.registerBlock(genericOre, \"genericOre\");\n                // End Basic Blocks\n                \n                proxy.registerRenderers();\n        }\n        \n        @EventHandler\n        public void postInit(FMLPostInitializationEvent event) \n        {\n                // Stub Method\n        }\n}\n复制代码\n基本方块（GenericBlock）\npackage tutorial.generic;\n\nimport net.minecraft.block.Block;\nimport net.minecraft.block.material.Material;\n\npublic class GenericBlock extends Block \n{\n\n        public GenericBlock (int id, Material material) \n        {\n                super(id, material);\n        }\n}\n复制代码\n\n基本矿石（GenericOre）\npackage tutorial.generic;\n\nimport java.util.Random;\nimport net.minecraft.block.Block;\nimport net.minecraft.block.BlockOre;\nimport net.minecraft.creativetab.CreativeTabs;\nimport net.minecraft.block.material.Material;\n\npublic class GenericOre extends Block\n{\n         public GenericOre(int id, Material material) \n     {\n             super(id, material);\n                \n                setHardness(4.0F); // 33% harder than diamond\n                setStepSound(Block.soundStoneFootstep);\n                setUnlocalizedName(\"genericOre\");\n                setCreativeTab(CreativeTabs.tabBlock);\n        }\n        \n        public int idDropped(int par1, Random random, int par2) {\n                return Generic.genericIngot.itemID;\n        }\n}复制代码\n\n下一步做什么？\n\n基本物品 ------ 教你建立一个基本的新物品；制造和冶炼 --- 教你怎样简单地添加你的物品的合成等。\n\n\n\n",
    "replies": [
        {
            "author": "simon3000",
            "timestamp": 1381312800,
            "txt_content": "找到了，刚刚还没有"
        },
        {
            "author": "q820634195",
            "timestamp": 1381312980,
            "txt_content": "看起来好难哦?!"
        },
        {
            "author": "simon3000",
            "timestamp": 1381312980,
            "txt_content": "我想做一个半径2000的超级TNT方块"
        },
        {
            "author": "kpc",
            "timestamp": 1381313280,
            "txt_content": "好东西，收藏了"
        },
        {
            "author": "khcrane",
            "timestamp": 1381314000,
            "txt_content": "精品教程哦，慢慢学习~"
        },
        {
            "author": "zhaoxingeabc",
            "timestamp": 1381317360,
            "txt_content": "突然发现做一个MC一样的游戏有多累"
        },
        {
            "author": "halfcigarette",
            "timestamp": 1381560300,
            "txt_content": "回帖是美德。。。"
        },
        {
            "author": "卢量",
            "timestamp": 1408016220,
            "txt_content": "????????????????????????????????????????????????????????????????????????????????????????????"
        }
    ]
}