{
    "title": "banip时候发现玩家IP都是127.0.0.1 BC端",
    "author": "phpsyser",
    "replyCount": 9,
    "timestamp": 1475308140,
    "txt_content": "群组服的",
    "replies": [
        {
            "author": "面_码",
            "timestamp": 1475308440,
            "txt_content": "面_码 发表于 2016-10-1 16:03\n这种问题比较隐蔽，也是最近才发现的。有的群组服务器设置了登陆服务器，并且强制玩家只能先从登陆服务器进 ...\n就直接获取真实IP就可以了\nwww.mcbbs.net/thread-399234-1-1.html \n这有"
        },
        {
            "author": "面_码",
            "timestamp": 1475308980,
            "txt_content": "这种问题比较隐蔽，也是最近才发现的。有的群组服务器设置了登陆服务器，并且强制玩家只能先从登陆服务器进入群组，其他子服务器的spigot.yml里面设置了 bungeecord: true ，也就是不能直接用IP+端口访问到子服务器，而是需要通过BC端。\n然后，这些服务器在登陆服务器设置了authme等登陆插件，其他子服务器没设置，并且也关闭了/server等命令权限而使用牌子或星门等传送方式。但是，却发现有人竟然能神不知鬼不觉的绕过了登录服务器直接进入了子服务器，并用OP账号做了乱七八糟的事情。\n这个问题是为什么呢？\n其实，bungeecord: true 只是限制了想登入此服务器必须通过bungeecord端，但是他并没说这个BC端是在哪里的！\n也就是说，其实这些人是在自己电脑本地部署了BungeeCord端，然后直接指向了子服务器，从而能直接不验证密码登入进去。\n事实上，我记得在1.6的时代spigot.yml里面bungeecord: true这附近还有个设置源IP的选项，但是1.7的时候不见了，可能是为了一些多BC指向同子服务器方便吧，但是这给了一些熊孩子可乘之机，让他们不是用密码便登录了OP的账号。\n解决方案：\n\n\n1.【网页面板需要看服务商的设置】将每个子服务器根目录下的server.properties文件中的“server-ip=”填为“server-ip=127.0.0.1”，这样子服务器就只接受来自本地的连接了（不影响子服务器里面获取玩家真实源IP），其他地方的连入请求都会被拒绝。如果你是跨IP的跨服群组，自行修改对应IP即可。\n2.【此方案对网页面板/软件后台服务器无效】据说因为MC协议的漏洞，甚至可以伪造连入的IP（我没证实过，我觉得TCP这种需要握手的通讯应该是无法伪造IP的），为了以防万一，建议在上面的基础上，给你的服务器防火墙规则上面加几条，也就是把指向你的子服务器端口的连入请求一律拒绝。这种行为不影响你的内网BC端的分发请求。或者你把你的服务器放到虚拟机中，然后主机到虚拟机只开放一个BC端的端口，其他端口不开放。这样子也能实现对子服务器的保护\n\n"
        },
        {
            "author": "phpsyser",
            "timestamp": 1475313600,
            "txt_content": " If you wish to use IP forwarding, please enable it in your BungeeCord config as well \n  按照你这样设置 又出现了这个原因啊？有的玩家能进，有的不行 求解决"
        },
        {
            "author": "Arobcher",
            "timestamp": 1475314260,
            "txt_content": "phpsyser 发表于 2016-10-1 17:20\nIf you wish to use IP forwarding, please enable it in your BungeeCord config as well \n  按照你这样 ...\n在你的服务端文件夹下找到\nspigot.yml打开找到\nbungeecord: true 改为 false即可完成复制代码\n如果想获取子服务端的真实IP\n如果需要使用BungeeCord 需要找到BC配置文件下内\nip_forward: false 改为 true复制代码"
        },
        {
            "author": "Arobcher",
            "timestamp": 1475314320,
            "txt_content": "Arobcher 发表于 2016-10-1 17:31\n在你的服务端文件夹下找到\nspigot.yml打开找到\n注: 如果BC ip_forward 启用\n那么子服务端内的 BungeeCord 也需要启用"
        },
        {
            "author": "phpsyser",
            "timestamp": 1475316420,
            "txt_content": "Arobcher 发表于 2016-10-1 17:32\n注: 如果BC ip_forward 启用\n那么子服务端内的 BungeeCord 也需要启用\n那不是冲突了？因为我本来就是这样设置的"
        },
        {
            "author": "Arobcher",
            "timestamp": 1475326980,
            "txt_content": "phpsyser 发表于 2016-10-1 18:07\n那不是冲突了？因为我本来就是这样设置的\n不会冲突\n你需要在 ip_forward设置为 true\nSpigot.yml 里面找到 BungeeCord: 设置为true\n不会冲突\n如果你 BungeeCord 设置为true \nip_forward不设置true 那么就无法进入服务器"
        },
        {
            "author": "Virtual_Fxz",
            "timestamp": 1475399220,
            "txt_content": "电信的IP都是127.0.0.1\n但是他们的端口不同，所以请放心"
        },
        {
            "author": "phpsyser",
            "timestamp": 1475411460,
            "txt_content": "Virtual_Fxz 发表于 2016-10-2 17:07\n电信的IP都是127.0.0.1\n但是他们的端口不同，所以请放心\n？这样banip就会出事情啊"
        }
    ]
}