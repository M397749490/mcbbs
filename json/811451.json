{
    "title": "末地折跃门如何使他不发出信标光柱",
    "author": "_諵城`Tr)L",
    "replyCount": 9,
    "timestamp": 1533284100,
    "txt_content": "\n\n\n\n\n@KM@JRRNQZNEU[UDVLT~0KN.png (279.73 KB, 下载次数: 0)\n\n下载附件\n\n2018-8-3 16:13 上传\n\n\n\n\n\n\nRT 折越门一直闪光,怎么使他不发出这种光柱 \n具体是怎么做\n",
    "replies": [
        {
            "author": "WarbleOrigin",
            "timestamp": 1533285540,
            "txt_content": " 本帖最后由 WO! 于 2018-8-3 18:06 编辑 \nAge 决定末地折跃门方块存在多长时间。当低于200时，方块将会发出一条紫色光柱。                                                                                                                  ——Minecraft中文wiki\n示例：/setblock ~ ~2 ~ minecraft:end_gateway 0 replace {Age:10000}\n从最新帖子点进来，没看板块的下场 丢人\n\n\n\n"
        },
        {
            "author": "_諵城`Tr)L",
            "timestamp": 1533285780,
            "txt_content": "WO! 发表于 2018-8-3 16:39\n示例：/setblock ~ ~2 ~ minecraft:end_gateway 0 replace {Age:10000}\n实体从末地折跃门进入后发出了一道黄色的光柱\n但是设置在高空中无实体\n且我是想问怎么用插件实现\n有什么方法"
        },
        {
            "author": "耗子",
            "timestamp": 1533286080,
            "txt_content": "末地折跃门竟然有信标光柱，我现在才知道，笑:)\n以下是末地折跃门渲染类的代码：\npackage net.minecraft.client.renderer.tileentity;\n\nimport net.minecraft.client.renderer.GlStateManager;\nimport net.minecraft.entity.passive.EntitySheep;\nimport net.minecraft.item.EnumDyeColor;\nimport net.minecraft.tileentity.TileEntityEndGateway;\nimport net.minecraft.tileentity.TileEntityEndPortal;\nimport net.minecraft.util.ResourceLocation;\nimport net.minecraft.util.math.MathHelper;\nimport net.minecraftforge.fml.relauncher.Side;\nimport net.minecraftforge.fml.relauncher.SideOnly;\n\n@SideOnly(Side.CLIENT)\npublic class TileEntityEndGatewayRenderer extends TileEntityEndPortalRenderer\n{\n    private static final ResourceLocation END_GATEWAY_BEAM_TEXTURE = new ResourceLocation(\"textures/entity/end_gateway_beam.png\");\n\n    public void func_180535_a(TileEntityEndPortal p_180535_1_, double p_180535_2_, double p_180535_4_, double p_180535_6_, float p_180535_8_, int p_180535_9_)\n    {\n        GlStateManager.disableFog();\n        TileEntityEndGateway tileentityendgateway = (TileEntityEndGateway)p_180535_1_;\n\n        if (tileentityendgateway.isSpawning() || tileentityendgateway.isCoolingDown())\n        {\n            GlStateManager.alphaFunc(516, 0.1F);\n            this.bindTexture(END_GATEWAY_BEAM_TEXTURE);\n            float f = tileentityendgateway.isSpawning() ? tileentityendgateway.getSpawnPercent(p_180535_8_) : tileentityendgateway.getCooldownPercent(p_180535_8_);\n            double d0 = tileentityendgateway.isSpawning() ? 256.0D - p_180535_4_ : 50.0D;\n            f = MathHelper.sin(f * (float)Math.PI);\n            int i = MathHelper.floor((double)f * d0);\n            float[] afloat = EntitySheep.getDyeRgb(tileentityendgateway.isSpawning() ? EnumDyeColor.MAGENTA : EnumDyeColor.PURPLE);\n            TileEntityBeaconRenderer.renderBeamSegment(p_180535_2_, p_180535_4_, p_180535_6_, (double)p_180535_8_, (double)f, (double)tileentityendgateway.getWorld().getTotalWorldTime(), 0, i, afloat, 0.15D, 0.175D);\n            TileEntityBeaconRenderer.renderBeamSegment(p_180535_2_, p_180535_4_, p_180535_6_, (double)p_180535_8_, (double)f, (double)tileentityendgateway.getWorld().getTotalWorldTime(), 0, -i, afloat, 0.15D, 0.175D);\n        }\n\n        super.func_180535_a(p_180535_1_, p_180535_2_, p_180535_4_, p_180535_6_, p_180535_8_, p_180535_9_);\n        GlStateManager.enableFog();\n    }\n\n    protected int getPasses(double p_191286_1_)\n    {\n        return super.getPasses(p_191286_1_) + 1;\n    }\n\n    protected float getOffset()\n    {\n        return 1.0F;\n    }\n}复制代码\n\n可以看到末地折跃门之所以会有信标的光柱特效，是由于调用了TileEntityBeaconRenderer.renderBeamSegment方法。针对这个，可以采取使用CoreMod修改字节码删除该调用。\n\n当然还有更简单的方法，就是创建一个新的末地折跃门渲染类，将上面的代码全部复制，并删除信标光柱渲染的方法，然后添加到TileEntityRendererDispatcher.renderers中。\nTileEntityRendererDispatcher.renderers.put(TileEntityEndGateway.class, new YourEndGatewayRenderer());复制代码\n\n喜欢的话请给我最高的评分，或者到爱发电给我点辣条钱吧。\n"
        },
        {
            "author": "耗子",
            "timestamp": 1533287040,
            "txt_content": "123zzt123 发表于 2018-8-3 16:43\n实体从末地折跃门进入后发出了一道黄色的光柱\n但是设置在高空中无实体\n且我是想问怎么用插件实现\n如果楼主是以插件实现的话，就不能通过写一个Mod来修改了，可以考虑楼上提到的方案。"
        },
        {
            "author": "_諵城`Tr)L",
            "timestamp": 1533288420,
            "txt_content": "耗子 发表于 2018-8-3 17:04\n如果楼主是以插件实现的话，就不能通过写一个Mod来修改了，可以考虑楼上提到的方案。 ...\n你上面说的那个是mod啊 \n我还以为是插件类"
        },
        {
            "author": "_諵城`Tr)L",
            "timestamp": 1533288720,
            "txt_content": "有存在那种取消事件发生的类吗\n不发出光柱就行"
        },
        {
            "author": "_諵城`Tr)L",
            "timestamp": 1533289500,
            "txt_content": "耗子 发表于 2018-8-3 17:04\n如果楼主是以插件实现的话，就不能通过写一个Mod来修改了，可以考虑楼上提到的方案。 ...\n其实之前用的就是那个  但还是会有光柱产生\n世界调和平之类的都用了\n搞不清楚哪来的实体触发光柱"
        },
        {
            "author": "耗子",
            "timestamp": 1533290220,
            "txt_content": "其实仔细分析上面的代码，便可看到触发信标渲染的条件。\ntileentityendgateway.isSpawning() || tileentityendgateway.isCoolingDown()复制代码\n那么，这两个条件又从哪里来的呢？我们可以看到Minecraft的源代码里是这样的：\npublic boolean isSpawning()\n    {\n        return this.age < 200L;\n    }\n\n    public boolean isCoolingDown()\n    {\n        return this.teleportCooldown > 0;\n    }复制代码这两个值的声明为：    private long age;\n    private int teleportCooldown;复制代码\n也就是说，只要修改age和teleportCooldown值，就可以使信标光柱不渲染，我们再看到Spigot的nms中:\npackage net.minecraft.server.v1_12_R1;\n\npublic class TileEntityEndGateway\n  extends TileEntityEnderPortal\n  implements ITickable\n{\n  private long f;\n  private int g;\n}复制代码\n可以看到确实存在这两个值，名称分别为f和g。因此可能可以通过反射修改这两个值获得楼主想要的结果。"
        },
        {
            "author": "_諵城`Tr)L",
            "timestamp": 1533291120,
            "txt_content": " 本帖最后由 123zzt123 于 2018-8-3 18:15 编辑 \n耗子 发表于 2018-8-3 17:57\n其实仔细分析上面的代码，便可看到触发信标渲染的条件。\n\n那么，这两个条件又从哪里来的呢？我们可以看到Mi ...\n\n\n\n\nJ}C)@ZW3INF}BKZ9V9)1_YU.png (290.87 KB, 下载次数: 4)\n\n下载附件\n\n2018-8-3 18:15 上传\n\n\n\n\n\n话说粒子算不算实体啊还有那个末影粒子\n我发现自身的药水粒子经过折越门就会闪光柱\n\n"
        }
    ]
}