{
    "title": "[1.8][皮肤相关]Universal Skin API 计划",
    "author": "RecursiveG",
    "replyCount": 32,
    "timestamp": 1416293280,
    "txt_content": " 本帖最后由 RecursiveG 于 2014-11-18 21:16 编辑 \n\n计划简介与背景介绍\n距Minecraft 1.8 发布已有一段时间。1.8加入了新的特性，比如：新的人物模型“Alex”和UUID系统。同时，材质的存储也发生了较大的变化。\n因此，旧的皮肤链接形式无法满足新版本的要求，比如，难以自由选择人物模型，无法有效利用材质存储系统导致的多余请求等。\n在这种情况下，本人草拟了Universal Skin API计划，希望提供一个新的，统一的，可扩展的解决方案。\n任何对本计划有兴趣，希望做出贡献的人都欢迎留言。\n本计划由以下三部分组成\nUniversal Skin API计划：\n定义一套用于获取皮肤/披风/人物模型等数据的RESTful API\n定义相关返回数据结构及含义\n目标：\n提供一套统一的可扩展的API，并实现皮肤站与皮肤Mod的解耦合。\n即，只要皮肤站和皮肤Mod均实现该API，即可配合使用。\n目前进度：\n草案已完成，但是需要完善\n需求：\n欢迎任何人提供关于本API的意见来帮助完善草案。\n欢迎任何新点子。Universal Skin Server计划：\n完成一个符合Universal Skin API的开源皮肤服务端，包括后端和前端，提供注册/上传/管理等功能。\n目标：\n使得人人都能架设属于自己的皮肤站\n目前进度：\n正在等待API完善。\n已有一个基于Python的简陋实现可供测试。\n需求：\n需要前端设计师重写前端页面。\n需要用不同语言实现后端，比如PHP。所以欢迎各种程序猿。\n远期幻想（空想？）：\n提高健壮性和安全性，使能够支撑大规模用户。Universal Skin Mod计划 & 目标：\n实现一个符合Universal Skin API的开源皮肤MOD\n目前进度：\n正在等待API完善。\n已有一皮肤Mod，支持1.7.10/1.8，等待API支持加入。皮肤模组链接\n需求：\n各种求测试QAQ相关链接Github已更新\nUniSkinServer实现\nUniSkinAPI草案\n皮肤模组链接\n\n\n\n",
    "replies": [
        {
            "author": "gooding300",
            "timestamp": 1416666060,
            "txt_content": " 本帖最后由 gooding300 于 2014-11-22 22:23 编辑 \n\n居然是沙发，先激动一个\n您好，我是一名非常业余的开发者\n目前高一\n希望可以参与您的计划\n有做过皮服站以及皮肤补丁\n也很希望MC皮肤在国内有个光明的前景\n说实话，我对SkinMe（国内唯一一个大型第三方皮服装）对于盗版皮肤加载标准的确立不是报太大希望\n故非常喜欢这个项目我目前在做的CSL只能加载原始png图像，也是一种局限"
        },
        {
            "author": "嘻嘻嘻呵呵",
            "timestamp": 1416720720,
            "txt_content": "{:10_525:}来卖一个萌~~~~~"
        },
        {
            "author": "Zhuogu",
            "timestamp": 1416907020,
            "txt_content": "很看好这个计划，我应该会参与。但是今年升学申请比较忙，会尽量去做。"
        },
        {
            "author": "狠兵",
            "timestamp": 1416907260,
            "txt_content": "越来越高端了..."
        },
        {
            "author": "Only1Word",
            "timestamp": 1418813040,
            "txt_content": "应该怎么去参与这个计划呢. ( 前端"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1418815140,
            "txt_content": "Only1Word 发表于 2014-12-17 18:44\n应该怎么去参与这个计划呢. ( 前端\n在Github上fork然后开pull request或者开issue都可以。\nPM我也可以"
        },
        {
            "author": "ufo2013",
            "timestamp": 1420604100,
            "txt_content": " 本帖最后由 ufo2013 于 2015-1-7 12:17 编辑 \n\n求教怎么指定皮肤网址，已经安装了该mod，游戏ID改成skinme账号对应的，还是原版的皮肤啊\n\n回错帖了，勿理"
        },
        {
            "author": "simon3000",
            "timestamp": 1434312420,
            "txt_content": " 本帖最后由 simon3000 于 2015-6-15 04:09 编辑 \n\n外行围观一下\n\n手持一个现成的老版本皮肤服务端,不知道要不要,找不到原作者.........自己用过,有些地方都被改了\n链接: http://pan.baidu.com/s/1bnlm8Cv 密码: 8h5n"
        },
        {
            "author": "ーのものー",
            "timestamp": 1451790300,
            "txt_content": "唔。。因为看到mod配置文件中的地址都是直接获取png的，所以窝用PHP简单实现了一个直接获取png的皮肤站：skin.prinzeugen.net，如果mod已经支持json api的话，那窝就把后端改成输出json好了"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1451792700,
            "txt_content": "ーのものー 发表于 2016-1-3 11:05\n唔。。因为看到mod配置文件中的地址都是直接获取png的，所以窝用PHP简单实现了一个直接获取png的皮肤站：sk ...\n新版mod是已经支持了，不过我没有时间维护。\n若是能增加json支持自然是极好的。"
        },
        {
            "author": "ーのものー",
            "timestamp": 1452687960,
            "txt_content": "提交了一个 issue"
        },
        {
            "author": "云闪",
            "timestamp": 1455198000,
            "txt_content": "问个问题，如果正版玩家本身有皮肤，又安装了这个mod并在这个mod的服务端有相应账号，那么皮肤是显示正版的还是mod服务端的？"
        },
        {
            "author": "simon3000",
            "timestamp": 1456586700,
            "txt_content": "没有明白API→_→\n{\n  \"player_name\": \"XiaoMing\",\n  \"last_update\": 1416300800,\n  \"model_preference\": [\"slim\",\"default\"],\n  \"skins\": {\n    \"slim\": \"67cbc70720c4666e9a12384d041313c7bb9154630d7647eb1e8fba0c461275c6\",\n    \"default\": \"6d342582972c5465b5771033ccc19f847a340b76d6131129666299eb2d6ce66e\"\n  }\n  \"cape\": \"970a71c6a4fc81e83ae22c181703558d9346e0566390f06fb93d09fcc9783799\"\n}复制代码\n\n这样的话,那些 '67cbc70720c4666e9a12384d041313c7bb9154630d7647eb1e8fba0c461275c6'\n之类的应该怎么用?\n./textures/67cbc70720c4666e9a12384d041313c7bb9154630d7647eb1e8fba0c461275c6\n./textures/67cbc70720c4666e9a12384d041313c7bb9154630d7647eb1e8fba0c461275c6.png\n模型名称约定又该怎么写呢?"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1456589760,
            "txt_content": "simon3000 发表于 2016-2-27 23:25\n没有明白API→_→/textures/67cbc70720c4666e9a12384d041313c7bb9154630d7647eb1e8fba0c461275c6复制代码\n不要后缀\n模型名称目前只用到slim和default。\n下面那个alex和steve是写错了......"
        },
        {
            "author": "simon3000",
            "timestamp": 1456596120,
            "txt_content": "RecursiveG 发表于 2016-2-28 00:16\n不要后缀\n模型名称目前只用到slim和default。\n下面那个alex和steve是写错了...... ...\n所以就是\n客户端获取 用户名.json\n根据用户名.json里面的skin的这个奇怪字符串\n来获取皮肤?\n那不要png的话改怎么获取?又会出来一个奇怪的格式吗"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1456630380,
            "txt_content": "simon3000 发表于 2016-2-28 02:02\n所以就是\n客户端获取 用户名.json\n根据用户名.json里面的skin的这个奇怪字符串\n只是名字里没有png而已，本质还是个png文件\n你看这个链接： https://skins.minecraft.net/MinecraftSkins/Herobrine.png\n跳转完了也是没有后缀名的，但是也能正常显示"
        },
        {
            "author": "ーのものー",
            "timestamp": 1457143980,
            "txt_content": "记得上次那个要用 php 实现的那个家伙吗\n前几天正式发布了，不知道你知不知道呢 http://www.mcbbs.net/thread-552877-1-1.html\n同时支持 uniskinapi，以及 custom skin loader 提出的 json api。\n另，uniskinmod 似乎不支持更改模型？即使json里 preference model 是 slim，游戏里也还是 steve 模型？"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1457156400,
            "txt_content": "ーのものー 发表于 2016-3-5 10:13\n记得上次那个要用 php 实现的那个家伙吗\n前几天正式发布了，不知道你知不知道呢 http://www.mcbbs.net/thre ...\n已经知道了 https://github.com/RecursiveG/Un ... uecomment-187898245\n1.8的mod大概的确有些奇奇怪怪的问题。。。\n1.9这次换个思路写，估计bug能少一点\ncsl的作者我也有联系，另外USM的API有小更新你可以看一下，应该是向后兼容的。"
        },
        {
            "author": "ーのものー",
            "timestamp": 1457163300,
            "txt_content": "RecursiveG 发表于 2016-3-5 13:40\n已经知道了 https://github.com/RecursiveG/UniSkinServer/issues/6#issuecomment-187898245\n1.8的mod大 ...\n动态皮肤也可以啊，awesome\n不过现在的uniskinmod 还不支持新版本的api吧？看你好像挺忙的\n如果你更新了的话，通知我下:-D"
        },
        {
            "author": "孩紫MC",
            "timestamp": 1458042660,
            "txt_content": "最近在着手开发我的McAdmin 并使之支持此API 但是做完基本步骤 例如生成JSON等 但是我却发现 我的链接形式是xxx.xxx.xxx/?x=xxx&x=xxx这样的访问路径 敢问大神 这样的访问路径是否适用于API"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1458061860,
            "txt_content": "孩紫MC 发表于 2016-3-15 19:51\n最近在着手开发我的McAdmin 并使之支持此API 但是做完基本步骤 例如生成JSON等 但是我却发现 我的链接形式 ...\n不适合，请用rewrite规则"
        },
        {
            "author": "孩紫MC",
            "timestamp": 1458088380,
            "txt_content": "RecursiveG 发表于 2016-3-16 01:11\n不适合，请用rewrite规则\n好的 thx！"
        },
        {
            "author": "孩紫MC",
            "timestamp": 1458088860,
            "txt_content": "再请问下 cfg配置文件中 填写的root链接是否跟Github中的API说明一样根地址\n\n根地址是每个URL请求的开始部分，每个请求的URL均由 根地址与Endpoint连接而成，根地址也唯一地标识了一台服务器 所有请求都是不带参数的GET请求 假设一个服务器的根地址是\n\nhttp://127.0.0.1:8000/skinserver/\n获取玩家Profile的Endpoint是\n\n/{玩家名}.json\n那么，从该服务器获取玩家XiaoMing的皮肤的请求即为\n\nhttp://127.0.0.1:8000/skinserver/XiaoMing.json\n\n"
        },
        {
            "author": "孩紫MC",
            "timestamp": 1458121860,
            "txt_content": " 本帖最后由 孩紫MC 于 2016-3-16 18:22 编辑 \n\n另外还想请教一个问题 当mod抓取材质文件 例如这样PM 06:00:00 > /admin.json\nPM 06:00:04 > /textures/30371f59d9233d2d42aff85757f0bf92.png\nPM 06:00:04 > /textures/bf54cbbac665857466f5499a4f9073c8.png\nPM 06:04:53 > /admin.json\nPM 06:08:14 > /admin.json\nPM 06:08:15 > /textures/30371f59d9233d2d42aff85757f0bf92.png\nPM 06:08:15 > /textures/bf54cbbac665857466f5499a4f9073c8.png\nPM 06:10:38 > /admin.json\n\n那是否应该生成对应的文件于服务端？(生成的数据是存放在MYSQL的)"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1458145200,
            "txt_content": "孩紫MC 发表于 2016-3-16 17:51\n另外还想请教一个问题 当mod抓取材质文件 例如这样\n\n那是否应该生成对应的文件于服务端？(生成的数据是存放 ...\n只要能正常返回数据，是否有实际文件并无所谓。\n另外材质末尾不应带有\".png\"后缀"
        },
        {
            "author": "孩紫MC",
            "timestamp": 1458175440,
            "txt_content": " 本帖最后由 孩紫MC 于 2016-3-17 10:42 编辑 \nRecursiveG 发表于 2016-3-17 00:20\n只要能正常返回数据，是否有实际文件并无所谓。\n另外材质末尾不应带有\".png\"后缀 ...\n{:10_492:}从我贴出的log中显示 是正常返回数据的 但是在实际游戏中显示的并不是返回后的皮肤材质。。但发现了一个问题 人物模型是Alex 请问大神 defaul的模型是以Steve为主还是Alex为主\n"
        },
        {
            "author": "孩紫MC",
            "timestamp": 1458396720,
            "txt_content": "不得不说 加载出来的无论是披风还是皮肤 都是Steve0.0 这是什么回事 数据也是返回正常的OVO"
        },
        {
            "author": "孩紫MC",
            "timestamp": 1458891540,
            "txt_content": " 本帖最后由 孩紫MC 于 2016-3-25 15:42 编辑 \n\n-.-还是有些地方不太懂 从website方面返回的信息来看\n已经正确加载了\n\n再从游戏的log来看 也是加载了数据\n\n\n可以看到已经是加载了数据的(\n\n但是用NP++打开.minecraft/assets/skins的文件 例如 \n\n\n却发现其中的内容是\n\n\n但是游戏中的效果却是\n\n\n（难道说不支持127.0.0.1？）\n_(:3」∠)_不知道是什么原因造成的 导致了皮肤跟披风都是steve"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1458923580,
            "txt_content": "孩紫MC 发表于 2016-3-25 15:39\n-.-还是有些地方不太懂 从website方面返回的信息来看\n已经正确加载了\n1.8可能有问题，请暂时用CSL代替\nhttp://www.mcbbs.net/thread-269807-1-1.html"
        },
        {
            "author": "云闪",
            "timestamp": 1458929100,
            "txt_content": "RecursiveG 发表于 2016-3-26 00:33\n1.8可能有问题，请暂时用CSL代替\nhttp://www.mcbbs.net/thread-269807-1-1.html\n之前说把修改后源码发给你的忘了_(:зゝ∠)_\n应该是1.8的authlib加了域名白名单验证导致的，我贴一下我加的代码：\nAsmTransformer类：\n        hookMethod(\"com.mojang.authlib.yggdrasil.YggdrasilMinecraftSessionService\", \"<clinit>\", \"<clinit>\", \"()V\",\n                new staticTransformer());复制代码    private class staticTransformer implements IMethodTransformer {\n        \n        @Override\n        public void transform(MethodNode mn, String srgName, boolean devEnv, String classObfName) {\n            AbstractInsnNode n = getNthInsnNode(mn, Opcodes.ANEWARRAY, 1);\n            mn.instructions.insertBefore(n, new InsnNode(Opcodes.POP));\n            mn.instructions.insertBefore(n, new InsnNode(Opcodes.ICONST_3));\n            n = getNthInsnNode(mn, Opcodes.PUTSTATIC, 1);\n            mn.instructions.insertBefore(n, new InsnNode(Opcodes.DUP));\n            mn.instructions.insertBefore(n, new InsnNode(Opcodes.ICONST_2));\n            mn.instructions.insertBefore(n, new LdcInsnNode(\"\"));\n            mn.instructions.insertBefore(n, new InsnNode(Opcodes.AASTORE));\n        }\n    }复制代码\n\n本来应该直接改验证域名白名单的方法的_(:зゝ∠)_但是我对字节码不熟，总是出问题，于是直接改了那个储存白名单域名的String数组常量"
        },
        {
            "author": "孩紫MC",
            "timestamp": 1458952320,
            "txt_content": "RecursiveG 发表于 2016-3-26 00:33\n1.8可能有问题，请暂时用CSL代替\nhttp://www.mcbbs.net/thread-269807-1-1.html\nOVO好的~~~~~"
        },
        {
            "author": "孩紫MC",
            "timestamp": 1458963420,
            "txt_content": "RecursiveG 发表于 2016-3-17 00:20\n只要能正常返回数据，是否有实际文件并无所谓。\n另外材质末尾不应带有\".png\"后缀 ...\n我好像发现了个问题 数据文件必须存放在服务端 不然就算返回数据后也无法加载皮肤"
        }
    ]
}