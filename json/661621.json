{
    "title": "C#无边框窗口+任意移动(不使用第三方控件库的情况下)",
    "author": "hxrzsoft",
    "replyCount": 6,
    "timestamp": 1484204340,
    "txt_content": "在Visual Studio 2015 update3上面进行编译的，若需要低版本可以下载VS版本转换器.\n首先，启动VS2015。\n在“开始”中点击“新建项目”\n.Net版本自己选，我先用.Net4来作为例子\n选择“Windows窗体应用程序”\n名称自己写，我先以testprojectWindow作为例子\n以上搞完后如图所示（窗口大小自选）\n\n\n\n\n1.png (98.86 KB, 下载次数: 1)\n\n下载附件\n\n2017-1-12 14:40 上传\n\n\n\n\n\n\n双击form1进入form1.cs：\n\n\n\n\n2.png (62.5 KB, 下载次数: 0)\n\n下载附件\n\n2017-1-12 14:41 上传\n\n\n\n\n\n\n在：\n        public Form1()\n        {\n            InitializeComponent();\n        }\n\n[这个地方]添加以下代码：\nconst int Guying_HTLEFT = 10;\nconst int Guying_HTRIGHT = 11;\nconst int Guying_HTTOP = 12;\nconst int Guying_HTTOPLEFT = 13;\nconst int Guying_HTTOPRIGHT = 14;\nconst int Guying_HTBOTTOM = 15;\nconst int Guying_HTBOTTOMLEFT = 0x10;\nconst int Guying_HTBOTTOMRIGHT = 17;\n\nprotected override void WndProc(ref Message m)\n{\n             switch (m.Msg)\n            {\n                case 0x0084:\n                     base.WndProc(ref m);\n                     Point vPoint = new Point((int)m.LParam & 0xFFFF,\n                        (int)m.LParam >> 16 & 0xFFFF);\n                     vPoint = PointToClient(vPoint);\n                     if (vPoint.X <= 5)\n                         if (vPoint.Y <= 5)\n                            m.Result = (IntPtr)Guying_HTTOPLEFT;\n                   else if (vPoint.Y >= ClientSize.Height - 5)\n                            m.Result = (IntPtr)Guying_HTBOTTOMLEFT;\n                    else m.Result = (IntPtr)Guying_HTLEFT;\n                   else if (vPoint.X >= ClientSize.Width - 5)\n                    if (vPoint.Y <= 5)\n                         m.Result = (IntPtr)Guying_HTTOPRIGHT;\n                       else if (vPoint.Y >= ClientSize.Height - 5)\n                           m.Result = (IntPtr)Guying_HTBOTTOMRIGHT;\n                        else m.Result = (IntPtr)Guying_HTRIGHT;\n                 else if (vPoint.Y <= 5)\n                      m.Result = (IntPtr)Guying_HTTOP;\n                    else if (vPoint.Y >= ClientSize.Height - 5)\n                     m.Result = (IntPtr)Guying_HTBOTTOM;\n                 break;\n             case 0x0201\n                  m.Msg = 0x00A1\n                     m.LParam = IntPtr.Zero; //默认值 \n                  m.WParam = new IntPtr(2);//鼠标放在标题栏内 \n                 base.WndProc(ref m);\n                    break;\n              default:\n                   base.WndProc(ref m);\n                   break;\n          }\n}\n\n//<代码不解释>\n再回到“form1设计中去”\n在“属性窗口”中找到“FormBorderStyle”项，将默认的Sizable改为None；如下图所示\n\n\n\n\n3.png (16.4 KB, 下载次数: 0)\n\n下载附件\n\n2017-1-12 14:43 上传\n\n\n\n\n\n这下你会发现窗口标题栏都不见了，那么可以自定义窗口了；如下图所示\n\n\n\n\n4.png (95.03 KB, 下载次数: 0)\n\n下载附件\n\n2017-1-12 14:45 上传\n\n\n\n\n\n\n运行效果：\n（图片文件过大，所以整合在附件里）\n\n如果想让窗口第一次运行出现在屏幕正中央：\n在“属性窗口”中的startposition项中，将WindowsDefaultLocation改为CenterScrreen即可\n如图所示：\n\n\n\n\n5.png (18.38 KB, 下载次数: 0)\n\n下载附件\n\n2017-1-12 14:51 上传\n\n\n\n\n\n\n\n第一次发这类帖子，有可能做得不好\n请多多谅解\n\n例子下载：本帖附件\n如果无法下载还有百度云：\nhttp://pan.baidu.com/s/1eR6SjHS\n\n\n\n\n\n\n\n\n\n\ntestprojectWindow.zip\n\n\n2017-1-12 14:58 上传\n点击文件名下载附件\n\n\n\n\n47.92 KB, 下载次数: 24\n\n\n附件\n\n\n\n",
    "replies": [
        {
            "author": "heruhai",
            "timestamp": 1484269680,
            "txt_content": "学习了，先研究一下"
        },
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1484293620,
            "txt_content": "我们需要什么？\n萝莉！御姐！WPF！"
        },
        {
            "author": "zmdoyouknow",
            "timestamp": 1487450220,
            "txt_content": " 本帖最后由 zmdoyouknow 于 2017-2-28 20:25 编辑 \n\n定义个鼠标拖动事件，直接DragMove()不就行了吗？\n更正，WPF直接定义MouseMove，后台加上DragMove()即可。\n\nWinForm的话:        private Point mPoint = new Point();\n        private void Form1_MouseDown(object sender, MouseEventArgs e)\n        {\n            mPoint.X = e.X;\n            mPoint.Y = e.Y;\n        }\n        private void Form1_MouseMove(object sender, MouseEventArgs e)\n        {\n            if (e.Button == MouseButtons.Left)\n            {\n                Point myPosittion = MousePosition;\n                myPosittion.Offset(-mPoint.X, -mPoint.Y);\n                Location = myPosittion;\n            }\n        }复制代码前台事件中MouseDown定义为Form1_MouseDown\n                  MouseMove定义为Form1_MouseMove\n也可行"
        },
        {
            "author": "yd52013",
            "timestamp": 1487952840,
            "txt_content": "讲真，c#启动器的教程真心少"
        },
        {
            "author": "YEPENGS",
            "timestamp": 1488189960,
            "txt_content": "88888888888888888888888888"
        },
        {
            "author": "502mc",
            "timestamp": 1488193260,
            "txt_content": "学习了 我刚接触C#"
        }
    ]
}