{
    "title": "[综合]使用HMCL配置服务器客户端自动更新——再也不用担心玩家不会更新客户端了",
    "author": "hy黑影",
    "replyCount": 5,
    "timestamp": 1597635360,
    "txt_content": " 本帖最后由 hy黑影 于 2020-8-17 11:48 编辑 \n使用HMCL启动器配置服务器客户端自动更新\n前言\n\n我自己开设的服务器有很多不同的子服，每个子服的客户端版本呢都不相同，我又希望能整合到一个客户端里面；找了一圈发现那些辅助更新程序只能更新单个客户端版本，而且界面不太美观；甚至一度想自己开发启动器.........这篇帖子的灵感来自于 HMCL 启动器的一个功能 导出服务器自动更新整合包，我觉得可以利用这个功能来代替一些自动更新的辅助程序。整个功能的实现需要：一台有公网IP的服务器、一个客户端整合包、HMCL启动器；如果你都没有，那就换成RMB10元本篇教程默认读者为 萌新，即没有接触过HTTP服务器，网络应用开发，不懂linux系统，惧怕控制台程序\n\n教程\n第一步-租服务器如果你有公网IP的服务器，请跳过这一步百度搜索 腾讯云学生机 或 阿里云学生机可以看到有10元/月 的套餐，如果是阿里云的话选轻量型应用服务器，腾讯云就只有一个套餐系统请选择CentOS 8.0 64位，其他保持默认即可再次确认是否是十元，是的话直接购买；不是的话可能是你已经买过学生套餐第一次购买可能需要实名认证，按照提示操作即可，不需要担心安全问题，都是可靠的大公司\n\n第二步-安装宝塔面板——CentOS 8.0系统\n以腾讯云举例，阿里云同理打开控制台面板，找到刚才租的学生机\n      \n\n\n\n\nQQ图片20200817102214.png (76.69 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 10:22 上传\n\n\n\n\n\n\n选择重置密码\n      \n\n\n\n\nQQ图片20200817102217.png (10.49 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 10:22 上传\n\n\n\n\n\n点击右侧登入按钮，按照说明填写你刚刚重置的密码；之后应该会看到类似这样的提示\n      \n\n\n\n\nQQ图片20200817102500.png (8.29 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 10:25 上传\n\n\n\n\n\n\n不要慌，冷静。如果下面的部分教程失效请去百度宝塔面板，点击Linux->立即安装\n      \n\n\n\n\nQQ图片20200817102845.png (27.42 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 10:29 上传\n\n\n\n\n\n\n回到控制台面板，我们需要开放一些通道让面板通过，选择安全组\n      \n\n\n\n\nQQ图片20200817103425.png (53.23 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 10:34 上传\n\n\n\n\n\n\n点击修改规则，再点击添加规则\n      \n\n\n\n\nQQ图片20200817103703.png (45.76 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 10:37 上传\n\n\n\n\n\n      \n\n\n\n\nQQ图片20200817103625.png (16.79 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 10:37 上传\n\n\n\n\n\n\n按照图中所写添加，懒的话按照下图，想要安全的话按照上图回到那个黑黑的界面里输入 yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh （加粗的文字全部都是，可以复制粘贴），按下回车这时会刷一大片大的英文，等他停下来的时候仔细看，最后一行在问你要不要安装（就是最后显示y/n），输入y并按下回车耐心等待五分钟左右，直到出现这个字样\n      \n\n\n\n\nQQ图片20200817103303.png (10.68 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 10:39 上传\n\n\n\n\n\n\n复制外网面板地址，在打开的页面中，用户名输入username后面的内容，密码输入password后面的内容点击登入，到此为止面板按照完成\n\n\n\n第二步-安装宝塔面板——Windows Server系统\n一般都是vps提供商会使用的系统，学生机不建议安装该系统百度搜索宝塔面板，下载安装Windows版本，安照提示登入\n\n\n\n第三步-搭建HTTP静态文件服务器\n打开刚刚的宝塔面板，一般都会有提示安装套件，选择nginx套装安装等待安装完成后，选择网站，点击添加网站\n      \n\n\n\n\nQQ图片20200817110014.png (32.88 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 11:00 上传\n\n\n\n\n\n在弹出的页面填写网站IP，就是地址栏里面的那个；比如：我的是 http://233.88.233.44:8888/site，那么我就填233.88.233.44另外，租vps的同学请找服务商索要ip地址和开放的端口，比如我要到的是123.21.123.21：6666，那我就把这个填上去\n      \n\n\n\n\nQQ图片20200817110147.png (56.46 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 11:03 上传\n\n\n\n\n\n\n其他保持不变，到此为止你已经搭建好了HTTP静态文件服务器\n\n\n\n\n第四步-制作整合包\n使用HMCL打开你的MC客户端选择你的游戏版本，点击导出整合包\n    \n\n\n\n\n批注 2020-08-17 110847.png (166.38 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 11:09 上传\n\n\n\n\n\n\n选择服务器自动更新整合包填写相关信息：\n       \n\n\n\n\nQQ图片20200817111139.png (10.23 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 11:42 上传\n\n\n\n\n\n\n整合包下载链接前缀：比如我刚刚在宝塔里填的是233.88.233.44，我希望能有版本区分，这个版本代号是a；那么我就填http://172.81.234.44/a vps注意，端口号也要写版本号写1.0 以后更新就写2.0以此类推点击下一步，导出完成\n\n\n\n\n第五步-上传整合包\n\n打开宝塔面板，选择文件，找到相应的目录，在相应IP目录下新建文件夹；比如我刚刚写的版本代号是a，那我就新建a这个文件夹\n\n       \n\n\n\n\nQQ图片20200817111954.png (27.46 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 11:23 上传\n\n\n\n\n\n\n在新建的文件夹里上传刚刚导出的整合包，并解压；成功后如下图\n       \n\n\n\n\nQQ图片20200817112631.png (42.02 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-17 11:26 上传\n\n\n\n\n\n\n\n第六步-分发整合包\n打开新的HMCL启动器，导入刚刚导出的整合包大公告成，现在可以把这个整合包上传给玩家了\n\n\n一些碎碎念\n以后每次更新客户端只要重复第四步和第五步，玩家重启客户端后就会自动接收更新版本号要记得更新默认的更新方式不会删除玩家自己加入的模组，但会下载玩家删除的模组更新覆盖的是整合包导出时的所有数据出网带宽1MB我觉得够用了，除非你想让玩家自己下载全部内容（就是上传的时候删除所有模组，玩家启动时就会开始下载回来，这样的好处是可见的整合包大小变小了）\n\n\n",
    "replies": [
        {
            "author": "丶豆腐",
            "timestamp": 1600917540,
            "txt_content": "楼主啊，我弄了之后访问提示403"
        },
        {
            "author": "hy黑影",
            "timestamp": 1600989660,
            "txt_content": "丶豆腐 发表于 2020-9-24 11:19\n楼主啊，我弄了之后访问提示403\n请问具体哪个页面显示403？"
        },
        {
            "author": "饺子最帅",
            "timestamp": 1601807460,
            "txt_content": "不错 虽然过程有点繁琐 但是还是可以实现的"
        },
        {
            "author": "wunaimzy",
            "timestamp": 1606408080,
            "txt_content": "谢谢楼主教程"
        },
        {
            "author": "阿莎蕊雅同学",
            "timestamp": 1609614120,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        }
    ]
}