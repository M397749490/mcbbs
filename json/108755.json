{
    "title": "各位腐竹 关于反作弊、x射线的一些思路。",
    "author": "zufengyi",
    "replyCount": 12,
    "timestamp": 1365880560,
    "txt_content": " 本帖最后由 zufengyi 于 2013-4-19 21:53 编辑 \n\n本人，重力世界MC腐竹，开服1个月\n经历不少事件，发现玩家作弊行为，但是没得证据也不能随便踢人。\n主要是x射线，透明材质问题，在论坛上搜索解决方案无非是服务器装插件，按照一定的算法计算判断，大大增加了服务器负担。\n经过一晚上的思考，有如下思路：\n为了避免玩家加入x射线插件，我在自己编写的启动器里面加入了文件MD5码检验，检测文件完整性。\n为了避免玩家使用透明材质，我还是使用MD5检验，并且开启了服务器的材质同步。\n目前的缺陷就是 没办法让玩家必须用启动器启动游戏。\n设计思路是 利用一个随机哈希码检验客户端。\n具体步骤如下：\n1.服务器启动监听程序\n2.客户端打开启动器，并且在启动器上登陆-》服务器接收并验证账号密码 返回一个 随机的哈希值\n3.客户端启动游戏，游戏发送用户ID 和随机哈希值 验证登陆。\n这样 玩家没办法跳过启动器，如果跳过启动器，必然没办法获得随机哈希值，服务器遇到这种情况便记录这个ID，并且禁止进入游戏 返回警告内容。\n\n现在 启动器 和监听程序 我都能完成，就是缺少java技术员 修改 登陆验证插件，authme。\n如果你的服务器也遇到这个问题，或者你有能力和兴趣来完成这个插件，\n如果你只是路过，希望能顶一下，谢谢。\n求联系QQ 391611664\n\n\n//——————————————————————————\n 关于本帖，我已经找到可以实现的思路，并且已经试验通过。当然现在讲的知识肯定会超过小学生所掌握的知识，欢迎腐竹们联系我。\n\n关于下面几个论坛问题，我依次回答：\n1.解决不用启动器启动的办法，用自己编写的网关来过滤数据，并验证。关于网关的作用，大家应该了解吧。\n2.关于交互，实际上不需要客户端和jar交互，客户端就是登陆论坛账号（和discuz整合了，需要的可以联系我哈）然后用指定用户名登陆。客户启动器提前和服务器通信开放某个IP数据进入就可以了。\n3.关于防x射线和透明材质，在必须用登陆器登陆的情况下，可以用登陆器验证当前目录文件MD5是否和服务器相同，并且可以在线更新MOD。\n4.关于服务器端技术，主要采用端口转发技术，当然我也不吝啬技术，windows服务器和C++程序实现转发和过滤。\n\n\n\n\nQQ截图20130419215523.png (160.93 KB, 下载次数: 4)\n\n下载附件\n\n2013-4-19 21:52 上传\n\n\n\n\n\n\n有些问题没有处理：\n1.服务器（网关）如果实现给予白名单，或者说指令。\n2.在linux下求高手对c++程序进行调整或翻译。\n\n\n我的世界----重力世界MC http://bbs.zhonglimc.com\n\n\n",
    "replies": [
        {
            "author": "啊憾~",
            "timestamp": 1365882240,
            "txt_content": "沙发哈～支持楼主，我最讨厌作弊的人了"
        },
        {
            "author": "无人永生Grom",
            "timestamp": 1365883380,
            "txt_content": "楼主重复发帖了，拜托"
        },
        {
            "author": "jg.",
            "timestamp": 1365889440,
            "txt_content": "最鄙视那些玩游戏不守规则的人了。"
        },
        {
            "author": "923401895",
            "timestamp": 1365891060,
            "txt_content": "作弊的人最讨厌了，支持楼主"
        },
        {
            "author": "xingyu",
            "timestamp": 1365928740,
            "txt_content": "要是玩家不用楼主的启动器呢？"
        },
        {
            "author": "死亡之翼暴怒",
            "timestamp": 1365929580,
            "txt_content": "顶一个。"
        },
        {
            "author": "qinyudd",
            "timestamp": 1366266720,
            "txt_content": "楼主倒是给了我一个启发，参照市面上的网游防作弊系统，我们可以做一个简略版的，可以在不修改任何minecraft的文件情况下实现这个功能。\nclient运行文件校验守护进程，server端接收client发送的心跳信号，一旦心跳信号断开超过一定时间，或者发现文件校验结果不正确，就把对面的IP或者ID从服务器踢掉。\n自动ban IP倒是可以通过防火墙实现，但是由于可能是局域网共享IP，所以不可靠。我在寻找可靠方法实现自动化实时控制“踢掉某个ID”这个动作。\n\n如果LZ是用linux系统开的服务器，代码和模式实现方面我们可以交流下，java不熟，linux下的工具开发可以提供些帮助。"
        },
        {
            "author": "qinyudd",
            "timestamp": 1366278240,
            "txt_content": " 本帖最后由 qinyudd 于 2013-4-18 17:49 编辑 \n\n而且LZ的方法有严重的BUG，那就是登录器只有启动java的功能， 没有和minecraft的java进程进行数据交互的功能，也就是说，服务端返回给你的哈希只能保存在登录器中，无法在你通过authme验证打/login XXX的时候进行比较。"
        },
        {
            "author": "zufengyi",
            "timestamp": 1366378440,
            "txt_content": "qinyudd 发表于 2013-4-18 14:32 \n楼主倒是给了我一个启发，参照市面上的网游防作弊系统，我们可以做一个简略版的，可以在不修改任何minecraf ...\n已经实现功能，+Q讨论"
        },
        {
            "author": "zufengyi",
            "timestamp": 1366378500,
            "txt_content": "qinyudd 发表于 2013-4-18 17:44 \n而且LZ的方法有严重的BUG，那就是登录器只有启动java的功能， 没有和minecraft的java进程进行数据交互的功能 ...\n已经整合discuz论坛，关于你说的这个交互，我通过自己编写的网关转发实现"
        },
        {
            "author": "zufengyi",
            "timestamp": 1366379280,
            "txt_content": "xingyu 发表于 2013-4-14 16:39 \n要是玩家不用楼主的启动器呢？\n已经更新思路，欢迎讨论"
        },
        {
            "author": "时空之伤",
            "timestamp": 1366416240,
            "txt_content": "支持LZ！！！"
        }
    ]
}