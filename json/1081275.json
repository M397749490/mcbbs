{
    "title": "【已解决】1.12.2关于强化概率的问题",
    "author": "GhostSkyV9",
    "replyCount": 12,
    "timestamp": 1595088360,
    "txt_content": " 本帖最后由 sky295 于 2020-7-19 20:09 编辑 \npackage com.github.sky295.command;\n\nimport com.github.sky295.Qianghua;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\nimport org.bukkit.inventory.ItemStack;\nimport org.bukkit.inventory.meta.ItemMeta;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Random;\n\npublic class qh implements CommandExecutor {\n    @Override\n    public boolean onCommand(CommandSender commandSender, Command command, String s, String[] strings) {\n        Player player=(Player) commandSender;\n        if (command.getName().equalsIgnoreCase(\"qh\")){\n            if (strings.length==1 && player.isOp() && strings[0].equalsIgnoreCase(\"reload\")){\n                Qianghua.instance.reloadConfig();\n                player.sendMessage(\"§c插件重载完成！\");\n                return true;\n            }else if (strings.length==1 && player.isOp() && strings[0].equalsIgnoreCase(\"start\")){\n                try{\n                    this.getChance(player,Qianghua.instance.getConfig().getInt(\"rand\"));\n                    player.sendMessage(\"§6lore设置成功！\");\n                }catch (NullPointerException e){\n                    player.sendMessage(\"§c手中的物品不能为空\");\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public void getChance(Player player,int percentage) {\n        Random random = new Random();\n        int i = random.nextInt(100);\n        if (i >= 0 && i < percentage){\n            ItemStack stack=player.getInventory().getItemInMainHand();\n            ItemMeta meta=stack.getItemMeta();\n            List<String> list=new ArrayList<>();\n            list.add(\"123\");\n            meta.setLore(list);\n            stack.setItemMeta(meta);\n        }\n    }\n}复制代码这是我实现一个简单的强化概率的代码，虽然功能是实现了，但是在写法上望大佬们能帮我看下哪里的不足",
    "replies": [
        {
            "author": "南柯郡守",
            "timestamp": 1595122920,
            "txt_content": " 本帖最后由 南柯郡守 于 2020-7-19 09:49 编辑 \n\n方法getChance没有抛NPE\n你的try catch是看起来就没什么用\n\n\n打扰了  getItemInMainHand会抛\n\n\n\n有精力的话  建议研究下如何新建一个类implement CommandExecute来处理指令"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595123460,
            "txt_content": "南柯郡守 发表于 2020-7-19 09:42\n方法getChance没有抛NPE\n你的try catch是看起来就没什么用\n我这个就是新建类来处理implements CommandExecutor的呀"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595124180,
            "txt_content": "sky295 发表于 2020-7-19 09:51\n我这个就是新建类来处理implements CommandExecutor的呀\n哦吼 没看开头\n\n那么就没必要command.getName.equals\n\n在主类中getCommand(\"qh\").setExecute(new qh())这里就够了\n到了这个qh类中 指令一定就是qh"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595124540,
            "txt_content": "南柯郡守 发表于 2020-7-19 10:03\n哦吼 没看开头\n\n那么就没必要command.getName.equals\n改了，还有哪里有问题，一般那种强化插件的，思路大概是什么样子的"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595125680,
            "txt_content": "sky295 发表于 2020-7-19 10:09\n改了，还有哪里有问题，一般那种强化插件的，思路大概是什么样子的\n没做过强化插件 因为涉及到属性问题 且现在属性插件挺多的\n\n你可以去找几个强化插件反编译下看看思路"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595126460,
            "txt_content": "南柯郡守 发表于 2020-7-19 10:28\n没做过强化插件 因为涉及到属性问题 且现在属性插件挺多的\n\n你可以去找几个强化插件反编译下看看思路 ...\n强化其实也就是setLore这个东西吧，装个属性插件就行了，应该不用考虑到属性问题吧（个人想法）"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595126820,
            "txt_content": "sky295 发表于 2020-7-19 10:41\n强化其实也就是setLore这个东西吧，装个属性插件就行了，应该不用考虑到属性问题吧（个人想法） ...\n也对 只要把lore改了就好\n\n如果只针对某一款属性插件的话\n\n强化也还是挺好做的"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595129640,
            "txt_content": " 本帖最后由 sky295 于 2020-7-19 11:36 编辑 \n南柯郡守 发表于 2020-7-19 10:47\n也对 只要把lore改了就好\n\n如果只针对某一款属性插件的话\n有些插件加混淆代码的是用什么软件弄的？还有，config文件里想要把§换成&，是如何写的"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595138040,
            "txt_content": "sky295 发表于 2020-7-19 11:34\n有些插件加混淆代码的是用什么软件弄的？还有，config文件里想要把§换成&，是如何写的\n ...\n替换字符直接\"\".replace(\"old\",\"new\");\n代码混淆我也不清楚 可以百度下 java 代码混淆"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595141400,
            "txt_content": "南柯郡守 发表于 2020-7-19 13:54\n替换字符直接\"\".replace(\"old\",\"new\");\n代码混淆我也不清楚 可以百度下 java 代码混淆 ...\n    public static String EquipmentLevel(Player player) {\n        Set<String> keys = Qianghua.instance.getConfig().getConfigurationSection(\"Qianghua.Plan\").getKeys(false);\n        Random random = new Random();\n        List<String> list = new ArrayList<>();\n        for (int i = 0; i < keys.size(); i++) {\n            String LevelString = Qianghua.instance.getConfig().getString(\"Qianghua.Plan.\" + i + \".lore\");\n            int rand = random.nextInt(101);\n            ItemStack stack = player.getInventory().getItemInMainHand();\n            ItemMeta meta = stack.getItemMeta();\n            if (rand >= 0 && rand < Qianghua.instance.getConfig().getInt(\"Qianghua.Plan.\" + i + \".rand\")) {\n                list.add(LevelString);\n                meta.setLore(list);\n                stack.setItemMeta(meta);\n                player.sendMessage(\"§6强化成功！\");\n            } else {\n                player.sendMessage(\"§c强化失败！\");\n            }\n        }\n        return null;\n    }\n麻烦看下这段代码逻辑上哪里有问题，我输入指令后，执行这个方法就直接一次性强化，就不是那种输入指令强化一次的"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1595142480,
            "txt_content": "sky295 发表于 2020-7-19 14:50\npublic static String EquipmentLevel(Player player) {\n        Set keys = Qianghua.instance.getC ...\n什么叫一次性强化  和 强化一次"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1595145540,
            "txt_content": "南柯郡守 发表于 2020-7-19 15:08\n什么叫一次性强化  和 强化一次\n正常强化不是点一下加一级，再点一下加二级嘛，我的这个是点一下直接到满级"
        }
    ]
}