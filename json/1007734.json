{
    "title": "如何设置可用脚本的新变量？",
    "author": "炫宙菌",
    "replyCount": 2,
    "timestamp": 1586017800,
    "txt_content": " 本帖最后由 炫宙菌 于 2020-4-5 01:46 编辑 \n\n比如我设计一个天赋系统 用菜单来触发脚本(菜单只是执行脚本而已 可以是外部插件脚本)\n\n脚本如何设置一个新变量\"天赋点\"?\n通过监测天赋点是否足够来执行命令\n譬如力量天赋 我需要2天赋点\n如果我现在不够2(<=2)就刷新此菜单或什么都不动\n如果够(>=2)就扣除2执行命令\n\n以前向用权限控制的 但是权限不能累加,就比如说我没法叠加两个同样的权限然后剥夺也是剥夺两次一样(或许有方法,如果有这个也可以作为答案)\n\n如果用PAPI新加变量\n比如这个表达式?怎么设置\ntianfudian:\n  expression: 'var i = 0; for (var p in BukkitPlayer()) { if (BukkitPlayer()[p].hasPermission(\"tianfudian\")) {i = i+1;};} i.toFixed();'\n  type: string\n\n\n这样效果还是重叠了权限",
    "replies": [
        {
            "author": "炫宙菌",
            "timestamp": 1586021160,
            "txt_content": "# javascript_placeholders.yml\n# You can create custom placeholders which utilize javascript to determine the result of the custom placeholder you create.\n# You can specify if the result is based on a boolean or the actual javascript.\n#\n# If you do not specify a type: the placeholder will default to a boolean type\n# A boolean type must contain a true_result: and false_result:\n#\n# A string type only requires the expression: entry\n#\n# Javascript placeholders can contain normal placeholders in the expression, true_result, or false_result\n# These placeholders will be parsed to the correct values before the expression is evaluated.\n#\n# Your javascript placeholders will be identified by: %javascript_<identifier>%\n#\n# Javascript placeholder format:\n#\n#     BOOLEAN TYPE\n# <identifier>:\n#   expression: <expression>\n#   type: 'boolean'\n#   true_result: <result if expression is true>\n#   false_result: <result if expression is false>\n#\n#     STRING TYPE\n# <identifier>:\n#   expression: <expression>\n#   type: 'string'\n#\n#\n#  ==== ADVANCED VARIABLES ====\n# DO NOT USE THESE VARIABLES UNLESS YOU KNOW WHAT YOU ARE DOING!\n#\n# You can access a few Bukkit API classes and methods using certain keywords:\n#\n# Using \"BukkitServer\" in your javascript will return Bukkit.getServer()\n# You can use any methods inside of the Server class:\n#\n# Example: BukkitServer.getBannedPlayers().size().toFixed()\n# Will return how many players are banned\n#\n# This variable is handy if you want to iterate through all online players.'\n#\n# Using \"BukkitPlayer\" in your javascript will return the Player object you are setting placeholders for.\n# You can use any methods inside of the Player class:\n#\n# Example: BukkitPlayer.hasPermission(\"some.permission\")\n# Will return if the player has a specific permission\n# This variable is handy if you want to check a players permission node, or access other methods inside of\n# the player class for the specified player.\n#\n# More advanced variables are coming soon! Only use these variables if you know what you are doing!\n#\n#  ==================\n#\n#\n# Javascript placeholder examples:\n#\n# millionaire:\n#   expression: '%vaulteco_balance% >= 1000000'\n#   type: 'boolean'\n#   true_result: '&aMillionaire'\n#   false_result: '&cbroke'\n# is_staff:\n#   expression: '\"%vault_group%\" == \"Moderator\" || \"%vault_group%\" == \"Admin\" || \"%vault_group%\" == \"Owner\"'\n#   type: 'boolean'\n#   true_result: '&bStaff'\n#   false_result: '&ePlayer'\n# health_rounded:\n#   expression: 'Math.round(%player_health%)'\n#   type: 'string'\n# staff_online:\n#   expression: 'var i = 0; for (var p in BukkitServer.getOnlinePlayers()) { if (BukkitServer.getOnlinePlayers()[p].hasPermission(\"staff.online\")) {i = i+1;};} i.toFixed();'\n#   type: 'string'\n#\n#\n# You can optionally specify a file that the javascript expression will be loaded from if your expression\n# is bigger than 1 line. To specify javascript be loaded from a file, follow this format:\n#\n# is_op:\n#   expression: 'file: is_op.js'\n#   type: 'string'\n#\n# The following placeholder will attempt to load javascript from the /plugins/PlaceholderAPI/javascripts/is_op.js file\n# if the folder/file exists. If the folder/file does not exist it will be created.\n# You must specify the file extension with the file name. Any file extension is accepted.\n\nmillionaire:\n  expression: '%vaulteco_balance% >= 1000000'\n  type: boolean\n  true_result: '&aMillionaire'\n  false_result: '&cbroke'\nis_staff:\n  expression: '\"%vault_group%\" == \"Moderator\" || \"%vault_group%\" == \"Admin\" || \"%vault_group%\"\n    == \"Owner\"'\n  type: boolean\n  true_result: '&bStaff'\n  false_result: '&ePlayer'\nstaff_online:\n  type: string复制代码\n\n我觉得我已经接近答案了"
        },
        {
            "author": "炫宙菌",
            "timestamp": 1586088900,
            "txt_content": "emm难道就没人回复？"
        }
    ]
}