{
    "title": "1.14指令的几个问题",
    "author": "aa0307bb",
    "replyCount": 15,
    "timestamp": 1565290440,
    "txt_content": "①如何检验玩家手持物品是否带有附魔？\n②如何检验玩家手持物品手持物品的附魔个数？\n③如何给僵尸穿上某装备，且该装备随机带有附魔台的30-39级附魔（如果不可以做到范围，那就只是30级附魔；可以设置成50级附魔吗……）",
    "replies": [
        {
            "author": "ruhuasiyu",
            "timestamp": 1565290440,
            "txt_content": " 本帖最后由 ruhuasiyu 于 2019-8-9 13:09 编辑 \naa0307bb 发表于 2019-8-9 12:17\n也不行……emmmm......为什么要想到加减括号XD\n第一条\nexecute if data entity @s SelectedItem.tag.Enchantments[]复制代码后面可以接run你的命令。注意如果物品只有空的附魔标签也想被检测到的话，就把[]去掉。\n\n\n第二条，我测试了没错误。\n/scoreboard objectives add Size dummy\n/execute store result score @s Size run data get entity @s SelectedItem.tag.Enchantments复制代码\n第三条给你个长例子吧\n\n{\n    \"pools\": [\n        {\n            \"rolls\": 1,\n            \"entries\": [\n                {\n                    \"type\": \"item\",\n                    \"name\": \"minecraft:leather_chestplate\",\n                    \"conditions\": [\n                        {\n                            \"condition\": \"random_chance\",\n                            \"chance\": 0.25\n                        }\n                    ],\n                    \"functions\": [\n                        {\n                            \"function\": \"enchant_with_levels\",\n                            \"treasure\": true,\n                            \"levels\": {\n                                \"min\": 10,\n                                \"max\": 30\n                            }\n                        },\n                        {\n                            \"function\": \"set_damage\",\n                            \"damage\": {\n                                \"min\": 0.01,\n                                \"max\": 0.10\n                            }\n                        }\n                    ]\n                },\n                {\n                    \"type\": \"item\",\n                    \"name\": \"minecraft:iron_chestplate\",\n                    \"conditions\": [\n                        {\n                            \"condition\": \"random_chance\",\n                            \"chance\": 0.25\n                        }\n                    ],\n                    \"functions\": [\n                        {\n                            \"function\": \"enchant_with_levels\",\n                            \"treasure\": true,\n                            \"levels\": {\n                                \"min\": 10,\n                                \"max\": 30\n                            }\n                        },\n                        {\n                            \"function\": \"set_damage\",\n                            \"damage\": {\n                                \"min\": 0.01,\n                                \"max\": 0.10\n                            }\n                        }\n                    ]\n                },\n                {\n                    \"type\": \"item\",\n                    \"name\": \"minecraft:golden_chestplate\",\n                    \"conditions\": [\n                        {\n                            \"condition\": \"random_chance\",\n                            \"chance\": 0.2\n                        }\n                    ],\n                    \"functions\": [\n                        {\n                            \"function\": \"enchant_with_levels\",\n                            \"treasure\": true,\n                            \"levels\": {\n                                \"min\": 10,\n                                \"max\": 30\n                            }\n                        },\n                        {\n                            \"function\": \"set_damage\",\n                            \"damage\": {\n                                \"min\": 0.01,\n                                \"max\": 0.10\n                            }\n                        }\n                    ]\n                },\n                {\n                    \"type\": \"item\",\n                    \"name\": \"minecraft:chainmail_chestplate\",\n                    \"conditions\": [\n                        {\n                            \"condition\": \"random_chance\",\n                            \"chance\": 0.2\n                        }\n                    ],\n                    \"functions\": [\n                        {\n                            \"function\": \"enchant_with_levels\",\n                            \"treasure\": true,\n                            \"levels\": {\n                                \"min\": 10,\n                                \"max\": 30\n                            }\n                        },\n                        {\n                            \"function\": \"set_damage\",\n                            \"damage\": {\n                                \"min\": 0.01,\n                                \"max\": 0.10\n                            }\n                        }\n                    ]\n                },\n                {\n                    \"type\": \"item\",\n                    \"name\": \"minecraft:diamond_chestplate\",\n                    \"conditions\": [\n                        {\n                            \"condition\": \"random_chance\",\n                            \"chance\": 0.1\n                        }\n                    ],\n                    \"functions\": [\n                        {\n                            \"function\": \"enchant_with_levels\",\n                            \"treasure\": true,\n                            \"levels\": {\n                                \"min\": 10,\n                                \"max\": 30\n                            }\n                        },\n                        {\n                            \"function\": \"set_damage\",\n                            \"damage\": {\n                                \"min\": 0.01,\n                                \"max\": 0.10\n                            }\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}复制代码我这里设定了多种胸甲，每种胸甲设定为10-30级附魔以及1%-10%的耐久损伤。我想你应该能看懂吧\n"
        },
        {
            "author": "2594463619",
            "timestamp": 1565308020,
            "txt_content": " 本帖最后由 2594463619 于 2019-8-9 10:33 编辑 \n\n/summon minecraft:zombie ~ ~1 ~ {CustomName:\"{\\\"text\\\":\\\"求关注\\\"}\",HandItems:[{id:\"minecraft:diamond_sword\",Count:1b,tag:{Unbreakable:1,HideFlags:63,Enchantments:[{id:\"minecraft:aqua_affinity\",lvl:1},{id:\"minecraft:aqua_affinity\",lvl:1}]}},{id:\"minecraft:diamond_sword\",Count:1b,tag:{Unbreakable:1,HideFlags:63,Enchantments:[{id:\"minecraft:aqua_affinity\",lvl:1},{id:\"minecraft:aqua_affinity\",lvl:1}]}}],ArmorItems:[{id:\"minecraft:diamond_boots\",Count:1b,tag:{Unbreakable:1,HideFlags:63,Enchantments:[{id:\"minecraft:aqua_affinity\",lvl:1},{id:\"minecraft:aqua_affinity\",lvl:1}]}},{id:\"minecraft:diamond_leggings\",Count:1b,tag:{Unbreakable:1,HideFlags:63,Enchantments:[{id:\"minecraft:aqua_affinity\",lvl:1},{id:\"minecraft:aqua_affinity\",lvl:1}]}},{id:\"minecraft:diamond_chestplate\",Count:1b,tag:{Unbreakable:1,HideFlags:63,Enchantments:[{id:\"minecraft:aqua_affinity\",lvl:1},{id:\"minecraft:aqua_affinity\",lvl:1}]}},{id:\"minecraft:diamond_helmet\",Count:1b,tag:{Unbreakable:1,HideFlags:63,Enchantments:[{id:\"minecraft:aqua_affinity\",lvl:1},{id:\"minecraft:aqua_affinity\",lvl:1}]}}],Rotation:[0f]}\n------------------------------------------------------------------------------------------------------------------------------------------------\nid:minecraft:diamond_sword  这个可以更替成其他物品输入英文id就行\nEnchantments:[{id:\"minecraft:aqua_affinity\",lvl:1},{id:\"minecraft:aqua_affinity\",lvl:1}]\n 这是附魔的属性  ,{id:\"附魔的ID必须要是英文ID\",lvl:等级} 等级可以随意调整这样复制在[ ]里面就行\nhttp://www.zyyapp.com/这是ID查询大全\n\n-------------------------------------------------------------------------------------------------------------------------------------------------\n这里是生成一个带有护甲以及武器的僵尸 但是随机带有这个我不会\n不过你可以设置多个自定义僵尸来给他随机生成\n--------------------------------------------------------------------------------------------------------------------------------------------------\n你所说的检测是什么样的检测\n\n检测手持物品：\n这就很蛋疼了execute我不会\n----------------------------------------------------------------------------------------------------------------------------------------------------\n求最佳\n其实我有点奇怪\n你这样一次问3个问题如果3个人每个人都给了1个问题的答案最后最佳和赏金怎么给？\n\n\n\n\n"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1565312580,
            "txt_content": " 本帖最后由 ruhuasiyu 于 2019-8-9 11:32 编辑 \n\nexecute if data entity @s SelectedItem.tag.Enchantments[]\n\ndata get entity @s SelectedItem.tag.Enchantments\n\n首先创建战利品表，里面的函数设置为附魔并指定等级，然后用loot命令塞到僵尸指定盔甲槽位即可，见 https://www.mcbbs.net/thread-831542-1-5.html\n\n手机端上不好写战利品表……"
        },
        {
            "author": "aa0307bb",
            "timestamp": 1565315220,
            "txt_content": "2594463619 发表于 2019-8-9 07:47\n/summon minecraft:zombie ~ ~1 ~ {CustomName:\"{\\\"text\\\":\\\"求关注\\\"}\",HandItems:[{id:\"minecraft:diamon ...\n为什么summon指令都用上minecraft:zombie了下面却在用远古的testfor"
        },
        {
            "author": "aa0307bb",
            "timestamp": 1565315400,
            "txt_content": "ruhuasiyu 发表于 2019-8-9 09:03\nexecute if data entity @s SelectedItem.tag.Enchantments[]\n\ndata get entity @s SelectedItem.Count\n②你这个检测的应该是手上所持物品的数量？\n我要的是手上所持物品拥有的附魔的数量"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1565316300,
            "txt_content": "aa0307bb 发表于 2019-8-9 09:50\n②你这个检测的应该是手上所持物品的数量？\n我要的是手上所持物品拥有的附魔的数量 ...\n抱歉看错了，SelectedItem.tag.Enchantments[]"
        },
        {
            "author": "aa0307bb",
            "timestamp": 1565319600,
            "txt_content": "ruhuasiyu 发表于 2019-8-9 10:05\n抱歉看错了，SelectedItem.tag.Enchantments[]\n运行/execute store result score @s Size run data get entity @s SelectedItem.tag.Enchantments[] 1\n结果：无法选取SelectedItem.tag.Enchantments[]，只支持数字标签"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1565321040,
            "txt_content": "aa0307bb 发表于 2019-8-9 11:00\n运行/execute store result score @s Size run data get entity @s SelectedItem.tag.Enchantments[] 1\n ...\n把括号[]去掉呢？"
        },
        {
            "author": "Chelover_C60",
            "timestamp": 1565322480,
            "txt_content": " 本帖最后由 CHElover_C60 于 2019-8-9 13:14 编辑 \naa0307bb 发表于 2019-8-9 11:00\n运行/execute store result score @s Size run data get entity @s SelectedItem.tag.Enchantments[] 1\n .../execute store result score @s Size if data entity @s SelectedItem.tag.Enchantments[]复制代码检测当前手持物品附魔数量并保存至Size分数里\n我就这么没存在感吗"
        },
        {
            "author": "aa0307bb",
            "timestamp": 1565324220,
            "txt_content": "ruhuasiyu 发表于 2019-8-9 11:24\n把括号[]去掉呢？\n也不行……emmmm......为什么要想到加减括号XD"
        },
        {
            "author": "aa0307bb",
            "timestamp": 1565327880,
            "txt_content": "CHElover_C60 发表于 2019-8-9 11:48\n检测当前手持物品附魔数量并保存至Size分数里\n我就这么没存在感吗\n其实你回复没多久就已经看到你的指令了，而且我测试过是行的，即使手上物品没有任何附魔时会告知“测试失败”依然可以得到返回值为0，这样子这一个指令就可以同时实现①②功能\n只不过我弄不懂这个if是什么操作，拼命找返回值类型表，没找到，现在才来回复你\n所以……这个if到底是个什么操作……居然可以让非数据类型的NBT返回数值！？"
        },
        {
            "author": "SPGoding",
            "timestamp": 1565328180,
            "txt_content": "aa0307bb 发表于 2019-8-9 13:18\n其实你回复没多久就已经看到你的指令了，而且我测试过是行的，即使手上物品没有任何附魔时会告知“测试失 ...\nif data 返回的是指定的 NBT 路径能够在指定的实体/方块实体上获得的 NBT 标签的个数。\n\n例如，\nexecute if data entity @s SelectedItem.tag.Enchantments[]\n这一条命令中，SelectedItem.tag.Enchantments[] 能够获取到 SelectedItem 标签的 tag 标签下的 Enchantments 列表中的所有元素。if data 可以将这些元素的个数返回，所以你就成功得到了附魔的个数。\n\n\n你可以参考下这个破帖子\nhttps://www.mcbbs.net/thread-808124-1-1.html"
        },
        {
            "author": "aa0307bb",
            "timestamp": 1565328960,
            "txt_content": "SPGoding 发表于 2019-8-9 13:23\nif data 返回的是指定的 NBT 路径能够在指定的实体/方块实体上获得的 NBT 标签的个数。\n\n例如，\n就是翻你的贴子的execute目录没看到if data \n你的贴子是刚刚更新的吗"
        },
        {
            "author": "aa0307bb",
            "timestamp": 1565331960,
            "txt_content": "ruhuasiyu 发表于 2019-8-9 12:49\n第一条\n后面可以接run你的命令。注意如果物品只有空的附魔标签也想被检测到的话，就把[]去掉。\n所以/execute store result score @s Size run data get entity @s SelectedItem.tag.Enchantments\n与/execute store result score @s Size if data entity @s SelectedItem.tag.Enchantments[]是等效的咯？\n\n好的我再次被execute if、NBT路径、各种括号弄晕了"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1565332020,
            "txt_content": " 本帖最后由 ruhuasiyu 于 2019-8-9 14:40 编辑 \naa0307bb 发表于 2019-8-9 14:26\n所以/execute store result score @s Size run data get entity @s SelectedItem.tag.Enchantments\n与/ex ...\ndata和execute if data肯定是不等价，返回的提示信息不一样。不过二者的返回值是一样的。\n\n你这么理解，第一条命令是在获取SelectedItem.tag.Enchantments这个列表的所有内容，data命令不能接受像SelectedItem.tag.Enchantments[]这样的,具有多个NBT的值，所以只有第一种写法。如果是列表，返回元素个数；如果是{}，返回个数，如果是数值，返回数值，字符返回长度。\n\n第二条是在问有没有SelectedItem.tag.Enchantments[]这样的nbt。没有返回0，有返回个数。\n\n所以你可以想想第二种做法的SelectedItem.tag.Enchantments和SelectedItem.tag.Enchantments[]，分别在下面三种情形返回啥，我想这有助于你理解if data以及有无[]的差异\n/give @s diamond_axe{Enchantments:[]}\n/give @s diamond_axe{Enchantments:[{}]}\n/give @s diamond_axe{Enchantments:[{id:\"minecraft:silk_touch\",lvl:1s}]}\n复制代码\n"
        }
    ]
}