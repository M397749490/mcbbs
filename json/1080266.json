{
    "title": "如何修改NPCMOD中NPC的阵营",
    "author": "酸性NaOH",
    "replyCount": 4,
    "timestamp": 1594980780,
    "txt_content": "如题，如何修改NPCMOD中NPC的阵营，不过要明确的一点，这里修改阵营不是指的在创建NPC时修改阵营，而是在如何在游戏过程中，某些事件发生后（如某个特定的NPC被杀死，或者是某个任务被完成），使得一些NPC的阵营改变。",
    "replies": [
        {
            "author": "猜猜谁是谁",
            "timestamp": 1594980780,
            "txt_content": "可以通过npc脚本实现 如：特定NPC被杀死后触发死亡钩子 创建world的一个tempdata 需要换阵营的npc侦测到后就能更换\n如需提供脚本请告诉我你的游戏版本"
        },
        {
            "author": "weiqi2008",
            "timestamp": 1594983360,
            "txt_content": "不能，只能用点数得减少来使某个阵营的NPC与玩家敌对"
        },
        {
            "author": "酸性NaOH",
            "timestamp": 1594993920,
            "txt_content": "猜猜谁是谁 发表于 2020-7-17 19:38\n可以通过npc脚本实现 如：特定NPC被杀死后触发死亡钩子 创建world的一个tempdata 需要换阵营的npc侦测到后 ...\n谢谢啦（发一下脚本吧，我的游戏版本是1.12.2）"
        },
        {
            "author": "猜猜谁是谁",
            "timestamp": 1595054340,
            "txt_content": "酸性NaOH 发表于 2020-7-17 21:52\n谢谢啦（发一下脚本吧，我的游戏版本是1.12.2）\n脚本语言使用JavaScript 游戏前请先将脚本引擎文件nashorn.jar放入mods文件夹中\n\n\n\nnashorn.jar\n(1.93 MB, 下载次数: 0)\n\n\n\n2020-7-18 14:32 上传\n点击文件名下载附件\n脚本引擎文件\n\n\n\n\n\n\n\n以下为脚本部分：\n要死的特定npc脚本\nfunction died(e){\ne.npc.world.tempdata.put(\"npcdied\",1);//死亡时设置world的npcdied值为1\n}\n复制代码需改变阵营npc脚本\nfunction tick(e){\n        var faction1= 1 ;//要成为的阵营id，可自定义\n        var faction2= 0 ;//原阵营id，重置用，可自定义\n        var temp=e.npc.world.tempdata.get(\"npcdied\");\n        if(temp!=null&&temp==1){\n                e.npc.setFaction(faction1);\n        }//检测到world的npcdied值为1时更改阵营\n        else e.npc.setFaction(faction2);\n}\n\nfunction interact(e){\n        if(e.player.getGamemode()==1){//创造模式玩家右键后重置状态\n                e.npc.world.tempdata.remove(\"npcdied\");\n                e.npc.say(\"重置成功\")\n        }\n}复制代码以下为注解内容：\n脚本思路为特定npc死亡后将npcdied值放入world的tempdata中，需改变阵营的npc侦测到npcdied值后改变阵营，由于该操作为一次性，故加入了重置函数，在创造模式下右键改变阵营的npc可以重置到特定npc死亡之前的阵营，另外需要自定义前后阵营id，详见“需改变阵营npc脚本”的注释\n如对该重置方式感到不妥可再提出要求\n"
        }
    ]
}