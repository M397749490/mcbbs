{
    "title": "CustomNPC 用脚本写的 鉴定与锻造(强化) 非常适合 RPG 来使用",
    "author": "Shepred",
    "replyCount": 10,
    "timestamp": 1574768100,
    "txt_content": " 本帖最后由 Shepred 于 2019-11-26 20:01 编辑 \n\n Custom Npc -脚本 【来自PCD排版】\n \n起因：找不到关于Sponge 锻造类型的插件 (将近半年前或者更久前写的)\n结果：自己手写吧（原创绝无抄袭）\n还有一点，如果你连点基础都没有.我劝告你.别看下去，反正你也看不懂！\n测试 1.12.2 多人 单人 都可以运行\n 【武器锻造-代码】- 就几行代码不多\n\nfunction interact(e){\ntry{\n                var Hand_Item = e.player.getMainhandItem();\n                var Hand_Item_Name = Hand_Item.getDisplayName();\n                var InvNbt = e.player.getInventory().getItems()[8].getNbt().getList(\"AttributeModifiers\",10)[0];\n                var Probability = InvNbt.getDouble(\"Amount\")*0.01;\n                var gemName = e.player.getInventory().getItems()[8].getDisplayName();\n                var num = Math.random() * 100 ;\n                var nums = parseInt(num) + 1 ;\n                //getLore 1-11\n                var Lore0 = Hand_Item.getLore()[0];\n                var Lore1 = Hand_Item.getLore()[1];\n                var Lore2 = Hand_Item.getLore()[2];\n                var Lore3 = Hand_Item.getLore()[3];\n                var Lore4 = Hand_Item.getLore()[4];\n                var Lore5 = Hand_Item.getLore()[5];\n                var Lore6 = Hand_Item.getLore()[6];\n                var Lore7 = Hand_Item.getLore()[7];\n                var Lore8 = Hand_Item.getLore()[8];\n                var Lore9 = Hand_Item.getLore()[9];\n                var Lore10 = Hand_Item.getLore()[10];\n                var Lore11 = Hand_Item.getLore()[11];\n                var Message0 = \"§2锻造成功! \"\n                var Message1 = \"§4锻造失败! \"\n                //获取属性\n                var AttackDamage = Hand_Item.getAttribute(\"generic.attackDamage\");//点击伤害\n                var AttckSpeed = Hand_Item.getAttribute(\"generic.attackDamage\");//攻速\n                var ReachDistance = Hand_Item.getAttribute(\"generic.reachDistance\")*0.01//攻击范围\n                var key;\n                //获取Lore\n                        if(Lore0 == \"§9§lRPG装备-武器\"){\n                                if(gemName == \"§2§l初级锻造之石\"){\n                                        if(Lore11 == \"§6强化: 0\"){\n                                                var N = ReachDistance*AttackDamage+AttackDamage\n                                                var Lorex = \"§6强化: +1\"\n                                                Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                        }\n                                        if(Lore11 == \"§6强化: +1\"){\n                                                var N = ReachDistance*AttackDamage+AttackDamage\n                                                var Lorex = \"§6强化: +2\"\n                                                Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                        }\n                                        if(Lore11 == \"§6强化: +2\"){\n                                                var N = ReachDistance*AttackDamage+AttackDamage\n                                                var Lorex = \"§6强化: +3\"\n                                                Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                        }\n                                        if(Lore11 == \"§6强化: +3\"){\n                                                var N = ReachDistance*AttackDamage+AttackDamage\n                                                var Lorex = \"§6强化: +4\"\n                                                Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                        }\n                                        if(Lore11 == \"§6强化: +4\"){\n                                                var N = ReachDistance*AttackDamage+AttackDamage\n                                                var Lorex = \"§6强化: +5\"\n                                                Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                        }\n                                        if(Lore11 == \"§6强化: +5\"){\n                                                if(nums>=0&&nums<=90){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +6\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                        if(Lore11 == \"§6强化: +6\"){\n                                                if(nums>0&&nums<=50){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +7\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                        if(Lore11 == \"§6强化: +7\"){\n                                                if(nums>0&&nums<=30){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +8\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                        if(Lore11 == \"§6强化: +8\"){\n                                                if(nums>0&&nums<=15){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +9\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                        if(Lore11 == \"§6强化: +9\"){\n                                                if(nums>0&&nums<=10){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +10\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                        if(Lore11 == \"§6强化: +10\"){\n                                                if(nums>0&&nums<=5){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +11\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                        if(Lore11 == \"§6强化: +11\"){\n                                                if(nums>0&&nums<=4){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +12\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                        if(Lore11 == \"§6强化: +12\"){\n                                                if(nums>0&&nums<=3){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +13\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                        if(Lore11 == \"§6强化: +13\"){\n                                                if(nums>0&&nums<=2){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +14\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                        if(Lore11 == \"§6强化: +14\"){\n                                                if(nums==1){\n                                                        var N = ReachDistance*AttackDamage+AttackDamage\n                                                        var Lorex = \"§6强化: +15\"\n                                                        Hand_Item.setAttribute(\"generic.attackDamage\",N,0)\n                                                        Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lorex])\n                                                        e.player.message(\"[Airde 锻造系统]: \"+Message0+Lorex)\n                                                        }else{\n                                                                e.player.message(\"[Airde 锻造系统]: \"+Message1)\n                                                        }\n                                        }\n                                }\n                }\n        }catch(eer){\n                e.npc.sayTo(e.player,\"§a你手上拿的是 §6\"+Hand_Item_Name+\" §a检查是否是 §6RPG装备\")\n                e.npc.sayTo(e.player,\"§a以及 §6玩家物品栏 §a中的 §6最后一格 §a是否放置了 §b[§5锻造之石§b]\")\n        }\n}\n\n复制代码\n设计思路：\n  - 通过getLore进行判定 从而赋予玩家 属性 例如：伤害之类的. \n讲解:\n - 懒得讲，自己看\n\n 【武器鉴定-代码】- 这次真的就几行\n\nfunction interact(e){\ntry{\n        var Hand_Item = e.player.getMainhandItem();\n        var PJ;\n        var Color;\n    var num = Math.random() * 1000 ;\n    var nums = parseInt(num) + 1 ;        \n        var Hand_Item_Name = Hand_Item.getDisplayName();\n        var Lvel = e.player.getExpLevel();\n        if(Hand_Item.getLore()[8] == \"§6==>[§4未鉴定§6]<==\"){\n                if(Hand_Item.getLore()[0] == \"§9§lRPG装备-武器\"){\n                                if(nums>=0&&nums<=500){\n                                        PJ = \"普通\"\n                                        Color = \"§f\"\n                                        var Dnum = Math.random() * 10 ;\n                                        var Dnums = parseInt(Dnum) + 1 ;\n                                        Hand_Item.setAttribute(\"generic.attackDamage\",Dnums+2,0);\n                                        Hand_Item.setAttribute(\"generic.attackSpeed\",0.8,0);\n                                        Hand_Item.setAttribute(\"generic.reachDistance\",0.1,0);\n                                }\n                                if(nums>500&&nums<=800){\n                                        PJ = \"精致\"\n                                        Color = \"§e\"\n                                        var Dnum = Math.random() * 18 ;\n                                        var Dnums = parseInt(Dnum) + 10 ;\n                                        Hand_Item.setAttribute(\"generic.attackDamage\",Dnums+2,0);\n                                        Hand_Item.setAttribute(\"generic.attackSpeed\",0.9,0);\n                                        Hand_Item.setAttribute(\"generic.reachDistance\",0.2,0);\n                                }\n                                if(nums>800&&nums<=980){\n                                        PJ = \"传奇\"\n                                        Color = \"§6\"\n                                        var Dnum = Math.random() * 24 ;\n                                        var Dnums = parseInt(Dnum) + 18 ;\n                                        Hand_Item.setAttribute(\"generic.attackDamage\",Dnums+2,0);\n                                        Hand_Item.setAttribute(\"generic.attackSpeed\",1.0,0);\n                                        Hand_Item.setAttribute(\"generic.reachDistance\",0.4,0);\n                                }\n                                if(nums>980&&nums<=999){\n                                        PJ = \"史诗\"\n                                        Color = \"§d\"\n                                        var Dnum = Math.random() * 80 ;\n                                        var Dnums = parseInt(Dnum) + 50 ;\n                                        Hand_Item.setAttribute(\"generic.attackDamage\",Dnums+2,0);\n                                        Hand_Item.setAttribute(\"generic.attackSpeed\",1.2,0);\n                                        Hand_Item.setAttribute(\"generic.reachDistance\",0.6,0);\n                                }\n                                if(nums==1000){\n                                        PJ = \"太古\"\n                                        Color = \"§4\"\n                                        var Dnum = Math.random() * 320 ;\n                                        var Dnums = parseInt(Dnum) + 180 ;\n                                        Hand_Item.setAttribute(\"generic.attackDamage\",Dnums+2,0);\n                                        Hand_Item.setAttribute(\"generic.attackSpeed\",1.6,0);\n                                        Hand_Item.setAttribute(\"generic.reachDistance\",1,0);\n                                }\n                                //这里是定义Lore格式\n                                var Lore0 = \"§9§lRPG装备-武器\"\n                                var Lore1 = \"§b§l================================\"\n                                var Lore2 = \"§f品级: \"+Color+PJ\n                                var Lore3 = \"§f宝石镶嵌:\"\n                                var Lore4 = \"§f<未镶嵌>\"\n                                var Lore5 = \"§f<未镶嵌>\"\n                                var Lore6 = \"§f<未镶嵌>\"\n                                var Lore7 = \"§b§l================================\"\n                                var Lore8 = \"§6==>[§a已鉴定§6]<==\"\n                                var Lore9 = \"§6等级: \"+Lvel\n                                var Lore10 = \"§6来源：世界\"\n                                var Lore11 = \"§6强化: 0\"\n                                Hand_Item.setLore([Lore0,Lore1,Lore2,Lore3,Lore4,Lore5,Lore6,Lore7,Lore8,Lore9,Lore10,Lore11]);\n                                e.player.message(\"&b[&dAirde &5鉴定系统&b] &a完成鉴定！\"+\"品级 ：\"+PJ)\n                        }\n                }\n        else{\n                e.player.message(\"&b[&dAirde &5鉴定系统&b] &a该物品已鉴定 或者 手里是空的\")\n        }\n        }catch(err){\n                e.npc.sayTo(e.player,\"§a你手上拿的是 §6\"+Hand_Item_Name+\" §a检查是否是 §6RPG装备\")\n        }\n}复制代码\n设计思路：\n  - 通过任意方式得到带有指定Lore 标签的武器，就可以进行鉴定 赋予一个的格式.也可以说是一个装备的初始化.\n用于 锻造脚本 进行锻造. 请配合锻造脚本一起使用。 \n讲解:\n - 懒得讲，自己看\n\n\n",
    "replies": [
        {
            "author": "617731522",
            "timestamp": 1574769180,
            "txt_content": "有写脚本的功夫，另外写个原创MOD可能也不难吧，发挥空间还更大点"
        },
        {
            "author": "Shepred",
            "timestamp": 1574769780,
            "txt_content": "617731522 发表于 2019-11-26 19:53\n有写脚本的功夫，另外写个原创MOD可能也不难吧，发挥空间还更大点\nMod 对于 使用者来讲 是挺简单的. 但是自定义功能方面就差了很多\n脚本 根据自己的 喜好进行定义就可以了.\n缺点就是 入门 比较难"
        },
        {
            "author": "617731522",
            "timestamp": 1574770860,
            "txt_content": "Shepred 发表于 2019-11-26 20:03\nMod 对于 使用者来讲 是挺简单的. 但是自定义功能方面就差了很多\n脚本 根据自己的 喜好进行定义就可以了. ...\n我能想到的这个脚本的好处就是便携，写好脚本和注释给其他人修改使用，或者做好的脚本直接分享，而且不需要下载，只要复制代码就行了"
        },
        {
            "author": "粘兽",
            "timestamp": 1574771100,
            "txt_content": "重复性极高的代码"
        },
        {
            "author": "Shepred",
            "timestamp": 1574772360,
            "txt_content": "粘兽 发表于 2019-11-26 20:25\n重复性极高的代码\n能力有限，已经是一个普通玩家能做出来的极限了"
        },
        {
            "author": "桀诺",
            "timestamp": 1581507540,
            "txt_content": "lore0是什么意思啊大佬awa"
        },
        {
            "author": "木薯",
            "timestamp": 1581511620,
            "txt_content": "可惜我不会变成脚本。。。。"
        },
        {
            "author": "gzade风殇",
            "timestamp": 1581556200,
            "txt_content": "66666666666666"
        },
        {
            "author": "kuaile412",
            "timestamp": 1590836340,
            "txt_content": "足够用了，谢谢大佬，我研究研究"
        },
        {
            "author": "Lemon_ccc",
            "timestamp": 1595266680,
            "txt_content": "感谢楼主的教程"
        }
    ]
}