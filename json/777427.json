{
    "title": "[1.7.10 mod]如何写好一个管道",
    "author": "skeleton_321",
    "replyCount": 5,
    "timestamp": 1517115120,
    "txt_content": "如题。bc的源码我翻过好几遍了，但是因为能力有限，就是没找到怎么处理模型的。\n之后又翻了一下栅栏的源代码，管道之间模型倒是连接上了，但是拐角的模型有问题，而且手上的方块模型是在动态变化的……想问一下该怎么处理。下面是图片\n\n\n\n\n\npuestion1.png (57.06 KB, 下载次数: 1)\n\n下载附件\n\n拐角处模型问题\n2018-1-28 12:49 上传\n\n\n\n\n拐角模型问题\n\n\n\n\n\nquestion2-1.png (38.06 KB, 下载次数: 0)\n\n下载附件\n\n物品栏中模型问题1\n2018-1-28 12:49 上传\n\n\n\n\n物品栏物品模型问题1\n\n\n\n\n\nquestion2-2.png (22.7 KB, 下载次数: 0)\n\n下载附件\n\n物品栏中模型问题2\n2018-1-28 12:49 上传\n\n\n\n\n物品栏物品模型问题2\n\n\n希望有人能够解答！\n",
    "replies": [
        {
            "author": "...52852852222",
            "timestamp": 1517127360,
            "txt_content": "Mcbbs有你更精彩~"
        },
        {
            "author": "0x3B800001",
            "timestamp": 1517141580,
            "txt_content": "不清楚楼主怎么处理的，能否给出源码"
        },
        {
            "author": "skeleton_321",
            "timestamp": 1517200620,
            "txt_content": "丶皇天 发表于 2018-1-28 20:13\n不清楚楼主怎么处理的，能否给出源码\n就是用的栅栏的源码，重写了addCollisionBoxesToList和setBlockBoundsBasedOnState，通过检测管道周围是否有管道来修改模型"
        },
        {
            "author": "0x3B800001",
            "timestamp": 1517295240,
            "txt_content": "你这样子说的太笼统，即便你是仿照栅栏的代码我也无法确定你写的是否正确。"
        },
        {
            "author": "skeleton_321",
            "timestamp": 1517384400,
            "txt_content": "丶皇天 发表于 2018-1-30 14:54\n你这样子说的太笼统，即便你是仿照栅栏的代码我也无法确定你写的是否正确。 ...\n这里是我写的代码，写的很渣 = =\n@Override\n        public void addCollisionBoxesToList(World world, int x, int y, int z, AxisAlignedBB AABB, List list, Entity entity)\n        {\n                boolean flag1 = canConnectPipeTo(world, x, y, z,  1, 0, 0);\n                boolean flag2 = canConnectPipeTo(world, x, y, z, -1, 0, 0);\n                boolean flag3 = canConnectPipeTo(world, x, y, z,  0, 1, 0);\n                boolean flag4 = canConnectPipeTo(world, x, y, z,  0,-1, 0);\n                boolean flag5 = canConnectPipeTo(world, x, y, z,  0, 0, 1);\n                boolean flag6 = canConnectPipeTo(world, x, y, z,  0, 0,-1);\n                \n                float x1 = 0.25F;\n                float y1 = 0.25F;\n                float z1 = 0.25F;\n                float x2 = 0.75F;\n                float y2 = 0.75F;\n                float z2 = 0.75F;\n                \n                if(flag1)\n                        x2 = 1.0F;\n                if(flag2)\n                        x1 = 0.0F;\n                if(flag3)\n                        y2 = 1.0F;\n                if(flag4)\n                        y1 = 0.0F;\n                if(flag5)\n                        z2 = 1.0F;\n                if(flag6)\n                        z1 = 0.0F;\n                this.setBlockBounds(x1, y1, z1, x2, y2, z2);\n                super.addCollisionBoxesToList(world, x, y, z, AABB, list, entity);\n        }\n        \n        private boolean canConnectPipeTo(IBlockAccess p_149719_1_, int x, int y, int z, int offestX, int offestY, int offestZ) {\n                \n                Block block = p_149719_1_.getBlock(x + offestX, y + offestY, z + offestZ);\n                \n                return block.getUnlocalizedName().equals(this.getUnlocalizedName());\n        }\n        \n        @Override\n        public void setBlockBoundsBasedOnState(IBlockAccess p_149719_1_, int x, int y, int z) \n        {\n                boolean flag1 = canConnectPipeTo(p_149719_1_, x, y, z,  1, 0, 0);\n                boolean flag2 = canConnectPipeTo(p_149719_1_, x, y, z, -1, 0, 0);\n                boolean flag3 = canConnectPipeTo(p_149719_1_, x, y, z,  0, 1, 0);\n                boolean flag4 = canConnectPipeTo(p_149719_1_, x, y, z,  0,-1, 0);\n                boolean flag5 = canConnectPipeTo(p_149719_1_, x, y, z,  0, 0, 1);\n                boolean flag6 = canConnectPipeTo(p_149719_1_, x, y, z,  0, 0,-1);\n                \n                float x1 = 0.25F;\n                float y1 = 0.25F;\n                float z1 = 0.25F;\n                float x2 = 0.75F;\n                float y2 = 0.75F;\n                float z2 = 0.75F;\n                \n                if(flag1)\n                        x2 = 1.0F;\n                if(flag2)\n                        x1 = 0.0F;\n                if(flag3)\n                        y2 = 1.0F;\n                if(flag4)\n                        y1 = 0.0F;\n                if(flag5)\n                        z2 = 1.0F;\n                if(flag6)\n                        z1 = 0.0F;\n                this.setBlockBounds(x1, y1, z1, x2, y2, z2);\n                \n        }\n        \n        @Override\n        public boolean renderAsNormalBlock()\n    {\n        return false;\n    }\n\n        @Override\n    public boolean getBlocksMovement(IBlockAccess p_149655_1_, int p_149655_2_, int p_149655_3_, int p_149655_4_)\n    {\n        return false;\n    }\n\n        @Override\n        @SideOnly(Side.CLIENT)\n    public boolean shouldSideBeRendered(IBlockAccess p_149646_1_, int p_149646_2_, int p_149646_3_, int p_149646_4_, int p_149646_5_)\n    {\n        return true;\n    }复制代码\n\n\n\n"
        }
    ]
}