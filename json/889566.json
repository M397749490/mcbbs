{
    "title": "vault调用出现错误。。。。",
    "author": "橡皮233",
    "replyCount": 6,
    "timestamp": 1563716700,
    "txt_content": "[21:34:34 ERROR]: Could not pass event InventoryClickEvent to pianqian v0.0.1 java.lang.NullPointerException: null         at com.dislikeyou.pianqian.Main.minusmoney(Main.java:184) ~[?:?]         at com.dislikeyou.pianqian.Main.onClick(Main.java:103) ~[?:?]         at com.destroystokyo.paper.event.executor.asm.generated.GeneratedEventExecutor3.execute(Unknown Source) ~[?:?]         at org.bukkit.plugin.EventExecutor.lambda$create$1(EventExecutor.java:69) ~[patched_1.14.3.jar:git-Paper-131]         at co.aikar.timings.TimedEventExecutor.execute(TimedEventExecutor.java:80) ~[patched_1.14.3.jar:git-Paper-131]         at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:70) ~[patched_1.14.3.jar:git-Paper-131]         at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:545) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.PlayerConnection.a(PlayerConnection.java:2341) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.PacketPlayInWindowClick.a(SourceFile:33) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.PacketPlayInWindowClick.a(SourceFile:10) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.PlayerConnectionUtils.lambda$ensureMainThread$0(PlayerConnectionUtils.java:18) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.TickTask.run(SourceFile:18) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.IAsyncTaskHandler.executeTask(IAsyncTaskHandler.java:127) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.IAsyncTaskHandlerReentrant.executeTask(SourceFile:23) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.IAsyncTaskHandler.executeNext(IAsyncTaskHandler.java:105) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.MinecraftServer.aW(MinecraftServer.java:1002) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.MinecraftServer.executeNext(MinecraftServer.java:995) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.IAsyncTaskHandler.executeAll(IAsyncTaskHandler.java:91) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.MinecraftServer.sleepForTick(MinecraftServer.java:978) ~[patched_1.14.3.jar:git-Paper-131]         at net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:912) ~[patched_1.14.3.jar:git-Paper-131]         at java.lang.Thread.run(Unknown Source) [?:1.8.0_181]\n服务器运行到minusmoney的时候就出现这个错误\npublic boolean minusmoney(Player player,double amount) \n        {\n                getLogger().info(\"3\");\n                double moneyamoutnow = this.economy.getBalance(player.getName());\n                getLogger().info(\"4\");\n                if(moneyamoutnow < amount) \n                {\n                        player.sendMessage(ChatColor.YELLOW+\"[骗钱]你的钱不够！\");\n                        return false;\n                }\n                else \n                {\n                        this.economy.withdrawPlayer(player.getName(), amount);\n                        return true;\n                }\n        }\n\n\n\n（我知道我写变量和函数名的习惯不好233\n",
    "replies": [
        {
            "author": "hemp",
            "timestamp": 1563718620,
            "txt_content": "你确定服务端安装的经济插件？(是指像ess一类的插件)"
        },
        {
            "author": "橡皮233",
            "timestamp": 1563719340,
            "txt_content": "hemp 发表于 2019-7-21 22:17\n你确定服务端安装的经济插件？(是指像ess一类的插件)\n\n是啊，在插件里用了vault的插件并且plugins里也放入了vault"
        },
        {
            "author": "hemp",
            "timestamp": 1563720300,
            "txt_content": "包宇杰88 发表于 2019-7-21 22:29\n是啊，在插件里用了vault的插件并且plugins里也放入了vault\n可以发下插件初始化economy的代码吗？"
        },
        {
            "author": "漂浮",
            "timestamp": 1563738120,
            "txt_content": "首先定义这三个变量\n\n\n\n\n\n\n-23b494e3b75b77e3.png\n(9.57 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-7-22 03:42 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "漂浮",
            "timestamp": 1563738180,
            "txt_content": "然后复制这个方法\n    private boolean initVault(){\n\n\n        boolean hasNull = false;\n        //获取权限系统实例\n        RegisteredServiceProvider<Permission> permissionProvider = getServer().getServicesManager().getRegistration(net.milkbowl.vault.permission.Permission.class);\n        if (permissionProvider != null) {\n            if ((permission = permissionProvider.getProvider()) == null) hasNull = true;\n        }\n        //初始化聊天系统实例\n        RegisteredServiceProvider<Chat> chatProvider = getServer().getServicesManager().getRegistration(net.milkbowl.vault.chat.Chat.class);\n        if (chatProvider != null) {\n            if ((chat = chatProvider.getProvider()) == null) hasNull = true;\n        }\n        //初始化经济系统实例\n        RegisteredServiceProvider<Economy> economyProvider = getServer().getServicesManager().getRegistration(net.milkbowl.vault.economy.Economy.class);\n        if (economyProvider != null) {\n            if ((economy = economyProvider.getProvider()) == null) hasNull = true;\n        }\n        return !hasNull;\n    }\n\n\n\n\n\n\n-70b660f91d6ae911.png\n(133.14 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-7-22 03:43 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "漂浮",
            "timestamp": 1563738240,
            "txt_content": "在主类调用就行了 要使用的时候比如要使用economy就主类.getPlugin().economy就行了\n\n\n\n\n\n\n-22e1b125c6edb1f0.png\n(210.37 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-7-22 03:44 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        }
    ]
}