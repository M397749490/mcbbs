{
    "title": "1月20日更新【18w02a】原版枪械",
    "author": "pineapple_",
    "replyCount": 36,
    "timestamp": 1514644740,
    "txt_content": " 本帖最后由 pineapple_ 于 2018-1-25 23:03 编辑 \n\n大家好!我是菠萝!这么久不来技巧版，你们有没有想我啊!\n1.13这么大的更新，我怎么能放过水贴的机会呢\n\n\n最新版特性，喂，不是bug!:添加开 枪的声音和换弹的声音，改变后坐力的视角偏移效果，给非玩家生物添加了击退效果，玩家只能向上\"跳起\"，为了一梭子子弹能打一个村把子弹改为140发/弹匣，稍微解决了一下生物掉落物的问题（就是生物不是因为Health被改为0以下而挂掉，而是被kill掉，只是不能掉落经验等物品总比打完不掉东西强），子弹在下届和末地会正常传播了\n图片就不更新了，下载链接还在下面原来的位置。\n\n\n废话少说，进入正题\n本地坐标\n1.13的 17w50a引入了本地坐标这个东西，局部坐标是什么呢？通俗地可以理解为视角坐标系，和世界坐 标系 区 分，\n我们之前常用的~ ~1 ~就是世 界坐 标系的相 对坐标，而视角坐标系中使用的是^ ^ ^ (shift+键 盘 数 字6)，\n我们来比较一下~ ~ ~1和 ^ ^ ^1 有什么区别？假如一个玩家 分 别 执行了带有前面两种坐标的命令，第一种是玩家的z+1格的地方，而第二种 却 是以玩家 的 脚 为原点，平行 于 视角方向前 1格的地方，其实很好理解，可以去http://www.mcbbs.net/thread-771615-1-1.html，并且注意 下 面的有 关回复，这里就不多讲了。\n\n本地 坐 标 引入，使得现在可以通过玩家的视角方向来让玩家检测 他 正在看 着的东西，这正是枪械的核心原理，这在之前的版本是极难实现的，而现在却变得十分简单，我之前在1.11也做过类似的枪械，http://www.mcbbs.net/thread-678367-1-1.html，看看这粗糙的做工，这缓慢的速度，而现在，我们有了这个（下载地址在图片下面）：\n\n对着你要攻 击的生物右键，在1/20秒（不卡的情况下）内 直 接 击 中 该生 物，造 成 伤 害，\n该 枪（M16）和 其 弹 匣 的 模型为本人耗费3天制作（因为我是材 质 资 源新人嘛），\n子 弹和 之 前的 枪 一 样仍然是35发。\n\n该原版模组我修改了两个物品，萝卜钓竿和绿宝石，分别被修改为如下物品：\n\n\n一把 M 16 和一个M16弹 药（这M  1 6一点 都 不 像，先后被人说成 M 4和 S K S，还有Mini-14 ）\n\n手持 M 16 时玩家形象：\n\n\n威 力 测试：\n\n\n精 准 度 和 距 离 测试：\n\n（ 图为超远 距离 击  杀一只小史莱姆）\n\n下载：https://pan.baidu.com/s/1o9e2DNc\n  密码: 3hpz(发错版本了，这个下载后自行在shoot.mcfunction里吧第三条命令删掉，下个快照更新后我再传新的)\n使用方法，首先打开mc18w02a，打不开1.13的需要在站内下载新的启动器（如hmcl），然后创建一个地图,开启作弊，\n压缩包文件夹里有两个压缩文件--模型和数据包，因为我的电脑的压缩出了点小问题，只能压缩为rar格式，所以你需要把模型复制到minecraft\\resourcepacks下，解压到当前文件夹。把数据包压缩包复制到.minecraft\\saves\\刚刚创建的地图名称\\datapacks下，解压到当前文件，阅读说明后，设置资源包里使用m16资源包（与当前版本不匹配也正常使用）打开该地图输入/function m16:get即可获得物品\n\n注意，说明内的部分bug已经不存在\n\n\n\n-------------------------------------------\n\n到 这里展 示部分就都放 完了，接下来当然是紧 张 刺 激（枯燥 乏味）的教 程了：\n\n我说过因为 引 入视角 坐 标 而 使 做 枪 械 十 分的简单，所 以 原理 不  是 很难 懂的 \n\n这 里我 只 说 原 理，资 源 包 和 数 据 包 的 创建 方法 就 暂 时不 叙述了，\n\n换 弹什 么 的谁都会做，这里新的 东西就是 新的 造 成 伤 害的 方式和 检测 玩 家看着  的生物\n\n我拿出命令的一部分\n\nexecute as @a[tag=!M16_loading,scores={M16_bullet=1..,M16_shoot=1}] at @s offset ~ ~1.62 ~ run function m16:shoot复制代码m16:shoot.mcfunction\n\ntag @s add M16_shooting\nexecute if entity @s[distance=..1000] run tag @e[distance=..1.5,nbt=!{Invulnerable:1b},tag=!M16_shooting,type=!item,type=!area_effect_cloud,type=!armor_stand,type=!arrow,type=!ender_pearl,type=!eye_of_ender_signal,type=!leash_knot,type=!xp_orb,type=!item_frame,type=!falling_block,type=!painting] add M16_shoot_by\nexecute if entity @s[distance=..1000] unless entity @e[distance=..1.5,nbt=!{Invulnerable:1b},tag=!M16_shooting,type=!item,type=!area_effect_cloud,type=!armor_stand,type=!arrow,type=!ender_pearl,type=!eye_of_ender_signal,type=!leash_knot,type=!xp_orb,type=!item_frame,type=!falling_block,type=!painting] if block ~ ~ ~ #m16:through offset ^ ^ ^0.5 run function m16:shoot复制代码\n\nM16_bullet=1..,M16_shoot=1代表有 子 弹 且 开 枪 了 的 玩 家 \n！M16_loading代 表 不 在 换 弹 的 玩 家\n也 就 是  当   玩 家 正 常 开 枪 ，就 会 执  行 m16：shoot\n这 个 m16：shoot是 一 个  循 环 函数，命令里去 掉 一些没什么 用的限制，剩下的  就是这样的：\nexecute if entity @s[distance=..1000] run tag @e[distance=..1.5] add M16_shoot_by\nexecute if entity @s[distance=..1000] unless entity @e[distance=..1.5] if block ~ ~ ~ #m16:through offset ^ ^ ^0.5 run function m16:shoot复制代码\n这两条命令是这个意思：如果执行者在1000格内，就给r=1.5内的实体加上M16_shoot_by标签，如果执行者在1000格内，但是r=1.5内没有实体，且所在的方块是可穿过方块，就以执行者朝向向前0.5格的位置为执行点再次执行本身这个function，这样就是一直往正前方移动检查1000格是否有 被 指 到的实体，直到检测到了实体或不可穿过方块\n这里 如  何检测可穿过  或者 不 可穿过方块呢，利用的是1.13的新东西“标签”，可以给一些种类的方块加上同一个标签 方便检测，比如#minecraft:wool就可以代表所有种类的羊毛，可穿过方块是我手动整合出来的，如果不装该模组则无效，因为这涉及到数据包的具体用法，我就先不说了，知道这是可穿过方块就好了，主要还是要懂怎么检测玩家看的是哪个实体的原理\n\n上面的 被加上M16_shoot_by的实 体就 是 被击 中的实体了，那么 如何 对这 个实 体造 成 伤 害呢，难道要用effect或 者是鬼 畜的弓 箭之类 的东 西？？\n新版本的execute可以解决这个问题\nexecute as @e[tag=M16_shoot_by] store result score @s M16_damage run data get entity @s Health 1\nscoreboard players remove @e[tag=M16_shoot_by] M16_damage 8\nexecute as @e[tag=M16_shoot_by] store result entity @s Health float 1 run scoreboard players get @s M16_damage\nexecute as @e[tag=M16_shoot_by] run effect give @s minecraft:instant_health 1 31 true\nexecute as @e[tag=M16_shoot_by] run effect give @s minecraft:instant_damage 1 31 true\nexecute as @a[tag=M16_shoot_by] run effect give @s minecraft:instant_damage 1 0 true\ntag @e remove M16_shoot_by复制代码首先 被击 中的实 体，把自 己的Heal th血量 输出 到记 分板M16_damage上  \n减去 8分\n再通 过execute赋 回Health标签，得到 的 Health就-8了，也就 是造成 了8 点伤害\n但是 这样造 成伤 害生物不 会 变红\n 因为 31级 的瞬 间 伤害 和瞬间 治疗不会  对生物 造 成 伤害 或回 血，但是 会使 应该 受到 伤 害 的 实 体变 红，就 可以 伪 造 为 枪 造 成 伤 害 了\n由于玩家 受 到 31级的瞬间 伤 害无反应，且不会被 修改Health标签，只能用 effect 一个 1级 的瞬间 伤害 这个 方法来减掉 玩家 的血量了，\n因为 末影 龙 免 疫 药 水，所 以 末影龙  有 不 变 红  的bug\n最后清掉标签\n\n这样减 Health的 好 处 是毫无痕迹，但是 弊  端 是这样不会产 生 掉 落 物\n\n\n更新，在scoreboard players remove @e[tag=M16_shoot_by] M16_damage 8命令下面加了一条命令kill分数小于0的实体，就有掉落物了\n\n其余真的没什么好说的，数据包的具体用法，可以在wiki自己研究研究，\n\n有 问 就  在 下 面 回 复 吧\n\n无 耻 求 人 气\n\n",
    "replies": [
        {
            "author": "pineapple_",
            "timestamp": 1514645880,
            "txt_content": " 本帖最后由 pineapple_ 于 2018-1-14 18:10 编辑 \n\n该帖不敢随意编辑了，怕再卡审核，这个帖之前已经被卡21个小时了，加上码字时间2小时，发这个帖共用23小时\n\n已知bug，在末地和下界子弹无法正常传播\n估计是局 部 坐标的特性\n\n该bug已经修复"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1514646540,
            "txt_content": "pineapple_ 发表于 2017-12-30 22:58\n该帖不敢随意编辑了，怕再卡审核，这个帖之前已经被卡21个小时了，加上码字时间2小时，发这个帖共用23小时\n ...\n应该不是本地坐标的问题，即使用绝对坐标也会出问题。\n应该是function中实体参数的维度没有被传递"
        },
        {
            "author": "Оil",
            "timestamp": 1514647260,
            "txt_content": "表示M16一看有种Mini-14的赶脚……\n虽然不如M16出名……不过性能还是挺好的……\n（这货要最火的话应该是吃鸡里边的吧……）"
        },
        {
            "author": "chyx",
            "timestamp": 1514650920,
            "txt_content": "对枪一无所知\n\n\ntype=!item,type=!area_effect_cloud,type=!armor_stand,type=!arrow,type=!ender_pearl,type=!eye_of_ender_signal,type=!leash_knot,type=!xp_orb,type=!item_frame,type=!falling_block,type=!painting\n\n\n顺便 如果用我最新帖子里的方法作为对实体的判断怎么样？"
        },
        {
            "author": "雷鸣·翾鹗",
            "timestamp": 1514652120,
            "txt_content": "这样一来就可以尝试加入射速和偏移之类的东西了，然后在mc里突突突什么的√"
        },
        {
            "author": "V_院長",
            "timestamp": 1514678100,
            "txt_content": "哇，竟然这么新"
        },
        {
            "author": "pineapple_",
            "timestamp": 1514688780,
            "txt_content": "chyx 发表于 2017-12-31 00:22\n对枪一无所知\ntype=!我没写全，比如雪球什么的\n\n选择器范围这个bug应该会修掉吧"
        },
        {
            "author": "Ph-苯",
            "timestamp": 1514704440,
            "txt_content": "好厉害！我都不知道怎么使用tick来高频……"
        },
        {
            "author": "pineapple_",
            "timestamp": 1515604860,
            "txt_content": "七刀月复 发表于 2017-12-31 15:14\n好厉害！我都不知道怎么使用tick来高频……\n突然想起来，你看看这个吧http://www.mcbbs.net/thread-774235-1-1.html"
        },
        {
            "author": "Ph-苯",
            "timestamp": 1515819960,
            "txt_content": "pineapple_ 发表于 2018-1-11 01:21\n突然想起来，你看看这个吧http://www.mcbbs.net/thread-774235-1-1.html\n谢谢，我已经知道了。"
        },
        {
            "author": "无敌的冷风",
            "timestamp": 1516407120,
            "txt_content": "不错厉害了"
        },
        {
            "author": "旋律23333333",
            "timestamp": 1516624800,
            "txt_content": "加油！MC有你更加精彩！"
        },
        {
            "author": "SMFX阜星",
            "timestamp": 1518612120,
            "txt_content": "请问大佬损伤值改材质哪里有教程？先谢了！"
        },
        {
            "author": "pineapple_",
            "timestamp": 1518624900,
            "txt_content": "SMFX阜星 发表于 2018-2-14 20:42\n请问大佬损伤值改材质哪里有教程？先谢了！\nhttp://www.mcbbs.net/thread-491597-1-1.html\n物品模型部分"
        },
        {
            "author": "SevenC",
            "timestamp": 1518646500,
            "txt_content": "大佬就是大佬 像我这种只会灌水的萌新水比只能做个路人咸鱼乘客了_(:з」∠)_"
        },
        {
            "author": "878淡淡",
            "timestamp": 1518677400,
            "txt_content": "66666666666666"
        },
        {
            "author": "晴路卡",
            "timestamp": 1519629780,
            "txt_content": "\n这个无伤爆头过分了啊2333\n虽然也知道做到精确很难"
        },
        {
            "author": "pineapple_",
            "timestamp": 1519652340,
            "txt_content": " 本帖最后由 pineapple_ 于 2018-2-26 21:41 编辑 \nSunny_KyLe 发表于 2018-2-26 15:23\n这个无伤爆头过分了啊2333\n虽然也知道做到精确很难\n贴子还没更新\n最新版本会变更精准\n另外那个粒子效果是我不小心加上去的，\n更新之后我会去掉的"
        },
        {
            "author": "WeiJiaRun05",
            "timestamp": 1525006440,
            "txt_content": "我把我服务器里的货币（绿宝石）改成自定义NPC模组里面的金币了……\n我还没有使用，话说1.12.2可用吗"
        },
        {
            "author": "WeiJiaRun05",
            "timestamp": 1525268820,
            "txt_content": "WeiJiaRun05 发表于 2018-4-29 20:54\n我把我服务器里的货币（绿宝石）改成自定义NPC模组里面的金币了……\n我还没有使用，话说1.12.2可用吗 ...\n对不起忘了，1.12.2没有数据包功能"
        },
        {
            "author": "缤纷的烟火",
            "timestamp": 1531965780,
            "txt_content": "特别厉害，感谢分享"
        },
        {
            "author": "川又伽椰子",
            "timestamp": 1532142120,
            "txt_content": "可以的,挺喜欢的"
        },
        {
            "author": "hello_minecraft",
            "timestamp": 1548079440,
            "txt_content": "Can I copy it?"
        },
        {
            "author": "z1871649580",
            "timestamp": 1548090480,
            "txt_content": "感谢楼主分享给东西"
        },
        {
            "author": "pineapple_",
            "timestamp": 1548351180,
            "txt_content": "hello_minecraft 发表于 2019-1-21 22:04\nCan I copy it?\n如果你真的想的话，可以"
        },
        {
            "author": "monseasd",
            "timestamp": 1548385860,
            "txt_content": "感谢楼主分享！"
        },
        {
            "author": "egg_apple",
            "timestamp": 1552202400,
            "txt_content": "打出子弹了没伤害是什么鬼？"
        },
        {
            "author": "164978694",
            "timestamp": 1552205760,
            "txt_content": "正经:\n我眼睛疼\n\n余味:\n[图片]\n\n正经:\n不能一直盯着电脑\n\n余味:\n嗯嗯 那就别看了"
        },
        {
            "author": "墨仔",
            "timestamp": 1557740700,
            "txt_content": "表示M16一看有种Mini-14的赶脚……"
        },
        {
            "author": "pexpect",
            "timestamp": 1558626780,
            "txt_content": "脑洞打开  在里面来一句cf吧"
        },
        {
            "author": "🥶❄️☠️",
            "timestamp": 1564047540,
            "txt_content": "这个枪不像 M16或 Mini14，但像 FN Scar"
        },
        {
            "author": "kfz大大",
            "timestamp": 1564370100,
            "txt_content": "这个厉害"
        },
        {
            "author": "笑傲法",
            "timestamp": 1564815360,
            "txt_content": "那1.11的怎么做的，谢谢"
        },
        {
            "author": "肆火",
            "timestamp": 1583854680,
            "txt_content": "这样是不是可以给纯净服打造良好的的枪战体验"
        },
        {
            "author": "一只雕",
            "timestamp": 1590204360,
            "txt_content": "1.14.4能用吗？"
        },
        {
            "author": "HtYang",
            "timestamp": 1594556640,
            "txt_content": "能借用部分代码咩"
        }
    ]
}