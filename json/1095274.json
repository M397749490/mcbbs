{
    "title": "[ 1.16 ] HJRPG - 一款可高度自定义技能的RPG数据包",
    "author": "旋风233",
    "replyCount": 7,
    "timestamp": 1596698160,
    "txt_content": " 本帖最后由 旋风233 于 2020-8-7 18:18 编辑 \n\n\n\n介绍:HJRPG 数据包一款可以高度自定义技能的RPG数据包\n\n注意事项：1. 本数据包的所有计分板、假名、命名空间都是以 hjrpg 为前缀命名的，如果需要加其它数据包的话，请注意冲突~(但是我想除了我应该没有人数据包以 hjrpg 为前缀吧。。。)2. CustomModelData的范围为14800000 - 14899999，如果需要加其它数据包或资源包的话，请注意冲突~(这个是真的要注意)3. 资源包和数据包的文件都在最下面，不想看介绍的可以直接拉到最下面去下载~(不会吧不会吧，不会真有人不看介绍吧(滑稽))\n\n技能模块:\n技能释放成功GIF：\n\n\n\n\n\nGIF 2020-8-6 19-33-13.gif (773.89 KB, 下载次数: 3)\n\n下载附件\n\n2020-8-6 19:39 上传\n\n\n\n\n\n\n\n\n\n\nGIF 2020-8-6 19-17-37.gif (663.26 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-6 19:39 上传\n\n\n\n\n\n\n\n\n\n\nGIF 2020-8-6 19-13-17.gif (313.17 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-6 19:39 上传\n\n\n\n\n\n\n\n技能释放失败图片:\n\n\n\n\nfile_1596713968000.jpg (104.93 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-6 19:39 上传\n\n\n\n\n\n\n\n\n\n\nfile_1596713961000.jpg (100.48 KB, 下载次数: 3)\n\n下载附件\n\n2020-8-6 19:39 上传\n\n\n\n\n\n\n\n\n\n\nfile_1596717207000.jpg (58.53 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-6 20:33 上传\n\n\n\n\n\n\n\n看了上面的GIF和图片，是不是觉得很酷，但又觉得太麻烦？其实，你只需要专注于制作技能本身，而技能的释放、消耗的MP值、冷却时间(这个想了我几个晚上)、需要的等级都只需要一个NBT就能搞定，是不是很方便？\n\n显示模块:\nGIF:\n\n\n\n\nGIF 2020-8-6 21-02-26.gif (711.31 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-6 21:03 上传\n\n\n\n\n\n\n看了上面的GIF，是不是很惊讶为什么可以显示两排字？这其实是使用负长度的字体实现的。左边为HP值，右边为MP值。因为我把HP值数字化了，又去掉了原版的血条，所以再也不用担心血条档视线啦~\n什么？HP值血量不正常？那是因为我的世界的特性，让自己受到伤害(比如/kill)就可以了。\n\n文件下载:链接: https://pan.baidu.com/s/1oHdysYwZouBnMGZimCChJQ  提取码: y1zz\n技能获取方法：/loot give @s loot hjrpg:item/op/book/all_items/skill/1\n看数据包设计原理和技能设计教程请点目录~\n\n数据包原理:\n\n\n玩家编号模块:\n\n玩家编号模块的文件在数据包的 hjrpg/functions/player 中。\n实现原理: 1. 在每个玩家首次登入时，即当玩家的计分板 id 为 0 时，运行一次。如果有多个玩家同时登入且都是首次登入，则每tick运行一次，直到所有玩家都有自己唯一的 id 。\n2. 运行时，先将 $hjrpg_maxid 的计分板 maxid 加 1，再将运行的玩家的计分板 id 等于 $hjrpg_maxid 的计分板 maxid。这样就能让每个玩家都拥有自己唯一的 id 。\n3. 运行时，也初始化HP值和MP值。\n\n技能模块：\n技能模块的文件在数据包的 hjrpg/functions/skill 资源包的 hjrpg/textures/skill、hjrpg/lang、hjrpg/models/skill、miecraft/models/item/carrot_on_a_stick.json中。\n1. 当玩家右键技能，即胡萝卜钓竿时，检测技能释放所需等级、技能CD和技能释放所需MP值是否达到要求。达到则扣除相应的MP值并生成盔甲架记录玩家释放的技能、技能CD等，再寻找对应的技能函数并释放。\n2. 在检测技能CD时，先获取技能id，记录在玩家的计分板 sid 中，再通过execute套娃寻找计分板 aid 与玩家的计分板 id 相等且计分板 said 与玩家的计分板 sid 相等的盔甲架。如果找到则技能还在冷却，运行 fail 函数；如果没找到，这技能以经冷却，继续检测技能释放所需MP值。这样做就减少了非常多需要用于技能CD检测的计分板，少了很多不必要的麻烦。(我消耗了几个晚上的头发才想出这个方法)\n\nHP值模块:\n\n玩家编号模块的文件在数据包的 hjrpg/functions/hp 中。\n\n1. 为减少开销，当运行前的HP值和当前HP值不相等时，更新HP值并显示。\n\nMP值模块:\n玩家编号模块的文件在数据包的 hjrpg/functions/mp 中。\n1. 在每个玩家首次登入时，即当玩家的计分板 maxm 为 0 时，初始化MP值。\n2. 计算计分板 maxm 和计分板 nowm 的差。小于0则说明MP值溢出了，重置MP值；大于0则说明MP值需要增加，判断并增加MP值。\n3. 为减少开销，当运行前的MP值和当前MP值不相等时，更新MP值并显示。\n\n显示模块：显示模块的文件在数据包的 hjrpg/functions/display 和资源包的 hjrpg/textures/display、minecraft/font/default.json 中。\n实现原理: 1. 为减小开销，通过计分板 dpt 来判断是否需要显示。\n2. 通过当前HP值和最大HP值的比算出HP值的百分比\n3. 通过百分比判断需要显示的HP条\n4. 通过title @s actionbar ... 指令在游戏中以负长度的字体显示。\nMP值同上。\n\n\n\n技能自定义教程:\n\n\n1. 创建一个新技能物品，用于技能释放这里推荐使用战利品表来制作技能物品。\n1. 在数据包的 hjrpg/loot_tables/item/skill 中新建一个 json 文件，文件的名字推荐为技能的 id。下面以技能0为例。\n2. 在文件内输入: {\n  \"pools\":[\n    {\n      \"rolls\": 1,\n      \"entries\":[\n        {\n          \"type\": \"item\",\n          \"name\": \"minecraft:carrot_on_a_stick\",\n          \"functions\":[\n            {\n              \"function\": \"set_name\",\n              \"name\": {\"translate\":\"item.hjrpg.1000\",\"italic\":false}\n            },{\n              \"function\": \"set_lore\",\n              \"lore\":[\n                {\"text\":\"一一一一一一一一一一一一\",\"color\":\"gold\",\"italic\":false},\n                {\"text\":\"简介\",\"color\":\"white\",\"italic\":false},\n                {\"text\":\"一一一一一一一一一一一一\",\"color\":\"gold\",\"italic\":false},\n                {\"text\":\"消耗魔力: 0点\",\"color\":\"white\",\"italic\":false}\n              ]\n            },{\n              \"function\": \"set_nbt\",\n              \"tag\":\"{\n                hjrpg:{\n                  skill:{id:0,cd:0,mp:0,lv:0},\n                  id:1000\n                },\n                Unbreakable:1,\n                HideFlags:4,\n                CustomModelData:14800000\n              }\"\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}复制代码其中：\n第12行 \"name\": {\"translate\":\"item.hjrpg.1000\",\"italic\":false} 中 \"translate\" 的值为 item.hjrpg.[数字]，一般与第26行 id:1000 中 id 的值 [数字] 相等。这是在hjrpg中物品的ID。技能的物品ID一般为1开头的4位数字。\n第25行 skill:{id:0,cd:0,mp:0,lv:0},  id 为技能id，用于技能的释放，这里的id可以填任何数字，但最好按顺序写；cd 为技能的冷却时间，以tick为单位(1s=20tick)；mp 为技能释放需要消耗的MP值；lv 为技能释放所需的等级。\n第17行是物品的简介，可以随意修改。\n第32行是物品的材质。技能物品材质的范围推荐是以14800开头的8位数字。\n其他的代码就不需要修改了。\n3. 点击保存，进入游戏输入 /reload 重新加载数据包，再输入/loot give @s loot hjrpg:item/skill/[json文件名]，就会得到一个空白的技能物品。\n\n2. 写技能\n1. 在数据包的 hjrpg/function/skill/id 中新建一个文件夹，文件夹的名字为技能的 id。\n\n2. 在新建的文件夹内新建一个 run.mcfunction 文件，技能的释放从这个文件开始。\n3. 在 run.mcfunction 中输入指令作为技能。例：execute anchored eyes run summon arrow ^ ^ ^0.1 {Tags:[\"hjrpg_st\",\"hjrpg_smotion\"]}\nfunction hjrpg:skill/model/motion/3\nfunction hjrpg:skill/model/timer/100复制代码其中：\n第一行中箭的tag hjrpg_st 用于函数 hjrpg:skill/model/timer/100，hjrpg_smotion 用于函数 hjrpg:skill/model/motion/3。\n第二行和第三行都为技能模型，为了方便技能的制作。\n4. 点击保存，进入游戏输入 /reload 重新加载数据包，右键第1步创建的技能。如果有箭发射出去，则技能制作成功。\n\n3. 技能物品包装:\n1. 写技能的名字: 在资源包的 hjrpg/lang/en_us.json 中输入 \"item.hjrpg.1000\":\"[ 技能 ] 名字\"，其中 \"item.hjrpg.[数字]\" 与第1步中第12行的 [数字] 对应。\n2. 写技能数据: 在数据包的 hjrpg/loot_tables/item/skill/[新建的json文件名] 的第19行输入 消耗魔力 、冷却时间、所需等级，分别对应第27行的 mp、cd、lv 的数值，用于显示技能的数据。\n3. 画技能材质: 先在资源包的 miecraft/models/item/carrot_on_a_stick.json 中添加:{\"predicate\": {\"custom_model_data\": 14800000}, \"model\": \"hjrpg:skill/0\"}复制代码其中 :\n\"custom_model_data\" 的值与数据包 hjrpg/loot_tables/item/skill/[新建的json文件名] 的第32行 CustomModelData 的值相等。\n\"model\" 的值一般为 \"hjrpg:skill/[数字]\"，与新技能的技能id对应。\n\n4. 点击保存，进入游戏输入 /reload 重新加载数据包，再输入 /loot give @s loot hjrpg:item/skill/[新建的json文件名] 获取技能。如果显示正确，则新建好一个新技能。\n\n\n更详细的技能制作教程会过几天再发\n",
    "replies": [
        {
            "author": "X_R小睿",
            "timestamp": 1596873300,
            "txt_content": "作为贴图作者表示发现一个我画的贴图都没有"
        },
        {
            "author": "X_R小睿",
            "timestamp": 1596873480,
            "txt_content": "X_R小睿 发表于 2020-8-8 15:55\n作为贴图作者表示发现一个我画的贴图都没有\n准确说是贴图作者之一，主要都还是旋风再搞。。。"
        },
        {
            "author": "X_R小睿",
            "timestamp": 1604408460,
            "txt_content": "hjrpg战斗扩展pioneer即将发布测试版，敬请期待"
        },
        {
            "author": "xiner123",
            "timestamp": 1604659980,
            "txt_content": "大佬这么秀的吗，已收藏，感谢"
        },
        {
            "author": "GF009",
            "timestamp": 1605724140,
            "txt_content": "可以的，肯定很费肝吧，你这display文件夹里边不必要写十个差不多函数的"
        },
        {
            "author": "XWG_sam",
            "timestamp": 1606716600,
            "txt_content": "牛的 正好学习一波怎么写数据包"
        },
        {
            "author": "Summer_dreams",
            "timestamp": 1606737660,
            "txt_content": "沙发沙发沙发沙发沙发"
        }
    ]
}