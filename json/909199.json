{
    "title": "[正版验证] Mojang 正版登录API —— 使用登录的方式验证用户是否为MC正版",
    "author": "Karlatemp",
    "replyCount": 3,
    "timestamp": 1566973560,
    "txt_content": " 本帖最后由 99ww 于 2019-8-28 15:49 编辑 \n\n\n我写这篇的主要原因呢，就是没找到有人发机器正版验证的方法(以及MCBBS没正版自动审核), 就写这篇文章出来, 希望  BBS 能采用(当然如果bbs管理没看到我也没辙\n\n不说了, 直接上代码\n\nhttps://authserver.mojang.com/authenticate\n\n\n首先, Mojang的登录操作是使用json数据传输的, 所以我们需要发送json数据,\n最好不要直接拼接字符串, 虽然直接拼接也没啥事\n使用类库: Gson (Google的JSON工具), 我自己写的库(用来发送HTTPS的\n\nusername -> 这是用户名字, 实际上需要的是需要验证的邮箱\npassword  -> **\nrequestUser = true -> 定义需要返回User\nclientToken -> 客户端(启动器)token, 理论上可为任何字符串\n\nagent -> 代理, 最好不要修改\n    name -> 代理名字, 正版启动器为 Minecraft\n    version -> 代理版本, 正版启动器为 1\n\n好, 我们已经定义好我们的数据了, 让我们把它发送到 Mojang 服务器\n\nWebHelper.post(auth) // 创建一个链接, 这里需要自行实现了啊233, 你直接用 new URL(auth).openConnection() 也行的233\n    .write((OutputStream output) ->{\n           Gson g = new Gson(); // Gson库\n           String post = g.toJson(data); // 格式化我们需要发送的数据, JSON格式\n\n           System.out.println(...); // 显示我们需要发送的是什么东西 (过滤隐私版本)\n\n           byte[] bytes = post.getBytes(StandardCharsets.UTF_8);\n           output.write(bytes);\n\n           return ContextType.application_json; // \"application/json; charset=utf-8\"\n    }) // 注意: 如果你是用URL.openConnection的话, 请加上这些\n       // http.setRequestProperty(\"Content-Type\", \"application/json; charset=utf-8\"); // 定义为json数据\n      //  http.setRequestProperty(\"Content-Length\", String.valueOf(bytes.length));    // 定义发送的数据的长度\n    .response(...) // 数据回调\n    .connect();\n\n好，我们的代码已经写完了，让我们看看他返回了些啥子东西\n\n\n\n\nPost Response Code: 200\nResponse Message OK\n[用于启动器登录的json信息] [如果你保存的话小心被打*]\n\n好，这样我们就完成了登录的请求，在看看错误的密码/账户的信息\n\n\n\nResponse: 403, Forbidden\n\n掌握了这两个code后我们就能判断是否是正版账号了偶吼\n\n这里的话，可以直接判断code是否为200, 当然你要验证一下返回数据的话也是ok的哦\n\n不过呢这里是Java的，PHP的话，相信也能写过来吧 :p\n\n\n\n别忘了设置Header, 别忘了设置Header, 别忘了设置Header\n\n因为我不是玩PHP的所以的话, 判断啥的你们自己玩了啊:p\n\n后言: 如果你不想被伪正版影响到的话，请使用以下代码\npublic static final String auth = new StringBuilder().append(\n  \"https://auth\").append(\"server.m\").append(\"ojang.co\")\n  .append(\"m/aut\").append(\"henti\").append(\"cate\").toString();\n\n:]\n\n关于 有人说 正版启动器(人工) 比用这个API 好\n\n\n首先我把hosts加上\n\n\n然后这是 authenticate/index.php 的内容\n\n\n接着我用正版登录一次\n\n\n这是我获取到的内容\n\n\n\n这就是访问 https://authserver.mojang.com/authenticate 啊, 有什么区别吗?\n\n如果有人还想反驳的话，请带上你的反驳证据\n",
    "replies": [
        {
            "author": "lian123456",
            "timestamp": 1567181760,
            "txt_content": "大佬出正版验证插件呀"
        },
        {
            "author": "Karlatemp",
            "timestamp": 1567186500,
            "txt_content": "lian123456 发表于 2019-8-31 00:16\n大佬出正版验证插件呀\nserver.properties\n\nonline-mode=true"
        },
        {
            "author": "771474491",
            "timestamp": 1567244460,
            "txt_content": "99ww 发表于 2019-8-31 01:35\nserver.properties\n\nonline-mode=true\n叫你写插件 不是用Bukkit自带的\n如果大家都用Bukkit自带的 要你这个干什么？\n喵~！"
        }
    ]
}