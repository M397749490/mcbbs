{
    "title": "EntityDamageByEntityEvent事件报错,有办法避免?",
    "author": "帅比小樊",
    "replyCount": 7,
    "timestamp": 1492601820,
    "txt_content": "使用右键空气/方块的那个事件一右键就会报错\n包伤害事件,一攻击别人就会报错\n我的代码是这样\n        @EventHandler\n        public void at(EntityDamageByEntityEvent e){\n                Entity en = e.getDamager();\n                Player p = (Player)en;\n                if(en==p){\n                                e.setDamage(10);\n                }\n        }复制代码服务器报错内容 Player p = (Player)en;这行服务器报错\n有办法避免吗,上面的事件是打人\n下面的事件是被人打的时候也会报错\n        @EventHandler\n        public void ar(EntityDamageByEntityEvent e){\n                Player p = (Player)e.getEntity();\n                \n                        e.setDamage(10);\n        }复制代码\n这样还是报错，这个是被打的时候就无限报错\n报错内容依旧是Player p = (Player)e.getEntity();\n看着报错实在不好，所以来请求站内的dalao\n\n[groupid=1330]PluginsCDTribe[/groupid]",
    "replies": [
        {
            "author": "a8105",
            "timestamp": 1492626540,
            "txt_content": "你这代码大概就是因为无论是男是女是人妖都给转成了大jj萌妹,当然报错←_←\n如果你是想玩家攻击的时候强制伤害为10,应该这样写:\nEntity en=e.getDamager();\nif(en.getType()==EntityType.PLAYER)\n{\n  e.setDamage(10);\n}"
        },
        {
            "author": "帅比小樊",
            "timestamp": 1492641960,
            "txt_content": "810587921 发表于 2017-4-20 02:29\n你这代码大概就是因为无论是男是女是人妖都给转成了大jj萌妹,当然报错←_←\n如果你是想玩家攻击的时候强制 ...\n8哥，我还想判断被攻击者的某个值为多少就抵消多少就不能这么写吧"
        },
        {
            "author": "Puffs.",
            "timestamp": 1492675260,
            "txt_content": "        @EventHandler\n        public void at(EntityDamageByEntityEvent e){\n                if(e.getDamager() instanceof Player){\n                         Player p = (Player)e.getDamager();\n                                e.setDamage(10);\n                }\n        }\n\n        @EventHandler\n        public void ar(EntityDamageByEntityEvent e){\n             if(e.getEntity() instanceof Player){\n                     Player p = (Player)e.getEntity();\n                        e.setDamage(10);\n             }\n        }"
        },
        {
            "author": "清华儒墨",
            "timestamp": 1492687860,
            "txt_content": "所有代码前加个: \nif(!(e.getDamager() instanceof Player) || !(e.getEntity() instanceof Player)){\n  return;\n}复制代码\n\n以上代码代表 如果伤害者跟被伤者其中一个不是玩家就会return(就是不会作用的意思)\n因为你直接写把Player代进去了.. EntityDamageByEntityEvent不是只有玩家打的时候才会发生的"
        },
        {
            "author": "帅比小樊",
            "timestamp": 1492774380,
            "txt_content": "s091424 发表于 2017-4-20 19:31\n所有代码前加个: \n我就奇怪了,我加上这个有时候不报错\n有时候又报错说我某行的那个强制转换玩家错误\n我加了判断玩家的也不行"
        },
        {
            "author": "清华儒墨",
            "timestamp": 1492856400,
            "txt_content": "帅比小樊 发表于 2017-4-21 19:33\n我就奇怪了,我加上这个有时候不报错\n有时候又报错说我某行的那个强制转换玩家错误\n我加了判断玩家的也不 ...\n如果可以的话，能让我看看代码吗"
        },
        {
            "author": "Micrafast",
            "timestamp": 1493116920,
            "txt_content": "s091424 发表于 2017-4-22 18:20\n如果可以的话，能让我看看代码吗\n你如果必须获得攻击者的Player类型实例的话强制转换坑定会报错的啊！\n又不是玩家才会打别人\n你可以检查攻击者是否为Player类的实例\n加一个if(e.getDamager() instanceof Player){}"
        }
    ]
}