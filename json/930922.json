{
    "title": "如何让玩家重生后自动执行指令",
    "author": "再见阳光",
    "replyCount": 10,
    "timestamp": 1575648180,
    "txt_content": "记录玩家死亡前执行过的最后一条指令，当玩家重生时自动执行该条指令求助dalao~",
    "replies": [
        {
            "author": "轻光233",
            "timestamp": 1575675000,
            "txt_content": "在你的监听器里加上以上代码\nMap<String,String> lastest_cmds = new HashMap<>(); //记录玩家指令\n\n@EventHandler\npublic void respawn(PlayerRespawnEvent event){ //监听玩家重生\n    String uid = event.getPlayer().getUniqueId().toString(); //获取玩家uid\n    String cmd = null;\n    if((cmd = lastest_cmds.get(uid)) != null){ //判断玩家是否输入过指令\n        Bukkit.dispatchCommand(player,cmd); //执行指令\n    }\n}\n\n@EventHandler\npublic void death(PlayerCommandPreprocessEvent event){ //监听玩家输入指令\n    String uid = event.getPlayer().getUniqueId().toString(); //同上\n    lastest_cmds.put(uid,event.getMessage().substring(1)); //更新玩家指令记录,由于没有滤掉'/'号所以加一个substring(1)\n}复制代码\n就可以达到楼主想要的效果"
        },
        {
            "author": "再见阳光",
            "timestamp": 1575692520,
            "txt_content": "轻光233 发表于 2019-12-7 07:30\n在你的监听器里加上以上代码\n\n就可以达到楼主想要的效果\n如何让它只监听指定指令？\n比如玩家生前打了一次/go stats\n然后再打/kill\n我想让他只监听/go 以下的子命令"
        },
        {
            "author": "轻光233",
            "timestamp": 1575692760,
            "txt_content": "再见阳光 发表于 2019-12-7 12:22\n如何让它只监听指定指令？\n比如玩家生前打了一次/go stats\n然后再打/kill\nString[] strings = cmd.split(\" \");\nString cmd = strings[0]; //主命令"
        },
        {
            "author": "再见阳光",
            "timestamp": 1575698580,
            "txt_content": " 本帖最后由 再见阳光 于 2019-12-7 15:36 编辑 \n\n如何添加延时执行指令\n\n\n\n\n\n\n7][T17Q`F7Q%$7WZUN`(B8S.png\n(152.25 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-12-7 14:02 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "再见阳光",
            "timestamp": 1575698640,
            "txt_content": "轻光233 发表于 2019-12-7 12:26\nString[] strings = cmd.split(\" \");\nString cmd = strings[0]; //主命令\n谢谢大佬耐心指教，我刚入门请见谅"
        },
        {
            "author": "再见阳光",
            "timestamp": 1575705780,
            "txt_content": "再见阳光 发表于 2019-12-7 14:03\n如何添加延时执行指令\n都解决了\n现在要添加一个延时指令 当玩家重生两秒后执行\nString[] strings = cmd.split(\" \");\nString cmd = strings[0];\n改在哪里添加？"
        },
        {
            "author": "再见阳光",
            "timestamp": 1575712980,
            "txt_content": "轻光233 发表于 2019-12-7 12:26\nString[] strings = cmd.split(\" \");\nString cmd = strings[0]; //主命令\n都解决了\n现在要添加一个延时指令 当玩家重生两秒后执行\nString[] strings = cmd.split(\" \");\nString cmd = strings[0];\n改在哪里添加？"
        },
        {
            "author": "轻光233",
            "timestamp": 1575726840,
            "txt_content": " 本帖最后由 轻光233 于 2019-12-21 11:50 编辑 \n\n将监听PlayerRespawnEvent的方法的那个if里的代码替换成\nlong tick = 20;//20tick一秒\nJavaPlugin plugin = JavaPlugin.getPlugin(类名.class);\nBukkit.getScheduler().runTaskLater(plugin,()->Bukkit.dispatchCommand(event.getPlayer(),\"你要执行的指令\"),tick);复制代码"
        },
        {
            "author": "再见阳光",
            "timestamp": 1576763640,
            "txt_content": "轻光233 发表于 2019-12-7 21:54\n将监听PlayerRespawnEvent的方法的那个if里的代码替换成\n现在做到这一步了，搞了一周也没有搞好，请指教一下。\n\n\n\n\n\n\nX154SCFGR[0EOUIHD2$M8$H.png\n(131.26 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-12-19 21:54 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "轻光233",
            "timestamp": 1576839720,
            "txt_content": "再见阳光 发表于 2019-12-19 21:54\n现在做到这一步了，搞了一周也没有搞好，请指教一下。\n我。。。。这真的是不知道何从吐槽起\n放在大括号里面啊！不是小括号"
        }
    ]
}