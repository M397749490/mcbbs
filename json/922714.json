{
    "title": "[Bukkit]如何右键使用掉一个物品[以解决]",
    "author": "弥猫うた",
    "replyCount": 2,
    "timestamp": 1572158760,
    "txt_content": " 本帖最后由 Mucrazy 于 2019-10-28 09:14 编辑 \n\n答案:(注3楼不是e.getAction()而是e.getHand() )ItemStack item = p.getItemInHand();\nif (x == Action.PHYSICAL || e.getItem == null || is.getType() == Material.AIR || x == Action.LEFT_CLICK_BLOCK\n|| x == Action.LEFT_CLICK_AIR || item == null || item.getType() == Material.AIR)\n{\n        return;\n}\n\nint amount = item.getAmount();\n\nif (e.getHand() == EquipmentSlot.HAND) {\nif (amount - 1 <= 0) {\np.setItemInHand(null);\n} else {\nitem.setAmount(amount - 1);\n}\n}\n",
    "replies": [
        {
            "author": "lgou2w",
            "timestamp": 1572189900,
            "txt_content": "ItemStack.setAmount(int);\n举个例子，将玩家手上物品数量减少1，如果数量为1则设为空：\nItemStack item = player.getItemInHand(); // 获取手中物品\nif (item == null || item.getType() == Material.AIR) return; // 为空就返回\nint amount = item.getAmount(); // 获取当前数量\nif (amount - 1 <= 0) // 如果数量 - 1 小于等于 0 \n  player.setItemInHand(null); // 那么设置为空\nelse\n  item.setAmount(amount - 1); // 否则数量减去1个复制代码"
        },
        {
            "author": "a8105",
            "timestamp": 1572199080,
            "txt_content": "lgou2w 发表于 2019-10-27 23:25\nItemStack.setAmount(int);\n举个例子，将玩家手上物品数量减少1，如果数量为1则设为空：\n ...\n补充\n假设为1.8版本或以上有主副手版本\n使用PlayerInteractEvent时记得判断event.getAction()==EquipmentSlot.Hand后再进行扣除物品\n因为有了主副手PlayerInteractEvent会触发两次"
        }
    ]
}