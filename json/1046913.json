{
    "title": "为什么这么写没卵用啊",
    "author": "huzpsb",
    "replyCount": 5,
    "timestamp": 1589616960,
    "txt_content": "RT,毫无作用\n代码如下:\nMain.java\npackage cf.huzpsb.wait;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Main extends JavaPlugin\n{\n    @Override\n    public void onLoad()\n    {\n        getLogger().info(\"NoInstantJoin v1.0 by:huzpsb\");\n    }\n    @Override\n    public void onEnable() {\n        getServer().getPluginManager().registerEvents(new CommandListener(), this);\n    }\n}\n复制代码CommandListener.java\npackage cf.huzpsb.wait;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.PlayerCommandPreprocessEvent;\npublic class CommandListener implements Listener {\n    @EventHandler\n    public void onPlayerCommandPreprocess(PlayerCommandPreprocessEvent e) {\n        if (System.currentTimeMillis() - e.getPlayer().getLastPlayed() < 10) {\n            e.setCancelled(true);\n            e.getPlayer().sendMessage(\"欢迎新人!请等待5秒后再使用命令!\");\n            e.getPlayer().sendMessage(\"如果您已经待满5秒仍然无法使用命令,请重新加入!\");\n        }\n    }\n}\n复制代码但是我还是可以一进服就随便敲命令 =.=\n为什么怎么写没用 =.=",
    "replies": [
        {
            "author": "南柯郡守",
            "timestamp": 1589629680,
            "txt_content": "写plugin.yml了嘛？"
        },
        {
            "author": "雨",
            "timestamp": 1589634540,
            "txt_content": "时间戳不是以毫秒计算的吗"
        },
        {
            "author": "huzpsb",
            "timestamp": 1589635200,
            "txt_content": "雨 发表于 2020-5-16 21:09\n时间戳不是以毫秒计算的吗\nen?所以该怎么改?谢谢!"
        },
        {
            "author": "William_Shi",
            "timestamp": 1589635320,
            "txt_content": "getLastPlayed对于 离线玩家 毫无歧义\n就是下线的时间\n\n但是对于在线玩家\n真的不确定\n因为是Player继承了离线玩家\n\n所以文档只有对于离线玩家的这个lastplayed有讲\n\n没有说在线玩家的last played到底指哪一个时间\n\n有几种可能\n第一是最近一次下线的时间\n第二是现在时间\n第三是上线时间\n\n所以最好是玩家上线的时候把时间戳存一下再比较，没有什么歧义"
        },
        {
            "author": "雨",
            "timestamp": 1589636340,
            "txt_content": " 本帖最后由 雨 于 2020-5-16 21:42 编辑 \n\n如楼上所说 最好用Map储存玩家加入服务器的时间戳 当玩家执行命令时进行比较\nif (System.currentTimeMillis() - time <= 1000 *5) {复制代码\n没测试 仅供参考\n\n"
        }
    ]
}