{
    "title": "[插件开发]如何判断玩家连续杀了同一玩家几次",
    "author": "Jonjs_Dada",
    "replyCount": 7,
    "timestamp": 1533088500,
    "txt_content": "说白了就是连杀\n变成小白谢谢了233...\n我的想法是写配置文件判断的\n可是可能太笨拙了233",
    "replies": [
        {
            "author": "哦快快快",
            "timestamp": 1533088980,
            "txt_content": " 本帖最后由 哦快快快 于 2018-8-1 10:04 编辑 \n\n用一个map集合记下来，\n或者说用数据库咯？\n另外求教配置文件该怎么搞？\n\n（一个小白的小声BB）"
        },
        {
            "author": "Jonjs_Dada",
            "timestamp": 1533089460,
            "txt_content": "哦快快快 发表于 2018-8-1 10:03\n用一个map集合记下来，\n或者说用数据库咯？\n另外求教配置文件该怎么搞？\n配置文件方法：（来自小白的还未实验的想法）\n1..比如PlayerDeath的时候，\nif config.getInt(下面的set第一个参数) = 0\nconfig.set(\"LianShaJiLu.\" + entity.getName() + \".\" + damager.getName, 1);\n\n2..再Death的时候啊，\nif config.getInt(同) > 0\nconfig.set +1\n这时候再if = 2，+N积分\n\n重复2\n\n好像没几个人能看懂我的思路"
        },
        {
            "author": "@rnmrnm.",
            "timestamp": 1533090420,
            "txt_content": "如果没理解错的话\n连杀同一个玩家 = 杀一次杀第二次第三次也是同一个玩家\n\n那么，我只说中文思路了，至于代码懒\n1.用Map存\n2.监听实体死亡，如果击杀者类型是玩家\n   Map put 击杀者 被杀者名字+1\n3.监听实体死亡，如果Map get 击杀者 = startsWith（或者endWith把+1+2+3那些的结尾去掉，再对比）\n   如果相同，endWith那里+1"
        },
        {
            "author": "RainIFunS",
            "timestamp": 1533094200,
            "txt_content": " 本帖最后由 RainIFunS 于 2018-8-1 00:32 编辑 \n\n确实不太好 运用map和task解决问题 我在外面 回来后我会编辑这个回复给出详细的方法和思路你也可以加我QQ 2802702465"
        },
        {
            "author": "sjx",
            "timestamp": 1533098520,
            "txt_content": " 本帖最后由 sjx 于 2018-8-1 12:44 编辑 \n\n如果用 Map，那么建议不要用玩家对象，而要用 UUID 储存。\n以下代码可能有 Bug（懒到不能再懒）public enum KillManager {\n    ;\n    public static long delay = 600L;\n    private static final Map<KillEntry, TimedKillCount> kills = new Hashtable<>();\n\n    public static void onKill(UUID damager, UUID entity, long time) {\n        KillEntry killEntry = new KillEntry(damager, entity);\n        kills.put(killEntry, new TimedKillCount(time, getKillCount(killEntry, time) + 1));\n    }\n\n    public static int getKillCount(UUID damager, UUID entity, long time) {\n        return getKillCount(new KillEntry(damager, entity), time);\n    }\n\n    private static int getKillCount(KillEntry killEntry, long time) {\n        for (Iterator<Map.Entry<KillEntry, TimedKillCount>> it = kills.entrySet().iterator(); it.hasNext();)\n            if (time >= it.next().getValue().time + delay) it.remove();\n        TimedKillCount timedKillCount = kills.get(killEntry);\n        return timedKillCount == null ? 0 : timedKillCount.killCount;\n    }\n\n    private static class KillEntry {\n        final UUID damager;\n        final UUID entity;\n\n        KillEntry(UUID damager, UUID entity) {\n            this.damager = Objects.requireNonNull(damager, \"damager\");\n            this.entity = Objects.requireNonNull(entity, \"entity\");\n        }\n\n        @Override\n        public int hashCode() {\n            final int prime = 31;\n            int result = 1;\n            result = prime * result + this.damager.hashCode();\n            result = prime * result + this.entity.hashCode();\n            return result;\n        }\n\n        @Override\n        public boolean equals(Object obj) {\n            if (this == obj) return true;\n            if (obj == null) return false;\n            if (!(obj instanceof KillEntry)) return false;\n            KillEntry other = (KillEntry) obj;\n            if (!this.damager.equals(other.damager)) return false;\n            if (!this.entity.equals(other.entity)) return false;\n            return true;\n        }\n    }\n\n    private static class TimedKillCount {\n        final long time;\n        final int killCount;\n\n        TimedKillCount(long time, int killCount) {\n            this.time = time;\n            this.killCount = killCount;\n        }\n    }\n}复制代码"
        },
        {
            "author": "RainIFunS",
            "timestamp": 1533120960,
            "txt_content": "为什么你加了我就不动了。  你QQ上找我，我把详细的发给你= -="
        },
        {
            "author": "c1230",
            "timestamp": 1533211500,
            "txt_content": "有个插件可以的，忘记了名字，奥，还有反作弊可以，ncp，什么的，推荐AAC"
        }
    ]
}