{
    "title": "如何让监听器知道自己要监听什么",
    "author": "冰上云梦",
    "replyCount": 13,
    "timestamp": 1592321760,
    "txt_content": "使用的前置插件： Atlas一下是原帖描述：[ 原帖地址 ]\n\nDescription\n\nWhat is Atlas?\n[size=14.6667px]Atlas is an all-in-one and cohesive API for developers who want to improve their Bukkit plugins or anti-cheats.\n\nWhat does it include?\nAn advanced and seemless custom packet-sniffing system, with individual packet-wrappers.Custom event system, running asynchronously so servers using your plugin will not experience any slowdowns on the main-thread.Enough math utilities to make you forget what you learned in math class.Many useful methods for doing little things like sending a colored message to console.The most accurate and light, public hitbox-grabbing system.Numerous reflection methods and utilities, including grabbers for NMS.\n[size=14.6667px]一下是我参考的原帖的方法写的监听器\n\n\n\n\n\n\nQQ截图20200616233217.png (94.45 KB, 下载次数: 1)\n\n下载附件\n\n2020-6-16 23:32 上传\n\n\n\n\n[size=14.6667px]\n\n\n我如何让他监听具有特定NBT的箱子的打开与关闭操作呢？\n",
    "replies": [
        {
            "author": "飞翔之歌",
            "timestamp": 1592322240,
            "txt_content": " 本帖最后由 飞翔之歌 于 2020-6-16 23:50 编辑 \n\n你这个代码写的应该是新事件吧。。。@季末旋律 \n\n"
        },
        {
            "author": "冰上云梦",
            "timestamp": 1592322660,
            "txt_content": "飞翔之歌 发表于 2020-6-16 23:44\n你这个写的应该是监听器@季末旋律\n不是吧，我跟着那个教程写的，应该是监听器吧……，第一次写自定义监听器，不知道这东西长什么样子。"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1592322900,
            "txt_content": "季末旋律 发表于 2020-6-16 23:51\n不是吧，我跟着那个教程写的，应该是监听器吧……，第一次写自定义监听器，不知道这东西长什么样子。 ...\n这是个新事件类\n监听器函数使用@EventHandler注解\n所监听的事件作为监听器函数的参数\n就像这样（伪代码）\n@EventHandler\npublic static void xxx(xxx e){\n    xxx\n}\n这样就会监听xxx事件\n至于监听特定NBT的箱子\n在函数里判断被打开的箱子是否为特定NBT的箱子,不是则return;"
        },
        {
            "author": "冰上云梦",
            "timestamp": 1592323260,
            "txt_content": " 本帖最后由 季末旋律 于 2020-6-17 00:03 编辑 \n飞翔之歌 发表于 2020-6-16 23:55\n这是个新事件类\n监听器函数使用@EventHandler注解\n所监听的事件作为监听器函数的参数\n\n\n我知道我为啥写这个了，监听器会在主方法内写\n这个就是负责提供一个异步的事件，然后让监听器监听这个事件后处理\n所以，怎么让他知道自己什么时候触发这个事件呢？\n如果使用系统的，可能普通箱子也会被一同监听。我怕这样会导致插件耗能过大，毕竟我就是好多箱子里面找东西的玩家"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1592323500,
            "txt_content": " 本帖最后由 飞翔之歌 于 2020-6-17 00:10 编辑 \n季末旋律 发表于 2020-6-17 00:01\n我知道我为啥写这个了，监听器会在主方法内写\n这个就是负责提供一个异步的事件，然后让监听器监听这个事 ...\n你或许可以实时监听带有特定NBT的箱子，如果该箱子被开启则触发事件\n（话说你这是插件呀，TileEntity难道不需要生艹NMS吗？（我没看前置插件sorry））\n（而且这样如果这些箱子多了，消耗还是很大）\n"
        },
        {
            "author": "冰上云梦",
            "timestamp": 1592326560,
            "txt_content": "飞翔之歌 发表于 2020-6-17 00:05\n你或许可以实时监听带有特定NBT的箱子，如果该箱子被开启则触发事件\n（话说你这是插件呀，TileEntity难 ...\n所以我才异步处理这个东西以防消耗过大，并且这个东西理论上也不会超过50个还有冷却。\n主要是和玩家的开箱操作分开（有一些GUI也是箱子），所以怎么做这个事件？"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1592326680,
            "txt_content": "季末旋律 发表于 2020-6-17 00:56\n所以我才异步处理这个东西以防消耗过大，并且这个东西理论上也不会超过50个还有冷却。\n主要是和玩家的开 ...\n监听所有这个箱子\n如果被打开就发布该事件\n（还需要判断该箱子周围的玩家是否在开这个箱子）\n（事实上可以套娃事件，通过监听事件来触发事件）"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1592356200,
            "txt_content": "粗略看了下回帖\n\n没必要\n\n没必要自己自定义Event  因为你自定义的Event还是在Bukkit的Event的基础上\n你可以直接像楼上说的监听箱子打开事件 然后获取箱子的NBT判断是否return\n都已经异步监听了 更不用怕什么卡住主线程的问题了"
        },
        {
            "author": "冰上云梦",
            "timestamp": 1592367720,
            "txt_content": " 本帖最后由 季末旋律 于 2020-6-17 12:29 编辑 \n南柯郡守 发表于 2020-6-17 09:10\n粗略看了下回帖\n\n没必要\n\n\n那我就直接监听箱子打开事件，然后判断一下就可以了吗？"
        },
        {
            "author": "于简",
            "timestamp": 1592377740,
            "txt_content": "大佬膜拜我来水经验啦"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1592377920,
            "txt_content": "季末旋律 发表于 2020-6-17 12:22\n那我就直接监听箱子打开事件，然后判断一下就可以了吗？\n是的 如果能监听到打开箱子事件\n\n也可以通过监听玩家与方块的交互事件  \n比如PlayerInteractEvent \n然后判断是不是箱子 \n再判断是不是要监听的特殊箱子"
        },
        {
            "author": "冰上云梦",
            "timestamp": 1592395500,
            "txt_content": "南柯郡守 发表于 2020-6-17 15:12\n是的 如果能监听到打开箱子事件\n\n也可以通过监听玩家与方块的交互事件  \n能告诉我怎么让事件知道自己需要监听什么，我还是想自己新建出来一个事件，然后自己去监听。\n毕竟这样都是异步的，我觉得我需要这样的方式。"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1592396040,
            "txt_content": " 本帖最后由 南柯郡守 于 2020-6-17 20:15 编辑 \n季末旋律 发表于 2020-6-17 20:05\n能告诉我怎么让事件知道自己需要监听什么，我还是想自己新建出来一个事件，然后自己去监听。\n毕竟这样都 ...\n当这件事发生的时候\n比如\nplayer.teleport(loc);\nBukkit.getPluginManager().callEvent(new MyPlayerTeleportEvent(player,loc));复制代码\n这样就是了 会在玩家传送的时候触发一个MyPlayerTeleportEvent如果要监听就是\n@EventHandler\npublic void onPlayerTeleport(MyPlayerTeleportEvent e) {\n    //do something\n}复制代码\n\n然而你不可能在mc的代码里加入第一段代码\n所以你只能先监听Bukkit提供的事件\n然后判断是不是你要的功能 再去callEvent\n"
        }
    ]
}