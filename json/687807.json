{
    "title": "[17w16a] 1.12最新快照的命令NBT更改",
    "author": "pca006132",
    "replyCount": 4,
    "timestamp": 1492753920,
    "txt_content": " 本帖最后由 pca006132 于 2017-4-21 16:54 编辑 \n\n部分资料来自 https://www.reddit.com/r/MinecraftCommands/comments/66jj03/changes_to_the_stringtonbt_parser_in_112/\n目前17w16a的fw类别就是以前的JsonToNbt（不确定改了名没有，反正就是这个搞字串转nbt的了）\n\n字串的更改(包括compound的key，也就是一般我们说的标签名称)\n以前字串一般可以选择有没有\"\"括住，除非: 字串内的括号并不完备(比如{{}这样，只在乎{}及[])，字串可能被读取成其他类型的nbt(如1, 1b, true等)。\n即使字串有\"或是\\也可以选择不被\"\"括住，就是\\的转义麻烦一点而已...\n然而，现在如果字串里面包括不属于 a-z A-Z . _ + -的字符(空格也不属于这几个字符)，就必须得用\"\"括住，并且需要转义\n举个例子，say hi 这字符现在就必须用括号括住，因为它包括了不属于 a-z A-Z . _ + -的字符，也就是空格。\nid:minecraft:stone 这nbt现在也会出现错误，因为包括了不属于 a-z A-Z . _ + -的字符，也就是冒号。\n再看一个例子，CustomName:图书馆管理员 现在会出现错误，因为中文字也不属于 a-z A-Z . _ + - 的字符\n\n标签名称现在也能够用\"\"括住了，越来越像JSON了，然而并没什么卵用...根本没标签名称使用了其他字符233333\n\n然而注意，是在没被\"\"括住的字串内不能使用其他符号，然而其他情况是可以使用的。比如字符串的前后:    CustomName    :    haha     ，MC会删掉那些前后的空格的(这倒是和以前的差不多)。\n\n列表(list)的改变\n其一，我们再也不能使用所谓的索引(index)。以前很多人会误会 [0:a,1:b,2:c] 这样的0 1 2是里面元素的索引(其实那只会被忽略，并没有什么卵用)，现在如果list里再出现 key: 的话(不包括里面compound里面的...)，就会直接报错。这是不错的233333\n\n其二，现在list的元素再也不能是不同的类型了。其实NBT格式的list是不能够不同类型的，然而以前的格式会直接忽略掉不同类型的。现在则会报错。\nlist的类型是视乎第一个元素的。比如 [1.0,2.0f,3.0] 就会报错，因为第二个元素是float而不同于第一个元素(double)\n注意: 即使那些元素可以变为其他元素的类型，比如[1, 1b] 或是 [1b, 1]，也会报错，因为int和byte是不同的。\n\n阵列(Array)的改变\n以前有个东西叫integer array，写法与list类似，都是这样 [1, 2, 3, 4, 5] 的。\n然而，现在mc改了，修改的地方有两个:\n\n其一，多了个byte array，就是一个储存byte的array呗\n\n其二，写法改了点，需要这样写: [I/B; 标签, 标签, 标签...]\n比如[I;1, 2, 3]，或者是[B; 1b, 2b, 3b]\n注意: I和B必须大写。byte array的话，里面的元素必须有b后缀，即使是int也会报错。\n还有，I和B后面那个是;\n\n浮点数(float, double)的改变\n现在滋磁科学记数法(Scientific notation)了，比如是 1.3e11\n\n也可以弄个无限来玩玩:\nfloat:3.5e38f\ndouble:1.8e308",
    "replies": [
        {
            "author": "MineCrocodile",
            "timestamp": 1492761120,
            "txt_content": "惨了，设计的地图要大改"
        },
        {
            "author": "chyx",
            "timestamp": 1492764540,
            "txt_content": "标签名称还真需要可以被\"\"括住 因为新出的玩家的recipeBook里有许多类似于\n\"minecraft:black_bed_from_white_bed\":{}这样的东西 \n要是不让再这里加引号 CB就弄不了这个\n\nlist里头不让用编号就不让吧 反正本来也没用\n\nbyte array不是新加的 而且每一个存档里都有\nBlockLight Blocks Data SkyLight等都是byte array\n\nInt array修改写法是一个好事\n本来是如果你写l:[1,2,3]因为里面都是Int就会自动识别成Int array而不是一个元素是Int的list 为了做元素是Int的list还要用l:[1,2,3,\"asd\"]这样的黑科技\n现在把两种东西的写法区分开了 是好事\n"
        },
        {
            "author": "pca006132",
            "timestamp": 1492765920,
            "txt_content": "chyx 发表于 2017-4-21 16:49\n标签名称还真需要可以被\"\"括住 因为新出的玩家的recipeBook里有许多类似于\n\"minecraft:black_bed_from_whit ...\n据我所知命令以前是没法写byte array的，而我说的新byte array就是说新加进命令的"
        },
        {
            "author": "marcong95",
            "timestamp": 1495631340,
            "txt_content": "刚想写一个entitydata用的datatag的parser，entitydata的输出挤一坨太难看了。。然而他就改版了。。"
        }
    ]
}