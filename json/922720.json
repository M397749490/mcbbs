{
    "title": "[1.7.10][Bukkit]应该如何让实体受到无视护甲的伤害？",
    "author": "heom",
    "replyCount": 7,
    "timestamp": 1572159240,
    "txt_content": " 本帖最后由 heom 于 2019-10-27 19:07 编辑 \npublic class ArmorBreak implements Listener {\n\n        @EventHandler\n        public void PlayerDamageEntity(EntityDamageByEntityEvent event) {\n                if (event.getDamager() instanceof Player) {\n                        Player player = (Player) event.getDamager();\n                        Damageable damageable = (Damageable) event.getEntity();\n                        double damage = damageable.getHealth() - 10;\n                        damageable.setHealth(damage);\n\n                }\n        }\n}复制代码\n\n开发环境是1.7.10。\n这段代码可以设置实体的血量，但是对穿着RPGItem护甲的对手貌似无效。\n",
    "replies": [
        {
            "author": "Mohist-Communit",
            "timestamp": 1572163200,
            "txt_content": "主类怎么写的，是不是没注册监听器"
        },
        {
            "author": "heom",
            "timestamp": 1572163560,
            "txt_content": "Mohist-Communit 发表于 2019-10-27 16:00\n主类怎么写的，是不是没注册监听器\n注册了，这个方法里面发消息都是有的。"
        },
        {
            "author": "mc能吃吗",
            "timestamp": 1572168480,
            "txt_content": "是什么用不了？没有伤害？伤害不对？\n顺带一提，你这种写法应该加个\nif (damage < 0) {\ndamage = 0;\n}\n不然会报错\n\n还有 为何不把源码发上来？\n"
        },
        {
            "author": "heom",
            "timestamp": 1572170940,
            "txt_content": " 本帖最后由 heom 于 2019-10-27 18:58 编辑 \nmc能吃吗 发表于 2019-10-27 17:28\n是什么用不了？没有伤害？伤害不对？\n顺带一提，你这种写法应该加个\nif (damage < 0) {\n因为测试条件是很高护甲打不掉血的那种...没发现报错，但是修正这里也是不掉血[编辑]\n对手是RPGItem的护甲。"
        },
        {
            "author": "mc能吃吗",
            "timestamp": 1572174720,
            "txt_content": "heom 发表于 2019-10-27 18:09\n因为测试条件是很高护甲打不掉血的那种...没发现报错，但是修正这里也是不掉血[编辑]\n对手是RPGItem的护甲 ...\n??????\n都说提供源码了\n算了 按你这样 尝试在事件监听上的优先级做更改\n顺带一提 优先级是越SLOW就越先（据大佬说是这样）越HIGH反而越慢\n因为RPGITEM也是利用了事件监听来修改玩家的血量\n"
        },
        {
            "author": "wshycaa",
            "timestamp": 1572848040,
            "txt_content": " 本帖最后由 wshycaa 于 2019-11-4 14:15 编辑 \n\n如果是1.710 可以在伤害事件里，设置完正常伤害，加上setDamage(DamageModifier.ARMOR) = 0\n这样就可以把原版护甲抵消的伤害取消\n如果1.8以上，spigot取消了这个东西。你可以直接entity.damage(xxx)\n"
        },
        {
            "author": "heom",
            "timestamp": 1573211400,
            "txt_content": "解决了...我是乘了个getDamage导致变成0了..."
        }
    ]
}