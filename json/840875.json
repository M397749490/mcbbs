{
    "title": "Minecraft启动的背后——文件篇",
    "author": "hemp",
    "replyCount": 4,
    "timestamp": 1548825600,
    "txt_content": " 本帖最后由 hemp 于 2019-1-30 20:20 编辑 \n   Minecraft启动器是我们在熟悉不过的东西了。有了它，才能启动Minecraft。可以说他是一个重要而又默默无闻的角色了。那么在我们点下启动按钮的那一刻，它在背后都做了些什么？在这个帖子里我们来探寻启动Minecraft的原理。\n\n一、这是?MC\n“.minecraft”这个目录是mc玩家都很熟悉的，我们来看看它里面都放了什么\n\n\n\n\n\nTIM截图20190129215515.png (40.08 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-29 21:57 上传\n\n\n\n\n\n有assets,libraries,version......他们都是干什么用的呢？在这里先简单介绍下。\nassets:保存了一些游戏的资源文件(语言，声音之类的)\nlibraries:保存了一些游戏所需的库文件\nlogs:保存了游戏的运行日志\nresourcepacks:这个大家很熟悉，放资源包的地方\nsaves:保存了游戏的存档\nversions:保存了游戏的一些核心文件\nlauncher_profiles.json:这个是官方启动器用于记录登录信息的文件\noptions.txt:这个文件里保存了游戏的设置信息\nservers.dat:这里面保存了服务器列表信息(NBT格式)\nusercache.json:这里面保存了角色名与UUID的映射信息\n\n说了这么多，哪个是需要我们来研究的呢？刚才说到versions文件夹里保存了游戏核心文件，我们就先研究下这个文件夹吧。\n\n\n二、versions文件夹初探\n\n\n\n\n\nTIM截图20190129221404.png (18.81 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-29 22:12 上传\n\n\n\n\n\n这不就是启动器版本列表里的吗？好神奇！点开一个看看！\n\n\n\n\n\nTIM截图20190129221559.png (22.36 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-29 22:13 上传\n\n\n\n\n\n里面东西还是很简单的哈，看看那个json里面写了什么\n\n\n\n\n\nTIM截图20190129221722.png (66.65 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-29 22:15 上传\n\n\n\n\n\n看起来有点乱诶。这是因为notpad的换行是\\r\\n的，而这个文件里却是\\n.我们换一个文本编辑器试试！\n\n\n\n\n\nTIM截图20190129222304.png (131.79 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-29 22:20 上传\n\n\n\n\n\n\n看起来好多了，我们来看看里面的内容吧！\n二、version.json初探\n\"id\": \"1.7.2\"复制代码这个貌似跟版本名保持相同，我们先不理他，看下一个。\n\"minecraftArguments\": \"--username ${auth_player_name} --version ${version_name} --gameDir ${game_directory} --assetsDir ${game_assets} --uuid ${auth_uuid} --accessToken ${auth_access_token}\"复制代码这个.....通过名字猜的话，好像是mc参数？会不会跟启动有关呢？我们之后继续研究！\n  \"mainClass\": \"net.minecraft.client.main.Main\",复制代码主类？99%跟启动有关！！\n  \"assetIndex\": {\n    \"totalSize\": 153475165,\n    \"id\": \"legacy\",\n    \"url\": \"https://launchermeta.mojang.com/v1/packages/770572e819335b6c0a053f8378ad88eda189fc14/legacy.json\",\n    \"sha1\": \"770572e819335b6c0a053f8378ad88eda189fc14\",\n    \"size\": 109634\n  },复制代码assets,里面还有个链接，我们打开看看。\n\n\n\n\nTIM截图20190130112704.png (87 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 11:25 上传\n\n\n\n\n\n\n这个文件估计就是描述assets的清单了，我们打开.minecraft/assets/indexes文件夹看看\n\n\n\n\n\nTIM截图20190130114147.png (28 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 11:39 上传\n\n\n\n\n\n \"id\": \"legacy\",\n    \"url\": \"https://launchermeta.mojang.com/v1/packages/770572e819335b6c0a053f8378ad88eda189fc14/legacy.json\",复制代码估计legacy.json这个文件就是这两行json所表示的。打开看看\n\n\n\n\n\nTIM截图20190130114500.png (89.64 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 11:42 上传\n\n\n\n\n\n虽然没有换行，但是不难看出，跟上面的链接打开的内容是一样的，大致可以猜出，启动器从那个链接下载文件，然后命名为${id}.json放到“.minecraft/assets/indexes”文件夹。\n\n\"assets\": \"legacy\",复制代码这个目前还没我们分析出含义，也许换一个版本会有发现。\n\n\n\"libraries\": [\n    {\n      \"name\": \"com.mojang:netty:1.6\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/mojang/netty/1.6/netty-1.6.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/mojang/netty/1.6/netty-1.6.jar\",\n          \"sha1\": \"4b75825a06139752bd800d9e29c5fd55b8b1b1e4\",\n          \"size\": 7877\n        }\n      }\n    },\n    {\n      \"name\": \"java3d:vecmath:1.3.1\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"java3d/vecmath/1.3.1/vecmath-1.3.1.jar\",\n          \"url\": \"https://libraries.minecraft.net/java3d/vecmath/1.3.1/vecmath-1.3.1.jar\",\n          \"sha1\": \"a0ae4f51da409fa0c20fa0ca59e6bbc9413ae71d\",\n          \"size\": 289881\n        }\n      }\n    },\n    {\n      \"name\": \"net.sf.trove4j:trove4j:3.0.3\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"net/sf/trove4j/trove4j/3.0.3/trove4j-3.0.3.jar\",\n          \"url\": \"https://libraries.minecraft.net/net/sf/trove4j/trove4j/3.0.3/trove4j-3.0.3.jar\",\n          \"sha1\": \"42ccaf4761f0dfdfa805c9e340d99a755907e2dd\",\n          \"size\": 2523218\n        }\n      }\n    },\n    {\n      \"name\": \"com.ibm.icu:icu4j-core-mojang:51.2\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/ibm/icu/icu4j-core-mojang/51.2/icu4j-core-mojang-51.2.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/ibm/icu/icu4j-core-mojang/51.2/icu4j-core-mojang-51.2.jar\",\n          \"sha1\": \"63d216a9311cca6be337c1e458e587f99d382b84\",\n          \"size\": 1634692\n        }\n      }\n    },\n    {\n      \"name\": \"net.sf.jopt-simple:jopt-simple:4.5\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"net/sf/jopt-simple/jopt-simple/4.5/jopt-simple-4.5.jar\",\n          \"url\": \"https://libraries.minecraft.net/net/sf/jopt-simple/jopt-simple/4.5/jopt-simple-4.5.jar\",\n          \"sha1\": \"6065cc95c661255349c1d0756657be17c29a4fd3\",\n          \"size\": 61311\n        }\n      }\n    },\n    {\n      \"name\": \"com.paulscode:codecjorbis:20101023\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/paulscode/codecjorbis/20101023/codecjorbis-20101023.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/paulscode/codecjorbis/20101023/codecjorbis-20101023.jar\",\n          \"sha1\": \"c73b5636faf089d9f00e8732a829577de25237ee\",\n          \"size\": 103871\n        }\n      }\n    },\n    {\n      \"name\": \"com.paulscode:codecwav:20101023\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/paulscode/codecwav/20101023/codecwav-20101023.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/paulscode/codecwav/20101023/codecwav-20101023.jar\",\n          \"sha1\": \"12f031cfe88fef5c1dd36c563c0a3a69bd7261da\",\n          \"size\": 5618\n        }\n      }\n    },\n    {\n      \"name\": \"com.paulscode:libraryjavasound:20101123\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/paulscode/libraryjavasound/20101123/libraryjavasound-20101123.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/paulscode/libraryjavasound/20101123/libraryjavasound-20101123.jar\",\n          \"sha1\": \"5c5e304366f75f9eaa2e8cca546a1fb6109348b3\",\n          \"size\": 21679\n        }\n      }\n    },\n    {\n      \"name\": \"com.paulscode:librarylwjglopenal:20100824\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/paulscode/librarylwjglopenal/20100824/librarylwjglopenal-20100824.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/paulscode/librarylwjglopenal/20100824/librarylwjglopenal-20100824.jar\",\n          \"sha1\": \"73e80d0794c39665aec3f62eee88ca91676674ef\",\n          \"size\": 18981\n        }\n      }\n    },\n    {\n      \"name\": \"com.paulscode:soundsystem:20120107\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/paulscode/soundsystem/20120107/soundsystem-20120107.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/paulscode/soundsystem/20120107/soundsystem-20120107.jar\",\n          \"sha1\": \"419c05fe9be71f792b2d76cfc9b67f1ed0fec7f6\",\n          \"size\": 65020\n        }\n      }\n    },\n    {\n      \"name\": \"io.netty:netty-all:4.0.10.Final\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"io/netty/netty-all/4.0.10.Final/netty-all-4.0.10.Final.jar\",\n          \"url\": \"https://libraries.minecraft.net/io/netty/netty-all/4.0.10.Final/netty-all-4.0.10.Final.jar\",\n          \"sha1\": \"9e50bd52ffe257a0e2cd8d971688d6ce7d174325\",\n          \"size\": 1452995\n        }\n      }\n    },\n    {\n      \"name\": \"com.google.guava:guava:15.0\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/google/guava/guava/15.0/guava-15.0.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/google/guava/guava/15.0/guava-15.0.jar\",\n          \"sha1\": \"ed727a8d9f247e2050281cb083f1c77b09dcb5cd\",\n          \"size\": 2172168\n        }\n      }\n    },\n    {\n      \"name\": \"org.apache.commons:commons-lang3:3.1\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"org/apache/commons/commons-lang3/3.1/commons-lang3-3.1.jar\",\n          \"url\": \"https://libraries.minecraft.net/org/apache/commons/commons-lang3/3.1/commons-lang3-3.1.jar\",\n          \"sha1\": \"905075e6c80f206bbe6cf1e809d2caa69f420c76\",\n          \"size\": 315805\n        }\n      }\n    },\n    {\n      \"name\": \"commons-io:commons-io:2.4\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"commons-io/commons-io/2.4/commons-io-2.4.jar\",\n          \"url\": \"https://libraries.minecraft.net/commons-io/commons-io/2.4/commons-io-2.4.jar\",\n          \"sha1\": \"b1b6ea3b7e4aa4f492509a4952029cd8e48019ad\",\n          \"size\": 185140\n        }\n      }\n    },\n    {\n      \"name\": \"net.java.jinput:jinput:2.0.5\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"net/java/jinput/jinput/2.0.5/jinput-2.0.5.jar\",\n          \"url\": \"https://libraries.minecraft.net/net/java/jinput/jinput/2.0.5/jinput-2.0.5.jar\",\n          \"sha1\": \"39c7796b469a600f72380316f6b1f11db6c2c7c4\",\n          \"size\": 208338\n        }\n      }\n    },\n    {\n      \"name\": \"net.java.jutils:jutils:1.0.0\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"net/java/jutils/jutils/1.0.0/jutils-1.0.0.jar\",\n          \"url\": \"https://libraries.minecraft.net/net/java/jutils/jutils/1.0.0/jutils-1.0.0.jar\",\n          \"sha1\": \"e12fe1fda814bd348c1579329c86943d2cd3c6a6\",\n          \"size\": 7508\n        }\n      }\n    },\n    {\n      \"name\": \"com.google.code.gson:gson:2.2.4\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/google/code/gson/gson/2.2.4/gson-2.2.4.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/google/code/gson/gson/2.2.4/gson-2.2.4.jar\",\n          \"sha1\": \"a60a5e993c98c864010053cb901b7eab25306568\",\n          \"size\": 190432\n        }\n      }\n    },\n    {\n      \"name\": \"com.mojang:authlib:1.3\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/mojang/authlib/1.3/authlib-1.3.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/mojang/authlib/1.3/authlib-1.3.jar\",\n          \"sha1\": \"4fb033c2d6eccced08752d8f33e8c3a0a45deb2d\",\n          \"size\": 35930\n        }\n      }\n    },\n    {\n      \"name\": \"org.apache.logging.log4j:log4j-api:2.0-beta9\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"org/apache/logging/log4j/log4j-api/2.0-beta9/log4j-api-2.0-beta9.jar\",\n          \"url\": \"https://libraries.minecraft.net/org/apache/logging/log4j/log4j-api/2.0-beta9/log4j-api-2.0-beta9.jar\",\n          \"sha1\": \"1dd66e68cccd907880229f9e2de1314bd13ff785\",\n          \"size\": 108161\n        }\n      }\n    },\n    {\n      \"name\": \"org.apache.logging.log4j:log4j-core:2.0-beta9\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"org/apache/logging/log4j/log4j-core/2.0-beta9/log4j-core-2.0-beta9.jar\",\n          \"url\": \"https://libraries.minecraft.net/org/apache/logging/log4j/log4j-core/2.0-beta9/log4j-core-2.0-beta9.jar\",\n          \"sha1\": \"678861ba1b2e1fccb594bb0ca03114bb05da9695\",\n          \"size\": 681134\n        }\n      }\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl:2.9.0\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"org/lwjgl/lwjgl/lwjgl/2.9.0/lwjgl-2.9.0.jar\",\n          \"url\": \"https://libraries.minecraft.net/org/lwjgl/lwjgl/lwjgl/2.9.0/lwjgl-2.9.0.jar\",\n          \"sha1\": \"5654d06e61a1bba7ae1e7f5233e1106be64c91cd\",\n          \"size\": 994633\n        }\n      },\n      \"rules\": [\n        {\n          \"action\": \"allow\"\n        },\n        {\n          \"action\": \"disallow\",\n          \"os\": {\n            \"name\": \"osx\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl_util:2.9.0\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"org/lwjgl/lwjgl/lwjgl_util/2.9.0/lwjgl_util-2.9.0.jar\",\n          \"url\": \"https://libraries.minecraft.net/org/lwjgl/lwjgl/lwjgl_util/2.9.0/lwjgl_util-2.9.0.jar\",\n          \"sha1\": \"a778846b64008fc7f48ead2377f034e547991699\",\n          \"size\": 173360\n        }\n      },\n      \"rules\": [\n        {\n          \"action\": \"allow\"\n        },\n        {\n          \"action\": \"disallow\",\n          \"os\": {\n            \"name\": \"osx\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl-platform:2.9.0\",\n      \"downloads\": {\n        \"classifiers\": {\n          \"natives-linux\": {\n            \"path\": \"org/lwjgl/lwjgl/lwjgl-platform/2.9.0/lwjgl-platform-2.9.0-natives-linux.jar\",\n            \"url\": \"https://libraries.minecraft.net/org/lwjgl/lwjgl/lwjgl-platform/2.9.0/lwjgl-platform-2.9.0-natives-linux.jar\",\n            \"sha1\": \"2ba5dcb11048147f1a74eff2deb192c001321f77\",\n            \"size\": 569061\n          },\n          \"natives-osx\": {\n            \"path\": \"org/lwjgl/lwjgl/lwjgl-platform/2.9.0/lwjgl-platform-2.9.0-natives-osx.jar\",\n            \"url\": \"https://libraries.minecraft.net/org/lwjgl/lwjgl/lwjgl-platform/2.9.0/lwjgl-platform-2.9.0-natives-osx.jar\",\n            \"sha1\": \"6621b382cb14cc409b041d8d72829156a87c31aa\",\n            \"size\": 518924\n          },\n          \"natives-windows\": {\n            \"path\": \"org/lwjgl/lwjgl/lwjgl-platform/2.9.0/lwjgl-platform-2.9.0-natives-windows.jar\",\n            \"url\": \"https://libraries.minecraft.net/org/lwjgl/lwjgl/lwjgl-platform/2.9.0/lwjgl-platform-2.9.0-natives-windows.jar\",\n            \"sha1\": \"3f11873dc8e84c854ec7c5a8fd2e869f8aaef764\",\n            \"size\": 609967\n          }\n        }\n      },\n      \"extract\": {\n        \"exclude\": [\n          \"META-INF/\"\n        ]\n      },\n      \"natives\": {\n        \"linux\": \"natives-linux\",\n        \"windows\": \"natives-windows\"\n      },\n      \"rules\": [\n        {\n          \"action\": \"allow\"\n        },\n        {\n          \"action\": \"disallow\",\n          \"os\": {\n            \"name\": \"osx\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl:2.9.1-nightly-20131017\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"org/lwjgl/lwjgl/lwjgl/2.9.1-nightly-20131017/lwjgl-2.9.1-nightly-20131017.jar\",\n          \"url\": \"https://libraries.minecraft.net/org/lwjgl/lwjgl/lwjgl/2.9.1-nightly-20131017/lwjgl-2.9.1-nightly-20131017.jar\",\n          \"sha1\": \"148d2981251ad796e50922dabfb9354ec26741dd\",\n          \"size\": 1016818\n        }\n      },\n      \"rules\": [\n        {\n          \"action\": \"allow\",\n          \"os\": {\n            \"name\": \"osx\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl_util:2.9.1-nightly-20131017\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"org/lwjgl/lwjgl/lwjgl_util/2.9.1-nightly-20131017/lwjgl_util-2.9.1-nightly-20131017.jar\",\n          \"url\": \"https://libraries.minecraft.net/org/lwjgl/lwjgl/lwjgl_util/2.9.1-nightly-20131017/lwjgl_util-2.9.1-nightly-20131017.jar\",\n          \"sha1\": \"b4570ef98d017fa8f515a202e727dd12f6ef52f3\",\n          \"size\": 173887\n        }\n      },\n      \"rules\": [\n        {\n          \"action\": \"allow\",\n          \"os\": {\n            \"name\": \"osx\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"org.lwjgl.lwjgl:lwjgl-platform:2.9.1-nightly-20131017\",\n      \"downloads\": {\n        \"classifiers\": {\n          \"natives-osx\": {\n            \"path\": \"org/lwjgl/lwjgl/lwjgl-platform/2.9.1-nightly-20131017/lwjgl-platform-2.9.1-nightly-20131017-natives-osx.jar\",\n            \"url\": \"https://libraries.minecraft.net/org/lwjgl/lwjgl/lwjgl-platform/2.9.1-nightly-20131017/lwjgl-platform-2.9.1-nightly-20131017-natives-osx.jar\",\n            \"sha1\": \"54241f3f8dac9617ca1ff335ffd3939f849c5017\",\n            \"size\": 524201\n          }\n        }\n      },\n      \"extract\": {\n        \"exclude\": [\n          \"META-INF/\"\n        ]\n      },\n      \"natives\": {\n        \"osx\": \"natives-osx\"\n      },\n      \"rules\": [\n        {\n          \"action\": \"allow\",\n          \"os\": {\n            \"name\": \"osx\"\n          }\n        }\n      ]\n    },\n    {\n      \"name\": \"net.java.jinput:jinput-platform:2.0.5\",\n      \"downloads\": {\n        \"classifiers\": {\n          \"natives-linux\": {\n            \"path\": \"net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-linux.jar\",\n            \"url\": \"https://libraries.minecraft.net/net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-linux.jar\",\n            \"sha1\": \"7ff832a6eb9ab6a767f1ade2b548092d0fa64795\",\n            \"size\": 10362\n          },\n          \"natives-osx\": {\n            \"path\": \"net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-osx.jar\",\n            \"url\": \"https://libraries.minecraft.net/net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-osx.jar\",\n            \"sha1\": \"53f9c919f34d2ca9de8c51fc4e1e8282029a9232\",\n            \"size\": 12186\n          },\n          \"natives-windows\": {\n            \"path\": \"net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-windows.jar\",\n            \"url\": \"https://libraries.minecraft.net/net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-windows.jar\",\n            \"sha1\": \"385ee093e01f587f30ee1c8a2ee7d408fd732e16\",\n            \"size\": 155179\n          }\n        }\n      },\n      \"extract\": {\n        \"exclude\": [\n          \"META-INF/\"\n        ]\n      },\n      \"natives\": {\n        \"linux\": \"natives-linux\",\n        \"osx\": \"natives-osx\",\n        \"windows\": \"natives-windows\"\n      }\n    }\n  ],复制代码\n\n这个应该是minecraft的所需要的库了，乍一看差不多，仔细看还有区别。\n{\n      \"name\": \"com.mojang:netty:1.6\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"com/mojang/netty/1.6/netty-1.6.jar\",\n          \"url\": \"https://libraries.minecraft.net/com/mojang/netty/1.6/netty-1.6.jar\",\n          \"sha1\": \"4b75825a06139752bd800d9e29c5fd55b8b1b1e4\",\n          \"size\": 7877\n        }\n      }\n    },复制代码先看看这种的。name的值可能有人觉得眼熟\ncompile group: 'io.netty:netty:3.10.6.Final'\n复制代码他的规则是:组织:名称:版本\n下载地址也是按照一定规则定义的:\n仓库地址/<组织名把'.'替换成'/'>/名称/版本/名称-版本.jar\nSHA1,size应该是用来校验的。\n\n我们来看看另一种:\n{\n      \"name\": \"net.java.jinput:jinput-platform:2.0.5\",\n      \"downloads\": {\n        \"classifiers\": {\n          \"natives-linux\": {\n            \"path\": \"net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-linux.jar\",\n            \"url\": \"https://libraries.minecraft.net/net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-linux.jar\",\n            \"sha1\": \"7ff832a6eb9ab6a767f1ade2b548092d0fa64795\",\n            \"size\": 10362\n          },\n          \"natives-osx\": {\n            \"path\": \"net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-osx.jar\",\n            \"url\": \"https://libraries.minecraft.net/net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-osx.jar\",\n            \"sha1\": \"53f9c919f34d2ca9de8c51fc4e1e8282029a9232\",\n            \"size\": 12186\n          },\n          \"natives-windows\": {\n            \"path\": \"net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-windows.jar\",\n            \"url\": \"https://libraries.minecraft.net/net/java/jinput/jinput-platform/2.0.5/jinput-platform-2.0.5-natives-windows.jar\",\n            \"sha1\": \"385ee093e01f587f30ee1c8a2ee7d408fd732e16\",\n            \"size\": 155179\n          }\n        }\n      },\n      \"extract\": {\n        \"exclude\": [\n          \"META-INF/\"\n        ]\n      },\n      \"natives\": {\n        \"linux\": \"natives-linux\",\n        \"osx\": \"natives-osx\",\n        \"windows\": \"natives-windows\"\n      }\n    }复制代码\n\n这个就是大名鼎鼎的native资源\nJava平台有个用户和本地C代码进行互操作的API，称为Java Native Interface (Java本地接口)。\n我们常听说解压native，那么到底是解压的什么呢？解压它有什么用呢？我们之后研究。\n\n\"downloads\": {\n    \"client\": {\n      \"url\": \"https://launcher.mojang.com/v1/objects/0c8689f904922af71c7144dcfb81bce976cadd49/client.jar\",\n      \"sha1\": \"0c8689f904922af71c7144dcfb81bce976cadd49\",\n      \"size\": 5117607\n    },\n    \"server\": {\n      \"url\": \"https://launcher.mojang.com/v1/objects/3716cac82982e7c2eb09f83028b555e9ea606002/server.jar\",\n      \"sha1\": \"3716cac82982e7c2eb09f83028b555e9ea606002\",\n      \"size\": 9163955\n    },\n    \"windows_server\": {\n      \"url\": \"https://launcher.mojang.com/v1/objects/07ae7cdcff6199735eb0f40da5d5c0763558a678/windows_server.exe\",\n      \"sha1\": \"07ae7cdcff6199735eb0f40da5d5c0763558a678\",\n      \"size\": 9559731\n    }\n  },\n  \"logging\": {\n    \"client\": {\n      \"file\": {\n        \"id\": \"client-1.7.xml\",\n        \"url\": \"https://launcher.mojang.com/v1/objects/6605d632a2399010c0085d3e4da58974d62ccdfe/client-1.7.xml\",\n        \"sha1\": \"6605d632a2399010c0085d3e4da58974d62ccdfe\",\n        \"size\": 871\n      },\n      \"argument\": \"-Dlog4j.configurationFile\\u003d${path}\",\n      \"type\": \"log4j2-xml\"\n    }\n  },复制代码这个应该是相关文件的下载有客户端，服务端，windows_server,logging(有关日志输出的东西)，我们需要下载的是client.jar，他就是游戏的核心文件！！\n \"type\": \"release\",\n  \"time\": \"2013-10-25T21:00:00+08:00\",\n  \"releaseTime\": \"2013-10-25T21:00:00+08:00\",\n  \"minimumLauncherVersion\": 9,\n  \"hidden\": false复制代码type:这个是表示其类型，比如正式版，快照版等....\ntime:时间？\nreleaseTime:发布时间\nminimumLauncherVersion:最低启动器版本\nhidden:隐藏？(个人猜测是在版本列表不显示)\nversion.json大概就是这些内容，这个是重要的文件，我们通过他，就可以下载整个minecraft客户端，是不是很神奇？？\n\n\n\n三、assets文件夹探索\n\n\n\n\n\n\nTIM截图20190130124132.png (22.76 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 12:39 上传\n\n\n\n\n\n可能你们会比这个多点，但是肯定有objects,indexex这两个文件夹。\n先看看indexes文件夹\n\n\n\n\n\nTIM截图20190130122430.png (18.16 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 12:22 上传\n\n\n\n\n\nem....大家应该比较眼熟，因为介绍version.json的时候提到过这个。那么我们就仔细看看里面的内容吧！！！\n（为了看起来顺眼，我把它粘到编辑器里）\n\n\n\n\n\nTIM截图20190130122821.png (40.56 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 12:26 上传\n\n\n\n\n\n结构还是不复杂的，有两个对象:objects和virtual\n展开objects\n\n\n\n\nTIM截图20190130123348.png (11.16 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 12:33 上传\n\n\n\n\n里面有很多对象，展开一个对象后，我们可以看到上图的样子。他们的键(key)是资源名，值(value)是该资源有关的hash,size等。还有个virtual呢！！刚才我们看到assets目录有个virtual文件夹，我们看看这里面有什么。\n\n\n\n\n\nTIM截图20190130124446.png (55.72 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 12:42 上传\n\n\n\n\n这里面有语言文件、各种音效文件，这应该是mc的一部分资源。READ_ME_I_AM_VERY_IMPORTANT.txt复制代码我们看看这是什么？\n\n\n\n\nTIM截图20190130124736.png (91.3 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 12:45 上传\n\n\n\n\n这是Dinnerbone留给我们的一封信，意思说:这个目录结构马上要弃用了。那么新的目录结构呢？我们看看1.12的assets_index。\n\n\n\n\nTIM截图20190130125053.png (13.78 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 12:48 上传\n\n\n\n\nem.....没什么区别啊，不过virtual:true没了。我们再看看objects文件夹\n\n\n\n\nTIM截图20190130130122.png (165.66 KB, 下载次数: 0)\n\n下载附件\n\n2019-1-30 12:59 上传\n\n\n\n\n随便点开一个\n\n\n\n\nTIM截图20190130130203.png (58.79 KB, 下载次数: 1)\n\n下载附件\n\n2019-1-30 12:59 上传\n\n\n\n\n文件夹名应该是开头两个字母，而他们的名是他们的hash值（大家可以自己试试是md5还是sha）\n\nassets文件夹里面大概是这些内容了，我们知道了他的目录结构，在以后我们实现文件补全时，会用到这个！！\n四、libraries的探索上文说到，这里面保存了mc运行所需的库，他们的目录结构很简单。可以概括为：组织名('.'替换成路径分隔符)/名称/版本/名称-版本.jar复制代码我们再看看上文说的version.json{\n      \"name\": \"org.apache.logging.log4j:log4j-api:2.0-beta9\",\n      \"downloads\": {\n        \"artifact\": {\n          \"path\": \"org/apache/logging/log4j/log4j-api/2.0-beta9/log4j-api-2.0-beta9.jar\",\n          \"url\": \"https://libraries.minecraft.net/org/apache/logging/log4j/log4j-api/2.0-beta9/log4j-api-2.0-beta9.jar\",\n          \"sha1\": \"1dd66e68cccd907880229f9e2de1314bd13ff785\",\n          \"size\": 108161\n        }\n      }\n    },复制代码注意path对应是值，这个就是我们应该放到的位置。那为什么还要自己去拼路径？那时因为有可能出现不提供path的情况，这时候我们就要拼接出来路径。\n总结：我们了解了mc的目录结构，知道了mc的所有文件都是按照一定规则分布的。同时也有意外的发现(启动参数，主类)。下一篇我们会探究如何启动mc!\n\n",
    "replies": [
        {
            "author": "FZG2000",
            "timestamp": 1548832860,
            "txt_content": "懵逼   懵逼    懵逼"
        },
        {
            "author": "langyo",
            "timestamp": 1548833160,
            "txt_content": "请将超过两百行的那些代码用 spoiler 标签收缩起来，影响阅读"
        },
        {
            "author": "hemp",
            "timestamp": 1548833160,
            "txt_content": "FZG2000 发表于 2019-1-30 15:21\n懵逼   懵逼    懵逼\nUm......我已经尽力去解释了"
        },
        {
            "author": "goalsetting",
            "timestamp": 1549951920,
            "txt_content": "看了第二遍了。。。还是看不懂"
        }
    ]
}