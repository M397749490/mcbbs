{
    "title": "服务端自动重启脚本如何设置",
    "author": "皮特刘",
    "replyCount": 18,
    "timestamp": 1583256420,
    "txt_content": " 本帖最后由 skyliye 于 2020-3-4 08:45 编辑 \n\n这里如何设置 服务端 输入 stop  自动重启呢？\n\n\n\n\nimage.png (17.97 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-4 01:27 上传\n\n\n\n\n\n",
    "replies": [
        {
            "author": "思念化作海",
            "timestamp": 1583256420,
            "txt_content": " 本帖最后由 折叠 于 2020-3-9 12:42 编辑 \n@echo OFF\n:head\nset a=-1\n:start\nset /a a+=1\nset b=3\ncolor 3\ntitle Server [已重新启动 %a% 次]\njava -Xmx8G -Xms2G -jar CatServer.jar\nping -n %b% 127.1>nul\ngoto start复制代码\n这样关服后就会自动重启了"
        },
        {
            "author": "aassdsd",
            "timestamp": 1583256540,
            "txt_content": "为什么要输stop？服务器指令restart就是重启的啊？。"
        },
        {
            "author": "皮特刘",
            "timestamp": 1583256660,
            "txt_content": "aassdsd 发表于 2020-3-4 01:29\n为什么要输stop？服务器指令restart就是重启的啊？。\n习惯勒。"
        },
        {
            "author": "皮特刘",
            "timestamp": 1583256780,
            "txt_content": "aassdsd 发表于 2020-3-4 01:29\n为什么要输stop？服务器指令restart就是重启的啊？。\n输入勒 restart 还是一样关闭勒。"
        },
        {
            "author": "aassdsd",
            "timestamp": 1583256840,
            "txt_content": "皮特刘 发表于 2020-3-4 01:31\n习惯勒。\n想要重启时直接restart就可以了，还是说你想要stop之后按任意键重新开启？"
        },
        {
            "author": "结城希亚",
            "timestamp": 1583256900,
            "txt_content": " 本帖最后由 御炎Roinflam 于 2020-3-4 01:46 编辑 \n\n::是否重启 0为关 , 1为开\nset retime=5\n::设置重启等待时间\nset restart=0\n::设置重启次数初始值，默认为0，请勿修改\nset maxre=-1\n::重启多少次后不再重启,设置成-1关闭\n:start\n::start节点\n\n\nset/a restart=restart+1\nif %isre% == 0 (goto stop) else (goto restart)\n:restart\ntimeout /t %retime% /NOBREAK\nif %restart% == %maxre% (goto stop) else (goto start)\n:stop\nif %isre% == 0 (echo 未开启自动重启，如果需要，请到bat中开启) else (echo 已经自动重启%maxre%次，停止自动重启，按任意键关闭)\npause"
        },
        {
            "author": "皮特刘",
            "timestamp": 1583257080,
            "txt_content": "aassdsd 发表于 2020-3-4 01:34\n想要重启时直接restart就可以了，还是说你想要stop之后按任意键重新开启？\n输入勒 一样掉"
        },
        {
            "author": "皮特刘",
            "timestamp": 1583257320,
            "txt_content": "御炎Roinflam 发表于 2020-3-4 01:35\nset/a restart=restart+1\nif %isre% == 0 (goto stop) else (goto restart)\n:restart\n不知道为啥 也不行哎 也掉"
        },
        {
            "author": "aassdsd",
            "timestamp": 1583257440,
            "txt_content": " 本帖最后由 aassdsd 于 2020-3-4 01:46 编辑 \n\n把你的启动命令写成这样，之后的效果就是你stop之后再按任意键就会启动服务器，如果不按任意键的话就可以直接退出@echo off\n:start\n.......(启动命令）\npause\ngoto start复制代码"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1583257800,
            "txt_content": "查看原问答帖:\nhttps://www.mcbbs.net/forum.php?mobile=no&mod=viewthread&tid=870698\n最佳答案给了代码\n因为复制粘贴会乱，所以只发链接"
        },
        {
            "author": "W1649121837",
            "timestamp": 1583258760,
            "txt_content": "stop一般是关闭吧"
        },
        {
            "author": "阳菜^",
            "timestamp": 1583260500,
            "txt_content": "Java -Xms2G -Xmx5G -jar spigot-1.12.2.jar\ngoto head\n比如这样，在bat脚本下面加上 goto head 这样，只要你服务器里面或者后台输入stop后，服务器全部关闭后就会立即自动启动服务端"
        },
        {
            "author": "齿轮-gear",
            "timestamp": 1583280900,
            "txt_content": " 本帖最后由 helloworld8128 于 2020-3-4 08:22 编辑 \n\n要重启？试试这段代码@echo off\n:SB\ncls\necho server started...\njava -Xmx2048M -Xms1024M -jar server.jar -nogui\necho game over!\npause\ngoto SB复制代码\n如果还是不行，你可以试试在Wiki上查找您想要的资料"
        },
        {
            "author": "齿轮-gear",
            "timestamp": 1583281500,
            "txt_content": "折叠 发表于 2020-3-4 07:01\n这样关服后就会自动重启了\n你内个不行，没有标记开始的地方\n应该在@echo off之后加一个标记语\n如果是goto start结尾的话，得在那里加一个:start标记\n代码如下\n@echo off\n:SB\n//循环执行体\ngoto SB复制代码"
        },
        {
            "author": "Craftwolves",
            "timestamp": 1583281800,
            "txt_content": "[url=home.php?mod=space&uid=39305]@echo[/url] OFF　　　　　　　　　　　　　　　　\n:head\nrem a为设置的内存大小25566,单位为MByte,其他内容请勿修改\nset a=5000\ntitle server @ 当前分配最大内存为%a%M\njava -Xms5000M -Xmx5000M -jar Contigo-1.7.10-1614.你的服务器核心.jar\necho **********************************************************\necho 10秒自动重启\necho **********************************************************\nping -n 10 127.1>nul\ngoto head复制代码这时输入stop自动重启的脚本。你复制过去，或者下载，把txt改成bat。\n\n\n\n\n\n\n\n启动.txt\n\n\n2020-3-4 08:29 上传\n点击文件名下载附件\n\n\n\n\n408 Bytes, 下载次数: 4\n\n\n\n\n"
        },
        {
            "author": "炫宙菌",
            "timestamp": 1583282460,
            "txt_content": "@echo OFF\n:head\njava -server -Xincgc -Xms1500M -Xmx1500M -XX:+AggressiveOpts -XX:+UseCompressedOops -XX:ParallelGCThreads=10 -XX:+UseConcMarkSweepGC -XX:+UseFastAccessorMethods -jar 核心名.jar\necho 服务器已关闭，15秒后会自动重启！\n@ping -n 15 127.1>nul\ngoto head\n这样的话是自动重启"
        },
        {
            "author": "niaozonggan66",
            "timestamp": 1583286060,
            "txt_content": "goto start\npause\nEXIT"
        },
        {
            "author": "1140v",
            "timestamp": 1583292840,
            "txt_content": "我记得服务端专栏里面的开服器基本上都是这样的，你去下一个试试参考一下。"
        }
    ]
}