{
    "title": "关于1.14.4村民nbt的几个问题",
    "author": "黑茶RGO",
    "replyCount": 20,
    "timestamp": 1579149240,
    "txt_content": " 本帖最后由 黑茶RGO 于 2020-1-17 16:34 编辑 \n\n1.【已解决】如何用summon指令召唤绿衣傻子村民\n2.【已解决】如何用summon指令召唤特定职业特定等级的不能交易的村民（行为要跟无业游民一样到处走动而不是在某个工作方块附近徘徊）\n3.如何使带有“jobless_villager”tag的成年村民一直保持没有职业的状态，无法获得职业，即使附近有空闲的工作方块（同时行为也要跟正常的无业游民一样）\n4.如何使有自定义交易的村民无论发生什么也不会涨价和降价，也不会出现缺货或者升级的情况\n5.如何使有职业的村民永远不补货（去工作方块处干活并发出对应的声音）\n6.【已解决】如何用选择器分别指定可以交易的村民和不能交易的村民(不是有职业的村民和没有职业的村民)",
    "replies": [
        {
            "author": "CR_019",
            "timestamp": 1579149240,
            "txt_content": "3、不知道这个行不行\n高频：execute as @e[type=minecraft:villager,tag=jobless_villager,limit=1] if data entity @s Brain.memories.\"minecraft:job_site\" run function villager:jobless\n然后搞一个function\ndata remove entity @s Brain.memories.\"minecraft:job_site\"\ndata modify entity @s VillagerData.profession set value \"minecraft.none\"\n（但这样好像会将该村民原本的工作方块设定为已占据，导致其他村民不能认领此方块）\n\n（1.15.1实验有效）"
        },
        {
            "author": "xiang_xge",
            "timestamp": 1579156800,
            "txt_content": "1./summon minecraft:villager ~ ~1 ~ {VillagerData:{profession:\"minecraft:nitwit\"},Brain:{memories:{job_site:{pos:[I;0,0,0],dimension:\"minecraft:overworld\"}}}}复制代码\n2./summon minecraft:villager ~ ~1 ~ {VillagerData:{lvl:n},Brain:{memories:{job_site:{pos:[I;0,0,0],dimension:\"minecraft:overworld\"}}}}复制代码把n改成职业等级，暂未测试是否有效\n3.高频指令能接受吗...反正高频这个：/execute as @e[tag=jobless_villager，nbt={}] run data merge entity @s {VillagerData:{lvl:1},Brain:{memories:{job_site:{pos:[I;0,0,0],dimension:\"minecraft:overworld\"}}}}复制代码我坦白这个是1.12-entitydata指令升级来的..不知道如何利用nbt目标选择器XD...\n后面的等待研究吧..."
        },
        {
            "author": "3104026189",
            "timestamp": 1579157700,
            "txt_content": "我给你推荐一个网站，可以很明白的自定义实体https://www.mcmod.cn/tools/cbcreator/?_wv=1031"
        },
        {
            "author": "黑茶RGO",
            "timestamp": 1579166940,
            "txt_content": " 本帖最后由 黑茶RGO 于 2020-1-16 19:59 编辑 \nxiang_xge 发表于 2020-1-16 14:40\n1.\n2.把n改成职业等级，暂未测试是否有效\n3.高频指令能接受吗...反正高频这个：我坦白这个是1.12-entity ...\n你只解决了我的第一个问题，后面两个我都试了，没用"
        },
        {
            "author": "黑茶RGO",
            "timestamp": 1579183920,
            "txt_content": "3104026189 发表于 2020-1-16 14:55\n我给你推荐一个网站，可以很明白的自定义实体https://www.mcmod.cn/tools/cbcreator/?_wv=1031 ...\n那个并不适合生成1.14的村民，更不能解决后面几个问题"
        },
        {
            "author": "我是谁o",
            "timestamp": 1579184580,
            "txt_content": "针对第2个,你可以试试这个东西(第2都满足但是可以交易)\n/summon minecraft:villager ~ ~ ~ {VillagerData:{level:n,profession:\"minecraft:fletcher\"}}复制代码(此处以制箭师为例,职业nbt为profession,level为等级,n为变量整形)\n\n"
        },
        {
            "author": "黑茶RGO",
            "timestamp": 1579184820,
            "txt_content": "我是谁o 发表于 2020-1-16 22:23\n针对第2个,你可以试试这个东西(第2都满足但是可以交易)\n(此处以制箭师为例,职业nbt为profession,level为等 ...\n直接这样没用的，生成出来还是普通村民"
        },
        {
            "author": "我是谁o",
            "timestamp": 1579185300,
            "txt_content": " 本帖最后由 我是谁o 于 2020-1-16 22:37 编辑 \n\n1.14确实改了很多关于村民的东西,第2个问题确实是特定等级特定职业也可以交易呐,而且也没问题\n\n\n\n\n图片.png (31.32 KB, 下载次数: 0)\n\n下载附件\n\n2020-1-16 22:35 上传\n\n\n\n\n\n\n\n"
        },
        {
            "author": "我是谁o",
            "timestamp": 1579187340,
            "txt_content": " 本帖最后由 我是谁o 于 2020-1-16 23:26 编辑 \n\n好吧你的好奇心强,我也最多回答第6个问题\n1.首先放置2个命令方块(无限循环)\n2.设置一个计分榜,叫jiaoyi\n/scoreboard objectives add jiaoyi dummy复制代码\n\n\n3.第一个命令方块输入\n/scoreboard players set @e[type=minecraft:villager,nbt=!{VillagerData:{profession:\"minecraft:none\"}}] jiaoyi 1复制代码意思是给 不是没有职业的村民(即能交易的村民) 的jiaoyi分数设置为1\n\n第二个命令方块输入\n/scoreboard players set @e[type=minecraft:villager,nbt={VillagerData:{profession:\"minecraft:none\"}}] jiaoyi 0复制代码意思是给 没有职业的村民(即不能交易的村民) 的jiaoyi分数设置为0\n然后就可以使用@e[type=villager,scores={jiaoyi=1}]替代有交易的村民,反之,@e[type=villager,scores={jiaoyi=0}]替代无交易的村民\n其实弄一个数据包(Data pack)载入就直接可以了,我用的是1.15.1,你可以试试行不行,反正我是试过可以用的\n自己开了1.14.4看了一下,发现这还是不能用在1.14,1.15正常不过还是希望有所帮助,1.15修了一些村民标签,wiki的内容找不到1.14了\n"
        },
        {
            "author": "黑茶RGO",
            "timestamp": 1579188660,
            "txt_content": "我是谁o 发表于 2020-1-16 23:09\n好吧你的好奇心强,我也最多回答第6个问题\n1.首先放置2个命令方块(无限循环)\n2.设置一个计分榜,叫jiaoyi\n不能交易和没有职业是两回事，没有职业的村民也可以通过改nbt使其可以交易，有职业的村民也可以通过改nbt使其不能交易"
        },
        {
            "author": "黑茶RGO",
            "timestamp": 1579188720,
            "txt_content": "我是谁o 发表于 2020-1-16 22:35\n1.14确实改了很多关于村民的东西,第2个问题确实是特定等级特定职业也可以交易呐,而且也没问题\n直接加VillagerData确实没用，而且我的第二个问题是不能交易的特定职业特定等级的村民"
        },
        {
            "author": "我是谁o",
            "timestamp": 1579190580,
            "txt_content": " 本帖最后由 我是谁o 于 2020-1-17 09:05 编辑 \n\n感谢科普,但是有一个细微的差别是1.14与1.15村民的特性,如果使用1.14,以上问题就难以解决\n第二个问题（用1.15的）\n\n/summon minecraft:villager ~ ~ ~ {VillagerData:{level:2,profession:\"minecraft:fletcher\"},Offers:{Recipes:[]}}复制代码经过多次尝试后,其中level不能<2,profession为职业字符串(已知满足:特定职业特定等级的不能交易的村民)\n"
        },
        {
            "author": "我是谁o",
            "timestamp": 1579220820,
            "txt_content": " 本帖最后由 我是谁o 于 2020-1-17 08:50 编辑 \n\n第6个问题的话,原理是一样的,就是你说的能否交易是差异,稍微修改即可\n1.设置一个叫jiaoyi的虚拟型计分板\n\n/scoreboard objectives add jiaoyi dummy复制代码2.放置2个命令方块(无限循环的,高频红石或循环+始终活动)\n2-1.第一个输入/scoreboard players set @e[type=minecraft:villager,nbt=!{Offers:{}}] jiaoyi 0复制代码检测所有村民且不带有{Offers:{}}交易标签的村民   (即不可以交易的村民)  的jiaoyi分数设置为0\n2-2:第二个输入\n/scoreboard players set @e[type=minecraft:villager,nbt={Offers:{}}] jiaoyi 1复制代码检测所有村民且带有{Offers:{}}交易标签的村民   (即可以交易的村民)  的jiaoyi分数设置为1\n(会刷屏在聊天栏,建议使用/gamerule commandBlockOutput false)\n现在就可以用@e[type=villager,scores={jiaoyi=1}]替代有交易的村民,反之,@e[type=villager,scores={jiaoyi=0}]替代无交易的村民\n(1.15.1反正可以,自己开1.14.4试了,可以用,第4个问题用村民的变种流浪商人不就好了,缺货你就把他的可交易次数调高嘛)\n\n"
        },
        {
            "author": "CR_019",
            "timestamp": 1579247280,
            "txt_content": "目前只解决了4和5，其实很简单。。。\n4、将该村民的那个特定交易中priceMultiplier字段设定为0就可以了。。。\n5、将RestocksToday标签数值修改为2"
        },
        {
            "author": "CR_019",
            "timestamp": 1579247400,
            "txt_content": "chaoren019 发表于 2020-1-17 15:48\n目前只解决了4和5，其实很简单。。。\n4、将该村民的那个特定交易中priceMultiplier字段设定为0就可以了。。 ...\n补充：第5那个每天要改，你可以对RestocksToday为0或1的指定村民修改nbt，或者直接高频。。。"
        },
        {
            "author": "黑茶RGO",
            "timestamp": 1579250760,
            "txt_content": "chaoren019 发表于 2020-1-17 15:50\n补充：第5那个每天要改，你可以对RestocksToday为0或1的指定村民修改nbt，或者直接高频。。。 ...\n我按你说的做了，村民会疯狂补货。。。"
        },
        {
            "author": "CR_019",
            "timestamp": 1579255980,
            "txt_content": "。。。好吧，这不太清楚，抱歉"
        },
        {
            "author": "CR_019",
            "timestamp": 1579265700,
            "txt_content": "黑茶RGO 发表于 2020-1-17 16:46\n我按你说的做了，村民会疯狂补货。。。\n（为什么我这里测试没有问题呢。。。）"
        },
        {
            "author": "我是谁o",
            "timestamp": 1579277040,
            "txt_content": " 本帖最后由 我是谁o 于 2020-1-18 00:09 编辑 \n/summon minecraft:villager ~ ~ ~ {VillagerData:{level:5,profession:\"minecraft:fletcher\"},Offers:{Recipes:[{maxUses:1,buy:{id:\"minecraft:diamond\",Count:1b},sell:{id:\"minecraft:diamond\",Count:1b},priceMultiplier:0.05f}]}}\n复制代码一个例子(半成品)\n\n以制箭师为例,offers.Recipes里的buy和sell可以随意替换(自定义交易),若需要无法涨价,降价,要删去每一个Recipes里的复合标签中的priceMultiplier(村庄英雄防不了),升级的情况,level调到5或以上即可避免升级(已成为大师),缺货的想象,有2种解决方法 1.maxUses改大一点(这里是1,不推荐) 2.高频红石\n/data modify entity UUID或目标选择器 Offers.Recipes[0].uses set value 0\n复制代码即可把第一条已交易次数归0，若需第二条交易次数归0,把命令中的Offers.Recipes[0].uses改成Offers.Recipes[1].uses,以此类推\n一个满足要求的成品例子\n/summon minecraft:villager ~ ~ ~ {VillagerData:{level:5,profession:\"minecraft:fletcher\"},Offers:{Recipes:[{maxUses:1000000,buy:{id:\"minecraft:diamond\",Count:1b},sell:{id:\"minecraft:diamond\",Count:1b}},{maxUses:1000000,buy:{id:\"minecraft:emerald\",Count:1b},sell:{id:\"minecraft:emerald\",Count:1b}}]}}复制代码自定义交易中的Offers.Recipes复合标签中的动buy,sell内的复合标签就行了\n满足\"自定义交易的村民无论发生什么也不会涨价和降价，也不会出现缺货或者升级的情况\"\n"
        },
        {
            "author": "黑茶RGO",
            "timestamp": 1579280100,
            "txt_content": "我是谁o 发表于 2020-1-18 00:04\n一个例子(半成品)\n\n以制箭师为例,offers.Recipes里的buy和sell可以随意替换(自定义交易),若需要无法涨价,降 ...\n好了，现在把第三个问题解决我就给最佳了"
        }
    ]
}