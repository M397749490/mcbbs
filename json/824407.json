{
    "title": "【萌新有话说】浅谈1.12mcfunction里实现延时",
    "author": "Sairos",
    "replyCount": 9,
    "timestamp": 1539855840,
    "txt_content": " 本帖最后由 Sairos 于 2018-10-18 17:44 编辑 \n\n大家好，今天萌新要给大家分享一个自己的一个很瓜皮的经历，在玩1.12了解了function之后，发现在function里面是无法延时的，因为里面的指令都会在1gt内执行，这就让我当时很苦恼了，有些时候写的指令是需要延时的，要不然就无法达到自己的预期效果。于是我就思考，学过各种编程语言的人，包括我自己也玩过单片机，有时候就希望自己写的东西能够delay一下，于是就有了delay函数，例如C语言定义delay函数时函数主要通过执行无意义的指令来达到延时的效果，所以我就思量着，能不能在function里面也写这样的一个玩意儿来做到延时呢？\n\n（报告老湿！我有了一个大胆的想法QAQ！）\n\n为了尝试实现自己的想法，我创建了三个mcfunction，delay用于延时，delay1作为延时的判据，target用于测试\n\n\n\n\nO)7193KPSGM47{4T9E13`85.png (27.75 KB, 下载次数: 0)\n\n下载附件\n\n2018-10-18 17:25 上传\n\n\n\n\n\n首先我做了两个计分板：\n/scoreboard objectives add delay dummy\n/scoreboard objectives add delay1 dummy复制代码\n\n我们知道，1gt=0.05s；而我正是打算利用这个执行一次function所需要的时间来作为延时工具，于是就有了：\nexecute @a[score_delay1=1] ~ ~ ~ /summon minecraft:armor_stand ~ ~1 ~ {CustomName:\"delay\",Invisible:1b}\nscoreboard players add @e[name=delay] delay 1\nexecute @a[score_delay1=1] ~ ~ ~ /scoreboard players set @a[score_delay1=1] delay1 2\nexecute @e[score_delay_min=100] ~ ~ ~ kill @s\n复制代码这个是写在delay.mcfunction里面的，并且在游戏里面输入/gamerule gameLoopFunction delay:delay来使能该函数。\n这个正是我的延时函数，接下来，在delay1.mcfunction里面只有一条指令，但也是使用延时的判据：\nscoreboard players set @a delay1 0复制代码\n作用机理：\n当玩家的delay1分数小于等于1时，会召唤一个名为delay的盔甲架，然后再把自己的分数值调到2（反正大于1），同时因为使能了该函数，每1gt会给该盔甲架加1分，当盔甲架的记分值达到100时，清理掉这个盔甲架，也就是说，清理掉这个盔甲架用了100gt也就是5s的时间，换言之，我设定100，意味着这个盔甲架最多只能延时5s，这个时候在我的target.mcfunction里面是这样的：\n\n\n\n\n1IX4CW~BJQFVG}SOY~GHXVH.png (39.79 KB, 下载次数: 0)\n\n下载附件\n\n2018-10-18 17:25 上传\n\n\n\n\n\n大家可以看到的是，输入function delay:delay1会启动延时，延时逻辑是execute @e[score_delay_min=60,score_delay=60] ~ ~ ~ give @a bread，给予玩家一个面包，但是是在盔甲架分数值为60的时候，也就是说，当我启用function delay:delay1时，需要延时三秒，才能得到这个面包。\n\n总而言之....延时目的是达到了，但是吧....并不是我想要的延时效果，能随时在自己写的function里面调用的那种...倒不如说做出来的这个只能算是个定时器.....\n作用：function delay:delay1启动延时，在延时一定时间之后，触发延时逻辑（也就是执行自己需要的指令）。\n嗯没错，就是这样，\n\n最后非常感谢大家能在百忙之中来阅读萌新我的一个很瓜皮的想法与经历.....\n（对这个有想法的大佬可以提点萌新的我一下......） \n    此致\n    鞠躬QAQ\n\n\n",
    "replies": [
        {
            "author": "TuFou",
            "timestamp": 1539857220,
            "txt_content": "0.0  好吧 理想不错"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1539861060,
            "txt_content": "嗯你这就是个定时器……\n另外，为什么不用1.13呢？\n\nscoreboard players add temp delay 1\nexecute if score temp delay matches 100.. run function name:file\n然后在name:file里面运行函数以及\nscoreboard players reset temp delay\n\n这样可以避免使用实体，如果要用实体可以用药水云的age计时\n"
        },
        {
            "author": "Sairos",
            "timestamp": 1539872880,
            "txt_content": "ruhuasiyu 发表于 2018-10-18 19:11\n嗯你这就是个定时器……\n另外，为什么不用1.13呢？\n我知道1.13可以，所以我才在1.12啊....."
        },
        {
            "author": "Sairos",
            "timestamp": 1539873480,
            "txt_content": "ruhuasiyu 发表于 2018-10-18 19:11\n嗯你这就是个定时器……\n另外，为什么不用1.13呢？\n虽然1.13的数据包还没接触过，还是谢谢大佬"
        },
        {
            "author": "12tianxun",
            "timestamp": 1590927300,
            "txt_content": "别的论坛有人早做了（严重打击）"
        },
        {
            "author": "meng3334294286",
            "timestamp": 1594435380,
            "txt_content": "MCBBS有你更精彩~"
        },
        {
            "author": "2461173468",
            "timestamp": 1598172960,
            "txt_content": "完成任务"
        },
        {
            "author": "不忘吃心",
            "timestamp": 1598198880,
            "txt_content": "虽然听不懂但是不明觉厉  NB了大佬  我也正在学代码"
        },
        {
            "author": "若梦丶浮生",
            "timestamp": 1607769600,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        }
    ]
}