{
    "title": "Flans Mod伤害问题",
    "author": "隔壁老吕",
    "replyCount": 3,
    "timestamp": 1565437080,
    "txt_content": "要求：找到flans mod的伤害事件（EntityDamageByEntityEvent实测无效，EntityDamageEvent无法获取发射者）\n要能获取发射者，并且能取消伤害的\n不是插件是代码！",
    "replies": [
        {
            "author": "粘兽",
            "timestamp": 1565437080,
            "txt_content": "@EventHandler\npublic void onDamage(EntityDamageByEntityEvent e){\n    if(e.getDamager().getType().toString().equalsIgnoreCase(\"flansmod_bullet\")){\n        Entity ammo = ((CraftEntity) e.getDamager()).getHandle();\n        Player shooter = (Player) ((Entity) ammo.getClass().getDeclaredField(\"owner\").get(ammo)).getBukkitEntity();\n    }\n}复制代码"
        },
        {
            "author": "MyAngelCocoa",
            "timestamp": 1565439600,
            "txt_content": "楼上给的是mod的方法，\n\n然后我的服务器插件是可以通过getdamager拿到发射者的，\n建议你换成flanplus。\n\n既然是flan，应该也装有npc吧，npc脚本也是可以获取伤害来源的，演示代码\nvar b = \"flansmod\";\nvar b1 = \"mcheli\";\nvar ae=event.getSource().getHeldItem().getName();\nvar c = ae.contains(b);\nvar c1 = ae.contains(b1);\nif((c+\"\")==(\"true\")){\nevent.setDamage(0);\n}else if((c1+\"\")==(\"true\")){\nevent.setDamage(0);\nnpc.say(\"我是不会受伤的！\");\n}复制代码"
        },
        {
            "author": "粘兽",
            "timestamp": 1565441400,
            "txt_content": "NeverMindSL 发表于 2019-8-10 20:20\n楼上给的是mod的方法，\n\n然后我的服务器插件是可以通过getdamager拿到发射者的，\n不是 是bukkit插件"
        }
    ]
}