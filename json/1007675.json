{
    "title": "FileConfiguration问题",
    "author": "LinX1",
    "replyCount": 4,
    "timestamp": 1585928100,
    "txt_content": "\n\n\n\n\nimage.png (54.49 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 23:33 上传\n\n\n\n\n（CommandHandler）\n\n\n\n\nimage.png (38.16 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 23:34 上传\n\n\n\n\n（Configuration）\nrt，，里面有个lang。我怎么让CommandHandler里面也能用上\n",
    "replies": [
        {
            "author": "和煦樱",
            "timestamp": 1585933440,
            "txt_content": " 本帖最后由 和煦樱 于 2020-4-4 01:15 编辑 \n\nConfiguration.start(file)即可噢你说的是要在CommandHandler里调用file里的数据吗在CommandHandler里写\nFile lang = new File(pathname: filed + \"/lang.yml\");\npublic FileConfiguration load(File file) {\n  return YamlConfiguration.loadConfiguration(file);\n}\nFileConfiguration config = load(lang);\nconfig.get(xxx);复制代码最好单独定义一个公共load文件类 - -\n\n\n"
        },
        {
            "author": "AlbertBlue",
            "timestamp": 1585962900,
            "txt_content": " 本帖最后由 AlbertBlue 于 2020-4-3 22:38 编辑 \n\n刚才BBS卡了，不小心把乱打的信息发出去了,可以试试我这个自定义配置文件的类（新建一个CustomConfig）\nimport org.bukkit.configuration.InvalidConfigurationException;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.configuration.file.YamlConfiguration;\nimport org.bukkit.plugin.Plugin;\n\nimport java.io.File;\nimport java.io.IOException;\n\npublic class CustomConfig {\n\n    private String filename;\n    private FileConfiguration config;\n    private File configFile;\n    private Plugin plugin;\n\n    public String getFilename() {\n        return filename;\n    }\n\n    public CustomConfig(String name, Plugin plugin){\n        this.plugin = plugin;\n        this.filename = name;\n        this.config = create(name);\n    }\n\n    public void save(){\n        try {\n            config.save(configFile);\n        } catch (IOException ignored) {\n\n        }\n        this.config = create(filename);\n    }\n\n    public void reload(){\n        this.config = create(filename);\n    }\n\n    private FileConfiguration create(String file) {\n        File ConfigFile = new File(plugin.getDataFolder(), file);\n        if (!ConfigFile.exists()) {\n            ConfigFile.getParentFile().mkdirs();\n            plugin.saveResource(file, false);\n        }\n        YamlConfiguration Config = new YamlConfiguration();\n        try {\n            Config.load(ConfigFile);\n            this.configFile = ConfigFile;\n        }\n        catch (IOException | InvalidConfigurationException ignored) {\n\n        }\n        return Config;\n    }\n\n    public FileConfiguration getConfig() {\n        return config;\n    }\n\n    public File getConfigFile() {\n        return configFile;\n    }\n\n}\n复制代码然后插件主类写上\nprivate static CustomConfig data;\nonEnable方法里写上 lang.yml改成自己要的文件名字\ndata = new CustomConfig(\"lang.yml\",this);\n然后插件主类加个方法让其他类访问\npublic static CustomConfig getData() {\n        return data;\n    }\n\ndata.getConfig()就能获取一个自定义的FileConfiguration\ndata.save()保存\ndata.reload()重载哦对记得在插件里面加个你要的文件.yml不然插件启动的时候没法创建\n\n\n"
        },
        {
            "author": "LinX1",
            "timestamp": 1585965360,
            "txt_content": "应该写在哪，怎么写"
        },
        {
            "author": "苏苏华",
            "timestamp": 1585990320,
            "txt_content": "已经借鉴，留名，谢谢作者已经借鉴，留名，谢谢作者1!!!!!"
        }
    ]
}