{
    "title": "mcfunction获取玩家背包内某件物品数量/剩余空格数量",
    "author": "pdj686",
    "replyCount": 19,
    "timestamp": 1588773240,
    "txt_content": " 本帖最后由 pdj686 于 2020-5-6 21:57 编辑 \n\n版本1.15.2原版\n如题，例如玩家背包内第一格有21个dirt,第二格有31个cobble_stone，第三格有63个dirt，其余为空。\n现在我们输入一个物品实体（例如特定坐标~2 ~ ~的物品展示框内物品,以dirt为例），\n希望获得玩家背包内该物品的数量（在本例中为21+63=84），\n以及背包内剩余空间可容纳的该物品数量（在本例中为2156），\n并将这两个数值存储到计分板中。\n",
    "replies": [
        {
            "author": "金色的柠檬",
            "timestamp": 1588773240,
            "txt_content": "可以用execute store result 加上clear dirt 0，这样就可以将玩家背包内所有泥土数量都计入计分板，即使不在同一格内也没关系"
        },
        {
            "author": "chyx",
            "timestamp": 1588777380,
            "txt_content": "emmm\n可以把两个id先后拷到存储空间里，如果第二个失败了就说名俩id一样。。。"
        },
        {
            "author": "晴路卡",
            "timestamp": 1588823340,
            "txt_content": "你可以试试穷举"
        },
        {
            "author": "kengshi_233",
            "timestamp": 1588898400,
            "txt_content": "这个有什么意义吗"
        },
        {
            "author": "lack-eric",
            "timestamp": 1588921320,
            "txt_content": "这个……目前版本不行。"
        },
        {
            "author": "金色的柠檬",
            "timestamp": 1588934220,
            "txt_content": "金色的柠檬 发表于 2020-5-8 18:35\n可以用execute store result 加上clear dirt 0，这样就可以将玩家背包内所有泥土数量都计入计分板，即使不 ...\n你可以以这个视频做参考\nhttps://www.bilibili.com/video/BV1EJ411c7P9"
        },
        {
            "author": "哈哈哈唉",
            "timestamp": 1588936920,
            "txt_content": "好像不行吧 这版本"
        },
        {
            "author": "FHL_Flame",
            "timestamp": 1589023080,
            "txt_content": "去看看有没有对应的变量"
        },
        {
            "author": "pdj686",
            "timestamp": 1589027040,
            "txt_content": "金色的柠檬 发表于 2020-5-8 18:35\n可以用execute store result 加上clear dirt 0，这样就可以将玩家背包内所有泥土数量都计入计分板，即使不 ...\nemmmm测试结果可行。\n空格子的话有啥建议吗？"
        },
        {
            "author": "xida233",
            "timestamp": 1589027100,
            "txt_content": "如果要检测泥土数量，可以先用clear，每删除一个就在计分板1加一分，全部清除完时再重新给予计分板1里的分数同数量的泥土，再用2156-计分板1的分数，得到的是剩余量，再储存到计分板2里，就有了两个数值结果"
        },
        {
            "author": "pdj686",
            "timestamp": 1589027220,
            "txt_content": "xida233 发表于 2020-5-9 20:25\n如果要检测泥土数量，可以先用clear，每删除一个就在计分板1加一分，全部清除完时再重新给予计分板1里的分 ...\n这个做法我试过的，有两个问题\n第一，对于有特定nbt的物体，你清除再给回来的是不一样的\n第二，空格子数量不对，可能还有石头，弓等其它的物体"
        },
        {
            "author": "金色的柠檬",
            "timestamp": 1589027640,
            "txt_content": "pdj686 发表于 2020-5-9 20:24\nemmmm测试结果可行。\n空格子的话有啥建议吗？\n空格子？不懂你什么意思\n我语文不好"
        },
        {
            "author": "金色的柠檬",
            "timestamp": 1589028480,
            "txt_content": " 本帖最后由 金色的柠檬 于 2020-5-9 20:50 编辑 \n金色的柠檬 发表于 2020-5-9 20:34\n空格子？不懂你什么意思\n我语文不好\n懂了，你可以穷举一下，检测剩余空格子的数量并×64计入A，然后检测有泥土的格子的泥土的数量（还是execute+data）然后计入计分板B，用64减B，剩下的以此类推，最后A+（64-B）+（64-C）+……=result，result就是你要的结果，可能有更好的方法，但是我脑细胞死干净了，想不出来"
        },
        {
            "author": "金色的柠檬",
            "timestamp": 1589029560,
            "txt_content": " 本帖最后由 金色的柠檬 于 2020-5-9 21:08 编辑 \n64不一定行啊。。比如我要计数的是鸡蛋，或.\n就只有鸡蛋、雪球和珍珠（好像）是16个一组的，可以再minecraft命名空间下给这三个物品标签，如果要检测的是这个标签的物品就可以把64换成16（反正计分板运算直接换个分数就行），不可堆叠的话就不用算了，直接检测空位就行"
        },
        {
            "author": "pdj686",
            "timestamp": 1589029680,
            "txt_content": "金色的柠檬 发表于 2020-5-9 21:06\n就只有鸡蛋、雪球和珍珠（好像）是16个一组的，可以再minecraft命名空间下给这三个物品标签，如果要检测的 ...\n// 刚才评分里被吞掉的太多了我还是开个帖子说吧\n第一个问题是16堆叠物品，就是你说的鸡蛋，雪球和珍珠；\n第二个问题在于不可堆叠物品\n第三个问题在于同一物品的不同nbt，例如纸虽然是64堆叠的，但是可能会有32个普通的纸，和32个被命名为“123”的纸"
        },
        {
            "author": "pdj686",
            "timestamp": 1589029740,
            "txt_content": "金色的柠檬 发表于 2020-5-9 21:06\n就只有鸡蛋、雪球和珍珠（好像）是16个一组的，可以再minecraft命名空间下给这三个物品标签，如果要检测的 ...\n还有不可堆叠物品呢\n以及同一物品的不同nbt形式（例如32个普通的纸，和32个被命名为“123”的纸）"
        },
        {
            "author": "金色的柠檬",
            "timestamp": 1589029980,
            "txt_content": "pdj686 发表于 2020-5-9 21:09\n还有不可堆叠物品呢\n以及同一物品的不同nbt形式（例如32个普通的纸，和32个被命名为“123”的纸） ...\n还是data，如果没有nbt的话就只有ID，这样就可以将nbt物品排除在外"
        },
        {
            "author": "金色的柠檬",
            "timestamp": 1589030220,
            "txt_content": " 本帖最后由 金色的柠檬 于 2020-5-9 21:19 编辑 \n金色的柠檬 发表于 2020-5-9 21:13\n还是data，如果没有nbt的话就只有ID，这样就可以将nbt物品排除在外\n如果还不满意的话有一个备用方案，就是give36*64=2304个该物品，肯定会有多出来的，就会被玩家喷出来，然后data检测地上的该物品数量，用2304一减就可以了，再用得到的值clear掉给予给你的该物品（例如给了你n个该物品，就clear n个该物品）"
        },
        {
            "author": "x_xiao_x",
            "timestamp": 1589209140,
            "txt_content": "这个穷举还是太麻烦了（不是一般的麻烦:-)，所以间接不行）虽然clear指令可以检测玩家物品数量 ，但是不知道可不可以检测全背包（没时间实践????）"
        }
    ]
}