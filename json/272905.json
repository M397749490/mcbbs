{
    "title": "[综合]PlayerSQL v2.10 —— 最好的跨服玩家同步插件[1.7.5-1.12]",
    "author": "caoli5288",
    "replyCount": 99,
    "timestamp": 1399217040,
    "txt_content": " 本帖最后由 caoli5288 于 2020-4-24 02:32 编辑 \n\nPlayerSQL\n玩家同步\n\n\n\n=== 特性 ===\n\n这个玩意同步玩家的\n* 生命值\n* 饥饿度\n* 经验值\n* 装备栏\n* 物品栏\n* 末影箱\n* 药水效果\n在不同服务器之间！如果你使用指令或者插件桥兼容的插件进行玩家传送请编辑\"config.yml\"将\"sync.delay\"的值设置小。\n\n这玩意可以保存所有的NBT数据，包括MOD的。\n一定要禁用登陆插件的保护物品功能！\n新版本只支持Java8！\n新的2.0-RC版本已经发布！\n\n=== 增强模式 ===\n\n在bungeecord上同时安装就可以启用增强模式，能提高跨服速度。\n\n=== 说明 ===\n\n现在流传出来的保存玩家数据的插件，都不如意。\n要么卡服卡得要死，要么保存的东西不齐全，要么各种丢物品数据等等。\n这个插件目前已经在一个百人蹦极服上测试了好久，超越能找到的所有。\n\n本插件以GPLv2发布，你可以免费使用，也可以修改源代码再发布。\n如果你修改了插件的源代码或者进行再发布、转载，请牢记以下几点。\n* 不得抹去作者信息\n* 需注明本帖地址\n* 公开修改过的代码\n\n本插件源码地址 Github。2.0代码目前位于dev分支。\n\n=== 历史 ===\n* 2020/4/24 编辑mcbbs帖子，现在最新是2.10版本。\n\n* 2017/7/21 发布2.5.2版本，修复mod服和1.12版本兼容\n* 2016/12/5 发布2.4.1版本，修复1.11版本兼容\n* 2016/08/01 发布2.3-b5版本。测试版。\n* 2016/06/26 发布2.3-b2版本。测试版。\n* 2016/05/24 发布2.2.1版本。推荐升级。\n* 2016/04/21 发布2.1.2.2版本。推荐升级。\n* 2016/01/16 发布2.0-rc3版本。\n* 2016/01/04 发布2.0-rc1版本。\n* 2015/07/28 发布1.15版本。\n* 2015/07/19 在mcbbs发布改进的1.14版本。\n* 2015/03/13 在mcbbs发布支持1.8.3的版本。\n* 2014/11/22 修复各种小问题。\n* 2014/10/3 之前版本更新一直没写记录。\n* 2014/7/1 新版本\n* 2014/6/18 改进了保存经验值的机制\n* 2014年6月9日 更新了数据锁\n* 2014年6月9日 保存经济\n* 2014年6月4日 保存生命上限\n* 2014年5月17日 修复如果保存的装备栏为空，将不会保存的问题。\n* 2014年5月9日 增加的英语支持 SQL代码部分改动。\n* 2014年5月6日 不再保存空气方块了\n* 2014年5月6日 解决一处可能的溢出问题\n* 2014年5月5日 发布到MCBBS\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "a8105",
            "timestamp": 1399221240,
            "txt_content": "我感觉你好热衷于数据库的插件..刺激俺们不会用么{:10_522:}"
        },
        {
            "author": "qiu1995",
            "timestamp": 1399223040,
            "txt_content": "可以利用这个来跨服同步数据吗？"
        },
        {
            "author": "wszjljx",
            "timestamp": 1399230960,
            "txt_content": "嘿嘿 起码注释里加个有部分代码来自~~~ 你懂得~~~"
        },
        {
            "author": "yuxuanchiadm",
            "timestamp": 1399231740,
            "txt_content": "如果能够保存MOD自定义的NBT信息就好了，话说MCPC+没法把MOD自定义的NBT数据序列化一直是个硬伤。\n另外数据库建议用PreparedStatement，不然可能会存在注入问题，望改进\\ w /。"
        },
        {
            "author": "810109538",
            "timestamp": 1399231860,
            "txt_content": "很好用的样子A.A"
        },
        {
            "author": "810109538",
            "timestamp": 1399231860,
            "txt_content": "qiu1995 发表于 2014-5-5 01:04\n可以利用这个来跨服同步数据吗？\n我猜应该可以 不过大概要改编一下"
        },
        {
            "author": "yuxuanchiadm",
            "timestamp": 1399232040,
            "txt_content": "另外从SQL里读出玩家数据后直接split(\";\")真的大丈夫么，比如书之类的东西如果里面含有;这字符就玩脱了吧/w\\"
        },
        {
            "author": "yuxuanchiadm",
            "timestamp": 1399232220,
            "txt_content": "建议采取在每个物品头部记录一个物品序列化字符串的长度，然后通过读取的时候通过此长度来正确识别一个物品。"
        },
        {
            "author": "connection_lost",
            "timestamp": 1399232880,
            "txt_content": "yuxuanchiadm 发表于 2014-5-5 03:34\n另外从SQL里读出玩家数据后直接split(\";\")真的大丈夫么，比如书之类的东西如果里面含有;这字符就玩脱了吧/w ...\n这个正解，我的showoff插件就有这个问题"
        },
        {
            "author": "yuxuanchiadm",
            "timestamp": 1399234020,
            "txt_content": "好吧又妄下结论了→ →，直觉性以为是用的Bukkit的序列化函数→ →，首先是否能序列化带非Bukkit的自定义NBT信息有待考证。其次ProtocolLib使用Base-64，不包含;字符，不存在玩脱的情况。"
        },
        {
            "author": "yuxuanchiadm",
            "timestamp": 1399238280,
            "txt_content": "至于SQL注♂入，应该是有这问题，比如单个单引号啥的名字就玩脱了，LZ尽早修了吧，不然到时候最简单的注入就是使用别人玩家的账号数据以及刷物品了→ →，至于具体怎么注入就不发出来了。"
        },
        {
            "author": "wolski",
            "timestamp": 1399245720,
            "txt_content": "哎呀，ProtocolLib。MCPC服要跪。。。不考虑顺便支持一下多世界多背包么？"
        },
        {
            "author": "灵魂爱人",
            "timestamp": 1399245900,
            "txt_content": "{:10_523:}好东西~"
        },
        {
            "author": "caoli5288",
            "timestamp": 1399246080,
            "txt_content": "yuxuanchiadm 发表于 2&nbsp;小时前 \n至于SQL注♂入，应该是有这问题，比如单个单引号啥的名字就玩脱了，LZ尽早修了吧，不然到时候最简单的注入就是使用别人玩家的账号数据以及刷物品了→ →，至于具体怎么注入就不发出来了。\n注入问题好解决，晚上解决看看，，，一般的登陆插件允许名字里面带符号吗？"
        },
        {
            "author": "caoli5288",
            "timestamp": 1399246140,
            "txt_content": "qiu1995 发表于 6&nbsp;小时前 \n可以利用这个来跨服同步数据吗？\n我想它应该没有其他用途了吧"
        },
        {
            "author": "Greensky",
            "timestamp": 1399246740,
            "txt_content": "qiu1995 发表于 2014-5-5 01:04\n可以利用这个来跨服同步数据吗？\n我也想到了可以实现这个= ="
        },
        {
            "author": "RAY5DHao",
            "timestamp": 1399247040,
            "txt_content": "宠物也弄一下吧\n跨服同步狗狗"
        },
        {
            "author": "yuxuanchiadm",
            "timestamp": 1399247100,
            "txt_content": "caoli5288 发表于 2014-5-5 07:28\n注入问题好解决，晚上解决看看，，，一般的登陆插件允许名字里面带符号吗？ ...\n问题不在登陆插件，即使登陆插件检测到用户名含有空格或特殊字符，并吧玩家T掉也还是能够注入，因为登陆事件还是会调度。应该从根源解决问题，进行SQL注入检测或使用预编译SQL。"
        },
        {
            "author": "caoli5288",
            "timestamp": 1399250520,
            "txt_content": "yuxuanchiadm 发表于 半小时前 \n\n问题不在登陆插件，即使登陆插件检测到用户名含有空格或特殊字符，并吧玩家T掉也还是能够注入，因为登陆事件还是会调度。应该从根源解决问题，进行SQL注入检测或使用预编译SQL。\n好的，我疏忽了(⊙_⊙)"
        },
        {
            "author": "caoli5288",
            "timestamp": 1399305480,
            "txt_content": "yuxuanchiadm 发表于 2014-5-5 07:45\n问题不在登陆插件，即使登陆插件检测到用户名含有空格或特殊字符，并吧玩家T掉也还是能够注入，因为登陆 ...\nhttps://www.dropbox.com/s/ql50in ... 8%8653%E7%A7%92.png\n已验证服务度自己会踢掉名字带引号的玩家，这一过程发生在PlayerLoginEvent，所以对我的插件没影响。\nPreparedStatament在不复用的情况下效率不高，我就不改代码了。"
        },
        {
            "author": "yuxuanchiadm",
            "timestamp": 1399313340,
            "txt_content": "caoli5288 发表于 2014-5-5 23:58\nhttps://www.dropbox.com/s/ql50inw9g5hcccs/%E6%88%AA%E5%9B%BE%20-%202014%E5%B9%B405%E6%9C%8805%E6%9 ...\n总之要注入是有办法的，别太信任隐式的安全措施，把自己的代码写好才是最终手段：\n\npackage test;\n\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.PlayerJoinEvent;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Test extends JavaPlugin implements Listener\n{\n    @Override\n    public void onEnable()\n    {\n        getServer().getPluginManager().registerEvents(this, this);\n    }\n    @EventHandler\n    public void onPlayerJoin(PlayerJoinEvent event)\n    {\n        System.out.println(event.getPlayer().getName().toLowerCase());\n    }\n}"
        },
        {
            "author": "StevenNight",
            "timestamp": 1399330500,
            "txt_content": "貌似这样可以很好的调用到网页中去哪？"
        },
        {
            "author": "caoli5288",
            "timestamp": 1399363320,
            "txt_content": "* 2014年5月6日 不再保存空气方块了"
        },
        {
            "author": "haobaby",
            "timestamp": 1399471140,
            "txt_content": "感谢LZ分享 略吊"
        },
        {
            "author": "LaoChen",
            "timestamp": 1399602360,
            "txt_content": "看了你的源码，但是我想问的是你的附魔真的可以同步？\n还有附魔书也能同步？"
        },
        {
            "author": "caoli5288",
            "timestamp": 1399607220,
            "txt_content": "LaoChen 发表于 2014-5-9 10:26\n看了你的源码，但是我想问的是你的附魔真的可以同步？\n还有附魔书也能同步？ ...\n有时间看代码没时间试一试吗"
        },
        {
            "author": "caoli5288",
            "timestamp": 1399609980,
            "txt_content": "* 2014年5月9日 增加的英语支持 SQL代码部分改动。"
        },
        {
            "author": "shenmadetoufa",
            "timestamp": 1399632720,
            "txt_content": "怒赞！比AppleSQL强大多了！"
        },
        {
            "author": "caoli5288",
            "timestamp": 1399633800,
            "txt_content": "shenmadetoufa 发表于 2014-5-9 18:52\n怒赞！比AppleSQL强大多了！\n可以看看我发布的其他插件，都很有意思。"
        },
        {
            "author": "小白~",
            "timestamp": 1399638300,
            "txt_content": "可以当bc的同步背包使用吗？"
        },
        {
            "author": "shenmadetoufa",
            "timestamp": 1399641660,
            "txt_content": "小白~ 发表于 2014-5-9 20:25\n可以当bc的同步背包使用吗？\n可以.0w0..."
        },
        {
            "author": "minecraft_007",
            "timestamp": 1399869900,
            "txt_content": "yuxuanchiadm 发表于 2014-5-5 03:29\n如果能够保存MOD自定义的NBT信息就好了，话说MCPC+没法把MOD自定义的NBT数据序列化一直是个硬伤。\n另外数据 ...\n你没发现他的 Connection就没关过么！"
        },
        {
            "author": "caoli5288",
            "timestamp": 1399947600,
            "txt_content": "minecraft_007 发表于 昨天&nbsp;12:45 \n\n你没发现他的 Connection就没关过么！\nonEnable开，onDisable关，有任何问题。"
        },
        {
            "author": "xingyu",
            "timestamp": 1400134380,
            "txt_content": "我很好奇。。。 如果几个服同时使用会怎么样， 玩家在几个服都是有道具的。。"
        },
        {
            "author": "caoli5288",
            "timestamp": 1400290500,
            "txt_content": "注意与ESS的帽子功能冲突，请把ESS的帽子禁用。"
        },
        {
            "author": "caoli5288",
            "timestamp": 1400342400,
            "txt_content": "* 2014年5月17日 修复如果保存的装备栏为空，将不会保存的问题。"
        },
        {
            "author": "xingyu",
            "timestamp": 1400354220,
            "txt_content": " 本帖最后由 xingyu 于 2014-5-18 03:24 编辑 \n\n楼主辛苦了"
        },
        {
            "author": "qq200877776",
            "timestamp": 1401959940,
            "txt_content": " 本帖最后由 qq200877776 于 2014-6-5 18:07 编辑 \n\n为什么我载入失败啊。\n java.sql.SQLException: Field 'Locked' doesn't have a default value\n\n@caoli5288\n删除数据库表，在重新生成就好了、"
        },
        {
            "author": "caoli5288",
            "timestamp": 1402116480,
            "txt_content": "2014年6月4日 保存生命上限"
        },
        {
            "author": "caoli5288",
            "timestamp": 1402282500,
            "txt_content": "* 2014年6月9日 保存经济"
        },
        {
            "author": "lidiwei",
            "timestamp": 1402584420,
            "txt_content": "提交bug 一进服时同步有延迟 会导致刷东西 最好一进服先清空背包再同步  \n二 请加一个切换服务器的设置 输入指令跳转时 保存背包 3秒后切换服务器  \n三 服务器stop 我不知道会不会保存背包数据  最好stop是自动执行保存背包指令"
        },
        {
            "author": "caoli5288",
            "timestamp": 1402590780,
            "txt_content": "lidiwei 发表于 2014-6-12 22:47\n提交bug 一进服时同步有延迟 会导致刷东西 最好一进服先清空背包再同步  \n二 请加一个切换服务器的设置 输 ...\n你说的第一点，不成立。默认10tick不可能有刷东西的时间，除非你服务器卡得10tick要走几秒钟。\n第二点，请使用其他插件实现，本插件不是切服插件。\n第三点，请放心有该功能。"
        },
        {
            "author": "lidiwei",
            "timestamp": 1402636560,
            "txt_content": "caoli5288 发表于 2014-6-13 00:33\n你说的第一点，不成立。默认10tick不可能有刷东西的时间，除非你服务器卡得10tick要走几秒钟。\n第二点， ...\n第一点 我会说我试过么"
        },
        {
            "author": "lidiwei",
            "timestamp": 1402636620,
            "txt_content": "lidiwei 发表于 2014-6-13 13:16\n第一点 我会说我试过么\n还有数据锁异常是啥"
        },
        {
            "author": "lidiwei",
            "timestamp": 1402636680,
            "txt_content": "lidiwei 发表于 2014-6-13 13:17\n还有数据锁异常是啥\n切换服务器这么快速 你背包保存够及时么"
        },
        {
            "author": "caoli5288",
            "timestamp": 1402727520,
            "txt_content": "* 2014年6月9日 更新了数据锁"
        },
        {
            "author": "caoli5288",
            "timestamp": 1403105940,
            "txt_content": "改进了保存经验值的机制"
        },
        {
            "author": "948701463",
            "timestamp": 1404712620,
            "txt_content": "饿，SQL是啥东西（尽情吐槽我把）"
        },
        {
            "author": "chenguopei1",
            "timestamp": 1404750840,
            "txt_content": "！！！！！！！！！！！！！！！！！"
        },
        {
            "author": "422976313",
            "timestamp": 1404754980,
            "txt_content": "标记一下，这个插件逆天了。！"
        },
        {
            "author": "爱拍、川哥",
            "timestamp": 1404778500,
            "txt_content": "路过{:10_512:}"
        },
        {
            "author": "xw2000922",
            "timestamp": 1404780180,
            "txt_content": "楼主你太棒了"
        },
        {
            "author": "davia2009",
            "timestamp": 1404780720,
            "txt_content": "好东西我要拿走"
        },
        {
            "author": "ciyunmuji",
            "timestamp": 1404783240,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "chen331616551",
            "timestamp": 1404784140,
            "txt_content": "不错，我正好需要{:10_512:}"
        },
        {
            "author": "冰封印记",
            "timestamp": 1404809640,
            "txt_content": " 来研究一下~~~"
        },
        {
            "author": "marco2000111",
            "timestamp": 1404824040,
            "txt_content": "多謝大大"
        },
        {
            "author": "淡淡奶茉v3v",
            "timestamp": 1404824100,
            "txt_content": "很不錯的樣子@@"
        },
        {
            "author": "末影卐",
            "timestamp": 1404826920,
            "txt_content": "讓我看看"
        },
        {
            "author": "627241778",
            "timestamp": 1404834720,
            "txt_content": "感谢楼主的分享和开源"
        },
        {
            "author": "w44225769",
            "timestamp": 1404844920,
            "txt_content": "{:10_527:}怎么用  和CB该如何配合"
        },
        {
            "author": "柠檬。",
            "timestamp": 1404858240,
            "txt_content": "看看。。。。。。。。。。。。        "
        },
        {
            "author": "w756021889",
            "timestamp": 1404869580,
            "txt_content": "给我这个插件把"
        },
        {
            "author": "117ddc",
            "timestamp": 1404871620,
            "txt_content": "....................................."
        },
        {
            "author": "Minern",
            "timestamp": 1404887100,
            "txt_content": "{:10_522:}23333"
        },
        {
            "author": "zkl123",
            "timestamp": 1404958860,
            "txt_content": "Mcbbs有你更加精彩~~~"
        },
        {
            "author": "zkl123",
            "timestamp": 1404958860,
            "txt_content": "灵魂爱人 发表于 2014-5-5 07:25\n好东西~\n你的签名。。。"
        },
        {
            "author": "wuchengxin",
            "timestamp": 1404974940,
            "txt_content": "非常好的插件 解决了崩溃带来的问题"
        },
        {
            "author": "qq502024528",
            "timestamp": 1404975180,
            "txt_content": "好屌的样子    没有什么BUG吗"
        },
        {
            "author": "橡胶",
            "timestamp": 1404984660,
            "txt_content": "恩不错不错"
        },
        {
            "author": "onzilimcbbs",
            "timestamp": 1404986280,
            "txt_content": "支持一個"
        },
        {
            "author": "278640539",
            "timestamp": 1405042620,
            "txt_content": "看起来好厉害的样子"
        },
        {
            "author": "510006384",
            "timestamp": 1405047180,
            "txt_content": "貌似很好，看看"
        },
        {
            "author": "1615594341",
            "timestamp": 1405081920,
            "txt_content": "好  不错  {:10_513:}"
        },
        {
            "author": "1615594341",
            "timestamp": 1405081980,
            "txt_content": "不错 很好的插件~~{:10_512:}"
        },
        {
            "author": "1015229089",
            "timestamp": 1405085520,
            "txt_content": "赞一个 然后抱走"
        },
        {
            "author": "黑嘴鸥",
            "timestamp": 1405087920,
            "txt_content": "谔谔，楼主很棒啊 谢谢了~"
        },
        {
            "author": "lanxing020",
            "timestamp": 1405103820,
            "txt_content": "支持！！！！！！！！！！！！"
        },
        {
            "author": "Jack112233",
            "timestamp": 1405148640,
            "txt_content": "支持原创插件"
        },
        {
            "author": "ior32",
            "timestamp": 1405153500,
            "txt_content": "DDDDDDDDDDDD"
        },
        {
            "author": "43420",
            "timestamp": 1405164780,
            "txt_content": "太好啦。。。。。。。。"
        },
        {
            "author": "1720942566",
            "timestamp": 1405165080,
            "txt_content": "好顶赞OTZ"
        },
        {
            "author": "知己",
            "timestamp": 1405166160,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "1372864019",
            "timestamp": 1405288440,
            "txt_content": "不知道这么用额"
        },
        {
            "author": "1532832428",
            "timestamp": 1405303500,
            "txt_content": "好！！！！！！！！！！！！！！！！！！！！！！\n\n"
        },
        {
            "author": "hkpjun",
            "timestamp": 1405319040,
            "txt_content": "愿HIM与你同在"
        },
        {
            "author": "小佐佐",
            "timestamp": 1405324500,
            "txt_content": "真的好期待"
        },
        {
            "author": "cctv45",
            "timestamp": 1405326480,
            "txt_content": "好顶赞！！！！！！！！！！"
        },
        {
            "author": "mikali",
            "timestamp": 1405337100,
            "txt_content": "強插件!!!"
        },
        {
            "author": "adfohaskdjfh",
            "timestamp": 1405338720,
            "txt_content": "啦啦啦。。"
        },
        {
            "author": "KK44KK",
            "timestamp": 1405399980,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "andrewkuo313",
            "timestamp": 1405401240,
            "txt_content": "阿...过往有用到资料库的伺服器几乎都会出现洗装备的问题"
        },
        {
            "author": "新时科技",
            "timestamp": 1405401960,
            "txt_content": "我赞一个，那还是要看插件咯"
        },
        {
            "author": "tttt5000",
            "timestamp": 1405402380,
            "txt_content": "正好想开个1.7.2的服务器"
        },
        {
            "author": "练习册",
            "timestamp": 1405420080,
            "txt_content": "马克一下[说好的AppleSQL呢？"
        },
        {
            "author": "q2288228",
            "timestamp": 1405421880,
            "txt_content": "灵魂爱人 发表于 2014-5-5 07:25\n好东西~\n大家好  我要用这个！！"
        },
        {
            "author": "xxd2609",
            "timestamp": 1405422660,
            "txt_content": "。。。。。。。。。。。。。。。。。。。。"
        },
        {
            "author": "雾の湖",
            "timestamp": 1405471920,
            "txt_content": "我好想要！"
        },
        {
            "author": "q2308577374",
            "timestamp": 1405474860,
            "txt_content": "不错不错。我收下了"
        }
    ]
}