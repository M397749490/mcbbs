{
    "title": "[1.12.2]如何做技能冷却显示",
    "author": "t1546542",
    "replyCount": 4,
    "timestamp": 1570886940,
    "txt_content": "版本：1.12.2\n举例：\n右键一下岩浆膏，获得5秒力量1，进入冷却\n将岩浆膏替换成屏障，数量为10个\n每过一秒减一个屏障，没有屏障时，还原成岩浆膏\n(这个技能不能被拖动，并且固定在物品栏从左往右数第二格)",
    "replies": [
        {
            "author": "MC深坑不回头",
            "timestamp": 1570886940,
            "txt_content": "\n\n首先生成一个隐形村人\nexecute @p ~ ~ ~ summon minecraft:villager ~ ~ ~ {NoAI:1,Invulnerable:1,Silent:1b,Tags:[\"rightcv\"],Offers:{Recipes:[]},ActiveEffects:[{Id:14 ,Amplifier:0,Duration:1999999,ShowParticles:0b}],DeathLootTable:\"empty\"} \n\n\n建立记分板并设初始值零\nscoreboard objectives add rightclvil stat.talkedToVillager 右键侦测(村民版)\nscoreboard objectives add timer dummy 倒数用计时\nscoreboard players set @p rightclvil 0\nscoreboard players set @e[type=villager,tag=rightcv] timer 0\n\n\n\n开始给予技能岩浆球后高频侦测以下两个function:\n第一个function:\n固定该格为岩浆球，并给个暂时标签，侦测当该格不是岩浆球时清除并重给\n\nexecute @p[tag=!conm] ~ ~ ~ clear @p[tag=!tmagma] minecraft:magma_cream 0 -1 {Tags:[\"magmaball\"]}\nexecute @p[tag=!conm] ~ ~ ~ replaceitem entity @p[tag=!tmagma] slot.hotbar.1 magma_cream 1 0 {Tags:[\"magmaball\"]}\nexecute @p[tag=!conm] ~ ~ ~ scoreboard players tag @p remove tmagma\nexecute @p[tag=!conm] ~ ~ ~ scoreboard players tag @p add tmagma {Inventory:[{Slot:1b,id:\"minecraft:magma_cream\",tag:{Tags:[\"magmaball\"]}}]} \n\n以下高频将侦测用村民tp到玩家，且侦测是否选到岩浆球右键点村民:\ntp @e[tag=rightcv] @p\nscoreboard players tag @p remove withmagmab\nscoreboard players tag @a add withmagmab {SelectedItem:{tag:{Tags:[\"magmaball\"]}}}\nexecute @p[tag=withmagmab,score_rightclvil_min=1,score_rightclvil=1] ~ ~ ~ scoreboard players set @e[type=villager,tag=rightcv,score_timer=0,score_timer_min=0] timer 1\nexecute @p[score_rightclvil_min=1] ~ ~ ~ scoreboard players set @p[tag=!withmagmab] rightclvil 0\n\n\n\n第二个function:\n\n侦测到满足条件后暂停固定岩浆球，给予效果、开始计时并每秒变动该格:\n\nexecute @e[type=villager,tag=rightcv,score_timer=1,score_timer_min=1] ~ ~ ~ effect @p[score_rightclvil=1,score_rightclvil_min=1] minecraft:strength 5 0 true\nexecute @e[type=villager,tag=rightcv,score_timer=1,score_timer_min=1] ~ ~ ~ scoreboard players set @p rightclvil 0\nexecute @e[type=villager,tag=rightcv,score_timer=1,score_timer_min=1] ~ ~ ~ scoreboard players tag @p add conm\n\nscoreboard players add @e[type=villager,tag=rightcv,score_timer=201,score_timer_min=1] timer 1\n\nexecute @e[type=villager,tag=rightcv,score_timer=20,score_timer_min=1] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 10 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=40,score_timer_min=21] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 9 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=60,score_timer_min=41] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 8 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=80,score_timer_min=61] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 7 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=100,score_timer_min=81] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 6 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=120,score_timer_min=101] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 5 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=140,score_timer_min=121] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 4 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=160,score_timer_min=141] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 3 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=180,score_timer_min=161] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 2 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=200,score_timer_min=181] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 barrier 1 0 {display:{Name:\"§c技能冷却中...\"},Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=201,score_timer_min=201] ~ ~ ~ /replaceitem entity @p[tag=conm] slot.hotbar.1 magma_cream 1 0 {Tags:[\"magmaball\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=201,score_timer_min=201] ~ ~ ~ scoreboard players tag @p remove conm\nexecute @e[type=villager,tag=rightcv,score_timer=202,score_timer_min=202] ~ ~ ~ clear @p minecraft:barrier 0 -1 {Tags:[\"magmabarr\"]}\nexecute @e[type=villager,tag=rightcv,score_timer=202,score_timer_min=202] ~ ~ ~ scoreboard players set @e[type=villager,tag=rightcv,score_timer=202,score_timer_min=202] timer 0\n\n此方法有个小缺点，就是玩家跑太快时会来不及tp村民，导致感应不到技能，可换f或shift等键侦测。\n\n...不会搞表格排版底色，伤眼抱歉\n"
        },
        {
            "author": "crfst99936484",
            "timestamp": 1570925820,
            "txt_content": " 本帖最后由 crfst99936484 于 2019-10-13 08:19 编辑 \n\n我给个方案好了，指令就不敲了，看得懂就行\nsb的stat好像检测不到右键岩浆膏\n所以你需要这个https://www.mcbbs.net/thread-474463-1-1.html\n右键的结果是 计分板分数+1\n检测到有玩家计分板分数 为1后，运行function\nfunction里写\neffect @s minecraft:strength 1 5\n为了做到固定在某个位置给玩家物品，你还需要\nhttps://minecraft-zh.gamepedia.com/%E5%91%BD%E4%BB%A4/replaceitem 这也需要放在function里\n同时建立一个\n检测当有玩家计分板分数为1时，用漏斗计时器设置每秒运行clear @a minecraft:barrier 1\n再用\n/testfor @p[score_计分板_min=1] {Inventory:[{id:物品}]}\n用红石检测testfor的结果\n当没有红石信号输出时(即玩家背包内没有屏障)，运行function\nfunction里写\nreplaceitem entity @s xx\nscoreboard players set @s 0\nmsg t1546542 金粒有点少了"
        },
        {
            "author": "t1546542",
            "timestamp": 1570951860,
            "txt_content": "crfst99936484 发表于 2019-10-13 08:17\n我给个方案好了，指令就不敲了，看得懂就行\nsb的stat好像检测不到右键岩浆膏\n所以你需要这个https://www.mc ...\n不用function试试？"
        },
        {
            "author": "crfst99936484",
            "timestamp": 1570957860,
            "txt_content": " 本帖最后由 crfst99936484 于 2019-10-13 17:24 编辑 \nt1546542 发表于 2019-10-13 15:31\n不用function试试？\n\n不用function你可以用testfor来代替execute \nfunction的好处是可以同时进行多条指令\n如果用testfor+中继器，因为中继器的延迟，可能会使技能出现不可预知的bug（比如时间到了岩浆膏还没来）\n话说function多好用又方便你咋能嫌弃人家"
        }
    ]
}