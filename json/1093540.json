{
    "title": "TPS 无故降至 0，内存溢出崩溃",
    "author": "Jeansou",
    "replyCount": 8,
    "timestamp": 1596511080,
    "txt_content": " 本帖最后由 Jeansou 于 2020-8-6 23:02 编辑 \n\n服务器这几天总是没有任何前兆tps降为0\n调高内存也没用\n服务端版本：paper 1.16.1\nTimings: https://timings.aikar.co/?id=17871a3f57c249ba91436caf2de137e4\nlagremover 是崩服两次之后加的，加了之后似乎没有变化\n没有崩服报告，直接内存溢出了\n有没有玩家都这样\n部分报错\n\n[21:17:16 ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH  - git-Paper-130 (MC: 1.16.1) ---\n[21:17:16 ERROR]: The server has not responded for 10 seconds! Creating thread dump\n[21:17:16 ERROR]: ------------------------------\n[21:17:16 ERROR]: Server thread dump (Look for plugins here before reporting to Paper!):\n[21:17:16 ERROR]: ------------------------------\n[21:17:16 ERROR]: Current Thread: Server thread\n[21:17:16 ERROR]: PID: 21 | Suspended: false | Native: false | State: RUNNABLE\n[21:17:16 ERROR]: Stack:\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.FluidTypeFlowing.g(FluidTypeFlowing.java:103)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.FluidTypeFlowing.a(FluidTypeFlowing.java:56)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.Fluid.c(SourceFile:88)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.Entity.a(Entity.java:3231)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.Entity.aH(Entity.java:1173)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.Entity.aG(Entity.java:1160)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.Entity.entityBaseTick(Entity.java:477)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.EntityLiving.entityBaseTick(EntityLiving.java:265)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.EntityInsentient.entityBaseTick(EntityInsentient.java:243)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.Entity.tick(Entity.java:447)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.EntityLiving.tick(EntityLiving.java:2417)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.EntityInsentient.tick(EntityInsentient.java:306)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.WorldServer.entityJoinedWorld(WorldServer.java:833)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.WorldServer$Lambda$5764/0x000000080220f840.accept(Unknown Source)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.World.a(World.java:932)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.WorldServer.doTick(WorldServer.java:525)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.MinecraftServer.b(MinecraftServer.java:1354)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.DedicatedServer.b(DedicatedServer.java:377)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.MinecraftServer.a(MinecraftServer.java:1213)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.MinecraftServer.v(MinecraftServer.java:1001)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.MinecraftServer.lambda$a$0(MinecraftServer.java:177)\n[21:17:16 ERROR]: app//net.minecraft.server.v1_16_R1.MinecraftServer$Lambda$3020/0x0000000801322840.run(Unknown Source)\n[21:17:16 ERROR]: java.base@14.0.2/java.lang.Thread.run(Thread.java:832)\n[21:17:16 ERROR]: ------------------------------\n[21:17:16 ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH ---\n[21:17:16 ERROR]: ------------------------------复制代码\n\n\n\n\n",
    "replies": [
        {
            "author": "远远困了",
            "timestamp": 1596511440,
            "txt_content": "你海龟跟那个laggremover占用太高了"
        },
        {
            "author": "Jeansou",
            "timestamp": 1596511620,
            "txt_content": "YuanYuanOwO 发表于 2020-8-4 11:24\n你海龟跟那个laggremover占用太高了\nlagremover是崩服两次之后加的"
        },
        {
            "author": "远远困了",
            "timestamp": 1596512040,
            "txt_content": "Jeansou 发表于 2020-8-4 11:27\nlagremover是崩服两次之后加的\n？\n不知道了\n反正占用挺高的"
        },
        {
            "author": "正义Ren类",
            "timestamp": 1596527640,
            "txt_content": "这种情况应该调低给mc服务端分配的内存。"
        },
        {
            "author": "Jeansou",
            "timestamp": 1596528600,
            "txt_content": "正义Ren类 发表于 2020-8-4 15:54\n这种情况应该调低给mc服务端分配的内存。\n试过调低内存，仍然崩溃\n服务器运行超过 24小时 就开始掉 tps"
        },
        {
            "author": "1220187637",
            "timestamp": 1596530040,
            "txt_content": " 本帖最后由 1220187637 于 2020-8-4 16:42 编辑 \n\n可以先清理每个世界的实体（鱼类实在是太多了）\nMinecraft::tickEntity - nms.EntitySquid\nMinecraft::tickEntity - nms.EntityTropicalFish\nMinecraft::tickEntity - nms.EntityGuardian\nMinecraft::tickEntity - nms.EntityPufferFish复制代码\n并且按照教程对 视距 各实体加载距离 刷怪数 加以限制 再关掉蝙蝠的生成\n链接: https://www.mcbbs.net/forum.php?mod=viewthread&tid=774469\n\n还建议再LaggRemover设置中对各种鱼 怪物 动物加以严格限制 (不影响游戏性前提下)\n(崩服是因为你的服务端实在跑不动了 因为长时间未响应所以进程被Paper Watchdog给杀了)\n你的 bukkit.yml\nspawn-limits:\n{\nwater-ambient: 20\nmonsters: 70\nambient: 15\nanimals: 10\nwater-animals: 15\n}\n^^^这里生成限制就放的太高 对于酸岛来说 狭小的面积并不需要这么高的数值\nticks-per:\n{\nmonster-spawns: 1\nautosave: 6000\nambient-spawns: 1\nwater-spawns: 1\nwater-ambient-spawns: 1\nanimal-spawns: 400\n}\n^^^这里应该调高 刷新不应该这么频繁复制代码"
        },
        {
            "author": "正义Ren类",
            "timestamp": 1596540240,
            "txt_content": "Jeansou 发表于 2020-8-4 16:10\n试过调低内存，仍然崩溃\n服务器运行超过 24小时 就开始掉 tps\n那就再调低，我看你1500M会爆，那就分配1024M试试。"
        },
        {
            "author": "Jeansou",
            "timestamp": 1596984360,
            "txt_content": "已解决，为 dynmap v3.1-beta-2 引起"
        }
    ]
}