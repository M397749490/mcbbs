{
    "title": "插件开发求助 - 插件调用player.kickPlayer无响应",
    "author": "issuse",
    "replyCount": 7,
    "timestamp": 1538476380,
    "txt_content": "经测试玩家或控制台输入指令后，经onCommand方法可以正常调用该方法正常运行。但其它地方的调用，比如由定时器调用了该方法，就会卡在\"player.kickPlayer\"，试过u码空字符均不能正常运行。\n\n版本：KCauldron-1.7.10-1614.201\n库版本：KCauldron-1.7.10-1614.201 - bin\n\n    public static void kickall(String kickReason) {\n        clog(\"kickall  \" + kickReason);\n        for (Player player : Bukkit.getOnlinePlayers()) {\n            player.kickPlayer(kickReason);\n        }\n    }复制代码\n\n谢谢每一个来回答的人。",
    "replies": [
        {
            "author": "issuse",
            "timestamp": 1538476680,
            "txt_content": "CraftPlayer{name=Player21}复制代码"
        },
        {
            "author": "海螺螺",
            "timestamp": 1538476800,
            "txt_content": "因为kickPlayer不能异步调用，假如说你的scheduler是异步的，那么你需要开个新的比如\n\nrunTaskAsync(() -> {\n// .....\nPlayer p = ...;\nrunTask(() -> p.kickPlayer(\"\"))\n})\n\nonCommand是同步的当然没问题"
        },
        {
            "author": "July_Summer",
            "timestamp": 1538477100,
            "txt_content": "这个问题以前也困扰了我挺久的\n然后才在doc看见了\n\"不应该在异步线程中调用Bukkit API\""
        },
        {
            "author": "issuse",
            "timestamp": 1538481960,
            "txt_content": "754503921 发表于 2018-10-2 18:40\n因为kickPlayer不能异步调用，假如说你的scheduler是异步的，那么你需要开个新的比如\n\nrunTaskAsync(() ->  ...\n问题解决，谢谢。"
        },
        {
            "author": "ChrisChirs",
            "timestamp": 1583418120,
            "txt_content": "海螺螺 发表于 2018-10-2 18:40\n因为kickPlayer不能异步调用，假如说你的scheduler是异步的，那么你需要开个新的比如\n\nrunTaskAsync(() ->  ...\n大佬，在这个类的外面加上这段代码还是在内部直接运行？"
        },
        {
            "author": "ChrisChirs",
            "timestamp": 1583418720,
            "txt_content": "海螺螺 发表于 2018-10-2 18:40\n因为kickPlayer不能异步调用，假如说你的scheduler是异步的，那么你需要开个新的比如\n\nrunTaskAsync(() ->  ...\n已解决，谢谢"
        },
        {
            "author": "KBlom",
            "timestamp": 1583473740,
            "txt_content": "顶                           "
        }
    ]
}