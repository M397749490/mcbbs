{
    "title": "CraftTweaker 合成相关 每次合成物品都会扣除玩家的饥饿值",
    "author": "xiaoxi喵",
    "replyCount": 7,
    "timestamp": 1585242600,
    "txt_content": " 本帖最后由 1398671127 于 2020-3-27 06:44 编辑 \n\n如何实现合成物品会扣除玩家的饥饿值，最近有了新的想法可是不会CraftTweaker的高级用法\n呜呜呜，我知道40金粒有点少",
    "replies": [
        {
            "author": "youyihj",
            "timestamp": 1585242600,
            "txt_content": " 本帖最后由 友 于 2020-3-29 21:42 编辑 \n\n特定的合成\nrecipes.addShapeless(\"experiencestone\",<item:minecraft:iron_ingot>,[<minecraft:dirt>,<minecraft:dirt>],\nfunction(out,ins,info) {    \n    if (isNull(info.player) || info.player.isFake()) return out; // 如果由机器合成跳过处理\n    return info.player.foodStats.foodLevel > 1 ? out : null;\n},\n//IRecipeAction\nfunction(out,cInfo,player){\n    if (isNull(player) || player.isFake() || player.world.remote) return; // 如果由机器合成跳过处理\n    if (player.foodStats.saturationLevel > 0.15) {\n        player.foodStats.saturationLevel -= 0.15;\n    } else {\n        player.foodStats.foodLevel -= 1;\n    }\n});\n\n\n所有合成\nimport crafttweaker.events.IEventManager;\nimport crafttweaker.event.PlayerCraftedEvent;\nimport crafttweaker.player.IPlayer;\n\nevents.onPlayerCrafted(function(event as PlayerCraftedEvent) {\n    val player as IPlayer = event.player;\n    if (isNull(player) || player.isFake() || player.world.remote) return;\n    if (player.foodStats.saturationLevel > 0.15) {\n        player.foodStats.saturationLevel -= 0.15;\n    } else {\n        val foodLevel as int = player.foodStats.foodLevel;\n        player.foodStats.foodLevel = max(0, foodLevel - 1);\n    }\n});\n\n需要安装ctutils模组\n\n\n"
        },
        {
            "author": "思念化作海",
            "timestamp": 1585243260,
            "txt_content": "recipes.addShapeless(\"experiencestone\",输出物品,[合成物,合成物,合成物,合成物],\nfunction(out,ins,cInfo){\n    return out;\n},\n//IRecipeAction\nfunction(out,cInfo,player){\n    player.foodStats -= 1;\n});\n\n试试？"
        },
        {
            "author": "xiaoxi喵",
            "timestamp": 1585246860,
            "txt_content": " 本帖最后由 1398671127 于 2020-3-27 06:37 编辑 \n折叠 发表于 2020-3-27 01:21\nrecipes.addShapeless(\"experiencestone\",输出物品,[合成物,合成物,合成物,合成物],\nfunction(out,ins,cInf ...\n不行，会报错，突然断网了，明天我再发报错吧.\n神奇的是检查语法没错[PREINITIALIZATION][CLIENT][INFO] Current loaders after merging: [[preinit]]\n[PREINITIALIZATION][CLIENT][INFO] Loading scripts for loader with names [preinit]\n[PREINITIALIZATION][CLIENT][INFO] [preinit | SIDE_CLIENT]: Skipping file {[0:crafttweaker]: xiaoxi.zs} as we are currently loading with a different loader\n[PREINITIALIZATION][CLIENT][INFO] Completed script loading in: 2ms\n[PREINITIALIZATION][CLIENT][INFO] Current loaders after merging: [[preinit], [contenttweaker]]\n[PREINITIALIZATION][CLIENT][INFO] Loading scripts for loader with names [contenttweaker]\n[PREINITIALIZATION][CLIENT][INFO] [contenttweaker | SIDE_CLIENT]: Skipping file {[0:crafttweaker]: xiaoxi.zs} as we are currently loading with a different loader\n[PREINITIALIZATION][CLIENT][INFO] Completed script loading in: 0ms\n[PREINITIALIZATION][CLIENT][INFO] Current loaders after merging: [[preinit], [contenttweaker], [gregtech]]\n[PREINITIALIZATION][CLIENT][INFO] Loading scripts for loader with names [gregtech]\n[PREINITIALIZATION][CLIENT][INFO] [gregtech | SIDE_CLIENT]: Skipping file {[0:crafttweaker]: xiaoxi.zs} as we are currently loading with a different loader\n[PREINITIALIZATION][CLIENT][INFO] Completed script loading in: 0ms\n[INITIALIZATION][CLIENT][INFO] CraftTweaker: Building registry\n[INITIALIZATION][CLIENT][INFO] CraftTweaker: Successfully built item registry\n[INITIALIZATION][CLIENT][INFO] Current loaders after merging: [[preinit], [contenttweaker], [gregtech], [recipeevent | crafttweaker]]\n[INITIALIZATION][CLIENT][INFO] Loading scripts for loader with names [crafttweaker | recipeevent]\n[INITIALIZATION][CLIENT][INFO] [crafttweaker | SIDE_CLIENT]: Loading Script: {[0:crafttweaker]: xiaoxi.zs}\n[INITIALIZATION][CLIENT][ERROR] [crafttweaker]: Error executing {[0:crafttweaker]: xiaoxi.zs}: null\njava.lang.NullPointerException\n        at stanhebben.zenscript.type.natives.JavaMethod.rematch(JavaMethod.java:135)\n        at stanhebben.zenscript.expression.ExpressionCallVirtual.<init>(ExpressionCallVirtual.java:26)\n        at stanhebben.zenscript.type.natives.ZenNativeMember$InstanceGetValue.assign(ZenNativeMember.java:89)\n        at stanhebben.zenscript.parser.expression.ParsedExpressionAssign.compile(ParsedExpressionAssign.java:26)\n        at stanhebben.zenscript.statements.StatementExpression.compile(StatementExpression.java:27)\n        at stanhebben.zenscript.statements.StatementExpression.compile(StatementExpression.java:19)\n        at stanhebben.zenscript.expression.ExpressionJavaLambda.compile(ExpressionJavaLambda.java:75)\n        at stanhebben.zenscript.expression.ExpressionCallVirtual.compile(ExpressionCallVirtual.java:41)\n        at stanhebben.zenscript.statements.StatementExpression.compile(StatementExpression.java:27)\n        at stanhebben.zenscript.statements.StatementExpression.compile(StatementExpression.java:19)\n        at stanhebben.zenscript.ZenModule.compileScripts(ZenModule.java:152)\n        at crafttweaker.runtime.CrTTweaker.loadScript(CrTTweaker.java:215)\n        at crafttweaker.runtime.CrTTweaker.loadScript(CrTTweaker.java:105)\n        at crafttweaker.mc1120.events.CommonEventHandler.registerRecipes(CommonEventHandler.java:69)\n        at net.minecraftforge.fml.common.eventhandler.ASMEventHandler_695_CommonEventHandler_registerRecipes_Register.invoke(.dynamic)\n        at net.minecraftforge.fml.common.eventhandler.ASMEventHandler.invoke(ASMEventHandler.java:90)\n        at net.minecraftforge.fml.common.eventhandler.EventBus$1.invoke(EventBus.java:144)\n        at net.minecraftforge.fml.common.eventhandler.EventBus.post(EventBus.java:182)\n        at net.minecraftforge.registries.GameData.fireRegistryEvents(GameData.java:857)\n        at net.minecraftforge.common.crafting.CraftingHelper.loadRecipes(CraftingHelper.java:636)\n        at net.minecraftforge.fml.common.Loader.initializeMods(Loader.java:747)\n        at net.minecraftforge.fml.client.FMLClientHandler.finishMinecraftLoading(FMLClientHandler.java:336)\n        at net.minecraft.client.Minecraft.func_71384_a(Minecraft.java:535)\n        at net.minecraft.client.Minecraft.func_99999_d(Minecraft.java:378)\n        at net.minecraft.client.main.Main.main(SourceFile:123)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at net.minecraft.launchwrapper.Launch.launch(Launch.java:135)\n        at net.minecraft.launchwrapper.Launch.main(Launch.java:28)\n[INITIALIZATION][CLIENT][INFO] Completed script loading in: 230ms\n[POSTINITIALIZATION][CLIENT][INFO] Removing recipes for various outputs\n[AVAILABLE][CLIENT][INFO] Fixed the RecipeBook复制代码\n"
        },
        {
            "author": "Remooonant",
            "timestamp": 1585261320,
            "txt_content": "看看这个行不行"
        },
        {
            "author": "xiaoxi喵",
            "timestamp": 1585262100,
            "txt_content": " 本帖最后由 1398671127 于 2020-3-27 07:32 编辑 \nRemooonant 发表于 2020-3-27 06:22\n看看这个行不行\n可以发代码吗，图片有点难受\n无效的\nSERVER_STARTED][SERVER][ERROR] xiaoxi.zs:6 > No such member: playerCraftedEvent\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:6 > Not a valid type\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:8 > could not find type PlayerCraftedEvent\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:9 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:10 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:11 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:13 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:13 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:13 > not a valid lvalue\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:15 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:15 > not a valid lvalue\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:16 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:16 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:16 > not a valid lvalue\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:19 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:20 > No such member in java.lang.Object: player\n[SERVER_STARTED][SERVER][ERROR] xiaoxi.zs:20 > not a valid lvalue复制代码"
        },
        {
            "author": "GiNYAi",
            "timestamp": 1585273800,
            "txt_content": "似乎稍微慢了那么一点\n\nval stone = <minecraft:stone>;\nval apple = <minecraft:apple>;\n\nrecipes.addShapeless(\"stone_apple\", apple, [stone, stone],\n    function(out,ins,cInfo){\n        val player = cInfo.player;\n        val foodStats = player.foodStats;\n        if (foodStats.saturationLevel > 0) {\n            foodStats.saturationLevel = max( foodStats.saturationLevel - 2.5, 0);\n            return out;\n        } else if (foodStats.foodLevel > 0){\n            foodStats.foodLevel = max( foodStats.foodLevel - 4, 0);\n            return out;\n        }\n        return null;\n    } as crafttweaker.recipes.IRecipeFunction\n);复制代码"
        },
        {
            "author": "xiaoxi喵",
            "timestamp": 1585274040,
            "txt_content": "GiNYAi 发表于 2020-3-27 09:50\n似乎稍微慢了那么一点\n是的大佬"
        }
    ]
}