{
    "title": "[Sii]新版XML式工程文件结构分析(0.3)",
    "author": "siiftun1857",
    "replyCount": 3,
    "timestamp": 1455254400,
    "txt_content": " 本帖最后由 siiftun1857 于 2016-7-12 12:39 编辑 \n\n我的DTD已经写出来了，于是文档的结构已经很清晰了←_←\n先瞟一眼我写的文档类型声明：\nXML:\n<!DOCTYPE Machine SYSTEM \"https://raw.githubusercontent.com/siiftun1857/Webs/master/bsg_v1.dtd\">复制代码可以清楚的看到根元素是Machine，所以我们先从这里下手\nDTD:\n<!ELEMENT Machine (Global,Data,Blocks)>\n<!ATTLIST Machine\n  version CDATA #FIXED \"1\"\n  name CDATA #REQUIRED>复制代码这段代码的意思是Machine标签下必须有且只有一个Global标签、Data标签和Blocks标签，并且带有属性version和name，其中version必须是\"1\"(因为是v1的dtd←_←)，name可以随便写\nXML:\n<Machine version=\"1\" name=\"steam-cannon\">\n <Global>\n  ......\n </Global>\n <Data>\n  ......\n </Data>\n <Blocks>\n  ......\n </Blocks>\n</Machine>复制代码\n然后是3个比较重要的元素：Position,Potation,Scale\n分别是：位置，角度，尺寸\n这3个标签是空标签，没有内容，但是有属性，怎么写我不用说了吧←_←\nDTD:\n<!ELEMENT Position EMPTY>\n<!ELEMENT Rotation EMPTY>\n<!ELEMENT Scale EMPTY>\n\n<!ATTLIST Position \n  x CDATA #REQUIRED\n  y CDATA #REQUIRED\n  z CDATA #REQUIRED>\n<!ATTLIST Rotation\n  x CDATA #REQUIRED\n  y CDATA #REQUIRED\n  z CDATA #REQUIRED\n  w CDATA #REQUIRED>\n<!ATTLIST Scale\n  x CDATA #REQUIRED\n  y CDATA #REQUIRED\n  z CDATA #REQUIRED>复制代码XML:\n<Position x=\"0\" y=\"0\" z=\"0\" />\n<Rotation x=\"0\" y=\"0\" z=\"0\" w=\"1\" />\n<Scale x=\"1\" y=\"1\" z=\"1\" />复制代码\n回过头来再照顾一下Machine下的三个标签Global、Data和Blocks\n先看Glocal\nDTD:\n<!ELEMENT Global (Position,Rotation)>复制代码XML:\n<Global>\n <Position x=\"0\" y=\"0\" z=\"0\" />\n <Rotation x=\"0\" y=\"0\" z=\"0\" w=\"1\" />\n</Global>复制代码机器在世界中的位置和角度\n似乎也没啥说的←_←\n\n再看看Blocks\nDTD:\n<!ELEMENT Blocks (Block*)>复制代码星号的意思是\"出现0次或多次\"\n于是可以\nXML:\n<Blocks />复制代码啥都没有←_←\n或者\nXML:\n<Blocks>\n <Block>\n  ......\n </Block>\n <Block>\n  ......\n </Block>\n <Block>\n  ......\n </Block>\n ......\n</Blocks>复制代码已经很明显了←_←\n似乎少了点东西，那就是Block标签的属性\n再来看看Block标签\nDTD:\n<!ELEMENT Block (Transform,Data)>\n<!ATTLIST Block\n  id CDATA #REQUIRED\n  guid CDATA #REQUIRED>复制代码Block标签下有两属性id和guid，还有两个标签Transform和Data\nid当然就是方块的id，guid不解释了←_←\n如果你造了一个方块不知道怎么填guid，推荐一个网站：https://www.uuidgenerator.net\nXML:\n<Block id=\"0\" guid=\"d2eab042-2460-4dd9-8ed0-1837ea383c01\">\n <Transform>\n  ......\n </Transform>\n <Settings>\n  ......\n </Settings>\n <Data>\n  ......\n </Data>\n</Block>复制代码\nTransform当然就是方块最基本的属性了←_←\nDTD:\n<!ELEMENT Transform (Position,Rotation,Scale)>复制代码XML:\n<Transform>\n <Position x=\"0\" y=\"0\" z=\"0\" />\n <Rotation x=\"0\" y=\"0\" z=\"0\" w=\"1\" />\n <Scale x=\"1\" y=\"1\" z=\"1\" />\n</Transform>复制代码\nSettings里目前只有贴图和模型\nDTD:\n<!ELEMENT Settings (Skin)>\n<!ATTLIST Skin\n  name CDATA #REQUIRED\n  id CDATA #REQUIRED>\n[code][code]XML:\n<Settings>\n <Skin name=\"大洗贴图\" id=\"大AAAAAQAAAAAAAAAA\" />\n</Settings>[code][code]XML:\n<Settings>\n <Skin name=\"default\" id=\"default\" />\n</Settings>[code]\n\n再看看Data标签\n[code]DTD:\n<!ELEMENT Data (StringArray*,String*,Single*,Boolean*,Vector3*,Color*,MKey*,MMenu*,MToggle*,MSlider*,MLimits*,MColourSlider*)>复制代码Data可以有String标签、SrringArray标签、Singe标签、Boolean标签、Vector3标签，剩下一堆M开头的是mod专用标签，咋用别问我←_←\nSrringArray是按键，Singe是数值，Boolean是真假值，Vector3是3变量数组(以前被用作钢筋类方块的两个连接点)，Color是颜色和Vector3相似\nDTD:\n<!ELEMENT String (#PCDATA)>\n<!ELEMENT StringArray (#PCDATA)>\n<!ELEMENT Single (#PCDATA)>\n<!ELEMENT Boolean (#PCDATA)>\n<!ELEMENT Vector3 (X,Y,Z)>\n<!ELEMENT Color (R,G,B)>\n\n<!ELEMENT MKey (#PCDATA)>\n<!ELEMENT MMenu (#PCDATA)>\n<!ELEMENT MToggle (#PCDATA)>\n<!ELEMENT MSlider (#PCDATA)>\n<!ELEMENT MLimits (#PCDATA)>\n<!ELEMENT MColourSlider (R,G,B)>\n\n<!ATTLIST String key CDATA #REQUIRED>\n<!ATTLIST StringArray key CDATA #REQUIRED>\n<!ATTLIST Single key CDATA #REQUIRED>\n<!ATTLIST Boolean key CDATA #REQUIRED>\n<!ATTLIST Vector3 key CDATA #REQUIRED>\n<!ATTLIST Color key CDATA #REQUIRED>\n<!ATTLIST MKey key CDATA #REQUIRED>\n<!ATTLIST MMenu key CDATA #REQUIRED>\n<!ATTLIST MToggle key CDATA #REQUIRED>\n<!ATTLIST MSlider key CDATA #REQUIRED>\n<!ATTLIST MLimits key CDATA #REQUIRED>\n<!ATTLIST MColourSlider key CDATA #REQUIRED>复制代码XML:\n<Data>\n <String key=\"modLoader-machineData\" />\n <StringArray key=\"he\">left shift</StringArray>\n <Single key=\"hehe\">2.00</Single>\n <Boolean key=\"hehehe\">True</Boolean>\n <Vector3 key=\"start-position\">\n  <X>123</X>\n  <Y>456</Y>\n  <Z>789</Z>\n </Vector3>\n<Color key=\"color-papapa\">\n  <R>-255</R>\n  <G>-255</G>\n  <B>-255</B>\n </Color>\n</Data>复制代码SrringArray标签用于绑定按键，比如轮子前进和后退，活塞的抬起等\nSinge标签用于确定一些数值，比如轮子的转速，转向器的角度限制，配重球的重量，大炮的威力等\nBoolean标签是真假值，只有True或者False，用于记录一些开关，比如自动旋转，切换模式，自动刹车等\nVector3标签是3变量数组，早期它用于确定两点定位方块的两个触点，比如钢筋、皮筋、绞盘等\nColor标签是rgb颜色，不含alpha通道，用于确定颜色\n\nData标签最初只用于Block，初衷是存储物块数据，但是ModLoader为了存储一些额外的机器数据，使用8号方块(即红筋)在Blocks当中存储，导致一些机器方块数量陡增以及红筋加载导致的错误，结果besiege官方留意到了这个现象。为了阻止这种方块滥用，在0.27中取消了红筋的加载并在Machine内添加Data，并且还添加了mod专用的Data子标签(论mod如何改变原版走向23333)\n\n@混乱 @sjjklh 无耻的要个评价\n@simon3000 @彪悍的新手 @13206194858 @wq80781 @C-青皮君 来凑个热闹←_←\n<!-- By siiftun1857 -->复制代码",
    "replies": [
        {
            "author": "地图在哪",
            "timestamp": 1455386520,
            "txt_content": "好深奥，话说能干嘛？"
        },
        {
            "author": "抑制不住的",
            "timestamp": 1465185420,
            "txt_content": "学习了，以后说不定用到"
        },
        {
            "author": "135ty",
            "timestamp": 1465403100,
            "txt_content": "这3个表情是空标签，没有内容，但是有属性，怎么写我不用说了吧←_←\n楼主有一个地方打错了，是标签不是表情。"
        }
    ]
}