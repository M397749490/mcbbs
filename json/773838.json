{
    "title": "请问怎么获得玩家指针所指的目标实体？？",
    "author": "ellgell",
    "replyCount": 4,
    "timestamp": 1514795040,
    "txt_content": "请问怎么获得玩家指针所指的目标实体？？",
    "replies": [
        {
            "author": "Ir.Nep",
            "timestamp": 1514801760,
            "txt_content": "public Entity getCursorTarget(Player p, double range){\n                Entity target;\n                Iterator<Entity> entities;\n            Location loc = p.getEyeLocation();\n            Vector vec = loc.getDirection().multiply(0.15);\n            while((range-=0.1)>0){\n                    entities = loc.getWorld().getNearbyEntities(loc.add(vec), 0.001, 0.001, 0.001).iterator();\n                while(entities.hasNext()){\n                        if((target = entities.next()) != p){\n                                return target;\n                        }\n                }\n            }\n            return null;\n        }复制代码"
        },
        {
            "author": "张满月",
            "timestamp": 1515069480,
            "txt_content": "qzz740827 发表于 2018-1-1 18:16\n透过方块。。。么？"
        },
        {
            "author": "Ir.Nep",
            "timestamp": 1515073380,
            "txt_content": "z89669 发表于 2018-1-4 20:38\n透过方块。。。么？\n是的，如果不想透过方块的话，\n在第一个while前加上Block block;\n里面加上&& ((block = loc.getWorld().getBlockAt(loc)).isLiquid() || block.isEmpty())"
        },
        {
            "author": "耗子",
            "timestamp": 1515079920,
            "txt_content": "qzz740827 发表于 2018-1-1 18:16\n个人觉得获取周围4格范围的全部实体然后计算与向量的距离效率比较高"
        }
    ]
}