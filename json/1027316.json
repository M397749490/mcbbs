{
    "title": "已解决,麻烦删帖",
    "author": "xusheng93217",
    "replyCount": 25,
    "timestamp": 1587642480,
    "txt_content": " 本帖最后由 xusheng93217 于 2020-5-4 15:28 编辑 \n\n本想从PlayerInteractEvent事件下手, \n\n\n思路是 检测手上物品有没有指定lore或name 如 淘金盘\n但是虽然取消了事件,但是还是会传出去,  优先级 最低和最高都试过了,没效果\n\n\n怀疑是 他只监听了事件传出, 没检测是否取消\n有没有别的什么办法呢\n",
    "replies": [
        {
            "author": "飞翔之歌",
            "timestamp": 1587642960,
            "txt_content": "请确定优先级。"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587644220,
            "txt_content": "飞翔之歌 发表于 2020-4-23 19:56\n请确定优先级。\n    @EventHandler(priority = EventPriority.LOWEST)\n    public void onItemNo(PlayerInteractEvent e) {"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587650940,
            "txt_content": "飞翔之歌 发表于 2020-4-23 19:56\n请确定优先级。\n我确定了,您能解答一下吗."
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1587689940,
            "txt_content": "xusheng93217 发表于 2020-4-23 22:09\n我确定了,您能解答一下吗.\n把优先级调最高。"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587709500,
            "txt_content": " 本帖最后由 xusheng93217 于 2020-4-24 15:00 编辑 \n飞翔之歌 发表于 2020-4-24 08:59\n把优先级调最高。\n不好意思 忘了优先级"
        },
        {
            "author": "squid233",
            "timestamp": 1587710100,
            "txt_content": "xusheng93217 发表于 2020-4-24 14:25\n@EventHandler(priority = EventPriority.LOWEST)\n    public void onItemNo(PlayerInteractEvent e)  ...\nLOWEST是低级的。"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587711600,
            "txt_content": "squid233 发表于 2020-4-24 14:35\nLOWEST是低级的。\n哦 不好意思  我忘了 他是最后处理"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587715200,
            "txt_content": "飞翔之歌 发表于 2020-4-24 08:59\n把优先级调最高。\n@EventHandler(priority = EventPriority.HIGHEST) 也不行"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587715200,
            "txt_content": "squid233 发表于 2020-4-24 14:35\nLOWEST是低级的。\n@EventHandler(priority = EventPriority.HIGHEST)\nHIGHEST也不行"
        },
        {
            "author": "怜生",
            "timestamp": 1587782580,
            "txt_content": "太强了吧太强了吧"
        },
        {
            "author": "怜生",
            "timestamp": 1587786300,
            "txt_content": "已经买了谢谢老板，很好用"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587786600,
            "txt_content": "lihaoming 发表于 2020-4-25 11:45\n已经买了谢谢老板，很好用\n你才好用啊,.都替我顶贴了"
        },
        {
            "author": "雨",
            "timestamp": 1587786900,
            "txt_content": "建议在配置文件禁用"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587787080,
            "txt_content": "雨 发表于 2020-4-25 11:55\n建议在配置文件禁用\n?那粘液科技不就废了么"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587787080,
            "txt_content": "雨 发表于 2020-4-25 11:55\n建议在配置文件禁用\n你这个问题相当于 禁止了 工业里的 锤子"
        },
        {
            "author": "雨",
            "timestamp": 1587787920,
            "txt_content": "xusheng93217 发表于 2020-4-25 11:58\n你这个问题相当于 禁止了 工业里的 锤子\n噢 你是要在 某种情况下不能使用对吧 看错了"
        },
        {
            "author": "QiuJay",
            "timestamp": 1587788400,
            "txt_content": "能上代码吗？@EventHandler(priority=EventPriority.MONITOR)\n        public void onRightClick(PlayerInteractEvent e) {\n     e.setCancelled(true);\n}复制代码"
        },
        {
            "author": "怜生",
            "timestamp": 1587794340,
            "txt_content": "已经买了谢谢老板，很好用"
        },
        {
            "author": "怜生",
            "timestamp": 1587794340,
            "txt_content": "已经买了谢谢老板，很好用"
        },
        {
            "author": "怜生",
            "timestamp": 1587794400,
            "txt_content": "已经买了谢谢老板，很好用"
        },
        {
            "author": "QiuJay",
            "timestamp": 1587798360,
            "txt_content": "看了下粘液淘金盘的源码，最好的方式是注册两个 PlayerInteractEvent 事件方法，一个高，一个低，在高的地方将此玩家破坏方块的权限禁止掉，然后在到低的方法中将玩家破坏方块的权限打开。\n\n下面是 淘金盘 右键时的代码，判断了右键的方块是否 Material.GRAVEL(沙砾) 并且 玩家有没有破坏方块的权限，如果有才随机取一个物品替换\npublic ItemUseHandler getItemHandler() {\n                return e -> {\n                        Optional<Block> block = e.getClickedBlock();\n                        \n                        if (block.isPresent()) {\n                                Block b = block.get();\n                                \n                                if (b.getType() == Material.GRAVEL && SlimefunPlugin.getProtectionManager().hasPermission(e.getPlayer(), b.getLocation(), ProtectableAction.BREAK_BLOCK)) {\n                                        ItemStack output = randomizer.getRandom();\n                                        \n                                        b.getWorld().playEffect(b.getLocation(), Effect.STEP_SOUND, b.getType());\n                                        b.setType(Material.AIR);\n\n                                        if (output.getType() != Material.AIR) {\n                                                b.getWorld().dropItemNaturally(b.getLocation(), output.clone());\n                                        }\n                                }\n                        }\n                        \n                        e.cancel();\n                };\n        }复制代码\n"
        },
        {
            "author": "Klos_shizi",
            "timestamp": 1587808680,
            "txt_content": "awa 可还行"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1587812700,
            "txt_content": "QiuJay 发表于 2020-4-25 15:06\n看了下粘液淘金盘的源码，最好的方式是注册两个 PlayerInteractEvent 事件方法，一个高，一个低，在高的地 ...\nSlimefunPlugin.getProtectionManager().hasPermission(e.getPlayer(), b.getLocation(), ProtectableAction.BREAK_BLOCK))\n\n我看他判断方块是否能破坏的权限是这里,那我用那种形式 禁止破坏方块比较好呢"
        },
        {
            "author": "xusheng93217",
            "timestamp": 1588240200,
            "txt_content": "QiuJay 发表于 2020-4-25 15:06\n看了下粘液淘金盘的源码，最好的方式是注册两个 PlayerInteractEvent 事件方法，一个高，一个低，在高的地 ...\n在吗,能解答一下吗,谢谢您"
        },
        {
            "author": "QiuJay",
            "timestamp": 1588291860,
            "txt_content": "xusheng93217 发表于 2020-4-30 17:50\n在吗,能解答一下吗,谢谢您\n刚看到，你这个就需要配合权限插件来做了，spigot 本身没有设置玩家权限的功能，去执行权限插件的命令设置玩家的权限，然后在设置回来就好了。比如空岛插件就自带权限设置吧(我也不清楚)，你执行空岛权限设置的命令就好了"
        }
    ]
}