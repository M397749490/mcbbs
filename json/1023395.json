{
    "title": "服务器长时间无响应，甚至崩溃",
    "author": "名侦探kenan",
    "replyCount": 12,
    "timestamp": 1587293580,
    "txt_content": "一直刷这个报告....\n\n[18:46:24] [Paper Watchdog Thread/ERROR]: ------------------------------\n[18:46:24] [Paper Watchdog Thread/ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH ---\n[18:46:24] [Paper Watchdog Thread/ERROR]: ------------------------------\n[18:46:29] [Paper Watchdog Thread/ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH  - git-Paper-87 (MC: 1.15.2) ---\n[18:46:29] [Paper Watchdog Thread/ERROR]: The server has not responded for 30 seconds! Creating thread dump\n[18:46:29] [Paper Watchdog Thread/ERROR]: ------------------------------\n[18:46:29] [Paper Watchdog Thread/ERROR]: Server thread dump (Look for plugins here before reporting to Paper!):\n[18:46:29] [Paper Watchdog Thread/ERROR]: ------------------------------\n[18:46:29] [Paper Watchdog Thread/ERROR]: Current Thread: Server thread\n[18:46:29] [Paper Watchdog Thread/ERROR]:         PID: 19 | Suspended: false | Native: false | State: RUNNABLE\n[18:46:29] [Paper Watchdog Thread/ERROR]:         Stack:\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2.b(SourceFile:12)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2$$Lambda$3809/2034840359.apply(Unknown Source)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaLazy.a(SourceFile:26)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.GenLayerZoom.a(SourceFile:41)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2.b(SourceFile:13)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2$$Lambda$3809/2034840359.apply(Unknown Source)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaLazy.a(SourceFile:26)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.GenLayerZoom.a(SourceFile:41)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2.b(SourceFile:13)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2$$Lambda$3809/2034840359.apply(Unknown Source)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaLazy.a(SourceFile:26)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.GenLayerZoom.a(SourceFile:31)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2.b(SourceFile:13)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2$$Lambda$3809/2034840359.apply(Unknown Source)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaLazy.a(SourceFile:26)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.GenLayerZoom.a(SourceFile:31)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2.b(SourceFile:13)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer2$$Lambda$3809/2034840359.apply(Unknown Source)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaLazy.a(SourceFile:26)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.GenLayerOcean.a(SourceFile:14)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer3.a(SourceFile:15)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaTransformer3$$Lambda$3810/1463813329.apply(Unknown Source)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.AreaLazy.a(SourceFile:26)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.GenLayer.a(SourceFile:46)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.WorldChunkManagerOverworld.getBiome(SourceFile:88)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.GenLayerZoomVoronoi.a(SourceFile:66)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.GenLayerZoomVoronoiFixed.a(SourceFile:8)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.BiomeManager.a(BiomeManager.java:22)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.BiomeManager.getBiome(BiomeManager.java:20)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.StructureGenerator.getNearestGeneratedFeature(StructureGenerator.java:115)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.ChunkGenerator.findNearestMapFeature(ChunkGenerator.java:69)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.WorldServer.a(WorldServer.java:1682)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.CommandLocate.a(SourceFile:47)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.CommandLocate.a(SourceFile:41)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.CommandLocate$$Lambda$1632/1531406640.run(Unknown Source)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:262)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:176)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.CommandDispatcher.a(CommandDispatcher.java:179)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 org.bukkit.craftbukkit.v1_15_R1.command.VanillaCommandWrapper.execute(VanillaCommandWrapper.java:45)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:159)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 org.bukkit.craftbukkit.v1_15_R1.CraftServer.dispatchCommand(CraftServer.java:740)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.PlayerConnection.handleCommand(PlayerConnection.java:1820)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.PlayerConnection.a(PlayerConnection.java:1628)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.PacketPlayInChat.a(PacketPlayInChat.java:47)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.PacketPlayInChat.a(PacketPlayInChat.java:5)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.PlayerConnectionUtils.lambda$ensureMainThread$0(PlayerConnectionUtils.java:23)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.PlayerConnectionUtils$$Lambda$4489/835923052.run(Unknown Source)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.TickTask.run(SourceFile:18)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.IAsyncTaskHandler.executeTask(IAsyncTaskHandler.java:136)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.IAsyncTaskHandlerReentrant.executeTask(SourceFile:23)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.IAsyncTaskHandler.executeNext(IAsyncTaskHandler.java:109)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.MinecraftServer.ba(MinecraftServer.java:1038)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.MinecraftServer.executeNext(MinecraftServer.java:1031)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.IAsyncTaskHandler.awaitTasks(IAsyncTaskHandler.java:119)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.MinecraftServer.sleepForTick(MinecraftServer.java:1015)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.MinecraftServer.run(MinecraftServer.java:938)\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 java.lang.Thread.run(Unknown Source)\n[18:46:29] [Paper Watchdog Thread/ERROR]: ------------------------------\n[18:46:29] [Paper Watchdog Thread/ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH ---\n",
    "replies": [
        {
            "author": "DreamVoid",
            "timestamp": 1587293580,
            "txt_content": " 本帖最后由 DreamVoid 于 2020-4-19 20:12 编辑 \n名侦探kenan 发表于 2020-4-19 20:06\nhttps://timings.aikar.co/?id=28be575567494febbf561f0a92bd3c04\n拜托了！\nIronElevators\nCatSeedLogin\n这两个插件占用最高\n我建议你替换同类插件或者删掉这两个\n\n尤其是CatSeedLogin最需要优化，我实在搞不懂为什么一个登录插件会这么高的占用"
        },
        {
            "author": "DreamVoid",
            "timestamp": 1587293820,
            "txt_content": "[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.StructureGenerator.getNearestGeneratedFeature(StructureGenerator.java:115)\nserver.properties中找到\ngenerate-structures复制代码改为false，重启服务器\n这个会导致所有部分原版应有的特性会消失\ngenerate-structures，默认值是true（对性能影响略大）。含义是生成和计算一些特殊的环境，例如女巫塔、村民到达数量生成铁傀儡等等。设置为false可以减少这些特殊环境生成和周期性检查带来的开销。这个参数很少被提起，但是对性能的提升有着不少的帮助。例如我的服务器生存子服有130人左右在线，TPS在17左右，关闭这个功能后提高到了19左右。需要彻底关闭这个参数，还需要在spigot.yml中把save-structure-info设置为false。并且关服后手动删除每个世界（例如world、world_nether、world_the_end）下的data文件夹里的Fortress.dat、Mineshaft.dat、Stronghold.dat、Temple.dat、Village.dat等文件。\n\nhttps://www.mcbbs.net/thread-478126-1-1.html"
        },
        {
            "author": "结城希亚",
            "timestamp": 1587294540,
            "txt_content": "在spigot.yml里把timeout-time改为9999999"
        },
        {
            "author": "暮里魔理沙",
            "timestamp": 1587295260,
            "txt_content": "你服玩家是否有利用末地门刷沙，却无人在末地挂机加载区块？"
        },
        {
            "author": "名侦探kenan",
            "timestamp": 1587296760,
            "txt_content": "暮里魔理沙 发表于 2020-4-19 19:21\n你服玩家是否有利用末地门刷沙，却无人在末地挂机加载区块？\n没有......"
        },
        {
            "author": "名侦探kenan",
            "timestamp": 1587296760,
            "txt_content": "结城希亚 发表于 2020-4-19 19:09\n在spigot.yml里把timeout-time改为9999999\n并不管用，该卡还是卡.."
        },
        {
            "author": "名侦探kenan",
            "timestamp": 1587296820,
            "txt_content": "DreamVoid 发表于 2020-4-19 18:57\nserver.properties中找到\n改为false，重启服务器\n这个会导致所有部分原版应有的特性会消失\n我尝试了你的方法.....似乎并不是这个问题，平时服务器的TPS都会稳定在20，只是突然有时候会崩溃"
        },
        {
            "author": "DreamVoid",
            "timestamp": 1587296880,
            "txt_content": "名侦探kenan 发表于 2020-4-19 19:47\n似乎并不是这个问题，平时服务器的TPS都会稳定在20，只是突然有时候会崩溃 ...\n“似乎”\n？你不试一下怎么知道是不是这个的问题呢\n而且我也把问题的日志贴出来了\n[18:46:29] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_15_R1.StructureGenerator.getNearestGeneratedFeature(StructureGenerator.java:115"
        },
        {
            "author": "名侦探kenan",
            "timestamp": 1587296940,
            "txt_content": "DreamVoid 发表于 2020-4-19 19:48\n“似乎”\n？你不试一下怎么知道是不是这个的问题呢\n而且我也把问题的日志贴出来了\n尝试了......"
        },
        {
            "author": "DreamVoid",
            "timestamp": 1587297120,
            "txt_content": "名侦探kenan 发表于 2020-4-19 19:49\n尝试了......\n那你在服务器输入\ntimings on复制代码\n过3分钟或者更久打一下\ntimings paste复制代码\n会给你一个网址，把那个网址发给我"
        },
        {
            "author": "名侦探kenan",
            "timestamp": 1587297960,
            "txt_content": "DreamVoid 发表于 2020-4-19 19:52\n那你在服务器输入\n\n过3分钟或者更久打一下\nhttps://timings.aikar.co/?id=28be575567494febbf561f0a92bd3c04\n拜托了！"
        },
        {
            "author": "名侦探kenan",
            "timestamp": 1587300000,
            "txt_content": "DreamVoid 发表于 2020-4-19 20:10\nIronElevators\nCatSeedLogin\n这两个插件占用最高\n10分钟没有问题...应该好了，十分感谢！"
        }
    ]
}