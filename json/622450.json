{
    "title": "MCEdit的schematic导出文件格式",
    "author": "SalimTerryLi",
    "replyCount": 7,
    "timestamp": 1471433820,
    "txt_content": " 本帖最后由 SalimTerryLi 于 2016-8-17 20:18 编辑 \n\n已拥有一定开发经验，求教schematic文件是以怎么样的方式储存数据的，我目前知道的仅仅是它经过压缩，会储存方块长宽高数据，按某种序列保存方块信息和其它数据。\n咱不是py党，所以MCEdit源码看的一知半解的...尤其是什么移位运算...希望大神传授...最好能像这样说明“前n的字节储存什么，由什么分割或跳过几个字节，接下来的n个字节储存什么........”或者，看它代码好像大量使用nbt...反正就是语言不通...求教怎么读取和生成schematic...\n然后还去WorldEdit源码看了看...代码树好乱...直接受不了...\n不过看到了jnbt...好像是个好东西...但不知道有木有jsnbt~~~因为手头写的mod是和pe版同步开发的...\n嘿嘿是个麻烦的问题...求讨论，求前辈...\n",
    "replies": [
        {
            "author": "林中小屋",
            "timestamp": 1471674960,
            "txt_content": "好像自己写了个模块"
        },
        {
            "author": "林中小屋",
            "timestamp": 1471675440,
            "txt_content": "我会python，但我也看不懂"
        },
        {
            "author": "林中小屋",
            "timestamp": 1471675920,
            "txt_content": " 本帖最后由 林中小屋 于 2016-8-23 11:21 编辑 \n[spoiler]复制代码"
        },
        {
            "author": "SalimTerryLi",
            "timestamp": 1471679040,
            "txt_content": "林中小屋 发表于 2016-8-20 14:52\n嗯就是这段码，不过目前正在从we的源码突破...能否加上折叠呢，这一通代码帖子都炸了~~~"
        },
        {
            "author": "林中小屋",
            "timestamp": 1471922520,
            "txt_content": "学了python还是能理解的。主要是一个对象和几个方法。\n刚刚加了spoiler折叠代码坏了"
        },
        {
            "author": "林中小屋",
            "timestamp": 1471922580,
            "txt_content": "都给打包成.pyd 不知道怎么反编译呢。。"
        },
        {
            "author": "taolu",
            "timestamp": 1582159980,
            "txt_content": "虽然没有直接看python源码，但是我通过自己导出文件发现格式是这个样子的\n\n\n\n\n071330stmb000n2tftm902.jpg (58.82 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-20 08:46 上传\n\n\n\n\n其中方块是16进制作为字符串来写入的\n把3维方块转成数据的在总的X,Y,Z区块中第(X,Y,Z)所对应的数据为\n(Y - 1) * (总X * 总Z) + ( Z - 1) * 总X + X复制代码这个是我程序其中某一部分VB代码\nOpen App.Path & \"\\temp\" For Binary As #1\nPut #1, , Chr$(10) & Chr$(0) & Chr$(9) & \"Schematic\"\nPut #1, , Chr$(2) & Chr$(0) & Chr$(6) & \"Height\"\nPut #1, , CByte(\"&H\" & CStr(Left(HY, 2)))\nPut #1, , CByte(\"&H\" & CStr(Right(HY, 2)))\nPut #1, , Chr$(2) & Chr$(0) & Chr$(6) & \"Length\"\nPut #1, , CByte(\"&H\" & CStr(Left(HZ, 2)))\nPut #1, , CByte(\"&H\" & CStr(Right(HZ, 2)))\nPut #1, , Chr$(2) & Chr$(0) & Chr$(5) & \"Width\"\nPut #1, , CByte(\"&H\" & CStr(Left(HX, 2)))\nPut #1, , CByte(\"&H\" & CStr(Right(HX, 2)))\nPut #1, , Chr$(9) & Chr$(0) & Chr$(8) & \"Entities\" & Chr$(1) & Chr$(0) & Chr$(0) & Chr$(0) & Chr$(0) & Chr$(9) & Chr$(0) & Chr$(12) & \"TileEntities\" & Chr$(1) & Chr$(0) & Chr$(0) & Chr$(0) & Chr$(0) & Chr$(9) & Chr$(0) & Chr$(9) & \"TileTicks\" & Chr$(1) & Chr$(0) & Chr$(0) & Chr$(0) & Chr$(0) & Chr$(8) & Chr$(0) & Chr$(9) & \"Materials\" & Chr$(0) & Chr$(5) & \"Alpha\" & Chr$(7) & Chr$(0) & Chr$(4) & \"Data\"\nPut #1, , CByte(\"&H\" & CStr(Left(HLoopDB, 2)))\nPut #1, , CByte(\"&H\" & CStr(Mid(HLoopDB, 3, 2)))\nPut #1, , CByte(\"&H\" & CStr(Mid(HLoopDB, 5, 2)))\nPut #1, , CByte(\"&H\" & CStr(Right(HLoopDB, 2)))\nFor I = 0 To LoopDB - 1\n    If Len(StrDT(I)) = 0 Then\n        Put #1, , Chr$(0)\n    Else\n        Put #1, , CByte(StrDT(I))\n    End If\nNext\nPut #1, , Chr$(7) & Chr$(0) & Chr$(6) & \"Biomes\"\nPut #1, , CByte(\"&H\" & CStr(Left(HLoopBI, 2)))\nPut #1, , CByte(\"&H\" & CStr(Mid(HLoopBI, 3, 2)))\nPut #1, , CByte(\"&H\" & CStr(Mid(HLoopBI, 5, 2)))\nPut #1, , CByte(\"&H\" & CStr(Right(HLoopBI, 2)))\nFor I = 0 To LoopBI - 1\n        Put #1, , Chr$(0)\nNext\nPut #1, , Chr$(7) & Chr$(0) & Chr$(6) & \"Blocks\"\nPut #1, , CByte(\"&H\" & CStr(Left(HLoopDB, 2)))\nPut #1, , CByte(\"&H\" & CStr(Mid(HLoopDB, 3, 2)))\nPut #1, , CByte(\"&H\" & CStr(Mid(HLoopDB, 5, 2)))\nPut #1, , CByte(\"&H\" & CStr(Right(HLoopDB, 2)))\nFor I = 0 To LoopDB - 1\n    If Len(StrBL(I)) = 0 Then\n        Put #1, , Chr$(0)\n    Else\n        Put #1, , CByte(StrBL(I))\n    End If\nNext\nPut #1, , Chr$(0)复制代码\n\n\n\n"
        }
    ]
}