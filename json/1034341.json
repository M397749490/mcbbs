{
    "title": "请注意，尽量不要使用Item类的onUsingTick()方法",
    "author": "yeziqie",
    "replyCount": 3,
    "timestamp": 1588250760,
    "txt_content": "本人开发版本1.12.2，但这个问题是至少从1.7.10就有，而且好像直到1.14都有的老问题了。\n具体问题产生的原因是这样，在onUsingTick()方法内不能操作ItemStack的nbt，这会导致ItemStack从旧的变成新的，从而导致物品完全无法停止使用。\n举个栗子，假如我有个物品是右键缓慢掉血同时回复魔力，而魔力是用nbt记在stack里的，那么于是每一tick我都操作了nbt，从而导致更新了stack，最后我被活活扣死。\nforge论坛也有相关问题：https://www.minecraftforge.net/f ... ngtickproblem-guns/\n解决办法：\n1.不操作nbt（这。。）\n2.检测Client的Tick，判断右键是否按下，并且判断当前持有的是不是自己的物品（这。。）",
    "replies": [
        {
            "author": "瘟疫威胁全世界",
            "timestamp": 1588252260,
            "txt_content": "其实可以先把初次使用的物品拷贝一份\n然后以拷贝出的物品做基准来操作先有的物品\n你问怎么知道是不是初次使用？加NBT啊\n\n本人目前正在入门ForgeMod开发，以上是一些个人想法XD"
        },
        {
            "author": "yeziqie",
            "timestamp": 1588253640,
            "txt_content": "瘟疫威胁全世界 发表于 2020-4-30 21:11\n其实可以先把初次使用的物品拷贝一份\n然后以拷贝出的物品做基准来操作先有的物品\n你问怎么知道是不是初次使 ...\n你这个解决办法，通常是解决在遍历过程中操作Array的。问题是，在循环调用的onUsingTick()方法中，你如何做到把NBT的读写转移到别处呢。请注意，onUsingTick()方法在Item类而不是ItemStack类中。"
        },
        {
            "author": "yeziqie",
            "timestamp": 1588253820,
            "txt_content": "（姑且是勉强能解决的）办法：\n@SubscribeEvent\npublic void xxx(PlayerTickEvent event) {\n        EntityPlayer player = event.player;\n        ItemStack stack = player.getHeldItemMainhand();\n        if (stack == null || stack.getItem() != this) {\n                return;\n        }\n        if (!Minecraft.getMinecraft().gameSettings.keyBindUseItem.isKeyDown()) {\n                return;\n        }\n        //然后写你的代码\n}\n但这个方法很扯，不建议使用。"
        }
    ]
}