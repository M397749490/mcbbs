{
    "title": "【1.9-1.12】【hqqaazz】探测天气、日夜",
    "author": "hqqaazz",
    "replyCount": 6,
    "timestamp": 1467457920,
    "txt_content": " 本帖最后由 hqqaazz 于 2018-8-29 20:29 编辑 \n\n哈喽，最近在赶擂台赛的作品，有点忙的样子... \n然后呢就做出了这么一个东西，已经用于我的篝火系统了。\n\n这个篝火系统呢，开了个天坑，所以到现在也没有发新的出来。\n\n好吧好吧，跑题了。\n\n虽然说理论上是1.8+，但其实我是用1.9.4写的指令。\n所以1.9-的话，就得自己重新写一遍了。\n\n\n----探测日夜----\n\n探测日夜其实之前已经发了出来了，这次看着差不多就顺手再发了一次。\n\n\n我看见有些探测日夜的都是修改gamerule，然后模拟/time增加时间做出来的，但其实有个更简单的方法。\n\nMC的游戏时间是0~24000，既然可以睡觉的时间是12541-23458\n那么就设定为：0~12540=白天 12541~23458=夜晚\n\n首先需要一个计分板\n/scoreboard objectives add time dummy复制代码\nRCB：\n/time query daytime复制代码\nCCB ：\n/stats block ~ ~ ~1 set QueryResult @a time复制代码这个相对坐标，连接到上一个RCB 的坐标就可以啦。\n\n当然，你也可以加上一个信息。\n\n探测白天\n/execute @a[score_time_min=23458,score_time=23458] ~ ~ ~ /tellraw @a {\"text\":\"天亮了。\",\"color\":\"yellow\"}复制代码\n\n\n\n探测夜晚\n/execute @a[score_time_min=12541,score_time=12541] ~ ~ ~ /tellraw @a {\"text\":\"天黑了。\",\"color\":\"yellow\"}复制代码\n\n\n\n\n\n\n\n\n----探测天气----\n\n\n\n\n\nQQ图片20160702195140.png (41.18 KB, 下载次数: 2)\n\n下载附件\n\n2016-7-2 19:49 上传\n\n\n\n\n\n\n\n\n\n探测天气这个是在做擂台赛作品的时候才做出来的，灵感其实来自于某纯净原版生存服务器。\n\n\n\n\n\n\n\n(我就在下雨的时候拿着弓射了一支箭，然后箭就熄灭了。)\n\n\n\n\n\n\n\n\n然后我把这个小改了一下，把箭换成了盔甲架。\n\n\n加一个计分板：\n/scoreboard objectives add wtime dummy复制代码/scoreboard objectives add stime dummy复制代码/scoreboard objectives add rtime dummy复制代码wtime，用于CB延时\nstime，用于存储天晴时间\nrtime，用于存储下雨时间\n\n\n召唤一个盔甲架，注意这个盔甲架必须露天：\n/summon ArmorStand ~ ~1 ~ {Tags:[\"weather\"],Invulnerable:1b}复制代码\n\n\n下文中出现的Fire:**， 其中的**是负1s，我不知道为什么每次都会变成**\n有毒吧，负1s会变成**，我到现在才发现。\n好吧，基于这个，复制的时候记得把负改成-。\n\n\n\n\n\n高频：\n\n/scoreboard players add @e[tag=weather] wtime 1\n\n/entitydata @e[tag=weather,score_wtime_min=20] {Fire:999s}\n\n/scoreboard players add @e[tag=weather] stime 1 {Fire:998s}\n\n/execute @e[tag=weather,score_stime_min=1,score_stime=1] ~ ~ ~ /execute @e[score_rtime_min=1] ~ ~ ~/tellraw @a {\"text\":\"天晴了。\\n这次的下雨时间：\",\"color\":\"yellow\",\"extra\":[{\"score\":{\"name\":\"@e[tag=weather]\",\"objective\":\"rtime\"}},{\"text\":\"秒\"}]}\n\n/scoreboard players set @e[tag=weather,score_stime_min=1,score_stime=1] rtime 0\n\n/scoreboard players add @e[tag=weather,score_wtime=1] rtime 1 {Fire:负1s}\n\n/execute @e[tag=weather,score_rtime_min=1,score_rtime=1] ~ ~ ~ /execute @e[score_stime_min=1] ~ ~ ~ /tellraw @a {\"text\":\"下雨了。\\n这次的天晴时间：\",\"color\":\"gray\",\"extra\":[{\"score\":{\"name\":\"@e[tag=weather]\",\"objective\":\"stime\"}},{\"text\":\"秒\"}]}\n\n/scoreboard players set @e[tag=weather,score_rtime_min=1,score_rtime=1] stime 0\n\n/scoreboard players set @e[tag=weather,score_wtime_min=20] wtime 0\n\n\n\n\n\n\n\n\n\nphoto.png (20.91 KB, 下载次数: 0)\n\n下载附件\n\n2017-8-18 10:36 上传\n\n\n\n\n\n\n\n这样，下雨的时候就会下分，而天晴的时候分数就会停止增长。\n\n如果你再加入一个雨水计分板，就可以完成雨水收集装置了。\n\n这个的话，完全可以用于实现雨水收集机这个装置。\n(因为炼药锅的收集速度实在是不敢恭维)\n\n\n如果你只想探测是否下雨的话，那么rtime、stime这个计分板就没用了，因为不需要探测下雨/天晴时间，那么可以简化一下：\n\n/scoreboard players add @e[tag=weather] wtime 1\n\n/entitydata @e[tag=weather,score_wtime_min=2] {Fire:999s}\n\n/scoreboard players set @e[tag=weather,score_wtime_min=2] wtime 0\n\n/scoreboard players tag @e[tag=weather] add sunny {Fire:998s}\n\n/scoreboard players tag @e[tag=sunny] remove rainy\n\n/scoreboard players tag @e[tag=weather] add rainy {Fire:负1s}\n\n/scoreboard players tag @e[tag=rainy] remove sunny\n\n\n",
    "replies": [
        {
            "author": "菜鸟、",
            "timestamp": 1467548280,
            "txt_content": "不懂，另外沙发"
        },
        {
            "author": "msydsg",
            "timestamp": 1467619020,
            "txt_content": "可以的！"
        },
        {
            "author": "阿斯顿大法",
            "timestamp": 1467641460,
            "txt_content": "主要就是探测盔甲架是否着火    学到了！{:10_512:}"
        },
        {
            "author": "Sssss...",
            "timestamp": 1468153260,
            "txt_content": "你怎么能自己提升？已举报"
        },
        {
            "author": "hqqaazz",
            "timestamp": 1468195620,
            "txt_content": "Sssss... 发表于 2016-7-10 20:21\n你怎么能自己提升？已举报\n怎么就不能自己提升了←_←"
        },
        {
            "author": "Ant繁星飞跃",
            "timestamp": 1475901780,
            "txt_content": "你无敌了 这么复杂都能想出来 脑洞太大了"
        }
    ]
}