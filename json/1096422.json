{
    "title": "如何关联两个特定的实体方便使用命令时进行选择?",
    "author": "1239081717",
    "replyCount": 4,
    "timestamp": 1596814200,
    "txt_content": "现在有这样的一个需求:实体A是一个会产生某个特定实体的实体,如果实体A产生了实体B,在考虑多人、多实体存在的可能性的情况下，如何将实体A和B较为准确地对应起来并且能够比较方便地在其它命令中进行选择操作？\n\n举例：玩家x射出了一支箭y,现在根据箭y，有什么办法能够在考虑多玩家、多箭支存在的情况下，比较准确地选中它的射出者，也就是玩家x，然后可以比较方便地对x进行操作，例如给x一些经验奖励等。\n我发现这种实体关联的模式在命令编写过程中出现次数比较频繁,而本人命令水平也不怎么样,因此来论坛寻求帮助,希望找到一些解决这类问题的范式.\n\n拓展:上述例子中,箭支y的条件应该还属于比较优越的,因为如果我没有记错的话,箭支是会记录射出者的uuid的,而根据uuid选择实体的方法虽然我还没有实践过,但是似乎并不会太困难(我粗略想象的,也许会很困难,不保证),而如果是没有这种天生记录其它实体uuid的实体,要进行这种关系对应似乎还会更加复杂,我所使用的版本是1.16.1,我发现不知道从什么时候开始命令似乎已经不能够在实体身上添加一些自定义的nbt标签了,如summon minecraft:cow ~ ~ ~ {test:1.0d},这样好像更加会产生一些麻烦,如果有人知道如何解决这种自定义nbt标签的问题,给出了答案,我也很乐意给予回答者一些报酬.\n\n最后:希望回答者能够尽量提供上述问题的较简单的解决办法,毕竟本人能力有限,过于复杂的方法我可能不能保证成功理解......无论如何,谢谢耐心看完我的问题的各位了!\n\n",
    "replies": [
        {
            "author": "SPGoding",
            "timestamp": 1596814200,
            "txt_content": " 你可以新建一个记分板，为所有新生成的 A 实体分配一个独一无二的分数，然后给它们生成的 B 用 scoreboard players operation ... = ... 赋予相同的分数，具有相同分数的实体就具有对应关系了。\n\n附如何找到分数 foo 与执行者一致的 B 实体：\ntag @s add executor\nexecute as @e[tag=B] if score @s foo = @e[limit=1,tag=executor] foo run tag @s add selected\ntag @s remove executor\n# 此时 @e[tag=selected] 可以选中与执行者 foo 分数一致的 B 实体\ntag @e remove selected\n\n而对于箭这类实体就更简单一些了，因为你不用手动为 A 实体分配独一无二的分数了，直接用 execute store 把 4 段 UUID 分别存到四个分数里，再对四个分数进行比较就可以了。"
        },
        {
            "author": "1239081717",
            "timestamp": 1596815340,
            "txt_content": " SPGoding 发表于 2020-8-7 23:30\n 你可以新建一个记分板，为所有新生成的 A 实体分配一个独一无二的分数，然后给它们生成的 B 用 scoreboar ...\n谢谢您的回复,回复的很清楚,一下子就明白了,如果您还有时间的话,我想再问您一个问题,就是我在问题扩展中提到过一些的,我发现有的时候对实体添加自定义的nbt标签会被自然消除,例如summon minecraft:cow ~ ~ ~ {test:1b},但是过了一段时间后我再查看这个牛实体的标签的时候就会发现它的test:1b标签消失了,同样的事情也发生在物品上,但是这个消失也并非是即时的,好像有时会立刻消失,有时又能持续很久,您对这相关的机制有所了解吗,我实在是找不到这方面的资料,甚至不知道该如何搜索...另外,这个问题产生的源头其实是我想对给予玩家的物品添加一些便于筛选的标记,由于give命令中的标签编辑的源标签就直接是tag了,所以无法在更高的层面上给item添加tag等,您有什么解决方法吗?\n当然,上述问题纯属我个人私下追问,并不影响您获得您赢得的原问题报酬,如果您有兴趣的话可以回答,当然也可以不继续回答,无论如何还是要说一声谢谢了."
        },
        {
            "author": "SPGoding",
            "timestamp": 1596818580,
            "txt_content": " 本帖最后由  SPGoding 于 2020-8-8 00:44 编辑 \n1239081717 发表于 2020-8-7 23:49\n谢谢您的回复,回复的很清楚,一下子就明白了,如果您还有时间的话,我想再问您一个问题,就是我在问题扩展中 ...\n只有物品的 tag 标签（也就是 /give 命令里的那个层级）里面可以写自定义的内容。其他地方的自定义内容都会被直接忽略。你可以曲线救国用 summon minecraft:cow ~ ~ ~ {ArmorItems:[{Count:1b,id:\"stone\",tag:{test:1b}}]} 来给实体加自定义标签\n\n不过个人建议是尽量少用 NBT，能用记分板或标签替代的就替代。因为游戏本身在内存里是不用 NBT 的，每次命令使用到 NBT 都会导致游戏重新计算一遍这个东西的 NBT 数据，挺卡的（"
        },
        {
            "author": "1239081717",
            "timestamp": 1596853380,
            "txt_content": " SPGoding 发表于 2020-8-8 00:43\n只有物品的 tag 标签（也就是 /give 命令里的那个层级）里面可以写自定义的内容。其他地方的自定义内容都 ...\n噢,好的,十分感谢!"
        }
    ]
}