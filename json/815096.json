{
    "title": "[原创] [Hocon] 轻量 Hocon 配置库，开源，欢迎试用以及贡献代码！",
    "author": "Himmelt",
    "replyCount": 7,
    "timestamp": 1534471980,
    "txt_content": " 本帖最后由 Himmelt 于 2018-10-30 00:03 编辑 \n\nHocon\n\nSimple Hocon Configuration Library 轻量 Hocon 配置库\n\n\n\n简介\n\n这是一个轻量级的 Hocon 配置库，没有其他依赖项。 注意，这是一个使用 Hocon 格式的配置库，而不是完整的 Hocon 解析库。\n\n该配置库除了使用结点 -- Node 手动获取配置外，还可以使用 @Setting 注解字段，以自动获取配置。 使用 NodeMap 的 void modify(Object target); 方法，可以用结点的值修改目标对象对应名称用 @Setting 注解的字段。 使用 NodeMap 的 void extract(Object source); 方法，可以提取源对象对应名称用 @Setting 注解的字段的值到结点。 另外该库支持对注释内容的翻译，可通过设置翻译器实现本地化效果。\n\n具体使用方法可以查看 Javadoc (是中文的，放心食用)\n\nGithub\n\nMaven 使用 jcenter\n\n<dependency>\n  <groupId>org.soraworld</groupId>\n  <artifactId>hocon</artifactId>\n  <version>1.1.0</version>\n  <type>pom</type>\n</dependency>复制代码\nGradle 使用 jcenter\n\ncompile 'org.soraworld:hocon:1.1.0'复制代码\n手动添加请下载\n\n发行版\n\n示例\n\npublic class Test{\n\n    @Setting(comment = \"comment.lang\")\n    protected String lang = \"zh_cn\";\n    @Setting(comment = \"comment.debug\")\n    protected boolean debug = false;\n\n    protected final Path confile;\n    protected final Options options = Options.build();\n\n    public Manager(Path path) {\n        this.path = path;\n        this.options.setTranslator(this::trans);\n        this.options.registerType(new LocationSerializer());\n        this.confile = path.resolve(plugin.getId().replace(' ', '_') + \".conf\");\n    }\n\n    public boolean load() {\n        try {\n            FileNode rootNode = new FileNode(confile.toFile(), options);\n            rootNode.load(true);\n            rootNode.modify(this);\n            options.setDebug(debug);\n            return true;\n        } catch (Throwable e) {\n            return false;\n        }\n    }\n}复制代码\n\n",
    "replies": [
        {
            "author": "夏逆520",
            "timestamp": 1534482300,
            "txt_content": "试试吧，支持一下"
        },
        {
            "author": "缤纷的烟火",
            "timestamp": 1534482780,
            "txt_content": "支持一下楼主大大"
        },
        {
            "author": "Himmelt",
            "timestamp": 1534485540,
            "txt_content": "缤纷的烟火 发表于 2018-8-17 13:13\n支持一下楼主大大\n感谢支持！凑够十个字"
        },
        {
            "author": "Himmelt",
            "timestamp": 1534486320,
            "txt_content": "夏逆520 发表于 2018-8-17 13:05\n试试吧，支持一下\n谢谢支持"
        },
        {
            "author": "土球球",
            "timestamp": 1534487820,
            "txt_content": "我帮你查了下SpongeAPI 7.1.0-SNAPSHOT和HOCON库之间的依赖关系：\n\n\\--- org.spongepowered:spongeapi:7.1.0-SNAPSHOT\n     +--- org.slf4j:slf4j-api:1.7.25\n     +--- com.google.guava:guava:21.0\n     +--- com.google.errorprone:error_prone_annotations:2.0.15\n     +--- com.google.code.gson:gson:2.8.0\n     +--- org.apache.commons:commons-lang3:3.5\n     +--- com.google.code.findbugs:jsr305:3.0.1\n     +--- com.google.inject:guice:4.1.0\n     |    +--- javax.inject:javax.inject:1\n     |    +--- aopalliance:aopalliance:1.0\n     |    \\--- com.google.guava:guava:19.0 -> 21.0\n     +--- com.github.ben-manes.caffeine:caffeine:2.5.4\n     +--- com.github.ben-manes.caffeine:guava:2.5.4\n     |    \\--- com.github.ben-manes.caffeine:caffeine:2.5.4\n     +--- org.spongepowered:plugin-meta:0.4.1\n     |    +--- com.google.guava:guava:17.0 -> 21.0\n     |    \\--- com.google.code.gson:gson:2.2.4 -> 2.8.0\n     +--- org.spongepowered:configurate-hocon:3.6\n     |    +--- org.spongepowered:configurate-core:3.6\n     |    |    +--- com.google.guava:guava:21.0\n     |    |    \\--- org.checkerframework:checker-qual:2.4.0\n     |    \\--- com.typesafe:config:1.3.1\n     +--- org.spongepowered:configurate-gson:3.6\n     |    +--- org.spongepowered:configurate-core:3.6 (*)\n     |    \\--- com.google.code.gson:gson:2.8.0\n     +--- org.spongepowered:configurate-yaml:3.6\n     |    +--- org.spongepowered:configurate-core:3.6 (*)\n     |    \\--- org.yaml:snakeyaml:1.18\n     +--- com.flowpowered:flow-math:1.0.3\n     +--- com.flowpowered:flow-noise:1.0.1-SNAPSHOT\n     \\--- org.ow2.asm:asm:5.2复制代码\n其中org.spongepowered:configurate-hocon是用到了com.google.guava:guava没错，但它本质是仍然是用HOCON官方维护者提供的com.typesafe:config解析的。这个库我没看到任何相关的依赖。\n\n所以说我觉着楼主完全可以用不拖泥带水的com.typesafe:config来完成任务。另外这里应该就是楼主处理代码解析的部分了吧。我看到楼主似乎是一行一行地解析的，不知道楼主遇到诸如{ a: { b: \"c\" } }这种行，会怎么解析处理呢？\n\n另外如果楼主想要自己写一个解析HOCON代码的工具的话，可以参照一下HOCON的官方规范，也可以尝试看一看我本人参与过的一个瞎糊的翻译。"
        },
        {
            "author": "Himmelt",
            "timestamp": 1534508160,
            "txt_content": " 本帖最后由 Himmelt 于 2018-8-17 22:46 编辑 \nustc_zzzz 发表于 2018-8-17 14:37\n我帮你查了下SpongeAPI 7.1.0-SNAPSHOT和HOCON库之间的依赖关系：\n我本来也打算用 com.typesafe:config 写，但是看了两天感觉有点复杂，于是干脆自己解析吧。另外，我本来就是嫌依赖冲突才打算自己搞一个，所以就不再依赖其他库了。\n\ntypesafe 毕竟是官方，功能也没得说，但不是我需要的，我需要的是一个简单易用的，能保存不是非常复杂的配置（而且我也不建议保存特别复杂的配置）的库。\n\n解析方面，目前的确是按行解析的，也是按行序列化的（估计还有BUG），如果你有兴趣可以参与一下，按字符串解析，我的脑子也差不多快当机了。\n\n最后，这个库的最终目标不是实现一个新的HOCON解析库，而是把简单的配置保存成类似HOCON的格式，同时支持反序列化，如果要实现完整的HOCON 序列化 和 反序列化，那就偏离我的初衷了。"
        },
        {
            "author": "天行",
            "timestamp": 1535279280,
            "txt_content": "\n支持一下！"
        }
    ]
}