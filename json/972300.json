{
    "title": "服务器内距离实体一定距离后实体移动一顿一顿的",
    "author": "hmr",
    "replyCount": 12,
    "timestamp": 1582956660,
    "txt_content": "最近我开了一个我们小团体自己玩的服务器。现在出现了一个现状是：我们在一条短的加速铁轨上放置了一个会循环移动的矿车，但是只要有人离开这个地方几格远后，矿车的移动就会变得一顿一顿的(可以确定不是服务器的配置问题)。我觉得可能是某个服务器优化导致了这个问题的发生，但是我上网查资料改了不少服务器相关的设定还是不行。希望能有大佬帮助！！！\n\n\n\n\n\n\nkc.gif\n(935.02 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2020-2-29 14:11 上传\n\n\n\n\n\n\n\n\n矿车移动如图\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "Doomsday_Envoy",
            "timestamp": 1582956660,
            "txt_content": "hmr 发表于 2020-2-29 15:26\n是的，你说的这个Tiqulity模组之前也是有的，我直接从服务器端把它删除了，现在服务器端的优化插件只有3 ...\n嗷，那应该就是sponge的配置文件的锅了。在\\config\\sponge\\global.conf里面找到entity-activation-range {}，把minecraft{}或者全局的misc的值拉大到48、64或者更高，但是不建议超过128。如果你安装了其他模组的话，可能也有misc，后者应全部保持较低的水平，16、8、4等。\n\n只调高misc即可，矿车应该包含在这里。aquatic、creature、monster都应该低一些。ambient不清楚，misc无效的话再考虑调高。当然misc高的话，掉落物也算misc里面，所以会卡，建议扫地插件勤快一点，或者用sponge的功能来合并掉落物，路径依然在global.conf，item-merge-radius的值建议3或者4（别高太多，可能崩）。"
        },
        {
            "author": "hmr",
            "timestamp": 1582956720,
            "txt_content": "点击图片可以看动图"
        },
        {
            "author": "CrazyPeanut",
            "timestamp": 1582956900,
            "txt_content": "server.properties  文件中 view-distance改大一点试试？\n\n其他配置文件里面还有一些 spigot.yml 什么的 看什么端"
        },
        {
            "author": "hmr",
            "timestamp": 1582957260,
            "txt_content": "CrazyPeanut 发表于 2020-2-29 14:15\nserver.properties  文件中 view-distance改大一点试试？\n\n其他配置文件里面还有一些 spigot.yml 什么的 看 ...\n是海绵端,视野距离设置的是12"
        },
        {
            "author": "Sssss...",
            "timestamp": 1582957320,
            "txt_content": "确定服务器的TPS不低吗\n\n修改服务器最高视距试试"
        },
        {
            "author": "Xiaoxinzhi",
            "timestamp": 1582957740,
            "txt_content": " 本帖最后由 Xiaoxinzhi 于 2020-2-29 14:31 编辑 \n    entity-activation-range:\n      water: 24\n      animals: 24\n      monsters: 24\n      raiders: 24\n      misc: 12复制代码\n就是这个，生物活动距离，弄低点防止卡服......抱歉，我不了解海绵端....又说废话了"
        },
        {
            "author": "Doomsday_Envoy",
            "timestamp": 1582958040,
            "txt_content": " 本帖最后由 Doomsday_Envoy 于 2020-2-29 14:44 编辑 \n\n应该确实是优化插件的问题，玩家远离后区块开始被回收。请给出优化插件列表，比如foamfix之类的。或者你需要在附近利用命名牌命名实体来起到刷新区块的作用。另外sponge的话，server.properties里设置的视距(view-distance)会被sponge覆盖掉，你需要在config\\sponge下的global.conf设置；以及该目录下\\worlds里面还能对每个维度以及同纬度的世界单独设置，后者能再次覆盖global.conf的设置。"
        },
        {
            "author": "hmr",
            "timestamp": 1582958640,
            "txt_content": "Doomsday_Envoy 发表于 2020-2-29 14:34\n应该确实是优化插件的问题，玩家远离后区块开始被回收。请给出优化插件列表，比如foamfix之类的。或者你需 ...\n服务器之前是有foamfix，我也怕是这个有问题就直接把这个删除了。是不是只是删除mod不行呢\n还有上面几楼提到的实体激活范围我甚至调到4096这个数值了，也没有用"
        },
        {
            "author": "Doomsday_Envoy",
            "timestamp": 1582959180,
            "txt_content": "hmr 发表于 2020-2-29 14:44\n服务器之前是有foamfix，我也怕是这个有问题就直接把这个删除了。是不是只是删除mod不行呢\n还有上面几楼 ...\n个人关于视距的回答还在码字的时候你就回复了可能没看到，water、animals、monsters这些的视距的影响和矿车无关，他们的视距应该调低。不过主要问题应该是玩家的视距，关于这一点我已经在上面回答了。\n\n另外你的服务器是否有安装Tiqulity模组https://www.mcbbs.net/thread-896106-1-1.html，它也会对方块、实体的运算等问题进行优化，当优化过头就会产生你的情况。如果有其他优化的模组也请再列出。"
        },
        {
            "author": "hmr",
            "timestamp": 1582961160,
            "txt_content": "Doomsday_Envoy 发表于 2020-2-29 14:53\n个人关于视距的回答还在码字的时候你就回复了可能没看到，water、animals、monsters这些的视距的影响和矿 ...\n是的，你说的这个Tiqulity模组之前也是有的，我直接从服务器端把它删除了，现在服务器端的优化插件只有3个\nAI lprovement这个是提升怪物的 、phosphor这个是改善光照算法的、randompatches这个是防止进服时卡顿造成被服务器误判踢出的。除了这三个就没有了，大佬说的这几个插件之前确实也有，但是我都删除掉了，然后也重启服务器了。现在我不清楚是不是开启过服务器后，即使之后再删除这些优化mod也不影响之前已经优化过的效果"
        },
        {
            "author": "hmr",
            "timestamp": 1582963200,
            "txt_content": "Doomsday_Envoy 发表于 2020-2-29 15:49\n嗷，那应该就是sponge的配置文件的锅了。在\\config\\sponge\\global.conf里面找到entity-activation-range  ...\n弄好啦大佬！ 确实是海绵端自带的的sponge配置文件的锅。在global.conf里我找到了如下的规则：\n 其中我标红的就是箱子矿车范围，可以看到只有8格。考虑到我的服务器配置不算低，加上只有我们小团体4个人玩，我直接就把这项配置的enabled=true改为false了，重启服务器进游戏直接就好了。只不过服务器CPU的占用率从原来的6%提升到了10%，对性能是有影响的，但是对我这种情况来说问题不大。 给你最佳答案了\nIf 'false', entity activation rules for this mod will be ignored and always tick.\n                enabled=false\n                entities {\n                    \"armor_stand\"=4\n                    armorstand=8\n                    arrow=32\n                    bat=24\n                    blaze=24\n                    cavespider=24\n                    \"chest_minecart\"=8\n                    chicken=8\n                    cow=16\n                    creeper=24\n                    donkey=16\n                    enderman=24\n                    fishinghook=8\n                    ghast=24\n                    horse=16\n                    husk=24\n                    item=8\n                    \"item_frame\"=6\n                    lavaslime=24\n                    llama=24\n                    \"magma_cube\"=16\n                    minecartchest=8\n                    minecartrideable=8\n                    parrot=16\n                    pig=16\n                    pigzombie=24\n                    rabbit=16\n                    sheep=16\n                    skeleton=24\n                    \"skeleton_horse\"=16\n                    slime=16\n                    spider=24\n                    squid=8\n                    stray=24\n                    villager=8\n                    witch=24\n                    witherskeleton=24\n                    wolf=16\n                    \"xp_orb\"=16\n                    xporb=8\n                    zombie=24\n                    \"zombie_pigman\"=24\n                    \"zombie_villager\"=24\n                    zombievillager=24"
        },
        {
            "author": "hmr",
            "timestamp": 1582963380,
            "txt_content": "Doomsday_Envoy 发表于 2020-2-29 14:53\n个人关于视距的回答还在码字的时候你就回复了可能没看到，water、animals、monsters这些的视距的影响和矿 ...\n我看到大佬的好友申请了，但是提示我没权限加好友  PS：我的处女贴是交代在这里了23333"
        }
    ]
}