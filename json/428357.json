{
    "title": "我的世界（Minecraft）1.8 mod 制作——为你的mod添加自定义音效",
    "author": "zvvzxzko2006",
    "replyCount": 7,
    "timestamp": 1427879040,
    "txt_content": "        我的世界（Minecraft——MC）1.8客户端的所有音效全部都放置在.minecraft/assets/sounds目录下。MC主程序通过读取.minecraft/assets目录下的sounds.json文件导入声音和音效。同样的，使用ForgeAPI制作的mod也是可以通过编辑自定义的sounds.json文件实现导入自定声音文件。\n        具体欢迎查看我的博客：\n        http://blog.csdn.net/zvvzxzko2006/article/details/44804681\n        \n        1 实现原理 \n\n笔者在制作MC 怪物实体（Mob Entity）的过程中，发现制作出来的怪物不能发出预先设定好的声音，在受到攻击/死亡/呼吸时都没有按照设定的发声。经过查阅国外的一些较新的教程发现，这主要是由于按照要求导入声音文件造成的。从1.7开始，MC使用sounds.json文件导入声音的方式导入外部声音。所以制作mod的时候，只需要按照MC规定格式编写sounds.json文件就可以实现导入外部声音。\n\n1.1 sounds.json文件格式\n\nsounds.json官方文件目录为.minecraft/assets/sounds.json。读者可以先自行查看一下该文件的内容。这里先列出标准json文件内容格式。\n \n{  \n  \"音效1\" : {  \n    \"category\" : \"音效类型\",   \n    \"sounds\" : [  \n      \"短音1子路径\",  \n      \"短音2子路径\",  \n      .......,  \n      {  \n        \"name\":\"长音1子路径\",  \n        \"stream\":true  \n      } ,  \n      {  \n        \"name\" : \"长音2子路径\",  \n        \"stream\" : true  \n      }  \n    ]  \n  } ,  \n  \"音效2\":{  \n    \"category\" : \"音效类型\",   \n    \"sounds\" : [  \n      \"短音1子路径\",  \n      \"短音2子路径\",  \n      .......,  \n      {  \n        \"name\" : \"长音子路径\",  \n        \"stream\" : true  \n      }  \n    ]  \n  } ,  \n  .............. ,  \n  \"音效n\":{  \n    \"category\" : \"音效类型\",   \n    \"sounds\" : [  \n      \"短音1子路径\",  \n      \"短音2子路径\",  \n      .......,  \n      {  \n        \"name\" : \"长音子路径\",  \n        \"stream\" : true  \n      }  \n    ]  \n  }  \n}  \n复制代码\n\n上面列即为一个sounds.json 文件的标准格式。可以看出，通过此文件可以随意导入很多个自定的音效。\n\n其中，\n\n view plaincopy\n\"音效1\" : {  \n“音效1”是想要加入的音效的名字，这个名字是在编写mod时使用的，是导入后，游戏程序可以识别的音效名字。复制代码\n\n\"category\" : \"音效类型\",   复制代码\n\n“音效类型”是指加入的音效的基本类型，MC为音效定义了几个基本的类型，包括：\n\"ambient\"、\"weather\"、\"player\"、\"neutral\"、\"hostile\"、\"block\"、\"master\"、\"record\"、\"music\"。\n具体需要根据用途设置此选项，例如：音效是敌对生物发出，则选为\"hostile\",如果是玩家发出则选为\"player\"，如果是唱片音乐或游戏背景音乐则选为\"music\"。\n\n\"短音1子路径\",  \n\"短音2子路径\",  复制代码\n这里的子路径，指的是声音文件（*.ogg）的具体存放在什么位置。举个例子如图所示，\n<br><br> \n\n\nbreathe1.ogg 文件的子路径就是“mob/breathe1”；\n\ndeath1.ogg 文件的子路径就是\"mob/death1\"\n\nhit1.ogg文件的子路径就是“mob/hit”\n\n实际上，这里的“子路径”实际上就是声音文件在modname/sounds目录下的相对位置。modname 就是MOD的文件夹名字。\n\n\n对于像游戏背景音、唱片等比较长的音乐，则应该像这样加入声音路径\n\n\n{  \n  \"name\" : \"长音子路径\",  \n  \"stream\" : true  \n}  复制代码\n具体怎么去理解呢？实际上，在编程语言（c、c++、java等）中，用大括号扩起来的多条语句称作一个\"程序块\"。一个程序块是可以被视为一个语句的。在看前面的程序如\n\n\n\"短音1子路径\",  复制代码\n实际上是相当于\n\n{  \n  \"name\" : \"短音子路径\",  \n  \"stream\" : false  \n}  复制代码\n这个语句块的，可以发现，实际上，就是通过设置\"stream\" 的false/true来设置长短音的但是这样写起来太过麻烦，所以干脆用一句写出来。\n\n此外需要注意的是，添加一个外部声音，不代表仅仅添加一个声音文件，相反的，添加的仅仅是一种声音，举个例子，如果要为僵尸添加受到攻击时发出的声音，则我们可以通过加入一段这样的代码\n\n\n\"mob.zombie.hurt\": {  \n  \"category\": \"hostile\",  \n  \"sounds\": [  \n    \"mob/zombie/hurt1\",  \n    \"mob/zombie/hurt2\"  \n  ]  \n},  复制代码\n这样，僵尸受到攻击的时候会调用\"mob.zombie.hurt\"音效，而具体播放的声音文件有两个“mob/zombie/hurt1”和“mob/zombie/hurt2”，这时会随机播放其中一个声音，而不是都播放。具体不细说，读者自行去理解。\n最后贴上我写好的一个sounds.json文件。\n\n\n{  \n  \"mob.hit\": {  \n    \"category\": \"neutral\",  \n    \"sounds\": [  \n       \"mob/hit1\"  \n    ]  \n  },  \n  \"mob.breathe\": {  \n    \"category\": \"neutral\",  \n    \"sounds\": [  \n        \"mob/breathe1\"  \n    ]  \n  },  \n  \"mob.death\": {  \n    \"category\": \"neutral\",  \n    \"sounds\": [  \n        \"mob/death1\"  \n    ]  \n  }  \n}  复制代码\n\n这些音效都是专门为笔者制作的一个小中立怪提供。贴个此mob的图\n\n<br><br>\n\n",
    "replies": [
        {
            "author": "cowb",
            "timestamp": 1428335340,
            "txt_content": "很好的教程帖，学习了"
        },
        {
            "author": "zvvzxzko2006",
            "timestamp": 1428391980,
            "txt_content": "cowb 发表于 2015-4-6 23:49\n很好的教程帖，学习了\n分享一下经验罢了，让感兴趣的人更加方便，教程的话不敢当啊，毕竟没有讲任何原理性的东西"
        },
        {
            "author": "cowb",
            "timestamp": 1428406380,
            "txt_content": "zvvzxzko2006 发表于 2015-4-7 15:33\n分享一下经验罢了，让感兴趣的人更加方便，教程的话不敢当啊，毕竟没有讲任何原理性的东西 ...\n都是固定的逻辑.但是音效可以添加很多种"
        },
        {
            "author": "zvvzxzko2006",
            "timestamp": 1428423300,
            "txt_content": " 本帖最后由 zvvzxzko2006 于 2015-4-8 10:03 编辑 \ncowb 发表于 2015-4-7 19:33\n都是固定的逻辑.但是音效可以添加很多种\nLZ表示刚上手感觉JSON文件写起来特别扭，而且容易出现语法错误，不过一旦熟悉语法后，觉得还是蛮好用的\n\nPS：LZ说他有意制作一个JSON文件自动生成软件，不知道有人需要么？"
        },
        {
            "author": "拘束",
            "timestamp": 1433499600,
            "txt_content": "zvvzxzko2006 发表于 2015-4-8 00:15\nLZ表示刚上手感觉JSON文件写起来特别扭，而且容易出现语法错误，不过一旦熟悉语法后，觉得还是蛮好用的\n\nP ...\n需要！{:10_512:}好写的话就分享一下吧，不好写就算了.."
        },
        {
            "author": "zvvzxzko2006",
            "timestamp": 1433512560,
            "txt_content": "拘束 发表于 2015-6-5 18:20\n需要！好写的话就分享一下吧，不好写就算了..\n前一阵子想写一个，结果没人回应，这几天备考却没时间弄，等考完试的吧"
        },
        {
            "author": "拘束",
            "timestamp": 1433551680,
            "txt_content": "zvvzxzko2006 发表于 2015-6-5 21:56\n前一阵子想写一个，结果没人回应，这几天备考却没时间弄，等考完试的吧 ...\n恩好吧，支持{:10_512:}"
        }
    ]
}