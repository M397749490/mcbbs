{
    "title": "[编程]JdbcConnectionBridge —— 使用HikariCP连接池建立MySQL连接[全版本]",
    "author": "zhanshi123",
    "replyCount": 19,
    "timestamp": 1546764900,
    "txt_content": " 本帖最后由 zhanshi123 于 2020-3-10 08:31 编辑 \n\nJdbcConnectionBridge\n此插件为个人使用的支持库，用于建立HikariCP的MySQL连接，并且将类库打包到一个插件中，本人的插件会经常用到以减少其他插件大小，便捷管理连接，当然，欢迎其他人使用\n使用方法非开发者只需将插件装入服务器，并且配置config.yml中的数据库地址对于开发者Connection connection = JdbcConnectionBridge.getConnectionPoolHandler().getConnection(\"default\",plugin);复制代码即可获取ConnectiongetConnection方法的参数，可以填写连接名，对应配置文件中的mysql地址节点，例如默认配置中的defaultplugin是你插件的主类，用于统计数据同时插件还提供SQLBuilder，具体用法介绍:https://gitee.com/Soldier233/JdbcConnectionBridge/blob/master/src/main/java/me/zhanshi123/jdbcconnectionbridge/sqlbuilder/SQLBuilder.java\n\n下载地址\nhttps://dl.zhanshi123.me/#JdbcConnectionBridge\n\n\n\n本插件所用代码部分来自其他开源或闭源(已授权)作品 HikariCP\n",
    "replies": [
        {
            "author": "lyxycraft",
            "timestamp": 1551084480,
            "txt_content": "这个怎么用呢？放在哪了？BC？"
        },
        {
            "author": "zhanshi123",
            "timestamp": 1551105780,
            "txt_content": "lyxycraft 发表于 2019-2-25 16:48\n这个怎么用呢？放在哪了？BC？\n本插件为spigot插件，并且只是一个前置，需要其他插件配合使用，装在同一个服务器里"
        },
        {
            "author": "lyxycraft",
            "timestamp": 1551166980,
            "txt_content": "zhanshi123 发表于 2019-2-25 22:43\n本插件为spigot插件，并且只是一个前置，需要其他插件配合使用，装在同一个服务器里 ...\n哦！谢谢"
        },
        {
            "author": "Flous",
            "timestamp": 1564164120,
            "txt_content": "请问怎么填数据库连接信息"
        },
        {
            "author": "zhanshi123",
            "timestamp": 1564189080,
            "txt_content": "Flous 发表于 2019-7-27 02:02\n请问怎么填数据库连接信息\n按照配置文件\n分别填写地址\n用户名\n密码\n一般情况只需填写default的信息"
        },
        {
            "author": "a154477274",
            "timestamp": 1587476700,
            "txt_content": "我用这个插件得话，不知道是否因为max lifetime设置得为30minutes\n如果长期挂着服务器，会提示Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl"
        },
        {
            "author": "37510932",
            "timestamp": 1587477720,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "zhanshi123",
            "timestamp": 1587480360,
            "txt_content": "a154477274 发表于 2020-4-21 21:45\n我用这个插件得话，不知道是否因为max lifetime设置得为30minutes\n如果长期挂着服务器，会提示Failed to va ...\n完整报错发一下"
        },
        {
            "author": "a154477274",
            "timestamp": 1587537960,
            "txt_content": "zhanshi123 发表于 2020-4-21 22:46\n完整报错发一下\n[01:54:35] [luckperms-scheduler-worker-0/WARN]: [me.lucko.luckperms.lib.hikari.pool.PoolBase] luckperms-hikari - Failed to validate connection me.lucko.luckperms.lib.mysql.jdbc.JDBC4Connection@51f1c394 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.\n\n[02:24:10] [Craft Scheduler Thread - 151/WARN]: [com.zaxxer.hikari.pool.PoolBase] HikariPool-1 - Failed to validate connection com.mysql.jdbc.JDBC4Connection@76e48511 (No operations allowed after connection closed.)\n\n[03:33:44] [Server thread/WARN]: The last packet successfully received from the server was 3,953,113 milliseconds ago.  The last packet sent successfully to the server was 3,953,149 milliseconds ago.\n[03:33:44] [Server thread/WARN]:         at sun.reflect.GeneratedConstructorAccessor180.newInstance(Unknown Source)\n[03:33:44] [Server thread/WARN]:         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n[03:33:44] [Server thread/WARN]:         at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n[03:33:44] [Server thread/WARN]:         at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)\n[03:33:44] [Server thread/WARN]:         at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:990)\n[03:33:44] [Server thread/WARN]:         at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3746)\n[03:33:44] [Server thread/WARN]:         at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2509)\n[03:33:44] [Server thread/WARN]:         at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2680)\n[03:33:44] [Server thread/WARN]:         at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2484)\n[03:33:44] [Server thread/WARN]:         at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1858)\n[03:33:44] [Server thread/WARN]:         at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1966)\n[03:33:44] [Server thread/WARN]:         at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)\n[03:33:44] [Server thread/WARN]:         at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)\n[03:33:44] [Server thread/WARN]:         at me.zhanshi123.globalprefix.Database.getData(Database.java:82)\n[03:33:44] [Server thread/WARN]:         at me.zhanshi123.globalprefix.placholder.PlaceholderHook.onRequest(PlaceholderHook.java:53)\n[03:33:44] [Server thread/WARN]:         at me.clip.placeholderapi.PlaceholderAPI.setPlaceholders(PlaceholderAPI.java:237)\n[03:33:44] [Server thread/WARN]:         at me.clip.placeholderapi.PlaceholderAPI.setPlaceholders(PlaceholderAPI.java:377)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.shared.PluginHooks.PlaceholderAPI_setPlaceholders(PluginHooks.java:238)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.platforms.bukkit.Main$31.get(Main.java:566)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.shared.placeholders.PlayerPlaceholder.getValue(PlayerPlaceholder.java:24)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.shared.placeholders.Placeholder.set(Placeholder.java:31)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.shared.Property.isUpdateNeeded(Property.java:89)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.shared.Property.get(Property.java:71)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.shared.ITabPlayer.buildTeamName(ITabPlayer.java:383)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.shared.ITabPlayer.init(ITabPlayer.java:62)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.platforms.bukkit.TabPlayer.<init>(TabPlayer.java:40)\n[03:33:44] [Server thread/WARN]:         at me.neznamy.tab.platforms.bukkit.Main.a(Main.java:115)\n[03:33:44] [Server thread/WARN]:         at com.destroystokyo.paper.event.executor.asm.generated.GeneratedEventExecutor741.execute(Unknown Source)\n[03:33:44] [Server thread/WARN]:         at org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:70)\n[03:33:44] [Server thread/WARN]:         at co.aikar.timings.TimedEventExecutor.execute(TimedEventExecutor.java:78)\n[03:33:44] [Server thread/WARN]:         at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62)\n[03:33:44] [Server thread/WARN]:         at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:513)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.PlayerList.onPlayerJoin(PlayerList.java:370)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.PlayerList.a(PlayerList.java:183)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.LoginListener.b(LoginListener.java:178)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.LoginListener.e(LoginListener.java:68)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.NetworkManager.a(NetworkManager.java:273)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.ServerConnection.c(ServerConnection.java:150)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.MinecraftServer.D(MinecraftServer.java:948)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.DedicatedServer.D(DedicatedServer.java:423)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.MinecraftServer.C(MinecraftServer.java:774)\n[03:33:44] [Server thread/WARN]:         at net.minecraft.server.v1_12_R1.MinecraftServer.run(MinecraftServer.java:666)\n[03:33:44] [Server thread/WARN]:         at java.lang.Thread.run(Thread.java:748)\n\n\n[03:33:44] [Server thread/WARN]: [com.zaxxer.hikari.pool.PoolBase] HikariPool-2 - Failed to validate connection com.mysql.jdbc.JDBC4Connection@b91132e (No operations allowed after connection closed.)\n\n[03:33:54] [Craft Scheduler Thread - 233/WARN]: [com.zaxxer.hikari.pool.ProxyConnection] HikariPool-1 - Connection com.mysql.jdbc.JDBC4Connection@775ae62c marked as broken because of SQLSTATE(08S01), ErrorCode(0)\ncom.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\n\n[03:33:45] [Craft Scheduler Thread - 235/INFO]: [MiaoBoard] [Replace] PAPI变量 &l※ &7点券: &e%playerpoints_points% 替换时发生错误 java.lang.NullPointerException: null 请检查 PlaceholderAPI 扩展配置!\n[03:33:45] [Craft Scheduler Thread - 235/WARN]: java.lang.NullPointerException\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at lib.PatPeter.SQLibrary.Database.prepare(Database.java:291)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at org.black_ixx.playerpoints.storage.models.MySQLStorage.getPoints(MySQLStorage.java:85)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at org.black_ixx.playerpoints.storage.StorageHandler.getPoints(StorageHandler.java:39)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at org.black_ixx.playerpoints.PlayerPointsAPI.look(PlayerPointsAPI.java:102)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at com.extendedclip.papi.expansion.playerpoints.PlayerPointsExpansion.getPoints(PlayerPointsExpansion.java:73)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at com.extendedclip.papi.expansion.playerpoints.PlayerPointsExpansion.onPlaceholderRequest(PlayerPointsExpansion.java:65)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at me.clip.placeholderapi.PlaceholderHook.onRequest(PlaceholderHook.java:38)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at me.clip.placeholderapi.PlaceholderAPI.setPlaceholders(PlaceholderAPI.java:237)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at me.clip.placeholderapi.PlaceholderAPI.setPlaceholders(PlaceholderAPI.java:377)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at \\?.?.?.MiaoBoard.?ˊ.?(Replace.java:41)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at \\?.?.?.MiaoBoard.?ˊ.?(Replace.java:35)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at \\?.?.?.MiaoBoard.?ˊ.?(Replace.java:29)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at \\?.?.?.MiaoBoard.??.onBodyUpdate(SelfListener.java:33)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at com.destroystokyo.paper.event.executor.asm.generated.GeneratedEventExecutor55.execute(Unknown Source)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:70)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at co.aikar.timings.TimedEventExecutor.execute(TimedEventExecutor.java:74)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:513)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at \\?.?.?.MiaoBoard.??.?(SidebarBoard.java:43)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at org.bukkit.craftbukkit.v1_12_R1.scheduler.CraftTask.run(CraftTask.java:64)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at org.bukkit.craftbukkit.v1_12_R1.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:52)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at com.destroystokyo.paper.ServerSchedulerReportingWrapper.run(ServerSchedulerReportingWrapper.java:22)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n[03:33:45] [Craft Scheduler Thread - 235/WARN]:         at java.lang.Thread.run(Thread.java:748)"
        },
        {
            "author": "a154477274",
            "timestamp": 1587538140,
            "txt_content": "数据库是没问题得，开启服务端都没问题，就是时间久了以后，就会出现这些报错，数据库得最**接数已经增加到了50000了，wait time设置了8小时，还是不能解决这个问题"
        },
        {
            "author": "zhanshi123",
            "timestamp": 1587564000,
            "txt_content": "a154477274 发表于 2020-4-22 14:46\n[01:54:35] [luckperms-scheduler-worker-0/WARN]: [me.lucko.luckperms.lib.hikari.pool.PoolBase] luck ...\n与本插件无关"
        },
        {
            "author": "a154477274",
            "timestamp": 1587759780,
            "txt_content": "[04:19:40] [Craft Scheduler Thread - 73/WARN]: [com.zaxxer.hikari.pool.PoolBase] HikariPool-1 - Failed to validate connection com.mysql.jdbc.JDBC4Connection@2b9f9799 (No operations allowed after connection closed.)"
        },
        {
            "author": "yangou11020",
            "timestamp": 1587760140,
            "txt_content": "6666666666"
        },
        {
            "author": "zhanshi123",
            "timestamp": 1587811500,
            "txt_content": "a154477274 发表于 2020-4-25 04:23\n[04:19:40] [Craft Scheduler Thread - 73/WARN]: [com.zaxxer.hikari.pool.PoolBase] HikariPool-1 - Fail ...\n这只是一个支持库\n别的插件可能会包含同样的支持库\n与本插件无任何关系"
        },
        {
            "author": "思念化作海",
            "timestamp": 1590988560,
            "txt_content": "加载时出现这个是正常的吗\n[13:14:54] [Server thread/INFO]: [JdbcConnectionBridge] Enabling JdbcConnectionBridge v1.3\n[13:14:54] [Server thread/WARN]: SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\n[13:14:54] [Server thread/WARN]: SLF4J: Defaulting to no-operation (NOP) logger implementation\n[13:14:54] [Server thread/WARN]: SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.复制代码"
        },
        {
            "author": "zhanshi123",
            "timestamp": 1591021200,
            "txt_content": "折叠 发表于 2020-6-1 13:16\n加载时出现这个是正常的吗\n正常"
        },
        {
            "author": "无目标徘徊",
            "timestamp": 1593849660,
            "txt_content": "是不是不支持1.12.2，在1.12.2cat端上无法使用，报错"
        },
        {
            "author": "zhanshi123",
            "timestamp": 1593873720,
            "txt_content": "无目标徘徊 发表于 2020-7-4 16:01\n是不是不支持1.12.2，在1.12.2cat端上无法使用，报错\ncat的bug"
        },
        {
            "author": "Sky_God_",
            "timestamp": 1594740120,
            "txt_content": "zhanshi123 发表于 2020-6-1 22:20\n正常\n能不能出一个这样的教程？真的十分需要..."
        }
    ]
}