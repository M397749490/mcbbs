{
    "title": "关于Mod模块化开发",
    "author": "src_resources",
    "replyCount": 3,
    "timestamp": 1595603280,
    "txt_content": " 本帖最后由 src_resources 于 2020-7-24 23:13 编辑 \n\n现在MC 1.15.2版本开发Forge Mod。认真学习并参考了Forestry模块化的相关代码后，想在自己的Mod开发中借鉴相关模块化实现思路。求助如下几个问题：\n当Mod的代码实现模块化分散开来后，如何使得每一模块像Mod一样，有自己的生命周期；这些生命周期如何规划才合理（因为高版本FML机制大改，没有了诸如preInit、init和postInit一类的流程结构，而是common setup、client setup等，如何将这些Mod的生命周期事件合理布局，再一一下发到各个Module上）。各个模块有自己单独的blocks、items、entity等需要注册的游戏元素，Mod如何将这些blocks和items等统一注册、统一管理，即建立一套Mod级别的Registry，再将这个Registry合并入FML的Registry。看了这个教程的代码，仅仅是通过DeferredRegister实现，但如果模块化之后，各个模块都去创建自己的DeferredRegister并自行注册，难免会造成无法在Mod层面统一进行管理。（对于Forestry，是通过一套Feature系统和ModFeatureRegistry解决了这一问题，但苦于本人没有经验和精力对这种大型Mod进行调试，故不能彻悟实现原理。）为了各模块之间的通讯和合作、以及Mod传递事件给各模块，是否有必要建立一个或多个EventBus来达到此目的，还是通过函数回调机制来实现即可；对于Mod传递事件给模块，是否有必要建立Listener机制。对于WorldSavedData、SimpleChannel一类的资源，是否需要Mod层面统一进行管控。如果有需要，又如何与各模块之间进行联动，将属于各模块的数据和资源下发之，又保持Mod层面对它们的掌管权。\n\n",
    "replies": [
        {
            "author": "FledgeXu",
            "timestamp": 1595685900,
            "txt_content": " 本帖最后由 FledgeXu 于 2020-7-25 22:06 编辑 \n\n1. 模块化你想怎么拆就怎么拆。\n2. 模块化是用来解决问题的，你连问题都没遇见，只是单纯为了模块化而模块化，这种行为不可取。\n3. 你这个行为叫做「过度设计」，典型的软件工程错误"
        },
        {
            "author": "RarityEG",
            "timestamp": 1595689200,
            "txt_content": "解决方案解决方案，就是遇到问题再解决的。\n而且forge对常见方法进行封装，你不需要管它是怎么实现的。\n过度设计——说得对，需要时才模块化，仅仅是你的Mod大到无法直接管理时才开始模块化。\n这就有点像你测试一下HelloWorld但是却花费大量时间写测试用例。"
        },
        {
            "author": "src_resources",
            "timestamp": 1595762940,
            "txt_content": "skjsjhb 发表于 2020-7-25 23:00\n解决方案解决方案，就是遇到问题再解决的。\n而且forge对常见方法进行封装，你不需要管它是怎么实现的。\n过 ...\n其实我的设计意图并没有强求“过度”的意思。\n因为这个Mod可能会是一个大型Mod，内部逻辑可能比较复杂。这就需要详细的规划方案。\n我想出“模块化”设计的意图，就是先捋出一个实现框架，再沿着这个框架码实现。\n如果没有一个框架规定一下大方向，就可能导致内部实现逻辑紊乱，不利于解耦合。\n\n\n"
        }
    ]
}