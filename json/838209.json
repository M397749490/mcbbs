{
    "title": "关于字符串中的字符串读取",
    "author": "轻光233",
    "replyCount": 5,
    "timestamp": 1547812440,
    "txt_content": "假设有这么一个字符串\n\"您好{options{abc}}评论了您的{options{def}}\"\n我该怎么取出options{abc},options{def},abc,def这四个包在大括号里的字符串\n求大佬解答",
    "replies": [
        {
            "author": "chyx",
            "timestamp": 1547824200,
            "txt_content": " 本帖最后由 chyx 于 2019-1-18 23:17 编辑 \n\n像这样？\n>>> import re\n>>> re.findall('{([^{}]*(?:{([^{}]*)}[^{}]*)?)}',\"您好{options{abc}}评论了您的{options{def}}\")\n[('options{abc}', 'abc'), ('options{def}', 'def')]"
        },
        {
            "author": "chyx",
            "timestamp": 1547891940,
            "txt_content": " 本帖最后由 chyx 于 2019-1-19 18:02 编辑 \n\n@a6809936 \n                        \n这样怎么样？这样就能支持多层括号了。。。\n>>>def bra(text):\n        s=[];p=[]\n        for i,j in  enumerate(text):\n                if j==\"{\":\n                        s.append(i)\n                elif j==\"}\":\n                        p.append(text[s.pop()+1:i])\n        return p\n\n\n\n>>> bra(\"您好{options{abc}}评论了您的{options{def}}\")\n['abc', 'options{abc}', 'def', 'options{def}']"
        },
        {
            "author": "。—。",
            "timestamp": 1547892420,
            "txt_content": "chyx 发表于 2019-1-19 17:59\n@a6809936 \n                        \n这样怎么样？这样就能支持多层括号了。。。\n思路确实是这样，能比正则更省资源，但是字符串模板是很多语言里自带的功能鸭"
        },
        {
            "author": "marioplus",
            "timestamp": 1547977920,
            "txt_content": " 本帖最后由 marioplus 于 2019-1-20 18:08 编辑 \n\n// java8\npackage com.demo;\n\nimport java.util.Arrays;\nimport java.util.Random;\nimport java.util.UUID;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class Test {\n    public static void main(String[] args) {\n\n        String str = makeData(10);\n        System.out.println(str);\n        Pattern pattern = Pattern.compile(\"(?<=\\\\{).*?\\\\{(.*?)}(?=[{}])\");\n        Matcher matcher = pattern.matcher(str);\n        while (matcher.find()) {\n            System.out.println(matcher.group() + \"\\t\" + matcher.group(1));\n        }\n    }\n\n    public static String makeData(int count) {\n        StringBuilder str = new StringBuilder();\n        Random r = new Random();\n        for (int i = 0; i < count; i++) {\n            str.append(spliceStr(\"您好{\", randStr(r), \"{\", randStr(r), \"}}评论了您的{\", randStr(r), \"{\", randStr(r), \"}}\\n\"));\n        }\n        return str.toString();\n    }\n\n    public static String randStr(Random r) {\n        int len = r.nextInt(7) + 1;\n        return UUID.randomUUID().toString().substring(0, len);\n    }\n\n    public static String spliceStr(String... strings) {\n        return Arrays.stream(strings).reduce((s1, s2) -> s1 + s2).orElse(\"\");\n    }\n}\n复制代码\n\n输出\n\n您好{0d5{4bed8}}评论了您的{b88c2df{f9f4}}\n您好{bf19f{2bcb42}}评论了您的{09{7}}\n您好{59a9294{590d}}评论了您的{7fb76{49}}\n您好{fa{13}}评论了您的{a948596{c}}\n您好{941a{e435}}评论了您的{33a{20738fc}}\n您好{11fc{da}}评论了您的{47be75{9a20543}}\n您好{388f{1d5f}}评论了您的{f055558{f1e}}\n您好{a5e870{b}}评论了您的{fb{4}}\n您好{9b9{001c}}评论了您的{a58d{b}}\n您好{372c93{3c}}评论了您的{2d073{c8ecf}}\n\n0d5{4bed8}        4bed8\nb88c2df{f9f4}        f9f4\nbf19f{2bcb42}        2bcb42\n09{7}        7\n59a9294{590d}        590d\n7fb76{49}        49\nfa{13}        13\na948596{c}        c\n941a{e435}        e435\n33a{20738fc}        20738fc\n11fc{da}        da\n47be75{9a20543}        9a20543\n388f{1d5f}        1d5f\nf055558{f1e}        f1e\na5e870{b}        b\nfb{4}        4\n9b9{001c}        001c\na58d{b}        b\n372c93{3c}        3c\n2d073{c8ecf}        c8ecf复制代码"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1548041100,
            "txt_content": " 本帖最后由 skpsk自己家 于 2019-1-21 11:37 编辑 \n\n一些愚见\n（正则表达式可能更快 我这样速度慢了XD）\npublic static void main(String args[]) {\n        String str=\"您好{options{abc}}评论了您的{options{def}}\";\n        int a=0,b=0;\n        ArrayList<String> arr=new ArrayList<String>();\n        ArrayList<Integer> left=new ArrayList<Integer>(),right=new ArrayList<Integer>();\n        while(str.indexOf(\"{\",a)!=-1){\n        a=str.indexOf(\"{\",a)+1;\n        b=str.indexOf(\"}\",b)+1;\n        left.add(a);\n        right.add(b);\n        }\n        int i=0;\n        while(left.size()>0){\n        Boolean bl;\n        try{bl=left.get(i+1)>right.get(0);}catch(IndexOutOfBoundsException err){bl=true;}\n        if(bl){\n        arr.add(str.substring(left.get(i),right.get(0)-1));\n        left.remove(i);\n        right.remove(0);\n        i=0;\n        }else{i++;}\n        }\n        System.out.println(arr);;\n}复制代码附图:\n\n"
        }
    ]
}