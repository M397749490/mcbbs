{
    "title": "如何在LivingDamageEvent中得到玩家的capability",
    "author": "yjlyl",
    "replyCount": 2,
    "timestamp": 1572078840,
    "txt_content": "@SubscribeEvent\npublic void onEvent(LivingDamageEvent event) {\n    if (这里该怎么判断) {\n        IMana mana = event.getEntity().getCapability(ManaProvider.MANA_CAP, null);\n        event.setAmount(event.getAmount() + (mana.getAttack()));\n        System.out.println(\"LivingDamageEvent\");\n    }\n}\n\ncapability里面有每个人的攻击力，我想在这个事件里把玩家的伤害提高\n可是怎么得到entity player,而且如果不判断的话就会得到空指针，Minecraft.getminecraft.player()也是空指针\n这个伤害判断该在哪执行，客户端还是服务器",
    "replies": [
        {
            "author": "森林蝙蝠",
            "timestamp": 1572082620,
            "txt_content": " 本帖最后由 森林蝙蝠 于 2019-10-26 19:22 编辑 \n\n后续更新：你这是哪个版本的forge？\n@SubscribeEvent\npublic void onEvent(LivingDamageEvent event) {\n    if (event.getEntity() instanceof EntityPlayer) { //这里是EntityPlayerSP也可以\n        IMana mana = ((EntityPlayer)event.getEntity()).getCapability(ManaProvider.MANA_CAP, null);\n        event.setAmount(event.getAmount() + (mana.getAttack()));\n        System.out.println(\"LivingDamageEvent\");\n    }\n}"
        },
        {
            "author": "yjlyl",
            "timestamp": 1572104520,
            "txt_content": "森林蝙蝠 发表于 2019-10-26 17:37\n后续更新：你这是哪个版本的forge？\n@SubscribeEvent\npublic void onEvent(LivingDamageEvent event) {\n已经解决了，LivingDamageEvent 是实体受到伤害，用AttackEntityEvent即可，里面可以直接event.entityPlayer，然后用反射修改手上的攻击力，thank you"
        }
    ]
}