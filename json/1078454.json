{
    "title": "跨IP的BC端指定服务器IP后无法开服",
    "author": "Catnies",
    "replyCount": 27,
    "timestamp": 1594740600,
    "txt_content": "先描述一下情况：\nA服务器运行着BC+子服1\nB服务器运行着子服2\n当然我想防止他人私自搭建BC直连我的子服.\n所以我在子服1的 server.properties 设置了 server-ip= 127.0.0.1\n理论上子服2的 server-ip= 应该是设置 A服务器的IP 是吗？\n\n\n但是当我设置成A服务器的IP后就无法启动服务器了。\n或者说随便换个IP都不行....\n\n端口更换过别的试过了.\n附log：\n\n[23:24:23] [main/INFO]: Environment: authHost='https://authserver.mojang.com', accountsHost='https://api.mojang.com', sessionHost='https://sessionserver.mojang.com', name='PROD'\n[23:24:25] [main/INFO]: Reloading ResourceManager: Default, bukkit\n[23:24:25] [Server-Worker-2/INFO]: Loaded 7 recipes\n[23:24:29] [Server thread/INFO]: Starting minecraft server version 1.16.1\n[23:24:29] [Server thread/INFO]: Loading properties\n[23:24:29] [Server thread/INFO]: This server is running Paper version git-Paper-29 (MC: 1.16.1) (Implementing API version 1.16.1-R0.1-SNAPSHOT)\n[23:24:30] [Server thread/INFO]: Debug logging is disabled\n[23:24:30] [Server thread/INFO]: Using 4 threads for Netty based IO\n[23:24:30] [Server thread/INFO]: Server Ping Player Sample Count: 12\n[23:24:30] [Server thread/INFO]: Default game type: SURVIVAL\n[23:24:30] [Server thread/INFO]: Generating keypair\n[23:24:30] [Server thread/INFO]: Starting Minecraft server on 180.101.45.230:41244\n[23:24:30] [Server thread/INFO]: Using default channel type\n[23:24:30] [Server thread/WARN]: **** FAILED TO BIND TO PORT!\n[23:24:30] [Server thread/WARN]: The exception was: java.net.BindException: Cannot assign requested address: bind\n[23:24:30] [Server thread/WARN]: Perhaps a server is already running on that port?\n[23:24:30] [Server thread/INFO]: Stopping server (Ignore any thread death message you see! - DO NOT REPORT THREAD DEATH TO PAPER)\n[23:24:30] [Server thread/INFO]: Saving players\n[23:24:30] [Server thread/INFO]: Saving worlds\n[23:24:30] [Server thread/INFO]: Flushing Chunk IO\n[23:24:30] [Server thread/INFO]: Closing Thread Pool\n[23:24:30] [Server thread/INFO]: Closing Server\n复制代码\n",
    "replies": [
        {
            "author": "蕾米洛伊",
            "timestamp": 1594740600,
            "txt_content": " 本帖最后由 蕾米洛伊 于 2020-7-15 00:29 编辑 \nCatnies 发表于 2020-7-15 00:11\n并没有 我甚至还尝试了更换别的端口...\n> 理论上子服2的 server-ip= 应该是设置 A服务器的IP 是吗？\n\n如果两个服务器有不同的公网IP, 那么这一步就是错的, 因为B服务器没有与A服务器公网IP有关的网卡, 自然也就无法把A服务器的IP绑定到B服务器运行的socket连接上, 于是就出现了\nThe exception was: java.net.BindException: Cannot assign requested address: bind\n\n这个错误不是因为端口被占用，而是因为网卡找不到可用的端口号和客户端连接，端口号用光了。因为它根本找不到这个IP去绑定，更找不到可用的端口 :(\n所以如果想让A和B内的不同服务器建立连接，先要把子服A server-ip= 留空，要想让服务器B能跑起来，把服务器B的 server-ip= 也留空。\n为啥呢，如果你子服1绑定的IP是127.0.0.1，这就意味着除了服务器A本身，外网的其他人无法与其建立连接。可以理解成大门只向自己家敞开，别人(服务器B)进连门都找不到。\n\n那么如何做到 \"我想防止他人私自搭建BC直连我的子服.\" 同时还能让服务器B与A建立连接呢？\n1. 首先必须让服务器B有门可走，到底让谁走我们等下再说，先把子服1 server-ip= 留空。\n现在B与A终于可以建立连接了。\n2. 下一步实现 \"我想防止他人私自搭建BC直连我的子服.\"，你需要用到防火墙，让子服1的端口只接受服务器B的IP的连接。这个方法可以在百度上搜到，win和linux都可以做到\n\n另外，如果是想要子服1和2都可以跨服传送，你要到主bungeecord服务器里配置"
        },
        {
            "author": "思念化作海",
            "timestamp": 1594740780,
            "txt_content": "子服1和子服2的server.properties中 server-ip都设为127.0.0.1"
        },
        {
            "author": "15519143469",
            "timestamp": 1594740960,
            "txt_content": "ip_forward: true   端口不能重复  spigot.yml 里面  bungeecord: true    127.0.0.1 是本地的意思  就是只能通过本地连接"
        },
        {
            "author": "Catnies",
            "timestamp": 1594741200,
            "txt_content": "屑🥕 发表于 2020-7-14 23:33\n子服1和子服2的server.properties中 server-ip都设为127.0.0.1\n不对吧？\n如果这么设置的话，那么子服2只允许本地连接，可是子服2并不和BC在同一个服务器上\n我试过了。如果这么设置那么在子服1无法跳转到子服2上"
        },
        {
            "author": "Catnies",
            "timestamp": 1594741320,
            "txt_content": "15519143469 发表于 2020-7-14 23:36\nip_forward: true   端口不能重复  spigot.yml 里面  bungeecord: true    127.0.0.1 是本地的意思  就是只 ...\n这些当然已经设置了。\n2个子服在不同的服务器怎么可能都用127.0.0.1"
        },
        {
            "author": "思念化作海",
            "timestamp": 1594741320,
            "txt_content": "Catnies 发表于 2020-7-14 23:40\n不对吧？\n如果这么设置的话，那么子服2只允许本地连接，可是子服2并不和BC在同一个服务器上\n我试过了。如 ...\n那就子服2的server-ip填子服2服务器的ip"
        },
        {
            "author": "15519143469",
            "timestamp": 1594741440,
            "txt_content": "Catnies 发表于 2020-7-14 23:40\n不对吧？\n如果这么设置的话，那么子服2只允许本地连接，可是子服2并不和BC在同一个服务器上\n我试过了。如 ...\n对的   你需要外网映射到你本地IP就行可以的  端口必须不同   都填127.0.0.1"
        },
        {
            "author": "Catnies",
            "timestamp": 1594741620,
            "txt_content": "15519143469 发表于 2020-7-14 23:44\n对的   你需要外网映射到你本地IP就行可以的  端口必须不同   都填127.0.0.1\n端口肯定是不同的，这个映射是怎么操作？\n2机子都有外网ip的"
        },
        {
            "author": "15519143469",
            "timestamp": 1594741680,
            "txt_content": "15519143469 发表于 2020-7-14 23:44\n对的   你需要外网映射到你本地IP就行可以的  端口必须不同   都填127.0.0.1\n我自己也是BC服  本地连接没问题 BC核心 127.0.0.1:25565  大厅服 127.0.0.1: 25566  子服1 127.0.0.1: 25567 子服2 127.0.0.1: 25568  子服3 127.0.0.1: 25569     你IP映射到连接到25565 就可以了 这样就能防止其他人搭建BC连接你的子服"
        },
        {
            "author": "Catnies",
            "timestamp": 1594741680,
            "txt_content": "屑🥕 发表于 2020-7-14 23:42\n那就子服2的server-ip填子服2服务器的ip\n啊这..= =\n[23:45:50] [main/INFO]: Environment: authHost='https://authserver.mojang.com', accountsHost='https://api.mojang.com', sessionHost='https://sessionserver.mojang.com', name='PROD'\n[23:45:51] [main/INFO]: Reloading ResourceManager: Default, bukkit\n[23:45:53] [Server-Worker-2/INFO]: Loaded 7 recipes\n[23:45:55] [Server thread/INFO]: Starting minecraft server version 1.16.1\n[23:45:55] [Server thread/INFO]: Loading properties\n[23:45:55] [Server thread/INFO]: This server is running Paper version git-Paper-29 (MC: 1.16.1) (Implementing API version 1.16.1-R0.1-SNAPSHOT)\n[23:45:55] [Server thread/INFO]: Debug logging is disabled\n[23:45:55] [Server thread/INFO]: Using 4 threads for Netty based IO\n[23:45:55] [Server thread/INFO]: Server Ping Player Sample Count: 12\n[23:45:55] [Server thread/INFO]: Default game type: SURVIVAL\n[23:45:55] [Server thread/INFO]: Generating keypair\n[23:45:55] [Server thread/INFO]: Starting Minecraft server on 手动屏蔽本机IP:19132\n[23:45:56] [Server thread/INFO]: Using default channel type\n[23:45:56] [Server thread/WARN]: **** FAILED TO BIND TO PORT!\n[23:45:56] [Server thread/WARN]: The exception was: java.net.BindException: Cannot assign requested address: bind\n[23:45:56] [Server thread/WARN]: Perhaps a server is already running on that port?\n[23:45:56] [Server thread/INFO]: Stopping server (Ignore any thread death message you see! - DO NOT REPORT THREAD DEATH TO PAPER)\n[23:45:56] [Server thread/INFO]: Saving players\n[23:45:57] [Server thread/INFO]: Saving worlds\n[23:45:57] [Server thread/INFO]: Flushing Chunk IO\n[23:45:57] [Server thread/INFO]: Closing Thread Pool\n[23:45:57] [Server thread/INFO]: Closing Server\n复制代码\n"
        },
        {
            "author": "15519143469",
            "timestamp": 1594741860,
            "txt_content": "15519143469 发表于 2020-7-14 23:48\n我自己也是BC服  本地连接没问题 BC核心 127.0.0.1:25565  大厅服 127.0.0.1: 25566  子服1 127.0.0.1: 2 ...\n如果你需要跨服 在BC的 config里面设置 \n通过插件或者bc自带跨服命令即可完成跨服\nservers:\n  lobby:\n    motd: '    '\n    address: localhost:25566\n    restricted: false\n  x1:\n    motd: ''\n    address: localhost:25567\n    restricted: false\n  x2:\n    motd: ''\n    address: localhost:25568\n    restricted: false\n  x3:\n    motd: ''\n    address: localhost:25569\n    restricted: false\n  x4:\n    motd: ''\n    address: localhost:25570\n    restricted: false"
        },
        {
            "author": "Catnies",
            "timestamp": 1594741860,
            "txt_content": "15519143469 发表于 2020-7-14 23:48\n我自己也是BC服  本地连接没问题 BC核心 127.0.0.1:25565  大厅服 127.0.0.1: 25566  子服1 127.0.0.1: 2 ...\n这个IP映射，怎么操作？"
        },
        {
            "author": "15519143469",
            "timestamp": 1594741980,
            "txt_content": "Catnies 发表于 2020-7-14 23:51\n这个IP映射，怎么操作？\n百度 贴内也有 开服都得会的东西"
        },
        {
            "author": "15519143469",
            "timestamp": 1594741980,
            "txt_content": "15519143469 发表于 2020-7-14 23:53\n百度 贴内也有 开服都得会的东西\n你是租的服务器就找服务商"
        },
        {
            "author": "15519143469",
            "timestamp": 1594742100,
            "txt_content": "15519143469 发表于 2020-7-14 23:53\n你是租的服务器就找服务商\n你租的服务器一般都是给你映射好了    比如他的端口是  2333  你吧25565换成2333即可"
        },
        {
            "author": "思念化作海",
            "timestamp": 1594742580,
            "txt_content": "Catnies 发表于 2020-7-14 23:48\n啊这..= =\nThe exception was: java.net.BindException: Cannot assign requested address: bind\n端口没被占用？\n\n截图下你的server.properties看看怎么写的"
        },
        {
            "author": "Catnies",
            "timestamp": 1594742760,
            "txt_content": "15519143469 发表于 2020-7-14 23:55\n你租的服务器一般都是给你映射好了    比如他的端口是  2333  你吧25565换成2333即可 ...\n不是很明白.\n两个服务器都有公网ip要咋映射？.."
        },
        {
            "author": "Catnies",
            "timestamp": 1594743060,
            "txt_content": "屑🥕 发表于 2020-7-15 00:03\nThe exception was: java.net.BindException: Cannot assign requested address: bind\n端口没被占用？\n并没有 我甚至还尝试了更换别的端口...#Minecraft server properties\n#Wed Jul 15 00:07:54 CST 2020\nspawn-protection=0\nmax-tick-time=60000\nquery.port=25565\ngenerator-settings=\nsync-chunk-writes=true\nforce-gamemode=false\nallow-nether=true\nenforce-whitelist=false\ngamemode=survival\nbroadcast-console-to-ops=true\nenable-query=false\nplayer-idle-timeout=0\ndifficulty=peaceful\nspawn-monsters=true\nbroadcast-rcon-to-ops=true\nop-permission-level=4\npvp=true\nentity-broadcast-range-percentage=100\nsnooper-enabled=true\nlevel-type=default\nhardcore=false\nenable-status=true\nenable-command-block=false\nmax-players=15\nnetwork-compression-threshold=256\nresource-pack-sha1=\nmax-world-size=29999984\nfunction-permission-level=2\nrcon.port=25575\nserver-port=19132\ndebug=false\nserver-ip=114.67.105.136\nspawn-npcs=true\nallow-flight=false\nlevel-name=World\nview-distance=5\nresource-pack=\nspawn-animals=true\nwhite-list=false\nrcon.password=\ngenerate-structures=true\nonline-mode=false\nmax-build-height=256\nlevel-seed=\nprevent-proxy-connections=false\nuse-native-transport=true\nenable-jmx-monitoring=false\nmotd=A Minecraft Server\nenable-rcon=false复制代码"
        },
        {
            "author": "15519143469",
            "timestamp": 1594743120,
            "txt_content": "Catnies 发表于 2020-7-15 00:06\n不是很明白.\n两个服务器都有公网ip要咋映射？..\n公网IP总有端口吧  使用一个不就行了"
        },
        {
            "author": "15519143469",
            "timestamp": 1594743180,
            "txt_content": "15519143469 发表于 2020-7-15 00:12\n公网IP总有端口吧  使用一个不就行了\n映射这个东西我帮不了你  你是家用的百度查用路由器映射 是租的就找服务商"
        },
        {
            "author": "Catnies",
            "timestamp": 1594749000,
            "txt_content": " 本帖最后由 Catnies 于 2020-7-15 01:52 编辑 \n蕾米洛伊 发表于 2020-7-15 00:21\n> 理论上子服2的 server-ip= 应该是设置 A服务器的IP 是吗？\n\n如果两个服务器有不同的公网IP, 那么这一步 ...\n琢磨了一会 试了一下 确实可行 听你这么一说我大概就搞明白了。\n另外多问一句，\n如果只设置子服1只接受本地BC和子服2的连接的话，那子服2需不需要设置只接受BC和子服1的连接？\n能否直接通过设置子服2为默认服务器进服？\n"
        },
        {
            "author": "蕾米洛伊",
            "timestamp": 1594749300,
            "txt_content": "Catnies 发表于 2020-7-15 01:50\n琢磨了一会 试了一下 确实可行 听你这么一说我大概就搞明白了。\n另外多问一句，\n如果只设置子服1只接受本 ...\n> 如果只设置子服1只接受本地BC和子服2的连接的话，那子服2需不需要设置只接受BC和子服1的连接？\n可以这样安全性更高23333 但是不必要\n> 能否直接通过设置子服2为默认服务器进服？\n可以，在 bc 端配置好服务器就👌"
        },
        {
            "author": "Catnies",
            "timestamp": 1594749720,
            "txt_content": " 本帖最后由 Catnies 于 2020-7-15 02:04 编辑 \n蕾米洛伊 发表于 2020-7-15 01:55\n> 如果只设置子服1只接受本地BC和子服2的连接的话，那子服2需不需要设置只接受BC和子服1的连接？\n可以这 ...\n第二个问题没有问清楚.\n我的意思是私自搭建的BC能否直接config里剔除掉子服1从而实现不访问子服1的情况直接进子服2，这样不就能正常连接了吗？\n\n那么理论上的话子服2设置只允许BC和子服1访问可以解决这个问题吗？"
        },
        {
            "author": "蕾米洛伊",
            "timestamp": 1594750140,
            "txt_content": "Catnies 发表于 2020-7-15 02:02\n第二个问题没有问清楚.\n我的意思是私自搭建的BC能否直接config里剔除掉子服1从而实现不访问子服1的情况直 ...\n还是不太明白你的问题。。\nbungeecord 可以设置默认进入的服务器，只需要更改默认进入的服务器即可，不需要删除配置\n如果子服1无法访问，只需要把bc里面默认服务器改成子服2就可以了呀\n设置子服之间只可以互相访问只是为了防止「有外网的其他魑魅魍魉」进入，但是对于更改连接方式这样的需求是做不到的。"
        },
        {
            "author": "Catnies",
            "timestamp": 1594750380,
            "txt_content": " 本帖最后由 Catnies 于 2020-7-15 02:15 编辑 \n蕾米洛伊 发表于 2020-7-15 02:09\n还是不太明白你的问题。。\nbungeecord 可以设置默认进入的服务器，只需要更改默认进入的服务器即可，不需 ...\n不是这个意思.\n比如说：我现在服务器的BC上配置了2个子服，子服1和子服2.   默认登录服是子服1\n如果我直接把这个BC照搬到我自己的电脑上运行，肯定会出现无法链接子服1的情况，因为设置了只有服务器的BC和子服2能访问子服1\n\n那么我干脆把我自己电脑上的BC改成只有一个子服，就只有子服2，设置BC默认的服务器是子服2，那么不就可以直接链接进入子服2了么？\n刚刚试了成功了。- -.\n"
        },
        {
            "author": "蕾米洛伊",
            "timestamp": 1594751400,
            "txt_content": "Catnies 发表于 2020-7-15 02:13\n不是这个意思.\n比如说：我现在服务器的BC上配置了2个子服，子服1和子服2.   默认登录服是子服1\n如果我直接 ...\n> 那么理论上的话子服2设置只允许BC和子服1访问可以解决这个问题吗？\n对，，"
        },
        {
            "author": "Catnies",
            "timestamp": 1594752060,
            "txt_content": "蕾米洛伊 发表于 2020-7-15 02:30\n> 那么理论上的话子服2设置只允许BC和子服1访问可以解决这个问题吗？\n对，， ...\n然后在服务器B按照同样的方法设置只允许服务器A访问之后，子服1也没法访问子服2了，但是检查了好多遍设置确实没问题\n真头大"
        }
    ]
}