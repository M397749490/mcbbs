{
    "title": "带lore的物品不能放入工作台",
    "author": "Cuki",
    "replyCount": 1,
    "timestamp": 1515340560,
    "txt_content": "对物品有无lore的判断倒是很简单\n现在卡在了如何对把物品放入工作台这个事件进行监听\n\n然后接下来的思路也是比较模糊  （才学java俩个月 表示很多东西还是转不过弯来\n望dalao指点",
    "replies": [
        {
            "author": "GayaGuoguo",
            "timestamp": 1515393120,
            "txt_content": "监听物品栏点击事件，\n判断点击的物品栏类型为InventoryType.CRAFTING，判断点击的格子为1,2,3,4，判断物品有Lore，然后取消事件\n判断点击的物品栏类型为InventoryType.WORKBENCH，判断点击的格子为1,2,3,4,5,6,7,8,9，判断物品有Lore，然后取消事件\n\n拖动事件也需要监听，实现代码如下\n\n        @EventHandler\n        public void onInventoryClick(InventoryClickEvent e) {\n                Inventory inventory = e.getClickedInventory();\n                if (inventory == null) {\n                        return;\n                }\n                InventoryType inventoryType = inventory.getType();\n                if (inventoryType != InventoryType.CRAFTING && inventoryType != InventoryType.WORKBENCH) {\n                        return;\n                }\n                ItemStack itemStack = e.getCursor();\n                if (itemStack == null || itemStack.getType() == Material.AIR || !itemStack.hasItemMeta() || !itemStack.getItemMeta().hasLore()) {\n                        return;\n                }\n                int slot = e.getSlot();\n                if (inventoryType == InventoryType.CRAFTING) {\n                        if (slot >= 1 && slot <= 4) {\n                                e.setCancelled(true);\n                                return;\n                        }\n                }\n                if (inventoryType == InventoryType.WORKBENCH) {\n                        if (slot >= 1 && slot <= 9) {\n                                e.setCancelled(true);\n                                return;\n                        }\n                }\n        }\n        \n        @EventHandler\n        public void onInventoryDrag(InventoryDragEvent e) {\n                Inventory inventory = e.getInventory();\n                if (inventory == null) {\n                        return;\n                }\n                InventoryType inventoryType = inventory.getType();\n                if (inventoryType != InventoryType.CRAFTING && inventoryType != InventoryType.WORKBENCH) {\n                        return;\n                }\n                ItemStack itemStack = e.getCursor();\n                if (itemStack == null || itemStack.getType() == Material.AIR || !itemStack.hasItemMeta() || !itemStack.getItemMeta().hasLore()) {\n                        return;\n                }\n                Set<Integer> slots = e.getRawSlots();\n                if (inventoryType == InventoryType.CRAFTING) {\n                        for (int slot : slots) {\n                                if (slot >= 1 && slot <= 4) {\n                                        e.setCancelled(true);\n                                        return;\n                                }\n                        }\n                }\n                if (inventoryType == InventoryType.WORKBENCH) {\n                        for (int slot : slots) {\n                                if (slot >= 1 && slot <= 9) {\n                                        e.setCancelled(true);\n                                        return;\n                                }\n                        }\n                }\n        }复制代码"
        }
    ]
}