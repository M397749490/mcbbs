{
    "title": "[SC]你想知道为什么你编译出来的jar文件不支持所有java版本吗?",
    "author": "弱鸡绿毛怪",
    "replyCount": 2,
    "timestamp": 1522325640,
    "txt_content": " 本帖最后由 MagicLocyDragon 于 2018-4-30 12:05 编辑 \n\n 前言\n 众所周知，当一个不符合你jre版本不对的类加载进jvm时，会抛出异常:\njava.lang.UnsupportedClassVersionError\n报错信息大概如下:\n Unsupported major .minor version 52.0   \n其中，粗体字(52)我们称为这个类的主要版本(major version) 小数点后面的成为Minor Version(次要版本)\n\n 主要版本(major version)\n 主要版本在jvm检测你的类的版本时起到重要的作用。若这个主要版本不符合你的jre版本，jvm将会抛出如上异常。\n各个jre版本的范围: 版本号从45开始\n如jre1的范围就是 45.0~45.65535\njre2的范围就是 45.0~46.65535\njre3的范围就是 45.0~47.65532\n规律:依次加一\n 那么jre8的范围就是 45.0~52.65532\n而前言中的类的版本号 是52.0 ，也就是只有jre8才能运行该类\n\n\n 如何看某个类(class文件)所支持的版本呢?\n 这里我们用WinHex随便打开一个class文件，查看该class文件的十六进制:\n\n\n\n\n1.png (124.93 KB, 下载次数: 1)\n\n下载附件\n\n2018-3-29 19:53 上传\n\n\n\n\n\n其中这个位置:\n\n\n\n\n1.png (94.88 KB, 下载次数: 1)\n\n下载附件\n\n2018-3-29 19:54 上传\n\n\n\n\n\n就是该类的主要版本，就是我圈出来的30，但是这个30是十六进制的，转换为十进制就是:\n48\n也就是最低能够支持jre4!(jre4的范围是45.0~48.65535)\n所以该类在jre4以下的版本运行就会报错，报错信息设想如下:\njava.lang.UnsupportedClassVersionError\nUnsupported major .minor version 48.0\n\n\n 魔数(Magic Value)\n 很多的文件的开头都会有一个魔数，这是识别该文件是一个可以正常运行的文件的一个准则。比如java的class文件的魔数特别好玩，设置成了CafeBabe:\n\n\n\n\n1.png (99.67 KB, 下载次数: 5)\n\n下载附件\n\n2018-3-29 20:02 上传\n\n\n\n\n\n当然CafeBabe这个命名也是有一个故事的，大概是什么我也忘记了。\n也就是说，如果一个文件并没有CafeBabe这个魔数，但是想要载入jvm，这是不允许的。\n[groupid=1533]SpicyChicken[/groupid]",
    "replies": [
        {
            "author": "3TUSK",
            "timestamp": 1522478880,
            "txt_content": "其中，粗体字(52.0)我们称为这个类的主要版本(major version)\nMajor Version 只是那个 52。那个点后的 0 是它的 Minor Version。所以它写的是 \"Unsupported major.minor version\"。\n\n当然CafeBabe这个命名也是有一个故事的，大概是什么我也忘记了。\n\nJames Gosling（詹姆斯·高斯林，Java 的共同创始人之一）对此表示负责。\n参考来源：https://stackoverflow.com/questi ... ile-format-cafebabe"
        },
        {
            "author": "弱鸡绿毛怪",
            "timestamp": 1522480560,
            "txt_content": "u.s.knowledge 发表于 2018-3-31 14:48\nMajor Version 只是那个 52。那个点后的 0 是它的 Minor Version。所以它写的是 \"Unsupported major.minor ...\n是的"
        }
    ]
}