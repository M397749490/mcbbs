{
    "title": "[原创教程][上古之石]ModPE编写从入门到精通",
    "author": "TimmyOVO",
    "replyCount": 10,
    "timestamp": 1466503860,
    "txt_content": " 本帖最后由 星燚 于 2016-8-31 15:21 编辑 \n本教程持续更新，但是缓更，到暑假一口气我会把它更完的\n\n此教程作为对于想扩展自己的玩法但又不会的人\n有耐心学习的人，内容较多，请耐心学习\n本教程适用人群:有Java和Android基础的人\n也请注意，本教程不是给无Java基础的准备的\n小白也可以学，但恐怕\n后面的高级知识是听不懂的\n\nModPE简介\n\nModPE作为当下PE最流行的扩展脚本\n使用的是JavaScript这个语言的格式\nJavaScript是一个弱类型语言\n所有变量全部使用var定义\n不像Java里面一样\nString[] a=[\"a\",\"b\",\"c\"];\nint b = 1;\n而这里ModPE全部使用var\nvar a=[\"a\",\"b\",\"c\"];\nvar b = 1;\n\n其实要不要;都可以，ModPE格式要求不是很严格\n但这里注意啦,我们在ModPE里面定义的这个b，会被默认为\n类型是String,也就是你print(b+1),输出的将不会是2，而是11。\nModPE为何如此受人追捧呢？\n它里面预置了Javs的函数，还有一些全局函数，包括Android的函数\n都可以在里面进行调用，而且语法格式要求不言。\n配套教学资源\n\n1.ModPE最新函数表\n2.生物ID\n3.生物模型ID\n\n目录\n\n1.ModPE及其基本语法\n2.ModPE全局函数\n3.ModPE关键字详解\n4.认识钩子函数\n5.使用钩子函数激活你的函数\n6.自定义函数\n7.传入变量\n8.if语句\n9.switch语句\n10.while循环\n11.for循环\n12.循环综合利用讲解\n13.捕获异常\n14.处理异常\nPart.1——ModPE及其基本语法\n\n函数需以关键字\nfunction开头来定义\n\nfunction useItem(x,y,z,i,b,d)\n{\n}\n复制代码\n如你所见，和Java一样\nfunction定义函数以后\n()内里面的参数叫传入变量，可改名字\n数量也是可以改的，需要几个参数就传入几个参数，启动器会在调用时自动传入相应参数\nModPE的函数体也是用的{}来进行包裹\n注意，这里和Java不一样的是\n不需要定义返回类型，也不需要填void\n直接这样就可以了\n\nfunction test()\n{\nvar x=Player.GetX();\nreturn x;\n}\n复制代码\n如果var定义的变量不在任何函数体内\n我们称之为全局函数\n它会在ModPE加载时，进行一次变量初始化赋值，如果你不对其进行修改\n它将永远是初始值\n\nPart.2ModPE全局函数这些函数不属于ModPE但是是预置的函数有如下的几个预置函数这里只介绍几个我们用得着的eval(\"\")把参数内的字符串计算出javascript字符并把它计算的结果执行通常就是加密用的这个东西getClass()返回一个JavaObject对象isFinite()检查某个值的大小是否是无限大比如一个数除于0就会产生一个无限大的数是返回true不是返回falseisNaN()检查字符串是否为数字是返回true不是返回falseNumber()将对象值转化为数字String()将对象值转化为字符串parseInt()将对象转化为int为什么有这个玩意呢我科普一下javascipt是弱类型语言var定义的包括1,2,3这样会被默认作为字符串比如说var a = 1;\nvar b = 2;\nprint(1+2)复制代码\n\n就会输出12而不是3转换后才会输出3\n\nPart.3JavaScipt关键字详解如你所看到的一样如果你学过Java会知道Java内一般使用枚举或者public final static a作为一个常量但在JavaScript里面不是这样的我们通常使用const关键字来申明一个常量const ctx = com.mojang.minecraftpe.MainActivity.currentMainActivity.get()复制代码声明一个变量我们使用关键字varvar a = 1;\nvar b = \"test\";\nvar ab = [\"a\",\"b\"]复制代码我们使用关键字function来定义一个函数function tes(i)\n{\nprint(i);\n}\n\nfunction newlevel()\n{\ntest(Entity.getName(getPlayerEnt()));\n}复制代码\n值得注意的是,这相当于java里面的方法()内的是参数,因为前面我也说过js是弱类型语言不强制要求像java那样public void tes(String i)\n{\nSystem.out.printIn(i);\n}复制代码而且modpe里面的函数,如果需要返回数值是不需要定义一定要返回什么类型的数据的在modpe里面,启动器会根据你的函数名字来在相应事件触发的时候调用该函数所以你如果想监听一个事件必须要和函数表内的钩子函数名字一样至于形参,你不必全部填完只填你需要的就可以了如function useItem(x,y,z,i)\n{\nif(getTile(x,y,z)==1&&i==276)\n{\nprint(\"你用钻石剑点击了石头\")\n}\n}复制代码\n\n\n\n\nPart.4-认识钩子函数\n\n\n什么是钩子函数呢\nModPE为对应的原版事件提供了多种不同的钩子函数\n对应钩子函数会在对应事件发生的时候由启动器调用\n并传入参数\nfunction useItem(x,y,z,i,b)\n{\nclientMessage(\"你点击了方块\")\n}复制代码参数不一定需要全部填完只填你需要的就行相当于Bukkit插件内的事件监听\n\n\nPart.5-使用钩子函数激活你的函数Part.6-自定义函数\n\n自定义函数差不多相当于Java里面的方法\n你可以在函数体里面写入一些要执行的东西\n等待其他钩子函数或者其他函数来调用\n注意:ModPE内的函数,不需要写返回类型\n你可以任意返回boolean或者int或者String什么的\n当然也可以不返回\n例如\n\n\nfunction randomPlace(entity)//自定义方法randomPlace()\n{\nvar randomx = (Math.random()*99999)+1//随机一个1-100000的X坐\nvar randomy = (Math.random()*99999)+1//随机一个1-100000的Y坐\nvar random z = (Math.random()*99999)+//随机一个1-100000的Z坐\nsetPosition(entity,randomx,randomy,randomz)//将玩家传送到随机的XYZ\n}\n\nfunction modTick()//钩子函数一秒触发20\n{\nif(getTile(getPlayerX(),getPlayerY()-2,getPlayerZ())==57)//如果玩家脚下踩着57号方块\n{\nrandomPlace(getPlayerEnt())//调用randomPlace()函数\n}\n}复制代码\n\n\n\n\n\n\n\nPart.7.传入变量例如//加入一个自定义函数\n//并规定一个形参entity\n//其他所有函数调用它时\n//必须传入该参数才能进行调用\nfunction randomPlayer(entity)\n{\nvar x = Math.random()*9999\nvar y = Math.random()*9999\nvar z = Math.random()*9999\nsetPosition(entity,x,y,z)\n}\n\n//钩子,点击物品\nfunction useItem(x,y,z,i,b)\n{\nif(i==276)\n{\nrandomPlayer(getPlayerEnt())\n//调用randomPlayer函数\n//必须传入参数entity\n//如不传入则无法调用\n}\n}复制代码\n\n\n\nPart.8-If语句\nIf语句基本语法<div style=\"text-align: left;\"><span style=\"line-height: 1.5;\">if(boolean)</span></div><div style=\"text-align: left;\"><span style=\"line-height: 1.5;\">//括号内的是条件,必须是一个布尔值(true或false),true将会继续执行if里面的语句,而false就不会,括号内可以填写返回布尔值的函数.</span></div><div style=\"text-align: left;\"><span style=\"line-height: 1.5;\">{</span></div><div style=\"text-align: left;\"><span style=\"line-height: 1.5;\">//执行中间的代码</span></div><div style=\"text-align: left;\"><span style=\"line-height: 1.5;\">}</span></div>复制代码else if和else的语法\nif()\n{\n\n}\nelse if()\n{\n\n}\nelse\n{\n\n}\n//打个形象的比喻,也就是如果第一个是true就执行第一个,又如果第二个是true就执行第二个,如果两个都是false,那么执行else块里面的代码复制代码\n\n\n\n\n\nPart.9-Switch语句\nswitch是一个条件分歧语句,用于对一个值的多种情况进行判断switch(要条件分歧的值)\n{\ncase 当这个值等于什么的时候:\n执行对应代码\ncase 当这个值等于另外一个情况的时候:\n执行对应代码\n}复制代码但你们需要注意的是:Java8把switch语句更新了一个default的东西这里不能用！！！！\nJava的default是这样用的switch()\n{\ndefault:\n//执行的代码\nbreak\ncase 情况:\n//要执行的代码\nbreak\n}复制代码这个default就是在所有case没比中的情况下执行的代码\n\n\nPart.10-While循环\nwhile循环格式如下(和Java内格式基本是相同的不过还是讲一下吧)\nwhile(情况)\n{\n//执行的事\n//你尽可说for循环比它好我觉得也这样\n}<div class=\"blockcode\"><blockquote>while(true)\n{\n//这样就一直是true,一直可以执行while里面的语句\n}复制代码\n\nwhile从字面理解的意思就是当也就是\n当(什么什么时候)\n{复制代码因为这个while内的条件只能是boolean值\n所以我们当然也可以这样玩\n\n\n11.for循环这里的for循环同样和Java内的for循环一样不过可没有foreach语法糖哦~因此我们这样来\nfor(var i=0;i<10;i++)\n{\n//要执行的代码\n}复制代码我来解释一下上面的代码也就是定义一个局部变量i让他初始化等于0然后如果这个i小于10那么i这个变量每循环一次自加1直到不符合循环条件为止\n\n12.循环综合利用讲解循环的作用是干什么,当然是为了方便运算和实现各种算法等等比如我们要在玩家的X轴+方向放置十个方块那么不用循环我们必须这样写function setblock(entity)\n{\nvar x = entity.getX();\nvar y =entity.getY();\nvar z=entity.getZ();\nsetTile(x,y-2,z)\nsetTile(x+1,y-2,z)\nsetTile(x+2,y-2,z)\nsetTile(x+3,y-2,z)\nsetTile(x+4,y-2,z)复制代码这样很麻烦对吧,如果是一千个,一万个？累死啦...(这里我说明一下,就是你一次放置再多方块,如果方块位置不在你游戏已经加载的区块内,无效.)所以我们用循环来\nfunction setblock(entity)\n{复制代码那么我们这里继续说一下这个setblock函数要求传入一个entity的对象也就是\n恩...你要在哪个生物放置方块这里我们选用玩家作为对象所以我们function start()\n{\nsetblock(Player.getEnt())\n}复制代码这样即可\n那么为什么呢,y需要减去2因为玩家的y位置是从头开始计算我们必须往下数两格才是脚底下所以就这样要减去2\n\n\n13.捕获异常那么什么叫捕获异常是一种异常处理机制当程序遇到了未知的异常的时候他可不会自己处理所以这时候你不捕获它就会导致程序异常终止所以我们必须将其捕获自行处理(这里要提到的是,和Java一样,I/O操作必须捕获异常,不管你是不是会出现,否则通过不了启动器检查)那么我们这里用到的是try-catch语句格式如下try\n{\n//可能出现异常的代码\n}\ncatch(e)\n{\n//将异常捕获后该做什么\n}复制代码\n\n14.处理异常下面示范一下如何捕获异常后处理它例如以下代码function run()\n{\ntry\n{\nvar testfile =new java.io.File(\"/mnt/0/test.txt\")\nvar filewriter = new java.io.FileWrite(testfile)\nfilewriter.write(\"test\")\nfilewriter.close()\n}\ncatch(e)\n{\nprint(e)\ne.createNewFile()\n}\n}\n复制代码上面代码示范了写入内部储存的目录下的一个test.txt文件写入进去test这个字符串那么不知道它这个文件存在不存在所以我们将其捕获当文件不存在的时候抓住异常,并创建这个文件,将异常栈打印出来\n这样就可以了\n\n[groupid=324]上古之石美工工作组[/groupid]",
    "replies": [
        {
            "author": "青木源",
            "timestamp": 1466504880,
            "txt_content": "从新手到大佬（滑稽）"
        },
        {
            "author": "孤独秋叶",
            "timestamp": 1466505540,
            "txt_content": "从入门到弃坑"
        },
        {
            "author": "fsxitutu",
            "timestamp": 1466511840,
            "txt_content": "快快更新"
        },
        {
            "author": "522006",
            "timestamp": 1466511900,
            "txt_content": "楼主加油( 顺便问一句,  什么时候能讲到进阶内容啊 )!"
        },
        {
            "author": "闪烁的萤石",
            "timestamp": 1472114220,
            "txt_content": "楼主，从FOR循环语句开始的折叠页内容都是空白啊"
        },
        {
            "author": "fsxitutu",
            "timestamp": 1472132400,
            "txt_content": "“如果var定义的变量不在任何函数体内我们称之为全局函数“，那叫全局变量"
        },
        {
            "author": "fsxitutu",
            "timestamp": 1472259240,
            "txt_content": "闪烁的萤石 发表于 2016-8-25 16:37\n楼主，从FOR循环语句开始的折叠页内容都是空白啊\nfor(变量;条件;步进值){\n你要循环的代码\n}"
        },
        {
            "author": "污妖神",
            "timestamp": 1472646660,
            "txt_content": "这贴榨干了我所有脑细胞{:10_521:}{:10_506:}"
        },
        {
            "author": "MCHandler",
            "timestamp": 1476776280,
            "txt_content": "参见上古之石美工工作组！"
        },
        {
            "author": "nicvank",
            "timestamp": 1594174260,
            "txt_content": "大佬能不能讲一下自定义合成表，就是那个Item.addShapedREcipe()，萌新不是很懂 "
        }
    ]
}