{
    "title": "【几何：较实用型a】对实体方块阵型排列进行 斜体、90°旋转、非90°旋转",
    "author": "林扬骐",
    "replyCount": 15,
    "timestamp": 1481913180,
    "txt_content": " 本帖最后由 林扬骐 于 2017-1-24 17:43 编辑 \n\n斜体与旋转\n（适用于操作厚平面）\n前言：\n其实斜体、90°旋转的方法是很早就想到了的（大概在第一代斜线法发布几天后，而斜线机(http://www.mcbbs.net/thread-544286-1-1.html)也透露出了一点“预告”），但是由于没注意到其重要性与实用性加上太过懒癌（恩这是主要原因），所以迟迟没有发布。\n而非90°旋转在当时一直没有想出来，那时的设想会导致旋转正方形后会成为一个奇怪的平行四边形。\n一节体训上回想起直角三角形，又想到了“扫描法”，于是一个相对比较标准的非90°旋转法就想出来了（不过缺陷是会有洞（直角三角形斜边大于直边）（可能扫描得密一些可以较好解决））\nps：不久前见到了“船黑科技”，用“中介点扫描法”应该也可以，但是想到效率太低于是没想太多，（不过或许可以控制大小基本不变）\n【主要思想】：1.相对坐标“堆叠”；*2.绝对与相对坐标的结合/相互转换（重点）；3.（仅在非90°旋转中）“中介”线扫描法；4.（灵活运用的思想）可以把该平面分为多个“大块”，最后的处理效果就像是“大方块的转换”（如分为多个2x2x2的大块，最后原本1x1x1的“像素美”会变成2x2x2）\n基本原理示意图\n\n\n\n\n斜体与旋转.png (118.53 KB, 下载次数: 6)\n\n下载附件\n\n2016-12-16 23:20 上传\n\n\n\n\n\n\n注：我在这里生成的正方形是从(41,114,228)fill到 (62,135,228)（即以(41,114,228)为原点(以下省略为“正方形原点”，而实体原点(41,114,229)将被省略为“实体原点”)，向x+、y+方向作边长为22个方块（两边相对坐标差是~21）的正方形）\n（另见b：http://www.mcbbs.net/thread-664232-1-1.html）\n\n斜体\n对实体\n其实原型就是“第一代斜线法”（http://www.mcbbs.net/thread-511419-1-1.html）（当时说话好像不大文明啊）\n\n【步骤】\n1.先要有一排或一面比较整齐的实体阵型（生成法见“fill实体”）\n/fill 41 114 229 62 114 229 minecraft:command_block 0 replace {auto:1b,Command:summon snowball ~ ~ ~2 {NoGravity:1b,CustomName:\"turn\"}}复制代码\n（这里我生成了从实体原点向x+方向延伸21格（~21）的实体排）\n2.使用相对坐标“堆叠”思想进行tp：\nexecute @e[name=turn] ~1 ~-22 ~ tp @e[name=turn,dx=22,dy=44] ~ ~0.5 ~复制代码原理：这样一排的实体，在前面的会给后面每一个都tp一段距离，最后堆叠出的tp结果就是从前往后递增的tp距离，形成斜体（选取范围很重要）【最终效果】\n\n（顺便还fill了一个正方形（为后面作准备））\n\n\n对方块【步骤】\n方法a（相对坐标堆叠法）：\n1.准备一排实体（不斜）\n2.使用相对坐标“堆叠”思想进行clone：\nexecute @e[name=turn] ~ ~ ~-1 clone ~ ~ ~ ~22 ~44 ~ ~ ~1 ~ masked move复制代码原理：（类似实体斜体）这样一排的实体，在前面的会给后面每一列方块都clone-move一段距离，最后堆叠出的clone-move结果就是从前往后递增的move距离，形成斜体优点：可以少一些绝对坐标的要求\n缺点：这样只能允许1:1的斜体，而且比较费资源，还更可能影响到别的方块\n\n方法b（绝对与相对坐标的结合/相互转换）：\n*注：（坐标从绝对到相对我称为“推”，相对到绝对我称为“拉”）\n1.准备一些实体（可以是任何排列方式(除斜线外曲线也可以,最终“斜体”会沿着这条线来)，但必须保证每个实体的控制范围互不影响（一个实体占一个选取范围））\n2.使用绝对与相对坐标的结合/相互转换思想进行clone：\n“推”：\nexecute @e[name=turn] ~ ~ ~-1 clone ~ 114 ~ ~ 135 ~ ~ ~ ~ masked move复制代码“拉”（做出与推相反的行为即将推的动作“还原”）：\nexecute @e[name=turn] ~ ~ ~-1 clone ~ ~ ~ ~ ~100 ~ ~ 114 ~ masked move\n复制代码（注：不论推还是拉，都必须保证所需范围在读取的范围内，而且最后的目标范围取的坐标一定是目标范围中xyz最小的一角的坐标(如果不太明白可以看看一开始给出的示意图))\n原理：即绝对与相对坐标的结合/相互转换思想，当然也可以用“函数的加减”来解释（y[sub]a[/sub]=x[sup]2[/sup],y[sub]b[/sub]=x+1,y[sub]c[/sub]=y[sub]a[/sub]+y[sub]b[/sub]=x[sup]2[/sup]+x+1）\n优点：这个“斜体”会完全按照实体的排列方式进行“斜体”\n\n\n90°旋转\n（对斜体的灵活运用）基本上原理就是示意图上的了，斜体的方式可\"推\"可\"拉\"（但必须是1:1），实体在适当时加tag区分就好了（实体阵旋转没做）\n【步骤】（注意21是(边长-1)）：\n1.向上斜体\n\nexecute @e[name=turn] ~ ~ ~-1 clone ~ 114 ~ ~ 135 ~ ~ ~ ~ masked move复制代码2.上半部分过渡\n\nexecute @e[name=turn] ~ ~21 ~-1 clone ~ ~ ~ ~21 ~ ~ 41 ~ ~ masked move复制代码3.下半部分过渡\n\nexecute @e[name=turn] ~ ~ ~-1 clone ~ ~ ~ ~-21 ~ ~ 41 ~ ~ masked move复制代码4.最后的落回\n\nexecute @e[name=turn] ~ ~ ~-1 clone ~ 114 ~ ~ 156 ~ ~ ~-21 ~ masked move复制代码\n非90°旋转（做完你就会发现，这并不完美）\n\n【主要的特殊原理】：“中介”扫描法\n我们都知道，mc的fill、clone暂时不可以直接从一个实体的相对坐标到另一个实体的相对坐标。\n但是我们可以借助通过一个已知的绝对坐标作为“中介”，先把这边扫描到的东西放在“中介”处，再把“中介”处的东西放到那边，就间接地实现相对坐标到相对坐标\n利用此法，我们就可以把这个正方形分成小排，再对小排依次进行它自己的变换\n【步骤】（曾经想过多种方法，还是这种最简洁）：\n1.作出与该倾斜方向垂直的另一条实体斜线（建议用不同的名字），并给最下面的实体作上标记（建议tag）\n\n/fill 41 114 229 41 135 229 minecraft:command_block 0 replace {auto:1b,Command:summon snowball ~ ~ ~2 {NoGravity:1b,CustomName:\"turn2\"}}复制代码scoreboard players tag @e[x=41,y=114,z=231,r=1,c=1,name=turn2,tag=!mark] add mark复制代码execute @e[name=turn2] ~22 ~1 ~ tp @e[name=turn2,dx=-44,dy=22] ~-0.5 ~ ~复制代码\n方式a（会放大且有孔）：\n \n2.把正方形弄斜（推）（我这里已经有了一条实体斜线）\nexecute @e[name=turn] ~ ~ ~-1 clone ~ 114 ~ ~ 135 ~ ~ ~ ~ masked move复制代码3.高频部分（当然也要在适当时停下，我这里是用木质按钮图方便）：\n(1)存一列方块\nexecute @e[name=turn2,tag=mark] ~ ~ ~-1 clone ~ ~ ~ ~ ~21 ~ 63 ~ ~ masked move复制代码(2)对这一列方块进行“隔空”斜体\nexecute @e[name=turn2] ~ ~ ~-1 clone 63 ~ ~ 63 ~ ~ ~ ~ ~ masked move复制代码\n(3)移动一段距离（切换目标）\ntp @e[name=turn2] ~1 ~0.5 ~复制代码\n\n方式b（相当于对a的还原，但也不完全是（若完全成为还原动作，移动得在最前））\n \n2.高频部分（当然也要在适当时停下，我这里是用木质按钮图方便）：\n(1)该线斜体还原，并“存入”\nexecute @e[name=turn2] ~ ~ ~-1 clone ~ ~ ~ ~ ~ ~ 63 ~ ~ masked move复制代码\n(2)将\nexecute @e[name=turn2,tag=mark] ~ ~ ~-1 clone 63 ~ ~ 63 ~21 ~ ~ ~ ~ masked move复制代码\n(3)移动一段距离（切换目标）\ntp @e[name=turn2] ~-1 ~-0.5 ~复制代码\n3.（高频结束后）把斜的正方形弄正（拉）\nexecute @e[name=turn] ~ ~ ~-1 clone ~ ~ ~ ~ ~21 ~ ~ 114 ~ masked move复制代码\n\n\n\n这里还有个45°的\n\n（对此的改进版在此（即b中）：http://www.mcbbs.net/thread-664232-1-1.html）\n另：灵活运用的思想可以把该平面分为多个“大块”，最后的处理效果就像是“大方块的转换”（如分为多个2x2x2的大块，最后原本1x1x1的“像素美”会变成2x2x2）\n\n\n\n\n大块思想.png (3.43 KB, 下载次数: 0)\n\n下载附件\n\n2016-12-17 00:45 上传\n\n\n\n\n\n\n\n另外：http://www.mcbbs.net/thread-580307-1-1.html这并不需要太多命令方块\n \n@FHC红石 @langyo @12356789asdfg @Deing @chyx @ddung @雷鸣·翾鹗 @MsYqgzt @乾.坤 @-ZCH- \n\n\n最后是存档、pcb、基本原理图原图（百度网盘）\nhttp://pan.baidu.com/s/1o8wHqd0\n\n有些可能没法看图床，这里发网盘吧:https://pan.baidu.com/s/1eS5fjbG\n希望可以帮到大家\n当前长度: 9289 字节，系统限制: 10 到 1000000 字节。(码了几个小时)\n\n\n\n\n\n来自群组: The Minecraft Lover与The Command's Power \n\n\n\n\n\n",
    "replies": [
        {
            "author": "乙烯_中国",
            "timestamp": 1481932560,
            "txt_content": "有点意思，90度这个我就不评价了，非90度这个想法还是可以的，但是有洞就说明还是有缺陷的，也就是说还有改进空间。将实体阵列密度提升应该可以解决这个问题，但逻辑就不太一样了，不过最近比较忙，日后再看。"
        },
        {
            "author": "1205780301",
            "timestamp": 1481935140,
            "txt_content": "厉害厉害,以后拿来当解密地图的小部件应该会很酷!!"
        },
        {
            "author": "青木源",
            "timestamp": 1481935800,
            "txt_content": "让我想起了学着色器的时候的三角形和各种形的实例……"
        },
        {
            "author": "林扬骐",
            "timestamp": 1481940480,
            "txt_content": "乙烯_中国 发表于 2016-12-17 07:56\n有点意思，90度这个我就不评价了，非90度这个想法还是可以的，但是有洞就说明还是有缺陷的，也就是说还有改 ...\n这个问题其实我在比较早的时候就想过，找旋转后每个方块对应点发现有的位置是在旋转前的4个方块中间（所以标准的怕是不能保证了）\n用方式b可以做到旋转后的方块没孔（但是会导致有些方块探测不到，复制不过来）"
        },
        {
            "author": "xiaoyanghahaha",
            "timestamp": 1481941260,
            "txt_content": "恩 有点高深"
        },
        {
            "author": "玄素",
            "timestamp": 1481941440,
            "txt_content": "你和方块操作干上了啊……\n真的要做偏斜的话目前最稳还是扫描法，不涉及算法直接暴力逐一盖过去。耗时长，质量……反正本身也高不到哪去。\n然后仔细想想你这个算法哪里有坑呢？在你创建斜线实体的时候，你只处理了x。什么数学老师说三角变换可以只做一边吗？结果中的洞和放大就是没被处理的y导致的。当然一个最核心的问题就是一旦y被处理，方块的坐标就不是一一对应的了，二对一之类的情况会不时出现，后面的算法怎么处理就看你了。"
        },
        {
            "author": "langyo",
            "timestamp": 1481944860,
            "txt_content": "看了乙烯回复后，我综合得出的建议是：\n90度的比较简单不看，非90度的你得试着在mc中用数学，算法优化到适合mc这种靠@e吃饭的引擎\n\n（其实，9289字节≈8KB，相当于3章小说）\n\n最近由于各种学习，所以我本来高深的理论总是在作业堆中夭折，现在我对于理论知识甚至都得靠你们了_(:з)∠)_加油，继续学母猪高产！"
        },
        {
            "author": "pca006132",
            "timestamp": 1481960340,
            "txt_content": "嘛，扫描器还是挺一颗赛艇的玩意\n至于你那个非90°的，基本上不可能有完美的，毕竟怎么算都会有些奇怪的地方，如果要搞好那地方的话感觉就只能逐个方块进行计算了...太烦了\n\n//然后不声不响的把链接到新人手册里"
        },
        {
            "author": "爱心魔王FHC",
            "timestamp": 1481971920,
            "txt_content": "等你把图修好了我再来看\n图片全炸了怎么行\npublic.lightpic图床看不到啊……\n\n很早以前就想做个魔方的东西了，后来弃坑"
        },
        {
            "author": "林扬骐",
            "timestamp": 1481974380,
            "txt_content": "FHC红石 发表于 2016-12-17 18:52\n等你把图修好了我再来看\n图片全炸了怎么行\npublic.lightpic图床看不到啊……\n图的网盘https://pan.baidu.com/s/1eS5fjbG"
        },
        {
            "author": "六月奈",
            "timestamp": 1481976480,
            "txt_content": "非90度有点意思\n希望能找到解决缺陷的方案\n换微博图床试试？"
        },
        {
            "author": "ddung",
            "timestamp": 1485259200,
            "txt_content": "刚刚mcbbs提醒我这个帖子有提到我，来一看，什么鬼。"
        },
        {
            "author": "ddung",
            "timestamp": 1485389820,
            "txt_content": "ddung 发表于 2017-1-24 20:00\n刚刚mcbbs提醒我这个帖子有提到我，来一看，什么鬼。\n哦，看了半天才看到目录，我就说怎么找了半天也没看到at我"
        },
        {
            "author": "775717909",
            "timestamp": 1485695520,
            "txt_content": "不错的教程！"
        },
        {
            "author": "雪-ices",
            "timestamp": 1587217920,
            "txt_content": "膜拜大佬awa"
        }
    ]
}