{
    "title": "JAVA语言零基础学习 扩展篇 StringBuffer和StringBuilder",
    "author": "简单",
    "replyCount": 99,
    "timestamp": 1373876460,
    "txt_content": " 本帖最后由 海螺螺 于 2020-1-25 16:08 编辑 \n\n索引贴：http://www.mcbbs.net/thread-138969-1-1.html\n\n这个也是之前讲字符串的时候没讲的一个\n首先,我们要知道的是它和String一样,都是一个类,但不同的是String是一个静态类,可以直接赋值,但StringBuffer必须使用new关键字实例化.\n如何去做如果你认真看完了主杆篇就不会有任何问题了,我这里只重点说一下关于StringBuffer的几个方法.\nStringBuffer的追加\n  我们在String里讲过一个追加方法concat,这里将讲解一个StringBuffer的追加方法.\n代码示例\n\npublic class book {\n        \n        public static void main(String[] args)\n        {\n          StringBuffer a=new StringBuffer(\"我把教程看完了,\");\n          a.append(\"我能看懂mod制作教程了！！\");\n          a.append(\"我来给楼主评分~\");\n          System.out.println(a);\n         }\n}复制代码输出结果 \n我把教程看完了,我能看懂mod制作教程了！！我来给楼主评分~\n\n\nStringBuffer 插入\n代码示例\npublic class book {\n        \n        public static void main(String[] args)\n        {\n          StringBuffer a=new StringBuffer(\"我把教程看完了,我来给楼主评分~\");\n          a.insert(8,\"我能看懂mod制作教程了！！\");\n          System.out.println(a);\n         }\n}复制代码\n输出结果和上面是一样的,有人能总结出上面的各个量的含义吗?\n变量名.insert(int,添加的字符)\nint是在第某位前面添加，值得注意的是，和前面的一样，是从0开始数位。\n\nStringBuffer颠倒\n代码示例\npublic class book {\n        \n        public static void main(String[] args)\n        {\n          StringBuffer a=new StringBuffer(\"~分评主楼给来我！！了程教作制dom懂看能我,了完看程教把我\");\n          a.reverse();\n          System.out.println(a);\n         }\n}复制代码把字符顺序颠倒，输出和之前的一样。\nStringBuilder\n\n\n在该类的API中，是这么说的：\nThis class provides an API compatible with StringBuffer, but with no guarantee of synchronization. This class is designed for use as a drop-in replacement for StringBuffer in places where the string buffer was being used by a single thread (as is generally the case). Where possible, it is recommended that this class be used in preference to StringBuffer as it will be faster under most implementations.\n由此我们可以知道，该类是兼容StringBuffer的api的，但是该类并不是线程安全的。所以，我们不应该有线程安全要求的情况下使用它，但是在其他情况下，我们都应该使用StringBuilder,因为它比StringBuffer快的多。\n\n测试代码：\npublic class MainTest {\n    public static void main(String[] args) {\n        long l=System.currentTimeMillis();\n        StringBuffer stringBuffer = new StringBuffer();\n        for (int i=0;i<1000000;i++){\n            stringBuffer.append(i);\n        }\n        System.out.println(\"buffer.append:\"+(System.currentTimeMillis()-l) + \"ms\");\n\n        l=System.currentTimeMillis();\n        stringBuffer.toString();\n        System.out.println(\"buffer.toString:\"+(System.currentTimeMillis()-l) + \"ms\");\n\n\n        l=System.currentTimeMillis();\n        StringBuilder stringBuilder = new StringBuilder();\n        for (int i=0;i<1000000;i++){\n            stringBuilder.append(i);\n        }\n        System.out.println(\"builder.append:\"+(System.currentTimeMillis()-l) + \"ms\");\n\n        l=System.currentTimeMillis();\n        stringBuilder.toString();\n        System.out.println(\"builder.toString:\"+(System.currentTimeMillis()-l) + \"ms\");\n\n\n    }\n}复制代码测试结果：\n\nbuffer.append:82ms\nbuffer.toString:9ms\nbuilder.append:36ms\nbuilder.toString:3ms\n以上是我本机上的测试结果。\n\n扩展：\n\n示例代码中，对于字符串的拼接直接使用了加号，其实对于部分情况，字符串只是简单拼接，完全可以使用+即可，编译器会根据上下文代码自动优化成StringBuild.append.toString()。大家可以猜测下上述代码也会自动优化吗？\n\n完\n",
    "replies": [
        {
            "author": "断了的弦513",
            "timestamp": 1373876700,
            "txt_content": "额  这不就是普通的java程序么    好像还是用jdk的  "
        },
        {
            "author": "简单",
            "timestamp": 1373876760,
            "txt_content": "断了的弦513 发表于 2013-7-15 16:25 \n额  这不就是普通的java程序么    好像还是用jdk的\n饿。。。有什么问题吗？=。="
        },
        {
            "author": "西楚世界",
            "timestamp": 1373876880,
            "txt_content": "顶起，还不错················"
        },
        {
            "author": "383964923",
            "timestamp": 1373877060,
            "txt_content": "这个好简单"
        },
        {
            "author": "简单",
            "timestamp": 1373877420,
            "txt_content": "383964923 发表于 2013-7-15 16:31 \n这个好简单\n其实都不难=。="
        },
        {
            "author": "383964923",
            "timestamp": 1373878560,
            "txt_content": "简单 发表于 2013-7-15 16:37 \n其实都不难=。=\n不过可以让初学的人少走很多弯路  蛮不错的 顶起"
        },
        {
            "author": "简单",
            "timestamp": 1373878680,
            "txt_content": "383964923 发表于 2013-7-15 16:56 \n不过可以让初学的人少走很多弯路  蛮不错的 顶起\n表示当初自学java=。=各种看不懂。。。。"
        },
        {
            "author": "wqrmcbbs",
            "timestamp": 1376321100,
            "txt_content": "顶顶顶顶顶"
        },
        {
            "author": "qihuansheji",
            "timestamp": 1380882900,
            "txt_content": "00000000000000000000000000000"
        },
        {
            "author": "xiashangyu",
            "timestamp": 1382843760,
            "txt_content": "赞个！！！"
        },
        {
            "author": "1123fff",
            "timestamp": 1384451040,
            "txt_content": "回复查看隐藏教程\n\n顺便顶下楼主···"
        },
        {
            "author": "梦幻龙族Ⅱ",
            "timestamp": 1388564640,
            "txt_content": ".解理易容,好很的写"
        },
        {
            "author": "Cyanogen",
            "timestamp": 1389280800,
            "txt_content": "再次回复看隐藏内容"
        },
        {
            "author": "1124186912",
            "timestamp": 1389525900,
            "txt_content": ".....又要......."
        },
        {
            "author": "ByZYM",
            "timestamp": 1389609780,
            "txt_content": "我记得是StringBuilder？"
        },
        {
            "author": "zhukai",
            "timestamp": 1389873300,
            "txt_content": "qihuansheji 发表于 2013-10-4 18:35 \n00000000000000000000000000000\n举报不谢"
        },
        {
            "author": "CODE!CODE!",
            "timestamp": 1391823180,
            "txt_content": "Java看上去比Lua容易。。。。"
        },
        {
            "author": "◎◎◎◎◎◎",
            "timestamp": 1392200340,
            "txt_content": "赞一个！！"
        },
        {
            "author": "mingmars",
            "timestamp": 1392609060,
            "txt_content": "i 不错.可以复习一下这些.用得太少了."
        },
        {
            "author": "医生",
            "timestamp": 1392613320,
            "txt_content": "很好很强大"
        },
        {
            "author": "SJcat",
            "timestamp": 1393151940,
            "txt_content": "顶个吧顶个吧顶个吧"
        },
        {
            "author": "aliu2000",
            "timestamp": 1393154880,
            "txt_content": "呵呵。。居然还隐藏"
        },
        {
            "author": "猫鱼",
            "timestamp": 1393309620,
            "txt_content": "我把教程看完了,我能看懂mod制作教程了！！我来给楼主评分~"
        },
        {
            "author": "940258230",
            "timestamp": 1395807000,
            "txt_content": ".................."
        },
        {
            "author": "1759760728",
            "timestamp": 1396962660,
            "txt_content": "灰常好！\\(^o^)/~"
        },
        {
            "author": "zoco",
            "timestamp": 1396965840,
            "txt_content": "Wow good job"
        },
        {
            "author": "mikuand",
            "timestamp": 1397213340,
            "txt_content": "感谢分享"
        },
        {
            "author": "mikuand",
            "timestamp": 1397213400,
            "txt_content": "努力学习"
        },
        {
            "author": "xw0y",
            "timestamp": 1399993260,
            "txt_content": "隐藏内容= ="
        },
        {
            "author": "zx121418zx",
            "timestamp": 1400236560,
            "txt_content": "回复是一个困难的决定 不过大触膜拜"
        },
        {
            "author": "zx121418zx",
            "timestamp": 1400236560,
            "txt_content": "回复是一个困难的决定 不过大触膜拜"
        },
        {
            "author": "1640727878",
            "timestamp": 1402230240,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "Bryan33",
            "timestamp": 1405771860,
            "txt_content": "a.insert(8,\"我能看懂mod制作教程了！！\");\n是在StringBuffer a的第9个字符里插入我能看懂mod制作教程了!!"
        },
        {
            "author": "pdl",
            "timestamp": 1405773840,
            "txt_content": "好好看 Thinking in Java 吧"
        },
        {
            "author": "Jim_game",
            "timestamp": 1405945980,
            "txt_content": "好简单............."
        },
        {
            "author": "tsqdhh2",
            "timestamp": 1405960020,
            "txt_content": "继续学习"
        },
        {
            "author": "zzymax",
            "timestamp": 1406280060,
            "txt_content": "看看，字数不够了啊啊啊啊啊啊啊啊啊"
        },
        {
            "author": "wang960909",
            "timestamp": 1406732460,
            "txt_content": "我要看教程啦，"
        },
        {
            "author": "q549365815",
            "timestamp": 1408375620,
            "txt_content": "不怎么懂............"
        },
        {
            "author": "a1358996505",
            "timestamp": 1414804080,
            "txt_content": "谢谢我给你金币吗"
        },
        {
            "author": "ZSYQWEZ",
            "timestamp": 1415461800,
            "txt_content": "继续看答案的说~"
        },
        {
            "author": "天鹅",
            "timestamp": 1417695660,
            "txt_content": "java渣的福音！"
        },
        {
            "author": "1234567654321",
            "timestamp": 1421929860,
            "txt_content": "额他们的实现机制一样吗"
        },
        {
            "author": "cheesewoo",
            "timestamp": 1422491100,
            "txt_content": "dddd111个人创热电厂他"
        },
        {
            "author": "丶杀老师",
            "timestamp": 1425786540,
            "txt_content": "看看。。。。。。。。。。。。。。。。"
        },
        {
            "author": "Joe_C",
            "timestamp": 1427548260,
            "txt_content": "吊吊吊"
        },
        {
            "author": "nemesiszero",
            "timestamp": 1430538480,
            "txt_content": "Java新跳坑的来看教程了。。。。（差点打成娇喘了...）"
        },
        {
            "author": "tli1998",
            "timestamp": 1430881020,
            "txt_content": "恩回复支持下~"
        },
        {
            "author": "chillax",
            "timestamp": 1434209880,
            "txt_content": "水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水水"
        },
        {
            "author": "桃渊林",
            "timestamp": 1434780480,
            "txt_content": "嗯，猜一猜\n1.我把教程看完了,我能看懂mod制作教程了！！我来给楼主评分~\n这个代码表示从字符的第八位插入"
        },
        {
            "author": "yhrcyt",
            "timestamp": 1436084760,
            "txt_content": "回复，可见，……"
        },
        {
            "author": "1933757130",
            "timestamp": 1436862900,
            "txt_content": " LZ 能把？.*后面的*属性大全发一下吗，虽然LZ可能不知道我在说什么...我VB用惯了,java的属性很难记得住{:10_493:}"
        },
        {
            "author": "暗凌",
            "timestamp": 1437910980,
            "txt_content": "学习学习"
        },
        {
            "author": "yhjj",
            "timestamp": 1439302500,
            "txt_content": "233333333333333333"
        },
        {
            "author": "字符菌",
            "timestamp": 1447733520,
            "txt_content": "不能...."
        },
        {
            "author": "lishao_Gcj",
            "timestamp": 1449755100,
            "txt_content": "学到东西了"
        },
        {
            "author": "glldc",
            "timestamp": 1449925860,
            "txt_content": "干嘛隐藏"
        },
        {
            "author": "ws1918827377",
            "timestamp": 1454126700,
            "txt_content": "的确看的懂了"
        },
        {
            "author": "hueosf",
            "timestamp": 1455507780,
            "txt_content": "{:10_492:}顶一下，自己学还有很多不懂啊"
        },
        {
            "author": "PermissionDog",
            "timestamp": 1458370500,
            "txt_content": "好方，每次一到关键的地方就要回复＠_＠"
        },
        {
            "author": "旅人E",
            "timestamp": 1461652380,
            "txt_content": "少走弯路[gold_ore]"
        },
        {
            "author": "GLizxc2",
            "timestamp": 1465742160,
            "txt_content": "我把教程看完了"
        },
        {
            "author": "chenzetian",
            "timestamp": 1466355960,
            "txt_content": "前排围观"
        },
        {
            "author": "ningwang",
            "timestamp": 1466515380,
            "txt_content": "Nice!!!!!!!!!!"
        },
        {
            "author": "hhh_dada_01",
            "timestamp": 1466516340,
            "txt_content": "我只是来看看隐藏内容，顺便顶一下"
        },
        {
            "author": "奶油大大",
            "timestamp": 1466879160,
            "txt_content": "777777777777777777777"
        },
        {
            "author": "taopei",
            "timestamp": 1468654020,
            "txt_content": "12345678910"
        },
        {
            "author": "asksay",
            "timestamp": 1470051420,
            "txt_content": "ddd~~~~~~~~~~"
        },
        {
            "author": "恠丶",
            "timestamp": 1471001040,
            "txt_content": "教程都要回复。。说声谢谢把"
        },
        {
            "author": "Wisdom_魔洪",
            "timestamp": 1471249860,
            "txt_content": "这个扩展篇不怎么难- -"
        },
        {
            "author": "983055238",
            "timestamp": 1471286220,
            "txt_content": "额！！！！！！！！！！！！！！！！！！！！！"
        },
        {
            "author": "864597452",
            "timestamp": 1472606160,
            "txt_content": "\n回复查看隐藏教程\n\n顺便顶下楼主···"
        },
        {
            "author": "The-PJ",
            "timestamp": 1472618100,
            "txt_content": "比咱这个小白好多了，起码你现在写的东西都够我慢慢啃了~ 忽然想给各位大神来一组卡牌！嗯，现在就去构思一下。"
        },
        {
            "author": "andylizi",
            "timestamp": 1472726640,
            "txt_content": " 本帖最后由 andylizi 于 2016-9-1 18:54 编辑 \n\nStringBuffer在非多线程环境/局部变量中是非常不推荐使用的因为它是线程安全的。所有方法带了同步关键字，效率可能还不如直接 + 操作符呢。在局部变量（这是最常用的情况）或大部分不需要线程安全的环境（例如bukkit中除了带async的操作）中完全可以使用功能与对外接口一模一样的StringBuilder类代替。\n\n另外请问您能不能解释一下这跟concat与 + 有什么区别，为什么要使用。\n\n等等？13年？是哪个家伙把这个坟挖上来的。。。"
        },
        {
            "author": "Frost_MJF",
            "timestamp": 1472736420,
            "txt_content": "好深奥啊"
        },
        {
            "author": "guan123246895",
            "timestamp": 1472738340,
            "txt_content": "{:10_492:}"
        },
        {
            "author": "guan123246895",
            "timestamp": 1472738400,
            "txt_content": "{:10_499:}"
        },
        {
            "author": "guan123246895",
            "timestamp": 1472738400,
            "txt_content": "{:10_505:}"
        },
        {
            "author": "az860325",
            "timestamp": 1472758080,
            "txt_content": "教学文就是要先顶一个再说！"
        },
        {
            "author": "1257375501",
            "timestamp": 1472796840,
            "txt_content": "就是在，号后面追加"
        },
        {
            "author": "Arobcher",
            "timestamp": 1472869560,
            "txt_content": "赞！！！！！！！！！！！"
        },
        {
            "author": "1371002466",
            "timestamp": 1474279320,
            "txt_content": "saada 213sdadsf"
        },
        {
            "author": "qq9758325",
            "timestamp": 1474456920,
            "txt_content": "感谢楼主"
        },
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1474624920,
            "txt_content": "楼主的最句后一话实证明力了中的文序顺文字对没有阅读什么响影"
        },
        {
            "author": "xuelang123",
            "timestamp": 1475301240,
            "txt_content": "又看懂了一个楼主太帅b了"
        },
        {
            "author": "can_nia",
            "timestamp": 1475374740,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "世界边境",
            "timestamp": 1477314660,
            "txt_content": "感谢楼主！！"
        },
        {
            "author": "suxi520",
            "timestamp": 1479695160,
            "txt_content": "学习学习每日一些"
        },
        {
            "author": "孩纸@加醋",
            "timestamp": 1483324680,
            "txt_content": "小白不敢回答问题，害怕"
        },
        {
            "author": "石镐",
            "timestamp": 1485043200,
            "txt_content": "好……看上去挺厉害"
        },
        {
            "author": "帅比小樊",
            "timestamp": 1486813380,
            "txt_content": "结果是什么，期待啊！！"
        },
        {
            "author": "几乎覆盖",
            "timestamp": 1487079180,
            "txt_content": "顶顶顶，我这个初学者能看懂些"
        },
        {
            "author": "HAHAML",
            "timestamp": 1487483580,
            "txt_content": "感谢lz的教程、"
        },
        {
            "author": "502mc",
            "timestamp": 1488030180,
            "txt_content": "总结出来了"
        },
        {
            "author": "15932439295",
            "timestamp": 1488558540,
            "txt_content": "不能"
        },
        {
            "author": "Java_command",
            "timestamp": 1488652920,
            "txt_content": "等一下……\nSystem.out.println();可以直接输出StringBuffer吗？\n我记得一般都要System.out.println(a.toString());\n的吧……"
        },
        {
            "author": "zhuzhu505281",
            "timestamp": 1488692040,
            "txt_content": "谢谢扣字~很棒的教程"
        },
        {
            "author": "nIloy",
            "timestamp": 1488966660,
            "txt_content": "还要回复"
        },
        {
            "author": "OP1115",
            "timestamp": 1489305540,
            "txt_content": "6666666666666666666666666"
        }
    ]
}