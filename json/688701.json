{
    "title": "关于端口转发后的真实ip",
    "author": "zlzchuyue",
    "replyCount": 10,
    "timestamp": 1493114040,
    "txt_content": "想用阿里云的服务器作为mc服的移动线路，也就是用阿里云服务器做中转\n\n试过一些端口转发程序，但都有一个问题，那就是转发后mc服获取到的都是阿里云服务器的ip地址，无法获取真实ip地址。\n不知有什么方法可以做到获取真实ip",
    "replies": [
        {
            "author": "zlzchuyue",
            "timestamp": 1493114700,
            "txt_content": "1989617949 发表于 2017-4-25 18:15\n请问你的阿里云是 域名？还是VPS 如果是域名就好办 如果是VPS那就有点棘手了 ...\n既然是阿里云的服务器，自然是vps了，就是借用阿里云的网络来转发移动那部分用户"
        },
        {
            "author": "1989617949",
            "timestamp": 1493115300,
            "txt_content": "请问你的阿里云是 域名？还是VPS 如果是域名就好办 如果是VPS那就有点棘手了"
        },
        {
            "author": "xmdhs",
            "timestamp": 1493115900,
            "txt_content": "转发之后当然不是原始ip了 不然你怎么提速 显示真实IP就不会经过阿里的服务器了 但是要看你是要在什么地方显示真实ip"
        },
        {
            "author": "挖穿基岩",
            "timestamp": 1493116620,
            "txt_content": "这个阿里云上面应该有解决方案了，可以找阿里云的工程师说下，会帮你解决的"
        },
        {
            "author": "z2525625",
            "timestamp": 1493117280,
            "txt_content": "你可以问下阿里云的客服看看有没有提供双线的服务器."
        },
        {
            "author": "浅念哥",
            "timestamp": 1493125260,
            "txt_content": "如果我误会了什么，请指出。\n----------------------------------------------------\n为什么需要\"端口转发\"的应用程序呢\n你不觉得最好的转发就是Bungeecord吗\n直接在阿里云安装BC\nconfig中ip_forward: true设置好\n然后就没有然后了\nBC就是为了这种情况诞生的\n因为直接转发端口就等于从阿里云的IP进去了\n而BC在转发时可以将真实的IP从数据包传输过去\n这样spigot就能得到真实的IP"
        },
        {
            "author": "zlzchuyue",
            "timestamp": 1493265540,
            "txt_content": "浅念哥 发表于 2017-4-25 21:01\n如果我误会了什么，请指出。\n----------------------------------------------------\n为什么需要\"端口转发\" ...\n我服务器是单端，开启了ip_forward: true后，不从bc渠道就无法进服了"
        },
        {
            "author": "浅念哥",
            "timestamp": 1493273400,
            "txt_content": "zlzchuyue 发表于 2017-4-27 11:59\n我服务器是单端，开启了ip_forward: true后，不从bc渠道就无法进服了\nspigot.yml -> bungeecord: false"
        },
        {
            "author": "zlzchuyue",
            "timestamp": 1493290560,
            "txt_content": "浅念哥 发表于 2017-4-27 14:10\nspigot.yml -> bungeecord: false\nspigot.yml 不开，只是bc端开，还是无法获取真实ip"
        },
        {
            "author": "pdyx2828",
            "timestamp": 1493293380,
            "txt_content": "要不试试ngrok之类的内网穿透软件？\n本来我在腾讯云有个ngrok可以测试的但是过期了，懒得续费\n\n理论上讲如果你服务器获取了真实IP，那么必须有相应的软件要告诉系统这个IP要通过阿里云中转访问，而不能直通。用BC是个很巧妙的办法，不过既然不行的话我刚刚想到的就是内网穿透软件。也许ngrok转发给mc服务端的数据用的是真实IP同时修改路由表，当然也有可能是用的是本地IP。\n之前我用的时候没留意这个，你可以试试\n"
        }
    ]
}