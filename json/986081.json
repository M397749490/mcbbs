{
    "title": "Scoreboard相关，后台一天5000个错误报告，没有明确来源，在此整理一下相关问题[1.12]",
    "author": "inuyasha01",
    "replyCount": 8,
    "timestamp": 1584185520,
    "txt_content": " 本帖最后由 inuyasha01 于 2020-3-18 03:31 编辑 \n\n问题概况\n服务器核心： 1.12.2 CatServer-单线程\n最初发现时间：2019年8月后互联网中开始涌现相关BUG，但无正确的解决方案\n问题：  空指针\njava.util.concurrent.ExecutionException: java.lang.NullPointerException\n    at java.util.concurrent.FutureTask.report(FutureTask.java:122)\n    at java.util.concurrent.FutureTask.get(FutureTask.java:192)\n    at net.minecraft.util.Util.runTask(Util.java:531)\n    at net.minecraft.client.Minecraft.runGameLoop(Minecraft.java:1088)\n    at net.minecraft.client.Minecraft.run(Minecraft.java:3941)\n    at net.minecraft.client.main.Main.main(SourceFile:123)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at net.minecraft.launchwrapper.Launch.launch(Launch.java:135)\n    at net.minecraft.launchwrapper.Launch.main(Launch.java:28)\n\n触发类别：Caused by: java.lang.NullPointerException\n    at net.minecraft.scoreboard.Scoreboard.removeObjective(SourceFile:178)\n    at net.minecraft.client.network.NetHandlerPlayClient.handleScoreboardObjective(NetHandlerPlayClient.java:1929)\n    at net.minecraft.network.play.server.SPacketScoreboardObjective.processPacket(SourceFile:54)\n    at net.minecraft.network.play.server.SPacketScoreboardObjective.processPacket(SourceFile:10)\n    at net.minecraft.network.PacketThreadUtil$1.run(PacketThreadUtil.java:22)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at net.minecraft.util.Util.runTask(Util.java:529)\n另一种同类别错误：Caused by: java.lang.NullPointerException    at net.minecraft.scoreboard.Scoreboard.removeTeam(SourceFile:228)\n    at net.minecraft.client.network.NetHandlerPlayClient.handleTeams(NetHandlerPlayClient.java:2034)\n    at net.minecraft.network.play.server.SPacketTeams.processPacket(SourceFile:117)\n    at net.minecraft.network.play.server.SPacketTeams.processPacket(SourceFile:13)\n    at net.minecraft.network.PacketThreadUtil$1.run(PacketThreadUtil.java:22)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at net.minecraft.util.Util.runTask(Util.java:529)\n\n详情描述描述：\n服务端不会保存任何错误报告，客户端不会崩溃，但会快速增加报告。\n（故排除MOD问题，报告里也未怀疑任何MOD，所有标签均为LCHIJA正常标签）\n在主世界不会报错，到另一个超平坦世界会报错但不崩溃，\n在返回主世界前，客户端10秒1卡，卡顿解除后本地多一个crash-report，如此循环。\n-----------------------------------------------------------------------------------------------------\n（估计是我安装了FoamFix和VanillaFix所以玩家客户端不崩溃，\n下面没装Vanilla的服主玩家是每隔10秒强制被退一次游戏，也不崩端）\n-----------------------------------------------------------------------------------------------------\n此外。发现BUG前后这段时间内，没对世界进行任何更改，那个超平坦世界也几乎没开放过\n只是对服务端增删了一些插件（怀疑可能为插件问题，或者Transformer的问题）后续更新DEBUG细节\n\n相同受害者 - 及同类错误报告    相同问题的受害者（均未解决）：  有些人已经遭罪它半年多了\nhttps://www.mcbbs.net/thread-895239-1-1.html\nhttps://www.mcbbs.net/thread-916288-1-1.html\nhttps://www.minecraftforge.net/forum/topic/76505-crash-on-server/?tab=comments#comment-367189\nhttps://www.minecraftforge.net/forum/topic/76505-crash-on-server/?tab=comments#comment-367165\n...继续发现中\n解决方案高可疑插件：    ScoreBoardPlus -> 换MiaoBoard解决问题\n    TAB -> onPlayerJoin会产生一个相同的错误报告 -> 解决方案待测试  \n【更新】插件背了锅，问题出在本地客户端Transformer中，详情见楼下\n\n所有报告均为同类报告，想查看完整报告可对比上方网址中的所有报告\n期待回帖，一起解决问题。\n\n\n",
    "replies": [
        {
            "author": "EmptyLava",
            "timestamp": 1584185520,
            "txt_content": " 本帖最后由 EmptyLava 于 2020-3-14 19:51 编辑 \n\n上传完整的crash report\n首先不大可能是mod问题\n插件的话\n怀疑是miaoboard这种修改计分板的插件，你可以先删除这类插件\n仍不行可以尝试用二分法排查插件，或者删除scoreboard内所有team和准则。另外服务器内好像有个scoreboard.dat文件，有的话可以删掉试试\n\n如果你有能力的话，还可以拆包看这两个文件位置到底是做什么的\n\n at net.minecraft.scoreboard.Scoreboard.removeTeam(SourceFile:228)\n    at net.minecraft.client.network.NetHandlerPlayClient.handleTeams(NetHandlerPlayClient.java:2034)\n\n有能力解决的人早就排除完了，而发帖的人多是没接触过报错的，而且这种报错是罕见的(不是指报错频率，而是指报错的服务器数量)，不去拆包什么的根本就不知道为什么会报错，怎么给你解决呢\n只能给你提供几个办法，用排除法总能解决"
        },
        {
            "author": "inuyasha01",
            "timestamp": 1584187080,
            "txt_content": "EmptyLava 发表于 2020-3-14 19:42\n上传完整的crash report\n首先不大可能是mod问题\n插件的话\n感谢回复，\n的确是Scoreboard相关插件的问题 （我这边能95%程度上肯定是）\n\n被自己的一句话给点醒了。。。10秒1卡。\n我想起来前几天把ScordBoardStats插件换成了ScordBoardPlus，刷新率是10秒1次。。\n\n后来用yum热卸载了ScordBoardPlus，那片世界的卡顿恢复了，错误也不在客户端狂刷了\n（三天30kb的文件刷了快100M）只是目前热重载ScordBoardPlus以后问题也不出现了（直接重启服务器会出现，估计是在地图上执行了什么操作需要被刷新。。吧）\n\n也怀疑可能是ScordBoardPlus加载PlaceholderAPI中与world相关API产生的错误\n不过这插件其实还是个很火的插件来着\nhttps://www.spigotmc.org/resourc ... s-a-lot-more.42605/\n有空还是准备给作者反馈下。。\n\n\n以后如果继续出现，就把这帖子转到茶馆讨论吧。。"
        },
        {
            "author": "inuyasha01",
            "timestamp": 1584187200,
            "txt_content": " 本帖最后由 inuyasha01 于 2020-3-15 20:50 编辑 \n\n@young_child  @MC_XO \n\n希望同类受害者们回复一下，想问下你们的服务器有没有安装ScordBoardPlus或者TAB\n\n【更新】\n除ScordBoardPlus之外，经过二分法测试\n\nTAB插件在onPlayerJoin也会报错，错误指令也是ScoreBoard相关。。"
        },
        {
            "author": "竹春十",
            "timestamp": 1584190380,
            "txt_content": "换个插件吧、这个插件好用吗？\n\n同款插件 LiteBoard 支持PAPI 配置也方便"
        },
        {
            "author": "inuyasha01",
            "timestamp": 1584200400,
            "txt_content": "竹春十 发表于 2020-3-14 20:53\n换个插件吧、这个插件好用吗？\n\n同款插件 LiteBoard 支持PAPI 配置也方便\n嗯 换成MiaoBoard测试了。目前没什么问题  感谢推荐Lite 有空看看"
        },
        {
            "author": "竹春十",
            "timestamp": 1584200760,
            "txt_content": "inuyasha01 发表于 2020-3-14 23:40\n嗯 换成MiaoBoard测试了。目前没什么问题  感谢推荐Lite 有空看看\n那个插件本来就不是特别好用、有同类插件就在同类插件里换着用就行了、Miaoboard也不太好用 后台频繁刷 playerpoints 获取失败 还是推荐Lite  望采纳"
        },
        {
            "author": "inuyasha01",
            "timestamp": 1584473220,
            "txt_content": " 本帖最后由 inuyasha01 于 2020-3-18 03:29 编辑 \n\n【更新】\n\n由于删除插件可以解决问题，暂时告一段落。\n\n但，同类插件都会出现问题，那就不是插件的问题了。\n\n服务端没问题，被排除。\nScoreboard已被清空还有BUG，没问题，被排除。\n插件本身也没问题，空测试服无BUG，不该背锅。\n\n由于报告中所给出的最下级目录为：\n    at net.minecraft.launchwrapper.Launch.main(Launch.java:28)\n那么就是客户端的事情了——> 于是我把目光转移到了——>launchwrapper： Transformer\n报告中所写得Trs共有如下内容：\n  LaunchWrapper: 35 active transformer(s)\n\n\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.PatchingTransformer\n                           - Transformer: org.spongepowered.asm.mixin.transformer.Proxy\n                           - Transformer: optifine.OptiFineClassTransformer\n                           - Transformer: $wrapper.net.minecraftforge.fml.common.asm.transformers.SideTransformer\n                           - Transformer: $wrapper.net.minecraftforge.fml.common.asm.transformers.EventSubscriptionTransformer\n                           - Transformer: $wrapper.net.minecraftforge.fml.common.asm.transformers.EventSubscriberTransformer\n                           - Transformer: $wrapper.net.minecraftforge.fml.common.asm.transformers.SoundEngineFixTransformer\n                           - Transformer: $wrapper.customskinloader.forge.loader.LaunchWrapper\n                           - Transformer: $wrapper.bre.smoothfont.asm.Transformer\n                           - Transformer: $wrapper.com.anotherera.core.ACBFClassTransformer\n                           - Transformer: $wrapper.xyz.ajp.makezoomzoom.asm.MZZClassTransformer\n                           - Transformer: com.mumfrey.liteloader.transformers.event.EventProxyTransformer\n                           - Transformer: com.mumfrey.liteloader.launch.LiteLoaderTransformer\n                           - Transformer: com.mumfrey.liteloader.client.transformers.CrashReportTransformer\n                           - Transformer: guichaguri.betterfps.transformers.PatcherTransformer\n                           - Transformer: guichaguri.betterfps.transformers.MathTransformer\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.DeobfuscationTransformer\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.AccessTransformer\n                           - Transformer: pl.asie.foamfix.coremod.FoamFixAT\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.ModAccessTransformer\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.ItemStackTransformer\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.ItemBlockTransformer\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.ItemBlockSpecialTransformer\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.PotionEffectTransformer\n                           - Transformer: org.spongepowered.asm.mixin.transformer.Proxy\n                           - Transformer: $wrapper.pl.asie.foamfix.coremod.FoamFixTransformer\n                           - Transformer: $wrapper.luohuayu.anticheat.asm.AntiCheatTransformer\n                           - Transformer: org.spongepowered.asm.mixin.transformer.Proxy\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.TerminalTransformer\n                           - Transformer: org.spongepowered.asm.mixin.transformer.Proxy\n                           - Transformer: com.mumfrey.liteloader.transformers.event.EventTransformer\n                           - Transformer: com.mumfrey.liteloader.common.transformers.LiteLoaderPacketTransformer\n                           - Transformer: com.mumfrey.liteloader.transformers.event.json.ModEventInjectionTransformer\n                           - Transformer: org.spongepowered.asm.mixin.transformer.Proxy\n                           - Transformer: net.minecraftforge.fml.common.asm.transformers.ModAPITransformer\n\n发现删除所有Trs后可以修复服务端插件不兼容客户端TransformerMods的问题\n\n\n正在进行二分法测试，特此更新\n"
        },
        {
            "author": "inuyasha01",
            "timestamp": 1584473700,
            "txt_content": " 本帖最后由 inuyasha01 于 2020-3-18 03:46 编辑 \n\n最终结果为：VanillaFix-1.0.9\n\n测试了 1.0.10-99  也存在此问题。但没办法删除，毕竟优化程度太好了。。所以。。\n"
        }
    ]
}