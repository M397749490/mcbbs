{
    "title": "油猴脚本-屏蔽用户头像/签名",
    "author": "匿名",
    "replyCount": 0,
    "timestamp": 1570219200,
    "txt_content": " 本帖最后由 匿名 于 2019-10-5 11:58 编辑 \n\n如果某些用户的头像看着难受，但还不至于被勒令修改，而他还一直水帖频繁出现的话，就需要一个屏蔽脚本了。(签名档同理)\n于是我写了一个屏蔽用户头像/签名的脚本(主动点进用户空间的不屏蔽)。\n可自行增加需要屏蔽的UID，里面已经写了两个示例了。\n未安装Tampermonkey的可自行百度安装方法及添加自定义脚本的方法\n以下是脚本\n\n\n// ==UserScript==\n// @name         屏蔽MCBBS用户头像和签名\n// @include      *//www.mcbbs.net/thread*\n// @include      *//www.mcbbs.net/redirect.php*\n// @include      *//www.mcbbs.net/forum-redirect-tid*\n// @include      *//www.mcbbs.net/forum-viewthread-tid*\n// @include      *//www.mcbbs.net/forum.php?mod=viewthread*\n// @include      *//www.mcbbs.net/forum.php?mod=forumdisplay*\n// @include      *//www.mcbbs.net/forum-*.html\n// @run-at       document-body\n// ==/UserScript==\n\n(function() {\n    const linkLen = (location.origin + '/home.php?mod=space&uid=').length;\n\n    const blockList = {\n        // 用户UID\n        2704361: {\n            // 是否屏蔽头像\n            avatar: true,\n            // 是否屏蔽签名\n            sign: true\n        },\n        // 再随便来一个示例\n        666: {\n            // 是否屏蔽头像\n            avatar: false,\n            // 是否屏蔽签名\n            sign: false\n        },\n    };\n\n    blockAll();\n\n    var mo = new MutationObserver(function(allmutations) {\n        blockAll();\n    });\n    mo.observe(document.querySelector(\"body\"), {childList: true, subtree: true});\n\n    function blockAll() {\n        var users = document.getElementsByClassName(\"favatar\");\n        for (var user of users) {\n            var link = user.getElementsByTagName(\"a\")[0];\n            if (link) {\n                var block = blockList[link.href.substr(linkLen)];\n                if (block) {\n                    if (block.avatar) {\n                        var avatar = user.getElementsByClassName(\"avatar\")[0];\n                        if (avatar) avatar.remove();\n                    }\n                    if (block.sign) {\n                        var table = user;\n                        do {\n                            table = table.parentElement;\n                        } while (table.tagName !== \"TABLE\");\n                        var sign = document.getElementById(table.id).getElementsByClassName(\"sign\")[0];\n                        if (sign) sign.remove();\n                    }\n                }\n            }\n        }\n\n        users = document.getElementsByClassName(\"by\");\n        for (user of users) {\n            link = user.getElementsByTagName(\"a\")[0];\n            if (link) {\n                block = blockList[link.href.substr(linkLen)];\n                if (block && block.avatar) {\n                    link.removeAttribute(\"c\");\n                }\n            }\n        }\n    }\n})();\n复制代码\n\n",
    "replies": []
}