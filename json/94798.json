{
    "title": "关于mcbbs.com之我见",
    "author": "orzfly",
    "replyCount": 26,
    "timestamp": 1362218340,
    "txt_content": "在下不过常常在这里潜水，虽然在下自己运营着几个网站。于是今天看到 com 仿冒 net 以及管理员至今不采取有效行动以及各位玩家对此技术不了解导致众多神秘论，在下觉得有必要用在下的有限知识给论坛做点贡献。\n\n如何做到的？\n============\n我看到有些坛友发现帖子会马上被同步，事实上各位用过代理吗？有很多网页的，代理服务，访问他们的网站输入别人网站的地址，就可以从他们网站上看到别的网站的内容。\n\n没错，com 一定使用了类似的技术。做过网站弄过服务器的人一般都会知道有种东西叫做“反向代理”。\n\n> 反向代理（Reverse Proxy）方式是指以 代理服务器 来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的 客户端 ，此时代理服务器对外就表现为一个服务器。\n> ——百度百科\n\n所谓反向代理不仅可以用来代理内网服务器，代理外网服务器也是可以的。这次 com 的服务器便是这定义里“代理服务器”的角色，而 net 作为它的“内部网络服务器”。\n\n因此两边任何东西都是同步的也就不足为奇了，com 把所有接到的请求全部转发给 net，因此实际上访问起来会感觉是完全一样的。根据诸多网友反馈，访问 com 明显迟钝于 net，同时：\n\nnet 的 ip 是 [\"61.147.108.153\",\"101.71.245.14\"] 是扬州电信和浙江联通。\ncom 的 ip 是 [\"180.210.243.205\"] 是北京。\n\n根据反向代理的原理，用户访问 com 会把数据发到北京，然后对方发到扬州或浙江再拿回来发给用户。\n\n不过这个证据并没有说服力。\n\n广大玩家应该自觉抵制 com。通过反向代理建设的冒牌网站都是别有用心的。对方假服务器可以获得各种 cookies 信息，相当于对方服务器可以以任何在对方服务器上登录过的用户的身份从事各种操作。\n\n我的结论的疑点\n==============\n根据反向代理的原理，mcbbs 服务器应该能够拿到对方代理服务器的 ip。但是，我在 net 和 com 上分别登录了我的测试帐号，在个人信息里看到的上次活动 ip 均为我的 ip。而根据我所了解的有限知识，在 com 上登录之后应该显示我是从对方 ip 登录。\n\n我不清楚贵站的 discuz 是否修改过以接受代理访问时传来的用户 ip。但是默认情况下 discuz 是检测 remote addr，而不会检测任何请求头中提供的其他 ip。\n\n然而，通过 http 头，又可以看到微妙的不同，\n\n\norzfly@rp:~$ curl -I mcbbs.com\nHTTP/1.1 301 Moved Permanently\nServer: nginx\nDate: Sat, 02 Mar 2013 08:56:32 GMT\nContent-Type: text/html\nConnection: keep-alive\nX-Powered-By: PHP/5.3.20-1~dotdeb.0\nlocation: forum.php\nExpires: Sat, 02 Mar 2013 08:56:37 GMT\nCache-Control: max-age=5\n\norzfly@rp:~$ curl -I www.mcbbs.net\nHTTP/1.1 301 Moved Permanently\nServer: nginx/1.2.6\nDate: Sat, 02 Mar 2013 09:10:17 GMT\nContent-Type: text/html\nConnection: keep-alive\nX-Powered-By: PHP/5.3.20-1~dotdeb.0\nlocation: forum.php\n复制代码\n\n在下因此很好奇对方是如何做到的。\n\n致站点管理组\n============\n贵站可以考虑在网页中加入 Javascript 代码检测 hostname 是否为 net 及跳转以达到在客户端屏蔽 com 的行为。\n\n贵站在服务器上也可屏蔽对方镜像服务器用于抓取贵站数据的 IP 访问。\n\n后记\n====\n在下只是个渣渣，对这方面也没有深入研究，况且在下并不代表官方立场以及在下并未掌握关键证据。以上一切只是在下基于在下能获得的有限资料上推理而来。\n\n在下必然/难免存在这样或者那样的错误，和，还请各位指正。",
    "replies": [
        {
            "author": "1792896473",
            "timestamp": 1362218400,
            "txt_content": "什么意思？ 我看不懂额"
        },
        {
            "author": "youyou",
            "timestamp": 1362218400,
            "txt_content": "又是大神! 大神! 大神!"
        },
        {
            "author": "MarcoV",
            "timestamp": 1362218400,
            "txt_content": "意义不明。。LZ你再说神马"
        },
        {
            "author": "sabo970",
            "timestamp": 1362218400,
            "txt_content": "感谢LZ~~~"
        },
        {
            "author": "Danny仔",
            "timestamp": 1362218460,
            "txt_content": "沒看懂....."
        },
        {
            "author": "sylqiuyifeng",
            "timestamp": 1362218520,
            "txt_content": "膜拜大神……"
        },
        {
            "author": "john180",
            "timestamp": 1362218880,
            "txt_content": "好高端的样子~"
        },
        {
            "author": "专业坑爹三十年",
            "timestamp": 1362219000,
            "txt_content": "发现一只野生触手{:10_535:}"
        },
        {
            "author": "262949130000",
            "timestamp": 1362219060,
            "txt_content": " 本帖最后由 262949130000 于 2013-3-2 18:11 编辑 \nsabo970 发表于 2013-3-2 18:00 \n感谢LZ~~~\n看来昂素素是美术党撒~=w="
        },
        {
            "author": "1025891364",
            "timestamp": 1362219120,
            "txt_content": "完全不懂耶~"
        },
        {
            "author": "756677537",
            "timestamp": 1362219360,
            "txt_content": "1025891364 发表于 2013-3-2 18:12 \n完全不懂耶~\nwwe.mcbbs.com和www.mcbbs.net net是正确的 com有手机版 是冒牌的"
        },
        {
            "author": "1025891364",
            "timestamp": 1362219420,
            "txt_content": "756677537 发表于 2013-3-2 18:16 \nwwe.mcbbs.com和www.mcbbs.net net是正确的 com有手机版 是冒牌的\n= =什么玩意！"
        },
        {
            "author": "IceFreeze",
            "timestamp": 1362219600,
            "txt_content": "为什么我看懂了→.→\n不过PHP没学过↓.↓"
        },
        {
            "author": "sabo970",
            "timestamp": 1362219780,
            "txt_content": "262949130000 发表于 2013-3-2 18:11 \n看来昂素素是美术党撒~=w=\n==为啥现在才看出来"
        },
        {
            "author": "262949130000",
            "timestamp": 1362219840,
            "txt_content": "sabo970 发表于 2013-3-2 18:23 \n==为啥现在才看出来\n我还以为昂素素也是软硬件技术流撒~"
        },
        {
            "author": "sabo970",
            "timestamp": 1362219900,
            "txt_content": "262949130000 发表于 2013-3-2 18:24 \n我还以为昂素素也是软硬件技术流撒~\n数学是我的天敌（所以程序技术100%无脑）"
        },
        {
            "author": "紫枫",
            "timestamp": 1362219900,
            "txt_content": "毛都看不懂\n哭了\n不明觉厉"
        },
        {
            "author": "PTmissionary",
            "timestamp": 1362219960,
            "txt_content": "手机码字辛苦了。"
        },
        {
            "author": "262949130000",
            "timestamp": 1362220080,
            "txt_content": "sabo970 发表于 2013-3-2 18:25 \n数学是我的天敌（所以程序技术100%无脑）\n那文学和外国语呢撒？"
        },
        {
            "author": "sabo970",
            "timestamp": 1362220860,
            "txt_content": "262949130000 发表于 2013-3-2 18:28 \n那文学和外国语呢撒？\n文科还行--外语嘛 口语不错的"
        },
        {
            "author": "262949130000",
            "timestamp": 1362220920,
            "txt_content": "sabo970 发表于 2013-3-2 18:41 \n文科还行--外语嘛 口语不错的\n不错，昂素素真是好孩纸撒~【误"
        },
        {
            "author": "5uuwinn",
            "timestamp": 1362236940,
            "txt_content": "这文章好长啊!      额"
        },
        {
            "author": "大葱之灵@",
            "timestamp": 1362239040,
            "txt_content": "作者: 大葱之灵@    时间: 2013-3-2 23:44"
        },
        {
            "author": "1193122131",
            "timestamp": 1362239160,
            "txt_content": "大神~~大神``膜拜~"
        },
        {
            "author": "玖爺NT",
            "timestamp": 1362240840,
            "txt_content": "……囧叔不管在什麼地方都一樣那麼牛逼那麼威武霸氣那麼觸在下的狗眼在流血啊啊啊啊！"
        },
        {
            "author": "su3155323",
            "timestamp": 1362242640,
            "txt_content": "为什么自己看不懂的东西就要叫做高端..."
        }
    ]
}