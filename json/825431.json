{
    "title": "求人帮忙写一个自定义NPCMod的脚本",
    "author": "CHHBlock",
    "replyCount": 7,
    "timestamp": 1540375920,
    "txt_content": "npc到50%血的时候会触发一条指令，然后npc回满血或被打死后复活之前不会再触发\n能做到吗，如果不能就算了",
    "replies": [
        {
            "author": "Hueihuea",
            "timestamp": 1540375920,
            "txt_content": " 本帖最后由 skpsk自己家 于 2018-10-24 19:15 编辑 \nfunction GetPer(mini,max){\nreturn mini/max*100;\n}\nfunction command(str){\ntry{\nnpc.executeCommand(str)\n}catch(err){}}\nvar CanCmd;\nCanCmd=(CanCmd==null)? true:CanCmd;\nif(CanCmd==true&&GetPer(npc.getHealth(),npc.getMaxHealth())<=50){\ncommand(\"这里输入你要的指令\");\nCanCmd=false;\n}\nif(npc.getHealth()==npc.getMaxHealth()||!(npc.isAlive())){\nCanCmd=true;\n}复制代码优化版:\nfunction GetPer(mini,max){\nreturn mini/max*100;\n}\nfunction command(str){\ntry{\nnpc.executeCommand(str)\n}catch(err){}}\nvar CanCmd;\nCanCmd=(CanCmd==null)? true:CanCmd;\nif(CanCmd==true&&GetPer(npc.getHealth(),npc.getMaxHealth())<=50){\ncommand(\"这里输入你要的指令\");\nCanCmd=false;\n}\nif((npc.getHealth()==npc.getMaxHealth()||!(npc.isAlive()))&&CanCmd==false){\nCanCmd=true;\n}复制代码"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1540377480,
            "txt_content": " 本帖最后由 skpsk自己家 于 2018-10-24 18:47 编辑 \n\n麻烦提供游戏版本XD\n其实你也可以看看我的签名栏\n\n1.7.10:\n不知道有没有写错 你试试吧\n就是血量低于或等于满血的50%时\n回复满血(一条生命只能触发一次 死亡后回复)\n是这个意思吧 你表达有语病XD\nfunction GetPer(mini,max){\nreturn mini/max*100;\n}\nvar CanReSpawn;\nCanReSpawn=(CanReSpawn==null)? true:CanReSpawn;\nif(CanReSpawn==true&&GetPer(npc.getHealth(),npc.getMaxHealth())<=50){\nCanReSpawn=false;\nnpc.setHealth(npc.getMaxHealth());\n}复制代码"
        },
        {
            "author": "CHHBlock",
            "timestamp": 1540378080,
            "txt_content": "skpsk自己家 发表于 2018-10-24 18:38\n麻烦提供游戏版本XD\n其实你也可以看看我的签名栏\n1.7.10，谢谢"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1540378080,
            "txt_content": "CHHBlock 发表于 2018-10-24 18:48\n1.7.10，谢谢\n已附上代码\n请F5刷新XD"
        },
        {
            "author": "CHHBlock",
            "timestamp": 1540378560,
            "txt_content": "skpsk自己家 发表于 2018-10-24 18:48\n已附上代码\n请F5刷新XD\n我是这样想的\n50%血的时候触发一次指令\n这个指令只有复活或脱战后才能再次执行\n是否能做到呢，麻烦了"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1540378620,
            "txt_content": "CHHBlock 发表于 2018-10-24 18:56\n我是这样想的\n50%血的时候触发一次指令\n这个指令只有复活或脱战后才能再次执行\n哦\n不对吧XD\n我觉得一开始你的需要是回复满血吧\n我记错了吗\n稍等"
        },
        {
            "author": "不二语",
            "timestamp": 1540379340,
            "txt_content": "[启用钩子]npc.setTempData(\"SKL\",1)\n [更新钩子]if(npc.getTempData(\"SKL\") == 1 \n|| npc.getHealth() < npc.getMaxHealth()*0.5)\n{脚本;\nnpc.setTempData(\"SKL\",0)}\n [伤害钩子]if(event.getDamage() == 0){npc.setTempData(\"SKL\",1)}\n[死亡钩子]npc.setTempData(\"SKL\",1)"
        }
    ]
}