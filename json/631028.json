{
    "title": "【已解决】 1.8+ 如何获取玩家光标位置所指方块XYZ值",
    "author": "Eldon",
    "replyCount": 5,
    "timestamp": 1472981580,
    "txt_content": " 本帖最后由 Eldon 于 2017-10-15 08:51 编辑 \n\n如何获取玩家光标位置所指方块 XYZ 值\n是用 block.getLocation() 吗?\n但是我翻了下 QuickShop 的源<blockquote>for (BlockIterator bIt = new BlockIterator((Player)sender, 10); bIt.hasNext();)复制代码但是还是不懂怎么用，求告.\n\n\n\n\n最后用的是 LivingEntity 的方法 getTargetBlock 获取视线上的最后方块, transparent 为可透过方块种类的 Set 合集，如果 null 值就只包括空气，maxDistance 是最远距离。方法返回值为欲获得的 Block 对象\npublic Block getTargetBlock(Set<Material> transparent, int maxDistance);复制代码例子:\n// p 可以为 LivingEntity 的子类, 比如 Player\nBlock b = p.getTargetBlock(null, 100); // 获取视线上的最后方块\nLocation loc = b.getLocation(); // 获取 Block 的 Location 对象\ndouble x, y, z; // x, y, z 在 Location 中数据类型为 double\nx = loc.getX(); // 获取 x\ny = loc.getY(); // 获取 y\nz = loc.getZ(); // 获取 z\nSystem.out.println(Joiner.on(\"\\t\").join(x, y, z).toString()); // 输出结果, Joiner 是 Guava 中的功能复制代码\n\n当年的自己真是 too young too simple, sometimes naive.\n",
    "replies": [
        {
            "author": "RE_OVO",
            "timestamp": 1473417540,
            "txt_content": "这个看样子是用Iterator进行遍历所指的方向的所有的方块并且用Shopmanager判断是不是商店。\n"
        },
        {
            "author": "Eldon",
            "timestamp": 1473418860,
            "txt_content": "jebme 发表于 2016-9-9 18:39\n这个看样子是用Iterator进行遍历所指的方向的所有的方块并且用Shopmanager判断是不是商店。\n ...\n那么要怎么样才能解决标题所说的问题呢？"
        },
        {
            "author": "RE_OVO",
            "timestamp": 1473420840,
            "txt_content": "貌似有个方法是player类的\n<player>.getTargetBlock()，具体方法名可能差不多，没记清楚\n具体翻文档吧"
        },
        {
            "author": "OAO_miao",
            "timestamp": 1473422580,
            "txt_content": "那个b.getLocation()就是位置呀，bukkit这个BlockIterator并不是很精确，如果需要更精确，大概要用nms的rayTrace来获取了。\n（getTargetBlock和getLineOfSight也是用的BlockIterator）"
        },
        {
            "author": "摇摇车",
            "timestamp": 1507982100,
            "txt_content": "p.getEyeLocation()复制代码\n\n这就可以了吧..."
        }
    ]
}