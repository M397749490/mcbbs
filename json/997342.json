{
    "title": "插件如何实现右键一个实体但实际是另一个实体",
    "author": "南柯郡守",
    "replyCount": 6,
    "timestamp": 1585149360,
    "txt_content": "可能题目说的稀里糊涂\n大概就是实现玩家右键了一个实体但实际上是右键了一个特定的村民\n我原本是想调用PlayerInteractEntityEvent 但好像没办法实现  只能对事件进行监听\n\n\n或者是说有没有办法能模拟PlayerInteractEntityEvent事件\n就是那种我向这个事件传递参数让他去执行\n\n\nextends 好像不太管用？",
    "replies": [
        {
            "author": "南外丶仓鼠",
            "timestamp": 1585150320,
            "txt_content": " 本帖最后由 南外丶仓鼠 于 2020-3-26 00:17 编辑 \n\n你需要Bukkit.getPluginManager().callEvent(new PlayerInteractEntityEvent(参数忘记了));\n这样可以自行触发你的事件"
        },
        {
            "author": "a8105",
            "timestamp": 1585150740,
            "txt_content": " 本帖最后由 a8105 于 2020-3-25 23:41 编辑 \n\n如果你指的是玩家右键A实体,然后向其他插件模拟触发玩家右键了B实体\n你可以在PlayerInteractEntityEvent的时候判断是否为A,是的话\nnew PlayerInteractEntityEvent,传递右键的实体为B\nPlayerInteractEntityEvent event=new PlayerInteractEntityEvent(player,entityB);\n接下来向其他插件触发事件:\nBukkit.getPluginManager().callEvent(event);\n即可\n需要注意的是你也同时需要在自己的PlayerInteractEntityEvent里判断是否为b实体然后结束运行,否则会无限循环\n\n假如你指的是玩家右键实体A,打开村民B的界面,如果村民B是插件打开的其他界面等等,上面的方式即可\n如果是村民交易界面,建议不依靠村民B,直接新建一个交易界面即可\n交易界面详见:https://hub.spigotmc.org/javadoc ... chantInventory.html\n\n@南外丶仓鼠 请勿误导,PlayerInteractEvent和PlayerInteractEntityEvent根本是两个不同是事件,其次提问内容也根本不包含PlayerInteractEvent\n"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1585151520,
            "txt_content": " 本帖最后由 969756790 于 2020-3-25 23:59 编辑 \na8105 发表于 2020-3-25 23:39\n如果你指的是玩家右键A实体,然后向其他插件模拟触发玩家右键了B实体\n你可以在PlayerInteractEntityEvent的 ...\n我用创建DoubleChest的方法创建Merchant他刷报错\njava.lang.IllegalArgumentException: Cannot open an inventory of type MERCHANT复制代码\n之前尝试的时候也是这样 \n还是说交易界面需要用不一样的方法创建呢\n我的代码是\nMerchantInventory inv = (MerchantInventory) Bukkit.getServer().createInventory((InventoryHolder)null, InventoryType.MERCHANT);复制代码\n\n好吧 我看到一行The current list of inventories that cannot be created via Bukkit.createInventory(org.bukkit.inventory.InventoryHolder, org.bukkit.event.inventory.InventoryType) are:\nCREATIVE, CRAFTING and MERCHANT复制代码看来是只能间接搞了\n\n"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1585152180,
            "txt_content": "南外丶仓鼠 发表于 2020-3-25 23:32\n你需要Bukkit.callEvent(new PlayerInteractEvent(参数忘记了));\n这样可以自行触发你的事件 ...\n你这个我还是参考了callEvent方法 谢了"
        },
        {
            "author": "a8105",
            "timestamp": 1585152240,
            "txt_content": "969756790 发表于 2020-3-25 23:52\n我用创建DoubleChest的方法创建Merchant他刷报错\n\n之前尝试的时候也是这样 \n你需要:\nBukkit.createMerchant(String title);\n以及:\nplayer.openMerchant(Merchant,Boolean)  参数为交易界面  是否强制交易\n\n具体可参考:https://www.spigotmc.org/threads/custom-merchant.265769\n"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1585152780,
            "txt_content": "a8105 发表于 2020-3-26 00:04\n你需要:\nBukkit.createMerchant(String title);\n以及:\n感谢大佬\n我以后会认真翻javadoc的\n感谢！！"
        }
    ]
}