{
    "title": "[未解决][Bukkit]有没有一次性监听所有事件的方法",
    "author": "沫苍",
    "replyCount": 8,
    "timestamp": 1562995680,
    "txt_content": "如题 我希望能一次性监听所有事件 也就是触发任何事件都会响应\n听群里人说Spigot里面有类似的方法 有dalao知道在哪吗\n",
    "replies": [
        {
            "author": "2212082263",
            "timestamp": 1562996760,
            "txt_content": "你可以装一个yum试试啊"
        },
        {
            "author": "woaiwen1234",
            "timestamp": 1562997060,
            "txt_content": "2212082263 发表于 2019-7-13 13:46\n你可以装一个yum试试啊\n不现实，任何事件都监听的话我觉得光是从服务器性能考虑就容易出问题,但是你貌似可以在一个方法体中监听多个事件"
        },
        {
            "author": "2212082263",
            "timestamp": 1563000120,
            "txt_content": "后台刷出来的log也可能是一种监听"
        },
        {
            "author": "lliiooll",
            "timestamp": 1563077220,
            "txt_content": "可以在org.bukkit.event了解下"
        },
        {
            "author": "沫苍",
            "timestamp": 1563095460,
            "txt_content": "lliiooll 发表于 2019-7-14 12:07\n可以在org.bukkit.event了解下\n我都是阅读完所有文档后再提问的\n请仔细读题好么？一次性监听所有事件"
        },
        {
            "author": "July_Summer",
            "timestamp": 1563096000,
            "txt_content": "@EventHandler\npublic void onEvent(Event e){\n     String event = e.getEventName();\n}复制代码"
        },
        {
            "author": "沫苍",
            "timestamp": 1563096300,
            "txt_content": "July.七月 发表于 2019-7-14 17:20\n不行 Event 没有静态方法 getHandlerList() 你这么写会报错"
        },
        {
            "author": "海螺螺",
            "timestamp": 1563102540,
            "txt_content": "bukkit的api是做不到这一点的\n\n既然上面都说了yum，那你大可以反编译yum看看是怎么做的\n\n从yum的代码仓库cv了部分关键代码，大概就是重新包装一个EventExecutor，调用时处理逻辑\n\n\n        List<RegisteredListener> listeners = HandlerList.getRegisteredListeners(plugin);\n        for (RegisteredListener listener : listeners) {\n            try {\n                    EventExecutor originalExecutor = Reflect.on(listener).get(\"executor\");\n                    ListenerInjector listenerInjector = new ListenerInjector(originalExecutor, plugin);\n                    Reflect.on(listener).set(\"executor\", listenerInjector);\n            } catch (Throwable e) {\n                e.printStackTrace();\n            }\n        }\n复制代码\n\n\n你也可以把craftserver类里面的pluginmanager给换成自己的，然后callEvent的时候自行处理，虽然这个方法在1.13后失效"
        }
    ]
}