{
    "title": "[ForgeMod开发]基础教程：图标和材质",
    "author": "hao19891029",
    "replyCount": 2,
    "timestamp": 1381391340,
    "txt_content": " 本帖最后由 hao19891029 于 2013-10-10 16:38 编辑 \n\n注：下面文章基本转自Forge论坛里的教程（原地址），游戏版本为1.6.2。缓慢更新。。。\n索引贴地址：点我 \n目标\n\n学会如何给你创造的物品和方块赋上材质\n提前准备\n\n建立了你的基础Mod已经创建了你自己的物品或者方块安装了画图工具\n图标/材质 文件\n    默认的Minecraft的材质尺寸大小是16像素宽和16像素高（16x16）。一般的材质大小都是（16x16），（32x32），或者16的倍数宽高。\n    如果你再测试的时候遇到下面的错误，意味着你的材质的宽和高必须相同。\n[SEVERE] [Minecraft-Client] Unable to parse animation metadata from generic:textures/items/genericItem.png: broken aspect ratio and not an animation\n在1.6.1以后的Minecraft/MinecraftForge里，材质以对应它们自己名字的图片文件形式存放，并且在运行游戏时才会把各个材质拼接在一起。每个方块/物品都有不同的材质贴在它们表面。方块的每个表面都有不同的材质文件。\n添加材质方法\n    首先，创建你自己的材质图片文件。图片必须为.png格式。\n    当你创建好你的材质图片后，在你的“src”文件夹下建立两个如下所示的包（package）：\nassets.MODNAME.textures.blocksassets.MODNAME.textures.items\n    把“MODNAME”替换成你自己的mod的名字，并且要用小写。例如教程里示例的mod，将会是如下格式：\nassets.genericmod.textures.blocksassets.genericmod.textures.items\n    不同的材质文件是单独存放的。如果你想看看原版游戏的材质，你可以解压“Minecraft 1.6.1 jar”文件，然后在\n“ /textures”文件夹下可以看到。下面的截图演示了物品材质存放的文件结构：\n\n\n\n\nTextures_folder_screenshot.png (37.27 KB, 下载次数: 8)\n\n下载附件\n\n2013-10-10 14:29 上传\n\n\n\n\n\n材质代码\n    当载入材质的时候，物品的和方块的是有一点点区别的。物品使用“func_111206_d”方法而方块使用“func_111022_d”方法。用两个不同方法的好处是如果物品和方块有关联那你可以在同一个类的构造方法里调用这两个方法，或者在物品/方块变量被初始化的时候调用。\n构造函数的设置\n    如果被赋予材质的是一个物品，将下面的代码添加到你的构造函数中：\nfunc_111206_d(\"generic:genericItem\");复制代码   如果是一个方块，那么将下面的代码添加到你的构造函数中：\nfunc_111022_d(\"generic:genericBlock\");复制代码generic：代表“generic”就是存放材质的“/assets/”的下一级路径。你必须在“\\src\\minecraft\\”文件夹里面建立存放材质的文件夹。“func_111206_d”（或者对于方块则是“func_111022_d”）设置一个叫“field_111026”的域来指向你的材质文件。“registerIcons”方法(这个方法作用是从上面的域指向的路径取出材质然后载入材质)是预设用来从“func_111023_E”方法取得返回值的，猜猜看这个方法的返回值会是神马？没错，返回值就是“func_111206_d”（对于物品来说），或者“func_111022_d”（对于方块来说）。\n    举个例子，我们在构造方法里写代码：“func_111206_d(\"generic:genericItem\");”，那么材质文件的路径就为“[MCP]/src/minecraft/assets/generic/textures/items/genericItem.png”。\n需要注意的是这个方法只能识别在mod名字和物品名字之间存在一个冒号，如果有多个冒号会被转换成文件名的一部分（例如：“Base:Mod:Item”会被识别为在名为“Base”文件夹里的“Mod:Item.png”文件）。\n提示：“func_111206_d”和“func_111022_d”在之前版本的MCP里名字是“setTextureName()”。\n方法链设置\n    当多个物品使用同一个类的构造方法时是非常有用的。代码如下：\npackage tutorial.generic;\n\nimport net.minecraft.block.Block;\nimport net.minecraft.block.material.Material;\nimport net.minecraft.creativetab.CreativeTabs;\nimport net.minecraft.item.Item;\nimport net.minecraft.item.ItemStack;\nimport cpw.mods.fml.common.Mod;\nimport cpw.mods.fml.common.Mod.EventHandler;\nimport cpw.mods.fml.common.Mod.Init;\nimport cpw.mods.fml.common.Mod.Instance;\nimport cpw.mods.fml.common.Mod.PostInit;\nimport cpw.mods.fml.common.Mod.PreInit;\nimport cpw.mods.fml.common.SidedProxy;\nimport cpw.mods.fml.common.event.FMLInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPostInitializationEvent;\nimport cpw.mods.fml.common.event.FMLPreInitializationEvent;\nimport cpw.mods.fml.common.network.NetworkMod;\nimport cpw.mods.fml.common.registry.GameRegistry;\nimport cpw.mods.fml.common.registry.LanguageRegistry;\n\n@Mod(modid = \"Generic\", name = \"Generic\", version = \"0.0.0\")\n@NetworkMod(clientSideRequired = true, serverSideRequired = false)\npublic class Generic {\n\n        @Instance(\"Generic\")\n        public static Generic instance;\n\n        private static Item genericItem;\n        public static Item genericIngot;\n\n        public static Block genericDirt;\n\n        @SidedProxy(clientSide = \"tutorial.generic.client.ClientProxy\", serverSide = \"tutorial.generic.CommonProxy\")\n        public static CommonProxy proxy;\n\n        @EventHandler\n        public void preInit(FMLPreInitializationEvent event) {\n                genericItem = new GenericItem(5000)\n                                .func_111206_d(\"generic:genericItem\");\n                genericIngot = new GenericItem(5001).setMaxStackSize(16)\n                                .setUnlocalizedName(\"genericIngot\")\n                                .func_111206_d(\"generic:genericIngot\");\n                genericDirt = new GenericBlock(500, Material.ground).setHardness(0.5F)\n                                .setStepSound(Block.soundGravelFootstep)\n                                .setUnlocalizedName(\"genericDirt\")\n                                .setCreativeTab(CreativeTabs.tabBlock)\n                                .func_111022_d(\"generic:genericDirt\");\n                // 然后再注册物品和方块\n        }\n\n        @EventHandler\n        public void load(FMLInitializationEvent event) {\n                LanguageRegistry.addName(genericItem, \"Generic Item\");\n                LanguageRegistry.addName(genericIngot, \"Generic Ingot\");\n        }\n\n        @EventHandler\n        public void postInit(FMLPostInitializationEvent event) {\n                // Stub Method\n        }\n}复制代码\n\n关于GUI的或者自定义的渲染\n    GUI（图形用户界面，例如游戏里的背包界面、容器界面、熔炉界面等）通常直接使用渲染引擎来渲染。如下所示：\n@Override\n  protected void drawGuiContainerBackgroundLayer(float f, int i, int j)\n  {\n    //你的GUI在这里被渲染，你唯一要做的就是让路径指向你的GUI图片文件\n    GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);\n    this.mc.renderEngine.func_110577_a(new ResourceLocation(\"genericmod\",\"textures/gui/container.png\"));\n    int x = (width - xSize) / 2;\n    int y = (height - ySize) / 2;\n    this.drawTexturedModalRect(x, y, 0, 0, xSize, ySize);\n  }\n复制代码   需要注意的是，这些材质图片的注册方法不像物品和方块的材质一样，并且命名格式也不同（不能像“GenericMod:Container”这样写）。但是它存放的路径结构跟物品方块的还是一样的。在上面的示例代码中，存放物品方块材质文件的文件夹“items”、“blocks”旁边是一个叫“gui”的文件夹，就是存放GUI图片文件的地方。提示：对于GUI材质的尺寸比较特别，它必须是 256x256的（或者512x512等），不然当你运行游戏时会收到错误报告。\n照着做了但材质没有作用\n    明明照着教程做了但是你的材质仍然不能显示？下面是一些常见的但不容易被发现的问题：\n如果你是开发1.5.x的mod，那么你要将“/assets”改成“/mods”（1.5.x与1.6.x有区别）如果你的“MODNAME”是----“GenericMod”，那么将它改成“genericmod”，这里必须小写才能识别。\n结束\n    给物品方块赋材质并不困难。仔细看看这个教程，你就会做得很好了。因为这个教程只有一点点方法，所以整个mod的代码就不贴出来了。\n附上两个材质图片：\n方块：\n\n\n\n\nstonebrick_carved.png (413 Bytes, 下载次数: 12)\n\n下载附件\n\n2013-10-10 15:17 上传\n\n\n\n\n\n物品：\n\n\n\n\napple.png (241 Bytes, 下载次数: 18)\n\n下载附件\n\n2013-10-10 15:17 上传\n\n\n\n\n\n下一步做什么？\n    如果你的创建方块或创建物品的教程才看到一半，你应该返回去继续看完它们。\n\n\n",
    "replies": [
        {
            "author": "halfcigarette",
            "timestamp": 1381560120,
            "txt_content": "回帖是美德。。。"
        },
        {
            "author": "codefans",
            "timestamp": 1384152900,
            "txt_content": "现在不能用的了。  原来是翻译wiki的"
        }
    ]
}