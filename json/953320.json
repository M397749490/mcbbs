{
    "title": "[Tutorial][CPS] 还在用CC?手把手教你写一个完美的DeluxeMenus菜单",
    "author": "AzureHanChen",
    "replyCount": 17,
    "timestamp": 1580972460,
    "txt_content": " 本帖最后由 AzureHanChen 于 2020-3-10 15:46 编辑 \n\n\n手把手教你写一个完美的DeluxeMenus菜单\n\n\n\n\n1  前言\n\n写本帖的原因是我看到现在大部分小白服主比较尴尬\n\n大多数人都吹爆TrMenu,但又太过于复杂,看不懂\n\n但是用CC菜单,功能太少,不支持PAPI变量... (省略1w字)\n\n这时候我认为DeluxeMenus是个特别不错的用来过渡的插件\n\n但既然是过渡了,所以我认为本贴不欢迎以下几种服主\n\n* 还在使用CatServer(Pro),Mohist等核心的服主 (DM不支持Forge服务端)\n* 认为CC是「天下最强」菜单插件的服主\n* 没有YAML语法基础 && 开服基础,不思进取的服主\n* 觉得自己基础很\"厚\",看完了之后一脸懵的服主\n* 「那你能帮帮我吗」,「我不会就要问啊」,「求一个菜单模板」,「你爱答不答」\n* 认为这个教程没用 (那您现在可以点击右上角的 × )复制代码\n本帖子使用Markdown编写,感谢4z大佬的MM2BC\n\n(*) 觉得太丑了?那你去物管啊(怒吼\n\n(*) 下文读起来可能有些啰嗦,不过既然是「手把手」了吗..\n\n\n\n\n2  准备工作\n\n下文教程的环境\n\n* Spigot 1.12.2\n* PlaceholderAPI 2.10.4\n* DeluxeMenus 1.12.0 (最新)复制代码\n不过请注意,DeluxeMenus 1.10.6及以后的版本\n\n不支持1.8.X及更低的核心版本 (例如 Paper 1.8.8 )\n\n如需使用DM的话,请使用1.10.5及以前的版本\n\n因为金钱,点券等变量,都要依靠PAPI作为中继,\n\n所以我会在每一个菜单开始,讲清楚要从云端(ecloud)下载什么拓展\n\n\n\n\n3  一些你可能会用到的网址\n\nPAPI变量大全\n\nhttps://github.com/PlaceholderAPI/PlaceholderAPI/wiki/Placeholders\n物品Material大全\n\nhttps://helpch.at/docs/1.8.8/org/bukkit/Material.htmlhttps://helpch.at/docs/1.12.2/org/bukkit/Material.htmlhttps://helpch.at/docs/1.13.2/org/bukkit/Material.htmlhttps://helpch.at/docs/1.14.4/org/bukkit/Material.htmlhttps://hub.spigotmc.org/javadocs/spigot/org/bukkit/Material.html (*)\n*: 会随着最新版本的Spigot而更新\n\n附魔ID大全 (*)\n\nhttps://hub.spigotmc.org/javadocs/spigot/org/bukkit/enchantments/Enchantment.html\n*:请务必注意,部分物品是不能附任何魔的,部分物品只能附一部分的魔\n\n用来做自定义旗帜的材料\n\n染料颜色 https://hub.spigotmc.org/javadocs/spigot/org/bukkit/DyeColor.html旗帜类型 https://hub.spigotmc.org/javadocs/spigot/org/bukkit/block/banner/PatternType.html\nMC音效ID大全\n\nhttps://gist.github.com/Andre601/1ab3b4fabd0010ae241156333491c379\n\n\n\n4  DM插件的命令与权限\n\n*本来以为命令和权限只有原搬运贴中的那一点,结果打开plugin.yml后...\n\n*下文提到的任何权限,OP都默认拥有\n\n /dm* reload \n 重载插件配置文件&所有菜单\n 在重载过程中会为所有玩家关闭菜单,不必担心刷物品问题\n deluxemenus.admin\n\n*:也可以是deluxemenus/deluxemenu/dmenu\n\n /dm list\n 查看所有已经加载的菜单\n deluxemenus.admin\n\n /dm open <菜单名字> (玩家)\n 为(玩家)打开一个菜单\n 不填玩家则是自己\n 不指明玩家: deluxemenus.open\n 指明玩家: deluxemenus.open.others\n\n deluxemenus.open.bypass\n 拥有此权限可以无视任何菜单的打开条件复制代码\n\n\n\n5  下载&安装DM\n\n如果没有特殊情况,那我建议您去原帖下载并且给予一个5星review ()\n\n不过如果您「懒」亦或者其他原因,我在这里准备了1.12.0版本的DM插件\n\n同样,既然都有DeluxeMenus了,肯定也少不了PAPI(PlaceholderAPI)\n\nPAPI下载地址 (2.10.4)\n\nhttps://www.spigotmc.org/resources/placeholderapi.6245/ (原帖)https://www.lanzous.com/i92n3if (网盘)\n下载下来后无脑拖进plugins即可\n\n\n\n\n6  怎么不把所有菜单都挤进config.yml?\n\n接上面,当你启动完毕服务器后 (看到 Done! )\n\n应该可以在plugins/DeluxeMenus中找到config.yml\n\n打开后,发现了clip大鸽送给你的一个模板菜单\n\n但是把所有的菜单都挤到一个config.yml里既不美观,也没有秩序\n\n那么你可以参照下面修改下config.yml\n\ndebug: false\ncheck_updates: true\ngui_menus:\n  example:\n  #注册的名字,可以通过/dm open 注册的名字 打开菜单\n    file: example.yml\n    #该菜单在gui_menus文件夹中的名字复制代码\n修改完成后点击保存(*),然后使用/dm reload\n\n*:我在这里建议使用VS Code(更美观),而不是憨憨记事板\n\n重置完插件配置后,您应该可以在plugins/DeluxeMenus中找到一个gui_menus菜单\n\n打开后发现自动生成了一个菜单,跟刚才在config.yml中修改前一模一样\n\n\n\n\n7  了解一个菜单结构\n\n有心的服主应该都发现了,为什么每一行之间还有空格呢\n\n如果了解过YAML语法的话,这种形式叫做「缩进」\n\n就好比父子关系一样 (雾 , 从整个菜单层面到菜单中的一个物品\n\n下面是DM的结构关系\n\n菜单设置1: ''\n菜单设置2: false\n物品:\n  物品1:\n    物品1的Material: STONE\n    物品1的Slot: 0\n  物品2:\n  ...复制代码\n\n\n\n8  了解一些代名词\n\nWARNING 我建议仔细阅读本章 在下面会用到\n\nString\n字符串\n可以在这里填写任意\n中/英文字符和一部分特殊符号\n在DM中支持往里填写PAPI变量\n需要用引号标注开头和结尾复制代码Int\n\"阿拉伯数字\"*\n可以在这里填写\n-2147483648 ~ 2147483647\n不需要带引号复制代码\n(*)官方译名:向下取整函数\n\nabcd\n在这里填写中/英文字符,不可以有空格\n不可以有PAPI变量复制代码Action\n动作,也称操作,附属于String,\n所以要用引号标注开头结尾.\n↓一般长这样↓\na:\n- 'Action'\n- 'Action'\n由\n动作类型[空格]动作参数[空格]附加参数\n组成复制代码动作类型大全\n!区分大小写!\n\n* [player] \n* 从玩家的角度执行一个命令\n* 动作参数不需要带/\n* (例) [player] spawn\n\n* [console]\n* 从控制台角度执行一个命令\n* 动作参数不需要带/,一般需要指明玩家\n* (例) [console] points give %player_name% 2020\n\n* [commandevent]\n* 从玩家角度执行一个未在plugin.yml注册过的\"快捷\"命令\n* 动作参数不需要带/\n\n* [message]\n* 为该玩家发送一条消息,支持颜色代码(&)和PAPI变量\n* (例) [message] C.P.S小组诚招打字员,加入q球群⑨Ⅴ六⑨零⑥四⑦Ⅷ\n\n* [connect]\n* 为该玩家连接到另一个服务器,\n* 命令参数必须是在Bungee的config.yml中注册的服务器名\n* (例) [connect] BedWars①_恰豆豆\n\n* [json]\n* 为该玩家发送一条JSON格式编译后的消息\n* (错例) [json] &e123456%player_name%\n* (例) [json] {\"text\":\"&7你收到了来自CPS可爱萌妹兔子的一封信 <<<点击查看\",\"clickEvent\":{\"action\":\"open_url\",\"value\":\"https://shang.qq.com/wpa/qunwpa?idkey=f946c3ce841c66409bac42facfab5ecce20df454ac96f4181279cfb928e39d93\"}}\n\n* [sound]\n* 为该玩家发送一段MC中的音效\n* (例) [sound] ENTITY_VILLAGER_YES\n* 用心看帖子的人都知道操作参数(音效ID)在哪里找#run\n\n* [broadcastsound]\n* 为该服务器里的所有玩家播放一段MC中的音效\n* 不支持跨服!\n* (例) [sound] ENTITY_VILLAGER_NO\n\n* [refresh]\n* 关闭再重新打开这个菜单\n* 你也可以理解为变相刷新菜单\n* 不需要\n\n* [takemoney]\n* 扣除玩家在与Vault挂钩的经济系统中的余额\n* 例如Essentials自带的经济系统就与Vault挂钩\n* 但PlayerPoints并不\n* 操作参数是Int\n* (例) [takemoney] 2020\n\n* [openguimenu]\n* 打开另一个菜单 (必须是DeluxeMenus中的菜单)\n* 操作参数是菜单在DM的config.yml中注册的名字\n* (例) [openguimenu] example\n\n* [close]\n* 关闭这个菜单\n* 不需要跟操作参数\n复制代码附加参数大全\n\n* <delay=Int>\n* 上方Int的单位是Ticks\n* 1Ticks = 0.05 s\n* 1s = 20Ticks\n\n* <chance=Int>\n* 上方Int必须在0~100之间\n* 即执行前面操作的概率是 Int/100\n复制代码\n\n\n\n9  教你写一个条件\n\n为了更符合正常的学习流程,我先在这里讲如何写一个条件\n\n注意 这里也许需要一定的Java基础,不过没有也无妨\n\n你下面所看到的\n\nopen_requirement:left_click_requirement:right_click_requirement:view_requirement:等结尾是 requirement 的选项\n即为条件选项\n条件选项配合多个物品的优先级\n\n可以做到一些譬如 \n\n在同一个物品位置上,如果玩家有100点券就可以看到钻石,没有则看到泥土\n\n的一类操作\n\n接下来由我讲解一下如何写一个条件(requirement)\n\n下面是两个例子,用来解释到底条件写在哪里\n\nview_requirement:\n  requirements:\n  #表示下面所有的每一子项都是条件\n    one:\n    #条件1\n      ......\n    cps:\n    #条件2\n      ......复制代码left_click_requirement:\n  requirement:\n  #表示下面所有的每一子项都是条件\n    one:\n    #条件1\n      type: ......\n    two:\n    #条件2\n      type: ......\n  deny_commands:\n  #如果无法全部满足上面的条件,将会执行下面的操作\n  - 'Action'\n  - 'Action'复制代码\n那么就来了解下每个条件是怎么写的吧\n\ntype: has permission\npermission: 'abcd.abcd'\n\n* 检测玩家是否拥有这个权限复制代码type: has money\namount: Int\n\n* 检测玩家是否拥有一定的金钱 (即≥)\n* 从与Vault挂钩的经济系统获取数据进行比对复制代码type: string equals\ninput: 'String'\noutput: 'String'\n\n* 检测输入与输出是否完全一致(大小写也相同)\n\n* 例子\ntype: string equals\ninput: '%player_name%'\noutput: 'AzureHanChen'\n\n* 检测玩家的ID是不是AzureHanChen复制代码type: string equals igonecase\ninput: 'String'\noutput: 'String'\n\n* 检测输入与输出是否完全一致(忽略大小写)\n\n* 例子\ntype: string equals igonecase\ninput: '%player_name%'\noutput: 'azurehanchen'\n\n*检测玩家的ID是否是azurehanchen (忽略大小写)复制代码type: has item\nmaterial: 物品ID(全英文)大写\ndata: 子ID\namount: Int\nname: 'String'\nlore:\n- 'String'\n- 'String'\n\n* 需要玩家的背包里含有amount个material+data物品\n* 且名字是name,lore必须逐行对应\n\n* material,amount是必选的,其他看情况删减\n复制代码type: javascript\nexpression: 'JS'\n\n用过老版DM或者在用TrMenu的服主应该会比较明白\n就是填写一些JS表达式,使用&&表并列,使用||表其一,使用!表(如果)不\n其实上面的所有简化条件都是由这个转来的\n\n下面是一些格式\n\n* (String[A]).equals(String[B])\n* 输入A与输出B是否完全一致\n* (例) (%player_name%).equals.(\"AzureHanChen\")\n* 玩家的名字是否是AzureHanChen\n\n* (String[A]).equalsIgoneCase(String[B])\n* 输入A与输入B除大小写外是否完全一致\n* (例) (%player_name%).equalsIgoneCase.(\"AzureHanChen\")\n* 玩家的名字在忽略的大小写的情况下是否是AzureHanChen\n\n* A (符号) B\n* A 是否 (符号) B\n* 只能用于A和B都是Int的场景中\n\n* 符号列表\n* == 等于\n* > 大于\n* >= 大于或等于\n* <= 小于或等于\n* < 小于\n\n* (错例) %player_name% == AzureHanChen\n* (错例) \"%playerpoints_points\" >= 233 \n* 那肯定有人要问了,为什么这个不对呢\n* 首先,如果按照上面写,那么写出来是这样的\n* expression: '\"%playerpoints_points%\" >= 233'\n* 首先'里面可以套\"是对的,但是结合前面的内容\n* 这样%playerpoints_points%就成了一个个体,而且还存在一个\"\n* 那么无疑就成了String了,拿String和Int作比较,这个结果可想而知\n* 另外也肯定有人问: 那我将错就错,我把233也套上\"不就行了吗?\n* 首先,我敢肯定这是个迷惑行为,拿String和String作比较,这样不就违反了\n* 我一开始讲到的 \"只能是Int和Int做对比\" 原则了吗\n\n* 说了一大堆,总结: Int外面莫套壳,Int就和Int比\n\n* 那么怎么表达一个反向条件呢\n* 例如一开始讲到的 \"如果玩家的名字是AzureHanChen,那么此条件通过\"\n* 那么怎么实现如果 \"如果玩家的名字不是AzureHanChen,那么此条件通过\"呢?\n\n* !+一个JS格式\n* 例如expression: '!(%player_name%).equals(\"AzureHanChen\")'\n* 就可以实现\"如果玩家的名字不是AzureHanChen,那么此条件通过\"\n\n* 那么如何实现两个JS都通过此javascript条件才通过呢\n* JS1 && JS2\n* 例如 \n* expression: '(%player_name%).equals(\"AzureHanChen\") && %playerpoints_points% >= 1'\n* 玩家的名字必须是AzureHanChen*且*玩家的%playerpoints_points%≥1\n\n* 那如何实现二者其一通过,此条件就通过呢\n* JS1 || JS2\n* 例如\n* expression: ' %vault_eco_balance% >=233 && %playerpoints_points% >= 1'\n* 玩家的Vault经济系统金额必须≥233*也或者*玩家的%playerpoints_points%≥1\n\n(*) 憋说我啰嗦,不同的货币在不同的服务器有不同的命名,因此我用代名词来指认\n(*) 如果在你服的PlayerPoints是金币,我说点券你会明白?复制代码\n\n\n\n10  了解DM的菜单层面的一些设置\n\nmenu_title: String\n#菜单的标题,打开菜单(GUI)后最顶上的名字\n#也可以理解为容器的名字\n[必有]复制代码open_command: abcd\n打开菜单的快捷指令复制代码open_command:\n- abcd\n- abcd\n与上方一样,打开菜单的多个快捷指令\n但与上方只能二选一复制代码open_commands:\n- 'Action'\n- 'Action'\n成功打开菜单后的操作\n(如果不满足所有打开条件将不会执行)复制代码inventory_tyepe: 见下方\nGUI界面的类型,支持\n* CHEST (箱子) (默认)\n* ANVIL (铁砧)\n* WORKBENCH (工作台)\n* DISPENSER (发射器)\n* FURNACE (熔炉)\n* HOPPER (漏斗)复制代码size: Int\n菜单能容纳物品的个数\n俗称菜单大小\n必须是9的倍数,并且在9~54之间\n只有上方的inventory_type忽略或填CHEST时才有效\n如果inventory_type填写的不是CHEST,那么无论这里设置多少都没用\n(必须||在上方显示)复制代码args:\n  abcd: Int\n  abcd: Int\nargs_usage_message: String\n\n打开菜单时传入的参数\n比如我输入/菜单的快捷指令 first second third\n那么first,second,third均是传入菜单的参数\n你可以使用{abcd}来作为变量\n如果玩家少参数或者多参数,则会发送args_usage_message的提示信息\n\n* 下面举个例子\n\nargs:\n  first: 1\n  second: 1\n  third -1\nargs_usage_message: \"你的参数不正确\"\n\n当玩家输入/example azurehanchen wohaotua wohaonana zapic时\n菜单里的{first}变量将会被解析为azurehanchen\n同理,{second}将会被解析为wohaotua\n{third}将会被解析为wohaonana zapic\n此时-1的意思时第三个及以后的所有参数都作为变量\n也就是参数可以≥3个\n\n* 另一个例子\n\nargs:\n  first: 1\n  second: 1\n  third 1\nargs_usage_message: \"你的参数不正确\"\n\n当玩家输入/example a b时,因为没传入third变量,所以会提示玩家\"你的参数不正确\"\n当玩家输入/example a b c d时,因为多了一个变量,所以也会提示玩家\"你的参数不正确\"\n这是因为刚才的-1变成了1,因此参数必须==3个\n\n注: args_usage_message是可选参数,但如果没有且玩家输入的参数不正确,就不会有反应\n\n(可选)复制代码update_interval: Int\n\n更新菜单内变量的频率\n单位为\"ticks\" , 1s=20ticks\n注意,并不等于刷新菜单\n\n比如更新前玩家没达到条件,看到了物品A\n那么更新后,即使玩家满足了条件,也仍然只能看到物品A\n此时需要在某些地方添加[fresh]动作参数,就可以破阵了\n(可选)复制代码items:\n\n后面什么都不用写\n只是告诉插件下面该写物品了复制代码\n\n\n\n11 物品部分\n\n一个菜单里当然有很多物品\n\n那么一个物品可以有什么参数呢\n\nmaterial: ABCD\ndata: Int\n\n物品的ID,必须是全英文大写(?)字符\n例如STONE\n而一些特殊的物品,例如羊毛等存在子ID的物品\n则可以通过data实现\n但是如果没有子ID的物品请勿设置,否则可能会抛出空指针错误\n\n比如橙色羊毛\n\nmaterial: WOOL\ndata: 1\n\n而如果是想显示一个子ID为0的物品\n则可以忽略data参数,例如白色羊毛\n\nmaterial: WOOL\n\n(material必选)复制代码\nTIPS - material里可以填写什么\n\n- 物品ID (例如STONE)\n- 某个返回值是物品ID的变量 (placeholder-变量)\n- 头颅-某个玩家的ID (head;玩家ID)\n- 头颅-某个返回值是玩家的变量 (head;%player_name%)\n- 头颅-传入参数 (head;{某个传入参数})\n- 头颅-纹理ID (basehead-纹理ID)\n  -你可以在 https://minecraft-heads.com/ 中\n  - 找到一个CustomHead 然后他的Value值就是纹理ID\n- EpicHeads插件提供的头颅 (heads-ID)\n- HeadDatabase插件提供的头颅 (hdb-ID) (见图1&2)复制代码\n\n\n图1\n\n\n图2\namount: Int\n\n显示的物品数量\n必须≤对应物品的最大堆叠\n例如末影珍珠,最大不能设置超过16\n\n不支持填写变量来实现动态数量\n\n(可选)复制代码dynamic_amount: 'PAPI变量'\n\n动态物品数量\n与上方的amount二选一\n支持填写一些返回值是数字的变量\n不过仍然需≤最大堆叠数量\n\n(可选)复制代码banner_meta:\n- 染料颜色;旗帜图案\n- 染料颜色;旗帜图案\n\n旗帜参数,只有当material为BANNER时才可以\n你可以同时堆叠多个参数,以达到你想要的结果\n\n注: 染料颜色和旗帜图案可以在上方提到的网址找到\n\n(可选)复制代码\n既然都到这了,就直接给你吧染料颜色旗帜图案\nrgb: Int,Int,Int\n\n某些物品的\"颜色\"\n例如皮革盔甲,\n\n例如\nrgb: 38,192,210复制代码\n\n\ndisplay_name: String\n\n物品显示的名字\n支持PAPI变量以及颜色样式代码\n如果忽略该参数\n就会自动根据客户端语言返回对应物品的名字\n\n(可选)复制代码lore:\n  - String\n  - String\n\n物品的Lore\n支持PAPI变量以及颜色样式代码\n但最好请指明颜色\n如果直接上字会变成极为憨憨的斜体紫色字\n\n(可选)复制代码slot: Int\nslots:\n- Int\n- Int\n\n物品的位置\n\n以上两个二选一,\nslots支持一个物品在多个位置出现\n但与slot必须二选一,两者必须出现一个,但也不能同时出现复制代码priority: Int\n\n该物品在所在位置上的优先级\n\n建议配合条件一起使用,否则跟没用一样复制代码view_requirement:\n  requirements:\n    条件1:\n      type: xxx\n    条件2:\n      type: xxx\n\n看到这个物品的前提条件复制代码比如在0位置上有两个物品:\n物品A 优先级为1 条件是拥有test.test权限\n物品B 优先级为2 没有条件\n\n那么没有test.test权限的玩家只能看到物品B\n反之,则可以看到物品A复制代码enchantments:\n  - 附魔ID;等级\n  - 附魔ID;等级\n\n附魔选项\n! 部分物品不能被附魔\n! 部分物品只能附部分魔\n你可以给物品附多个魔,前提是它支持 (见图1)\n\n当然如果你不想看见那犯人的附魔提示\n(Protection I)\n\n您可以使用\nhide_enchantments: true\n来隐藏附魔提示\n(使用后见图2)复制代码\n\n\n图1\n\n\n图2\nhide_attributes: true / false\n\n隐藏物品属性提示\n比如上图中的 +8 Armor\n(使用后见图3)复制代码\n\n\n图3\nhide_effects: true / false\n\n隐藏药水效果\n比如No Effects\n(使用前[或false] 见图4)\n(使用后见图5)复制代码\n\n\n图4\n\n\n图5\nupdate: true / false\n\n是否更新该物品显示名字,Lore中的变量\n如果是(true),那么将按照GUI设置的(update_interval)频率进行更新\n不会重新计算优先级复制代码left_click_commands:\n#左键单击执行的操作\n  - \"Action\"\n  - \"Action\"\nright_click_commands:\n#右键单击执行的操作\n  - \"Action\"\n  - \"Action\"\nmiddle_click_commands:\n#中键单击执行的操作\n  - \"Action\"\n  - \"Action\"\nshift_left_click_commands:\n#Shift+左键点击执行的操作\n  - \"Action\"\n  - \"Action\"\nshift_right_click_commands:\n#Shift+右键点击执行的操作\n  - \"Action\"\n  - \"Action\"复制代码left_click_requirement:\n#左键单击的前提条件\n  requirements:\n    条件1:\n      type: xxx\n    条件2:\n      type: xxx\n  deny_commands:\n  #如果无法全部达到,那么执行的操作\n    - \"Action\"\n    - \"Action\"\nright_click_requirement:\n#右键单击的前提条件\n  requirements:\n    条件1:\n      type: xxx\n    条件2:\n      type: xxx\n  deny_commands:\n  #如果无法全部达到,那么执行的操作\n    - \"Action\"\n    - \"Action\"\nmiddle_click_requirement:\n#中键单击的前提条件\n  requirements:\n    条件1:\n      type: xxx\n    条件2:\n      type: xxx\n  deny_commands:\n  #如果无法全部达到,那么执行的操作\n    - \"Action\"\n    - \"Action\"\nshift_left_click_requirement:\n#Shift+左键点击的前提条件\n  requirements:\n    条件1:\n      type: xxx\n    条件2:\n      type: xxx\n  deny_commands:\n  #如果无法全部达到,那么执行的操作\n    - \"Action\"\n    - \"Action\"\nshift_right_click_requirement:\n#Shift+右键点击的前提条件\n  requirements:\n    条件1:\n      type: xxx\n    条件2:\n      type: xxx\n  deny_commands:\n  #如果无法全部达到,那么执行的操作\n    - \"Action\"\n    - \"Action\"复制代码\n\n\n\n12-1  配合Essentials(X)做个物品礼包菜单\n\n在这里我想用Essential(X)自带的Firework(烟花)礼包 配合DeluxeMenus做一个礼包菜单 冷却时间是24小时\n\n(plugins/Essentials/kits.yml)\n\n  firework:\n    delay: 86400\n    items:\n      - fireworkrocket 1 name:Angry_Creeper color:red fade:green type:creeper power:1\n      - fireworkrocket 1 name:Starry_Night color:yellow,orange fade:blue type:star effect:trail,twinkle power:1\n      - fireworkrocket 2 name:Solar_Wind color:yellow,orange fade:red shape:large effect:twinkle color:yellow,orange fade:red shape:ball effect:trail color:red,purple fade:pink shape:star effect:trail power:1复制代码\n首先,Essentials(X)自带的Firework(烟花)礼包\n并非24小时的冷却,所以要修改礼包中的delay参数\n在这里,单位是秒,24x60x60=86400,\n因此在delay处填写86400  \n\n图片展示\n\n\n\n后半段的聊天栏没**,不过不影响观看\n菜单配置\n\nOP可以无视冷却时间领取,请知晓\n本菜单不需要下载任何PAPI拓展\n但请先给予玩家\nessentials.kit\nessentials.kit.firework\n这两个权限menu_title: '&fComplex Studio'\nopen_command: libao\nupdate_interval: 5\nsize: 9\nitems:\n  firework-yes:\n    material: hdb-34571\n    slot: 0\n    display_name: '&a烟花礼包'\n    lore:\n    - '&f状态 &8| &a可用'\n    - ''\n    - '&e左键单击领取'\n    priority: 1\n    view_requirement:\n      requirements:\n        lengque:\n          type: string equals\n          input: \"%essentials_kit_is_available_Firework%\"\n          output: \"yes\"\n    left_click_commands:\n    - '[close]'\n    - '[player] kits Firework'\n    - '[message] 领取成功咯,过24小时后再来吧'\n  firework-no:\n    material: hdb-34571\n    slot: 0\n    update: true\n    display_name: '&a烟花礼包'\n    lore:\n    - '&f状态 &8| &a冷却中'\n    - '&f冷却 &8| &a%essentials_kit_time_until_available_Firework%'\n    - ''\n    - '&c暂不可用'\n    priority: 2复制代码\n\n\n\n12-2  配合CMI做个物品礼包菜单\n\n当然仍然有一大部分服主在使用CMI作为基础插件\n下面是一个CMI配合DM做一个物品礼包菜单的例子\n\n思路是利用CMI自带的Advanced礼包(只有一个石头)\n做一个1周领取一次的礼包菜单\n\n(plugins/CMI/kits.yml)\n\nAdvanced:\n  CommandName: Advanced\n  Enabled: true\n  DropOnGround: true\n  ShowDespiteWeight: false\n  Delay: 604800\n  MaxUsages: -1\n  Items:\n    '1':\n      type: STONE复制代码\n图片展示\n\n\n\n菜单配置\n\n请先给予玩家\ncmi.kit.advanced\n权限menu_title: '&fComplex Studio'\nopen_command: libao\nupdate_interval: 5\nsize: 9\nitems:\n  firework-yes:\n    material: hdb-34571\n    slot: 0\n    display_name: '&a烟花礼包'\n    lore:\n    - '&f状态 &8| &a可用'\n    - ''\n    - '&e左键单击领取'\n    priority: 1\n    view_requirement:\n      requirements:\n        lengque:\n          type: string equals\n          input: \"%cmi_user_kitcd_Advanced%\"\n          output: \"-\"\n    left_click_commands:\n    - '[close]'\n    - '[player] cmi kit Advanced'\n    - '[message] 领取成功咯,过7天后再来吧'\n  firework-no:\n    material: hdb-34571\n    slot: 0\n    update: true\n    display_name: '&a烟花礼包'\n    lore:\n    - '&f状态 &8| &a冷却中'\n    - '&f冷却 &8| &a%cmi_user_kitcd_Advanced%'\n    - ''\n    - '&c暂不可用'\n    priority: 2复制代码\n\n\n\n12-3-1  仅配合权限组插件(LP)做个高级点的礼包菜单\n\n注意,下文所述的\"权限组插件\"均是LuckPerms\n一些小游戏等类型服务器可能并不会用到基础插件\n这时候就可以配合权限插件做一个礼包菜单\n\n思路:\n如果玩家有test.vip权限且不在冷却内\n则可以领取10点券(PlayerPoints)和1个钻石块\n如果玩家没有test.vip权限但也不在冷却内\n则只能领取1个铁块\n冷却时间为3小时  \n\n解析:\n物品A:    \n\n优先级1    条件:拥有test.vip权限和test.cooldown权限  点击后什么也不会发生  物品B:  优先级2  条件:拥有test.cooldown权限  点击后什么也不会发生  物品C:  优先级3  条件:拥有test.vip权限  点击后给予10点券和1个钻石块  另外给予3小时的test.cooldown权限  物品C:  优先级4  无条件   点击后给予1个铁块  另外给予3小时的test.cooldown权限  \n图片展示\n\n\n\n无test.vip权限\n\n\n有test.vip权限\n菜单配置\n\n请先下载Player拓展\n/papi ecloud download Player\nLuckPerms拓展无需下载menu_title: '&fComplex Studio'\nopen_command: libao\nupdate_interval: 1\nsize: 9\nitems:\n  cooldown-vip:\n    material: hdb-9166\n    slot: 0\n    update: true\n    display_name: '&a礼包'\n    lore:\n    - ''\n    - '&f内容 &8| &a1*钻石块,10*点券'\n    - '&f状态 &8| &a冷却中'\n    - '&f剩余 &8| %luckperms_expiry_time_test.cooldown%'\n    - ''\n    - '&e&oVIP加成'\n    - ''\n    - '&c冷却中'\n    priority: 1\n    view_requirement:\n      requirements:\n        vip:\n          type: has permission\n          permission: 'test.vip'\n        cooldown:\n          type: has permission\n          permission: 'test.cooldown'\n  cooldown:\n    material: hdb-9274\n    slot: 0\n    display_name: '&a礼包'\n    update: true\n    lore:\n    - ''\n    - '&f内容 &8| &a1*铁块'\n    - '&f状态 &8| &a冷却中'\n    - '&f剩余 &8| %luckperms_expiry_time_test.cooldown%'\n    - ''\n    - '&c冷却中'\n    priority: 2\n    view_requirement:\n      requirements:\n        cooldown:\n          type: has permission\n          permission: 'test.cooldown'\n  vip:\n    material: hdb-9132\n    slot: 0\n    display_name: '&a礼包'\n    lore:\n    - ''\n    - '&f内容 &8| &a1*钻石块,10*点券'\n    - '&f状态 &8| &a可领取'\n    - ''\n    - '&e&oVIP加成'\n    - ''\n    - '&b点击领取'\n    priority: 3\n    view_requirement:\n      requirements:\n        vip:\n          type: has permission\n          permission: 'test.vip'\n    left_click_commands:\n    - '[close]'\n    - '[message] 尊贵的VIP用户: 您已领取成功礼包,冷却3小时'\n    - '[console] points give %player_name% 10'\n    - '[console] give %player_name% DIAMOND_BLOCK 1'\n    - '[console] lp user %player_name% permission settemp test.cooldown true 3h'\n  player:\n    material: hdb-9240\n    slot: 0\n    display_name: '&a礼包'\n    lore:\n    - ''\n    - '&f内容 &8| &a1*铁块'\n    - '&f状态 &8| &a可领取'\n    - ''\n    - '&b点击领取'\n    priority: 4\n    left_click_commands:\n    - '[close]'\n    - '[message] 已领取成功礼包,冷却3小时'\n    - '[console] give %player_name% IRON_BLOCK 1'\n    - '[console] lp user %player_name% permission settemp test.cooldown true 3h'复制代码\n\n\n\n12-3-2  仅配合权限组插件(PEX)做个高级点的礼包菜单\n\n! PEX不支持PAPI变量,因此无法查看剩余冷却时间\n\n思路同上\n\n菜单配置\n\n请先下载Player拓展\n/papi ecloud download Playermenu_title: '&fComplex Studio'\nopen_command: libao\nupdate_interval: 1\nsize: 9\nitems:\n  cooldown-vip:\n    material: hdb-9166\n    slot: 0\n    update: true\n    display_name: '&a礼包'\n    lore:\n    - ''\n    - '&f内容 &8| &a1*钻石块,10*点券'\n    - '&f状态 &8| &a冷却中'\n    - ''\n    - '&e&oVIP加成'\n    - ''\n    - '&c冷却中'\n    priority: 1\n    view_requirement:\n      requirements:\n        vip:\n          type: has permission\n          permission: 'test.vip'\n        cooldown:\n          type: has permission\n          permission: 'test.cooldown'\n  cooldown:\n    material: hdb-9274\n    slot: 0\n    display_name: '&a礼包'\n    update: true\n    lore:\n    - ''\n    - '&f内容 &8| &a1*铁块'\n    - '&f状态 &8| &a冷却中'\n    - ''\n    - '&c冷却中'\n    priority: 2\n    view_requirement:\n      requirements:\n        cooldown:\n          type: has permission\n          permission: 'test.cooldown'\n  vip:\n    material: hdb-9132\n    slot: 0\n    display_name: '&a礼包'\n    lore:\n    - ''\n    - '&f内容 &8| &a1*钻石块,10*点券'\n    - '&f状态 &8| &a可领取'\n    - ''\n    - '&e&oVIP加成'\n    - ''\n    - '&b点击领取'\n    priority: 3\n    view_requirement:\n      requirements:\n        vip:\n          type: has permission\n          permission: 'test.vip'\n    left_click_commands:\n    - '[close]'\n    - '[message] 尊贵的VIP用户: 您已领取成功礼包,冷却3小时'\n    - '[console] points give %player_name% 10'\n    - '[console] give %player_name% DIAMOND_BLOCK 1'\n    - '[console] pex user %player_name% timed add test.cooldown 10800'\n  player:\n    material: hdb-9240\n    slot: 0\n    display_name: '&a礼包'\n    lore:\n    - ''\n    - '&f内容 &8| &a1*铁块'\n    - '&f状态 &8| &a可领取'\n    - ''\n    - '&b点击领取'\n    priority: 4\n    left_click_commands:\n    - '[close]'\n    - '[message] 已领取成功礼包,冷却3小时'\n    - '[console] give %player_name% IRON_BLOCK 1'\n    - '[console] pex user %player_name% timed add test.cooldown 10800'复制代码\n\n\n\n13  做一个收购&出售商店菜单\n\n思路是如果玩家左键点击这个物品\n那么需要10点券,如果满足条件(<-)将给予1个钻石\n如果玩家右键点击这个物品\n那么需要1个钻石,如果满足条件(<-)将给予9点券  \n\n图片展示\n\n\n\n图片加载可能有些慢,谅解\n菜单配置\n\n/papi ecloud download Player\n/papi ecloud download PlayerPointsmenu_title: '&fComplex Studio'\nopen_command: shop\nupdate_interval: 1\nsize: 9\nitems:\n  diamond:\n    material: hdb-106\n    slot: 0\n    display_name: '&b钻石'\n    lore:\n    - '&a左键 &8| &f花费10*点券,购买1*钻石'\n    - '&a右键 &8| &f出手1*钻石,获得10*点券'\n    left_click_commands:\n    - '[message] 成功购买钻石*1,共花费10*点券'\n    - '[console] points take %player_name% 10'\n    - '[console] give %player_name% DIAMOND 1'\n    left_click_requirement:\n      requirements:\n        points:\n          type: '>='\n          input: '%playerpoints_points%'\n          output: '10'\n      deny_commands:\n      - '[close]'\n      - '[message] 抱歉,您没有足够多的点券'\n    right_click_commands:\n    - '[message] 成功出手钻石*1,共获得9*点券'\n    - '[console] points give %player_name% 9'\n    - '[console] clear %player_name% DIAMOND 0 1'\n    right_click_requirement:\n      requirements:\n        points:\n          type: has item\n          material: DIAMOND\n          amount: 1\n      deny_commands:\n      - '[close]'\n      - '[message] 抱歉,您没有足够多的钻石'复制代码\n\n\n\n14  利用传入参数做一个简单的菜单\n\n思路:\n输入/player <玩家ID>后会打开一个菜单\n可以在这个菜单里自由选择如何惩罚或者奖励这位玩家  \n\n图片展示\n\n\n\n菜单配置\n\nmenu_title: '&f撒币菜单: {player}'\nopen_command: player\nupdate_interval: 1\nsize: 27\nargs:\n  player: -1\nargs_usage_message: \"使用方式不对,/player <玩家ID>\"\nitems:\n  zhuangshi:\n    material: STAINED_GLASS_PANE\n    slots:\n    - 0\n    - 1\n    - 2\n    - 3\n    - 4\n    - 5\n    - 6\n    - 7\n    - 8\n    - 18\n    - 19\n    - 20\n    - 21\n    - 22\n    - 23\n    - 24\n    - 25\n    - 26\n    display_name: '&e我只是个装饰物'\n  1pointsplus:\n    material: hdb-106\n    slot: 9\n    display_name: '&e给他1点券'\n    left_click_commands:\n    - '[message] 你给予了{player} 1点券'\n    - '[console] points give {player} 1'\n  10points:\n    material: hdb-106\n    slot: 10\n    display_name: '&e给他10点券'\n    left_click_commands:\n    - '[message] 你给予了 {player} 10点券'\n    - '[console] points give {player} 10'\n  100points:\n    material: hdb-106\n    slot: 11\n    display_name: '&e给他100点券'\n    left_click_commands:\n    - '[message] 你给予了 {player} 100点券'\n    - '[console] points give {player} 100'\n  1000points:\n    material: hdb-106\n    slot: 12\n    display_name: '&e给他1000点券'\n    left_click_commands:\n    - '[message] 你给予了 {player} 1000点券'\n    - '[console] points give {player} 1000'\n  kou1points:\n    material: hdb-25850\n    slot: 13\n    display_name: '&e扣除他1点券'\n    left_click_commands:\n    - '[message] 你扣除了 {player} 1点券'\n    - '[console] points take {player} 1'\n  kou10points:\n    material: hdb-25850\n    slot: 14\n    display_name: '&e扣除他10点券'\n    left_click_commands:\n    - '[message] 你扣除了 {player} 10点券'\n    - '[console] points take {player} 10'\n  kou100points:\n    material: hdb-25850\n    slot: 15\n    display_name: '&e扣除他100点券'\n    left_click_commands:\n    - '[message] 你扣除了 {player} 100点券'\n    - '[console] points take {player} 100'\n  kou1000points:\n    material: hdb-25850\n    slot: 16\n    display_name: '&e扣除他1000点券'\n    left_click_commands:\n    - '[message] 你扣除了 {player} 1000点券'\n    - '[console] points take {player} 1000'\n  close:\n    material: hdb-187\n    slot: 17\n    display_name: '&c关闭'\n    left_click_commands:\n    - '[close]'复制代码\n\n\n\n15  听说你想加点声音?\n\n哪个男孩不想给自己的菜单加点声音呢?\n首先得找到一段声音\n\n在原版MC中,你可以使用\"/playsound\"\n来寻找一段符合菜单/物品设定的声音\n\n比如我想在礼包冷却时给玩家放一段末影人传送的声音\n先分析一下\n末影人属于生物 entity\n而末影人则是 endermen\n传送则是 teleport  \n\n/playsound minecraft:entity.endermen.teleport ambient @a复制代码\n但是在菜单中可不能直接这样写\n要全大写并且将.改为_   也就是\nENTITY_ENDERMEN_MEN\n\n- '[sound] ENTITY_ENDERMEN_MEN'复制代码\n\n\n\n16  总结\n\n本教程到这里就告一段落了\n字数统计\n\n5368个汉字 18350个字母\n\n[groupid=1701]Complex Studio[/groupid]",
    "replies": [
        {
            "author": "晓夜Port",
            "timestamp": 1581483360,
            "txt_content": "建议只推荐 VSCode\n\nNotepad++ 作者是台 毒"
        },
        {
            "author": "AzureHanChen",
            "timestamp": 1581483600,
            "txt_content": "晓夜Port 发表于 2020-2-12 12:56\n建议只推荐 VSCode\n\nNotepad++ 作者是台 毒\n这事我也知晓\n不过联机教程版编辑还需要审核\n我打算等全部写完之后一起改掉,然后更新到这个帖子里"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1583578680,
            "txt_content": "不觉得看这么长的教程帖子比研究vv或者trmenu值得多少"
        },
        {
            "author": "上杉夏相",
            "timestamp": 1585617240,
            "txt_content": "蛮厉害的 带我学成归来也是一条好汉\n感谢lz分享"
        },
        {
            "author": "ilibiliGAOSM",
            "timestamp": 1588862160,
            "txt_content": "晓夜Port 发表于 2020-2-12 12:56\n建议只推荐 VSCode\n\nNotepad++ 作者是台 毒\n一个好的工具不能根据作者就去定位吧？至少安装的时候有简体中文不是？"
        },
        {
            "author": "晓夜Port",
            "timestamp": 1588934280,
            "txt_content": "bilibiliGAOSM 发表于 2020-5-7 22:36\n一个好的工具不能根据作者就去定位吧？至少安装的时候有简体中文不是？ ...\n现在的国人都这样吗 （笑）"
        },
        {
            "author": "ilibiliGAOSM",
            "timestamp": 1588944780,
            "txt_content": "晓夜Port 发表于 2020-5-8 18:38\n现在的国人都这样吗 （笑）\n随你怎么想"
        },
        {
            "author": "用户2588899",
            "timestamp": 1602925560,
            "txt_content": "1.10.5好像声音没用"
        },
        {
            "author": "1794853466",
            "timestamp": 1603038180,
            "txt_content": "舒舒服服舒服舒服\n"
        },
        {
            "author": "用户2588899",
            "timestamp": 1603536000,
            "txt_content": "晓夜Port 发表于 2020-2-12 12:56\n建议只推荐 VSCode\n\nNotepad++ 作者是台 毒\n谢谢，已卸载"
        },
        {
            "author": "酒笙清栀.",
            "timestamp": 1603595040,
            "txt_content": "完成任务hjdhsaj"
        },
        {
            "author": "a320778963",
            "timestamp": 1612017420,
            "txt_content": "[DeluxeMenus] Plugin DeluxeMenus v1.12.0 generated an exception while executing task 10521 java.lang.NullPointerException: null"
        },
        {
            "author": "Coldlime",
            "timestamp": 1612786260,
            "txt_content": "找了好久也没找到教程\n谢谢大佬分享"
        },
        {
            "author": "Dfmaster",
            "timestamp": 1613115960,
            "txt_content": "请问大佬，dm条件能否实现判断字符不是某个字符呢？比如%player_name%不等于abc才可以使用"
        },
        {
            "author": "AzureHanChen",
            "timestamp": 1613118720,
            "txt_content": "Dfmaster 发表于 2021-2-12 15:46\n请问大佬，dm条件能否实现判断字符不是某个字符呢？比如%player_name%不等于abc才可以使用 ...\n我记得文中有提到，不过可能是我写的太啰嗦了没看出来233\n#我这里以左键点击条件为例子了，请务必根据实际情况更改\n#空格，缩进等请根据实际情况调整\nleft_click_requirement:\n  requirements:\n    example:\n      type: string equals\n      input: '%player_name%'\n      output: '你想让他等于啥'复制代码"
        },
        {
            "author": "Dfmaster",
            "timestamp": 1613135460,
            "txt_content": "AzureHanChen 发表于 2021-2-12 16:32\n我记得文中有提到，不过可能是我写的太啰嗦了没看出来233\n看到了,这个是需要等于某字符,我想要的是不能等于某字符....\n不过我先已经解决了,弄个优先级大的把按钮堵住...用的就是这个type"
        },
        {
            "author": "caochao233",
            "timestamp": 1613553000,
            "txt_content": "为什么dm不支持forge端？指的是不支持添加mod里的物品作为菜单item吗？"
        }
    ]
}