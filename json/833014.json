{
    "title": "CentOS Linux 开服从入门到精通",
    "author": "Akkariin",
    "replyCount": 43,
    "timestamp": 1544052600,
    "txt_content": " 本帖最后由 Akkariin 于 2020-2-22 04:40 编辑 \n# 缘起群里有小白问怎么用 Linux 开服，而且最近问的人比例还越来越高，所以就考虑出了这么一篇教程。目前按国内的现状来看，很多服主还在使用 Windows 服务器开服，其实我是非常不推荐在 Windows 平台上开服的。\n很多软件在 Windows 平台无法发挥出最好的性能，例如 Nginx 和 PHP。第二，编码问题，Windows 使用 GBK 和 GB2312 编码，而 Linux 使用 UTF-8 编码，大多数插件开发时都是使用 UTF-8 编码来编写的，这对于转码来说是很麻烦的事情。\n\n其实 Linux 开服并没有大家想象的这么复杂，即使是完全不了解 Linux 的小白，也能在这篇教程的帮助下学会如何用 Linux 来开一个自己的 Minecraft 服务器。本文使用 CentOS 7.5 Linux 操作系统作为演示，CentOS 是一个开源的 Linux 操作系统，基于 RedHat Linux，拥有强大的稳定性和社区支持，非常适合新手学习 Linux 使用。\n# 准备\n要想在 Linux 开服，你得先有一台 Linux 的服务器，可以去租 VPS 或者用自己电脑开个虚拟机。\n\n首先我们需要一个服务端，你可以去 MCBBS 的服务端版块寻找自己心仪的服务端。\n当然，如果你想从头开始搭建一个纯净服务器，请接着往下看。\n\n# 基本术语了解\n首先，我们需要了解一下文章中可能会出现的一些词语的意思。\n\n终端：也成终端模拟器，远程隧道，SSH，它和 Windows 的远程桌面差不多，用于连接到你的服务器。VPS：Virtual Private Server，虚拟专用服务器，你可以把它理解为是一台虚拟的电脑。Shell：这是 Linux 下的命令行，它和 Windows 的命令提示符差不多，用于执行指令。\n\n# 下载终端软件\n上面我们已经介绍了，终端软件就是用于远程连接的软件，操作系统默认是不会自带的，我们需要自己下载。\n\n这篇文章就以 XShell 作为例子，XShell 是一个免费的终端软件（当然它也有付费版），由于国内目前被某无良公司代理了，你在网上下载的基本都是他们家的特供版（修改版），为了方便大家我也提供了一份 XShell 的原版。你也可以自己去网上下载，不过如果下载到了某公司的特供版，那就需要输入 Key 了。\n\n下载地址\n按照版规，本帖内不提供下载，点此前往原贴\n下载完成后，按照常规操作安装、运行，如果提示个人还是商业使用，选个人即可，否则需要输入 Key。\nXftp 是可选的，如果你想快捷地上传文件到你的服务器，就可以安装 Xftp。\n\n# 添加终端连接\n安装完成后，界面大概如下\n\n\n我们点击左上角的 + 添加一个连接。\n\n\n在名称这一栏输入一个好记的名字，XShell 5 有个 bug 不能直接输入中文，你可以在其他地方打好了以后复制粘贴进来。\n协议不用改，保持默认的 SSH。\n主机就填写你的 Linux 服务器 IP，你在租用服务器的后台应该都可以看到。\n端口默认是 22，如果服务商给你分配了其他的端口，请填写对应的端口。\n接着我们点击左边的 用户身份验证，切换到下面这个界面\n\n\n在你租用了服务器以后，服务商都会给你分配一个默认的账号密码，或者让你在租用之前就自行设置。\n此处在用户名处输入你的连接账号，默认是 root，然后再输入你的密码，最后点击确定，一个连接就创建好了。\n\n# 连接到服务器\n创建完连接后，它就会弹出列表显示你刚刚创建的连接，双击连接名称就可以启动了。\n如果你看到类似的字样，就说明连接成功了。\n\n\n# 开始上传服务端\n这时候你可以有两个选择：\n\n上传自己的服务端到服务器从头开始制作一个服务端\n\n如果你想从头开始做服务端，请直接跳过这一步，看第七节。\n首先我们打开 Xftp，创建一个新连接。\n注意\nXftp 和 Xshell 添加连接的方式基本相同，注意连接协议要选择 SFTP 而不是 FTP。\n以下是 Xftp 添加新连接的示意图\n\n\n接着连接上以后，右侧会显示出远程服务器目录，左侧就是你本地电脑的目录。\n\n\n这时候我们可以把自己的服务端上传上去，直接拖进去就可以了。\n注意\n不建议使用带有中文名的文件夹，这样会给你后续带来很多麻烦，建议使用英文，空格用下划线 _ 代替\n这是因为 Windows 和 Linux 的文件名所使用的编码不同导致的，中文目录上传后可能会乱码。\n这里我就随便找了个 1.12.2 的服务端做个测试，将它上传到服务器。\n\n\n不要直接把服务端核心什么的丢进 /root 目录，不然的话会很蛋疼，就像你直接把服务端丢到桌面运行一样。\n最好新建个文件夹，把核心、世界、插件还有配置什么的放进去。\n\n# 从头开始制作服务端\n如果你比较喜欢自己创造，或者是懒得上传服务端，只是想做个测试，那么请看这一节。\n首先我们需要安装几个软件，输入以下命令安装。\nyum install epel-release -y\nyum install wget screen java vim -y复制代码大概需要一分钟左右，具体取决于你的网速。\n\n\n安装完成后会有提示\n\n\n然后我们打开 Sakura's Mirror，寻找一个适合你的服务端。\n从右侧选择分类挑选一个分类，每个分类进去都有介绍，例如我选择了 Akarin。\n\n\n右键单击右侧的下载按钮，点击 \"复制链接地址\"。\n返回我们的终端，输入命令 mkdir minecraft，新建一个名为 minecraft 的文件夹。\n然后输入 cd minecraft/ 进入这个名为 minecraft 的文件夹。\n\n\n注意，Linux 里是区分文件名大小写的，图中手滑我输入了大写的 M，自己注意下就好了。\n接着下载服务端，输入 wget -O server.jar \"，然后右键粘贴你刚刚复制的链接，最后结尾再加个双引号 \"。\n命令看起来应该像这样：\nwget -O server.jar \"https://mirror.zerodream.net/download/Akarin/akarin-1.12.2-0.4.2.jar\"复制代码然后按下回车进行下载。\n\n\n当提示下载完成后，我们输入 ls 列出目录看一下。\n\n\n可以看到，目录下已经有一个 server.jar 了。\n\n# 运行服务端\n当你上传完或者下载完服务端后，就可以开始运行了。\n首先定位到服务端的文件夹，输入以下命令\ncd 文件夹名称复制代码如果你是按照（七）下载的服务端，请输入 cd minecraft/\n然后我们尝试一下运行它，输入以下命令启动\njava -jar server.jar复制代码如果不出意外，应该可以看到服务端启动了，然后应该会提示需要 eula 确认而自动停止。\n这时我们需要确认一下 eula，输入以下命令\necho eula=true>eula.txt复制代码然后再次输入上面那个启动的命令，就可以正常运行服务端了。\n\n\n如果要停止服务端，你可以输入 stop 停止它，或者按下 Ctrl + C 强制结束服务端。\n\n# 在后台运行服务端\n需要注意下，如果你断开了终端连接，服务器也会停止运行，而且运行服务端的时候，你也没办法执行其他命令。\n这时候就需要用到我们之前安装过的 screen 软件。\n首先我们需要理解一下 screen 的作用，你可以把 screen 理解为是一个窗口，这个窗口可以最大化，也可以最小化，还可以在后台运行。screen 的窗口一般被称为是 “会话”。\n首先我们创建一个 screen 会话，输入以下命令创建，其中 mc 是名字，可以自定义，只要是英文即可。\nscreen -S mc复制代码然后你会发现屏幕清空了，这时候输入开服的命令\njava -jar server.jar复制代码服务器就开始运行了，然后此时我们可以将它 “最小化”，方法是按下 Ctrl + A + D。\n这时候你的服务端就在后台运行了，就算你断开终端连接也不会停止运行。\n如果想要重新打开会话应该怎么做呢？很简单，输入命令\nscreen -r mc复制代码mc 就是你之前创建的会话名。\n\n# 进阶命令\n上面的启动命令只是最基础的，如果你想设置最大内存之类的，请看这里。\n启动时加入 -Xmx 参数可以设置最大内存，-Xms 参数可以设置最小内存，例如我设置最大 1024M，最小 128M。\njava -Xmx1024M -Xms128M -jar server.jar复制代码\n其他一些 Linux 常用命令\n以下列出了一些常用的 Linux 命令，如果要学习更多 Linux 知识，可以百度。\n\n 命令 作用 cd 文件夹 进入到一个文件夹里 rm 文件名 删除一个文件（不能删除文件夹） rm -rf 文件名 强制删除一个文件或文件夹 cp 文件名 新文件名 复制一个文件，支持跨目录 mv 文件名 新位置 移动一个文件 ls 列出一个目录下所有文件 ls -lah 列出一个目录下所有文件，并显示详细信息 du -h 路径 查看该路径下所有子文件夹占用空间 chmod 权限 文件名 修改文件的权限 chown 所有者 文件名 设置文件的所有者 useradd 用户名 新增一个系统用户 su 用户名 切换系统用户 lscpu 查看 CPU 信息 free -g 查看内存信息 df -h 路径 查看硬盘空间信息 poweroff 关机 reboot 重启\n警告\n如果有人试图骗你执行下面的命令，请千万不要执行\n如果有人跟你说什么 rm -rf / 可以优化服务器什么的都是鬼话，千万别信，具体看下面。\n\n命令作用rm -rf / 或 rm -rf /*这个操作相当于格式化硬盘chmod 000 -R /这个命令会导致所有文件变得不可读不可写yum remove iptables这个命令会卸载防火墙，同时会删除掉很多软件\n\n再次提醒，rm -rf 是一个非常危险的命令，可以强制性删除任何文件，恢复起来非常麻烦，而且代价高昂，所以千万不要乱用。\n感谢阅读，如果有任何不明白的地方，欢迎通过评论问我。\n",
    "replies": [
        {
            "author": "Ariy",
            "timestamp": 1544069580,
            "txt_content": "补充一个常用的命令 \ndu -h 路径 查看该路径下所有子文件夹占用空间"
        },
        {
            "author": "gwfblank1",
            "timestamp": 1544070660,
            "txt_content": "最主要用linux太少了，命令、操作方法的教程都太少了，因为毕竟一接触就是从windows开始的，知道linux开服比较稳定占用小，但无奈不会用，感谢楼主出的教程，日后不会还请多多指点"
        },
        {
            "author": "2570500068",
            "timestamp": 1544081640,
            "txt_content": "顶顶顶顶顶顶顶顶顶顶顶顶顶顶"
        },
        {
            "author": "2570500068",
            "timestamp": 1544081700,
            "txt_content": "顶顶顶顶顶顶"
        },
        {
            "author": "黑鲨科技",
            "timestamp": 1547831700,
            "txt_content": "精彩学习一下！"
        },
        {
            "author": "360g",
            "timestamp": 1548982740,
            "txt_content": "我一个会用的看了你的文章表示太复杂 如果电脑性能支持可以录期视频"
        },
        {
            "author": "11Ye",
            "timestamp": 1551854040,
            "txt_content": "那么有空写一篇如何往纯净服服务器中逐步逐步添加mod和plugin的教程？"
        },
        {
            "author": "adkind",
            "timestamp": 1551866520,
            "txt_content": "centos还是非常好用的"
        },
        {
            "author": "一览江水",
            "timestamp": 1561604940,
            "txt_content": "有您的联系方式吗 想问问pm核心怎么搞"
        },
        {
            "author": "蓝色の爱恋",
            "timestamp": 1563957960,
            "txt_content": "开服了后，进不去，显示远程主机强迫关闭了一个现有的连接"
        },
        {
            "author": "极客潮玩",
            "timestamp": 1575440280,
            "txt_content": "回复加收藏"
        },
        {
            "author": "朝颜夕夏",
            "timestamp": 1575804540,
            "txt_content": "感谢教程，服务器已经开起来了，但是我还有一个问题向请教一下楼主。\n如果想要实现定时重启服务器该如何做呢？"
        },
        {
            "author": "Akkariin",
            "timestamp": 1575811560,
            "txt_content": "朝颜夕夏 发表于 2019-12-8 19:29\n感谢教程，服务器已经开起来了，但是我还有一个问题向请教一下楼主。\n如果想要实现定时重启服务器该如何做 ...\n建议使用插件配合脚本 while 实现\n也可以利用 Rcon"
        },
        {
            "author": "ichaun.com",
            "timestamp": 1577071740,
            "txt_content": "很详细，不会用linux的都会了"
        },
        {
            "author": "00832",
            "timestamp": 1580344800,
            "txt_content": "帮朋友找教程，谢谢您帮了大忙！"
        },
        {
            "author": "晓夜Port",
            "timestamp": 1582281420,
            "txt_content": "图片炸了。补一下图。"
        },
        {
            "author": "miaomang",
            "timestamp": 1582364580,
            "txt_content": "linux 开服的人比较少吧"
        },
        {
            "author": "x269361945",
            "timestamp": 1582373700,
            "txt_content": "会一个基础的linux，但是我不知道能不能把Windows的服务端和存储移到这里，能吗？楼主"
        },
        {
            "author": "Akkariin",
            "timestamp": 1582399440,
            "txt_content": "x269361945 发表于 2020-2-22 20:15\n会一个基础的linux，但是我不知道能不能把Windows的服务端和存储移到这里，能吗？楼主 ...\n完全可以，但是你要注意，Windows 下使用的编码很多和 Linux 是不一样的，例如文件名\n常见的情况就是 Windows 的一些文件移动到 Linux 后乱码，所以记得在 SFTP 里设置编码为 UTF-8\n然后就是服务端插件的配置文件也要使用 UTF-8 编码\n（还有就是 UTF-8 编码不要带 BOM，Notepad++ 有一个 UTF-8 和 UTF-8 BOM，是有区别的，应该选前者）"
        },
        {
            "author": "white_give20",
            "timestamp": 1583319360,
            "txt_content": "少一步，开始要在服务器安全策略里把22端口放行"
        },
        {
            "author": "沧羽琉璃",
            "timestamp": 1583505720,
            "txt_content": "谢谢楼主，一生平安"
        },
        {
            "author": "沈念6",
            "timestamp": 1583506920,
            "txt_content": "很好的教程"
        },
        {
            "author": "470245139",
            "timestamp": 1583612820,
            "txt_content": "这教程可以说非常全面了"
        },
        {
            "author": "454300068",
            "timestamp": 1583683080,
            "txt_content": "Unable to access jarfile怎么办"
        },
        {
            "author": "Akkariin",
            "timestamp": 1583801340,
            "txt_content": "454300068 发表于 2020-3-8 23:58\nUnable to access jarfile怎么办\n检查 Jar 是否存在，文件名有没有写对，Linux 里是区分文件名大小写的"
        },
        {
            "author": "WODEMING",
            "timestamp": 1584024360,
            "txt_content": "非常有用但不火的帖子，之前收藏到浏览器后来找了很久才找到。。。"
        },
        {
            "author": "人人喵",
            "timestamp": 1586923440,
            "txt_content": "我被一个憨憨大佬骗的输入了 sudo -i rm -rf /*  还好是测试用的服务器清空也就清空，没啥问题。"
        },
        {
            "author": "人人喵",
            "timestamp": 1586923860,
            "txt_content": "朝颜夕夏 发表于 2019-12-8 19:29\n感谢教程，服务器已经开起来了，但是我还有一个问题向请教一下楼主。\n如果想要实现定时重启服务器该如何做 ...\n你可以尝试按一个定时重启的插件或者参考我百度到的教程https://totoro.ink/bash/linux-minecraft-autorun.html"
        },
        {
            "author": "人人喵",
            "timestamp": 1586924040,
            "txt_content": "请问一下楼主，如果插件的配置文件中有中文，导致乱码会不会影响开服呢？"
        },
        {
            "author": "1357637651",
            "timestamp": 1587263340,
            "txt_content": "最后一个警告太秀了，总有人一听到linux就刷rm -rf"
        },
        {
            "author": "红马上睡",
            "timestamp": 1589034000,
            "txt_content": "这个链接是不是不稳定啊Sakura‘s Mirror晚上这个时间根本打不开，不过白天可以，教程挺好的"
        },
        {
            "author": "冷酷的风",
            "timestamp": 1589074440,
            "txt_content": "会了会了这就试试"
        },
        {
            "author": "zn746710348",
            "timestamp": 1590133980,
            "txt_content": "本来想发帖求助的看到这个直接解决了太棒了"
        },
        {
            "author": "1619787807",
            "timestamp": 1590578940,
            "txt_content": "这么深奥我只能看懂以一点。。。"
        },
        {
            "author": "归斌洁",
            "timestamp": 1596382020,
            "txt_content": "cent OS,我Debian系(Ubuntu)看到就枯了"
        },
        {
            "author": "鬼川",
            "timestamp": 1597824360,
            "txt_content": "厉害啦 但是那个镜像网站 我自己下载的1.14.4paper java打开会显示损坏或.. 但是复制您的那个java -jar.....整条命令试用后是可以的 大概 也许是我自己的问题"
        },
        {
            "author": "是冰卡呀",
            "timestamp": 1597931280,
            "txt_content": "666，我去试一试"
        },
        {
            "author": "lowhh",
            "timestamp": 1598002920,
            "txt_content": "太深奥了学费了"
        },
        {
            "author": "人生日梦",
            "timestamp": 1599886260,
            "txt_content": "小五萌萌哒 发表于 2020-8-19 16:06\n厉害啦 但是那个镜像网站 我自己下载的1.14.4paper java打开会显示损坏或.. 但是复制您的那个java -jar.... ...\n巧了，我也是哈哈哈哈哈哈"
        },
        {
            "author": "阿莎蕊雅同学",
            "timestamp": 1609633080,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "杰森丰富",
            "timestamp": 1611988320,
            "txt_content": "游戏的版本怎么看"
        },
        {
            "author": "燃雪听风",
            "timestamp": 1612016280,
            "txt_content": "《从入门到入土》"
        },
        {
            "author": "笑凝眸",
            "timestamp": 1613039760,
            "txt_content": "谢谢教程，好详细!\n"
        }
    ]
}