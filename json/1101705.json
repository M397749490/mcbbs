{
    "title": "如何删除模组中的一个物品",
    "author": "XXSRYGOD",
    "replyCount": 11,
    "timestamp": 1597398240,
    "txt_content": "如题，删除或者禁用都可以",
    "replies": [
        {
            "author": "洞穴夜莺",
            "timestamp": 1597399140,
            "txt_content": "直接CoreMod/TweakerClass删字节码，前提你必须对目标Mod源码足够熟悉，知晓所有使用该物品的逻辑"
        },
        {
            "author": "ZerTo_零",
            "timestamp": 1597399560,
            "txt_content": "水水水水水"
        },
        {
            "author": "zhangziqi221221",
            "timestamp": 1597400340,
            "txt_content": "嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻嘻"
        },
        {
            "author": "roj234",
            "timestamp": 1597405440,
            "txt_content": "注册事件 RegistryEvent<XXX> 在那个时候反射删除目标 【物品/方块/音效/药水/附魔/实体/村名职业】 假如不是这些我就没办法了\n注：要目标使用正常方法注册这些东西才可以\n注：事件优先级要LOWEST"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1597405560,
            "txt_content": "roj234 发表于 2020-8-14 19:44\n注册事件 RegistryEvent 在那个时候反射删除目标 【物品/方块/音效/药水/附魔/实体/村名职业】 假如不是这 ...\n我觉得不行\n因为即使在注册表中移除了物品，物品的引用，逻辑和情节也会出现在别处\n就像你删原版物品可能会出大问题一样"
        },
        {
            "author": "roj234",
            "timestamp": 1597405800,
            "txt_content": " 本帖最后由 roj234 于 2020-8-14 19:55 编辑 \n洞穴夜莺 发表于 2020-8-14 19:46\n我觉得不行\n因为即使在注册表中移除了物品，物品的引用，逻辑和情节也会出现在别处\n就像你删原版物品可能 ...\n一般来说，注册表删除了就不会在事件中出现\nEventListener可以排除\n然后呢，如果\n  生成ItemStack，都是空气啊，默认值就是空气啊\n  合成表？logs里刷点错误 找不到物品\n  矿物词典？logs里刷几个fatal 尝试给没注册的物品写矿词\n至于哪里会崩溃，我想不出来...\n哦，有可能\n@ObjectHolder注解写的字段，这个我不了解，不过确实有可能导致这里变成null\n\n那么还有更好的办法，自己写个物品ItemDummyAir，懂吧，没作用，至于强制类型转换，那我也没辙了，\n那么这些至少可以覆盖50%的物品作用了吧，比起ASM，为什么不先试试这些呢\n还有，ASM？为什么不Mixin呢，直接注入目标类，清空物品的某些函数\n但是如果是整合包，而不是单独发布，比起ASM，暴力的替换class也不失为一个好办法\n"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1597406640,
            "txt_content": "roj234 发表于 2020-8-14 19:50\n一般来说，注册表删除了就不会在事件中出现\nEventListener可以排除\n然后呢，如果\n这里指注册时的保存在static变量里的引用\n从注册表中删除物品并不会改变这里的值，因此在给予玩家物品时就给了一个并不在注册表中的物品，我不确定会发生什么，但肯定不是啥好事\n即使你使用你的ItemDummyAir取代了所有的这种物品的引用，那么一些事件的逻辑依然会在比较物品时认为该物品是原始物品，并执行逻辑，我不认为这是一种合理的做法"
        },
        {
            "author": "roj234",
            "timestamp": 1597406700,
            "txt_content": " 本帖最后由 roj234 于 2020-8-14 20:07 编辑 \n洞穴夜莺 发表于 2020-8-14 20:04\n这里指注册时的保存在static变量里的引用\n从注册表中删除物品并不会改变这里的值，因此在给予玩家物品时 ...\n不在注册表里的，就是空气，没有别的可能, 是的，我也考虑到了，所以我说只是，试试而已，如果不行，在用麻烦的方法不在注册表里的，无法从NBT反序列化，不可能有任何物品在玩家背包，箱子，创造物品栏，或者除了这个唯一引用的任何地方里\n还要担心什么？用这个唯一的引用创造的ItemStack对象也是空的"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1597406940,
            "txt_content": " 本帖最后由 洞穴夜莺 于 2020-8-14 20:16 编辑 \nroj234 发表于 2020-8-14 19:50\n一般来说，注册表删除了就不会在事件中出现\nEventListener可以排除\n然后呢，如果\nMixin依然属于CoreMod/TweakerClass，其次删字节码是逻辑上的删字节码（使字节码没有机会被执行），我没有说过用ASM"
        },
        {
            "author": "roj234",
            "timestamp": 1597407480,
            "txt_content": "洞穴夜莺 发表于 2020-8-14 20:09\nMixin依然属于CoreMod/TweakerClass，其次删字节码是逻辑上的删字节码（使字节码没有机会被执行），我没有 ...\n嗯，我看错了，但是还是原先的一点， 先试试简单的，不行再用难的"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1597407840,
            "txt_content": "roj234 发表于 2020-8-14 20:05\n不在注册表里的，就是空气，没有别的可能, 是的，我也考虑到了，所以我说只是，试试而已，如果不行，在用 ...\n并非所有的物品都会被序列化再反序列化\n与复杂的反射相比，Mixin删字节码更加稳妥合理"
        }
    ]
}