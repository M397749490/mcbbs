{
    "title": "如何创建一个实体？",
    "author": "冰光icelight",
    "replyCount": 2,
    "timestamp": 1471700520,
    "txt_content": "如何创建一个实体？",
    "replies": [
        {
            "author": "天蝎_心殇",
            "timestamp": 1471700520,
            "txt_content": "我写个实例给你瞅瞅\n新建一个类，名称随你\npublic class EntityStoneMan extends EntityCreature\n{\n  World field_70170_p;\n  EntityPlayer player;\n  private Random random;\n  private ItemStack defaultHeldItem;\n  private boolean follow;\n  public boolean fighting;\n  protected int attackStrength;\n  private boolean defendArea;\n  private EntityDefense defending;\n  public boolean still;\n\n  public EntityCSoldierMelee(World world)\n  {\n    super(world);\n    this.tasks.addTask(1, new EntityAIAttackOnCollide(this, EntityMob.class, 10.0D, false));\nthis.targetTasks.addTask(3, new EntityAINearestAttackableTarget(this, EntityLiving.class, 0, false, true, IMob.mobSelector));\n    this.rand = new Random();\n    this.defaultHeldItem = new ItemStack(Items.stone_sword, 1);\n    this.field_70170_p = world;\n    this.isImmuneToFire = false;\n    this.attackStrength = 10;\n    this.follow = false;\n    this.defendArea = false;\n  }\n\n  protected void applyEntityAttributes()\n  {\n    super.applyEntityAttributes();\n    getEntityAttribute(SharedMonsterAttributes.maxHealth).setBaseValue(40.0D);\n\n    getEntityAttribute(SharedMonsterAttributes.followRange).setBaseValue(32.0D);\n\n    getEntityAttribute(SharedMonsterAttributes.knockbackResistance).setBaseValue(0.0D);\n\n    getEntityAttribute(SharedMonsterAttributes.movementSpeed).setBaseValue(0.75D);\n  }\n\n  protected boolean canDespawn()\n  {\n    return false;\n  }\n\n  public boolean canBePushed()\n  {\n    return false;\n  }\n\n  protected boolean isMovementCeased()\n  {\n    return false;\n  }\n\n  public void onLivingUpdate()\n  {\n    super.onLivingUpdate();\n    Minecraft minecraft = Minecraft.getMinecraft();\n    EntityClientPlayerMP entityplayersp = minecraft.thePlayer;\n\n    if (this.follow) {\n      if (entityplayersp != null) {\n        float f1 = entityplayersp.getDistanceToEntity(this);\n        PathEntity pathentityplayer1;\n        PathEntity pathentityplayer1;\n        if ((f1 > 1.0F) && (f1 < 30.0F)) {\n          pathentityplayer1 = this.field_70170_p.getPathEntityToEntity(this, entityplayersp, 16.0F, true, false, false, true);\n        }\n        else\n        {\n          pathentityplayer1 = null;\n        }\n\n        setPathToEntity(pathentityplayer1);\n      }\n    } else {\n      if (!this.defendArea) {\n        this.defendArea = true;\n      }\n\n      if ((this.defendArea) && (this.defending != null)) {\n        float f1 = this.defending.getDistanceToEntity(this);\n        PathEntity pathentityplayer1;\n        PathEntity pathentityplayer1;\n        if ((f1 > 5.0F) && (f1 < 40.0F)) {\n          pathentityplayer1 = this.field_70170_p.getPathEntityToEntity(this, this.defending, 40.0F, true, false, false, true);\n        }\n        else\n        {\n          pathentityplayer1 = null;\n        }\n\n        setPathToEntity(pathentityplayer1);\n      }\n    }\n  }\n\n  public boolean interact(EntityPlayer par1EntityPlayer)\n  {\n    this.player = par1EntityPlayer;\n\n    if (!this.follow) {\n      this.follow = true;\n\n      if (!this.field_70170_p.isRemote) {\n        par1EntityPlayer.addChatMessage(new ChatComponentText(\"Soldier: I am following you.\"));\n      }\n\n      this.defendArea = false;\n    } else {\n      this.follow = false;\n\n      if (!this.field_70170_p.isRemote) {\n        par1EntityPlayer.addChatMessage(new ChatComponentText(\"Soldier: I am protecting this area.\"));\n      }\n\n    }\n\n    return super.interact(par1EntityPlayer);\n  }\n\n  protected void updateEntityActionState()\n  {\n    super.updateEntityActionState();\n    int i = 6;\n    if (this.fighting) {\n      this.swingProgressInt += 1;\n      if (this.swingProgressInt >= i) {\n        this.swingProgressInt = 0;\n        this.fighting = false;\n      }\n    } else {\n      this.swingProgressInt = 0;\n    }\n    this.swingProgress = (this.swingProgressInt / i);\n    for (int j = 0; j < this.field_70170_p.loadedEntityList.size(); j++) {\n      Entity entity = (Entity)this.field_70170_p.loadedEntityList.get(j);\n      if ((entity instanceof EntityPlayer)) {\n        this.player = ((EntityPlayer)entity);\n      }\n    }\n    if ((this.entityToAttack == null) && (!hasPath())) {\n      List list = this.field_70170_p.getEntitiesWithinAABB(EntityCreature.class, AxisAlignedBB.getBoundingBox(this.posX, this.posY, this.posZ, this.posX + 1.0D, this.posY + 1.0D, this.posZ + 1.0D).expand(16.0D, 4.0D, 16.0D));\n\n      if (!list.isEmpty()) {\n        Entity entity1 = (Entity)list.get(this.field_70170_p.rand.nextInt(list.size()));\n\n        if ((canEntityBeSeen(entity1)) && ((entity1 instanceof EntityMob)))\n        {\n          this.entityToAttack = entity1;\n        }\n      }\n    }\n  }\n\n  public boolean attackEntityAsMob(Entity entity) { int i = this.attackStrength;\n    if (isPotionActive(Potion.damageBoost)) {\n      i += (3 << getActivePotionEffect(Potion.damageBoost).getAmplifier());\n    }\n    if (isPotionActive(Potion.weakness)) {\n      i -= (2 << getActivePotionEffect(Potion.weakness).getAmplifier());\n    }\n    return entity.attackEntityFrom(DamageSource.causeMobDamage(this), i); }\n\n  protected void attackEntity(Entity entity, float f)\n  {\n    if ((this.attackTime <= 0) && (f < 2.0F) && (entity.boundingBox.maxY > this.boundingBox.minY) && (entity.boundingBox.minY < this.boundingBox.maxY))\n    {\n      swingItem();\n      this.attackTime = 20;\n      attackEntityAsMob(entity);\n    }\n  }\n\n  public ItemStack getHeldItem() {\n    return this.defaultHeldItem;\n  }\n\n  public boolean attackEntityFrom(DamageSource damagesource, int i) {\n    if (this.rand.nextInt(2) == 0) {\n      boolean flag = true;\n      Entity entity = damagesource.getSourceOfDamage();\n      if (((entity instanceof EntityPlayer)) || ((entity instanceof EntityPlayerSP)))\n      {\n        flag = false;\n      }\n      if (flag) {\n        super.attackEntityFrom(damagesource, i);\n      }\n    }\n    return true;\n  }\n\n  public void swingItem() {\n    if ((!this.fighting) || (this.swingProgressInt < 0)) {\n      this.swingProgressInt = -1;\n      this.fighting = true;\n    }\n  }复制代码\n接下来就要渲染一下他，新建一个类，名字随你\n我这里自定义为stoneman\n\npublic class RenderStoneMan extends RenderBiped\n{\n  private static final ResourceLocation stoneman = new ResourceLocation(\"modid:textures/models/stoneman.png\");//自定义材质路径\n\n  public RenderCSoldierMelee(ModelBiped par1ModelBiped, float par2)\n  {\n    super(par1ModelBiped, par2);\n  }\n\n  protected ResourceLocation getEntityTexture(Entity entity)\n  {\n    return stoneman;//反回这个参数\n  }复制代码之后就要在ClientProxy把Entity导入到Render上了\n RenderingRegistry.registerEntityRenderingHandler(EntityStoneMan.class, new RenderStoneMan(new ModelBiped(), 0.5F));复制代码\n最后在主类注册刷怪蛋和生成几率吧\n\n注册刷怪蛋代码：\n  public static void registerEntity(Class entityClass, String name)\n  {\n    int entityID = EntityRegistry.findGlobalUniqueEntityId();\n    long seed = name.hashCode();\n    Random rand = new Random(seed);\n    int primaryColor = rand.nextInt() * 16777214;\n    int secondaryColor = rand.nextInt() * 16777214;\n\n    EntityRegistry.registerGlobalEntityID(entityClass, name, entityID);\n    EntityRegistry.registerModEntity(entityClass, name, entityID, instance, 64, 1, true);\n\n    EntityList.entityEggs.put(Integer.valueOf(entityID), new EntityList.EntityEggInfo(entityID, primaryColor, secondaryColor));\n  }复制代码注册实体&生成几率代码：\nregisterEntity(EntityStoneMan.class, \"Stone Man\");\n\n    for (int i = 0; i < BiomeGenBase.getBiomeGenArray().length; i++)\n      if (BiomeGenBase.getBiomeGenArray()[i] != null) {\n        EntityRegistry.addSpawn(EntityStoneMan.class, 150, 5, 10, EnumCreatureType.creature, new BiomeGenBase[] { BiomeGenBase.getBiomeGenArray()[i] });\nBiomeGenBase.getBiomeGenArray()[i] });\n      }\n  }\n复制代码\n"
        },
        {
            "author": "ItIsEnderman",
            "timestamp": 1471701420,
            "txt_content": "https://ustc-zzzz.gitbooks.io/fm ... 80%AA%E8%9B%8B.html\nhttps://ustc-zzzz.gitbooks.io/fm ... A8%A1%E5%9E%8B.html\n（来自：http://www.mcbbs.net/thread-517115-1-1.html）"
        }
    ]
}