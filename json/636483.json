{
    "title": "[[/]]SK实♂战教程系列 —— 第一弹<聊天管理脚本解析>",
    "author": "cc7w",
    "replyCount": 10,
    "timestamp": 1474784760,
    "txt_content": "嗯，果断先上脚本。\n\nOn chat:\n    if {prefix.%player%} is not set:\n        set {prefix.%player%} to \"\"\n        set {suffix.%player%} to \"\"\n        set {chatcolor.%player%} to \"white\"\n        set {mute.%player%} to false\n    if {mutetime.%player%} is less than 1 second:\n        if {spam.%player%} is less than 0:\n            cancel event\n            broadcast \"<%{prefix.%player%}%%player%%{suffix.%player%}%> <%{chatcolor.%player%}%>%message%\"\n            set {spam.%player%} to 3\n            exit\n        if {spam.%player%} is greater than -1:\n            if player does not have permission \"chat.spam\":\n                cancel event\n                message \"&4&l你说话太快了!请等待3秒后发言!\"\n                set {spam.%player%} to 3\n            if player has permission \"chat.spam\":\n                cancel event\n                broadcast \"<%{prefix.%player%}%%player%%{suffix.%player%}%> <%{chatcolor.%player%}%>%message%\"\n                set {spam.%player%} to 3\n                exit\n    if {mutetime.%player%} is greater than 1 second:\n        cancel event\n        message \"&4&1你已被禁言! &6&l%{mutetime.%player%}%后解除禁言!\"\n\n\n#刷屏控制\nevery 1 second:\n    loop players:\n        if {spam.%loop-player%} is not set:\n            set {spam.%loop-player%} to 0\n        remove 1 from {spam.%loop-player%}\nevery 1 seconds:\n    loop players:\n        remove 1 second from {mutetime.%loop-player%}\n\n\n#指令区\ncommand /addprefix <offline player> <text> <color=white>:\n    permission: chat.prefix\n    trigger:\n        set {prefix.%arg-1%} to \"[<%arg-3%>%arg-2%&r]\"\n        message \"&6你将 &a%arg-1% &6的前缀称号设置为 &r[<%arg-3%>%text-arg%&r]\"\n\ncommand /removeprefix <offline player>:\n    permission: chat.prefix\n    trigger:\n        set {prefix.%arg-1%} to \"\"\n        message \"&6你移除了 &a%arg-1% &6的前缀称号\"\n\ncommand /addsuffix <offline player> <text> <color=white>:\n    permission: chat.suffix\n    trigger:\n        set {suffix.%arg-1%} to \"[<%arg-3%>%arg-2%&r]\"\n        message \"&6你将 &a%arg-1% &6的后缀称号设置为 &r[<%arg-3%>%text-arg%&r]\"\n\ncommand /removesuffix <offline player>:\n    permission: chat.suffix\n    trigger:\n        set {suffix.%arg-1%} to \"\"\n        message \"&6你移除了 &a%arg-1% &6的后缀称号\"\n\ncommand /chatcolor <offline player> <color>:\n    permission: chat.color\n    trigger:\n        set {chatcolor.%arg-1%} to arg-2\n        message \"&6你将 &a%arg-1% 的聊天颜色设置为 <%arg-2%>??????\"\n\ncommand /mute <offline player> <time span=999 days>:\n    permission: chat.mute\n    trigger:\n        set {mutetime.%arg-1%} to arg-2\n        broadcast \"&6&a%arg-1% &6被 &c%player% &6禁言 &b%arg-2%&6\"\n\ncommand /unmute <offline player>:\n    permission: chat.mute\n    trigger:\n        set {mutetime.%arg-1%} to 0 second\n        broadcast \"&6&a%arg-1% &6被 &c%player% &6解除禁言\"复制代码\n\n\n我知道你们没有效果图是不会想学的\n\n\n\n\nChatManager.zip\n(935 Bytes, 下载次数: 21)\n\n\n\n2016-9-25 14:21 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n解析\n好好看，好好学。\n首先我们先复习一下我们的基础知识点。触发器:\n    条件\n    效果复制代码If XXXXXX:\n    XXXX复制代码loop XX:\n    XXXXXX复制代码command /XX:\n    permission:\n    trigger:复制代码好，现在我们来上课[雾]\n这一课讲得是如何写一个聊天管理插件。\n大概有以下模块：\n前缀/后缀设置禁言设置防刷屏表现模块(重点、难点)\n\n嗯，我们首先来看前缀后缀设置。\n首先构思，设置大概就是输入一个指令为一个玩家增加前缀。\n前缀用什么表示呢？变量。\n这个理论知识点要掌握好[拍黑板]。\n\ncommand /addprefix <offline player> <text> <color=white>:\n    permission: chat.prefix\n    trigger:\n        set {prefix.%arg-1%} to \"[<%arg-3%>%arg-2%&r]\"\n        message \"&6你将 &a%arg-1% &6的前缀称号设置为 &r[<%arg-3%>%text-arg%&r]\"\n\ncommand /removeprefix <offline player>:\n    permission: chat.prefix\n    trigger:\n        set {prefix.%arg-1%} to \"\"\n        message \"&6你移除了 &a%arg-1% &6的前缀称号\"\n\ncommand /addsuffix <offline player> <text> <color=white>:\n    permission: chat.suffix\n    trigger:\n        set {suffix.%arg-1%} to \"[<%arg-3%>%arg-2%&r]\"\n        message \"&6你将 &a%arg-1% &6的后缀称号设置为 &r[<%arg-3%>%text-arg%&r]\"\n\ncommand /removesuffix <offline player>:\n    permission: chat.suffix\n    trigger:\n        set {suffix.%arg-1%} to \"\"\n        message \"&6你移除了 &a%arg-1% &6的后缀称号\"复制代码\n来，我们看看例题的格式。command /addprefix <offline player> <text> <color=white>:\n    permission: chat.prefix\n    trigger:\n        set {prefix.%arg-1%} to \"[<%arg-3%>%arg-2%&r]\"\n        message \"&6你将 &a%arg-1% &6的前缀称号设置为 &r[<%arg-3%>%text-arg%&r]\"复制代码\n\n首先是我们的理论知识点\n command / : \n自定义命令的定义式这个必须掌握[拍桌]\n来来来 再讲一遍 不会的听好了\n<font face=\"黑体\"><font size=\"4\">command /自定义的命令 <参数A> <参数B> <参数C>:</font></font>\n<font face=\"黑体\"><font size=\"4\">    permission: 这个命令的对应权限</font></font>\n<font face=\"黑体\"><font size=\"4\">    trigger: 这个命令的触发器</font></font>复制代码\n\n来，我们看看这个触发器\nset {prefix.%arg-1%} to \"[<%arg-3%>%arg-2%&r]\"复制代码\n\n嗯 我们的参数A是玩家 这里的参数用arg来表示 arg-1  表示第一个参数\n我们的参数B是字符 就是任意的字符 \n参数C是一个颜色。\n如何在字符中使用颜色呢？\n<颜色>字符复制代码\n\n翻译过来就是\n<%arg-3%>%arg-2%复制代码\n\n这里这个出题者为了迷惑你们，特地加了一些迷惑的东西\n如[] 和 &r\n但这些不是你扣分的理由[拍桌子]\n嗯，文本要用\"\"括起来 这个知识点我也讲过了\n没括的站起来抄十遍【雾】\n\n\n嗯，这就是例1 怎么样 简单吧\n\n\n然后我们来看看例二。\n禁言控制\n不要看这道题看着很TM难，其实简单到爆了。\ncommand /mute <offline player> <time span=999 days>:\n    permission: chat.mute\n    trigger:\n        set {mutetime.%arg-1%} to arg-2\n        broadcast \"&6&a%arg-1% &6被 &c%player% &6禁言 &b%arg-2%&6\"\n\ncommand /unmute <offline player>:\n    permission: chat.mute\n    trigger:\n        set {mutetime.%arg-1%} to 0 second\n        broadcast \"&6&a%arg-1% &6被 &c%player% &6解除禁言\"\nevery 1 seconds:\n    loop players:\n        remove 1 second from {mutetime.%loop-player%}\n\n复制代码\n\n首先前面两句和上面一样，不多讲了。\n重点是第三句！\nevery 1 seconds:\n    loop players:\n        remove 1 second from {mutetime.%loop-player%}复制代码\n\n\n每一秒减少玩家1秒的禁言时间\nloop的格式不会的自己去翻课本【WIKI】！\n\n第三大题和第四大题 控制刷屏的和最后表达输出的\n这两个听我讲啊\n\n\nOn chat:\n    if {prefix.%player%} is not set:\n        set {prefix.%player%} to \"\"\n        set {suffix.%player%} to \"\"\n        set {chatcolor.%player%} to \"white\"\n        set {mute.%player%} to false\n    if {mutetime.%player%} is less than 1 second:\n        if {spam.%player%} is less than 0:\n            cancel event\n            broadcast \"<%{prefix.%player%}%%player%%{suffix.%player%}%> <%{chatcolor.%player%}%>%message%\"\n            set {spam.%player%} to 3\n            exit\n        if {spam.%player%} is greater than -1:\n            if player does not have permission \"chat.spam\":\n                cancel event\n                message \"&4&l你说话太快了!请等待3秒后发言!\"\n                set {spam.%player%} to 3\n            if player has permission \"chat.spam\":\n                cancel event\n                broadcast \"<%{prefix.%player%}%%player%%{suffix.%player%}%> <%{chatcolor.%player%}%>%message%\"\n                set {spam.%player%} to 3\n                exit\n    if {mutetime.%player%} is greater than 1 second:\n        cancel event\n        message \"&4&1你已被禁言! &6&l%{mutetime.%player%}%后解除禁言!\"\n\n\nevery 1 second:\n    loop players:\n        if {spam.%loop-player%} is not set:\n            set {spam.%loop-player%} to 0\n        remove 1 from {spam.%loop-player%}\n\n复制代码\n\n首先是每一秒减少玩家1点刷屏值\n在说话的时候\n如果有权限 就不用计算 直接输出\n如果没权限：\n刷屏值大于-1，不允许发言\n刷屏值小于0，允许发言，把刷屏值设置为3\n\n就是这样\n然后我们来看表现。\n我们最终希望的是这样的\n↓\n<前缀玩家名后缀> 聊天颜色的代码聊天信息\n我们上面变量都写过了\n对吧\n{prefix/suffix/chatcolor.玩家名}\n\n\n\n所以翻译过来就是\n\"<%{prefix.%player%}%%player%%{suffix.%player%}%> <%{chatcolor.%player%}%>%message%\"复制代码好了 就是这样\n其实可以仔细看看 只要符合逻辑 这张试卷【脚本】没什么难的\n就这样 下节课见\n\n传送门\nSkript 插件搬运贴\nSkript 课本WIKI翻译贴\n\n\n\n\n[groupid=1151]Minecraft插件百科[/groupid]",
    "replies": [
        {
            "author": "wcw506",
            "timestamp": 1474961760,
            "txt_content": "诶哟不错 能否在来个 范围说话的教程呢"
        },
        {
            "author": "nja2106820",
            "timestamp": 1474995960,
            "txt_content": "貌似感觉看不懂- -跟java差不多。。从入门到放弃"
        },
        {
            "author": "黑",
            "timestamp": 1475137980,
            "txt_content": "skript这么简单的东西怎么让你写出来怎么这么乱"
        },
        {
            "author": "cc7w",
            "timestamp": 1475146320,
            "txt_content": "583736449 发表于 2016-9-29 16:33\nskript这么简单的东西怎么让你写出来怎么这么乱\n仔细看看其实一点都不乱"
        },
        {
            "author": "黑",
            "timestamp": 1475159820,
            "txt_content": "1345979462 发表于 2016-9-29 18:52\n仔细看看其实一点都不乱\n原谅我说话带刺 我比较在意自己写的代码是否美观明了， 如果楼主可以优化一下代码\n我相信可以帮助到很多新人服主，如有冒昧 我是**"
        },
        {
            "author": "黑",
            "timestamp": 1475160120,
            "txt_content": "楼主可以在本贴提一下options的设置 比如把所有的语言提示列到脚本最上方\n话说用sk去做前后缀我觉得有点没必要"
        },
        {
            "author": "lxc0123",
            "timestamp": 1475589180,
            "txt_content": "wcw506 发表于 2016-9-27 15:36\n诶哟不错 能否在来个 范围说话的教程呢\non chat:\n    cancel event\n    loop players in radius X in player:\n        send \"%message%\" to loop-player\n\n没记错就是这样，很简单"
        },
        {
            "author": "lxc0123",
            "timestamp": 1475589600,
            "txt_content": "支持一下"
        },
        {
            "author": "wcw506",
            "timestamp": 1475591940,
            "txt_content": "lxc0123 发表于 2016-10-4 21:53\non chat:\n    cancel event\n    loop players in radius X in player:\n哈哈谢谢~"
        },
        {
            "author": "yyeerai",
            "timestamp": 1475844240,
            "txt_content": "建立楼主使用这个语句\non chat:\n        set message format to \"xxxxx\"复制代码来提高性能，简化代码"
        }
    ]
}