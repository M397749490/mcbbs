{
    "title": "[已解决]插件如何获取玩家是因为什么而死",
    "author": "飞翔之歌",
    "replyCount": 8,
    "timestamp": 1585380300,
    "txt_content": " 本帖最后由 飞翔之歌 于 2020-3-29 21:43 编辑 \n\nRT注：是插件\n用途:希望根据不同的死法作出不同的动作。诶？十个帖子了吗?\n比如玩家如果是被烧死我就输出xxx被烤成肉串了，或给旁边的人一个巨大的爆炸。注：这只是个例子，并不是真实的效果。\n",
    "replies": [
        {
            "author": "洞穴夜莺",
            "timestamp": 1585380660,
            "txt_content": " 本帖最后由 Billy12345 于 2020-3-28 15:42 编辑 \n\nEntityDamageEvent.getCause()"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1585380720,
            "txt_content": "Billy12345 发表于 2020-3-28 15:31\ngetDamageCause()\n对不起，忘记注明是插件了QAQ。"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1585380780,
            "txt_content": "飞翔之歌 发表于 2020-3-28 15:32\n对不起，忘记注明是插件了QAQ。\n发错了，不好意思"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1585381380,
            "txt_content": "Billy12345 发表于 2020-3-28 15:33\n发错了，不好意思\nPlayerDeathEvent是不可能获取他的死亡原因的，你需要EntityDamageEvent"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1585385520,
            "txt_content": "Billy12345 发表于 2020-3-28 15:43\nPlayerDeathEvent是不可能获取他的死亡原因的，你需要EntityDamageEvent\n是不是要建立一个HashMap,用于存储玩家最后一次Damage，并在PlayerDeathEvent中调用它？"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1585385820,
            "txt_content": "飞翔之歌 发表于 2020-3-28 16:52\n是不是要建立一个HashMap,用于存储玩家最后一次Damage，并在PlayerDeathEvent中调用它？ ...\n具体怎么保存是你的问题了"
        },
        {
            "author": "轻光233",
            "timestamp": 1585391220,
            "txt_content": "监听EntityDeathEvent,然后判断一下是否为玩家即可\nif(event.getEntity() instanceof Player){\n    //TODO\n}复制代码"
        },
        {
            "author": "a8105",
            "timestamp": 1585393680,
            "txt_content": "EntityDeathEvent e\nif(e.getEntity() instanceof Player)\n{\n    EntityDamageEvent event=e.getEntity().getLastDamageCause();\n}\n"
        }
    ]
}