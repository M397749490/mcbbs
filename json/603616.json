{
    "title": "求大神进来看看写插件报错",
    "author": "3222577979",
    "replyCount": 0,
    "timestamp": 1468531860,
    "txt_content": "rpgitem reload 重置版的apipaperspigot 1.9.4 R02 的api\n\n然后出现类型转换报错，希望大神看看帮忙解决\n\n\n\n\n084O31]A10RBR9(LX]H0{VT.png (232.01 KB, 下载次数: 0)\n\n下载附件\n\n2016-7-15 05:38 上传\n\n\n\n\n\n\n  public void onEnable()\n  {\n    getConfig().options().copyDefaults(true);\n    saveConfig();\n    File customConfigFile = new File(getDataFolder(), \"config.yml\");\n    FileConfiguration customConfig = YamlConfiguration.loadConfiguration(customConfigFile);\n    this.RpgItems = new RPGItems();\n    getServer().getPluginManager().registerEvents(this, this);\n    this.lore = \"英雄级武器\";\n    this.broadcast = \"玩家<player>携带英雄武器<item>加入游戏, 全场经验率调整为<exp>\";\n    this.exp = Double.valueOf(getConfig().getDouble(\"Exp\"));\n  }\n  @EventHandler(priority=EventPriority.MONITOR)\n  public void onJoin(PlayerJoinEvent e) {\n    List inv = null;\n    if (e.getPlayer().getInventory().getContents() != null) {\n      inv = new ArrayList(Arrays.asList(e.getPlayer().getInventory().getContents()));\n    }\n    if (e.getPlayer().getInventory().getArmorContents() != null) {\n      inv.addAll(Arrays.asList(e.getPlayer().getInventory().getArmorContents()));\n    }\n    RPGItem rpgitem = null;\n    boolean find = false;\n    if (inv != null)\n      for (ItemStack item : inv) {\n        rpgitem = this.RpgItems.toRPGItem(item);\n        if ((rpgitem != null) && \n          (ChatColor.stripColor(rpgitem.getLore()).toLowerCase().contains(this.lore.toLowerCase()))) {\n          find = true;\n        }\n        else\n        {\n          if (find) break;\n        }\n      }\n    if (find) {\n      this.playerSet.add(e.getPlayer());\n      getServer().broadcastMessage(ChatColor.translateAlternateColorCodes('&', this.broadcast.replaceAll(\"<player>\", e.getPlayer().getName()).replaceAll(\"<item>\", rpgitem.getDisplay()).replaceAll(\"<exp>\", \"§6%\" + this.exp.doubleValue() * 100.0D)));\n    }\n  }\n\n  @EventHandler(priority=EventPriority.MONITOR)\n  public void onQuit(PlayerQuitEvent e) { this.playerSet.remove(e.getPlayer()); }\n\n  @EventHandler(priority=EventPriority.HIGHEST, ignoreCancelled=true)\n  public void onKilled(EntityDeathEvent e) {\n    if ((e.getEntity().getKiller() != null) && (e.getDroppedExp() > 0) && \n      ((e.getEntity() instanceof Creature)) && \n      (!this.playerSet.isEmpty())) {\n      e.setDroppedExp((int)(e.getDroppedExp() * this.exp.doubleValue()));\n      e.getEntity().getKiller().sendMessage(\"§e因服内存在携带英雄武器的玩家, 杀怪经验率调整为§6%\" + this.exp.doubleValue() * 100.0D);\n    }\n  }\n}复制代码\n\n\n\n\n",
    "replies": []
}