{
    "title": "mod中，如何给自己做的剑加上nbt标签",
    "author": "ksgfk",
    "replyCount": 11,
    "timestamp": 1532250900,
    "txt_content": "Forge版本：forge-1.12.2-14.23.4.2705\n自己做了一把剑，想让它在被使用一次后加上已有的NBT标签，比如Unbreakable这种\nitem.setTagCompound(new NBTTagCompound());复制代码\n这样做似乎只是给它加个栏位\n找不到NBT的教程...",
    "replies": [
        {
            "author": "Himmelt",
            "timestamp": 1532650740,
            "txt_content": "先构造一个nbtcompound，然后往里放东西，放好之后，再setNBTCompound"
        },
        {
            "author": "Himmelt",
            "timestamp": 1532650800,
            "txt_content": "不过应该先获取nbt，然后修改获取到的nbt"
        },
        {
            "author": "1850343382",
            "timestamp": 1532667060,
            "txt_content": "如何添加nbt至你的物品？这个应该可以帮得到你\nhttps://emxtutorials.wordpress.com/adding-nbt-data-to-items/"
        },
        {
            "author": "ksgfk",
            "timestamp": 1532997060,
            "txt_content": "Himmelt 发表于 2018-7-27 08:20\n不过应该先获取nbt，然后修改获取到的nbt\n还有个问题，部分mod会在物品上写上一些介绍，就像核电工艺的聚变堆核心有一大串街上，这是怎么做到的，还是nbt吗"
        },
        {
            "author": "Himmelt",
            "timestamp": 1533017940,
            "txt_content": "ksgfk 发表于 2018-7-31 08:31\n还有个问题，部分mod会在物品上写上一些介绍，就像核电工艺的聚变堆核心有一大串街上，这是怎么做到的， ...\n重写Item的方法\n@SideOnly(Side.CLIENT)\npublic void addInformation(ItemStack stack, EntityPlayer player, List list, boolean advanced);\n"
        },
        {
            "author": "ksgfk",
            "timestamp": 1533175680,
            "txt_content": "Himmelt 发表于 2018-7-31 14:19\n重写Item的方法\n@SideOnly(Side.CLIENT)\npublic void addInformation(ItemStack stack, EntityPlayer pla ...\n我在给addInformation方法的List添加元素的时候，一直提示我错误....\n我想在这里面添上我自己设的nbt\n    @SideOnly(Side.CLIENT)\n    public void addInformation(ItemStack stack, @Nullable World worldIn, List<String> tooltip, ITooltipFlag flagIn) {\n        String a = Integer.toString(stack.getTagCompound().getInteger(\"levelup\"));\n        tooltip.add(a);\n    }复制代码\n然后控制台报错\n[main/INFO] [STDOUT]: [net.minecraft.init.Bootstrap:printToSYSOUT:629]: ---- Minecraft Crash Report ----\n// Why did you do that?\n\nTime: 8/2/18 10:05 AM\nDescription: Initializing game\n\njava.lang.NullPointerException: Initializing game\n        at com.github.ksgfk.oceanheart.objects.tools.ToolSwordTrailblazer.addInformation(ToolSwordTrailblazer.java:95)\n        at net.minecraft.item.ItemStack.getTooltip(ItemStack.java:811)\n        at net.minecraft.client.Minecraft.lambda$populateSearchTreeManager$1(Minecraft.java:625)\n        at net.minecraft.client.util.SearchTree.index(SearchTree.java:93)\n        at net.minecraft.client.util.SearchTree.add(SearchTree.java:78)\n        at java.lang.Iterable.forEach(Iterable.java:75)\n        at net.minecraft.client.Minecraft.populateSearchTreeManager(Minecraft.java:639)\n        at net.minecraft.client.Minecraft.init(Minecraft.java:575)\n        at net.minecraft.client.Minecraft.run(Minecraft.java:421)\n        at net.minecraft.client.main.Main.main(Main.java:118)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at net.minecraft.launchwrapper.Launch.launch(Launch.java:135)\n        at net.minecraft.launchwrapper.Launch.main(Launch.java:28)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at net.minecraftforge.gradle.GradleStartCommon.launch(GradleStartCommon.java:97)\n        at GradleStart.main(GradleStart.java:25)\n\n\nA detailed walkthrough of the error, its code path and all known details is as follows:\n---------------------------------------------------------------------------------------\n\n-- Head --\nThread: Client thread\nStacktrace:\n        at com.github.ksgfk.oceanheart.objects.tools.ToolSwordTrailblazer.addInformation(ToolSwordTrailblazer.java:95)\n        at net.minecraft.item.ItemStack.getTooltip(ItemStack.java:811)\n        at net.minecraft.client.Minecraft.lambda$populateSearchTreeManager$1(Minecraft.java:625)\n        at net.minecraft.client.util.SearchTree.index(SearchTree.java:93)\n        at net.minecraft.client.util.SearchTree.add(SearchTree.java:78)\n        at java.lang.Iterable.forEach(Iterable.java:75)\n        at net.minecraft.client.Minecraft.populateSearchTreeManager(Minecraft.java:639)\n        at net.minecraft.client.Minecraft.init(Minecraft.java:575)\n\n-- Initialization --\nDetails:\nStacktrace:\n        at net.minecraft.client.Minecraft.run(Minecraft.java:421)\n        at net.minecraft.client.main.Main.main(Main.java:118)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at net.minecraft.launchwrapper.Launch.launch(Launch.java:135)\n        at net.minecraft.launchwrapper.Launch.main(Launch.java:28)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at net.minecraftforge.gradle.GradleStartCommon.launch(GradleStartCommon.java:97)\n        at GradleStart.main(GradleStart.java:25)\n复制代码\n大佬这是怎么回事..."
        },
        {
            "author": "的风格好",
            "timestamp": 1533180780,
            "txt_content": " 本帖最后由 的风格好 于 2018-8-2 11:40 编辑 \n\ngetInteger(\"levelup\") 产生了NullPointerException\ntry catch 或者 看看tag里有没有\"levelup\"\n\nNBTTagCompound.java 中\npublic int getInteger(String key)\n{\n    try\n    {\n        if (this.hasKey(key, 99))\n        {\n            return ((NBTPrimitive)this.tagMap.get(key)).getInt();\n        }\n    }\n    catch (ClassCastException var3)\n    {\n        ;\n    }\n    return 0;\n}复制代码this.tagMap.get(key)出抛出了异常 NullPointerException\n\n\n"
        },
        {
            "author": "ksgfk",
            "timestamp": 1533181320,
            "txt_content": " 本帖最后由 ksgfk 于 2018-8-2 13:23 编辑 \n的风格好 发表于 2018-8-2 11:33\ngetInteger(\"levelup\") 产生了NullPointerException\n看看tag里有没有\"levelup\"\ntag里的\"levelup\"是在攻击以后才会被添加上去....所以初始化的时候才会报错嘛....\n那如何让物品直接附带一个tag\n-----------------------------------------------------------------\n\n解决了，\n    @SideOnly(Side.CLIENT)\n    public void addInformation(ItemStack stack, @Nullable World worldIn, List<String> tooltip, ITooltipFlag flagIn) {\n        super.addInformation(stack, worldIn, tooltip, flagIn);\n        if (!(stack.getTagCompound() == null)) {\n            int a = stack.getTagCompound().getInteger(\"levelup\");\n            String b = \"能量:\" + a + \"/100000\";\n            tooltip.add(b);\n        }\n    }复制代码感谢dalao提醒"
        },
        {
            "author": "c1230",
            "timestamp": 1533211260,
            "txt_content": "Mod好像不知道，我知道插件的"
        },
        {
            "author": "的风格好",
            "timestamp": 1533301140,
            "txt_content": " 本帖最后由 的风格好 于 2018-8-3 21:05 编辑 \nksgfk 发表于 2018-8-2 11:42\ntag里的\"levelup\"是在攻击以后才会被添加上去....所以初始化的时候才会报错嘛....\n那如何让物品直接附带一 ...\n建议使用try catch 语句包围，以防玩家用铁砧命名物品或其他方式使物品有了nbt标签。\n@SideOnly(Side.CLIENT)\npublic void addInformation(ItemStack stack, @Nullable World worldIn, List<String> tooltip, ITooltipFlag flagIn)\n{\n    super.addInformation(stack, worldIn, tooltip, flagIn);\n    try\n    {\n        int a = stack.getTagCompound().getInteger(\"levelup\");\n        String b = \"能量:\" + a + \"/100000\";\n        tooltip.add(b);\n    }\n    catch(NullPointerException e)\n    {\n        System.out.println(\"No nbt key called \"levelup\"\");\n    }\n}\n复制代码"
        },
        {
            "author": "思念丶···",
            "timestamp": 1533438660,
            "txt_content": "的风格好 发表于 2018-8-3 20:59\n建议使用try catch 语句包围，以防玩家用铁砧命名物品或其他方式使物品有了nbt标签。\n ...\nQ：2820538825 定制类似的MOD 请加我"
        }
    ]
}