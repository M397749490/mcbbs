{
    "title": "[API|前置]LanguageUtils——获取物品生物名称API[1.7.10-1.12]",
    "author": "fyfly",
    "replyCount": 60,
    "timestamp": 1436274240,
    "txt_content": " 本帖最后由 1582952890 于 2017-9-17 07:20 编辑 \n\n简介:\n获取一个物品的名字一直是一个很麻烦的事情，Bukkit/Spigot没有提供相对的API。之前这里有一个实现，但是只支持英文，而且对于一些特殊的物品(药水，怪物蛋等)没有支持。所以这个API诞生了(其实这个API一年前就想搞了，一直没开工/w\\)。\n在之后的更新中加入了获取生物、附魔、附魔等级名字的功能。\n这个API为插件提供了获取物品名字的能力，能够根据玩家客户端使用的语言发送相应语言的物品名称(使用的是原版的语言文件，一共90个)。目前该API只支持原版物品和生物。在1.4.0更新中，服主和插件作者已经可以自定义语言条目了，具体请看后文(之后版本中可能就使用这一功能提供mod支持)。\n\n从现在1.2.0.1-1.7.10的版本起，该插件已经能够工作在Cauldron/KCauldron服务器上了，并且对于原版的物品和生物工作是正常的。只不过可能花费时间长一点。当然，对于mod里面的物品也不会崩溃，但是只能够返回一个自动生成的Material的名字，如果你有好的想法解决mod支持这个问题可以告诉我。\n\n我仍然还是推荐插件作者用getServer().getName().contains(\"Cauldron\") // JavaPlugin 类中复制代码来检测一下环境。\n\nDemo: \n\n\n\n\nacb40f0c-1f87-11e5-9414-acc596f343ff.png (437.48 KB, 下载次数: 89)\n\n下载附件\n\n2015-7-8 18:38 上传\n\n\n\n\n\n\n目前版本采用HashMap和Enum(其实还是HashMap)来管理和获取语言文件。大概需要100-250 ms来加载所有语言文件，需要50-300 μs来获取一个名字(开服第一次获取时间可能长一点(大概1ms左右)，包括反射获取客户端语言的时间)。如果你有更高效的方法请在Github上发PR或者Issues。\n\n当前构建状态: \n\n资源:\nGithub项目(使用MIT协议开源): https://github.com/MascusJeoraly/LanguageUtilsGithub发布页面: https://github.com/MascusJeoraly/LanguageUtils/releasesDemo插件: https://github.com/MascusJeoraly/LangUtilsExampleMaven仓库(穷orz,只好用Github作仓库了): https://raw.github.com/MascusJeoraly/LanguageUtils/mvn-repo/SpigotMC上的发布页面: https://www.spigotmc.org/resources/8859/\n\n\n使用:\n- 如果你是一个服主:\n如果有插件需要本插件作为前置，只要把本插件(无任何后缀的版本)下载下来放到plugins/文件夹里去就行了。本插件单独使用无任何功能!(除非你想凑数什么的/w\\)\n\n本插件主要版本为1.12，如果你使用的是Minecraft 1.7.10或1.8.x或1.9.4或1.10.x或1.11.x，请下载后缀为1.7.10或1.8.x或1.9.x或1.10.x或1.11.x的版本!(暂无计划支持更低的版本，如果需要请自行更改编译)\n\n设置：\n# 当一个语言下的名字不存在时，将会采用该语言下的名字。默认为英语。\nFallbackLanguage=en_us复制代码\n\n修改语言条目的教程：\n首先你需要先运行一下插件，让插件生成lang文件夹和README.txt接下来进入plugins/LangUtils/lang/文件夹如果你英文在初中水平左右请直接阅读README.txt创建你所需要改的语言文件，如果你要修改英文的，那就创建en_US.lang，如果要修改中文的，那就创建zh_CN.lang。你到README.txt可以找到一个列表的有效名称打开对应的语言文件，开始编辑范例，修改已有条目：tile.chest.name=钻石箱子范例，添加新条目(注意是Material的名字)：DIAMOND_CHEST=钻石箱子\n\n\n- 如果你是一个开发者:\n首先，请把该插件加到你IDE的Build Path里。如果你想要源码和Javadoc，我提供了sources和javadoc，至于怎么使用请参考各自IDE的说明。\n\n接下来，添加插件的依赖:\n将下面这段代码加到你的plugin.yml里面去:\ndepend: [LangUtils]复制代码如果你的插件有多个依赖，用逗号(英文)隔开:\ndepend: [LangUtils, Vault]复制代码或者也可以添加为软依赖:softdepend: [LangUtils]复制代码\n\n\n如果你使用了Gradle或者Maven:\n\nGradle:\n本API使用的也是Gradle，所以更推荐Gradle。添加以下代码到你的build.gradle文件里:\nrepositories {\n    maven {\n        url 'https://raw.github.com/MascusJeoraly/LanguageUtils/mvn-repo/'\n    }\n}\ndependencies {\n    compile group: 'com.meowj', name: 'LangUtils', version: '1.9' // 请检查最新版本\n}复制代码Maven:\n添加以下代码到你的pom.xml里:\n<repositories>\n  <repository>\n    <id>lang-utils-repo</id>\n    <url>https://raw.github.com/MascusJeoraly/LanguageUtils/mvn-repo/</url>\n  </repository>\n</repository>\n\n<dependencies>\n  <dependency>\n    <groupId>com.meowj</groupId>\n    <artifactId>LangUtils</artifactId>\n    <!--请检查最新版本 -->\n    <version>1.9</version>\n  </dependency>\n</dependencies>复制代码\n\n接下来是一些功能的对应方法，你也可以去看这个示例插件:\n\n1. 获取一个物品显示的名字(包括玩家自己自定义的名字)(locale是类似于en_US或者zh_CN这样的):\nLanguageHelper.getItemDisplayName(itemStack, locale);\nLanguageHelper.getItemDisplayName(itemStack, player);复制代码\n2. 获取物品的名字(不包括玩家自定义的名字):\nLanguageHelper.getItemName(itemStack, locale);\nLanguageHelper.getItemName(itemStack, player);复制代码\n3. 获取物品未被本地化的名字(Unlocalized Name，类似于tile.dirt.name这样的):\nLanguageHelper.getItemUnlocalizedName(itemStack);复制代码\n4. 将未被本地化的名字翻译成本地化的名字:\nLanguageHelper.translateToLocal(unlocalizedName, locale);复制代码\n5.获取生物非本地化的名字:\nLanguageHelper.getEntityUnlocalizedName(entity);\nLanguageHelper.getEntityUnlocalizedName(entityType);复制代码\n6. 获取生物本地化的名字:\nLanguageHelper.getEntityName(entity, locale);\nLanguageHelper.getEntityName(entity, player);\nLanguageHelper.getEntityName(entityType, locale);\nLanguageHelper.getEntityName(entityType, player);复制代码\n7. 获取生物显示的名字(包括自定义的名字):\nLanguageHelper.getEntityDisplayName(entity, locale);\nLanguageHelper.getEntityDisplayName(entity, player);复制代码当然，如果你只想要英语的名字也可以用这个:\nentity.getName();复制代码\n8. 获取玩家正在使用的语言(返回的是locale):\nLocaleHelper.getPlayerLanguage(player);复制代码\n9. 获取附魔非本地化名字\nLanguageHelper.getEnchantmentUnlocalizedName(enchantment);复制代码\n10. 获取附魔名字\nLanguageHelper.getEnchantmentName(enchantment, player);\nLanguageHelper.getEnchantmentName(enchantment, locale);复制代码\n11. 获取附魔显示的名字(包括等级)\nLanguageHelper.getEnchantmentDisplayName(enchantment, level, player);\nLanguageHelper.getEnchantmentDisplayName(enchantment, level, locale);\nLanguageHelper.getEnchantmentDisplayName(entry, level, player);\nLanguageHelper.getEnchantmentDisplayName(entry, level, locale);复制代码其中entry是Map.Entry<Enchantment, Integer>类型的\n12. 获取附魔等级未本地化名字\nLanguageHelper.getEnchantmentLevelUnlocalizedName(level);复制代码\n13. 获取附魔等级名字\nLanguageHelper.getEnchantmentLevelName(level, player);\nLanguageHelper.getEnchantmentLevelName(level, locale);复制代码\n14. 注册语言条目：\nLanguageRegistry.INSTANCE.registerEntry(lang, unlocalizedName, localizedName);复制代码\n\n\n如果你想对本API贡献代码:\n\n首先你最好去安装Gradle，因为本插件使用Gradle来管理代码。如果你不想安装Gradle，下面的指令请将gradle改为gradlew(Windows)或者./gradlew(Linux, 如果没权限先运行chmod +x gradlew).\n构建:\n[切换到工程的目录]\n$ gradle build复制代码你可以在build/libs内找到构建后的文件.\n运行测试服务器:\n首先你需要获取一份服务端，你可以使用Spigot官方的BuildTools，也可以在这里下载.\n你应该能的到一份文件名类似于spigot-1.9.4-R0.1-SNAPSHOT.jar的文件.将其重命名为Server.jar放到run/文件夹里(如果没有则自己创建一个)\n之后运行:\n[切换到工程目录]\n$ gradle run复制代码JUnit测试:\n[切换到工程目录]\n$ gradle test复制代码生成开发环境工程文件:\n- 如果你使用的是IntelliJ IDEA:[切换到工程目录]\n$ gradle idea复制代码如果你只想要一个Module，运行gradle ideaModule.\n\n- 如果你是用的是Eclipse:\n[切换到工程目录]\n$ gradle eclipse复制代码如果有用其它IDE的，就凑合着看吧=w=.\n\nPull Requests:\n如果你对插件有改进，请Fork我的工程，并给我发PR.\n\n下载地址(3个都可以):https://github.com/MascusJeoraly/LanguageUtils/releaseshttp://pan.baidu.com/s/1nt7osy9https://www.spigotmc.org/resources/8859/history(这里面没有1.7.10版本和1.8.9的下载)\n\n\n更新日志:\n\n1.9:\n升级至1.12\n\n1.7:\n升级至1.11\n\n1.5.0:\n升级至1.9.4\n1.3.0:\n添加附魔和附魔等级支持(感谢 hexosse)修复药水的Unit Test问题\n1.2.0.1-1.7.10:\n修复Cauldron/KCauldron的兼容问题注意此版本对应的1.8.7主要版本仍然是1.2.0.\n1.2.0:\n添加生物语言支持\n1.1.1:\n修复玩家头颅显示错误问题\n\n\n如果你喜欢这个工程，请在Github给这个工程Star. 如果有Bug请向我汇报.",
    "replies": [
        {
            "author": "a8105",
            "timestamp": 1436276220,
            "txt_content": " 本帖最后由 810587921 于 2015-7-7 21:54 编辑 \n已在github的Issue回复,如果该插件原创属实请在Issue回复,稍后可删除以保持Issue区整洁\n谢谢合作验证完毕"
        },
        {
            "author": "ColorsWind",
            "timestamp": 1436276340,
            "txt_content": "能否说一下这个API的授权协议好吧看到了 MIT"
        },
        {
            "author": "fyfly",
            "timestamp": 1436277360,
            "txt_content": " 本帖最后由 fyfly 于 2015-7-7 21:58 编辑 \n810587921 发表于 2015-7-7 21:37\n验证完毕\n谁和你讲Github的Issues可以删除了orz, https://github.com/isaacs/github/issues/253 这个问题排了这么长还是没加上去"
        },
        {
            "author": "fyfly",
            "timestamp": 1436362140,
            "txt_content": "更新至1.1.1,修复玩家头颅显示问题"
        },
        {
            "author": "阿列萌比",
            "timestamp": 1436363520,
            "txt_content": "我觉得挺不错啊，都汉化而且挺方便的"
        },
        {
            "author": "fire__rain",
            "timestamp": 1436465400,
            "txt_content": "然并luan"
        },
        {
            "author": "fyfly",
            "timestamp": 1437118380,
            "txt_content": "已添加支持1.7.10的版本，如果需要的服主可以来安装"
        },
        {
            "author": "fyfly",
            "timestamp": 1437566580,
            "txt_content": "更新1.2.0版本，添加生物语言支持"
        },
        {
            "author": "KIYAVA",
            "timestamp": 1437568140,
            "txt_content": "6666！收下了"
        },
        {
            "author": "fyfly",
            "timestamp": 1437588420,
            "txt_content": "1.7.10的版本更新1.2.0.1，添加Cauldron/KCauldron兼容，注意只是兼容而不是能够获取mod物品名称"
        },
        {
            "author": "fyfly",
            "timestamp": 1438486920,
            "txt_content": "更新1.3.0，添加附魔与附魔等级支持。1.7.10版本稍后再准备更新"
        },
        {
            "author": "黄总",
            "timestamp": 1438617540,
            "txt_content": "请问一般什么类型的插件会用到这个插件做前置呢？"
        },
        {
            "author": "fyfly",
            "timestamp": 1438618380,
            "txt_content": "黄总 发表于 2015-8-3 23:59\n请问一般什么类型的插件会用到这个插件做前置呢？\n暂时没有公开的吧，就是为作者提供个API用，可能私服也会用到，不过这位仁兄已经打算在他的下一个插件使用了"
        },
        {
            "author": "fyfly",
            "timestamp": 1439472720,
            "txt_content": "更新1.4.0，添加自定义语言条目功能"
        },
        {
            "author": "li709854423",
            "timestamp": 1449739980,
            "txt_content": "不明所以。。是说根据这个获取物品名 的时候能获取到中文名吗？\n我以前有个疑惑就是。quests插件。比如需求物品之类的。他都会显示成英文的。。用这个插件会变成中文嘛？我估计不会吧 - -"
        },
        {
            "author": "心里有她",
            "timestamp": 1449743880,
            "txt_content": "插件不错噢"
        },
        {
            "author": "fyfly",
            "timestamp": 1449756480,
            "txt_content": "li709854423 发表于 2015-12-10 17:33\n不明所以。。是说根据这个获取物品名 的时候能获取到中文名吗？\n我以前有个疑惑就是。quests插件。比如需求 ...\n不会，必须要调用我这个插件的API才行"
        },
        {
            "author": "li709854423",
            "timestamp": 1449799560,
            "txt_content": "fyfly 发表于 2015-12-10 22:08\n不会，必须要调用我这个插件的API才行\n= =不知道有没有意义啊。先码一下再考虑。。一般RPG服都是自定义名字。。也用不到原版的这些"
        },
        {
            "author": "南方",
            "timestamp": 1449802080,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "huwei5201314789",
            "timestamp": 1451791140,
            "txt_content": "没有1.72的吗？"
        },
        {
            "author": "fyfly",
            "timestamp": 1451794740,
            "txt_content": "huwei5201314789 发表于 2016-1-3 11:19\n没有1.72的吗？\n你可以试试1.7.10版本，不保证能用，不过这个是完全开源你可以自己修改"
        },
        {
            "author": "huwei5201314789",
            "timestamp": 1451795700,
            "txt_content": "fyfly 发表于 2016-1-3 12:19\n你可以试试1.7.10版本，不保证能用，不过这个是完全开源你可以自己修改\n试过了，完美报错。。\n当然，只是试过了与http://www.mcbbs.net/thread-471208-1-1.html\n完美报错{:10_503:}"
        },
        {
            "author": "fyfly",
            "timestamp": 1451799780,
            "txt_content": "huwei5201314789 发表于 2016-1-3 12:35\n试过了，完美报错。。\n当然，只是试过了与http://www.mcbbs.net/thread-471208-1-1.html\n完美报错{:10_50 ...\n1.7.2太老了我不想支持，如果你想要的话自己改吧"
        },
        {
            "author": "huwei5201314789",
            "timestamp": 1451803920,
            "txt_content": "fyfly 发表于 2016-1-3 13:43\n1.7.2太老了我不想支持，如果你想要的话自己改吧\n额，，，我怎么知道怎么改= ={:10_493:}"
        },
        {
            "author": "fyfly",
            "timestamp": 1464435720,
            "txt_content": "已升级1.9.x"
        },
        {
            "author": "A-Kreedz",
            "timestamp": 1464928080,
            "txt_content": "同头像的来支持一下，期待插件能做得更好"
        },
        {
            "author": "loneen",
            "timestamp": 1464933120,
            "txt_content": "楼主你真的是太帅啦"
        },
        {
            "author": "fyfly",
            "timestamp": 1467313860,
            "txt_content": "已更新MC1.10.2的对应版本，增加了一个回溯语言的选项"
        },
        {
            "author": "zyizhuo",
            "timestamp": 1467439260,
            "txt_content": "好创意，拿来。。。。"
        },
        {
            "author": "Peter_Hao",
            "timestamp": 1472290800,
            "txt_content": "很好的一个插件~收下了~谢谢"
        },
        {
            "author": "fyfly",
            "timestamp": 1496945160,
            "txt_content": "已更新至1.12"
        },
        {
            "author": "Bryan33",
            "timestamp": 1496993640,
            "txt_content": "fyfly 发表于 2017-6-9 02:06\n已更新至1.12\n提交了一个issue  我觉得可以把HashMap改成EnumMap"
        },
        {
            "author": "寂",
            "timestamp": 1497940620,
            "txt_content": "楼主您好，我是一个插件开发者。\n我打算用您的API来获取一些东西（比如附魔）对应的中文名，但是我似乎遇到了一些问题无法解决：\n以下是调用您的API的异常信息（节选）：\njava.lang.NoSuchFieldError: BINDING_CURSE\n        at com.meowj.langutils.lang.convert.EnumEnchantment.<clinit>(EnumEnchant\nment.java:55) ~[?:?]\n        at com.meowj.langutils.lang.LanguageHelper.getEnchantmentUnlocalizedName\n(LanguageHelper.java:230) ~[?:?]\n        at com.meowj.langutils.lang.LanguageHelper.getEnchantmentName(LanguageHe\nlper.java:253) ~[?:?]\n        at chenji.itemeditor.help.HelpManager.<init>(HelpManager.java:65) ~[?:?]\n\n\nHelpManager.java 65:  String display = LanguageHelper.getEnchantmentName(e3, \"zh_cn\");   //e3是一个非null的Enchantment\n测试环境是java8 + Spigot 1.10.2 （R0.1）\n劳烦您帮忙看下是什么原因qaq。感谢了\n"
        },
        {
            "author": "qwe459223217",
            "timestamp": 1497947640,
            "txt_content": "方便的插件"
        },
        {
            "author": "fyfly",
            "timestamp": 1498023360,
            "txt_content": "1582952890 发表于 2017-6-20 14:37\n楼主您好，我是一个插件开发者。\n我打算用您的API来获取一些东西（比如附魔）对应的中文名，但是我似乎遇到 ...\n你用的是对应1.10.2的LangUtils吗，对应的插件版本是1.6.3。不同版本之间是不兼容的。"
        },
        {
            "author": "寂",
            "timestamp": 1498045680,
            "txt_content": "fyfly 发表于 2017-6-21 13:36\n你用的是对应1.10.2的LangUtils吗，对应的插件版本是1.6.3。不同版本之间是不兼容的。 ...\n好吧我明白了 一直以为您网盘中的文件名 \n比如1.8.1-1.11.2是支持1.8.1版本到1.11.2 \n之前没好好看贴，见笑了，感谢您的解答与回复。"
        },
        {
            "author": "Not103",
            "timestamp": 1509755100,
            "txt_content": "怎么弄都显示不了中文"
        },
        {
            "author": "fyfly",
            "timestamp": 1509822060,
            "txt_content": "Not103 发表于 2017-11-4 08:25\n怎么弄都显示不了中文\n用的是哪个版本呢"
        },
        {
            "author": "Not103",
            "timestamp": 1509829320,
            "txt_content": "fyfly 发表于 2017-11-5 03:01\n用的是哪个版本呢\n服务器版本:paperspigot 插件：LangUtils-1.8.1-1.11.2"
        },
        {
            "author": "Not103",
            "timestamp": 1509831000,
            "txt_content": "换了新版本 然后就又没提示任何东西"
        },
        {
            "author": "fyfly",
            "timestamp": 1510037280,
            "txt_content": "Not103 发表于 2017-11-5 05:02\n服务器版本:paperspigot 插件：LangUtils-1.8.1-1.11.2\n把配置里的en_us改成all试试，如果没改的话默认只加载英语的"
        },
        {
            "author": "fyxrim",
            "timestamp": 1516204320,
            "txt_content": "fyfly 发表于 2017-11-7 14:48\n把配置里的en_us改成all试试，如果没改的话默认只加载英语的\n你好 还是不行 加载不出来语言 我跟他一样paper服务端1.11.2版本 你的插件就是1.8.1 \n\nFallbackLanguage: all\nLoadLanguage:\n- all\n\n\n还有zh_CN 还是不行"
        },
        {
            "author": "fyfly",
            "timestamp": 1516351500,
            "txt_content": "fyxrim 发表于 2018-1-17 23:52\n你好 还是不行 加载不出来语言 我跟他一样paper服务端1.11.2版本 你的插件就是1.8.1 \n\nFallbackLanguage: ...\n等我回去试试Paper吧，最近没什么时间所以可能要等一会"
        },
        {
            "author": "fenghaolin1",
            "timestamp": 1524308340,
            "txt_content": "我是一个插件的开发者，这个插件在1.9无法获取到包含药水效果的ItemDisplayName，报错如下\n\n\n\n\n\n\nError.png\n(18.59 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2018-4-21 18:59 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "TONMMY",
            "timestamp": 1533545520,
            "txt_content": "没有看出此api的作用"
        },
        {
            "author": "INKDRRAK",
            "timestamp": 1533693120,
            "txt_content": "很棒的插件\n（人气恢复了再评分\n希望能够更新至支持1.13"
        },
        {
            "author": "INKDRRAK",
            "timestamp": 1534381620,
            "txt_content": "很需要该插件，希望可以尽快支持到1.13"
        },
        {
            "author": "2048028141",
            "timestamp": 1534383120,
            "txt_content": "不错啊，能检查名字了"
        },
        {
            "author": "huangjc666",
            "timestamp": 1542963000,
            "txt_content": "找了好久，以为bbs上没有，想搬运，结果……"
        },
        {
            "author": "huangjc666",
            "timestamp": 1542963060,
            "txt_content": "楼主这是你原创的吗？spigot上好像也有"
        },
        {
            "author": "18758788225",
            "timestamp": 1546347840,
            "txt_content": "那个，有个插件拿你当前置，然后放进去只有英文，改了zh_cn只剩代码。。。"
        },
        {
            "author": "咸鱼气功王",
            "timestamp": 1548123240,
            "txt_content": "mod物品返回自动生成的Material名称,能否在做一个映射表呢?这样似乎能更好的支持mod物品吧."
        },
        {
            "author": "Tangao125",
            "timestamp": 1548500340,
            "txt_content": "非常好的插件，顶！！！"
        },
        {
            "author": "dugulp",
            "timestamp": 1549359060,
            "txt_content": "楼主我看你好长时间没有更新了1.13版本的LangUtils 我搬运啦啊"
        },
        {
            "author": "Bug520",
            "timestamp": 1563340560,
            "txt_content": " 本帖最后由 Bug520 于 2019-7-17 13:22 编辑 \n\n很实用的一款插件，非常好用"
        },
        {
            "author": "h7730861",
            "timestamp": 1565079420,
            "txt_content": "你好，请问这个插件跟mythicmobs有冲突。。有什么解决方案？我记得我装这个插件是rpgitem需要的前置"
        },
        {
            "author": "安塔利亚RPG",
            "timestamp": 1584965280,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "爱你入骨",
            "timestamp": 1588939980,
            "txt_content": "表示不会用嘤嘤嘤"
        },
        {
            "author": "沃德世界",
            "timestamp": 1613197500,
            "txt_content": "很不错的前置，拿走了。"
        },
        {
            "author": "1059945080",
            "timestamp": 1613371800,
            "txt_content": "这也行？？？？？？？？？？？？？？？？？？？"
        }
    ]
}