{
    "title": "[已解决]如何更新武器的属性标签？",
    "author": "红尘陌客",
    "replyCount": 0,
    "timestamp": 1597665840,
    "txt_content": " 本帖最后由 红尘陌客 于 2020-8-17 22:03 编辑 \n\n想设计一把剑，它的攻击力会随着攻击的次数减少。我写了一个ItemSword的子类，通过重写 getAttributeModifiers(EntityEquipmentSlot slot, ItemStack stack) 方法如下：public Multimap<String, AttributeModifier> getAttributeModifiers(EntityEquipmentSlot slot, ItemStack stack) {\nCapaIronWeapon cis = stack.getCapability(CapabilityLoader.CAPA_IRON_WEAPON, null);\n                Multimap<String, AttributeModifier> multimap = HashMultimap.<String, AttributeModifier>create();\n                if (slot == EntityEquipmentSlot.MAINHAND) {\n                        float damage = (float) (this.swordType.getAttack() * cis.getHardness() * 0.02 * cis.getPurity() * 0.01\n                                        * (0.5 + Math.sqrt(0.5 + cis.getSharp() * 0.02 * cis.getPurity() * 0.01)));\n                        float speed = this.swordType.getAttackSpeed();\n                        multimap.put(SharedMonsterAttributes.ATTACK_DAMAGE.getName(),new AttributeModifier(ATK_DAMAGE_MODIFIER_UUID, \"Attack damage\", damage, 0));//每次调用，传入的damage的值都不同\n                        multimap.put(SharedMonsterAttributes.ATTACK_SPEED.getName(),\n                                        new AttributeModifier(ATK_SPEED_MODIFIER_UUID, \"Attack speed\", speed, 0));\n                }\n                return multimap;\n        }复制代码\n\n每次调用该方法时,AttributeModifier中都会获得一个不同值的变量damage，以达到产生不同攻击力的需求。经测试攻击实体后，攻击力确实发生了变化，但是属性标签显示的攻击力却不会改变，\n\n\n\n\nimage.png (33.77 KB, 下载次数: 8)\n\n下载附件\n\n2020-8-17 19:51 上传\n\n\n\n\n\n\n\n扔掉重新拾起后属性标签才更新。\n\n\n\n\nimage.png (31.24 KB, 下载次数: 4)\n\n下载附件\n\n扔掉重新拾起\n2020-8-17 19:55 上传\n\n\n\n\n\n\n请问怎样通过代码，才能使该属性标签在剑攻击实体后能立即更新？\n\n\n\n\n\nimage.png\n(46.11 KB, 下载次数: 7)\n\n\n\n\n下载附件\n\n\n2020-8-17 19:41 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": []
}