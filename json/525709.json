{
    "title": "2048 c语言版本",
    "author": "kj415j45",
    "replyCount": 4,
    "timestamp": 1448532660,
    "txt_content": " 本帖最后由 kj415j45 于 2015-11-27 19:14 编辑 \n\nlz一心钻研C语言\n终于手贱写出了2048\n\n\n\n\n图片1.png (128.48 KB, 下载次数: 0)\n\n下载附件\n\n2015-11-26 17:50 上传\n\n\n\n\n\n\n\n\n\n图片2.png (126.55 KB, 下载次数: 0)\n\n下载附件\n\n2015-11-26 17:50 上传\n\n\n\n\n\n\n\n\n\n图片3.png (124.68 KB, 下载次数: 0)\n\n下载附件\n\n2015-11-26 17:51 上传\n\n\n\n\n\n背景即为源码\ncmd为游戏界面\n没有什么美术优化\n代码总长347行\n5546Bytes\n编译过的游戏文件为30.2KB，30985Bytes\n打包压缩后文件为7.83KB，8020Bytes\n不要抱怨什么字符界面\n懒得改VB了\n操作须知：\n\ns为保存，会在文件目录下建立一个2048.saves用于保存游戏，明文保存（不建议作弊）\nl为读取\nr为重置\np为打印（操作后无显示的时候使用）\ne为退出\n2为下\n8为上\n4为左\n6为右\n（遵循电脑键盘布局）\n每次的输入需要加回车以供程序读取输入，可以一次输入多次操作。\n\nBUG：\n\n没有检查无数合并并且无数移动的情况，因此2或4会照常放置，不像原版的可以识别这种情况，自觉就好。如果没有存档就选择读取会导致游戏崩溃\n\n贴源码：\n\n#include<stdio.h>\n#include<stdlib.h>\n#include<time.h>\nusing namespace std;\nint a[4][4]={{0},{0},{0},{0}};\nint i=0;\nint j=0,l=0,x=0,z=0,t1=0,t2=0;\nchar c;\nint print()\n{\n        for(i=0;i<4;i++)\n        {\n                for(j=0;j<4;j++)\n                printf(\"%6d \",a[i][j]);\n                printf(\"\\n\");\n        }\n        printf(\"*******************************************************************************\\n\");\n        return 0;\n}\nint save()\n{\n        FILE *saves=fopen(\"2048.saves\",\"w\");\n        for(i=0;i<4;i++)\n        {\n                for(j=0;j<4;j++)\n                fprintf(saves,\"%d \",a[i][j]);\n                fprintf(saves,\"\\n\");\n        }\n        fclose(saves);\n        printf(\"game has been saved\\n\");\n        print();\n        return 0;\n}\nint load()\n{\n        FILE *saves=fopen(\"2048.saves\",\"r\");\n        for(i=0;i<4;i++)\n        {\n                for(j=0;j<4;j++)\n                fscanf(saves,\"%d\",&a[i][j]);\n        }\n        fclose(saves);\n        printf(\"game has been load\\n\");\n        print();\n        return 0;\n}\nint set2()\n{\n        if(rand()%10<=8)\n                return 2;\n        else return 4;\n}\nint select()\n{\n        while(z==0)\n        {\n                t1=rand()%4;\n                t2=rand()%4;\n                if(a[t1][t2]==0)\n                z=1;\n        }\n        z=0;\n        a[t1][t2]=set2();\n        t1=0;\n        t2=0;\n        return 0;\n}\nint reset()\n{\n        for(i=0;i<4;i++)\n        {\n                for(j=0;j<4;j++)\n                a[i][j]=0;\n        }\n        printf(\"game reset sucessful\\n\");\n        select();\n        print();\n        return 0;\n}\nint main()\n{\n        printf(\"Welcome to 2048\\nPowered by kj415j45\\n\");\n        srand(time(NULL));\n        reset();\n        scanf(\"%c\",&c);\n        while(l=1)\n        {\n                switch(c)\n                {\n                        case 10:\n                                break;\n                        case 'e':\n                                return 0;\n                        case 'l':\n                                load();\n                                break;\n                        case 'r':\n                                reset();\n                                break;\n                        case 's':\n                                save();\n                                break;\n                        case 'p':\n                                print();\n                                break;\n                        case '8':\n                                for(j=3;j>-1;j--)\n                                {\n                                        while(x<8)\n                                        {\n                                                if(a[2][j]==0&&a[3][j]!=0)\n                                                {\n                                                        a[2][j]=a[3][j];\n                                                        a[3][j]=0;\n                                                }\n                                                if(a[1][j]==0&&a[2][j]!=0)\n                                                {\n                                                        a[1][j]=a[2][j];\n                                                        a[2][j]=0;\n                                                }\n                                                if(a[0][j]==0&&a[1][j]!=0)\n                                                {\n                                                        a[0][j]=a[1][j];\n                                                        a[1][j]=0;\n                                                }\n                                                x++;\n                                        }\n                                        x=0;\n                                        \n                                        if(a[0][j]==a[1][j])\n                                        {\n                                                a[1][j]=0;\n                                                a[0][j]=a[0][j]*2;\n                                        }\n                                        if(a[1][j]==a[2][j])\n                                        {\n                                                a[2][j]=0;\n                                                a[1][j]=a[1][j]*2;\n                                        }\n                                        if(a[2][j]==a[3][j])\n                                        {\n                                                a[3][j]=0;\n                                                a[2][j]=a[2][j]*2;\n                                        }\n                                        \n                                        if(a[2][j]==0&&a[3][j]!=0)\n                                        {\n                                                a[2][j]=a[3][j];\n                                                a[3][j]=0;\n                                        }\n                                        if(a[1][j]==0&&a[2][j]!=0)\n                                        {\n                                                a[1][j]=a[2][j];\n                                                a[2][j]=0;\n                                        }\n                                        if(a[0][j]==0&&a[1][j]!=0)\n                                        {\n                                                a[0][j]=a[1][j];\n                                                a[1][j]=0;\n                                        }\n                                }\n                                select();\n                                print();\n                                break;\n                        case '2':\n                                for(j=0;j<4;j++)\n                                {\n                                        \n                                        while(x<8)\n                                        {\n                                                if(a[1][j]==0&&a[0][j]!=0)\n                                                {\n                                                        a[1][j]=a[0][j];\n                                                        a[0][j]=0;\n                                                }\n                                                if(a[2][j]==0&&a[1][j]!=0)\n                                                {\n                                                        a[2][j]=a[1][j];\n                                                        a[1][j]=0;\n                                                }\n                                                if(a[3][j]==0&&a[2][j]!=0)\n                                                {\n                                                        a[3][j]=a[2][j];\n                                                        a[2][j]=0;\n                                                }\n                                                x++;\n                                        }\n                                        x=0;\n                                        \n                                        if(a[3][j]==a[2][j])\n                                        {\n                                                a[2][j]=0;\n                                                a[3][j]=a[3][j]*2;\n                                        }\n                                        if(a[2][j]==a[1][j])\n                                        {\n                                                a[1][j]=0;\n                                                a[2][j]=a[2][j]*2;\n                                        }\n                                        if(a[1][j]==a[0][j])\n                                        {\n                                                a[0][j]=0;\n                                                a[1][j]=a[1][j]*2;\n                                        }\n                                        \n                                        if(a[1][j]==0&&a[0][j]!=0)\n                                        {\n                                                a[1][j]=a[0][j];\n                                                a[0][j]=0;\n                                        }\n                                        if(a[2][j]==0&&a[1][j]!=0)\n                                        {\n                                                a[2][j]=a[1][j];\n                                                a[1][j]=0;\n                                        }\n                                        if(a[3][j]==0&&a[2][j]!=0)\n                                        {\n                                                a[3][j]=a[2][j];\n                                                a[2][j]=0;\n                                        }\n                                }\n                                select();\n                                print();\n                                break;\n                        case '4':\n                                for(i=0;i<4;i++)\n                                {\n                                        while(x<8)\n                                        {\n                                                if(a[i][2]==0&&a[i][3]!=0)\n                                                {\n                                                        a[i][2]=a[i][3];\n                                                        a[i][3]=0;\n                                                }\n                                                if(a[i][1]==0&&a[i][2]!=0)\n                                                {\n                                                        a[i][1]=a[i][2];\n                                                        a[i][2]=0;\n                                                }\n                                                if(a[i][0]==0&&a[i][1]!=0)\n                                                {\n                                                        a[i][0]=a[i][1];\n                                                        a[i][1]=0;\n                                                }\n                                                x++;\n                                        }\n                                        x=0;\n                                        \n                                        if(a[i][2]==a[i][3])\n                                        {\n                                                a[i][2]=a[i][2]*2;\n                                                a[i][3]=0;\n                                        }\n                                        if(a[i][1]==a[i][2])\n                                        {\n                                                a[i][1]=a[i][1]*2;\n                                                a[i][2]=0;\n                                        }\n                                        if(a[i][0]==a[i][1])\n                                        {\n                                                a[i][0]=a[i][0]*2;\n                                                a[i][1]=0;\n                                        }\n                                        \n                                        if(a[i][2]==0&&a[i][3]!=0)\n                                        {\n                                                a[i][2]=a[i][3];\n                                                a[i][3]=0;\n                                        }\n                                        if(a[i][1]==0&&a[i][2]!=0)\n                                        {\n                                                a[i][1]=a[i][2];\n                                                a[i][2]=0;\n                                        }\n                                        if(a[i][0]==0&&a[i][1]!=0)\n                                        {\n                                                a[i][0]=a[i][1];\n                                                a[i][1]=0;\n                                        }\n                                }\n                                select();\n                                print();\n                                break;\n                        case '6':\n                                for(i=3;i>-1;i--)\n                                {\n                                        while(x<8)\n                                        {\n                                                if(a[i][1]==0&&a[i][0]!=0)\n                                                {\n                                                        a[i][1]=a[i][0];\n                                                        a[i][0]=0;\n                                                }\n                                                if(a[i][2]==0&&a[i][1]!=0)\n                                                {\n                                                        a[i][2]=a[i][1];\n                                                        a[i][1]=0;\n                                                }\n                                                if(a[i][3]==0&&a[i][2]!=0)\n                                                {\n                                                        a[i][3]=a[i][2];\n                                                        a[i][2]=0;\n                                                }\n                                                x++;\n                                        }\n                                        x=0;\n                                        \n                                        if(a[i][3]==a[i][2])\n                                        {\n                                                a[i][3]=a[i][3]*2;\n                                                a[i][2]=0;\n                                        }\n                                        if(a[i][2]==a[i][1])\n                                        {\n                                                a[i][2]=a[i][2]*2;\n                                                a[i][1]=0;\n                                        }\n                                        if(a[i][1]==a[i][0])\n                                        {\n                                                a[i][1]=a[i][1]*2;\n                                                a[i][0]=0;\n                                        }\n                                        \n                                        if(a[i][1]==0&&a[i][0]!=0)\n                                        {\n                                                a[i][1]=a[i][0];\n                                                a[i][0]=0;\n                                        }\n                                        if(a[i][2]==0&&a[i][1]!=0)\n                                        {\n                                                a[i][2]=a[i][1];\n                                                a[i][1]=0;\n                                        }\n                                        if(a[i][3]==0&&a[i][2]!=0)\n                                        {\n                                                a[i][3]=a[i][2];\n                                                a[i][2]=0;\n                                        }\n                                }\n                                select();\n                                print();\n                                break;\n                }\n                scanf(\"%c\",&c);\n        }\n        return 0;\n}复制代码\n贴下载地址：\n\nhttp://pan.baidu.com/s/1bnr3LDX\n防爆链接：\n\n\n\n2048 project.rar\n(7.83 KB, 下载次数: 5)\n\n\n\n2015-11-26 18:08 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "矿工zhanghua",
            "timestamp": 1448532780,
            "txt_content": "我倒是希望LZ能换一个界面……CMD看着太不顺眼了……"
        },
        {
            "author": "kj415j45",
            "timestamp": 1448532900,
            "txt_content": "暗夜君 发表于 2015-11-26 18:16\ncmd太那个了吧，好难看\n懒得改写成VB语言了"
        },
        {
            "author": "暗夜君",
            "timestamp": 1448532960,
            "txt_content": "cmd太那个了吧，好难看"
        },
        {
            "author": "侑阳",
            "timestamp": 1448533740,
            "txt_content": "厉害厉害，看不懂啊"
        }
    ]
}