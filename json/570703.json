{
    "title": "[上古之石]PlaceholderAPI开发教程",
    "author": "ZG_Jackie",
    "replyCount": 5,
    "timestamp": 1459078500,
    "txt_content": " 本帖最后由 ZG_Jackie 于 2016-5-17 16:44 编辑 \nZG_Jackie的PlaceholderAPI教程\n首先，你需要：\n1.会Java插件编程\n2.一个PlaceholderAPI\n3.一张能忍住不问我是不是TAS的嘴\nOK,让我们开始吧\n\nPlaceholderAPI是干嘛的?PlaceholderAPI的主要功能是让某插件注册一些变量到PlaceholderAPI,可以让其他插件读取。\n\n配置教程\n  首先，你需要新建个插件。↓\n\n\n\n\nstep001.png (29.46 KB, 下载次数: 7)\n\n下载附件\n\n2016-3-29 16:41 上传\n\n\n\n\n\n[fly]注意！包名必须为me.clip.xxxxxx,否则PlaceholderAPI不会读取！[/fly] \n如果你必须要用PlaceholderAPI这个插件，在plugin.yml写上:\ndepend: [PlaceholderAPI]复制代码如果非必须，写上:\nsoftdepend: [PlaceholderAPI]复制代码\n我想这都是废话吧？哦这些就不是废话了(也就是配置plugin.yml):\n嗯让我们看看plugin.yml\n\n\n\n\n\npluginyml.png (6.09 KB, 下载次数: 7)\n\n下载附件\n\n2016-4-10 16:42 上传\n\n\n\n\n\n\n这些都很重要。下面我将一个一个地讲:\nboolean:    代表在phapi里true和false代表什么字符串\ndate_formate:    需要懂dateformat才能修改。代表时间的格式(也就是说phapi用这个格式代表时间)\nplaceholder_hooks:    代表要和哪些插件建立钩子(看下面就会知道)\n\n\n使用Phapi操作钩子(不符合PlaceholderAPI是干嘛的233)\n\n使用phapi操作钩子 \n    什么是钩子？ \n    钩子嘛，顾名思义就是把两个东西接一起，而这里的钩子是将phapi与其他插件连一块。这样你就可以方便的操作其他插件（phapi自带这些插件）\n 1、使用PlaceholderAPI(以后简称phapi)操作Economy\n对，这是我的第一个教程。\n首先，把Economy的钩子引入进来\nimport me.clip.placeholderapi.hooks.VaultEcoHook; //导入economy钩子 \nimport me.clip.placeholderapi.internal.InternalHook; //导入基础钩子（所有钩子继承该类）复制代码\n之后，获取VaultEco的API \nInternalHook h=InternalHook.VAULTECO; //设置钩子属性,也就是说把基础钩指向VaultEcoHook。\nVaultEcoHook veh = new VaultEcoHook(h); //创建VaultEco钩子复制代码VAULTECO即为VaultEcoHook的“专属”Hook(也就是说唯一一个能指向它的常量)\n\n于是就是这样:\n\n\n\n\n\nstep3.png (16.98 KB, 下载次数: 7)\n\n下载附件\n\n2016-3-29 18:34 上传\n\n\n\n\n\n\n好了，你可以用veh操控economy了。 \nVaultEco方法表:\n ------------------------------------------------------------------------------------------------------------------- \n    VaultEcoHook(InternalHook hook)                        构造     用来创建对象\n    hook()                                                           公共     用来注册\n    getBalance(OfflinePlayer p)                                公共     获取某玩家的金钱\n    onPlaceholderRequest(Player p, String identifier)     公共     可调用VaultEcoHook的私有函数\n -------------------------------------------------------------------------------------------------------------------\n\n\n\n\nstep2.png (191.79 KB, 下载次数: 9)\n\n下载附件\n\n2016-3-29 18:19 上传\n\n\n\n\n\n下面主要讲一下onPlaceholderRequest的用法(因为它最重要)：\n Player p:要操作的玩家。\n String identifier:操作参数，有\"balance\"、\"balance_fixed\"、\"balance_formatted\"，分别说一下：\n        1.balance其实和getBalance差不多，只是返回值是String而已。\n        2.balance_fixed是在balance的基础上(也就是修复版)。\n        3.balance_formatted是“格式化”版，也就是传入数字后它会做一些处理，如我传入100.0,返回的就是“100”。\n比如，我写上\nString str = onPlaceholderRequest(somePlayer,\"balance\");复制代码假如这个somePlayer有30元他就会返回\"30\"。\n哦差点说了这个方法的返回值是String。\n\n2、使用phapi操作Essentials对,这是我第二个教程\nEss的钩子是这样的:\nme.clip.placeholderapi.hooks.EssentialsHook复制代码\n当然还有个InternalHook:\nInternalHook ih = InternalHook.ESSENTIALS;复制代码这下就好了。\n嗯...方法还是主要讲一下onPlaceholderRequest,它的identifier有以下参数:\n    1.kit_last_use_xxx  即玩家xxx工具包最后使用的时间,返回一个Date(但是String类型的)。\n    2.kit_is_available_xxx  即查看玩家的xxx工具包是否可用(存在,可能我的理解是错的),这个返回值很特殊...需要联系到plugin.yml(的boolean部分),详见准备部分。\n    3.kit_time_until_available_xxx  玩家上次使用工具包时间\n    4.has_kit_xxx  即玩家是否有获得该工具包的权限(因该是获得,但权限是:essentials.kits.xxx)\n    (看来phapi挺注重工具包)\n例子时间:\n嗯，举个栗子要求:创建个方法,能获取玩家是否有该工具包(参数:String playername,String kitname)(哎为什么不是Player p)代码:public boolean hasKit(String playername,String kitname){    EssentialsHook ess = new EssentialsHook(InternalHook.ESSENTIALS);    String s = ess.onPlaceholderRequest(getServer().getPlayer(playername),\"kit_is_available_\" + kitname);    return s == \"yes\" ? true : false;}有个bug,就是如果plugin.yml的boolean不是yesno,即使有也会返回false。\n\n\n\n\n准备更新PvPStatsHook。\n\n谢谢支持！\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "107874017",
            "timestamp": 1459172040,
            "txt_content": "真是太简单了...\n没看懂"
        },
        {
            "author": "ZG_Jackie",
            "timestamp": 1459240440,
            "txt_content": "107874017 发表于 2016-3-28 21:34\n真是太简单了...\n没看懂\n好吧我尽量改进"
        },
        {
            "author": "Bryan33",
            "timestamp": 1460250720,
            "txt_content": "直接使用Vault不就好了"
        },
        {
            "author": "ZG_Jackie",
            "timestamp": 1460276820,
            "txt_content": "a390807154 发表于 2016-4-10 09:12\n直接使用Vault不就好了\n但我会发布ess的教程还有skywars什么的"
        },
        {
            "author": "q88724653",
            "timestamp": 1491100440,
            "txt_content": "那如何在placeholderAPI注册自己的变量"
        }
    ]
}