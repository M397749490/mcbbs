{
    "title": "【最靠谱】的零基础Bukkit插件开发教程",
    "author": "lovemeforever",
    "replyCount": 18,
    "timestamp": 1482031680,
    "txt_content": " 本帖最后由 lovemeforever 于 2016-12-21 00:46 编辑 \n\n有同学反映网上找不到靠谱Minecraft插件java开发教程。所以我决定自己写一个，从零开始，会用图文的方式详细记录每一个步骤。\n但是，我不会详细介绍java的语法，只会在遇到的时候提一下，但对你进行基本的开发绝对足够了。\n目前的计划是每周更新一篇，大致分成这么几个部分。\n\n    如何编译spigot 服务器，如何安装启动    介绍Bukkit API 。    安装IDE，开发第一个Hello world 插件    如何安装你的插件，如何调试插件    Bukiit事件体系，如何开发事件监听程序。    如何开发插件命令    如何开发插件权限    如何定义配置文件    保存和提取你的数据，使用YAML文件    Bukkit 调度程序\n\n相信完成这些课程你就完全能够独立开发插件了\n\n第一章 部署Spigot服务器\n\n什么是Spigot服务器\n\n先解释几个名词：\nVanilla Bukkit CraftBukkit Spigot\n\nVanilla是Mojang（微软）官方开发的Minecraft服务器。可以直接从 minecraft.net下载，不过Vanilla不支持任何插件和Mod。\n\nBukkit 是一套用来开发插件的API（应用接口）。并不特指某种服务器，基于Bukkit API 开发的插件理论上都是可以通用的。\n\nBukkit API 最初是由 CraftBukkit 团队开发的。CraftBukkit 是一种可以替换Vanilla服务器的 Minecraft 服务器。在游戏的功能上两者完全相同，而且 CraftBukkit 支持Bukkit 插件。除了基本的游戏功能之外，CraftBukkit 还提供了额外的功能来完成某些任务，如保存和载入数据，帮助插件开发人员侦听服务器事件和调度所需要执行的代码。但是CraftBukkit被Mojang收购后已经停止更新了。所以我们使用Spigot服务器。\n\nSpigot服务器完全替代了CraftBukkit服务器。Spigot是在CraftBukkit代码的基础上创建的。Spigot最初立项的目的就是打造一个更快的CraftBukkit。CraftBukkit挂掉之后，Spigo团队继续维护Bukkit API 和 Spigot。之前为CraftBukkit开发的插件都可以运行在Spigot上，所以本教程也会基于Spigot。\n\n安装Spigot服务器\n\n出于法律原因，Spigot团队是不允许你直接下载可运行的程序（也就是spigot.jar）。然而，他们提供了一个工具可以自己编译jar包。 下面我们使用这个工具来自己编译一个spigot.jar。如果你遇到了任何问题，可以直接向Spigot团队反馈。\n首先你需要拿到最新版的BuildTools.jar 。然后新建一个目录比如build，把下载的BuildTools.jar放入这个新目录里。\n\n然后需要安装git，最后进入控制台，执行：\n<java bin path>\\java.exe -jar BuildTools.jar复制代码<java bin path>是你java所在的目录。\n\n但是，这个过程很可能失败。也许是因为你没有安装git，也许是因为有些资源需要翻墙。不用担心，我会编译好各个版本，供你下载。\n\n我运行了大约半个小时，编译好了，spigot-1.11.jar。不过这个上传不了，我放百度网盘了。\n\n然后新建一个目录例如：server ，把编译好的spigot-1.11.jar放进去。 在同一目录下新建一个文件：start.bat。这是一个批处理文件，通过这个文件，我们可以双击来启动服务。\n\n找个文本编辑器，打开新建的start.bat，输入下面两行：\n苟利国家生死以，岂因祸福避趋之\n复制代码哦，不是，是下面两行：\n\njava -Xms1024M -Xmx1024M -jar spigot-1.11.jar\nPAUS复制代码其中的1024M是告诉计算机分配多大的内存给这个服务。你可以根据需要改动这个值的大小。其中的spigot-1.11.jar 就是 Spigot服务器的jar包。\n\n保存这个文件，并且确保 start.bat 和 spigot-1.11.jar在同一目录下。然后双击start.bat文件，就会弹出一个新的命令窗口，并且开始创建服务器的相关文件。命令窗口大致会出现下面的提示：\n\n\n\n\n\n屏幕快照 2016-12-18 下午11.41.43.png (19.44 KB, 下载次数: 2)\n\n下载附件\n\n2016-12-19 00:05 上传\n\n\n\n\n\n\n然后目录下会新增几个文件：\n\n\n\n\n\n屏幕快照 2016-12-18 下午11.43.41.png (16.33 KB, 下载次数: 2)\n\n下载附件\n\n2016-12-18 23:53 上传\n\n\n\n\n\n\n如果你没有看到上面命令窗口的这些提示，也没有看到新增加的文件，应该就是你的start.bat文件哪里有错误。请在核对一下。\n\n如果这些都没有问题，那么接下来，你需要修改新生成的eula.txt文件，把原来的\n\neula=false复制代码改成\neula=true\n复制代码\n这表明你同意了Mojang的最终用户协议。\n\n修改之后，再次启动服务器，你将会看到服务器的加载信息以及新世界的创建。\n\n配置你的服务器\n\n这次再看你的服务器目录，下面又会多出很多的文件和目录，未来我们讲到具体部分的时候，会详细讲解。现在先大致的过一下，以便有个初步的印象：\n\nplugins 目录：这里就是放插件的地方。world 目录：这样的目录有好几个，都是用world开头的，例如world，world_nether，world_the_end。这里就是存放游戏地图的目录。在游戏运行的时候，最好不要修改里面的文件，有可能会带来严重的错误。server.properties ：这是服务器的配置文件。你可以根据自己的需要修改，然后重启就可以生效。简要的说一下其中的几个配置：       \npvp=true：玩家之间是否可以对战。difficulty=1：游戏难度，0是平和模式，1是容易，2是正常，3是困难。gamemode=0：游戏模式，0生存，1创造，2冒险。motd=A Minecraft Server：motd是每日消息（Message Of The Day）的英文缩写，就是玩家在服务器列表上看到的消息。\n\n\n\n\n屏幕快照 2016-12-21 上午12.54.40.png (30.74 KB, 下载次数: 4)\n\n下载附件\n\n2016-12-21 00:45 上传\n\n\n\n\nonline-mode=true：是否开启正版验证。\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "OAO_miao",
            "timestamp": 1482055080,
            "txt_content": "提两个建议\n一般插件开发使用bukkit或者spigot-api作为依赖就可以，只有需要使用nms时才有必要直接用craftbukkit或者spigot服务器端作为依赖。\n另一个是，推荐用maven或者gradle，可以很方便的获得bukkit api/spigot api快照，并且是有文档注释的。https://www.spigotmc.org/wiki/spigot-maven/"
        },
        {
            "author": "lovemeforever",
            "timestamp": 1482077460,
            "txt_content": "OAO_miao 发表于 2016-12-18 17:58\n提两个建议\n一般插件开发使用bukkit或者spigot-api作为依赖就可以，只有需要使用nms时才有必要直接用craftb ...\n感谢大佬的提示。\n\n准确说来，我这应该是零基础课程。我改一下名字。\n\n谢谢大佬。"
        },
        {
            "author": "qq1428841280",
            "timestamp": 1482332220,
            "txt_content": "把git和buildtools 的下载给一下吧  我在看呢"
        },
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1482365640,
            "txt_content": "首先肯定楼主的贡献\n别写了，没用的。你的前三步完全是废的，如果本身连ide都没，那谈什么经验，没有经验，开发什么插件。\n不知道楼主注意到没有编程讨论越来越多的“怎么获得玩家的名字”、“怎么判断玩家是否在线”这类问题。\n虽然说练习是最快的进步方式，但是真的没必要这样，前几天我反编译了几个论坛的原创，毫不客气的说写的没法看，可读性可维护性基本为0，毫无面向对象的思想，完全就是拿着java的代码写C，所有的运算都挤在主线程、再不就是毫无意义的一眼就看出就是一个监听器。楼主帖子写的很认真，但是开发每一个软件需要的知识是多种的，难道把api背过了就是世界第一么？（是的！这记忆力没谁了\n软件最重要的永远是算法，而不是代码。\n仅仅是一个建议.\n"
        },
        {
            "author": "RecursiveG",
            "timestamp": 1482368400,
            "txt_content": " 本帖最后由 RecursiveG 于 2016-12-22 09:03 编辑 \n\n目前内容过于基础，\n建议全部写完再发，\n有疑问请私信联系。"
        },
        {
            "author": "lovemeforever",
            "timestamp": 1482370440,
            "txt_content": "RecursiveG 发表于 2016-12-22 09:00\n目前内容过于基础，\n建议全部写完再发，\n有疑问请私信联系。\n全部写完再发我是赞同的。\n\n但是说过于基础，这个不赞同。\n本版真的没有多少踏踏实实的把细节全部讲清楚的教程。\n而对于新人来说，任何一个新概念可能就是一座难以逾越的高山。\n写代码的人都普遍自视甚高，有谁愿意沉下心来，讲清楚细节呢？\n我愿意做个尝试。\n\n版主又把帖子打开了，感谢。我全部写完之后，会再来更新。"
        },
        {
            "author": "qq1428841280",
            "timestamp": 1482374280,
            "txt_content": "lovemeforever 发表于 2016-12-22 09:34\n全部写完再发我是赞同的。\n\n但是说过于基础，这个不赞同。\n你计划的每周一更可以发我名字的qq邮箱吗  我想看..."
        },
        {
            "author": "TimmyOVO",
            "timestamp": 1482381540,
            "txt_content": " 本帖最后由 星燚 于 2016-12-22 12:58 编辑 \n\n补全一下\n官方提供的BuildTools通过maven3克隆spigotmc官网上面的源码，并通过下载官方服务端用fernflower配合官方的反混淆配置文件，将官方jar反编译的结果进行反混淆,再克隆本地，克隆好的Bukkit源码,CraftBukkit源码到本地spigot项目，最后以此接受个个项目的补丁(patch文件)，进行编译.\n万恶的DMCA\n顺便一提\n下面这个网址能直接下到编译好的jar\nhttps://mcadmin.net/\n 资料:\n反混淆NMS的MAPPING数据:\nhttps://hub.spigotmc.org/stash/p ... ata/browse/mappings\nSPIGOT源码/Bukkit源码/CraftBukkit源码/为反混淆NMS特制的Fernflower源码\nhttps://hub.spigotmc.org/stash/projects/SPIGOT\nPaperSpigot源码\nhttps://hub.spigotmc.org/stash/u ... /paperspigot/browse"
        },
        {
            "author": "sedjamm",
            "timestamp": 1482409920,
            "txt_content": "正在学着做插件，无奈找不到资料。这篇看上去不错"
        },
        {
            "author": "a254969696",
            "timestamp": 1482459240,
            "txt_content": "OAO_miao 发表于 2016-12-18 17:58\n提两个建议\n一般插件开发使用bukkit或者spigot-api作为依赖就可以，只有需要使用nms时才有必要直接用craftb ...\n使用gradle在build的时候提示Could not find net.md-5:bungeecord-chat:1.10-SNAPSHOT.问一下怎么解决？"
        },
        {
            "author": "a254969696",
            "timestamp": 1482460860,
            "txt_content": "a254969696 发表于 2016-12-23 10:14\n使用gradle在build的时候提示Could not find net.md-5:bungeecord-chat:1.10-SNAPSHOT.问一下怎么解决？ ...\n问题已经解决了，我在repositories里填了句mavenLocal()结果居然Build Successful了，然后我在BuildTools的log里找到了一个含有net.md-5:bungeecord-chat:1.10-SNAPSHOT的仓库。\nmaven仓库里面填一句url 'https://oss.sonatype.org/content/repositories/snapshots/'"
        },
        {
            "author": "Gravestone",
            "timestamp": 1483163880,
            "txt_content": "噫，一周一篇哪去了"
        },
        {
            "author": "ktwap",
            "timestamp": 1483204860,
            "txt_content": " 把一切准备工作做完了，服务端也安装楼主方法安装了，最后发现楼主不更了......"
        },
        {
            "author": "月中行",
            "timestamp": 1484100600,
            "txt_content": "sedjamm 发表于 2016-12-22 20:32\n正在学着做插件，无奈找不到资料。这篇看上去不错\n+1我也是,这篇感觉比论坛上的都好,比较详细.更好理解点"
        },
        {
            "author": "月中行",
            "timestamp": 1484100720,
            "txt_content": "逗比的芒果 发表于 2017-1-11 10:10\n+1我也是,这篇感觉比论坛上的都好,比较详细.更好理解点\n不对,最近看了太多开发教程,有点混了,这篇是我在刚开始看bukkit开发手册的时候迷惑的时候看到的,当时就给我解决了疑惑,23333"
        },
        {
            "author": "TrinSnow",
            "timestamp": 1484908020,
            "txt_content": "很靠谱，不过更新有点慢啊"
        },
        {
            "author": "gooding300",
            "timestamp": 1487432040,
            "txt_content": "支持一下LZ\n催更新~\n以及非常建议LZ好好讲一下gradle、maven等自动构建工具~"
        },
        {
            "author": "kevin2018",
            "timestamp": 1535131680,
            "txt_content": "弃坑咯～我是挖坟了吗？"
        }
    ]
}