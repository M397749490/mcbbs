{
    "title": "[原创][Denizen]chat1——实用的聊天[1.12]",
    "author": "1736838308",
    "replyCount": 0,
    "timestamp": 1596539160,
    "txt_content": " 本帖最后由 1736838308 于 2020-8-4 19:18 编辑 \n\n话不多说，先上源代码。\n\n\n\n\ng_chat1.yml\n(393 Bytes, 下载次数: 3)\n\n\n\n2020-8-4 18:30 上传\n点击文件名下载附件\n\n\n\n\n\n\nchat1:\n  type: world\n  debug: false\n  events:\n    on player chats:\n      - determine passively cancelled\n      - announce \"<element[§f§l『<tern[<player.is_op>].pass[§c].fail[§b]><player.name>].on_hover[§e世界: 朋友的服<n>§e等级: <player.xp_level>级<n>§e延迟: <player.ping>ms<n>§e金钱: 未开放<n><n>§c签名: <player.flag[qm]||无>].type[SHOW_TEXT]>§f§l』§f: <context.message>\"复制代码\n\n\n\n\n图片.png (14.27 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-4 18:31 上传\n\n\n\n\n\n七行，仅仅七行，就实现了这样的功能，非常好。\n\n\n!!!接下来的内容，没有看过站内搬运贴教程就不用看了，先看那个!!!\n\n\n\n接下来，我会为你逐字逐句地解析这个看似复杂实则简单的例子，各个部分在脚本中起到的作用。\n\non player chats:\n当玩家聊天时触发下面的脚本\n- determine passively cancelled\n取消玩家发送消息这个行为，也就是不让消息发出去\n- announce \"<element[§f§l『<tern[<player.is_op>].pass[§c].fail[§b]><player.name>].on_hover[§e世界: 朋友的服<n>§e等级: <player.xp_level>级<n>§e延迟: <player.ping>ms<n>§e金钱: 未开放<n><n>§c签名: <player.flag[qm]||无>].type[SHOW_TEXT]>§f§l』§f: <context.message>\"\n发送新的聊天消息，能做到帖子开头的效果的核心\n\n这么长，是不是看了就头大？没关系，让我来慢慢梳理。\n我们先把它拆分成三段\n“<element[§f§l『<tern[<player.is_op>].pass[§c].fail[§b]><player.name>]\n\n\n<element[                 ]> 的作用，就是将里面的文本包括起来，让后面的on_hover作用在一整个文本上。相当于数学里的 ( 1 + 7 ) x 3 ，如果不加这个括号，就变成了 1 + 7 x 3 ，这能一样吗？回到脚本里，如果不加这个括号，也许就会出现前面的几个文本不显示悬浮文本，而后面的文字显示的情况。\n\n<tern[     第一处     ].pass[    第二处   ].fail[       第三处        ]>的作用是判断玩家是否为op，如果是，就显示红色名字，反之，则显示蓝色名字。\n\n\n\n\n图片.png (7.45 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-4 18:58 上传\n\n\n\n\n\n当这个tag被填充时，它会判断第一处的是true还是false，<player.is_op>。\n当第一处为true时（你是op时），输出    第二处   \n当第一处为false时（你不是op时），输出       第三处        \n也就是说，当它完全被填充后，这么长的一个<tern[.......].pass[......].fail[.....]>就会变成    第二处   或是       第三处       \n你完全不用发费更多的力气写if判断玩家是不是op，\n- if <player.is_op> :\n    - announce \".....\"\n- else :\n    - announce \".......\"\n\n<player.name>输出聊天的玩家的id.on_hover[§e世界: 朋友的服<n>§e等级: <player.xp_level>级<n>§e延迟: <player.ping>ms<n>§e金钱: 未开放<n><n>§c签名: <player.flag[qm]||无>].type[SHOW_TEXT]>\n\n这么长一串的tag，它的主干就是  .on_hover[.........].type[SHOW_TEXT]\n它的作用就是当鼠标移动到一些文本上时，显示..........\ntype[SHOW_TEXT]就是显示的类型（有展示物品什么的，具体去帮助手册查）\n<n>是换行\n§f§l』§f: <context.message>\"\n\n<context.message>的作用就是输出聊天玩家的聊天内容\n\n\n",
    "replies": []
}