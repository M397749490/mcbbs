{
    "title": "求大佬帮忙看看哪里有问题",
    "author": "寒雨_Moro",
    "replyCount": 2,
    "timestamp": 1587087780,
    "txt_content": " 本帖最后由 寒雨_Moro 于 2020-4-17 09:49 编辑 \n\n[code] package cc.Moro.BridgeTestPlugin;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.entity.Player;\nimport org.bukkit.plugin.java.JavaPlugin;\nimport org.bukkit.event.Listener;\nimport java.io.File;\n\n\npublic final class BridgeTestPlugin extends JavaPlugin implements Listener {\n\n\n    @Override\n    public void onLoad() {\n        getLogger().info(\"onLoad has been invoked!\");\n    }\n\n    @Override\n    public void onEnable() {\n        if(!getDataFolder().exists()) {\n            getDataFolder().mkdir();\n        }\n        File file=new File(getDataFolder(),\"config.yml\");\n        if (!(file.exists())) {saveDefaultConfig();}\n        reloadConfig();\n        getLogger().info(\"BridgeTestPlugin 已启用！\");\n        Bukkit.getPluginManager().registerEvents(this, this);\n        Bukkit.getPluginCommand(\"BridgeTestCommand\").setExecutor(this);\n        FileConfiguration config = getConfig();\n        getLogger().info(\"name: \" + config.getString(\"name\"));\n        getLogger().info(\"displayName: \" + config.getString(\"displayName\"));\n        getLogger().info(\"age: \" + config.getInt(\"age\"));\n        getLogger().info(\"health: \" + config.getDouble(\"health\"));\n        getLogger().info(\"Introduction: \" + config.getString(\"Introduction\"));\n        getLogger().info(\"开始写入数据...\");\n        config.set(\"qq\", 1335014319);\n        config.set(\"email\", \"1335014319@qq.com\");\n        saveConfig();\n    }\n\n    @Override\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n        FileConfiguration config = getConfig();\n        if (command.getName().equalsIgnoreCase(\"BridgeTestCommand\")) {\n            if (!(sender instanceof Player)) { \n                sender.sendMessage(\"§7§l[§f§lBridgeTestPlugin§7§l] §c你必须是一名玩家!\");\n                sender.sendMessage(\"§7§l[§f§lBridgeTestPlugin§7§l] §7插件作者: \" + config.getString(\"name\"));\n                return true; \n            }\n            Player player = (Player) sender;\n            player.sendMessage(\"§7§l[§f§lBridgeTestPlugin§7§l] §7你成功的执行了指令/BridgeTestCommand\");\n            player.sendMessage(\"§7§l[§f§lBridgeTestPlugin§7§l] §7插件作者: §3\" + config.getString(\"name\"));\n        }\n        if (command.getName().equalsIgnoreCase(\"inform\")) {\n            if (!(sender instanceof Player)) {\n                sender.sendMessage(\"§7§l[§f§lBridgeTestPlugin§7§l] §c你怎么可以在后台举报呢？ban就完事了啊！\");\n                return true;\n            }\n            Player player = (Player) sender;\n            Player p = (Player) getServer().getOnlinePlayers();\n            if (args.length != 1) {\n                player.sendMessage(\"§7§l[§f§lBridgeTestPlugin§7§l] §c指令用法/inform 内容\");\n                return true;\n            }\n            else{\n                String str = args[0];\n                getLogger().info(\"§7§l[§f§lBridgeTestPlugin§7§l] §c来自§f \" + player.getName() + \" §c的举报:§r \" + str.replaceAll(\"&\", \"§\"));\n                sender.sendMessage(\"§7§l[§f§lBridgeTestPlugin§7§l] §7举报已经发送\");\n                if (p.isOp()){\n                    p.sendMessage(\"§7§l[§f§lBridgeTestPlugin§7§l] §c来自§f \" + player.getName() + \" §c的举报:§r \" + str.replaceAll(\"&\", \"§\"));\n                }\n                return true;\n                }\n            }\n        return false;\n        }\n\n    @Override\n    public void onDisable() {\n        getLogger().info(\"BridgeTestPlugin 已卸载!\");\n    }\n} [/code]刚开始学插件，想写个玩家输入/inform 内容 发送给在线op举报信息的插件，但是上面的内容编译出来的插件一输入/inform 内容 就会报错，请问上面的代码有什么问题吗，烦请各位大佬指点明津",
    "replies": [
        {
            "author": "瘟疫威胁全世界",
            "timestamp": 1587089220,
            "txt_content": "getOnlinePlayers获取的不是玩家，是一个玩家的List...\n你应该循环遍历获取到所有的op发送信息\n"
        },
        {
            "author": "William_Shi",
            "timestamp": 1587091320,
            "txt_content": "\n        if (!(file.exists())) {saveDefaultConfig();}\n\n我记得saveDefaultConfig方法好像是自带了判断config.yml是否存在的吧\n\n其次就是getOnlinePlayers返回的是java.util.Collection<? extends Player>\n这玩意并不能说是一个list\n但是lz的用法肯定是错的，因为这是一个集合\n\n然后\njava.util.Set<OfflinePlayer>        getOperators()\n获取服务器的所有OP(管理员).\n\n这才是获取管理员\n但是管理员不一定在线，你要手动判断是不是在线"
        }
    ]
}