{
    "title": "Nukkit服务器通过BlocklyNukkit使用qq机器人教程",
    "author": "超神的冰凉",
    "replyCount": 9,
    "timestamp": 1597479060,
    "txt_content": " 本帖最后由 超神的冰凉 于 2020-8-21 16:15 编辑 \n\n（未完待续）\n前言：\n众所周知，自从酷q被停止运营之后，一众qq机器人框架都挂了......\n现在市面上只剩下为数不多的没有跑路的qq机器人框架，其中小栗子机器人框架是唯一一个免费的大型框架（不是打广告），blocklynukkit从1.2.8.4测试版r1开始提供了对小栗子机器人框架的api支持，使得各位服主可以通过blocklynukkit快速的对接配置**和mc服务器内部，本教程将介绍如何使用。\n配置环境：\n首先，你需要有一台windows系统的服务器（linux不推荐但也可以）\n下载1.2.8.4测试版r1及以上版本的blocklynukkit并安装\n下载连接：blocklynukkit-1284-beta.r1.jar 下载完毕后安装到nukkit服务器中\n\n然后下载小栗子机器人框架，可以官网下载，这里提供已经配置好bn接口的一键使用包：\n下载链接：小栗子qq机器人框架.zip \n然后解压，打开压缩包中的小栗子框架.exe程序\n打开后进入首页用户列表，右键空白处打开菜单，点击添加单个选项\n\n\n\n\nimage.png (26 KB, 下载次数: 6)\n\n下载附件\n\n2020-8-15 16:07 上传\n\n\n\n\n\n\n输入账号和密码，点击添加\n\n\n\n\nimage.png (157.48 KB, 下载次数: 6)\n\n下载附件\n\n2020-8-15 16:07 上传\n\n\n\n\n\n\n添加完毕之后，在用户列表中选中刚刚添加的账号，右键打开菜单，选择登录选中qq选项\n\n\n\n\nimage.png (34.02 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-15 16:08 上传\n\n\n\n\n\n\n登录成功后，进入应用中心界面，启用HttpAPI和TCPAPI两个插件\n\n\n\n\nimage.png (206.85 KB, 下载次数: 6)\n\n下载附件\n\n2020-8-15 16:11 上传\n\n\n\n\n\n\n至此，机器人环境配置完成。\n机器人使用：\nblocklynukkit提供了机器人接口，可以通过JavaScript或者python来使用机器人，目前机器人接口比较少，日后会逐渐增加。\n注：图形编辑器的机器人模块正在加紧制作中，暂时没弄好。\n1、正确安装blocklynukkit：\n详见：https://www.mcbbs.net/thread-987302-1-1.html\n2、学习blocklynukkit基本的js于py函数库：\n详见：http://www.blocklynukkit.info\n3、编写第一个机器人\nbn机器人编写并不难，下面将带您初步认识编写一个机器人插件的一般步骤：\n①启动机器人\n首先确保环境正确配置的情况下，使用如下代码即可启动机器人\njavascript:\nmanager.qq.startBot();复制代码python:\nmanager.qq.startBot()复制代码②监听聊天事件\nbn中，qq机器人收到的聊天事件将以事件的形式公开给bn插件，关于qq聊天的事件目前有两种：\nQQGroupMessageEvent --机器人收到qq群消息事件\n\n其成员函数有：\n    - String getSelfQQ() --获取收到消息的qq账号\n    - String getFromQQ() --获取发送消息的qq账号\n    - String getFromGroup() --获取消息事件的qq群号\n    - String getMessage() -获取消息\n\nQQFriendMessageEvent --机器人收到qq好友消息事件\n其成员函数有：\n    - String getEventId() --获取事件id\n    - String getEventSeed() --获取事件中的群消息标识码\n    - String getFromQQ() --获取发送消息的qq\n    - String getSelfQQ() --获取接受到群消息的qq账号\n    - String getMessage() --获取事件的消息\n下面是监听qq聊天事件的示例：\njavascript:\nfunction QQFriendMessageEvent(event){\n    let self = event.getSelfQQ();\n    let fromqq = event.getFromQQ();\n    let message = event.getMessage();\n    logger.info(self+\"收到好友\"+fromqq+\"的消息: \"+message);\n}\nfunction QQGroupMessageEvent(event){\n    let self = event.getSelfQQ();\n    let group = event.getFromGroup();\n    let fromqq = event.getFromQQ();\n    let message = event.getMessage();\n    logger.info(self+\"收到群\"+group+\"中\"+fromqq+\"的消息: \"+message);\n}复制代码python:\ndef QQFriendMessageEvent(event):\n    selfqq = event.getSelfQQ()\n    fromqq = event.getFromQQ()\n    message = event.getMessage()\n    logger.info(selfqq+u\"收到好友\"+fromqq+u\"的消息: \"+message)\n\ndef QQGroupMessageEvent(event):\n    selfqq = event.getSelfQQ()\n    group = event.getFromGroup()\n    fromqq = event.getFromQQ()\n    message = event.getMessage()\n    logger.info(selfqq+u\"收到群\"+group+u\"中\"+fromqq+u\"的消息: \"+message)复制代码③机器人发送信息\nJavaScript：\nmanager.qq.sendFriendMessage(\"发送消息qq号\",\"发送给qq号\",\"消息内容\"); //给好友发消息\nmanager.qq.sendGroupMessage(\"发送消息qq号\",\"群号\",\"消息内容\"); //给qq群发送消息复制代码python：\nmanager.qq.sendFriendMessage(u\"发送消息qq号\",u\"发送给qq号\",u\"消息内容\") #给好友发消息\nmanager.qq.sendGroupMessage(u发送消息qq号\",u\"群号\",u\"消息内容\") #给qq群发送消息复制代码④机器人发送图文使用qq.sendGroupPicMessage(String fromQQ,String toGroup,String picturePaths,String message)发送qq图文消息picturePaths用;分割多个本地图片路径\n消息中使用图片只需用%picture数字%即可，数字指代第几个路径的图片，从0开始算起\nJavaScript：\nmanager.qq.sendGroupPicMessage(\"发送消息qq号\",\"发送给qq号\",\"C:/Users/Administer/image.jpg;C:/Users/Administer/smile.jpg\",\"图片image.png是:%picture0%\\n图片smile.jpg是%picture1% \"); //给qq群发图文消息\n复制代码python：manager.qq.sendGroupMessage(u\"发送消息qq号\",u\"群号\",u\"C:/Users/Administer/image.jpg;C:/Users/Administer/smile.jpg\",u\"图片image.png是:%picture0%\\n图片smile.jpg是%picture1% \") #给qq群发送图文消息复制代码\n\n\n",
    "replies": [
        {
            "author": "一只鸽纸",
            "timestamp": 1597481460,
            "txt_content": "OHHHHHHHHHHHHH，BN就是NB\n（话说冰凉会不会考虑自己开发个机器人框架已经看到冰凉“浓密”的头发了）"
        },
        {
            "author": "liu_aix",
            "timestamp": 1597483680,
            "txt_content": "这也太肝了吧发量还好吗"
        },
        {
            "author": "Minecraftplay42",
            "timestamp": 1598271600,
            "txt_content": "emmm 太难了吧 太肝了啊啊啊算了不做了"
        },
        {
            "author": "大电鳗",
            "timestamp": 1598707440,
            "txt_content": "终于找到了合适的机器人了"
        },
        {
            "author": "那个天宇君",
            "timestamp": 1599870420,
            "txt_content": "请先连接到互联网？我都连了啊"
        },
        {
            "author": "超神的冰凉",
            "timestamp": 1599873120,
            "txt_content": "那个天宇君 发表于 2020-9-12 08:27\n请先连接到互联网？我都连了啊\n旧版的小栗子更新服务器关了，需要手动更新"
        },
        {
            "author": "xiao_lihao",
            "timestamp": 1607774220,
            "txt_content": "赞赞赞赞赞赞"
        },
        {
            "author": "北孤清枫",
            "timestamp": 1608369840,
            "txt_content": "linux该怎么操作？"
        },
        {
            "author": "wunaimzy",
            "timestamp": 1608380760,
            "txt_content": "谢谢教程 "
        }
    ]
}