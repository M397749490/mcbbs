{
    "title": "怎么获得离一个实体最近的另一个实体",
    "author": "摇摇车",
    "replyCount": 5,
    "timestamp": 1510397520,
    "txt_content": "例如：\n  玩家1攻击了僵尸1\n  怎么将伤害分百分之五十  给离僵尸1 最近的僵尸 (或者  叫僵尸2？)",
    "replies": [
        {
            "author": "leavessoft",
            "timestamp": 1510400520,
            "txt_content": "要不要试试 getNearbyEntities ？"
        },
        {
            "author": "Zevn",
            "timestamp": 1510401360,
            "txt_content": " 本帖最后由 Zevn 于 2018-11-25 04:01 编辑 \n\n发错版了，已删"
        },
        {
            "author": "dodo2003",
            "timestamp": 1510408260,
            "txt_content": "第一条命令：把攻击次数记载（用钻石剑为例）\nentitydata @p {name1:stat.useItem.minecraft.diamond.sword}复制代码\n延迟1tick后执行第二条命令：比较武器使用次数是否改变，来确定攻击\ntestfor @p {name1 =! stat.useItem.minecraft.diamond.sword}复制代码\n使用比较器出结果执行第三条命令：找出有效目标攻击（先找到最近&距离在5以内的僵尸1，在找僵尸1最近的距离在0.1到5之间的僵尸2）（这里以三点攻击为例）\nexecute @e[c = 1,type = zombie,r=5] ~ ~ ~ execute @e[c = 1,type = zombie,r = 5mr = 0.1] ~ ~ ~ effect minecraft:instant_damage 1 3 false复制代码"
        },
        {
            "author": "jiangzizhong",
            "timestamp": 1510471200,
            "txt_content": " 本帖最后由 jiangzizhong 于 2017-11-12 15:21 编辑 \n\n写for 循环：\n        @EventHandler //注意注册事件监听        public void onEntityDamageEntity(EntityDamageByEntityEvent e) {\n                if(e.getDamager() instanceof Player) { //判断攻击者是否为玩家\n                        Player p = (Player) e.getDamager();\n                        if(e.getEntity() instanceof Zombie) { //判断受害者是否为僵尸\n                                double 半径 = 5;\n                                for(Entity entity : p.getNearbyEntities(半径, 半径, 半径)) { //有效半径\n                                        if(entity instanceof Zombie) {\n                                                ((Zombie) entity).damage(e.getDamage()/2);\n                                                break; //只执行一次\n                                        }\n                                }\n                        }\n                }\n        }复制代码"
        },
        {
            "author": "GayaGuoguo",
            "timestamp": 1511310060,
            "txt_content": "        public LivingEntity getNearestLivingEntity(LivingEntity livingEntity) {\n                LivingEntity nearestLivingEntity = null;\n                double minDistance = Double.MAX_VALUE;\n                for (LivingEntity livingEntity2 : livingEntity.getWorld().getLivingEntities()) {\n                        if (livingEntity.equals(livingEntity2)) {\n                                continue;\n                        }\n                        double distance = livingEntity2.getLocation().distance(livingEntity.getLocation());\n                        if (distance < minDistance) {\n                                minDistance = distance;\n                                nearestLivingEntity = livingEntity2;\n                        }\n                }\n                return nearestLivingEntity;\n        }复制代码"
        }
    ]
}