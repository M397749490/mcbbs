{
    "title": "想让玩家发布某个指令如何做？",
    "author": "wangmcptr",
    "replyCount": 2,
    "timestamp": 1531672080,
    "txt_content": "1.12的forge，感觉先要得到player实例（Minecraft.getMinecraft().player），然后就不知道怎么办了，研究半天没出来，请大神支招。",
    "replies": [
        {
            "author": "mclinghuan",
            "timestamp": 1531734600,
            "txt_content": "/指令  玩家\n这样不知道算不算让玩家发布指令"
        },
        {
            "author": "的风格好",
            "timestamp": 1533172560,
            "txt_content": " 本帖最后由 的风格好 于 2018-8-2 09:27 编辑 \n\n在ICommand接口中有如下方法\nint executeCommand(ICommandSender sender, String rawCommand);复制代码执行成功返回非零。\n代码样例如下：\nMinecraftServer instance = player.getServer();\nif(instance!=null)\n    instance.commandManager.executeCommand(player,\"/say Hello.\");复制代码例子：\n比如我有一个继承于ItemArrow类的CustomItemArrow类。\n覆盖了父类的isInfinite方法。\n这个方法传入了一个EntityPlayer 对象。\n由于Entity对象实现了接口 ICommandSender\nMinecraftServer对象有一个ICommandManager实例。\n可调用MinecraftServer对象中的commandManager 实例的executeCommand()方法\n以下为代码（在生存模式中射箭是会调用）\n@Override\npublic boolean isInfinite(ItemStack stack, ItemStack bow, EntityPlayer player)\n{\n    MinecraftServer instance = player.getServer();\n    if(instance!=null)\n        instance.commandManager.executeCommand(player,\"/say Hello.\");\n    int enchant = net.minecraft.enchantment.EnchantmentHelper.getEnchantmentLevel(net.minecraft.init.Enchantments.INFINITY, bow);\n    return enchant > 0;\n}复制代码\n\n\n\n\n2018-08-02_09.10.09.png (124.36 KB, 下载次数: 0)\n\n下载附件\n\n2018-8-2 09:23 上传\n\n\n\n\n\n\n"
        }
    ]
}