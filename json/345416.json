{
    "title": "APC基础教程2",
    "author": "yuxuanchiadm",
    "replyCount": 2,
    "timestamp": 1412060760,
    "txt_content": " 本帖最后由 yuxuanchiadm 于 2014-9-30 16:50 编辑 \n\n主贴：http://www.mcbbs.net/thread-197233-1-1.html\n上一教程：基础教程1\n\n1.基本程序结构\nAPC中总共有4套指令集：\nCPU指令集 - 包含基础的运算指令\nAdvCPU指令集 - 包含高级CPU指令\nFPU指令集 - 包含浮点数运算指令\n伪指令集 - 编译器提供的辅助指令复制代码其中最常用的还是CPU指令集，其中包含了基本的运算指令、位操作指令和比较指令，分别如下：运算指令：\n1    |   0x0001  | SET A,B  | 设置 A 为 B \n 2    |   0x0002  | ADD A,B | 设置 A 为 A 加 B \n 3    |   0x0003  | SUB A,B  | 设置 A 为 A 减 B \n 4    |   0x0004  | MUL A,B | 设置 A 为 A 乘 B\n 5    |   0x0005  | DIV A,B  | 设置 A 为 A 除以 B，B为0则A不变，寄存器O为0xA\n 6    |   0x0006  | MOD A,B| 设置 A 为 A 除以 B 的余数，B为0则A不变，寄存器O为0xA\n位操作指令：\n 7    |   0x0007  | AND A,B | 设置 A 为 A 按位与 B （位都为1结果位才为1）\n 8    |   0x0008  | BOR A,B | 设置 A 为 A 按位或 B （任意一位为1结果位就为1）\n 9    |   0x0009  | XOR A,B | 设置 A 为 A 按位异或 B （不同位为1，同位为0）\n 10   |  0x000a  | SHR A,B  | 设置 A 为 A 添零按位右移 B 位\n 11   |  0x000b  | ASR A,B  | 设置 A 为 A 按位右移 B 位\n 12   |  0x000c  | SHL A,B  | 设置 A 为 A 按位左移 B 位\n比较指令： \n 13   |  0x000d  | IFE A,B   | 当 A 等于 B 时执行下一条指令，否则跳过\n 14   |  0x000e  | IFN A,B   | 当 A 不等于 B 时执行下一条指令，否则跳过\n 15   |   0x000f  | IFA A,B   | 当 A 大于 B 时执行下一条指令，否则跳过\n 16   |  0x0010  | IFU A,B   | 当 A 小于 B 时执行下一条指令，否则跳过复制代码比如设置当前寄存器X为100，Y为54。并将其相乘并赋值给Z，然后判断是否大于1000。如果大于则设置A为1，则可以这么写：SET X,100\nSET Y,54\n\nSET Z,X\nMUL Z,Y\nIFA Z,1000\n    SET A,0复制代码注意所有运算和位操作指令都会更改A参数的值。\n当有大量数据需要保存的时候，寄存器就不够用了，这时候我们需要将其保存在内存中，还是上面的例子，只不过现在我们把Z替换成内存位置8192：SET X,100\nSET Y,54\n\nSET Z,X\nMUL [8192],Y\nIFA [8192],1000\n    SET A,0复制代码因为上面的X和Y寄存器的值是不变的，所以我们也可以使用字面量替代：SET Z,100\nMUL [8192],54\nIFA [8192],1000\n    SET A,0复制代码有时候，我们需要根据某些条件的不同执行不同的代码块，如下伪代码所示：if(A > 200)\n{\n    B = -1\n}\nelse\n{\n    B = A * 10\n}复制代码在APC中跳转由JSR指令来实现，如果将其转换为APC汇编语言则是：IFA A 200\n    JSR l1\n:l0\n    SET B,A\n    MUL B,10\nJSR l2\n:l1\n    SET B,-1\nJSR l2\n:l2复制代码2.字面量\nAPC中总共有14种字面量：Dec - 十进制有符号整数\nHex - 十六进制无符号整数\nOct - 八进制无符号整数\nBin - 二进制无符号整数\nReg - 寄存器\nMemReg - 寄存器索引内存\nMemDec - 十进制有符号整数索引内存\nMemHex - 十六进制无符号整数索引内存\nMemOct - 八进制无符号整数索引内存\nMemBin - 二进制无符号整数索引内存\nString - 字符串\nChar - 字符\nLable - 标签\nReal - 浮点复制代码\n\n（当你看到这里时某触还在继续码字）",
    "replies": [
        {
            "author": "844565468",
            "timestamp": 1412060880,
            "txt_content": "支持   虽然看不懂"
        },
        {
            "author": "w43441780",
            "timestamp": 1415947020,
            "txt_content": "小白求携带……"
        }
    ]
}