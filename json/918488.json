{
    "title": "[1.14.4]如何实现箱子回收",
    "author": "t1546542",
    "replyCount": 14,
    "timestamp": 1570320600,
    "txt_content": " 本帖最后由 t1546542 于 2019-10-6 13:03 编辑 \n\n版本：1.14.4\n打开指定的一个箱子\n放一个原版腐肉给该玩家金币计分板加5分，并清除腐肉\n放半组原版腐肉给该玩家金币计分板加160分，并清除腐肉\n同理\n放一组原版骨头给该玩家金币计分板加640分，并清除骨头\n求大佬解答！\n@CHElover_C60 @SPGoding ",
    "replies": [
        {
            "author": "ruhuasiyu",
            "timestamp": 1570320600,
            "txt_content": " 本帖最后由 ruhuasiyu 于 2019-10-6 21:47 编辑 \n\n第一个高频后面接连锁\nsetblock 0 255 0 chest\ndata modify block 0 255 0 Items[{id:\"minecraft:rotten_flesh\"}] set from block 0 4 0 Items[{id:\"minecraft:rotten_flesh\"}]\nexecute store result score #t jingbi run data get block 0 255 0 Items[0].Count 5\ndata modify block 0 4 0 Items[{id:\"minecraft:air\"}].Slot set from block 0 255 0 Items[{id:\"minecraft:rotten_flesh\"}].Slot\nsetblock 0 255 0 air\nscoreboard players operation t154654 jingbi += #t jingbi\n"
        },
        {
            "author": "SPGoding",
            "timestamp": 1570336080,
            "txt_content": " 本帖最后由 SPGoding 于 2019-10-6 14:21 编辑 \n\n谢邀。\n\n加载时执行 #load：\nscoreboard objectives add count dummy\nscoreboard players set 5 count 5\nscoreboard players set 10 count 10\n\n每刻执行 #tick：\nexecute store result score rotten_flesh count if data block <箱子坐标> Items[{id: \"minecraft:rotten_flesh\"}]\ndata remove block <箱子坐标> Items[{id: \"minecraft:rotten_flesh\"}]\nscoreboard players operation rotten_flesh count *= 5 count\nscoreboard players operation @p 金币 += rotten_flesh count\nexecute store result score bone count if data block <箱子坐标> Items[{id: \"minecraft:bone\"}]\ndata remove block <箱子坐标> Items[{id: \"minecraft:bone\"}]\nscoreboard players operation bone count *= 10 count\nscoreboard players operation @p 金币 += bone count\n\n放半组原版腐肉给该玩家金币计分板加160分，并清除@SPGoding\nexecute if score rotten_flesh count matches 160 run kill SPGoding"
        },
        {
            "author": "t1546542",
            "timestamp": 1570337940,
            "txt_content": " 本帖最后由 t1546542 于 2019-10-6 13:03 编辑 \n梓榆 发表于 2019-10-6 12:28\n谢邀。\n\n加载时执行 #load：\n没看懂，能不能讲解一下(那个清除腐肉后面的@SPGoding打错了)\n\n(本来想@的……)"
        },
        {
            "author": "SPGoding",
            "timestamp": 1570342800,
            "txt_content": "t1546542 发表于 2019-10-6 12:59\n没看懂，能不能讲解一下(那个清除腐肉后面的@SPGoding打错了)\n\n(本来想@的……)\n我擅自简化了下你的需求：\n\n箱子中每有一个腐肉，给玩家加 5 金币；\n箱子中每有一个骨头，给玩家加 10 金币。\n\n所以思路就是：\n\n1. 检测箱子中腐肉个数，储存为 rotten_flesh count；\n2. 清除箱子中所有的腐肉；\n3. 将该数量 ×5；\n4. 把 ×5 后的数量加到玩家的金币分数中；\n5. 检测箱子中骨头个数，储存为 bone count；\n6. 清除箱子中所有的骨头；\n7. 将该数量 ×10；\n8. 把 ×10 后的数量加到玩家的金币分数中.\n\n1. 检测腐肉个数，可以利用 execute store 命令，配合 execute if data。命令后半部分的 Items[{id: \"minecraft:rotten_flesh\"}] 是一个 NBT 路径，可以参考下 Wiki 的写法。\nexecute store result score rotten_flesh count if data block <箱子坐标> Items[{id: \"minecraft:rotten_flesh\"}]\n2. data remove block <箱子坐标> Items[{id: \"minecraft:rotten_flesh\"}]\n3. scoreboard players operation rotten_flesh count *= 5 count\n4. scoreboard players operation @p 金币 += rotten_flesh count\n5. execute store result score bone count if data block <箱子坐标> Items[{id: \"minecraft:bone\"}]\n6. data remove block <箱子坐标> Items[{id: \"minecraft:bone\"}]\n7. scoreboard players operation bone count *= 10 count\n8. scoreboard players operation @p 金币 += bone count"
        },
        {
            "author": "t1546542",
            "timestamp": 1570345080,
            "txt_content": "梓榆 发表于 2019-10-6 14:20\n我擅自简化了下你的需求：\n\n箱子中每有一个腐肉，给玩家加 5 金币；\n为什么第一条指令只会记录组数\n占一格记一分\n\n\n\n\n\n\n34H95%I8B7(%GG4L(2EFQ(A.png\n(5.27 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-10-6 14:58 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nT](QDYHD]NU5M`55W3)Q}LB.png\n(1.97 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-10-6 14:58 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1570346700,
            "txt_content": " 本帖最后由 ruhuasiyu 于 2019-10-6 15:53 编辑 \n\n放一个as，头部存储一个潜影盒，潜影盒内记录了箱子里的物品。\n\n\n        如果潜影盒Items[0]不是腐肉，就\n                         Items追加Items[0]并remove Items[0]\n                         如果第一格仍然不是就循环执行这个函数\n        好的现在潜影盒Items[0]是腐肉了，获得数量，并remove Items[0]，记录分数\n        如果还有腐肉，循环这个函数\n\n最后把Items复制回箱子\n如何判断第一格是不是腐肉呢？将其复制到as的手上判断即可\n\n"
        },
        {
            "author": "t1546542",
            "timestamp": 1570349700,
            "txt_content": "ruhuasiyu 发表于 2019-10-6 15:25\n放一个as，头部存储一个潜影盒，潜影盒内记录了箱子里的物品。\n用纯命令行吗"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1570351440,
            "txt_content": " 本帖最后由 ⊙u⊙ 于 2019-10-6 01:39 编辑 \nruhuasiyu 发表于 2019-10-5 21:25\n放一个as，头部存储一个潜影盒，潜影盒内记录了箱子里的物品。\n列表处理的时候，判断[0]是否为腐肉/骨头，是则获取数量，删掉该[0]。（重复此步骤至列表中所有格...）不需要as"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1570353600,
            "txt_content": "⊙u⊙ 发表于 2019-10-6 16:44\n列表处理的时候，判断[0]是否为腐肉/骨头，是则获取数量，删掉该[0]。（重复此步骤至列表中所有格...）不 ...\n怎么判断"
        },
        {
            "author": "t1546542",
            "timestamp": 1570364700,
            "txt_content": "ruhuasiyu 发表于 2019-10-6 17:20\n怎么判断\n能不能用一下纯命令…………"
        },
        {
            "author": "t1546542",
            "timestamp": 1570371480,
            "txt_content": "ruhuasiyu 发表于 2019-10-6 21:44\n第一个高频后面接连锁\nsetblock 0 255 0 chest\ndata modify block 0 255 0 Items[{id:\"minecraft:rotten_fl ...\n讲解一下，看不懂（尤其是data那里）"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1570403160,
            "txt_content": "t1546542 发表于 2019-10-6 22:18\n讲解一下，看不懂（尤其是data那里）\n能用就行，30金粒要啥自行车……\n\n\n第一个data由于255箱子没有相应路径因此会创建一个，后面的数据本来是个列表，但返回的只能是一个格子的物品，也就是最后一个有腐肉的格子\n\n第二个data同样不存在id是空气的格子，会创建一个并且把255格子的槽位复制过去。所以得到了一个有槽位但是没物品id的格子，这个格子会覆盖原有的同槽位格子，所以原来的最后一个有腐肉的格子没了，然后新加的这个因为没有id所以也消失了"
        },
        {
            "author": "t1546542",
            "timestamp": 1570431900,
            "txt_content": "ruhuasiyu 发表于 2019-10-6 08:10\n第一个高频后面接连锁\nsetblock 0 255 0 chest\ndata modify block 0 255 0 Items[{id:\"minecraft:rotten_fl ...\n我还有一个问题\n为什么第一个data指令不用打.Slot\n而第二个要打呢？"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1570433460,
            "txt_content": "t1546542 发表于 2019-10-7 15:05\n我还有一个问题\n为什么第一个data指令不用打.Slot\n而第二个要打呢？\n第二个相当于新建了一个{id:\"minecraft:air\"}，因为没有Slot所以会新建一个，同时把后面的那个Slot信息复制过来得到一个 {id:\"minecraft:air\",Slot:8b}之类的\n\n第一个是因为要复制整个槽位的信息，包括id,Slot,Count,tag，又不是只复制Slot"
        }
    ]
}