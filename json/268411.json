{
    "title": "[Pyramid][插件开发] 关于 Player 类的常用方法说明",
    "author": "raysuperman",
    "replyCount": 15,
    "timestamp": 1398440040,
    "txt_content": " 本帖最后由 raysuperman 于 2014-7-2 13:06 编辑 \n\n注: 此贴仅供开发者参考使用\n     此贴主要是解析 PocketMine-MP 服务器的 Player 类的各个函数，以帮助各位技术员以及腐竹开发插件\n     如有不正确之处，请回复此贴以帮助作者更正\n     本文的设计目标群体为一些有一定经验的但又对 PocketMine-MP new API 不太熟悉的技术员，需要一些基础的编程经验\n     新手可能会很难理解本文的一些内容\n     当然也欢迎新手直接与作者联系，寻求帮助\n\n     本帖的所有解说内容均由本人撰写，源代码均来自 PocketMine-MP Alpha 1.4 Dev [new API]，源代码版权归 PocketMine Team 所有\n     如需转载本帖内容，请注明作者 [Marcus]，并尝试联系作者 。 \n     当然，如果本贴对您的开发工作有帮助，也希望各位开发者的一次评分或回复，这是对作者最好的鼓励。\n\n     如果需要任何帮助，也可以直接回复本贴，作者会在第一时间回复您。\n更新日志：\n\n2014.7.2 删除所有oldAPI内容，更新为newAPI，并且重新排版。\n2014.7.2 更新目录，开始撰写函数部分\n2014.7.2 函数部分基本撰写完毕\n\n目录\n方法\nisBanned()setBanned()isWhitelisted()setWhitelisted()canSee()hidePlayer()showPlayer()isOnline()isOp()setOp()hasPermission()isConnected()getDisplayName()setDisplayName()getNameTag()setNameTag()getAddress()getPort()getSpawn()setSpawn()close()getName()sendMessage()kick()\n\n附录\n附录：关于Player的父类以及Entity类附录：关于Entity类的几个有关的方法\n\n方法1. isBanned()功能：返回该用户是否被加入至服务器黑名单参数：[此方法不需要任何参数]返回值：(bool) 返回该用户是否被加入至服务器黑名单2. setBanned()功能：将玩家加入服务器黑名单或从服务器黑名单移除参数：(bool $value)  true 为加入黑名单 false 为从黑名单中移除返回值：[此方法无任何返回值]3. isWhitelisted()功能：返回该用户是否存在于服务器白名单中参数：[此方法不需要任何参数]返回值：(bool) 返回该用户是否存在于服务器白名单中4. setWhitelisted()功能：将玩家加入服务器白名单或从服务器白名单移除参数：(bool $value)  true 为加入白名单 false 为从白名单中移除返回值：[此方法无任何返回值]5. canSee()功能：返回参数中的玩家能否被目标玩家看见参数：(Player $player) 输入参数中的玩家返回值：(bool) 返回能否被目标玩家看见6. hidePlayer()功能：将参数中的玩家从目标玩家的屏幕中隐藏参数：(Player $player) 输入参数中的玩家返回值：[此方法无任何返回值]注：参数中的玩家不能为目标玩家本人，否则此方法无意义， 并且此方法与 showPlayer() 互补7. showPlayer()功能：重新显示参数中的玩家从目标玩家的屏幕中参数：(Player $player) 输入参数中的玩家返回值：[此方法无任何返回值]注：此方法与 hidePlayer() 互补8. isOnline()功能：返回玩家是否在线以及是否通过验证\n参数：[此方法不需要任何参数]\n返回值：(bool) 返回玩家是否在线以及是否通过验证\n注：此函数与 isConnected()不同\n9. isOp()功能：返回玩家是否为服务器管理员 (ServerOperator)参数：[此方法不需要任何参数]返回值：(bool) 返回玩家是否为服务器管理员10. setOp()功能：将玩家添加至服务器管理员列表或从服务器管理员列表中移除\n参数：(bool $value) true 为加入服务器管理员列表 false 为从服务器管理员列表中移除返回值：[此方法无任何返回值]11.hasPermission()功能：返回目标玩家是否具有参数中的权限\n参数：(string $permissionName) 输入权限名\n返回值：(bool) 返回目标玩家是否具有参数中的权限\n12. isConnected()功能：返回目标玩家是否在线\n参数：[此方法不需要任何参数]\n返回值：(bool) 返回目标玩家是否在线\n注：该方法只会检查目标玩家是否在线，并不会检查用户玩家是否通过验证\n13. getDisplayName()功能：返回目标玩家显示的名称\n参数：[此方法不需要任何参数]\n返回值：(string) 返回目标玩家显示的名称\n14. setDisplayName()功能：设置目标玩家显示的名称，在聊天窗口中显示该名称参数：(string $displayName) 输入显示的名称\n返回值：[此方法无任何返回值]\n15. getNameTag()功能：返回目标玩家头顶的标签显示的信息\n参数：[此方法不需要任何参数]\n返回值：(string) 返回目标玩家头顶的标签显示的信息16. setNameTag()功能：设置目标玩家头顶的标签显示的信息\n参数：(string $name) 输入参数以目标玩家头顶的标签显示的信息\n返回值：[此方法无任何返回值]\n\n\n\n17. getAddress()功能：返回目标玩家的 IP 地址\n参数：[此方法不需要任何参数]\n返回值：(string) 返回目标玩家的 IP 地址\n18. getPort()功能：返回目标玩家连接服务器的端口\n参数：[此方法不需要任何参数]\n返回值：(string) 返回目标玩家连接服务器的端口\n19. getSpawn()功能：返回目标玩家的出生点\n参数：[此方法不需要任何参数]\n返回值：(Position) 返回目标玩家的出生点\n20. setSpawn()功能：设置目标玩家的出生点参数：(Position $spawnPoint) 输入希望设置的出生点，参数为一个 Position 类或 Position 类的子类 的实例\n返回值：[此方法无任何返回值]\n21. close()功能：断开与玩家的连接\n参数：(string $message = \"\", string $reason = \"generic reason\") 其中 $message 变量为出发事件时附带的信息，$reason 变量为断开连接的原因\n返回值：[此方法无任何返回值]\n22. getName()功能：返回玩家登录所用的用户名\n参数：[此方法不需要任何参数]\n返回值：(string) 返回玩家登录所用的用户名\n23. sendMessage()功能：向目标玩家发送聊天信息\n参数：(string $message) 信息的类容\n返回值：[此方法无任何返回值]\n注：该函数等价于曾经 old API 的 sendChat()\n24. kick()功能：将目标玩家踢出服务器\n参数：(string $reason) 参数为踢出的原因\n返回值：[此方法无任何返回值]\n注：此方法最终会调用 close() 方法，但是会额外出发一个 PlayerKickEvent 事件\n附录\n1. 关于Player的父类以及Entity类Player 类是一个继承自 Human 的类，也可以说，Player 是 Human 的子类。也就是说，Player 类 具有 Human 类的所有功能。Human 类 继承自 Creature, Creature 类 继承自 Living, Living 类 继承自 Entity也就是说，Player 类 间接地继承自 Entity 类。那么，Player 就有了 Entity 类的全部未被覆盖的功能，并且能够直接从 Player 的实例变量调用 Entity 的方法2. 关于Entity类的几个有关的方法teleport():    功能：移动玩家位置、传送玩家    参数：(Vector3 $pos, int $yaw = false, int $pitch = false) 其中 $pos 变量为传送的目标位置，可以为 Vector3 的任意子类， $yaw 变量 与 $pitch 变量为玩家身体的角度    注：这个方法在 PocketMine-MP Old API 时期曾经是 Player 类的一个方法\n\n[groupid=422]PocketMine开发&讨论[/groupid]",
    "replies": [
        {
            "author": "zmdd",
            "timestamp": 1398472980,
            "txt_content": " 本帖最后由 zmdd 于 2014-4-26 08:47 编辑 \n\n我来顶一个！！！\n我想说。。。太专业了，我们这些刚开始学习php的很难看懂唉"
        },
        {
            "author": "raysuperman",
            "timestamp": 1398487500,
            "txt_content": "zmdd 发表于 2014-4-26 08:43\n我来顶一个！！！\n我想说。。。太专业了，我们这些刚开始学习php的很难看懂唉 ...\n谢谢，我会尽量让每个人都看得懂\n但是还是要先有一些 PHP 基础的。"
        },
        {
            "author": "RapDoodle",
            "timestamp": 1398493260,
            "txt_content": "相当不错，十分适合PocketMine插件的新学开发者"
        },
        {
            "author": "raysuperman",
            "timestamp": 1398493320,
            "txt_content": "RapDoodle 发表于 2014-4-26 14:21\n相当不错，十分适合PocketMine插件的新学开发者\n谢谢支持"
        },
        {
            "author": "zmdd",
            "timestamp": 1398493500,
            "txt_content": "raysuperman 发表于 2014-4-26 12:45\n谢谢，我会尽量让每个人都看得懂\n但是还是要先有一些 PHP 基础的。\n嗯，最好说的通俗易懂一点"
        },
        {
            "author": "stevenghy",
            "timestamp": 1398496380,
            "txt_content": "这个必须顶。顺便问一下，removeitem的$damage为那些呢"
        },
        {
            "author": "raysuperman",
            "timestamp": 1398496980,
            "txt_content": " 本帖最后由 raysuperman 于 2014-7-2 12:20 编辑 \nstevenghy 发表于 2014-4-26 15:13\n这个必须顶。顺便问一下，removeitem的$damage为那些呢\n这个 damage 的值其实就是物品的损坏程度。\n0 为无损坏\n如果为消耗品，每次使用会增加 2 的损坏。如果不是消耗品，可以直接填写 0\n\n查看消耗品的损坏程度可以使用函数：getMetadata()\n（前提是这个物品必须是一个 Item ）\n（在绝大部分时间里是 $data['item']->getMetadata()）\n\n损坏还可以参考这个来自Item类函数：public function useOn($object, $force = false){\n                if($this->isTool() or $force === true){\n                        if(($object instanceof Entity) and !$this->isSword()){\n                                $this->meta += 2;\n                        }else{\n                                $this->meta++;\n                        }\n                        return true;\n                }elseif($this->isHoe()){\n                        if(($object instanceof Block) and ($object->getID() === GRASS or $object->getID() === DIRT)){\n                                $this->meta++;\n                        }\n                }\n                return false;\n        }复制代码"
        },
        {
            "author": "stevenghy",
            "timestamp": 1398497940,
            "txt_content": "楼主是哪个服务器的吗"
        },
        {
            "author": "raysuperman",
            "timestamp": 1398498480,
            "txt_content": "stevenghy 发表于 2014-4-26 15:39\n楼主是哪个服务器的吗\n我来自 时空之翼\n同时也是 Pyramid 编程小组的一员"
        },
        {
            "author": "stevenghy",
            "timestamp": 1398498720,
            "txt_content": " 本帖最后由 stevenghy 于 2014-4-26 18:34 编辑 \n\n能来开发插件？吗？"
        },
        {
            "author": "vura",
            "timestamp": 1402627380,
            "txt_content": "你好。。首先感谢你写了这篇帖子我在看插件的时候看到函数不只有这些(说实话我都不知道那些函数有什么用)是否可以再写点别的类的函数用法呢"
        },
        {
            "author": "raysuperman",
            "timestamp": 1402670640,
            "txt_content": "vura 发表于 2014-6-13 10:43\n你好。。首先感谢你写了这篇帖子我在看插件的时候看到函数不只有这些(说实话我都不知道那些函数有什么用)是 ...\n是的，只不过由于马上就要期末测试，最近没时间更新，暑假后我会继续更新的"
        },
        {
            "author": "y185110754",
            "timestamp": 1403622240,
            "txt_content": "还不错哦"
        },
        {
            "author": "liuhaitu",
            "timestamp": 1404274560,
            "txt_content": "Marcus纠正一个小错误。面向对象语言里，不叫函数而是叫方法（我有点鸡蛋里挑骨头的感觉）"
        },
        {
            "author": "raysuperman",
            "timestamp": 1404274740,
            "txt_content": "liuhaitu 发表于 2014-7-2 12:16\nMarcus纠正一个小错误。面向对象语言里，不叫函数而是叫方法（我有点鸡蛋里挑骨头的感觉） ...\n已改正，谢谢"
        }
    ]
}