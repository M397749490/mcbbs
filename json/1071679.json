{
    "title": "服务器卡顿加报错",
    "author": "Daleynf",
    "replyCount": 12,
    "timestamp": 1593781560,
    "txt_content": "https://timings.aikar.co/?id=bdd4199c89424dfb918e6ff0de2c64b6#timings\n您有一份文件待查收！即刻点击链接获取文件：https://c-t.work/s/7a367ad6987144 或进入 cowtransfer.com 获取，在首页输入取件码：2uv7ce（24小时内有效）\n\n麻烦大佬们看下，tps很低，在log最下方还有warn报错，貌似是卡线程",
    "replies": [
        {
            "author": "蕾米洛伊",
            "timestamp": 1593781560,
            "txt_content": "Daleynf 发表于 2020-7-3 23:06\n您看看导致服务器卡顿的除了硬盘还有吗，硬盘我检查了，就是那个无法访问导致的 ...\nem, 卡顿出的内存 dump 要去看 Server thread dump, 硬盘访问那个是不会卡服的。虽然爆出了一大长串恐怖的错误栈而且一直在刷, 其实因为那个是 MOTD 插件, 别人一刷 MOTD 就会出错, 但是不会卡服, 因为它是即时无法访问并没阻塞线程。\n\n看了下 timings, 依然是实体卡服... 但是我看了一下实体并不很多, 所以还是优先考虑性能问题(高版本💩一样的优化)\n首当其冲占用 tick 时间的是 13% 僵尸(是不是太多了?), 然后是苦力怕和小白。\n另外还有 20% 是方块占用, 考虑可能是命令方块或者红石机械导致"
        },
        {
            "author": "梦星桐",
            "timestamp": 1593781740,
            "txt_content": "ServerRestorer在访问\\plugins\\ColorMOTD-Reremake\\favicons下的图片的时候被拒绝了"
        },
        {
            "author": "Daleynf",
            "timestamp": 1593781800,
            "txt_content": "残星殇 发表于 2020-7-3 21:09\nServerRestorer在访问\\plugins\\ColorMOTD-Reremake\\favicons下的图片的时候被拒绝了\n这个我刚刚删除了，是没给管理员权限，是他占用太高吗"
        },
        {
            "author": "梦星桐",
            "timestamp": 1593781860,
            "txt_content": "Daleynf 发表于 2020-7-3 21:10\n这个我刚刚删除了，是没给管理员权限，是他占用太高吗\n你先删除试试？"
        },
        {
            "author": "Daleynf",
            "timestamp": 1593781920,
            "txt_content": "残星殇 发表于 2020-7-3 21:11\n你先删除试试？\n删除这个插件和配置文件了，您看看log的卡线程是因为什么吗"
        },
        {
            "author": "梦星桐",
            "timestamp": 1593783540,
            "txt_content": "Daleynf 发表于 2020-7-3 21:12\n删除这个插件和配置文件了，您看看log的卡线程是因为什么吗\n服务器可以了吗"
        },
        {
            "author": "蕾米洛伊",
            "timestamp": 1593784800,
            "txt_content": " 本帖最后由 蕾米洛伊 于 2020-7-3 22:01 编辑 \n\n18:36:13 那一次是实体卸载卡服，结合 TPS Meter 提示:\nThe server's TPS is bellow 6.4, is it lagging or crashed?\n可能是服务器太太太卡了导致的。\n16:54:39 更夸张\nThe server's TPS is bellow 0.0, is it lagging or crashed?\n从错误栈中能看到是保存地图区块时出现的，建议对硬盘进行下监控，看是出现了什么瓶颈，还是硬盘损坏了。\n不过我看了一下几个卡服点都在保存区块，那建议看下硬盘的问题咯，是当时读写硬盘的任务比较多，还是坏道？\n但也有可能是CPU满载导致的，毕竟TPS都个位数了233\n最后的WARN报错是插件设计问题，貌似都卸载了还传数据呢，可以无视\n"
        },
        {
            "author": "Daleynf",
            "timestamp": 1593786720,
            "txt_content": "蕾米洛伊 发表于 2020-7-3 22:00\n18:36:13 那一次是实体卸载卡服，结合 TPS Meter 提示:\nThe server's TPS is bellow 6.4, is it lagging or ...\ntps meter这个可以关闭吗\n硬盘的话貌似是备份导致的，我再观察下\n貌似区块也很占用\n硬盘没问题的"
        },
        {
            "author": "Daleynf",
            "timestamp": 1593786720,
            "txt_content": "残星殇 发表于 2020-7-3 21:39\n服务器可以了吗\n等我测试一天再康康吧"
        },
        {
            "author": "蕾米洛伊",
            "timestamp": 1593787980,
            "txt_content": " 本帖最后由 蕾米洛伊 于 2020-7-3 22:55 编辑 \nDaleynf 发表于 2020-7-3 22:32\ntps meter这个可以关闭吗\n硬盘的话貌似是备份导致的，我再观察下\n貌似区块也很占用\n哎 服务器真的惨 为啥老卡啊233\nTPS meter 我不太清楚你用的啥插件 不过应该是可以关闭的 在config里找找?\n备份的话, 我这里有一个非插件的备份方案\nhttps://www.mcbbs.net/forum.php? ... &page=1#pid18759504\n里面的代码你可以试试看, 如果认为备份比较占用硬盘性能, 毕竟有源代码了你可以在中间稍微加点延迟, 减少硬盘性能损耗。\n如果硬盘没问题的话 那么就可能是服务器太卡导致的了"
        },
        {
            "author": "Daleynf",
            "timestamp": 1593788760,
            "txt_content": "蕾米洛伊 发表于 2020-7-3 22:53\n哎 服务器真的惨 为啥老卡啊233\nTPS meter 我不太清楚你用的啥插件 不过应该是可以关闭的 在config ...\n您看看导致服务器卡顿的除了硬盘还有吗，硬盘我检查了，就是那个无法访问导致的"
        },
        {
            "author": "Daleynf",
            "timestamp": 1593875880,
            "txt_content": "蕾米洛伊 发表于 2020-7-4 13:38\nem, 卡顿出的内存 dump 要去看 Server thread dump, 硬盘访问那个是不会卡服的。虽然爆出了一大长串恐怖的 ...\n删了motd后没问题了，但是还是会卡顿，不报错其他的，除了超载"
        }
    ]
}