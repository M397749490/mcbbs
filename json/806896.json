{
    "title": "【Bone Studio】【原创】【Hamster君】Spigot插件教学——Inventory与Gui ...",
    "author": "苏丶小沫",
    "replyCount": 14,
    "timestamp": 1531881900,
    "txt_content": " 本帖最后由 HamsterB君 于 2019-1-26 17:23 编辑 \n\n这回没有开头梗【#runSpigot插件教学——配置文件及其衍生\nPart1-Inventory包中的一些类[其它教程没有的知识点（重要）]\nSpigot的Inventory包跟Bukkit的Inventory包没什么区别。我们只要认识其中几个类就可以了：ItemStack: 用于存储一个物品的数据类型ItemMeta:  用于存储一个物品属性的数据类型Inventory:  用于存储一个背包、箱子等等的数据类型我们主要讲讲Inventory一般的关系是这样：Inventory里有若干个ItemStack，其中每一个ItemStack都有自己的一个ItemMeta但是，如果我们要实例化创建一个这些类的对象该怎么写？新建一个物品:ItemStack 物品名字 = new ItemStack?(Material type);新建一个物品属性:ItemMeta 属性名字 = 物品.getItemMeta();新建一个Gui:Inventory 物品栏名字 = Bukkit.createInventory(null, 物品栏大小(9的倍数，最大54), \"标题\");Part2-通过Inventory新建一个Gui既然要新建一个Gui，我们为何不新建一个类呢？既好看又简洁。在新建类的里面写：public static Inventory Gui名字 = Bukkit.createInventory(null, 36, \"这是我们的第一个Gui哦！\");我们在新建完毕后，就可以使用openInventory(类名.Gui名字)给某个玩家打开Gui啦！反之，关闭Gui就用closeInventory(类名.Gui)看看我的代码：(这只是一个事例，请不要照着写)(任何Player类型的变量后都可以用openInventory())public class MyPluginInventory {\n    public static Inventory inv = Bukkit.createInventory(null, 36, \"这是我自己的Gui哦！\");\n    public MyPluginInventory() {\n        Player player = Bukkit.getPlayer(\"玩家名字\");\n        player.openInventory(inv);\n    }\n}复制代码Part3-操控你的Inventory[其它教程没有的知识点（重要）]现在，我们想要在Inventory里面添加物品了！首先，我们先创建一个类型为苹果物品（全局变量+静态的 static）public static ItemStack 物品名字 = new ItemStack(Material.APPLE);Material就是类型，里面有很多方块、物品，可以选择。然后，把item1添加进Gui里面：Gui名字.setItem(物品位置, 物品名字)物品位置就是在Gui的格子左上角从左往右，从上往下数的数字-1，如图这样一来，我们的Gui中就有了物品，这是我的代码：public class MyPluginInventory {\n    public static Inventory inv = Bukkit.createInventory(null, 36, \"这是我自己的Gui哦！\");\n    public static ItemStack item1 = new ItemStack(Material.APPLE);\n    public MyPluginInventory() {\n        inv.setItem(1,item1);\n    }\n}复制代码我们想要给这个苹果加上一点属性怎么办？首先，我们要获取这个苹果的属性（还记得吗？是ItemMeta）就是这样写：ItemMeta 属性名字 = 物品名字.getItemMeta();然后我们就可以用ItemMeta类中的方法给这个属性定义内容了！例如：更改物品名字：属性名字.setDisplayName(\"你想要的名字\");添加物品附魔：属性名字.addEnchant(Enchantment.附魔名字, 等级, true);定义完之后，原先的物品的ItemMeta还没有变呢！我们要重新给它附上刚刚我们定义的ItemMeta：物品名字.setItemMeta(属性名字);温馨提示：请把物品栏、物品、属性是全局变量，而定义它们的代码请写在一个方法里面（推荐构造函数）就像我这样：public class MyPluginInventory {        public static Inventory inv = Bukkit.createInventory(null, 36, \"这是我自己的Gui哦！\");        public static ItemStack item1 = new ItemStack(Material.APPLE);        public static ItemMeta item1Meta = item1.getItemMeta();        public MyPluginInventory() {                item1Meta.setDisplayName(\"你想要的名字\");                item1Meta.addEnchant(Enchantment.ARROW_DAMAGE, 20, true);                item1.setItemMeta(item1Meta);                inv.setItem(0, item1);        }}最后，请在主类的onEnable方法里面写上：new 物品栏所在的类();打开此界面使用 玩家类型变量.openInventory(名字)Part4-监听玩家点击Gui[其它教程没有的知识点（重要）]我们之前学过监听器，在此不再赘述。玩家点击Gui的事件是：InventoryClickEvent在执行你自己带代码之前……请在监听器内判断玩家点击的是否是你的Gui（用：event.getClickedInventory().getName().equals(\"你的Gui的名字\")）请看看玩家点击的是哪一个格子（用：event.getSlot() == 你定义好的格子的位置）请看看是哪一个玩家（用：event.getWhoClicked()）为了使玩家不能拿走物品，我们还要取消这个事件：event.setCancelled(true);或者event.setResult(Result.DENY);EventResult枚举中包含两个常量：DENY和ALLOW\n\n7633多字打得手疼有问题的小伙伴请在1楼问我\n你们也不看看我多少级……人气撒起来吧>>回到目录<<",
    "replies": [
        {
            "author": "chenmoand",
            "timestamp": 1532063340,
            "txt_content": "我问一下有static 跟没有static有什么区别"
        },
        {
            "author": "苏丶小沫",
            "timestamp": 1532066460,
            "txt_content": " 本帖最后由 HamsterB君 于 2018-10-30 17:03 编辑 \nchenmoand 发表于 2018-7-20 13:09\n我问一下有static 跟没有static有什么区别\n如果没有static那就很麻烦了，你给玩家打开Inventory时就要初始化你的背包类的一个对象……在初始化对象的Inventory变量"
        },
        {
            "author": "耗子",
            "timestamp": 1533799800,
            "txt_content": "不建议使用界面名字来判断玩家是否点击了本插件的界面。\n建议使用一个Map储存玩家所打开的界面，并使用equals直接判断。\nplayerOpenedGui.get(event.getWhoClicked()).equals(event.getClickedInventory());复制代码"
        },
        {
            "author": "Hai_tun",
            "timestamp": 1533802380,
            "txt_content": "常规操作好伐,动态物品栏就只能靠判断名字了,写菜单名字别忘了加颜色§(因为玩家打不出来)"
        },
        {
            "author": "Aj_破晓",
            "timestamp": 1535015220,
            "txt_content": "public static Inventory inv = Bukkit.createInventory(null, 36, \"这是我自己的gui哦！\");\n        public static ItemStack item1 = new ItemStack(Material.APPLE);//new一个物品\n        public static ItemMeta item1Meta = item1.getItemMeta();\n        @EventHandler\n        public void MyPluginInventory(){\n                inv.setItem(0, item1);\n                //inv.setItem(物品位置,物品变量); 添加物品\n                item1Meta.setDisplayName(\"无敌小苹果\");\n                item1Meta.addEnchant(Enchantment.DIG_SPEED, 2, true);\n                item1.setItemMeta(item1Meta);//添加属性\n                Player player=Bukkit.getPlayer(\"Aj_poxiao\");\n                player.openInventory(inv);\n        }复制代码\n为啥我写的这个只打开gui但并没有添加物品呢 求正解~"
        },
        {
            "author": "苏丶小沫",
            "timestamp": 1535017920,
            "txt_content": " 本帖最后由 HamsterB君 于 2018-8-23 22:57 编辑 \nAj_破晓 发表于 2018-8-23 17:07\n为啥我写的这个只打开gui但并没有添加物品呢 求正解~\n不要照抄我的代码哦~\n你要在主类的onEnable里填写new Gui类名\n其中player.openInventory()是打开的方法\n动动脑子"
        },
        {
            "author": "Aj_破晓",
            "timestamp": 1535020080,
            "txt_content": "HamsterB君 发表于 2018-8-23 17:52\n不要照抄我的代码哦~\n你要在主类的onEnable里填写new Gui类名\n其中player.openInventory()是打开方法，不 ...\n求助之前在onEnable里写了\nnew MyPluginInventory(); 报错 \n我在指令的类里写了\nif(cmd.getName().equalsIgnoreCase(\"backpack\") )\n                 {\n                     if(args.length ==0)\n                     {     \n                     sender.sendMessage(\"§4正确用法:§a/backpack open\");\n                     return true;\n                     }\n                    if(args.length ==1)\n                    {\n                        if (sender instanceof Player)\n                        {           \n                            if(args[0].equalsIgnoreCase(\"open\"))\n                            {\n                                    inv.addItem(item1);\n                                p.closeInventory();\n                                p.openInventory(inv);\n                                return true;\n                            }  \n                            sender.sendMessage(\"§4 只有玩家才可使用该命令\");\n                            return true;\n                        } \n                        return true;\n                    }\n                    return true;\n                 }复制代码\n就可以添加了但是没有属性"
        },
        {
            "author": "苏丶小沫",
            "timestamp": 1535023620,
            "txt_content": "Aj_破晓 发表于 2018-8-23 18:28\n求助之前在onEnable里写了\nnew MyPluginInventory(); 报错 \n我在指令的类里写了\n先添加属性，在把物品放进Gui哦"
        },
        {
            "author": "Aj_破晓",
            "timestamp": 1535032920,
            "txt_content": "HamsterB君 发表于 2018-8-23 19:27\n先添加属性，在把物品放进Gui哦\n那样会一输入指令就会添加一个 然后就emmm了 而且如果全写在指令的类里写这个方法起什么作用"
        },
        {
            "author": "gooding300",
            "timestamp": 1535033220,
            "txt_content": "HamsterB君 发表于 2018-8-23 17:52\n不要照抄我的代码哦~\n你要在主类的onEnable里填写new Gui类名\n其中player.openInventory()是打开方法，不 ...故意写错的代码\n您写的是教程，不求您写的质量有多高，但请至少对教程的正确性有所保证，您这样做是主观故意误导吗"
        },
        {
            "author": "森林蝙蝠",
            "timestamp": 1535033820,
            "txt_content": "HamsterB君 发表于 2018-8-23 17:52\n不要照抄我的代码哦~\n你要在主类的onEnable里填写new Gui类名\n其中player.openInventory()是打开方法，不 ...\n老哥，写教程不是为了证明自己多牛的，存心刁难新人是干什么？"
        },
        {
            "author": "58860113@qq.com",
            "timestamp": 1540554720,
            "txt_content": "啦啦啦啦，又来这样子惹~"
        },
        {
            "author": "雨",
            "timestamp": 1545656460,
            "txt_content": "请问如何创建一个无法用E或ESC关闭的容器呢?"
        },
        {
            "author": "云云大魔王",
            "timestamp": 1564190460,
            "txt_content": "有点晕呼呼的awa"
        }
    ]
}