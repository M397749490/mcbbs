{
    "title": "使用SLAPI读写二进制文件时出现NotSerializableException",
    "author": "Freeze_Dolphin",
    "replyCount": 3,
    "timestamp": 1568426940,
    "txt_content": "使用HashMap存储物品和一个整数(HashMap<ItemStack, Integer>),然后用SLAPI输出为二进制文件丢到插件目录,然而读写(SLAPI的load和save方法)时报未序列化错误\n表示第一次见这种错误....应该怎么解决....\n\nSLAPI:package me.Freeze_Dolphin.cas;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.ObjectInputStream;\nimport java.io.ObjectOutputStream;\n\n/**\n * SLAPI = Saving/Loading API\n * \n * API for Saving and Loading Objects.\n * \n * Everyone has permission to include this code in their plugins as they wish :)\n * \n * @author Tomsik68<tomsik68@gmail.com>\n */\npublic class SLAPI {\n\n        public static <T extends Object> void save(T obj, File file)\n                        throws Exception {\n                ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\n                                file));\n                oos.writeObject(obj);\n                oos.flush();\n                oos.close();\n        }\n\n        @SuppressWarnings(\"unchecked\")\n        public static <T extends Object> T load(File file) throws Exception {\n                ObjectInputStream ois = new ObjectInputStream(new FileInputStream(file));\n                T result = (T) ois.readObject();\n                ois.close();\n                return result;\n        }\n}复制代码\n\n还有问一下怎么判断箱子是否为空?",
    "replies": [
        {
            "author": "Freeze_Dolphin",
            "timestamp": 1568427000,
            "txt_content": "报错信息:\n[09:40:43 WARN]: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.bukkit.craftbukkit.v1_12_R1.inventory.CraftItemStack\n[09:40:43 WARN]:         at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1577)\n[09:40:43 WARN]:         at java.io.ObjectInputStream.readObject(ObjectInputStream.java:431)\n[09:40:43 WARN]:         at java.util.HashMap.readObject(HashMap.java:1410)\n[09:40:43 WARN]:         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[09:40:43 WARN]:         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n[09:40:43 WARN]:         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[09:40:43 WARN]:         at java.lang.reflect.Method.invoke(Method.java:498)\n[09:40:43 WARN]:         at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1170)\n[09:40:43 WARN]:         at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2178)\n[09:40:43 WARN]:         at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2069)\n[09:40:43 WARN]:         at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1573)\n[09:40:43 WARN]:         at java.io.ObjectInputStream.readObject(ObjectInputStream.java:431)\n[09:40:43 WARN]:         at me.Freeze_Dolphin.cas.SLAPI.load(SLAPI.java:33)\n[09:40:43 WARN]:         at me.Freeze_Dolphin.cas.AutoStuffer.updateConfig(AutoStuffer.java:63)\n[09:40:43 WARN]:         at me.Freeze_Dolphin.cas.AutoStuffer.onEnable(AutoStuffer.java:29)\n[09:40:43 WARN]:         at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:264)\n[09:40:43 WARN]:         at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:337)\n[09:40:43 WARN]:         at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:403)\n[09:40:43 WARN]:         at org.bukkit.craftbukkit.v1_12_R1.CraftServer.enablePlugin(CraftServer.java:381)\n[09:40:43 WARN]:         at org.bukkit.craftbukkit.v1_12_R1.CraftServer.enablePlugins(CraftServer.java:330)\n[09:40:43 WARN]:         at org.bukkit.craftbukkit.v1_12_R1.CraftServer.reload(CraftServer.java:752)\n[09:40:43 WARN]:         at org.bukkit.Bukkit.reload(Bukkit.java:525)\n[09:40:43 WARN]:         at org.bukkit.command.defaults.ReloadCommand.execute(ReloadCommand.java:27)\n[09:40:43 WARN]:         at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:141)\n[09:40:43 WARN]:         at org.bukkit.craftbukkit.v1_12_R1.CraftServer.dispatchCommand(CraftServer.java:648)\n[09:40:43 WARN]:         at org.bukkit.craftbukkit.v1_12_R1.CraftServer.dispatchServerCommand(CraftServer.java:634)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.DedicatedServer.aP(DedicatedServer.java:444)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.DedicatedServer.D(DedicatedServer.java:407)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.MinecraftServer.C(MinecraftServer.java:679)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.MinecraftServer.run(MinecraftServer.java:577)\n[09:40:43 WARN]:         at java.lang.Thread.run(Thread.java:748)\n[09:40:43 WARN]: Caused by: java.io.NotSerializableException: org.bukkit.craftbukkit.v1_12_R1.inventory.CraftItemStack\n[09:40:43 WARN]:         at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)\n[09:40:43 WARN]:         at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\n[09:40:43 WARN]:         at java.util.HashMap.internalWriteEntries(HashMap.java:1792)\n[09:40:43 WARN]:         at java.util.HashMap.writeObject(HashMap.java:1363)\n[09:40:43 WARN]:         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[09:40:43 WARN]:         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n[09:40:43 WARN]:         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[09:40:43 WARN]:         at java.lang.reflect.Method.invoke(Method.java:498)\n[09:40:43 WARN]:         at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1140)\n[09:40:43 WARN]:         at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)\n[09:40:43 WARN]:         at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)\n[09:40:43 WARN]:         at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)\n[09:40:43 WARN]:         at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)\n[09:40:43 WARN]:         at me.Freeze_Dolphin.cas.SLAPI.save(SLAPI.java:23)\n[09:40:43 WARN]:         at me.Freeze_Dolphin.cas.Commands.onCommand(Commands.java:69)\n[09:40:43 WARN]:         at org.bukkit.command.PluginCommand.execute(PluginCommand.java:44)\n[09:40:43 WARN]:         at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:141)\n[09:40:43 WARN]:         at org.bukkit.craftbukkit.v1_12_R1.CraftServer.dispatchCommand(CraftServer.java:648)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.PlayerConnection.handleCommand(PlayerConnection.java:1397)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.PlayerConnection.a(PlayerConnection.java:1232)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.PacketPlayInChat.a(PacketPlayInChat.java:45)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.PacketPlayInChat.a(PacketPlayInChat.java:1)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.PlayerConnectionUtils$1.run(SourceFile:13)\n[09:40:43 WARN]:         at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n[09:40:43 WARN]:         at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.SystemUtils.a(SourceFile:46)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.MinecraftServer.D(MinecraftServer.java:748)\n[09:40:43 WARN]:         at net.minecraft.server.v1_12_R1.DedicatedServer.D(DedicatedServer.java:406)\n[09:40:43 WARN]:         ... 3 more\n复制代码"
        },
        {
            "author": "海螺螺",
            "timestamp": 1568427660,
            "txt_content": "https://github.com/tdiant/Bukkit ... b/master/brm-1-4.md\nhttps://github.com/tdiant/Bukkit ... b/master/brm-2-4.md\n\n为什么不用水桶自带的配置轮子呢"
        },
        {
            "author": "吕易天",
            "timestamp": 1568428980,
            "txt_content": " 本帖最后由 吕易天 于 2019-9-14 10:44 编辑 \n\nCraftItemStack是不可序列化的，我觉得你可以自己写一个ItemStack类，实现Serializable接口"
        }
    ]
}