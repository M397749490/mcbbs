{
    "title": "[前置]VUpdateAPI —— 免费为你的插件做一个自动更新系统[全版本]",
    "author": "沐子酱",
    "replyCount": 14,
    "timestamp": 1517022960,
    "txt_content": " 本帖最后由 沐子酱 于 2018-1-27 15:05 编辑 \n\n本插件为我和某人的合作开发作品，（我主要是在摸鱼（主业）和美工（副业））\n很抱歉的是，我没法在这个论坛说出另一个作者的名字（某个被封杀的人）。\n关于MCBBS是否许可发布该作品：\n本人已和管理层多次协商，在最终获得了发布本插件的许可。\n因此本插件现符合MCBBS的一切要求和版规制定，若有疑问请联系我或版主，谢谢。\n\nVUpdateAPI —— 让你极其轻松地获得一个自动更新系统！\n\n这是什么？\n这是一款前置插件，它可以卓有成效地玩你，哦不，帮你。\n他提供了API和源码以及更新服务器，让你可以立即获得一个自动更新服务器，并且不要钱~\n而且我可以保证，这绝对是最简单的前置插件了！也是最傻瓜的操作方式。\n傻瓜到你只需要给你的插件添加一行代码就可以免费进行自动更新系统的使用了！\n除此以外，本插件是MIT开源的，因此你可以将其整合在自己插件中，并且无需标注作者。本插件为开源插件：\n开源地址1：https://github.com/GelandiAssociation/VUpdateAPI-BukkitPlugin\n开源地址2：https://github.com/GelandiAssociation/VUpdateAPI-GUI\n开源地址3：https://github.com/GelandiAssociation/VUpdateAPI-Server\n\n指令 & 权限：\n统统没有，因为是开发者前置。\n\n下载地址：\n这个是插件本体：（腐竹和开发者下载）\n点击进行下载\n这个是API操作界面：（开发者下载）\n点击进行下载\n这个是服务端架设本体：（开发者下载）\n点击进行下载\n使用教程：\n让你的插件启用VUAPI！\n第一步：\n下载这个软件，并且打开它，你会看到一个小表格：\n\n\n\n\n1.jpg (55.06 KB, 下载次数: 15)\n\n下载附件\n\n2018-1-27 12:30 上传\n\n\n\n\n\n按照要求填入这些表格：\n\n\n\n\n2.jpg (97.49 KB, 下载次数: 3)\n\n下载附件\n\n2018-1-27 12:30 上传\n\n\n\n\n\n然后点击提交给服务器，保存你的设定：\n\n\n\n\n3.jpg (57.85 KB, 下载次数: 8)\n\n下载附件\n\n2018-1-27 12:30 上传\n\n\n\n\n\n第二步：\n修改你的插件源码：\n\n\n\n\n4.jpg (131.48 KB, 下载次数: 10)\n\n下载附件\n\n2018-1-27 12:30 上传\n\n\n\n\n\n给你的插件进行自动更新！\n只需要修改几项简单内容，就可以完成工作了！\n\n\n\n\n中途加入1.jpg (131.48 KB, 下载次数: 4)\n\n下载附件\n\n2018-1-27 12:31 上传\n\n\n\n\n\n\n\n\n\n5.jpg (67.59 KB, 下载次数: 4)\n\n下载附件\n\n2018-1-27 12:31 上传\n\n\n\n\n\n实际效果如下：\n\n\n\n\n6.jpg (58.55 KB, 下载次数: 7)\n\n下载附件\n\n2018-1-27 12:31 上传\n\n\n\n\n\n\n当然，以上只是最简单的用法，实际上插件还提供了很多API和高端的骚操作，\n不过那都是后话了，以后再来探讨吧！\n\n\n稍微高端一点的操作：\n高端操作详解：\nAPI列表：\n\n\n\n\n\n7.jpg (31.33 KB, 下载次数: 9)\n\n下载附件\n\n2018-1-27 12:31 上传\n\n\n\n\n\nVUAPI.connectToServer(); #void,连接到更新服务器（由插件官方提供的免费服务器）\nVUAPI.connectToServer(String serverip,int Port); #boolean,连接到由自己选择的更新服务器,因此你可以自己搭建更新服务器\nVUAPI.hasConnectedSuccessful(); #boolean,插件是否成功连接到了更新服务器，如果连接更新服务器失败，直接尝试下载文件可能会报错\nVUAPI.auto(项目名字,插件主类,插件文件,当前版本号); #void,全自动更新模块，只需要写一行代码就会自动检查并下载更新\nVUAPI.getLastestVersion(项目名字); #int,获取指定项目的最新版本号\nVUAPI.getDownloadRoad(项目名字); #String,获取指定项目的HTTP下载地址\nVUAPI.downloadLastestVerrsion(插件文件,项目名字,更新方法); #void,这个方法将下载插件文件，不管是否版本号符合，提供两种更新方法：下载文件后在第二次重启服务器覆盖原文件/立即覆盖原文件并立即重启使更新生效。\n以上API如果有IOException需要catch，那就是如果连接服务器断线的时候的意思了。\n\n骚操作示范：\n1.比如由于各种原因，MCBBS不让直接自动更新，只让提示是否有新版本：\n那就写入以下代码：\n        if(VUAPI.hasConnectedSuccessful()){\n            int nowVersion = 100;\n            try {\n                if(VUAPI.getLastestVersion(\"MyPlugin\")>nowVersion){\n                    System.out.println(\"好消息！我们插件有新版本啦！快去群XXXXX来更新吧！\");\n                }else{\n                    System.out.println(\"你的插件已经是最新版本了，无需更新。\");\n                }\n            } catch (IOException ex) {\n                System.out.println(\"服务器断线！\");\n            }\n        }复制代码2.我想让CI构建后，自动让所有用户下载CI的最新版本构建：        if (VUAPI.hasConnectedSuccessful()) {\n            int nowVersion = Integer.parseInt(\"%Build_Number%\"); //%Build_Number 是CircleCI提供的，他会自动替换该文本为构建号数字\n            try {\n                if (VUAPI.getLastestVersion(\"MyPlugin\") > nowVersion) {\n                    System.out.println(\"好消息！我们插件有新版本啦！正在更新！\");\n                    VUAPI.downloadLastestVersion(this.getFile(), \"MyPlugin\", UpdateMode.OverWriteNextRestart); //如果你觉得卡，可以异步做这个.\n                    System.out.println(\"更新完毕！将在下次重启生效！\");\n                } else {\n                    System.out.println(\"你的插件已经是最新版本了，无需更新。\");\n                }\n            } catch (IOException ex) {\n                System.out.println(\"服务器断线！\");\n            }\n        }复制代码然后再在你的项目里放入VUpdateAPI-GUI，并且在build.sh里面写入这一行启动脚本来启动GUI。\n\n\n\n\n8.jpg (137.5 KB, 下载次数: 10)\n\n下载附件\n\n2018-1-27 12:31 上传\n\n\n\n\n\n好了，那么自动化构建已经基本完成啦！\n3.为了安全起见，我们想自己搭建一个服务器：\n首先下载我们提供的服务端架设本体（见下载地址），\n然后类似于MC服务端的CMD运行这个jar，会出现以下内容：\n\n\n\n\n\n9.jpg (45.55 KB, 下载次数: 2)\n\n下载附件\n\n2018-1-27 12:31 上传\n\n\n\n\n\n然后按照要求输入一个需要监听的端口（就和MC服务端的端口差不多），然后服务端开始运行：\n\n\n\n\n\n10.jpg (57.27 KB, 下载次数: 6)\n\n下载附件\n\n2018-1-27 12:31 上传\n\n\n\n\n\n接下来没啥好说的了，直接打开你的GUI，在里面也写入自己的服务端IP：\n\n\n\n\n\n11.jpg (60.44 KB, 下载次数: 10)\n\n下载附件\n\n2018-1-27 12:32 上传\n\n\n\n\n\n在插件代码里也是类似地修改你的代码：\n\n\n\n\n\n12.jpg (82.97 KB, 下载次数: 4)\n\n下载附件\n\n2018-1-27 12:32 上传\n\n\n\n\n\n恭喜，你现在已经拥有了一个属于自己的更新服务器！\n\n\n\n\n\n                                                             如果你有什么Server技术问题\n                                                          可以加入SpigotList：147375852\n                                                                               \n\n",
    "replies": [
        {
            "author": "沐子酱",
            "timestamp": 1517023260,
            "txt_content": "有人说这个插件和yum差不多的方向，但这和yum完全是两个方向"
        },
        {
            "author": "love12138",
            "timestamp": 1517024220,
            "txt_content": "是乐乐的插件吧，我感觉啊提不提好像没多大的后果。"
        },
        {
            "author": "沐子酱",
            "timestamp": 1517025180,
            "txt_content": "love12138 发表于 2018-1-27 11:37\n是乐乐的插件吧，我感觉啊提不提好像没多大的后果。\n怎么说。。。"
        },
        {
            "author": "晓兜",
            "timestamp": 1517030220,
            "txt_content": "散了，都是高端操作，看不懂"
        },
        {
            "author": "我叫东清寒",
            "timestamp": 1517062320,
            "txt_content": "我想说这好像不是属于插件类型的吧，你是不是放错帖了，如果真的不属于插件的话被查水表是要被罚的"
        },
        {
            "author": "沐子酱",
            "timestamp": 1517066100,
            "txt_content": "我叫东清寒 发表于 2018-1-27 22:12\n我想说这好像不是属于插件类型的吧，你是不是放错帖了，如果真的不属于插件的话被查水表是要被罚的 ...\n怎么个说法"
        },
        {
            "author": "沐子酱",
            "timestamp": 1517066100,
            "txt_content": "我叫东清寒 发表于 2018-1-27 22:12\n我想说这好像不是属于插件类型的吧，你是不是放错帖了，如果真的不属于插件的话被查水表是要被罚的 ...\n怎么个说法?"
        },
        {
            "author": "幻境雲達達",
            "timestamp": 1517098500,
            "txt_content": "我叫东清寒 发表于 2018-1-27 22:12\n我想说这好像不是属于插件类型的吧，你是不是放错帖了，如果真的不属于插件的话被查水表是要被罚的 ...\n可以这么看 \n\n前置插件是主体 软件只是个附属的东西 那这就是一个带有软件操作的插件 类似于Mypet\n\n也可以说是开发就这么个软件，然后附属一个小插件，那也可以说这是个软件\n\n所以个人觉得发在插件版可行而且合适"
        },
        {
            "author": "RainbowEna",
            "timestamp": 1517109960,
            "txt_content": "emmm，虽说你并没有写文字乐乐作者\n但是图片暴露出乐乐是作者了\n不过插件还是很好用的\n至少我以后写更新系统的时候会方便不少\n虽说我并不缺这个，还是支持一下吧"
        },
        {
            "author": "沐子酱",
            "timestamp": 1517242680,
            "txt_content": "RainbowEna 发表于 2018-1-28 11:26\nemmm，虽说你并没有写文字乐乐作者\n但是图片暴露出乐乐是作者了\n不过插件还是很好用的\n谢谢你的支持"
        },
        {
            "author": "沐子酱",
            "timestamp": 1553356380,
            "txt_content": "插件不算是很鸡肋 可以使用"
        },
        {
            "author": "1345936209",
            "timestamp": 1553440500,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "神~阿尔法",
            "timestamp": 1560171000,
            "txt_content": "感觉很有用，但是我都不咋的更新插件的"
        },
        {
            "author": "杨十七郎",
            "timestamp": 1560586200,
            "txt_content": "群呢\n被封了？\n"
        }
    ]
}