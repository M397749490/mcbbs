{
    "title": "玩家跑圖TPS降低",
    "author": "張23",
    "replyCount": 7,
    "timestamp": 1519536900,
    "txt_content": "玩家長距離移動時伺服器會很LAG TPS就只剩10",
    "replies": [
        {
            "author": "Salt_lovely",
            "timestamp": 1519536900,
            "txt_content": " 本帖最后由 Salt_lovely 于 2018-2-28 13:45 编辑 \n\n玩家长距离移动（以下简称跑图）是对伺服器综合性能的大测试，如果你的伺服器在玩家跑图的时候lag到TPS10的话，很可能是服务器本身性能不好或者是伺服器内玩家太多了。\n===============\n为什么会掉TPS？因为计算新的区块长什么样子需要占用CPU和RAM，储存新的区块要占用RAM和硬盘，而把已经计算好的区块从硬盘拿出来又需要占用硬盘和RAM，一来二去伺服器就跑不动了。\n===============\n怎么解决？\n\n第一个方法简单粗暴，设置世界边界，阻止玩家移动太远。需要伺服器版本1.8以上，同楼上的回答/worldborder set 世界边界距离，个人建议10000，玩家靠近10000坐标时会看见世界边界墙。/worldborder  <set(设置)|add(增加)|center(世界中心)>  <数值>\n1.7及以下版本需要世界边界插件\n\n第二个办法是更换伺服端，建议使用paperspigot或者spigot，优化好的伺服端可以保证高TPS。官方网站是外国网站，大陆地区网络环境不好不一定能正常连接。。。。具体网站GOOGLE一下。\n如果是spigot端，那么根目录会有spigot.yml；如果是paperspigot端，那么根目录会有paper.yml\n\n第三个办法是使用一些插件。比如\nlaggremover\nhttp://www.mcbbs.net/thread-603072-1-1.html\n去掉lag：/lr gc\nlaggremoverplus\nhttp://www.mcbbs.net/thread-715006-1-1.html\n去掉lag：/lrp gc\n**上面两个插件最好只要一个，因为功能是一样的\n**注意，使用laggremover的时候，一定要把配置文件里面的 单个区块的最大实体数量 thinAt 改成 至少 300\n在论坛里面 服务端插件板块有很多优化类型的插件，题主可以去找一些觉得适合的。\n\n最后还有一个办法是优化伺服端配置，BBS里面有一个帖子非常棒。\nhttp://www.mcbbs.net/thread-478126-1-1.html\n===============\n希望能够帮到题主。"
        },
        {
            "author": "_DIM_",
            "timestamp": 1519537080,
            "txt_content": "请告诉一下用的什么类型的服务端\n以及玩家的移动速度，服务器的配置如何\n还有是什么样的地图"
        },
        {
            "author": "larsan",
            "timestamp": 1519550280,
            "txt_content": "设置一下地图边界，/wordborder set 数值，一般设置到6000就够用了，这样玩家就不能无限跑图"
        },
        {
            "author": "張23",
            "timestamp": 1519638360,
            "txt_content": "larsan 发表于 2018-2-25 17:18\n设置一下地图边界，/wordborder set 数值，一般设置到6000就够用了，这样玩家就不能无限跑图 ...\n這是限制地圖大小的嗎?"
        },
        {
            "author": "larsan",
            "timestamp": 1519639080,
            "txt_content": "張23 发表于 2018-2-26 17:46\n這是限制地圖大小的嗎?\n是的，你输入/worldborder就会有语法提示"
        },
        {
            "author": "梦冰",
            "timestamp": 1519749000,
            "txt_content": "配置低。。。。 只能限制地图边界防止疯狂跑图了"
        },
        {
            "author": "ICEAC",
            "timestamp": 1519790880,
            "txt_content": " 本帖最后由 a2821258414 于 2018-2-28 12:10 编辑 \n\n简体中文回答：\n大部分服务器跑图都会影响CPU导致TPS骤降！我们需要做到的是在服务器里加入论坛里的世界边界插件，然后站在出生点输入/wb set <边界半径>，这个半径根据服务器来写，如果是生存世界不删档我推荐3000，然后你自己是OP的话先飞起来再输入/speed 10，吧自己的飞行速度调到10，然后自己跑图（服务器肯定会卡），吧整个边界内的世界跑完后，再开放玩家入服，就再也不会因为跑图而卡了！ — 前提是你不删档\n\n\n对应楼主繁体回答：\n大部分服務器跑圖都會影響CPU導致TPS驟降！我們需要做到的是在服務器裏加入論壇裏的世界边界插件，然後站在出生點輸入/wb set <邊界半徑>，這個半徑根據服務器來寫，如果是生存世界不刪檔我推薦3000，然後妳自己是OP的話先飛起來再輸入/speed 10，吧自己的飛行速度調到10，然後自己跑圖（服務器肯定會卡），吧整個邊界內的世界跑完後，再開放玩家入服，就再也不會因為跑圖而卡了！ — 前提是妳不刪檔\n"
        }
    ]
}