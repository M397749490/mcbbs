{
    "title": "1.5 自动售货机 （更新下载与版本4）",
    "author": "hwei",
    "replyCount": 24,
    "timestamp": 1361276280,
    "txt_content": " 本帖最后由 hwei 于 2013-3-15 00:23 编辑 \n\n这个教程将教你用原版红石制作 N:1 自动售货机。\n它可以方便改造成 N:M 任意比例售货机。\n\n1.5 正式版已经出了，那么现在把地图放出。下载地址是： https://www.box.com/s/eo7igczx3su40ecd0nbr\n里面包含三个设计：版本1.1（双投掷器计数），版本2.1（双漏斗计数，不稳定），版本4（多漏斗计数）\n\n我把基于双投掷器版本1改进了一下（记为版本 1.1 ），更稳定，体积更小。\n基于双漏斗的版本2和3 都无法稳定工作了，我还没找到解决方法，改进失败（记为版本2.1）。\n我又设计了个版本4，基于多漏斗计数，相当快速稳定，但是体积比较大。\n\n\n    版本 1.1\n（双投掷器） 版本 2.1\n（双漏斗） 版本 4\n（多漏斗） 防止从输入输出口的容器偷窃物品  &#10003; &#10003; &#10003; 过滤非法输入物品  &#10003; &#10003; &#10003; 放入N个货币物品则输出一个商品  &#10003; &#10003; &#10003; 货币计数要准确 &#10003;不准确 &#10003; 货币计数要快速 较快很快很快 电路体积要小8*8*38*6*4(8+N)*9*7 显示投币进度  &#10005; &#10005;&#10003; 商品库存不足时保护消费者不丢失货币  &#10005; &#10005;部分返还，\n但有(N-1)个会卡在售货机内部。 货币箱满时保护售货机不被塞爆  使用超大货币箱并在上货时记得清空 扩展到任意M个商品输出 &#10005; &#10005; &#10005;\n\n版本 1.1\n\n\n版本 2.1\n\n\n版本 4\n\n\n\n版本4 有点复杂，自己去下地图看吧。（我想偷懒不想一步一步解释了……）\n\n\n大致解释一下版本4原理：\n\n\n计数原理（蓝色电路部分）\n\n\n可以从图中看到，这里面有3条漏斗组成的条。\n\n首先玩家把物品放入图片左下角的洞中。\n浅蓝色部分是过滤器，过滤器会把物品输出到3条中最高的那条漏斗中。\n\n最高的那条漏斗是“输入物品传送带”，传送方向是从过滤器到“输出投掷器”。\n但是物品一般情况下是到不了“输出投掷器”就被它下面的漏斗给吸下去了。\n\n“输入物品传送带”正下方的那排漏斗是“计数漏斗”。\n每个“计数漏斗”里面只能容纳一个物品。\n一旦检测到里面有物品，“物品检测红石电路”就会立即让“计数漏斗”停止传送，既不吸“输入物品传送带”中的物品，也不把里面的物品输送到“保存物品传送带”。\n于是如果“计数漏斗”的数量有N个，那么这个售货机的交换比就是N:1。\n\n如果所有“计数漏斗”里面都有物品了，即从“输入物品传送带”上一共抓取了N个物品，那么活塞就会短暂收起，暂时断开“物品检测红石电路”。（所有活塞是一齐伸缩的。）\n“计数漏斗”并不是串起来的，而是每个漏斗的出口都朝向“保存物品传送带”。\n短暂的断开“物品检测红石电路”会导致“计数漏斗”开始传送，将其中的物品输送到“保存物品传送带”，同时从“输入物品传送带”吸物品下来。\n活塞的短暂的收起时，会发出输出物品信号，使一个货物弹射出。\n\n售货机会一直重复这两个过程：“计数漏斗”把物品从“输入物品传送带”上吸下来；每个“计数漏斗”都抓取到物品后就把物品输送到“保存物品传送带”，并输出一个货物。直到“输入物品传送带”空为止。\n\n\n输出进度原理（粉色电路部分）\n\n\n其实就是把每个“计数漏斗”中是否有物品的信号输出到萤石灯上。\n\n这个进度并不一定是从左到右按顺序增长的。\n但已投货币物品的数目一定是正确的。\n为什么会这样我也不清楚。\n\n找零原理（绿色、紫色电路部分）\n\n输出货物的装置分两个部分：\n“储物投掷器”用于储存货物；\n“发射投掷器”用于将货物或者找零发射出去，同时因为里面不保存货物可以防止玩家通过右键偷货物。\n\n一旦“储物投掷器”为空，那么“禁止计数电路”（绿色部分）就会激活。\n“计数漏斗”会强制性禁止传送。\n“输入物品传送带”的物品只能流到“发射投掷器”。\n“发射投掷器”有一个“投掷器时钟电路”（紫色部分），只要“发射投掷器”中有物品，就会不停的发射直到清空。\n于是多出来的货币就退出来了。\n\n但是，“禁止计数电路”工作速度不够快，总会有(N-1)个输入物品掉到“计数漏斗”后才起作用。\n所以，找零会少(N-1)个货币物品。\n不过店主补充货物之后，投币进度会继续显示出上次的进度，即已经投了(N-1)个货币物品。\n\n\n\n\n\n\n以下是测试版时的自动售货机设计，多半无法正常工作，仅供参考思路。\n\n前3个版本总结：\n\n    版本 1  版本 2  版本 3  防止从输入输出口的容器偷窃物品  &#10003; &#10003; &#10003; 过滤非法输入物品  &#10003; &#10003; &#10003; 放入N个货币物品则输出一个商品  &#10003; &#10003; &#10003; 货币计数要准确  投币速度慢时有问题 &#10003; &#10003; 货币计数要快速  基于双投掷器，较快 基于双漏斗，很快 电路体积要小 12*5*4 10*8*3 5*3*3 显示投币进度  &#10005; &#10005; &#10005; 商品库存不足时保护消费者不丢失货币  &#10005; &#10005; &#10005; 货币箱满时保护售货机不被塞爆  使用超大货币箱并在上货时记得清空 扩展到任意M个商品输出 &#10005; &#10005; &#10005;\n\n\n\n\n\n版本3\n\n版本3采用了双漏斗 + 粘性活塞来计数。比起版本2的普通活塞，粘性活塞会使物品计数机体积更小。\n于是产生了一个体积更小的商店设计。红石机关部分体积为 3 * 6 * 3（高度），如果去掉最下部分作为地板的方块以及最上部分的那个防止偷窃的漏斗。\n\n布线已经逐渐接近极限了。\n为了尽量减少干扰，承托红石粉末的方块全部使用萤石，承托中继器以及比较器的方块全部使用上半砖，\n只有起传导（或阻止传导）红石信号作用的方块才使用实体方块。\n\n\n\n\n\n\n\n\n\n\n\n版本2\n\n版本1采用的是双投掷器来计数。过滤器旁边的投掷器每投掷一个物品会产生一个脉冲信号，以此信号计数速度比较慢。\n而且有漏洞，慢慢投钱可以少投一个而获得商品。\n\n版本2采用的是双漏斗来计数。\n利用过滤器本身的通过信号来技术，它不是脉冲信号而是一个持续的时间信号，计数速度达到了漏斗传输物品的极限。\n这个设计考虑到了活塞运动时的间隔，在此间隔暂停计数来保证计数的正确性。\n\n\n点击展开看视频\n这个视频顺便做了个投币进度指示器 :)\n\nhttp://you.video.sina.com.cn/api/sinawebApi/outplayrefer.php/vid=97581987_1301837827_ZhqyHXNuDTPK+l1lHz2stqkP7KQNt6nkimq1s1GjLQxeQ0/XM5GQZdgP4SDeB9kEqDhATZ86ff8v3xo/s.swf\n\n\n教程\nStep 1\n\nStep 2\n\nStep 3\n\nStep 4\n\nStep 5\n\n\n\n\n\n版本1 \n\n第一步搭建提示：\n只有一个中继器，其它全是比较器中继器刻度为0中继器右边的那个比较器是减法状态左边的两个投掷器是互相面向对方的右边的漏斗目标是它旁边的投掷器右边的漏斗的五个格子中分别放置18,1,1,1,1 个货币物品（比如绿宝石），以构成过滤器\n\n\n\n\n第二步搭建提示：\n在左下角的投掷器中放 N-1 个任意物品（比如3个石块，那么交换比就是4:1）连接活塞的线路在地下是为了防止信号干扰，这两个坑道的长度都为3\n\n\n\n\n\n\n第三步搭建提示：\n左边两个红石信号的或运算结果，是出货信号右边投掷器出口的箱子是用于收集货币的过滤器漏斗上方再放一个漏斗，是为了防止顾客偷取过滤器中的货币\n\n\n\n\n继续完善的提示：\n商店外壳请自行设计出货口可能需要增加一层投掷器以防止顾客偷取货物最好增加一个商品不足的指示灯，否则你可能会遭到顾客投诉改造成 N:M 的交换比很容易，用出货信号同时控制M个商品投掷器即可实际使用时需要用 探险模式 或 建筑保护 来防止被破坏（多人服务器中的普通玩家可以活用锁木牌功能来实现建筑保护）\n\n\n\n\n期待1.5 版本的到来吧！到那时候，服主就再也不能阻止你到处开店了！\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "Danny仔",
            "timestamp": 1361276520,
            "txt_content": "對我來說真的好容易\n\n\n\n\n\n\n\n\n\n不對，是「容易」"
        },
        {
            "author": "断了的弦513",
            "timestamp": 1361276700,
            "txt_content": "我不知道那个“中续器”有什么用"
        },
        {
            "author": "guesss",
            "timestamp": 1361277060,
            "txt_content": "没看懂。。。。。我真的没看懂"
        },
        {
            "author": "hwei",
            "timestamp": 1361277300,
            "txt_content": "断了的弦513 发表于 2013-2-19 20:25 \n我不知道那个“中续器”有什么用\n用于放大信号。\n右边的比较器用于检测投掷器中是否有物品，其输出信号非常微弱，传播距离只有一格。"
        },
        {
            "author": "hwei",
            "timestamp": 1361277360,
            "txt_content": "guesss 发表于 2013-2-19 20:31 \n没看懂。。。。。我真的没看懂\n不用看懂。会搭不就行了？"
        },
        {
            "author": "风吹奶罩香",
            "timestamp": 1361326320,
            "txt_content": "给个视频 感谢、、、、"
        },
        {
            "author": "断了的弦513",
            "timestamp": 1361328480,
            "txt_content": "hwei 发表于 2013-2-19 20:35 \n用于放大信号。\n右边的比较器用于检测投掷器中是否有物品，其输出信号非常微弱，传播距离只有一格。\n我是说…………我木有玩过这个版本  "
        },
        {
            "author": "hwei",
            "timestamp": 1361355900,
            "txt_content": "风吹奶罩香 发表于 2013-2-20 10:12 \n给个视频 感谢、、、、\n有视频了。并且更新到第二个版本的设计。"
        },
        {
            "author": "lloocck",
            "timestamp": 1361524320,
            "txt_content": "那两个活塞是粘性活塞吗？"
        },
        {
            "author": "hwei",
            "timestamp": 1361626200,
            "txt_content": "lloocck 发表于 2013-2-22 17:12 \n那两个活塞是粘性活塞吗？\n不是。版本1和版本2用的都是非粘性活塞。\n\n\n不过接下来的版本3会使用一个粘性活塞的计数器，它的体积更小。等一段时间后更新。"
        },
        {
            "author": "jianghr",
            "timestamp": 1361645520,
            "txt_content": " 本帖最后由 jianghr 于 2013-3-18 22:10 编辑 \n\n解说一下。\n\n设计1的结构很好理解，单纯脑补就可以清楚。感觉双投掷器翻转的基本结构有点像T触发器，不过添加了计数的功能。这个应该可以在其它方面广泛应用，尤其是这个计数量可以做得非常多。\n\n设计2的结构横竖没脑补明白，在12w07b里也复制了下半天也未能正常工作。最后发现要调整脉冲发生器里面中继器档位为4才行{:10_499:}（你图是对的，我开始就没明白那里为啥要这样建，果然是信号强度一关注就忘了时序了{:10_493:}）。\n然后琢磨了下原理，原来是用漏斗传递的速度相同特点，然后通过计时的原理来统计投入/放入物品的个数的{:10_499:}，不得不说这个设计实在是太碉堡了，居然直接放弃计数器来用计时器同步，这实在是太模拟了，一直玩数电的难怪脑补不出来。\n我经过N次测试后终于明白为何要把双漏斗上面那根线接到脉冲发生器上面的那条线上，主要是为了在双漏斗输出翻转过程中停止筛选漏斗输出物品的动作，不然会出现计数偏差，明白了这一点后我对这台装置的精确性算是放心了{:10_512:}\n=======\n总体说来做的很精良。我给你多加贡献。其它的一些小收获。\n--------\n我在里面倒是头回知道比较器可以检测隔墙的箱子。{:10_493:}\n--------\n然后利用比较器A状态下对已激活发射器/投掷器的更新来持续发射物品也学习到了{:10_512:}，不过13w05b测试时失败的，更新13w07a才行。【不过在13w09c和1.5正式版测试失败】{:10_493:}\n========\n最后，建议你把设计2的imgur的链接放得大一些或者直接全贴过来，不然有的人不知道过去看。还有这个不带存档真的有的人玩不明白，建议带一下，解说这么详细绝对没问题的。\n当然，如果你不介意的话我可以帮你编辑帖子。"
        },
        {
            "author": "hwei",
            "timestamp": 1361683320,
            "txt_content": "jianghr 发表于 2013-2-24 02:52 \n解说一下。\n\n设计1的结构很好理解，单纯脑补就可以清楚。感觉双投掷器翻转的基本结构有点像T触发器，不过 ...\n感谢你这么仔细的看帖回帖！{:10_509:}\n\n\n因为还未达到最终设计目标，而且minecraft版本还是测试版、红石特性未定，所以暂不整理存档放出下载。\n等过一段时间1.5 正式版出了之后再放存档也不迟啊。\n\n最近有新的改进设计还会更新的。{:10_492:}"
        },
        {
            "author": "jianghr",
            "timestamp": 1361811180,
            "txt_content": " 本帖最后由 jianghr 于 2013-2-26 00:55 编辑 \n\n楼主我又摸回来看更新了。现在有了构型2的基础就可以脑补了。\n设计三的构造果然是相当高压，上方的不对称构造这空间利用度没说的。图片上加的框框和说明也让其相当易懂。\nStep1中的双漏斗结构我之前也在这个帖子中尝试过一种RS的设计，现在看还是你的更加简练一些。（http://www.mcbbs.net/thread-80965-1-1.html  此贴7楼，该贴楼主我也喊过来看看你这种构型）\nStep3里面看来居然是用红石块移动时不释放能量的机制做的。目测输出脉冲可能只有1tick。\n不过呢，对应于设计2中的我红字分析的双漏斗翻转时关闭筛选漏斗输出的电路目测没有（整机基本原理仍然是计时型的），那么计币准确性怎样保持？（如果有的话我想应该放在Step4那张图里萤石电路与漏斗红石线上方相交的地方，但我怎么看信号都不能回传回去）\n\n前面的特性表格好犀利的样子！\n\n综上，此乃难得一见的好帖，予以加精。{:10_512:}希望1.5发布后有存档放出。"
        },
        {
            "author": "PTmissionary",
            "timestamp": 1361850720,
            "txt_content": "被喊来学习了。\n果然有收获啊。"
        },
        {
            "author": "hwei",
            "timestamp": 1361859360,
            "txt_content": " 本帖最后由 hwei 于 2013-2-26 14:35 编辑 \njianghr 发表于 2013-2-26 00:53 \n楼主我又摸回来看更新了。现在有了构型2的基础就可以脑补了。\n设计三的构造果然是相当高压，上方的 ...\n这个双漏斗计数器方向转换时延迟比较小。我测试时发现转换时不关闭漏斗也能计数正确。\n以后发现不稳定的话再改吧。\n\n我很多设计技巧其实是参考老外的。各种好设计都放到一起。"
        },
        {
            "author": "hwei",
            "timestamp": 1361860140,
            "txt_content": " 本帖最后由 hwei 于 2013-2-26 14:29 编辑 \nPTmissionary 发表于 2013-2-26 11:52 \n被喊来学习了。\n果然有收获啊。\n我看到你做的三角波发生器了。\n你可能需要一个解码漏斗或投掷器中木铲数量到模拟信号的装置。\n或者换个说法：让漏斗输出0~5的信号强度，投掷器输出0~9的信号强度。\n我过一段时间放上那个设计到另一帖。\n"
        },
        {
            "author": "PTmissionary",
            "timestamp": 1361875320,
            "txt_content": "hwei 发表于 2013-2-26 14:29 \n我看到你做的三角波发生器了。\n你可能需要一个解码漏斗或投掷器中木铲数量到模拟信号的装置。\n或者换个 ...\n嗯，这样原来想不出用处的装置似乎就有用了。"
        },
        {
            "author": "hwei",
            "timestamp": 1363278420,
            "txt_content": "更新，自顶。"
        },
        {
            "author": "jianghr",
            "timestamp": 1363282560,
            "txt_content": "hwei 发表于 2013-3-15 00:27 \n更新，自顶。\n先标记下，有空仔细看，版本2、3是基于计时方式的，估计正式版时序又有微调。"
        },
        {
            "author": "NB人士",
            "timestamp": 1363313520,
            "txt_content": "LOL\n看起来还不错。。。"
        },
        {
            "author": "Yihc",
            "timestamp": 1363912200,
            "txt_content": "不会1.5啊= =好复杂"
        },
        {
            "author": "xia_long",
            "timestamp": 1583983800,
            "txt_content": "图片加载不出来  完全看不到"
        },
        {
            "author": "lesiwo",
            "timestamp": 1584011280,
            "txt_content": "红石真牛"
        },
        {
            "author": "星凌羽槑",
            "timestamp": 1584060780,
            "txt_content": "我的天这是我见过最高端的自动售货机了·-·之前做的突然感觉好低端"
        }
    ]
}