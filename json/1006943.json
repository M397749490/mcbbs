{
    "title": "[安全|管理]琉璃之光注册系统注册码发放机——全自动向用户发送验证邮件[1.13.2]",
    "author": "艾尼维亚",
    "replyCount": 5,
    "timestamp": 1585886040,
    "txt_content": " 本帖最后由 艾尼维亚 于 2020-7-13 18:37 编辑 \n\n大家好，还是在下哈哈\n\n\n之前的插件在这里https://www.mcbbs.net/thread-1003868-1-1.html\n\n原本说了想先做商城系统的，但是目前昨天做了一半突然不感兴趣了，那就先来做这个注册码发放机吧（没有吧）\n\n你可以选择不用前置插件，我设计了单独的生成机给各位手工发放\n\n\n\n\n\n\nQQ截图20200403091457.png (57.3 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 10:23 上传\n\n\n\n\n\n插件效果图\n\n\n目前插件可以自定义的内容有：\n邮件标题，邮件模板，注册码字典，注册码大小\n\n\n如果说之前的插件是反大厂而行之，那这个插件就是尽量的在还原大厂们的实现方案了，我在设计时也尽量考虑到了多线程并发提高性能，防止被人破解用于邮件轰炸等\n\n\n为了防止同一个邮件注册多个账户，目前服务端会记录每个玩家的注册邮件信息，但目前找回账户中只会验证个人识别码和用户名或者密码，如果你想加入邮件甚至取代个人识别码请自行重写客户端，毕竟是开源项目嘛\n\n\n所有的生成器都已经默认拉黑admincode！包括独立的生成器！\n\n\n使用：\n\n\n下载：\n\n感谢大家的支持！本插件内测已结束，（性能upup的）正式版本已经接近完工，感兴趣的小伙伴可以私信我体验哦\n\n\n\n\n\n单独的生成器：\n直接下载RademManager\n生成器默认只有适用于Windows的版本，由于是Java设计的，因此理论上全系统适配，Linux请下载JDK14 for LInux\n双击run.bat即可运行\n如果您采用了前置插件，无需进行这一步，如果您不采用前置插件，这里就是最后一步了(/▽＼)\n\n\n获取自己的授权码：\n以QQ邮箱为例（目前只支持这个)：\n\n\n\n\nQQ截图20200403113825.png (82.86 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 11:40 上传\n\n\n\n\n\n点击这里\n\n\n\n\n\nQQ截图20200403114015.png (52.64 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 11:41 上传\n\n\n\n\n\n如图所示即可获得授权码\n\n这个服务端我设计时是用于大型服务器的，当然，任何腐竹都可以使用，但！\n我在测试时就遭遇了QQ邮箱的保护系统拉黑\n\n\n\n\nQQ图片20200403114612.png (275.64 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 11:46 上传\n\n\n\n\n\n如图，即使我使用小号测试依然无法继续，最后确认了确实和他们的帮助页面（https://service.mail.qq.com/cgi-bin/help?id=20022）说的一致，由于发件量过大导致了IP被拉黑。\n\n\n无论这是因为防止邮箱轰炸还是逼我们使用企业邮箱，这都意味着如果您的用户数量比较多，那么您可能就需要考虑注册自己的域名甚至自行设计邮件系统（但本注册码发放系统仅支持QQ邮箱，如果需要您可以自行重写服务端或者向开发者（正是在下）求助）\n\n\n配置服务端：\n\n注意！下载主服务器请下载本贴内链接的服务端！否则没有发送邮件的功能！\n请按照前置插件的方案配置主服务器https://www.mcbbs.net/thread-1003868-1-1.html\n\n配置完密钥之后我们还有三个文件需要配置\n\n\n\n\nQQ截图20200403103139.png (2.52 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 10:32 上传\n\n\n\n\n\n第一个是注册码字典，所有的注册码都会从里面随机抽出来\n\n\n我为大家内置了一些字段：ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+{}?><\n\n\n字典通常不用修改，但你也可以添加你自己想要的字符进去,但请注意！所有需要通信的数据全部不支持中文！因为ECC的限制以及通信效率的考量，目前还没有支持中文加解密，如果数据传输时遇到中文，全都会导致乱码，请务必注意！\n\n\n服务端默认拉黑字典中的|（回车键左边第一个，\\上方）符号！因为没有使用Json，我只能通过其他方案分割数据，目前服务器不兼容该符号的使用！\n即使您手动加进去，服务端遍历字典时也会自动排除该符号\n\n\n客户端默认只允许字母和数字，您可以将    “编辑框名称（如nameBox）_TextChanged” 这个函数中的代码全部删除，这样就可以输入所有字符了，但如果玩家输入中文或者|，就会导致乱码以及名称不全等问题\n（编辑框名称在属性窗口的（name）可以看到）\n\n\n第二个是邮件模板，你可以自定义属于自己的邮件内容\n\n\n\n\nQQ截图20200403104018.png (27.31 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 10:40 上传\n\n\n\n\n\n请注意！邮件的格式信息和文本文档的编码格式信息完全不同！\n但服务端在启动时会默认将模板转换为邮件的编码格式，所以您在设计模板时不需要考虑Html编码，只需要按照我们通常的格式就可以了（注意右下角，一定要保存为UTF-8文本编码，否则中文乱码不解释，如果不是UTF-8，就点文件，另存为，在保存框内选择编码格式为UTF-8）\n\n\n模板的写法看示例模板应该都看出来了（示例模板的效果就是开头展示的邮件）\n\n\n模板中的变量：在模板中的下列字符将自动转为对应的内容\n&名称&：自动转换为玩家的用户名\n&注册码&：服务器自动生成的注册码\n####&时^间&####：服务器发送邮件的时间\n\n\n请注意！由于邮件编码格式与文本文档编码格式完全不同，我在设计服务器的模板转换器时尽量的还原了模板的排版，但是仍然会有一定的差距，请自行测试！\n\n\n在服务端窗口输入命令：\nsendcode (PlayerName) (Mail address)例：sendcode admin 123456@qq.com\n该命令可以无需等待的快速发送邮件，但更改模板后需要重启服务器\n\n第三个是邮件服务器配置信息：\n配置信息按照固定格式编写，目前的实现都比较简单，所有我都没有使用Json\n您的邮件地址\n您的特征码\n注册码大小\n\n注册邮件的标题\n\n\n\n\n例如\n\n\n\n\n\n-628e439b7c54a96c.jpg (10.1 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-16 15:21 上传\n\n\n\n\n\n到此您就完成了所有服务端的配置工作\n\n\n\n配置MySQL：\n\n第一次使用本插件推荐使用快速配置方案\n首先，按照前置插件的配置方案配置\n\n\n\n\nQQ截图20200403151858.png (4.99 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 15:19 上传\n\n\n\n\n\n将鼠标放到表上会弹出三个按钮，点击小扳手以修改表结构。\n\n\n\n\n\n\n\n\nQQ截图20200403111013.png (8.25 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 11:10 上传\n\n\n\n\n\n将account表修改为如上格式\n\n\n\n\nQQ截图20200403111052.png (5.5 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 11:11 上传\n\n\n\n\n\n然后，将actcode表改为如上格式\n即可完成配置\n\n\n\n快速配置MySQL：\n\n首先，按照前置插件的快速配置方案配置\n只需要把下载的那一步改为下载本贴链接中的MySQLTemplate.rar即可，否则将导致服务器报错无法注册\n\n\n已经配置好服务器的腐竹不要使用快速配置方案，否则可能导致数据丢失\n\n\n客户端配置：\n\n与前置插件客户端无异，但这个版本的窗口多了一个注册码申请窗口。\n\n\n请按照前置插件的客户端配置方案配置，但在下载时下载本帖的客户端源码\n\n\n修改密钥，地址，端口号后，双击Form4.cs,双击空白部分进入代码编辑器，在开头位置就是偏移量\n\n\n\n\nfile_1585884091000.jpg (107.26 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 11:21 上传\n\n\n\n\n\n这一步不是必须的，是为了防止破解而已，您可以不配置\n修改获取下一封邮件的间隔时间：\n在这一页代码的最后，有banbutton和ShowTime两个函数，前者控制实际按钮的禁用时间，只能以分钟计，后者控制显示给用户的禁用时间，显示为秒，但他倒计时结束并不会触发\n\n\n\n\nQQ截图20200403213934.png (265.48 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 21:41 上传\n\n\n\n\n\n\n\n\n\nQQ截图20200403214007.png (267.59 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 21:41 上传\n\n\n\n\n\n\n\n\n\n在确认服务端，MySQL，客户端都配置完成后，即可开始测试\n\n界面展示：\n\n由于有人问圆角的窗口怎么实现所以我又额外做了一个主界面圆角的版本，因为主界面和注册界面是我自己画的，所以很方便实现，另外两个窗口是插件自动生成的，相对比较难，如果有需要的话就把注册界面按照主界面的方案自己画成圆角（我个人还是觉得注册界面直角好看点）\n\n\n\n\nQQ截图20200403213434.png (22.45 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 21:36 上传\n\n\n\n\n\n主界面\n\n\n\n\n\nQQ截图20200403213448.png (6.91 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 21:36 上传\n\n\n\n\n\n注册码获取界面\n\n\n\n\n\nQQ截图20200403213625.png (7.96 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-3 21:37 上传\n\n\n\n\n\n等待界面\n\n20200405更新：本来没想做JSON的T T，但是一个星期没玩游戏的我昨天突然想玩却又没法玩，没办法闲的蛋疼只能来做了\n\n\n服务端与客户端更新了交互方式，现在，服务端与客户端之间将使用JSON来进行交互。\n使用方式：按上面的方案配置好服务端后下载JSON补丁，解压后覆盖进服务端即可。\n客户端则下载loginCilent_源码_圆角_JSON.rar，按照上面的方式重新修改即可直接使用。\n\n\n更新完JSON客户端后默认允许玩家输入所有字符！只有中文除外。由于ECC加密系统没有适配中文，加上mc的服务端对中文本来支持也不好，所以中文的输入现在仍然不被允许,如果有需求也可以跟我说，我有时间的话适配一下新的ECC加密器就可以了\n\n\n\n\n\n欢迎大家留言讨论，或者向我提供一些意见和建议，嘤嘤嘤\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "Mr伊南",
            "timestamp": 1585890120,
            "txt_content": "收藏收藏收藏   感觉肯定有用"
        },
        {
            "author": "godwangqi",
            "timestamp": 1585891200,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "1191854019",
            "timestamp": 1594620420,
            "txt_content": "MySQL配置是必须的嘛"
        },
        {
            "author": "艾尼维亚",
            "timestamp": 1594636620,
            "txt_content": "1191854019 发表于 2020-7-13 14:07\nMySQL配置是必须的嘛\n是的，因为我立项的时候就考虑给大型服务器的，玩家多的话不用数据库可能比较拉跨"
        },
        {
            "author": "乐碧",
            "timestamp": 1611230700,
            "txt_content": "很好的插件啊"
        }
    ]
}