{
    "title": "[已解决] 关于配置问题",
    "author": "a2354668685",
    "replyCount": 2,
    "timestamp": 1569310980,
    "txt_content": " 本帖最后由 a2354668685 于 2019-10-3 19:30 编辑 \n请问各位大佬如何继续创建 join 下面的 xx xxx\n不是继续在代码下面判断，直接配置里面创建\n\n代码\n  public void onPlayerJoinEvent (final PlayerJoinEvent e) {\n      Player p = e.getPlayer();\n      if (p.hasPermission(getConfig().getString(\"join.mm.Permission\"))) {\n          p.sendMessage(getConfig().getString(\"join.mm.Message\"));\n\n配置\njoin:\n  mm:\n    Permission: \"xxxx.admin\"\n    Message: \"xxxxxx\"\n  xx:\n    ermission: \"xxxx.admin\"\n    Message: \"xxxxxx\"\n  xxx:\n    ermission: \"xxxx.admin\"\n    Message: \"xxxxxx\"\n\n复制代码",
    "replies": [
        {
            "author": "棒棒糖lol",
            "timestamp": 1569327300,
            "txt_content": "getConfig().set(\"join.xx\",\"内容\");复制代码"
        },
        {
            "author": "Karlatemp",
            "timestamp": 1569332460,
            "txt_content": " 本帖最后由 99ww 于 2019-9-24 21:47 编辑 \n\n\n\n/*\n * Copyright (c) 2018-2019 Karlatemp. All rights reserved.\n * Reserved.FileName: Booter.java@author: karlatemp@vip.qq.com: 19-9-24 下午9:23@version: 2.0\n */\n\npackage cn.mcres.karlatemp.mxlib.test;\n\nimport org.bukkit.configuration.ConfigurationSection;\nimport org.bukkit.configuration.file.YamlConfiguration;\nimport org.bukkit.entity.Player;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\npublic class Booter {\n    public static final List<Perm> perms = new ArrayList<>(); // 定义全部需要检测的列表\n\n    public static final class Perm { //定义一个容器\n        public String perm;\n        public String msg;\n\n        public Perm() {\n            this(null, null);\n        }\n\n        public Perm(String perm, String msg) {\n            this.perm = perm;\n            this.msg = msg;\n        }\n    }\n\n    public static final Logger logger = Logger.getGlobal(); // 这是日志系统\n\n    public static void main(String[] args) {\n        logger.setLevel(Level.ALL);\n        reloadConfig();// 加载配置内容\n        send(null); // 发送信息\n    }\n\n    public static void send(Player player) { // 运行监测程序\n        for (Perm p : perms) { // 使用缓存的数据加快运行效率\n            if (player.hasPermission(p.perm))\n                player.sendMessage(p.msg);\n        }\n    }\n\n    public static void reloadConfig() { // 重载/加载配置内容\n        perms.clear(); // 清理缓存\n        final ConfigurationSection config = new YamlConfiguration(); // 换成 getConfig\n\n        final ConfigurationSection join = config.getConfigurationSection(\"join\"); // 获取join节点\n        if (join == null) { // 配置没有此节点\n            logger.warning(\"Warming: No \\\"join\\\" in config.yml\");\n            return; // 中断\n        }\n        for (String k : join.getKeys(false)) {// 循环遍历 join 节点的全部子节点\n            logger.fine(\"[DEBUG] 正在遍历的子节点为 [\" + k + ']'); //Debug信息\n            final Object value = join.get(k); // 取子节点的值\n            if (!(value instanceof ConfigurationSection)) { // 如果不是树\n                // join.get(k); 取原始值\n                logger.warning(\"在 config.yml/join.\" + k + \" 中含有错误的配置格式: \" + value);\n                continue; // 开始下一轮循环\n            }\n            final ConfigurationSection section = (ConfigurationSection) value;// 上面已经判断了。直接强转\n            // 取得 join[k].permission 和 join[k].message 的值\n            String perm = section.getString(\"Permission\", null);\n            String mess = section.getString(\"Message\", null);\n            if (perm == null) {\n                logger.warning(\"在 config.yml/join.\" + k + \" 中含有错误的配置格式: 缺少 \\\"Permission\\\"\");\n                continue;\n            }\n            if (mess == null) {\n                logger.warning(\"在 config.yml/join.\" + k + \" 中含有错误的配置格式: 缺少 \\\"Message\\\"\");\n                continue;\n            }\n            perms.add(new Perm(perm, mess));// 使用List缓存加快执行速度\n        }\n    }\n}\n\n\n记得给好评"
        }
    ]
}