{
    "title": "ChsetCommand箱子菜单cb版",
    "author": "Huge_Black",
    "replyCount": 16,
    "timestamp": 1492837020,
    "txt_content": " 本帖最后由 wkqi 于 2017-4-22 23:12 编辑 \n前言：玩过服务器或者有经验的腐竹应该都知道这款插件\n\n\n\n\n2016-06-20_21.22.26.png (184.81 KB, 下载次数: 0)\n\n下载附件\n\n2017-4-22 13:55 上传\n\n\n\n\n\n↑某服务器的菜单\n这个插件十分好用，玩家可以点击其中的物品，然后执行命令\n然后我今天教的是如何用cb实现这个功能\n注意：由于mc的限制，不能让玩家远程打开箱子\n先来看看效果\n\n\n思路：\n先讲下思路：整个系统的大致流程是：检测玩家点击物品->强制关闭GUI->执行指令->重置菜单\n到这里看上去结束了但是还有一个问题会影响整体效果\n就是在强制关闭物品栏之前，玩家鼠标还拿着功能物品（下面简称按钮）\n关闭后会跳出来，十分不美观，而且还可以刷物品\n\n于是就需要在按钮跳出来之后删除（kill）掉他们\n于是思路就变成：\n检测玩家点击物品->强制关闭GUI->执行指令->删除掉出来的按钮->重置菜单\n\n然后是教程：\n先是菜单部分\n\n首先做这样一个平台上面放上陷阱箱,下面隔一个方块放上红石线\n左边放上一个cb，内容是\n/blockdata <x> <y> <z> {Lock:\"随便填\"}复制代码这个cb的用处是在第一个玩家打开箱子后锁住箱子，以免造成混乱\n右边一个火把反转信号，连到另为一个cb上，另外一个cb指令是复制你设置好的菜单到菜单箱子\n然后就是检测+执行部分\n\n↑差不多长这样先看底下的检测部分：\n\n下面的循环cb里面放上这个命令：\n/testforblock <x> <y> <z>（都是你的箱子的坐标） minecraft:trapped_chest <箱子朝向> {Items:[{Slot:<你放东西的格子>b}]}复制代码解释一下这条命令（cb大佬可以直接无视）：\n————————————\n/testforblock就是检测方块数据\nxyz不用说了吧\n箱子朝向可以用testforblock慢慢试，在2-5的范围内\nNbt中，{Slot:<你放东西的格子>b}是用来检测那个格子是否有物品\n上面的比较器和火把是用来反转信号的\n所以这个模块的用处就是检测到你所指定格子中没有东西（既东西被玩家拿起）就发出信号（2tick延迟）\n————————————\n然后是执行部分：\n2号cb的内容和之前的用来复制的cb的指令是一样（用/clone），也起到了强制用户关闭箱子GUI的效果\n3号cb是用来放你想执行的指令（可以无限延长）\n\n\n然后也是一个比较重要的部分\n事后处理部分：\n这个部分是用来删除掉出来的按钮的，长这样↓\n\n\n原理就是删除（kill）掉掉出来的按钮的\n循环cb的用处就是给有跳出来的物品实体加上kill标签↓\n\n指令是\n/scoreboard players tag @e[type=item] add kill(可以自定义) {Item:{tag:{isccitem(随便填，但是下面要一致):1b}}}复制代码\n最后在旁边的cb中放上/kill @e[tag=kill]复制代码这条指令的意思是杀死所有有kill（必须和上面一致）的tag的实体\n当然我们还要再考虑一个情况：如果玩家用SHIFT取走物品而不是用鼠标时\n上面的1号cb就是用来干这个事情的\n指令：\n/clear @a minecraft:<你的按钮id> <附加值> <数量> <span style=\"color: rgb(51, 51, 51); line-height: 1.5;\">{isccitem(和上面一致):1b}</span>复制代码于是在玩家背包里的也会被清除掉\n另附：如何让物品有{isccitem:1b}这个标签\n非常简单，用一条指令就行了\n/give @p <按钮的id> <附加值> <数量> {isccitem:1b,其他标签...}复制代码然后放到哪个用来复制的箱子就行了\n\n\n\n\n于是ChestCommand的教程就结束了\n\n感谢某空岛服给我的灵感\n感谢大家对我的指导\n什么？你还不会？地图->█给你自己去研究吧\n\n\n\n另：给别人人气自己是不会扣的\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "pca006132",
            "timestamp": 1492857000,
            "txt_content": "其实是可以用conditional的...完全没必要用比较器，而且还能避免误杀。\n只要你把箱子里的物品都加上一个特殊的tag，比如chestmenu:1b。然后那个rcb高频kill {Item:{tag:{chestmenu:1b}}}的物品就好。\nconditional的相反你可以透过testforblock SuccessCount:0或者是修改auto做到\nhttps://pca006132.neocities.org/ ... al_operation.html#7"
        },
        {
            "author": "pineapple_",
            "timestamp": 1492869420,
            "txt_content": "问一下，gui怎么关的"
        },
        {
            "author": "Huge_Black",
            "timestamp": 1492869540,
            "txt_content": "pineapple_ 发表于 2017-4-22 21:57\n问一下，gui怎么关的\n在克隆箱子时会强制关闭GUI"
        },
        {
            "author": "Huge_Black",
            "timestamp": 1492869720,
            "txt_content": "pca006132 发表于 2017-4-22 18:30\n其实是可以用conditional的...完全没必要用比较器，而且还能避免误杀。\n只要你把箱子里的物品都加上一个特 ...\n感谢提供意见\n可是经实测箱子里的东西在关闭箱子一段时间后才会掉出来\n加特殊nbt的方法我倒是没有想到，谢谢你的建议"
        },
        {
            "author": "pca006132",
            "timestamp": 1492870200,
            "txt_content": "wkqi 发表于 2017-4-22 22:02\n感谢提供意见\n可是经实测箱子里的东西在关闭箱子一段时间后才会掉出来\n加特殊nbt的方法我倒是没有想到， ...\n高频kill管他延时多少一出来就kill了..."
        },
        {
            "author": "Huge_Black",
            "timestamp": 1492918440,
            "txt_content": "pca006132 发表于 2017-4-22 22:10\n高频kill管他延时多少一出来就kill了...\n好像是这样的，已更新"
        },
        {
            "author": "Ze阳",
            "timestamp": 1493125680,
            "txt_content": "玩家不可以直接把物品直接shift+左键放背包里嘛？"
        },
        {
            "author": "Ze阳",
            "timestamp": 1493125740,
            "txt_content": "Ze阳 发表于 2017-4-25 21:08\n玩家不可以直接把物品直接shift+左键放背包里嘛？\n好吧我瞎了没看见最后的clear"
        },
        {
            "author": "aa1122a33",
            "timestamp": 1493128020,
            "txt_content": "侦测玩家手持物品》在玩家面前召唤隐形矿车箱子\n这个办法似乎可以实现可携带的箱子菜单"
        },
        {
            "author": "Huge_Black",
            "timestamp": 1493130600,
            "txt_content": "aa1122a33 发表于 2017-4-25 21:47\n侦测玩家手持物品》在玩家面前召唤隐形矿车箱子\n这个办法似乎可以实现可携带的箱子菜单 ...\n可是这样要穷举玩家的朝向，否则有可能打不开"
        },
        {
            "author": "xq23455",
            "timestamp": 1493539680,
            "txt_content": "哟，贴吧1316645268前来助阵，如果我的建议有帮忙的话真好? ?"
        },
        {
            "author": "命令方块mmp",
            "timestamp": 1543240920,
            "txt_content": "大佬666666"
        },
        {
            "author": "aizhi_D",
            "timestamp": 1543376400,
            "txt_content": "大部分图片全挂"
        },
        {
            "author": "QWQQWQTAT",
            "timestamp": 1544712780,
            "txt_content": "这个和服务器插件有什么区别呀？"
        },
        {
            "author": "洁白布衣",
            "timestamp": 1550549700,
            "txt_content": "虽然不是很需要，但还是学到了，可以可以"
        },
        {
            "author": "2330848276",
            "timestamp": 1551105900,
            "txt_content": "有点意思，试试下"
        }
    ]
}