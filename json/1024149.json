{
    "title": "[已解决]Spigot如何获取与编辑物品NBT",
    "author": "Delamer",
    "replyCount": 6,
    "timestamp": 1587366300,
    "txt_content": " 本帖最后由 Delamer 于 2020-4-20 19:56 编辑 \n\n版本：Spigot-1.15.2\n使用插件在后台生成道具的同时，如何获取与编辑物品的nbt信息呢？\n\n例：\n\nInventory inv = Bukkit.createInventory(null, InventoryType.CHEST, \"箱子\");\n\nItemStack glass = new ItemStack(Material.GLASS_PANE);\nItemMeta  glassIM = glass.getItemMeta();\nglassIM.setDisplayName(\"Name\");\nglassIM.setLore(Collections.singletonList(\"Lore\"));\nglass.setItemMeta(glassIM);\n\ninv.setItem(0,glass);\n复制代码\n\n使用上述代码，我生成了一个名字为\"Name\"，描述为\"Lore\"的玻璃板并置入容器中，\"Name\"与\"Lore\"的信息都是可以重新使用\"glass.getItemMeta().getDisplayName()\"与\"glass.getItemMeta().getLore()\"取出或重新使用set进行编辑的，但是我不知如何对其它的信息进行更多的操作，如设置tag、攻击伤害、附魔、耐久等等。\n请问Spigot有提供编辑物品NBT信息的方法吗？\n假设我想在道具内部存储一些字符串信息，在满足监听器设置的条件时，该字符串能够随时被取出，除了控制NBT和读写Lore(避免可视)以外有没有什么其他方法能够实现？\n",
    "replies": [
        {
            "author": "天辉胡萝卜",
            "timestamp": 1587366840,
            "txt_content": "编辑nbt需要用到nms\n\n举个例子，我想编辑某物品的nbt\n物品：ItemStack shield\n\n先创建nbt对象\nNBTTagCompound shieldNBT = new NBTTagCompound();\nshieldNBT.setInt(\"Base\", 1);复制代码\n\n然后将Bukkit ItemStack转成NMS ItemStack\nnet.minecraft.server.v1_15_R1.ItemStack nms_shield = CraftItemStack.asNMSCopy(shield);复制代码\n\n之后设置nbt\nnms_shield.setTag(shieldNBT);复制代码\n\n最后转Bukkit ItemStack\nshield = CraftItemStack.asBukkitCopy(nms_shield);复制代码"
        },
        {
            "author": "William_Shi",
            "timestamp": 1587368280,
            "txt_content": "https://www.mcbbs.net/thread-697478-1-1.html\n看完之后看我在编程开发区的针对新版本的教程就好"
        },
        {
            "author": "Delamer",
            "timestamp": 1587370200,
            "txt_content": "疾风暗影 发表于 2020-4-20 15:14\n编辑nbt需要用到nms\n\n举个例子，我想编辑某物品的nbt\n这个对象似乎并不能new出来，后续的操作也无法进行，是由于版本的问题还是我缺了什么包？另外，大佬有nms操作的详细说明的传送门嘛？"
        },
        {
            "author": "a8105",
            "timestamp": 1587383520,
            "txt_content": "Delamer 发表于 2020-4-20 16:10\n这个对象似乎并不能new出来，后续的操作也无法进行，是由于版本的问题还是我缺了什么包？另外，大佬有nms ...\n直接导入服务端jar包而非api包即可"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1587397260,
            "txt_content": "Delamer 发表于 2020-4-20 16:10\n这个对象似乎并不能new出来，后续的操作也无法进行，是由于版本的问题还是我缺了什么包？另外，大佬有nms ...\n1.15之后不是new而是的调用某静态方法\n\n\n记得似乎是NBTTagCompound.a()，类似的某个静态方**返回new NBTTagCompound"
        },
        {
            "author": "William_Shi",
            "timestamp": 1587429240,
            "txt_content": "疾风暗影 发表于 2020-4-20 23:41\n1.15之后不是new而是的调用某静态方法\nNMS中的NBTTagCompound类\n private NBTTagCompound(Map<String, NBTBase> var0) {\n    this.map = var0;\n  }\n  \n  public NBTTagCompound() {\n    this(Maps.newHashMap());\n  }\n\ncom.google.common.collect.Maps类\n \n  public static <K, V> HashMap<K, V> newHashMap() {\n    return new HashMap<>();\n  }"
        }
    ]
}