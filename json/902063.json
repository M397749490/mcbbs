{
    "title": "[1.14.4]data get中的scale问题",
    "author": "lirui11",
    "replyCount": 5,
    "timestamp": 1565706000,
    "txt_content": "现在我(角色名16380)的头上戴着一个增加29%移动速度的头颅\n头颅的指令\n\n/give @s player_head{AttributeModifiers:[{Slot:head,Operation:1,Amount:0.29,UUIDLeast:1L,UUIDMost:1L,AttributeName:\"generic.movementSpeed\",Name:\"1\"}]}复制代码\n\n我输入了\n/data get entity @s Inventory[{Slot:103b}].tag.AttributeModifiers[{AttributeName:\"generic.movementSpeed\"}].Amount复制代码输出0.29d\n接着我输入了\n/data get entity @s Inventory[{Slot:103b}].tag.AttributeModifiers[{AttributeName:\"generic.movementSpeed\"}].Amount 100复制代码输出28\n\n什么情况……\n\n\n测试时Amount的值从0.0d到0.29d 只有0.29d异常输出28 其他都是正常的\n0.39d也会正常输出39\n鬼知道我是怎么发现这个的\n我正在做一个函数，每运行一次就将movementSpeed的值增加0.01，运行30次后发现还是0.29\nBugMJ?\n\n",
    "replies": [
        {
            "author": "爱心魔王FHC",
            "timestamp": 1565706000,
            "txt_content": "我试了下，\n0.29\n乘以1是0\n乘以10是2\n乘以100是28\n乘以101是29\n乘以1000是290\n总结：BUGMOJANG"
        },
        {
            "author": "lirui11",
            "timestamp": 1565706720,
            "txt_content": " 本帖最后由 lirui11 于 2019-8-13 22:35 编辑 \n\n看来真的是BugMojang了…\n不过我担心如果换成101的话会对我那个函数造成什么影响\n算了直接单独处理吧^\n不知道后面还有没有这样类似的bug数，一个不用穷举的函数也需要穷举bug数的这一天终于到来了\n"
        },
        {
            "author": "爱心魔王FHC",
            "timestamp": 1565707380,
            "txt_content": "lirui11 发表于 2019-8-13 22:32\n看来真的是BugMojang了…\n不过我担心如果换成101的话会对我那个函数造成什么影响\n算了直接单独处理吧^\n刚刚试了一圈好像就29"
        },
        {
            "author": "SPGoding",
            "timestamp": 1565708340,
            "txt_content": "这并非 Mojang 的问题，而是浮点数的固有缺陷。有兴趣可以看这篇文章：https://zhuanlan.zhihu.com/p/28162086\n\n不止 Java 如此，绝大多数编程语言都使用 IEEE 754 标准表示浮点数，都会有这个问题。例如你现在按 F12 打开浏览器的 Console，在里面输入 0.29 * 100 并回车，得到的也是 28.999999999999996。\n\n而 Minecraft 命令系统会把 Double 或 Float 转换为 Int，即直接舍弃末位，所以最终结果为 28。"
        },
        {
            "author": "chyx",
            "timestamp": 1565755560,
            "txt_content": "FHC红石 发表于 2019-8-13 22:43\n刚刚试了一圈好像就29\n建议再试一试以下这些数\n\n29\n57\n58\n\n顺便，许多情况下，0.1+0.2==0.30000000000000004\n有人特意做了一个网站http://0.30000000000000004.com/\n列举了关于这个现象的许多情况。\n\n浮点数就是这样的。要是不喜欢的话那就气死好了。"
        }
    ]
}