{
    "title": "关于模块化编写函数的想法",
    "author": "jack_lxy",
    "replyCount": 8,
    "timestamp": 1497424080,
    "txt_content": " 本帖最后由 jack_lxy 于 2017-6-15 14:38 编辑 \n\nmc的1.12版本加入了function功能，允许玩家在游戏外部编写一个或多个指令，导入游戏后便可以随意调用。我认为用function来编写模块相较以前的命令方块阵列，许多优点，比如我想到的以下几个：\n\n1 非常便捷地插入或修改命令，便于编写\n2 函数严格遵循从上至下的执行顺序，在引用其他函数时会插队执行，逻辑清晰\n3 函数便于移植与调用，只需要给出mcfunction文件就可以直接应用\n4 执行迅速，不考虑计算机的处理速度，在1tick内执行完所有流程，而CB制作的循环逻辑最多每tick执行一次\n\n\n已经有一些关于函数的非常详细的介绍，所以我就不提及了，大家可以通过一下几个帖子来了解：\n【CBL|秋一】(1.12)函数命令系统：当命令脱离命令方块\nhttp://mcbbs.tvt.im/forum.php?mod=viewthread&tid=691100\n\n\n对此，我有一个想法与各位分享。\n\n\n我认为函数会促使模块化的命令编写，类似库的作用。完全可以以function的形式来编写命令的模块，来实现某一种特定的功能，然后便可以在玩家之间相互共享，简化命令编写的流程以及地图制作的工作量。如果这种形式普及，在编写指令的时候，当需要实现某一功能时，只需要寻找到合适的模块，再将它们拼接进命令中，就可以省去很大的工作量。\n\n函数模块的基本特点\n\n要具有广泛的适配性，函数模块应该具有以下特点：\n\n1 清楚标注用途，指明输入值，执行条件，返回值或执行效果，方便使用者。\n\n2 在运行前后不留下痕迹，涉及到的计分板项在运行时临时建立，运行结束后立刻清除。\n\n3 所有的输入及返回值在模块开头或结尾以赋值的形式放入及取出。虽然多了一次操作，但更加灵活，无需更改内部的命令。\n\n4 涉及到的计分板项应命名严谨，不应使用“command”，“marker”等等简单单词组成的tag或变量名，防止冲突。应该使用“moduleName:settings_1\"等清晰易辨且具有唯一性的名称。\n\n\n函数模块应该遵守一些准则。\n\n1 预留接口。指明在何处填写输入的计分板项，何处填写执行的实体的条件，何处填写返回值要赋给的实体与变量名等。\n\n2 文件整理。开头以及留作接口的内容直接放在模块的目录下，其他的模块文件放在下一层的文件夹中，即不需要使用者访问。\n\n3 注明作者。在调用别人的模块时也应该注明该模块作者。\n\n\n\n为什么要这样？\n\n我在开头说过了它可能带给命令工作者与地图制作者的巨大便利。一旦形成了大的数量级以及生态，那时便会有不计其数的模块，每个人都可以贡献模块到这个社群，也可以在命令中直接调用别人的模块，节省几十，几百甚至上千条命令的工作量。\n\n\n水平不同的玩家都能够获益。对于命令初学者，可以直接调用别人完成的模块，制作自己本来难以完成的作品；对于水平较高者，可以大大简化工作量，省去一些算法设计、大量穷举与逻辑判断，专注与功能的设计，从而制作出更加优秀的作品。\n\n\n\n举一个例子（其实是我接下来要做的东西的构想）、\n\n我想要在每个tnt爆炸后，炸掉的方块在几秒后陆续恢复。\n\n\n要实现这个，我需要在每个tnt爆炸前记录它旁边一周的方块。但是，如果要支持多个tnt同时爆炸的恢复，以及不对地图造成其他影响，只能通过分数来记录方块种类与数据值。\n\n这时候，我需要穷举这个游戏中的每一种方块的每一种数据值。哇，几千个诶！\n\n但是，假如我有以下两个模块：\n\n\n模块1\n执行对象：所有标了确定tag的实体\n输出：该实体所在方块的ID\n复制代码模块2\n执行对象：所有标了确定tag的实体\n输入：该实体所在方块的ID\n执行结果：把对应的方块放置在该实体所在方块\n复制代码那么，我需要做的事就变成了：\nexecute 将爆炸的tnt\n    在周围(生成好多的marker\n    模块1\n给所有markers计时，每20tick（1s)挑选一个存在时间超过200tick(10s)的marker运行：\n    模块2\n    删除这个marker\n复制代码\n上千条命令的穷举，变成了如此简单的模块。如果模块现成，可能只需要5分钟就能实现。\n\n\n\n\n最后的话\n以上是我对于function功能的进一步应用的一些想法。如果有表述不当或者错误之处请告诉我~ 我接下来会尝试用这种方式编写一些工具，期待我的作品吧哈哈哈哈！！！\n\n\n\n\n\n\n\n\n@贰逼 @minehenry @乾.坤 @leo66 @skytop HAHAHA!\nP.S 我还没排版呢，手残Ctrl+Enter竟然发出来了！我靠!\n\n\n[groupid=546]Command Block Logic[/groupid]",
    "replies": [
        {
            "author": "ruhuasiyu",
            "timestamp": 1497430500,
            "txt_content": "可以的，function非常适合模组化"
        },
        {
            "author": "pca006132",
            "timestamp": 1497434820,
            "txt_content": "论标准之必要"
        },
        {
            "author": "乙烯_中国",
            "timestamp": 1497436320,
            "txt_content": "我测试过，虽然对游戏有优化，但是该卡的还是要卡\n想象很丰满，现实很骨感，至少在现在来说我觉得现在在指令的性能方面的优化虽然有，但是不能称之为质的飞跃。"
        },
        {
            "author": "jack_lxy",
            "timestamp": 1497437220,
            "txt_content": "pca006132 发表于 2017-6-14 18:07\n论标准之必要\nen。。。我觉得需要有一个系统的标准，才能让模块相互适配"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1497437640,
            "txt_content": "pca006132 发表于 2017-6-14 18:07\n论标准之必要\n赶紧扔掉你的pcb，开始制定新标准吧！"
        },
        {
            "author": "langyo_v3",
            "timestamp": 1497442320,
            "txt_content": " 本帖最后由 langyo_v3 于 2017-6-14 21:06 编辑 \n\n为防止脑洞被CH2抢去,所以回复暂时删除\n如果想看回复,可以PM我,我确定不是CBL或TRP的人后,会把临时储存的回复URL发给你"
        },
        {
            "author": "爱着杨海燕",
            "timestamp": 1497508260,
            "txt_content": "对于数学不好的我 看了这些数据头都大了"
        },
        {
            "author": "leo66",
            "timestamp": 1503515400,
            "txt_content": "实在是方便很多啊。。。可惜以前没有这个功能，很多构想都无法实现。不过LZ你怎么@我了 QAQ"
        }
    ]
}