{
    "title": "这两串代码有什么区别吗？",
    "author": "Y制杖杖",
    "replyCount": 3,
    "timestamp": 1586646120,
    "txt_content": " 本帖最后由 Y制杖杖 于 2020-4-12 07:12 编辑 \n        public static DataInputStream getCompresser(File f) throws Exception {\n                GZIPInputStream is=new GZIPInputStream(new FileInputStream(f));\n                byte[] b=is.readAllBytes();\n                is.close();\n                return new DataInputStream(new ByteArrayInputStream(b));\n        }复制代码        public static DataInputStream getCompresser(File f) throws Exception {\n                GZIPInputStream is=new GZIPInputStream(new FileInputStream(f));\n                return new DataInputStream(is);\n        }复制代码\n很奇怪，得到的DataInputStream通常都能正常解压，但是对于某些文件，第二种方法就会出bug(有些数据读出来不一样或者读少了数据？由于这个bug太奇怪所以我也找不出它的触发条件)，是为什么呢\n\n\n另外问一句，有人知道mca文件是怎么压缩的吗\n\n\n\n",
    "replies": [
        {
            "author": "我是人1012",
            "timestamp": 1586646840,
            "txt_content": "前2段是一模一样的可以排除\n\n上面的代码是先判断后返回\n而下面的代码是直接返回\n\n直接返回可能会在不改返回的时候返回\nbug就触发了"
        },
        {
            "author": "Y制杖杖",
            "timestamp": 1586648280,
            "txt_content": "我是人1012 发表于 2020-4-12 07:14\n前2段是一模一样的可以排除\n\n上面的代码是先判断后返回\n返回这个没什么问题\n两个都可以正常返回DataInputStream\n我的意思是这两个方法返回的DataInputStream在读取同一个文件时，多数情况都是一样的\n但是少数情况第二种返回的DataInputStream在读取时会抛出错误(各种错误都抛出过.."
        },
        {
            "author": "我是人1012",
            "timestamp": 1586648400,
            "txt_content": "Y制杖杖 发表于 2020-4-12 07:38\n返回这个没什么问题\n两个都可以正常返回DataInputStream\n我的意思是这两个方法返回的DataInputStream在读 ...\n原因应该是表判断的代码在返回的后面\n有可能出现什么先返回，然后突然判断，然后返回返回之前的"
        }
    ]
}