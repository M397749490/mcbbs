{
    "title": "自动生成迷宫型生化大楼，冒险地图作者的福利！",
    "author": "橙子皮",
    "replyCount": 6,
    "timestamp": 1471233900,
    "txt_content": " 本帖最后由 橙子皮 于 2016-8-16 20:52 编辑 \n我又一次恬不知耻地回来了。。{:10_530:}\n这次给大家带来一个自动生成迷宫型生化大楼的系统，具体功能是生成一个内部一迷宫形式的一个怪物塔。内部每层25个房间，共7层。\n上图\n\n\n\n\n\n2016-08-15_18.17.02.png (164.95 KB, 下载次数: 0)\n\n下载附件\n\n2016-8-15 20:47 上传\n\n\n\n\n\n\n\n\n\n\n2016-08-15_18.17.36.png (361.71 KB, 下载次数: 4)\n\n下载附件\n\n2016-8-15 20:49 上传\n\n\n\n\n\n分别是系统和大楼的图片。\n\n\n\n\n\n2016-08-15_18.18.40.png (311.22 KB, 下载次数: 0)\n\n下载附件\n\n2016-8-15 20:48 上传\n\n\n\n\n\n\n\n\n\n\n2016-08-15_18.19.01.png (269.16 KB, 下载次数: 3)\n\n下载附件\n\n2016-8-15 20:56 上传\n\n\n\n\n\n生成时的图片\n\n生成时可以选择要窗户或装饰和不要窗户或装饰。\n\n\n\n\n关于房间\n\n因为房间的装修问题，系统做得很大。每个房间都会生成对应的怪。每层房间的生成都是随机的，每层有1个楼梯间，至少14个实验室，5个反应仓，4个仓库，在顶楼时楼梯间会变成电源室，玩家可以通过关闭电源来取得胜利。房间装修由1.10的结构方块实现，虽然这样需要在用系统的时候需要相应的结构文件，但这是目前最省空间的办法。如果有什么更好的办法，欢迎探讨。\n\n\n关于系统说明\n\n\n这个系统的想法虽然来自林扬骐的3D迷宫生成器，但是这不是一个3D迷宫，这是一个每层独立的迷宫，生成原理大不相同。虽然这个系统一部分参照3D迷宫生成器，但是不能在一个迷宫的入口生成另一个迷宫。\n\n\n关于原理\n\n这个系统生成的步骤主要如下：\n扩散第一层-把本层变成迷宫-生成房间-扩散下一层...-总处理\n\n\n扩散方法\n首先，我们需要5x5的内部5x5的房间，房间内部的盔甲架叫0。那么扩散方法如下：\n一开始，会有一个叫migongzhongxin和0的盔甲架，和一个叫count的计分板（主要用来记录盔甲架旁边0的数量），然后如下方法开始扩散。\n\n清除所有人的count分数->\n让所有的0给周围的盔甲架加分->\n选择分数小于等于3的0，让它生成成b->\n让b在周围生成a（四个cb）->\n检测a的头顶有没有石英块（自己是不是和0重叠），有则kill自己->\n让migongzhongxin把一定范围内的a变成0->killa和b（二cb）->\n让0把周围变成石英块->\n（经过把扩散好的一层变成迷宫的许多命令方块）->\n让所有的0给migongzhongxin的count加1分->\n检测migongzhongxin的分数是否足够（场上的0是否足够，实际分数是目标0的数量加3）->\n｛制约｝随机选择一个0变成1，并在0处生成tag为fangjian的盔甲架fangjian，把楼梯间上面的fangjian名字改为fangjian0（三cb）->\n（负责每层后续处理的命令方块）\n\n把每层变成迷宫的方法\n这个过程包含每层后续处理并需要一个名为floor的计分板，方法如下\n\n让1随机选择一个周围的0，变成-1->\n把1和-1之间打通（三cb）->\n把1和-1变成-2（二cb）->\n随机选择一个-2变成1->\n（扩散的一部分命令方块）->\ntestfor 还有没有0->检测上一个cb的执行是否失败->\n｛制约｝kill所有-2和1（二cb）->\n｛制约｝检测migongzhongxin的floor分数是否为0，是则打开入口和放置告示牌（二cb）->\n｛制约｝把migongzhongxin的floor分数加1->\n｛制约｝分配房间并分别放置结构方块加载（九cb）->\n｛制约｝在migongzhongxin的floor分数为11时，把放置生成楼梯间的结构方块的cb变成放置生成电源室的（二cb）->\n｛制约｝tpmigongzhongxin到它的上4格->\n｛制约｝在migongzhongxin处生成0->\n（总处理的命令方块）\n\n总处理\n这是最后的处理，基本全是制约\n\nkillfloor分数大于14的migongzhongxin->\n在各种房间处生成怪物（三cb）->\n在tag为fangjian的盔甲架旁重新放置红石块（放置房间出错，二cb）->\n专用于转向的命令方块->\n若转向，加窗户（二cb）->\n专用于转向的命令方块->\n若转向，生成装饰（四cb）->\ntellraw指令（二cb）->\n发装备（七cb）->\nkill 0\n\n以上就是系统所有命令方块的作用和系统的原理\n\n\n关于特殊玩法\n\n如果玩家想清除怪物，降低难度，挑战大楼等，可以通过更改生成完毕时提供的设置来实现。\n玩家还可以通过更改名叫sys，fy，ck，lt（楼梯间），gg（电源室）的结构来改变房间装修，也可以更改大楼的材料和高度形状来满足自己的要求。\n更改细说\n如果要更改房间装修，您需要用结构方块存储和房间名字相同的结构，除楼梯间的尺寸是5，7，5外，其他的结构高都是3。\n如果是要更改大楼材质，必需更改所有设计方块ID的命令方块，还不是特别方便，大家可以自己分析系统，找出需要更改的命令方块。\n冒险地图作者注意：\n在在自己的地图里用系统生成大楼时，一定要先试验一把，搞清大楼生成的方向。\n\n关于如何加载系统\n只要用结构方块随便保存一个结构，在把系统结构放入存档内名为structures的文件夹内，回到游戏，加载名为czm的结构便可。\n\n\n\n\n系统结构文件夹和存档：\n网盘：http://pan.baidu.com/s/1geMXk11\n\n\n\n@一只深沉 \n最后，金粒人气please\n\n\n\n\n\n\n\n\n2016-08-15_18.17.36.png\n(361.71 KB, 下载次数: 3)\n\n\n\n\n下载附件\n\n\n2016-8-15 18:26 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2016-08-15_18.17.02.png\n(164.95 KB, 下载次数: 2)\n\n\n\n\n下载附件\n\n\n2016-8-15 20:49 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2016-08-15_18.18.40.png\n(311.22 KB, 下载次数: 1)\n\n\n\n\n下载附件\n\n\n2016-8-15 20:49 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2016-08-15_18.19.01.png\n(269.16 KB, 下载次数: 2)\n\n\n\n\n下载附件\n\n\n2016-8-15 20:41 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "1622962468",
            "timestamp": 1473158520,
            "txt_content": "真心不明白这么好的帖子为什么没人看，很吊的技术啊"
        },
        {
            "author": "晴路卡",
            "timestamp": 1473221700,
            "txt_content": "就是压缩RAR有点不舒服23333"
        },
        {
            "author": "1215167343",
            "timestamp": 1473249780,
            "txt_content": "我弄个试试"
        },
        {
            "author": "Faker6",
            "timestamp": 1473507900,
            "txt_content": "lz挺厉害"
        },
        {
            "author": "正义の冷子",
            "timestamp": 1473524520,
            "txt_content": "这个是随机生成么"
        },
        {
            "author": "橙子皮",
            "timestamp": 1473551940,
            "txt_content": "正义の冷子 发表于 2016-9-11 00:22\n这个是随机生成么\n是的，每次不一样"
        }
    ]
}