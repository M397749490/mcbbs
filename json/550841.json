{
    "title": "[启动器开发求助]基于jmccc的外置验证",
    "author": "mikexu1998",
    "replyCount": 12,
    "timestamp": 1454458680,
    "txt_content": " 本帖最后由 mikexu1998 于 2016-2-3 15:38 编辑 \n\n本来是打算内置验证的，但是发现其实外置验证更安全，故此帖改名，欢迎讨论关于启动器的问题\n\n因为Authme的SALTED2MD5不能用，我查了代码发现没有问题，但因为网络原因（你们懂的）不能编译，于是着手开发一个Auth插件（我就是任性）。\n在Player登陆的时候我要把所有权限夺去并储存在一个地方（HashMap<Player,HashSet<PermissionAttachmentInfo>>），下面是我Listener里实现这个的代码(其中event是传入的PlayerJoinEvent)，然而编译运行之后，控制台显示传递PlayerJoinEvent失败，并标记了出错行数（已在代码区标记）。\n\nSet<PermissionAttachmentInfo> WF_PermissionSet=event.getPlayer().getEffectivePermissions();\n                HashSet<PermissionAttachmentInfo> WF_PermissionHashSet = new HashSet<PermissionAttachmentInfo>();\n                for(PermissionAttachmentInfo WF_Permission:WF_PermissionSet){\n                        WF_PermissionHashSet.add(WF_Permission);\n                        WF_Permission.getAttachment().unsetPermission(WF_Permission.getPermission());  // 报错点\n                }\n                WF_PermissionMap.put(event.getPlayer(),WF_PermissionHashSet);复制代码\n我是最近才开始写插件的，不知道我们通常说的权限是不是用bukkit官方提供的permission类来管理的，还是说我应该通过其他插件来管理（比如PermissionsEX），如果使用其他插件管理的，我应该从内部进行交互还是用命令进行交互，如果是用命令的话，我怎样通过返回的提示获得用户已有的权限，因为我等用户登陆成功之后要写回的。\n\n15：30更新\n打算用jmccc写一个简单的外置验证，基本原理如下：\n启动器启动时要求用户名密码，随ip发至网页端，网页端验证密码与白名单，如成功，将ip写入数据库，在mc内登录服务器时用weblogin插件验证用户名ip，如匹配，放进服务器",
    "replies": [
        {
            "author": "Ling_Haner",
            "timestamp": 1454474460,
            "txt_content": "不需要取消权限的吧- -"
        },
        {
            "author": "Ling_Haner",
            "timestamp": 1454474520,
            "txt_content": "直接限制输入指令 聊天 移动 背包操作 交互就可以了吧= ="
        },
        {
            "author": "云闪",
            "timestamp": 1454478120,
            "txt_content": "就算你夺取了所有权限玩家一样能移动能交互，正解是监听事件然后没登录的玩家取消事件"
        },
        {
            "author": "mikexu1998",
            "timestamp": 1454483940,
            "txt_content": "Ling_Haner 发表于 2016-2-3 12:42\n直接限制输入指令 聊天 移动 背包操作 交互就可以了吧= =\n怎么限制？"
        },
        {
            "author": "Ling_Haner",
            "timestamp": 1454484000,
            "txt_content": "mikexu1998 发表于 2016-2-3 15:19\n怎么限制？\n= =事件啊= ="
        },
        {
            "author": "mikexu1998",
            "timestamp": 1454484120,
            "txt_content": "splt 发表于 2016-2-3 13:42\n就算你夺取了所有权限玩家一样能移动能交互，正解是监听事件然后没登录的玩家取消事件 ...\n另外还有，怎样让用户输入的指令不在后台显示？"
        },
        {
            "author": "mikexu1998",
            "timestamp": 1454484180,
            "txt_content": "Ling_Haner 发表于 2016-2-3 15:20\n= =事件啊= =\n就是移动了之后再恢复么？怎么恢复？"
        },
        {
            "author": "Ling_Haner",
            "timestamp": 1454484480,
            "txt_content": "mikexu1998 发表于 2016-2-3 15:23\n就是移动了之后再恢复么？怎么恢复？\n你会写插件吗..."
        },
        {
            "author": "914554688wyt",
            "timestamp": 1454484840,
            "txt_content": "you need Vault"
        },
        {
            "author": "mikexu1998",
            "timestamp": 1454485320,
            "txt_content": "Ling_Haner 发表于 2016-2-3 15:28\n你会写插件吗...\n我是最近才发现mcbbs有开发版的，之前一直是看javadoc的所以并不知道恢复怎么做，您当然可以说我不会写插件，因为我的确刚入门，"
        },
        {
            "author": "mikexu1998",
            "timestamp": 1454485380,
            "txt_content": "914554688wyt 发表于 2016-2-3 15:34\nyou need Vault\n谢谢，我去读读vault的文档"
        },
        {
            "author": "yushijinhun",
            "timestamp": 1455675120,
            "txt_content": "我有一个游戏外登录的坑，不知楼主是否有兴趣 http://www.mcbbs.net/thread-556500-1-1.html"
        }
    ]
}