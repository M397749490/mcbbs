{
    "title": "spigot插件，如何添加熔炉合成？",
    "author": "Freeze_Dolphin",
    "replyCount": 3,
    "timestamp": 1579177200,
    "txt_content": "如题，根据以前在pvpin看到的教程，因该是用监听的，翻了一下关于熔炉的就3个，\nFurnaceBurnEvent\nFurnaceExtractEvent\nFurnaceSmeltEvent\n\napi查了，但是还是不知道怎么写。。。。\n\n\n",
    "replies": [
        {
            "author": "Ir.Nep",
            "timestamp": 1579225320,
            "txt_content": "添加熔炉配方使用：getServer().addRecipe(你的熔炉配方)\n熔炉配方API\n\n\nExtra:\n      使用监听是因为原版熔炉的熔炼只判断原材料的材质，而监听可以自己判断原材料是否应该被熔炼，以及熔炼之后得到什么，可以丰富熔炼结果。而对于原来不能被熔炉熔炼的材料，pvpin也要先添加熔炉配方才能使用监听工作\n    - FurnaceBurnEvent是燃料被消耗时触发的事件，这里就忽略了\n    - FurnaceExtractEvent是玩家取出熔炼结果时触发的事件，也可以忽略\n    - FurnaceSmeltEvent是物品熔炼完成时触发的事件，通过事件的getSource()方法获取熔炼前的物品堆，并进行一系列判断之后。还可以用setResult(ItemStack)自定义输出结果或直接取消这次熔炼setCancelled(true)\n\n    但只用FurnaceSmeltEvent也有限制，比如每次事件的触发都在熔炼完成之后，这有时候会让玩家困惑或恼怒。\n因此建议配合物品栏点击事件(InventoryClickEvent)以及漏斗输出物品事件（用InventoryMoveItemEvent处理），在熔炉放入原材料的时候就进行判断。"
        },
        {
            "author": "1789717367",
            "timestamp": 1579226280,
            "txt_content": " 本帖最后由 1789717367 于 2020-1-17 10:01 编辑 \n\n补充下\n一些东西没办法放进燃料框\n@EventHandler\n    public void onInventoryClick(InventoryClickEvent event) {\n        if (event.isCancelled()) {\n            return;\n        }\n\n        if (event.getInventory().getType() == InventoryType.FURNACE  && event.getSlotType() == InventoryType.SlotType.FUEL) {\n            ItemStack cursorItem = event.getCursor();\n            ItemStack currentItem = event.getCurrentItem();\n\n            event.setCursor(currentItem);\n            event.setCurrentItem(cursorItem);\n            event.setCancelled(true);\n        }\n    }复制代码"
        },
        {
            "author": "piggest",
            "timestamp": 1580057460,
            "txt_content": "Ir.Nep 发表于 2020-1-17 09:42\n添加熔炉配方使用：getServer().addRecipe(你的熔炉配方)\n熔炉配方API\n这样会出现熔炉烧完一个物品后就不再烧的情况"
        }
    ]
}