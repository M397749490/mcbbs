{
    "title": "关于服务器内存设置问题和编码问题",
    "author": "落日GH",
    "replyCount": 5,
    "timestamp": 1583579700,
    "txt_content": "因为考虑要转用linux服务器，然后给自己电脑装了一个linux虚拟机做测试，内存设置的是4G，启动文件如下\njava -Xmx3G -jar paper-102.jar nogui\n然后服务器就报错\n\n\n\n\nQQ截图20200307184631.jpg (57.8 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-7 18:53 上传\n\n\n\n\n\n\n改成\njava -Xmx2G  -jar paper-102.jar nogui\n然后就不报错，但是服务器内存才吃了33.2%的内存\n\n\n\n\nQQ截图20200307185004.jpg (119.8 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-7 18:53 上传\n\n\n\n\n\n改成\njava -jar paper-102.jar nogui\n仅占用24.1%的内存，而且单人登录的时候tps大概一直再18左右，所以我感觉是不是需要先给服务器设定内存上限或下限，预先占用内存，然后提升游戏体验呢？如果设定内存上下限的话要咋设置（我看有3.8G内存剩余，虚拟机分配了4G内存，但是设定上限3G就报错，windows平台就算我设10G上限跑在4G内存的机子上也不会这样报错啊）\n\n\n因为感觉winserver占用过大，于是考虑转linux服，图中的服务端我是直接拿原windows服务器上的备份放linux里跑的，之前看教程还以为要把所有配置文件转码才能用，是不是只要服务器支持utf-8就可以直接拿windows 平台的配置文件使用？\n\n\n\n\n\n\n\n\nQQ截图20200307184805.jpg\n(120.76 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2020-3-7 18:53 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "a1045487808",
            "timestamp": 1583579700,
            "txt_content": "你的虚拟机系统是32位或者java是32位的吗，我记得32位的系统好像只能管理2点多G的内存，多了就没法管理了，你可以往这个方向排查一下问题"
        },
        {
            "author": "xmdhs",
            "timestamp": 1583579820,
            "txt_content": " 本帖最后由 xmdhs 于 2020-3-7 19:18 编辑 \n\n虚拟机中肯定还是有所区别的了。\n\n第一个应该是会预先分配一些内存，然后你没有这么多所以就保存了。\n\n此外，linux 用图形化的话，和 windows 比就没什么优势了。实际就是，自己用的爽就是，系统之间的性能没多大的差异。巨硬的东西可没那么差"
        },
        {
            "author": "落日GH",
            "timestamp": 1583580420,
            "txt_content": "xmdhs 发表于 2020-3-7 19:17\n虚拟机中肯定还是有所区别的了。\n\n第一个应该是会预先分配一些内存，然后你没有这么多所以就保存了。\n因为感觉图形化方便，毕竟是自己电脑跑虚拟机，而且vim还不太熟练，还有就是预分配内存的话我预分配3G内存就会报错（系统识别3.8G内存），这是啥原因"
        },
        {
            "author": "xmdhs",
            "timestamp": 1583580540,
            "txt_content": "落日GH 发表于 2020-3-7 19:27\n因为感觉图形化方便，毕竟是自己电脑跑虚拟机，而且vim还不太熟练，还有就是预分配内存的话我预分配3G内 ...\n并不清楚为什么，反正上面显示的就是没有充足的空间"
        },
        {
            "author": "落日GH",
            "timestamp": 1583580780,
            "txt_content": "a1045487808 发表于 2020-3-7 19:27\n你的虚拟机系统是32位或者java是32位的吗，我记得32位的系统好像只能管理2点多G的内存，多了就没法管理了， ...\n系统是从学校拷出来的，才发现是32位的CentOS。。。。。。\n32位的话单个进程只能分配2G内存是么"
        }
    ]
}