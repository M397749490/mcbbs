{
    "title": "制作自定义语言包：从入门到入完门",
    "author": ":spgbigfan:",
    "replyCount": 12,
    "timestamp": 1585201680,
    "txt_content": " 本帖最后由 :spgbigfan: 于 2021-2-22 12:53 编辑 \n\n制作自定义语言包：从入门到入完门\n\n制作自定义语言包是很简单的事情，但是似乎没有一个专门的教程可供参考。此外 1.17 增加了 114514 个新名词，单单一个 Grimstone 就吵了 1919 个小时，所以似乎制作一个属于自己的语言包成为了“等待官方翻译出来”或者“如果你不喜欢官方翻译，那就去成为翻译组头子”的另一个新选择。好了，闲话少叙，让我们马上开始。\n\n感谢 mm2bc 对本文排版的支持。\n\n\n\n\n\n提取语言文件\n\n语言文件并没有直接摆在游戏目录的某个显眼的地方，它被修改了名字，和众多文件一起混淆在了一起。所以我们就得找到这个语言文件。\n\n首先打开 .minecraft/assets/indexes 这个目录。如果你不知道怎么打开这个目录，请去问答版提问“如何打开 Minecraft 根目录”。打开之后，你会看到 1.15.json, 1.16.json 这样的版本 json 文件。要修改哪个版本，就打开哪个版本的 json。我们准备修改 1.16 的语言文件，所以打开 1.16.json。\n\n\n\n\n\nTIM截图20200326110341.png (38.3 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n\n打开之后，我们会看到密密麻麻的字符。问题不大，我们只需要按下 ctrl + F，输入 zh_cn，回车，就可以跳转到中文语言文件的相关信息。例如，我当前版本跳转到的内容是：\n\n \"minecraft/lang/zh_cn.json\": {\"hash\": \"c671d99955e327e2f429759118000c1808ba6428\", \"size\": 348289}复制代码\n（除此之外你可能也会看到有一个条目也带有 zh_cn 的字样，那个是 Realms 相关的语言文件，不用理会。）\n\n注意到 hash 后面的那串数字字母混合物：c671d99955e327e2f429759118000c1808ba6428，这个就是语言文件的真实文件名。现在你有两种方法寻找这个文件。\n\n第一种。打开 .minecraft/assets/objects，你会看到许多两个字符命名的文件夹。文件夹的名字是什么，里面装着的就是以这个名字打头的文件。所以，我们就根据 hash 值开头的 c6，打开 c6 文件夹。\n\n然后，用你的火眼金睛找出 c671d99955e327e2f429759118000c1808ba6428 在哪里。\n\n\n\n\n\nTIM截图20200326111932.png (23.82 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n第二种。拜托，Windows 自带的搜索功能虽然差强人意，但那至少还是能够差强人意的是吧。在文件管理器右上角直接搜索就好了。\n\n\n\n\n\nTIM截图20200326112212.png (36.12 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n\n\n修改语言文件\n\n不管准备使用什么方法，请先把语言文件复制一个副本出来，然后更名为 zh_cn.json。\n\n当你打开这个文件一看，瓦，这是啥玩意啊？现在你有两种办法完成对语言文件的魔改。\n\n注意，如果你想为最新的快照修改翻译，请看第二种方法。\n\n\n\n\n\nTIM截图20200326112800.png (48.76 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n还原转义了的字符\n\n请注意：这里我们做一个 python 的操作示例，这个方法比较基础，所以可以根据自己的需要进行改进或者使用其它语言，也是可以的。当然，如果你不想输入任何代码，请看第二种处理方式。\n\n由于语言文件里是 unicode 转义字符，所以我们可以尝试把它还原，然后查找直接你想修改的条目。\n\n在你存放 zh_cn.json 的文件夹下打开 python 命令行或新建 .py 脚本，运行以下代码，即可获得一个还原好的 json 文件。\n\nimport json\nwith open(\"zh_cn.json\", mode = \"r\", encoding=\"utf-8\") as f:\n    ori = json.loads(f.read())\nwith open(\"zh_cn.json\", mode = \"w\", encoding=\"utf-8\") as f:\n    json.dump(ori, f, ensure_ascii = False, indent = 4)复制代码\n再次打开它，你就能看到字符都被还原了。比如，我们觉得音乐唱片这个翻译糟糕透顶，就可以使用 ctrl + F 找到相应的条目，然后修改成豪俊金曲。别忘了保存！\n\n\n\n\n\nTIM截图20200326120753.png (53.5 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n直接修改语言文件\n\n如果我们不还原，如何知道条目对应了什么信息呢？答案在 Crowdin 上。\n\n注册账号，打开 https://crowdin.com/project/minecraft/zh-CN#，你会看到不同版本的语言文件。\n\n\n\n\n\nTIM截图20200326122610.png (22.92 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n点进目标版本的文件，比如，我们这里点进 1.16/Minecraft Game，在左上角的 Search in file 处搜索当前游戏中的译名，或者英语模式下的原名，即可找到对应的翻译条目。\n\n\n\n\n\nTIM截图20200326124005.png (70.99 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n找到了条目之后，我们就可以看到条目在语言文件中对应的键，回到语言文件中搜索就可以找到了。\n\n\n\n\n\nTIM截图20200326124212.png (13.68 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n找到之后，可以直接修改，不需要转换成 \\u 开头的转义字符。\n\n\n\n\n\nTIM截图20200326124252.png (14.53 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n\n\n\n\nTIM截图20200326124416.png (16.29 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n这个方法甚至适用于最新快照新增条目的修改。比如，20w13a 中添加了 Strider，但是你如果在语言文件中搜索 item.minecraft.strider_spawn_egg，你发现查无此项。为了添加翻译，只需要直接在 json 文件中新建一个键值对。\n\n\n\n\n\nTIM截图20200326130631.png (15.06 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n\n\n制作资源包\n\n现在你有两种选择：直接替换原有的中文语言包，或者新建一个属于自己的语言。这两种方法差异不大，我们先看第一种。\n\n直接替换原有语言文件\n\n首先你要知道如何制作资源包。这里我们只简要介绍一下，具体的修改请在 Wiki 中搜索“资源包”或者去问答版发帖。\n\n在 .minecraft/resourcepack 文件夹下新建一个文件夹。名字无所谓，我们这里起个 awesomePack 好了。然后，在里面新建一个 pack.mcmeta 文件。对于 1.16 版本，往里面添加如下内容：\n\n{\n    \"pack\": {\n        \"pack_format\": 5,\n        \"description\": \"教学用语言包\"\n    }\n}复制代码\n文件添加好了之后，新建文件夹 assets/minecraft/lang/。把你刚才编辑好的 zh_cn.json 文件丢进去。\n\n一切完成后，现在你的资源包文件结构长这样：\n\n.\n├── assets\n│   └── minecraft\n│       └── lang\n│           └── zh_cn.json\n└── pack.mcmeta复制代码\n新建自己的语言\n\n如果要新建自己的语言，就需要再修改一下 pack.mcmeta。\n\n{\n    \"pack\": {\n        \"pack_format\": 5,\n        \"description\": \"教学用语言包\"\n    },\n    \"language\": {\n        \"zh_114514\": {\n            \"name\": \"中文\",\n            \"region\": \"下北泽\",\n            \"bidirectional\": \"false\"\n        }\n    }\n}复制代码\n然后把刚才的 zh_cn.json 改成 zh_114514.json。打开语言列表，你就看到了自己的新语言。\n\n\n\n\n\nTIM截图20200326132307.png (7.87 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-26 13:32 上传\n\n\n\n\n\n\n\n\n维护语言文件\n\n如果你修改的条目过多，那么每次语言文件更新的时候，需要重新把自己的大量修改添加回去，那就太可怕了！\n\n其实，使用一些程序合并新旧语言文件就好了。这里提供一个 python 的示例：\n\nimport json\n\n# 读取文件。请自己调整文件路径。\nf = open(\"zh_114514.json\")\ng = open(\"new.json\")\nold = json.loads(f.read())\nnew = json.loads(g.read())\nf.close()\ng.close()\n\n# 合并新条目\nfor i in new:\n    if i not in old:\n        old[i]=new[i]\n\n# 保存\nwith open(\"zh_114514.json\", mode = \"w\", encoding=\"utf-8\") as f:\n    json.dump(old, f, ensure_ascii = False, indent = 4)复制代码\n\n\n\n\n\n",
    "replies": [
        {
            "author": "Xiao2",
            "timestamp": 1585202340,
            "txt_content": "你不提供一下语言文件嘛"
        },
        {
            "author": ":spgbigfan:",
            "timestamp": 1585202580,
            "txt_content": " 本帖最后由 KalphaGo 于 2020-3-26 14:13 编辑 \nXiao2 发表于 2020-3-26 13:59\n你不提供一下语言文件嘛\n请看第二节：提取语言文件\n↓ 一方面有人可能只希望改1.12的文件，一方面每次更新快照老的语言文件就会失效，所以需要语言文件就到自己的游戏目录下找就好了"
        },
        {
            "author": "GeForceLegend",
            "timestamp": 1585203420,
            "txt_content": "从各种角度来说，这个贴子充斥着一种不可名状的味道\n（我觉得对于教程这种玩意稍微正经一点可能更好）"
        },
        {
            "author": ":spgbigfan:",
            "timestamp": 1585205340,
            "txt_content": "GeForceLegend 发表于 2020-3-26 14:17\n从各种角度来说，这个贴子充斥着一种不可名状的味道\n（我觉得对于教程这种玩意稍微正经一点可能 ...\n不正经吗 我觉得挺正经的 起名都是随机起的 如果和现实人物重合的话可真是抱歉（逃"
        },
        {
            "author": "NoName德里奇",
            "timestamp": 1585206180,
            "txt_content": "事实上这篇教程适用于一切资源文件的提取。\n关键在于知道 MC 的资源文件的后缀：语言是 .lang 或 .json，音效是 .ogg，材质是 .png，诸如此类。\n这篇教程由浅入深，质量相当不错，支持了！"
        },
        {
            "author": "殇黎",
            "timestamp": 1585216260,
            "txt_content": "很好，谢谢了，非常棒"
        },
        {
            "author": "⭐✔️",
            "timestamp": 1585324140,
            "txt_content": "这是一篇有味道的帖子"
        },
        {
            "author": "深绿世界",
            "timestamp": 1585561500,
            "txt_content": "水贴，等你改好了官方翻译也出来了\n而且资源包：???"
        },
        {
            "author": "深绿世界",
            "timestamp": 1585561620,
            "txt_content": "我还以为你是要教我制作一个能和Python或者Java并驾齐驱的编程语言呢"
        },
        {
            "author": "MrRobot",
            "timestamp": 1585631820,
            "txt_content": "第一眼看标题，woc小伙子是要开发自己的编程语言233，会错意了。"
        },
        {
            "author": "Lakejason0",
            "timestamp": 1585731780,
            "txt_content": "虽然一开始没有看到这个教程但是却意外的也开始维护一个译名包了（"
        },
        {
            "author": "HotTea_x",
            "timestamp": 1586478780,
            "txt_content": "虽然我可能用不到，但说不定呢，支持！"
        }
    ]
}