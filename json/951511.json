{
    "title": "如何有效限制低频红石？",
    "author": "Ayamuta",
    "replyCount": 13,
    "timestamp": 1580785380,
    "txt_content": "服务器里玩家为了赚钱，制作了大量的红石自动化农场（低频红石＋活塞＋探测器），导致服务器tps经常掉到15左右。\n\n有没有办法能比较温和的解决这个问题？\n现在有使用一个叫做“yasui”的插件，可以抑制红石，但是效果不怎么理想",
    "replies": [
        {
            "author": "世予予",
            "timestamp": 1580785440,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "极光creeper",
            "timestamp": 1580786940,
            "txt_content": " 本帖最后由 极光creeper 于 2020-2-4 11:36 编辑 \n\n请告诉我 1.核心 2. 版本\n这密切关系到你服务器的红石能优化到什么程度\n如果是水龙头和paper 则可以极致优化\n\n如果你是水龙头，可以使用spigots核心开发者md_5写的PandaWire\nhttps://www.spigotmc.org/resources/pandawire.41991/\n这个插件是付费插件，但是可以免费下载\n该插件对红石的算法进行修改与优化，可以在服务器tps不同时作出及时响应，并修改策略\n但是仅支持spigots，不支持paper或其他任何核心\n\n接下来就是paper和spigots通用的了\n在spigots.yml下你可以见到一个\n    ticks-per: \n        hopper-transfer: 8 \n        hopper-check: 1\n这个是用来修改漏斗传送速度的，可以有效遏制生存里面的一些问题\n下图已授权转载，但不允许其他用户修改，编辑，摘编\n来自https://www.mcbbs.net/thread-916822-1-1.html\n\n\n\n\nimage.png (54.4 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-4 11:34 上传\n\n\n\n\n\n\n其次是在paper.yml下\n\n\n\n\nimage.png (31.85 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-4 11:35 上传\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "Ayamuta",
            "timestamp": 1580787180,
            "txt_content": " 本帖最后由 d_amask 于 2020-2-4 11:38 编辑 \n极光creeper 发表于 2020-2-4 11:29\n请告诉我 核心 版本\n这密切关系到你服务器的红石能优化到什么程度\npaper 1.15.2\n好像是b90改配置文件试过，效果不理想。。"
        },
        {
            "author": "极光creeper",
            "timestamp": 1580787480,
            "txt_content": "d_amask 发表于 2020-2-4 11:33\npaper 1.15.2\n好像是b90\n1.15.2目前优化较差\n其本质原因是村民的ai寻路需要吃缓存占用 cpu\n蜜蜂ai，一些entity和tiles糟糕的优化\n等等\n与红石的关系 一般不大\n\n我也密切在测试paper的性能，但目前看来\n只是不断地在修复其他问题\n还没有着手对性能开始优化，这需要一段时间的等待\n\n你服务器有村民吗？\n[优化] Villager Optimiser —— 优化1.14.2以上的村民寻路以减少卡顿 [1.14.2-1.15]\nhttps://www.mcbbs.net/thread-876653-1-1.html\n\n"
        },
        {
            "author": "Ayamuta",
            "timestamp": 1580787540,
            "txt_content": "极光creeper 发表于 2020-2-4 11:38\n1.15.2目前优化较差\n其本质原因是村民的ai寻路需要吃缓存占用 cpu\n蜜蜂ai，一些entity和tiles糟糕的优化\n装了。。生物冻结也装了"
        },
        {
            "author": "极光creeper",
            "timestamp": 1580787660,
            "txt_content": " 本帖最后由 极光creeper 于 2020-2-4 11:50 编辑 \n\n1.15服务器如果tps保持在15的话，在目前看来\n并不能算是一个糟糕的情况，或者说大家普遍如此\n\n可能只能等到paper他们开始拯救性能的时候才能有所好转吧\n\n建议你不要给出最佳 等到paper更新几个版本指不准就有救了\n我到时候再来回复这贴请其他坛友抽我脸plz 动作快点\n\n\n在我看来 如果你确认真的是红石问题而非实体问题的话\n可能使用spigots并配合pandawire会比较好\n\n有没有考虑过减少区块加载，限制视距，提升视野外的生物卸载范围，加快区块的gc什么的\n"
        },
        {
            "author": "名副其实",
            "timestamp": 1580788140,
            "txt_content": "如果需要强制清除所有红石可以考虑使用aegisclear\n能有效释放服务器内存提升tps"
        },
        {
            "author": "Ayamuta",
            "timestamp": 1580788200,
            "txt_content": "极光creeper 发表于 2020-2-4 11:41\n1.15服务器如果tps保持在15的话，在目前看来\n并不能算是一个糟糕的情况，或者说大家普遍如此\n我把在大型红石自动农场的玩家都t出tps会涨到19。。"
        },
        {
            "author": "Ayamuta",
            "timestamp": 1580788320,
            "txt_content": "名副其实 发表于 2020-2-4 11:49\n如果需要强制清除所有红石可以考虑使用aegisclear\n能有效释放服务器内存提升tps ...\n这个插件之前用过。。不知道为什么服务器经常卡顿。。"
        },
        {
            "author": "名副其实",
            "timestamp": 1580788500,
            "txt_content": "d_amask 发表于 2020-2-4 11:52\n这个插件之前用过。。不知道为什么服务器经常卡顿。。\n因为玩家放置的红石实在太多\n它每清理一个方块就会刷一条提示\n这是唯一的缺点"
        },
        {
            "author": "极光creeper",
            "timestamp": 1580788500,
            "txt_content": "d_amask 发表于 2020-2-4 11:50\n我把在大型红石自动农场的玩家都t出tps会涨到19。。\n踢出 似乎 不是一个好办法\n\n我想 这个涉及到很多东西\n区块的加载范围不同了，当然 如你所说 红石的范围也被卸载了\n但是同样的，在玩家在服务器的时候，有更多的数据包需要处理\n有更多的\"怪物区块\"（这是我在某贴里给的烂名字），也就是玩家四周生成怪物的计算\n或者说 一些刷铁塔什么的也会被卸载\n\n我觉得你可以建议你的玩家尽可能的少使用大面积的红石(悲\n或者把各种插件都试一下\n\n\n\n\nimage.png (10.4 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-4 11:55 上传\n\n\n\n\n\n"
        },
        {
            "author": "极光creeper",
            "timestamp": 1580788680,
            "txt_content": " 本帖最后由 极光creeper 于 2020-2-4 11:59 编辑 \nd_amask 发表于 2020-2-4 11:52\n这个插件之前用过。。不知道为什么服务器经常卡顿。。\n卡顿...怎么说呢 很正常\n因为缓存多，这个插件进行一系列\"gc\"操作的时候\n会在短时间内疯狂吃cpu，tps骤降什么的也是很正常的\n导致玩家卡顿\n\n我没用过这个插件，但是我觉得这类插件都不太好和jvm或者是核心的配置文件一样进行合理的限制\n就 很难消除卡顿峰值(lag spikes)\n\n我上课去了(逃\n坛友加油，希望回来的时候能抄到答案"
        },
        {
            "author": "阴阳师元素祭祀",
            "timestamp": 1580823780,
            "txt_content": "有效办法:发公告禁止大型自动化\n\n可以发一下timings么 （看看具体是红石的哪个东西卡？）\n同时自动化农场\n\n是普通的正常收割\n还是0t那种疯狂长的呢？\n\n经常掉到15 是掉多久\n既然是'低频' 那么也不应该是个严重的问题\n\n红石 特别是在1.15\n目前应该是没有什么好的解决方法 （大型应该感觉算是0t了吧X"
        }
    ]
}