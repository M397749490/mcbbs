{
    "title": "关于Function的问题？",
    "author": "388498173",
    "replyCount": 14,
    "timestamp": 1536932580,
    "txt_content": "这是我的文件路径：datapacks/zombie/data/test/functions/villager\nexecute as @e[type=villager,tag=tool,name=\"饮料机\",tag=model] run data merge entity @s[type=villager,name=\"饮料机\",tag=model,tag=tool] {CustomName:\"{\"text\":\"饮料机\"}\",Invulnerable:1b,Silent:1b,NoAI:1b,Career:1,CareerLevel:6,Team:\"zombie\",Offers:{Recipes:[{maxses:9999999,buy:{id:glass_bottle,Count:1b,tag:{display:{Name:\"\"玻璃瓶\"\",Lore:[\"用来装液体的瓶子。\"]}}},sell:{id:potion,Count:1b,tag:{display:{Name:\"\"可乐\"\",Lore:[\"碳酸饮料，最好少喝。\"]},CustomPotionColor:0,CustomPotionEffects:[{Id:5,Duration:2400,Amplifier:0}]}}},{maxUses:9999999,buy:{id:glass_bottle,Count:1b,tag:{display:{Name:\"\"玻璃瓶\"\",Lore:[\"用来装液体的瓶子。\"]}}},sell:{id:potion,Count:1b,tag:{display:{Name:\"\"雪碧\"\",Lore:[\"透心凉心飞扬。\"]},CustomPotionColor:65280,CustomPotionEffects:[{Id:1,Duration:2400,Amplifier:0}]}}}]}}\nexecute as @e[type=villager,tag=tool,name=\"煤气炉\",tag=model] run data merge entity @s[type=villager,name=\"煤气炉\",tag=model,tag=tool] {CustomName:\"{\"text\":\"煤气炉\"}\",Invulnerable:1b,Silent:1b,NoAI:1b,Career:1,CareerLevel:6,Team:\"zombie\",Offers:{Recipes:[{maxses:9999999,buy:{id:coal,Count:1b,tag:{display:{Name:\"\"煤炭\"\",Lore:[\"非常重要的资源！\"]}}},buyB:{id:beef,Count:1b,tag:{display:{Name:\"\"生牛肉\"\",Lore:[\"**牛肉，还没烤熟。\"]}}},sell:{id:cooked_beef,Count:1,tag:{display:{Name:\"\"牛排\"\",Lore:[\"澳洲西冷牛排，好吃！\"]}}}},{maxUses:9999999,buy:{id:chicken,Count:1,tag:{display:{Name:\"\"生鸡肉\"\",Lore:[\"没煮熟的鸡肉。\"]}}},buyB:{id:coal,Count:1b,tag:{display:{Name:\"\"煤炭\"\",Lore:[\"非常重要的资源！\"]}}},sell:{id:cooked_chicken,Count:1,tag:{display:{Name:\"\"熟鸡肉\"\",Lore:[\"香喷喷的鸡肉，让人回味无穷。\"]}}}},{maxUses:9999999,buy:{id:salmon,Count:1b,tag:{display:{Name:\"\"生鲑鱼\"\",Lore:[\"渔夫钓上来的鱼，一股腥味！\"]}}},buyB:{id:coal,Count:1b,tag:{display:{Name:\"\"煤炭\"\",Lore:[\"非常重要的资源！\"]}}},sell:{id:cooked_salmon,Count:1b,tag:{display:{Name:\"\"熟鲑鱼\"\",Lore:[\"熟了的鱼，没了腥味。\"]}}}},{maxUses:9999999,buy:{id:potato,Count:1b,tag:{display:{Name:\"\"马铃薯\"\",Lore:[\"不要吃发芽的哦！\"]}}},buyB:{id:coal,Count:1b,tag:{display:{Name:\"\"煤炭\"\",Lore:[\"非常重要的资源！\"]}}},sell:{id:baked_potato,Count:1b,tag:{display:{Name:\"\"烤马铃薯\"\",Lore:[\"绝对靠谱的食物来源！\"]}}}},{maxUses:9999999,buy:{id:porkchop,Count:1,tag:{display:{Name:\"\"生猪肉\"\",Lore:[\"生的猪肉，小心细菌。\"]}}},buyB:{id:coal,Count:1,tag:{display:{Name:\"\"煤炭\"\",Lore:[\"非常重要的资源！\"]}}},sell:{id:cooked_porkchop,Count:1,tag:{display:{Name:\"\"熟猪排\"\",Lore:[\"好吃的熟猪肉！\"]}}}},{maxUses:9999999,buy:{id:magenta_dye,Count:1b,tag:{display:{Name:\"\"披萨初型\"\",Lore:[\"披萨的初型。\"]}}},buyB:{id:coal,Count:1b,tag:{display:{Name:\"\"煤炭\"\",Lore:[\"非常重要的资源！\"]}}},sell:{id:pumpkin_pie,Count:1b,tag:{display:{Name:\"\"牛肉披萨\"\",Lore:[\"Chica最爱吃的披萨。\"]}}}}]}}\nexecute as @e[type=villager,tag=tool,tag=model,name=\"榨汁机\"] run data merge entity @s[type=villager,name=\"榨汁机\",tag=model,tag=tool] {CustomName:\"\"榨汁机\"\",Invulnerable:1b,Silent:1b,NoAI:1b,Career:1,CareerLevel:6,Team:\"zombie\",Offers:{Recipes:[{maxUses:9999999,buy:{id:glass_bottle,Count:1b,tag:{display:{Name:\"\"玻璃瓶\"\",Lore:[\"用来装液体的瓶子。\"]}}},buyB:{id:apple,Count:1b,tag:{display:{Name:\"\"苹果\"\",Lore:[\"一天一苹果，医生远离我。\"]}}},sell:{id:potion,Count:1,tag:{CustomPotionColor:16230657,display:{Name:\"\"苹果汁\"\",Lore:[\"好喝的苹果汁！\"]},Potion:\"long_swiftness\"}}},{maxUses:9999999,buy:{id:melon,Count:1,tag:{display:{Name:\"\"西瓜\"\",Lore:[\"好吃的西瓜，红沙瓤的！\"]}}},buyB:{id:glass_bottle,Count:1,tag:{display:{Name:\"\"玻璃瓶\"\",Lore:[\"用来装液体的瓶子。\"]}}},sell:{id:potion,Count:1,tag:{display:{Name:\"\"西瓜汁\"\",Lore:[\"清凉指止暑的西瓜水！\"]},CustomPotionColor:16711680,Potion:\"long_strength\"}}}]}}\nexecute as @e[type=villager,tag=tool,name=\"咖啡机\",tag=model] run data merge entity @s[type=villager,name=\"咖啡机\",tag=model,tag=tool] {CustomName:\"{\"text\":\"咖啡机\"}\",Invulnerable:1b,Silent:1b,NoAI:1b,Career:1,CareerLevel:6,Team:\"zombie\",Offers:{Recipes:[{maxses:9999999,buy:{id:glass_bottle,Count:1b,tag:{display:{Name:\"\"玻璃瓶\"\",Lore:[\"用来装液体的瓶子。\"]}}},buyB:{id:cocoa_beans,Count:1b,tag:{display:{Name:\"\"咖啡豆\"\",Lore:[\"意式咖啡豆。\"]}}},sell:{id:potion,Count:1b,tag:{display:{Name:\"\"咖啡\"\",Lore:[\"提神醒脑的必备选择。\"]},CustomPotionColor:6704179,CustomPotionEffects:[{Id:3,Duration:2400,Amplifier:0}]}}}]}}\nexecute as @e[type=villager,tag=tool,name=\"石磨\",tag=model] run data merge entity @s[type=villager,name=\"石磨\",tag=model,tag=tool] {CustomName:\"{\"text\":\"石磨\"}\",Invulnerable:1b,Silent:1b,NoAI:1b,Career:1,CareerLevel:6,Team:\"zombie\",Offers:{Recipes:[{maxses:9999999,buy:{id:wheat,Count:6b,tag:{display:{Name:\"\"小麦\"\",Lore:[\"麦芽的香气！\"]}}},sell:{id:pink_dye,Count:1b,tag:{display:{Name:\"\"面团\"\",Lore:[\"好的面团要有好的磨石。\"]}}}},{maxUses:9999999,buy:{id:pink_dye,Count:5b,tag:{display:{Name:\"\"面团\"\",Lore:[\"好的面团要有好的磨石。\"]}}},sell:{id:bread,Count:2b,tag:{display:{Name:\"\"面包\"\",Lore:[\"很充饥的食物。\"]}}}}]}}\nexecute as @e[type=villager,tag=tool,name=\"工作台\",tag=model] run data merge entity @s[type=villager,name=\"工作台\",tag=model,tag=tool] {CustomName:\"{\"text\":\"工作台\"}\",Invulnerable:1b,Silent:1b,NoAI:1b,Career:1,CareerLevel:6,Team:\"zombie\",Offers:{Recipes:[{maxUses:9999999,buy:{id:pink_dye,Count:1b,tag:{display:{Name:\"\"面团\"\",Lore:[\"好的面团要有好的磨石。\"]}}},buyB:{id:beef,Count:5b,tag:{display:{Name:\"\"生牛肉\"\",Lore:[\"**牛肉，还没烤熟。\"]}}},sell:{id:magenta_dye,Count:1b,tag:{display:{Name:\"\"披萨初型\"\",Lore:[\"披萨的初型。\"]}}}},{maxUses:9999999,buy:{id:potato,Count:1b,tag:{display:{Name:\"\"马铃薯\"\",Lore:[\"不要吃发芽的哦！\"]}}},sell:{id:dandelion_yellow,Count:1b,tag:{display:{Name:\"\"切条的马铃薯\"\",Lore:[\"已经切成条的马铃薯。\"]}}}},{maxUses:9999999,buy:{id:cooked_beef,Count:1b,tag:{display:{Name:\"\"牛排\"\",Lore:[\"澳洲西冷牛排，好吃！\"]}}},buyB:{id:bread,Count:2b,tag:{display:{Name:\"\"面包\"\",Lore:[\"很充饥的食物。\"]}}},sell:{id:cooked_rabbit,Count:1b,tag:{display:{Name:\"\"汉堡包\"\",Lore:[\"平时的家常便饭，末世的上等佳肴。\"]}}}}]}}复制代码然后这是六条指令，在一个叫villager.mcfunction的文件里。\n附上图片。但是我的村民怎么一点反应都没有？交易还是原来的交易，求解决方法……\n",
    "replies": [
        {
            "author": "ruhuasiyu",
            "timestamp": 1536932580,
            "txt_content": "388498173 发表于 2018-9-15 11:01\n你先召唤村民，然后手动执行函数是否有问题……\n\n\n\n再不行你去看logs/latest.log吧，进入游戏reload，然后看这个日志文件有没有提示出错"
        },
        {
            "author": "388498173",
            "timestamp": 1536932700,
            "txt_content": "附：datapacks/zombie/data/minecraft/tags/functions里有一个命名为tick的文件，{\n    \"values\": [\n        \"test:lobby/_main\"\n    ]\n}复制代码\n这是内容。"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1536934920,
            "txt_content": "村民有指定标签吗？"
        },
        {
            "author": "388498173",
            "timestamp": 1536937740,
            "txt_content": "ruhuasiyu 发表于 2018-9-14 22:22\n村民有指定标签吗？\n有啊！tool和model两个标签合格了村民才会被强制该数据，而我生成的村民数据都合格了啊！"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1536965580,
            "txt_content": "你怎么知道合格了？我们又怎么知道你生成的是合格的？不知道，所以只能检测...\nexecute as @e[type=villager,tag=tool] run say tool\nexecute as @e[type=villager,tag=tool,tag=model] run say tool,model\nexecute as @e[type=villager,tag=tool,tag=model,name=\"饮料机\"] run say tool,model,drunk\n\n命令块直接执行function，没有套execute的意义\n用@s就不必重复填写选择器了，所以villager.mcfunction里6个命令的前部分改为\nexecute as @e[type=villager,tag=tool,name=\"饮料机\",tag=model] run data merge entity @s {...\nexecute as @e[type=villager,tag=tool,name=\"煤气炉\",tag=model] run data merge entity @s {...复制代码\n\n然后6条命令本身并没有问题..."
        },
        {
            "author": "388498173",
            "timestamp": 1536975480,
            "txt_content": "⊙v⊙ 发表于 2018-9-15 06:53\n你怎么知道合格了？我们又怎么知道你生成的是合格的？不知道，所以只能检测...\nexecute as @e[type=village ...\nsummon villager ~ ~ ~ {CustomName:\"\\\"饮料机\\\"\",Tags:[\"model\",\"tool\"]}怎么不合格了？用scoreboard players list检测都没问题。"
        },
        {
            "author": "388498173",
            "timestamp": 1536976200,
            "txt_content": "388498173 发表于 2018-9-15 09:38\nsummon villager ~ ~ ~ {CustomName:\"\\\"饮料机\\\"\",Tags:[\"model\",\"tool\"]}怎么不合格了？用scoreboard pl ...\n但是生成出来的村民竟然没有该交易，这个function是我用循环性命令方块保持开启执行的。如果直接执行/function test:villager/villager应该也没问题吧？"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1536976800,
            "txt_content": "388498173 发表于 2018-9-15 09:50\n但是生成出来的村民竟然没有该交易，这个function是我用循环性命令方块保持开启执行的。如果直接执行/fun ...\n指令没有问题。你确定你的函数位置位于datapacks/zombie/data/test/functions/villager/villager.mcfunction?"
        },
        {
            "author": "388498173",
            "timestamp": 1536976980,
            "txt_content": ""
        },
        {
            "author": "388498173",
            "timestamp": 1536980460,
            "txt_content": "ruhuasiyu 发表于 2018-9-15 10:00\n指令没有问题。你确定你的函数位置位于datapacks/zombie/data/test/functions/villager/villager.mcfunct ...\n"
        },
        {
            "author": "388498173",
            "timestamp": 1536986220,
            "txt_content": "ruhuasiyu 发表于 2018-9-15 11:36\n你先召唤村民，然后手动执行函数是否有问题……\n如何手动执行函数啊？我刚学这个还不怎么会啊！"
        },
        {
            "author": "388498173",
            "timestamp": 1536986760,
            "txt_content": " 本帖最后由 388498173 于 2018-9-15 14:36 编辑 \nruhuasiyu 发表于 2018-9-15 11:36\n你先召唤村民，然后手动执行函数是否有问题……\n而且我试着用reload指令，还有先生成村民，再用datapack disable \"file/zombie\"，之后再重新使用datapack enable \"file/zombie\"还是不行啊！但是我试着用另一个新存档，使用原版模组到是没问题。"
        },
        {
            "author": "chyx",
            "timestamp": 1536999600,
            "txt_content": "388498173 发表于 2018-9-15 12:37\n如何手动执行函数啊？我刚学这个还不怎么会啊！\n第一次见到只能用load/reload使用函数的人\n\n\n/function 指令就好了\n/function也可以用在函数里"
        },
        {
            "author": "388498173",
            "timestamp": 1537000920,
            "txt_content": "ruhuasiyu 发表于 2018-9-14 21:43\n你先召唤村民，然后手动执行函数是否有问题……\n我很纳闷！为什么Function指令用在僵尸身上有效，但用在村民身上就失效了呢？"
        }
    ]
}