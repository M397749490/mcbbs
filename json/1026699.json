{
    "title": "服务端内存泄露",
    "author": "我爱魁拔",
    "replyCount": 12,
    "timestamp": 1587618660,
    "txt_content": "一个玩家的时候内存占用约2.5g 运行一段时间后 一个玩家内存占用6g左右 gc无效。\n平时10几个玩家内存占用8g多，10几个玩家运行10几个小时后 占用9g多。\n\nheapdump 链接：https://pan.baidu.com/s/1452BRkc2hK-dHWzJaxuwiw    提取码：19sa \n\n@GiNYAi \n\n\n\n",
    "replies": [
        {
            "author": "GiNYAi",
            "timestamp": 1587618660,
            "txt_content": " 本帖最后由 GiNYAi 于 2020-4-24 03:01 编辑 \n我爱魁拔 发表于 2020-4-23 15:44\n百度云的话请看一下私聊\n看了一下 似乎是记录的地图的结构的数据过多\n\n似乎是矿井的数据 (子世界的 似乎是维度22 和维度26）\n\\data\\Mineshaft.dat\n\n直接删掉掉应该就能够有所帮助\n副作用应该会有一些（主要应该是生成到一半的矿井）\n\n而在sponge中矿井的存储似乎是被默认优化掉的\n"
        },
        {
            "author": "结城希亚",
            "timestamp": 1587619020,
            "txt_content": "版本多少？我记得1.7.10的内存泄漏是无解的，高版本就没事"
        },
        {
            "author": "我爱魁拔",
            "timestamp": 1587620460,
            "txt_content": "结城希亚 发表于 2020-4-23 13:17\n版本多少？我记得1.7.10的内存泄漏是无解的，高版本就没事\n1.12.2 catseever"
        },
        {
            "author": "我爱魁拔",
            "timestamp": 1587621780,
            "txt_content": "InitAuther97 发表于 2020-4-23 13:19\nheapdump得下十年才能下完啊，能否先提供一下服务器的详细信息？\n插件 mod \n \ncatserver 1.12.2"
        },
        {
            "author": "尼克尼",
            "timestamp": 1587621780,
            "txt_content": "timings报告和服务端log发一下吧。"
        },
        {
            "author": "GiNYAi",
            "timestamp": 1587623640,
            "txt_content": "由于Pandownload已经没了 我没有办法下载百度网盘\n\n可以的话希望能够分割压缩 然后用其他的云盘上传一下 \nhttps://cowtransfer.com/\n或者 https://www.weiyun.com/\n\n然后提供一下java的启动参数"
        },
        {
            "author": "我爱魁拔",
            "timestamp": 1587627840,
            "txt_content": " 本帖最后由 我爱魁拔 于 2020-4-23 15:45 编辑 \nGiNYAi 发表于 2020-4-23 14:34\n由于Pandownload已经没了 我没有办法下载百度网盘\n\n可以的话希望能够分割压缩 然后用其他的云盘上传一下 @echo off\ntitle CatServer1.12.2\n:start\njava -server -XX:+AggressiveOpts -XX:+UseCompressedOops -XX:+UseG1GC -Xmx10800M -Xms8800M -jar CatServer-125ce15-universal.jar\necho 10秒后重启服务器,如需关闭服务器请直接关闭该窗口\n@ping 127.0.0.1 -n 10 >nul\ngoto start\npause复制代码\n百度云的话请看一下私聊"
        },
        {
            "author": "我爱魁拔",
            "timestamp": 1587692220,
            "txt_content": " 本帖最后由 我爱魁拔 于 2020-4-24 13:04 编辑 \nGiNYAi 发表于 2020-4-24 01:57\n看了一下 似乎是记录的地图的结构的数据过多\n\n似乎是矿井的数据 (子世界的 似乎是维度22 和维度26）\n好像没有22世界\n\n\n\n\n无标题.png (22.37 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-24 09:37 上传\n\n\n\n\nzy28 test 27 sc14 hd16 BackupInvWorld26\n\n\n\n\n2.png (39.79 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-24 13:04 上传\n\n\n\n\n\n"
        },
        {
            "author": "GiNYAi",
            "timestamp": 1587707880,
            "txt_content": "我爱魁拔 发表于 2020-4-24 09:37\n好像没有22世界zy28 test 27 sc14 hd16 BackupInvWorld26\n那么很明显是在磁盘中大小最大的\n\n昨天晚上有点困看错了 （是28"
        },
        {
            "author": "我爱魁拔",
            "timestamp": 1587722940,
            "txt_content": "GiNYAi 发表于 2020-4-24 13:58\n那么很明显是在磁盘中大小最大的\n\n昨天晚上有点困看错了 （是28\n效果很显著，不过内存占用一直在波动\n\n\n\n\n3.png (120.92 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-24 18:09 上传\n\n\n\n\n\n"
        },
        {
            "author": "GiNYAi",
            "timestamp": 1587724020,
            "txt_content": "我爱魁拔 发表于 2020-4-24 18:09\n效果很显著，不过内存占用一直在波动\n波动才是正常的 \n到达条件触发垃圾回收然后跌下去\n"
        },
        {
            "author": "我爱魁拔",
            "timestamp": 1587729660,
            "txt_content": "GiNYAi 发表于 2020-4-24 18:27\n波动才是正常的 \n到达条件触发垃圾回收然后跌下去\n感觉1分钟内内存垃圾增加3g 然后垃圾回收，增长速度好像有点快，还需要再生成heapdump分析一下吗"
        }
    ]
}