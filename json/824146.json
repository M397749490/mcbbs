{
    "title": "插件是如何通过reload指令来重载的？",
    "author": "诺凡克罗诺",
    "replyCount": 10,
    "timestamp": 1539698700,
    "txt_content": "意思是给插件加一个reload指令，但是不太懂整…",
    "replies": [
        {
            "author": "弱鸡绿毛怪",
            "timestamp": 1539698760,
            "txt_content": "Plugin.saveConfig()\nPlugin.saveDefaultConfig()\nPlugin.reloadConfig()\n或者是\nFileConfiguration.save(File file)"
        },
        {
            "author": "诺凡克罗诺",
            "timestamp": 1539698940,
            "txt_content": "MagicLocyDragon 发表于 2018-10-16 22:06\nPlugin.saveConfig()\nPlugin.saveDefaultConfig()\nPlugin.reloadConfig()\n我知道是重载配置文件，但是，仿佛重载了配置文件，监听或者定时任务里调用配置文件时，还是用的以前的数据"
        },
        {
            "author": "海螺螺",
            "timestamp": 1539702360,
            "txt_content": "835937470 发表于 2018-10-16 22:09\n我知道是重载配置文件，但是，仿佛重载了配置文件，监听或者定时任务里调用配置文件时，还是用的以前的数 ...\n调用以前的数据是因为大概你做了一个原来配置实例的拷贝，并且没有更新。你的配置重置调用完毕后，可以使用plugin.getConfig()获得新的配置实例。\n\n以下为bukkit内部如何重载插件，因为我第一眼看到标题感觉问的应该是这个\n\n首先调用你的onDisable\n然后bukkit会把你插件注册的监听器，定时任务，服务，message channel以及其他通过标准bukkitapi注册的东西卸载掉\n然后bukkit会卸载掉你的插件实例，卸载掉插件对应的类加载器，由于类加载器原理，如果你使用nms注册了一个pathfinder(假如)，bukkit不能卸载，从而导致失败的类卸载，内置的reload命令就很有可能出现bug\n然后bukkit按照标准的加载步骤重新加载你的插件\n\n如果你觉得我说的牛逼帮到了你可以评个分\n"
        },
        {
            "author": "雾晓啦",
            "timestamp": 1539756060,
            "txt_content": "reload之后要重新链接服务器吧。\n\n刚开始开发的开发者这样开口道"
        },
        {
            "author": "诺凡克罗诺",
            "timestamp": 1539757380,
            "txt_content": "754503921 发表于 2018-10-16 23:06\n调用以前的数据是因为大概你做了一个原来配置实例的拷贝，并且没有更新。你的配置重置调用完毕后，可以使 ...\n太强了，一句也没听懂"
        },
        {
            "author": "North丶Kraken",
            "timestamp": 1540005000,
            "txt_content": "reloadConfig 和 file.save / file.load 只是重新载入了配置文件\n插件里以获取的变量没有重新获取\n\n你要写一个方法来让变量获取一下数值。。"
        },
        {
            "author": "脏鬼鬼",
            "timestamp": 1540015140,
            "txt_content": "我记得在服务器里使用reload指令后，onDisable和onEnable方**自动掉用的吧。直接把加载和卸载的代码卸载这两个方法里就得了"
        },
        {
            "author": "cp666",
            "timestamp": 1572031920,
            "txt_content": "North丶Kraken 发表于 2018-10-20 11:10\nreloadConfig 和 file.save / file.load 只是重新载入了配置文件\n插件里以获取的变量没有重新获取\n大佬能给个思路吗，我现在也是这个问题"
        },
        {
            "author": "North丶Kraken",
            "timestamp": 1572431880,
            "txt_content": "cp666 发表于 2019-10-26 03:32\n大佬能给个思路吗，我现在也是这个问题\n数据载内存嘛。\n比如你有个变量，叫它插件开关吧 \nboolean enable = false;复制代码\n然后你要它，由 config.yml 来设置\n那你得在启动的时候赋值吧，那就 onEnable 里加一条：\nenable = this.getConfig().getBoolean(\"enable\");复制代码\n好了，接下来，你配置文件里改了 这个 参数。那你要reload\n那你 reload 执行的代码里就要把，上面那句赋值的语句写进去。\n写的有点乱，大概理解一下吧…………"
        },
        {
            "author": "1042571047",
            "timestamp": 1572464460,
            "txt_content": "在接受reload命令的地方对你需要读取的变量全部重新赋值就行了 这个最简单最直白"
        }
    ]
}