{
    "title": "服务器在玩家登入时会卡住 watchdog显示超时",
    "author": "ncbql",
    "replyCount": 5,
    "timestamp": 1582433700,
    "txt_content": " 本帖最后由 ncbql 于 2020-2-23 13:46 编辑 \n\n报错日志:\n[12:19:38] [Paper Watchdog Thread/ERROR]: Current Thread: Server thread\n[12:19:38] [Paper Watchdog Thread/ERROR]:       PID: 24 | Suspended: false | Native: false | State: BLOCKED\n[12:19:38] [Paper Watchdog Thread/ERROR]:       Stack:\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.UserCache.a(UserCache.java:112)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.UserCache.a(UserCache.java:108)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.PlayerList.a(PlayerList.java:103)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.LoginListener.c(LoginListener.java:174)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.LoginListener.tick(LoginListener.java:65)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.NetworkManager.a(NetworkManager.java:256)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.ServerConnection.c(ServerConnection.java:139)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.MinecraftServer.b(MinecraftServer.java:1269)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.DedicatedServer.b(DedicatedServer.java:430)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.MinecraftServer.a(MinecraftServer.java:1112)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               net.minecraft.server.v1_15_R1.MinecraftServer.run(MinecraftServer.java:934)\n[12:19:38] [Paper Watchdog Thread/ERROR]:               java.lang.Thread.run(Thread.java:748)复制代码报错只有上面一段 玩家一进入就卡死服务器然后watchdog显示上面的函数栈 但不是一开服玩家进入就出现 而是开服了一会儿玩家进入才出现\n\n尝试删除 usercache.json 和修改spigot.yml里的 save-user-cache-on-stop-only为true但仍不奏效\n尝试反编译服务端代码但找到这个函数后发现都是直接操作Map 但是这个函数有一个synchronized关键字 猜测被其他线程度塞造成死锁\n\n\n报错代码只有上面一段\n\n\n服务端信息:\n1.15.2-paperspigot-114\ncentos\njava8\n\n\n插件列表:\nCoreProtect-2.18.1 Dynmap-3.0-beta10 ESSX2.17.2(Chat Protect Spawn) LuckPerms-5.0.70 Openinv-4.0.8 PlugMan-2.1.7 TreeAssist-6.0.81 WE-7.0.1",
    "replies": [
        {
            "author": "xia_chen",
            "timestamp": 1582436040,
            "txt_content": "essx不支持1.15。试试删除看看。如果还没有解决查看装又的插件是否支持你现在的版本。"
        },
        {
            "author": "ncbql",
            "timestamp": 1582436700,
            "txt_content": "xia_chen 发表于 2020-2-23 13:34\nessx不支持1.15。试试删除看看。如果还没有解决查看装又的插件是否支持你现在的版本。 ...\n已升级到支持1.15的2.17.2版本 但仍不奏效"
        },
        {
            "author": "xia_chen",
            "timestamp": 1582436820,
            "txt_content": "ncbql 发表于 2020-2-23 13:45\n已升级到支持1.15的2.17.2版本 但仍不奏效\n因为不支持啊，意思就是说ess作者没有更新到，新版本。只能不用删除，ess最新版不是和原本配搭的。"
        },
        {
            "author": "ncbql",
            "timestamp": 1582437360,
            "txt_content": "xia_chen 发表于 2020-2-23 13:47\n因为不支持啊，意思就是说ess作者没有更新到，新版本。只能不用删除，ess最新版不是和原本配搭的。 ...\n最新版支持1.15啊 20小时前刚更新的版本\nhttps://github.com/EssentialsX/Essentials/releases\nThis release comes with full 1.15.x support\n和1.14.4 and 1.15.2 - these versions are regularly tested against"
        },
        {
            "author": "AzureHanChen",
            "timestamp": 1582442940,
            "txt_content": "貌似是有关监听登录事件的插件的问题?\n个人感觉网页地图可能性较大,尝试删除排查一下?"
        }
    ]
}