{
    "title": "Paper端中view-distance与预期不相符",
    "author": "EmptyLava",
    "replyCount": 4,
    "timestamp": 1596973020,
    "txt_content": " 本帖最后由 EmptyLava 于 2020-8-9 19:38 编辑 \n\n如题，无图(主要是懒得开端再截图了)\n1.13-的服务器内区块加载规则是加载玩家周围的[(2n+1)^2]个区块(n=view-distance数值)，这个和一般对view-distance的解释是吻合的\n在1.14变为了[(2n+3)^2]个区块，1.15变成了[(2n+5)]^2的区块，1.16.1没看，但是应该和1.15一样\n\n这里说的都是在出生点，且Paper.yml关闭了keep-spawn-loaded=false，Spigot.yml中view-distance与server.properties相同数值。而且玩家能看到的区块数只是[2n+1]^2，外围区块就像\"缓冲区\"一样，跑过去才会接收到区块，但是不算新加载的区块\n\n1.12/1.13为最新build\n1.14.4 为build 243\n1.15.2 为build 384(最新为build 385，但肯定和新版本没关系)\n\n仅需要一个合理的解释，放链接也可以。或者用craftbukkit帮我测试一下1.12/1.14/1.15是否也有这样的问题，一样可以给最佳\n",
    "replies": [
        {
            "author": "阳炎の风",
            "timestamp": 1597055820,
            "txt_content": "\n    新人路过，有误请千万轻点吐槽X\n\n    说实话... 这个问题可能不太好说？\n    毕竟原版一个策略，spigot改一下策略，paper可能在某个版本也动过一下\n\n    简单地看，只是因为外面那两圈不是强加载的问题？"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1597058100,
            "txt_content": "阳炎の风 发表于 2020-8-10 18:37\n新人路过，有误请千万轻点吐槽X\n\n    说实话... 这个问题可能不太好说？由玩家加载的标签。“玩家”标签的加载等级为31。玩家的加载范围内的区块都会获得“玩家”标签。\n\n玩家的加载范围：\n玩家的加载范围是一个以玩家为中心正方形。\n单人游戏中，正方形的边长取决于选项中的“渲染距离”：边长 = 渲染距离 × 2 + 1.\n多人游戏中，正方形的边长取决于server.properties里的“view-distance”：边长 = view-distance × 2 + 1.\n例如，当“渲染距离”为5个区块时，强加载区块有11×11，外边围一圈弱加载区块，再围一圈加载边界。外面那一圈貌似的确不是强加载，但是我是想知道为什么这几个版本间有差异"
        },
        {
            "author": "阳炎の风",
            "timestamp": 1599735360,
            "txt_content": "\n恩... 好久不见之前一直都忘记这件事了，今天教师节早放，上论坛才想起来 233楼主是怎么计算的呢？是看客户端的client chunk cache 还是 服务端连续gc两次的区块差"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1599833700,
            "txt_content": "阳炎の风 发表于 2020-9-10 18:56\n恩... 好久不见之前一直都忘记这件事了，今天教师节早放，上论坛才想起来 233楼主是怎么计算的呢？是看客 ...\n根据gc的区块数量推导的区块数\n\nclient chunk cache没有看，也许是不包括外层一圈"
        }
    ]
}