{
    "title": "启动器登陆模块标准化尝试",
    "author": "zhh0000zhh",
    "replyCount": 19,
    "timestamp": 1377072600,
    "txt_content": " 本帖最后由 zhh0000zhh 于 2015-1-3 23:11 编辑 \n\n近日我与bangbang就启动器插件问题进行了讨论，决定统一BMCL与MCLauncherBN的插件格式\n同时欢迎其他启动器加入该标准\n\n今后将更新为SharpLoginApi，正在进行协议商讨\n\n由于MineLogin已经彻底死翘翘，故删除MineLogin插件！\n\nBMCL （点击进入）\n使用方法：放入auths文件夹中(如不存在，请创建)\n目前兼容插件版本：V2\n兼容V2最小版本：V2.9\n兼容V1最小版本：V2.4\n\nMCLauncherBN （点击进入）\n使用方法：放入login文件夹中(如不存在，请创建)\n目前兼容插件版本：V2\n兼容V2最小版本：Release3.0\n兼容V1最小版本：Beta2.22\n\n第一代插件标准说明\n结构说明\n\ntwitch使用方法：\nhttp://www.mcbbs.net/thread-198946-1-1.html\n\n结构体LoginInfo用来存储登陆成功后的数据\nStructure LoginInfo\n      Dim UN As String '显示的用户名\n      Dim UID As String 'User ID\n      Dim SID As String 'Session ID\n      Dim Suc As Boolean '登陆是否成功\n      Dim Errinfo As String '失败错误信息\n      Dim OtherInfo As String '其他信息\n      Dim Client_identifier As String 'yggdrasil所需信息，见wiki.vg\nEnd Structure\nLogin函数用来登陆\nGetName函数获取登陆方式的名称\nGetVer用于获取登陆兼容的版本，目前为1，启动器作者设计时应注意检测此值，当不为1时提示用户更新启动器\n\nDLL定义\nVB.net\nPublic Class Login '此处类名称可自定义\n    Public Structure LoginInfo '此结构体不可修改\n        Dim UN As String\n        Dim UID As String\n        Dim SID As String\n        Dim Suc As Boolean\n        Dim Errinfo As String\n        Dim OtherInfo As String\n        Dim Client_identifier As String\n    End Structure\n    Public Function Login(UserName As String, Password As String, Optional Client_identifier As String = \"\", Optional Language As String = \"zh-cn\") As Login.LoginInfo ’此函数定义不可修改\n        '登陆部分\n        Dim RT As LoginInfo\n        Return RT\n    End Function\n    Public Function GetVer() As Long ’此函数不可修改\n        Return 1\n        '代表为第一代标准化登陆插件\n    End Function\n    Public Function GetName(Optional Language As String = \"zh-cn\") As String ’此函数定义不可修改\n        Return Nothing\n        '返回使用的名称\n    End Function\nEnd Class\n\nC#\npublic class _Login //此处类名称可自定义\n{\n        public struct LoginInfo //此结构体不可修改\n        {\n                public string UN;\n                public string UID;\n                public string SID;\n                public bool Suc;\n                public string Errinfo;\n                public string OtherInfo;\n                public string Client_identifier;\n        }\n        public Login.LoginInfo Login(string UserName, string Password, string Client_identifier = \"\", string Language = \"zh-cn\")\n        //此函数定义不可修改\n       {\n                //登陆部分\n                LoginInfo RT;\n                return RT;\n        }\n        public long GetVer()\n        //此函数不可修改\n        {\n                return 1;\n                //代表为第一代标准化登陆插件\n        }\n        public string GetName(string Language = \"zh-cn\")\n        //此函数定义不可修改\n        {\n                return null;\n                //返回使用的名称\n        }\n}\n\n\n启动器调用(第一代)\nVB.net\n    Structure LoginInfo\n        Dim UN As String\n        Dim UID As String\n        Dim SID As String\n        Dim Suc As Boolean\n        Dim Errinfo As String\n        Dim OtherInfo As String\n        Dim Client_identifier As String\n    End Structure\n    Function GetName(DLLpath As String) As String\n        Dim a As Reflection.Assembly\n        Dim obj As Object = Nothing\n        Dim m As System.Reflection.MethodInfo = Nothing\n        a = Reflection.Assembly.LoadFile(DLLpath)\n        For Each classtemp As Type In a.GetTypes\n            Dim t As String\n            t = classtemp.FullName\n            Dim strs() As String\n            strs = t.Split(\".\")\n            If classtemp.GetMethod(\"GetName\") <> Nothing Then\n                m = classtemp.GetMethod(\"GetName\")\n                obj = a.CreateInstance(classtemp.FullName)\n            End If\n        Next\n        Return m.Invoke(obj, {\"zh-cn\"})\n    End Function\n    Function GetVer(DLLpath As String) As String\n        Dim a As Reflection.Assembly\n        Dim obj As Object = Nothing\n        Dim m As System.Reflection.MethodInfo = Nothing\n        a = Reflection.Assembly.LoadFile(DLLpath)\n        For Each classtemp As Type In a.GetTypes\n            Dim t As String\n            t = classtemp.FullName\n            Dim strs() As String\n            strs = t.Split(\".\")\n            If classtemp.GetMethod(\"GetVer\") <> Nothing Then\n                m = classtemp.GetMethod(\"GetVer\")\n                obj = a.CreateInstance(classtemp.FullName)\n            End If\n        Next\n        Return m.Invoke(obj, {})\n    End Function\n    Function DLLLogin(DLLpath As String, username As String, password As String, Optional Client_identifier As String = \"\", Optional Lanauge As String = \"zh-cn\") As LoginInfo\n        Dim a As Reflection.Assembly\n        Dim obj As Object = Nothing\n        Dim LoginInfo As Object\n        Dim m As System.Reflection.MethodInfo = Nothing\n        Dim LI As LoginInfo\n        a = Reflection.Assembly.LoadFile(DLLpath)\n        For Each classtemp As Type In a.GetTypes\n            Dim str As String\n            str = classtemp.FullName\n            Dim strs() As String\n            strs = str.Split(\".\")\n            If InStr(strs(UBound(strs)), \"+logininfo\", CompareMethod.Text) > 0 Then\n                LoginInfo = a.CreateInstance(classtemp.FullName)\n            End If\n            If classtemp.GetMethod(\"Login\") <> Nothing Then\n                m = classtemp.GetMethod(\"Login\")\n                obj = a.CreateInstance(classtemp.FullName)\n            End If\n        Next\n        LoginInfo = m.Invoke(obj, {username, password, Client_identifier, Lanauge})\n        Dim ww As Type\n        ww = LoginInfo.GetType\n        LI.Suc = ww.GetField(\"Suc\").GetValue(LoginInfo)\n        If LI.Suc Then\n            LI.UN = ww.GetField(\"UN\").GetValue(LoginInfo)\n            LI.UID = ww.GetField(\"UID\").GetValue(LoginInfo)\n            LI.SID = ww.GetField(\"SID\").GetValue(LoginInfo)\n            LI.OtherInfo = ww.GetField(\"OtherInfo\").GetValue(LoginInfo)\n            LI.Client_identifier = ww.GetField(\"Client_identifier\").GetValue(LoginInfo)\n        Else\n            LI.Errinfo = ww.GetField(\"Errinfo\").GetValue(LoginInfo)\n        End If\n        Return LI\n    End Function\n\nC#\n暂无代码\n\n\n第二代插件标准说明\n结构说明\n结构体LoginInfo用来存储登陆成功后的数据\nStructure LoginInfo\n      Dim UN As String '显示的用户名 '仅为兼容第一代，如不兼容可无此项目\n      Dim UID As String 'User ID  '仅为兼容第一代，如不兼容可无此项目\n      Dim SID As String 'Session ID '仅为兼容第一代，如不兼容可无此项目\n      Dim Suc As Boolean '登陆是否成功\n      Dim Errinfo As String '失败错误信息\n      Dim OtherInfo As String '其他信息 '仅为兼容第一代，如不兼容可无此项目\n      Dim OutInfo As String '第二代输出信息\n      Dim Client_identifier As String  '仅为兼容第一代，如不兼容可无此项目\nEnd Structure\nLogin函数用来登陆\nGetName函数获取登陆方式的名称\nGetVer用于获取登陆兼容的版本，目前为1，启动器作者设计时应注意检测此值，当不为1时提示用户更新启动器\nGetVersion用于获取插件兼容的最高版本，如GetVersion(1)如返回2则不兼容第一代标准，如返回1则兼容\nOutInfo格式\nminecraftArguments:Value\nminecraftArguments1:Value1\n换行标准为CR+LF\n如：\n${auth_player_name}:UserName\n${auth_session}:SID\n...\n\nDLL定义\nVB.net\nPublic Class Login '此处类名称可自定义\n    Structure LoginInfo '此结构体名称不可修改，内容可按注释修改\n          Dim UN As String '显示的用户名 '仅为兼容第一代，如不兼容可无此项目\n          Dim UID As String 'User ID  '仅为兼容第一代，如不兼容可无此项目\n          Dim SID As String 'Session ID '仅为兼容第一代，如不兼容可无此项目\n          Dim OtherInfo As String '其他信息 '仅为兼容第一代，如不兼容可无此项目\n          Dim Client_identifier As String  '仅为兼容第一代，如不兼容可无此项目\n          Dim Suc As Boolean '登陆是否成功\n          Dim Errinfo As String '失败错误信息\n          Dim OutInfo As String '第二代输出信息\n    End Structure\n    Public Function Login(UserName As String, Password As String, Optional Client_identifier As String = \"\", Optional Language As String = \"zh-cn\") As Login.LoginInfo ’此函数定义不可修改\n        '登陆部分\n        Dim RT As LoginInfo\n        Return RT\n    End Function\n    Public Function GetVer() As Long ’此函数作为向下兼容存在\n        Return 1\n        '代表为第一代标准化登陆插件，如不兼容，则Return 2\n    End Function\n    Public Function GetName(Optional Language As String = \"zh-cn\") As String ’此函数定义不可修改\n        Return Nothing\n        '返回使用的名称\n    End Function\n    Public Function GetVersion(Version As Long) As Long ‘此函数定义不可修改\n        Select Case Version\n            Case 1\n                Return 1\n            Case Else\n                Return 2\n        End Select\n        '如不兼容第一代标准，则只需return 2\n    End Function\nEnd Class\n\nC#\npublic class Login\n{\n//此处类名称可自定义\npublic struct LoginInfo\n{\n  //此结构体名称不可修改，内容可按注释修改\n   //显示的用户名 '仅为兼容第一代，如不兼容可无此项目\n  public string UN;\n   //User ID  '仅为兼容第一代，如不兼容可无此项目\n  public string UID;\n   //Session ID '仅为兼容第一代，如不兼容可无此项目\n  public string SID;\n   //其他信息 '仅为兼容第一代，如不兼容可无此项目\n  public string OtherInfo;\n   //仅为兼容第一代，如不兼容可无此项目\n  public string Client_identifier;\n   //登陆是否成功\n  public bool Suc;\n   //失败错误信息\n  public string Errinfo;\n   //第二代输出信息\n  public string OutInfo;\n}\npublic Login.LoginInfo Login(string UserName, string Password, string Client_identifier = \"\", string Language = \"zh-cn\")\n{\n  //此函数定义不可修改\n  //登陆部分\n  LoginInfo RT = default(LoginInfo);\n  return RT;\n}\npublic long GetVer()\n{\n  //此函数作为向下兼容存在\n  return 1;\n  //代表为第一代标准化登陆插件，如不兼容，则Return 2\n}\npublic string GetName(string Language = \"zh-cn\")\n{\n  //此函数定义不可修改\n  return null;\n  //返回使用的名称\n}\npublic long GetVersion(long Version)\n{\n  //此函数定义不可修改\n  switch (Version) {\n   case 1:\n    return 1;\n   default:\n    return 2;\n  }\n  //如不兼容第一代标准，则只需return 2\n}\n}\n\n启动器调用(第二代)\nVB.net\n    Structure LoginInfo\n          Dim UN As String '显示的用户名 '仅为兼容第一代，如不兼容可无此项目\n          Dim UID As String 'User ID  '仅为兼容第一代，如不兼容可无此项目\n          Dim SID As String 'Session ID '仅为兼容第一代，如不兼容可无此项目\n          Dim OtherInfo As String '其他信息 '仅为兼容第一代，如不兼容可无此项目\n          Dim Client_identifier As String  '仅为兼容第一代，如不兼容可无此项目\n          Dim Suc As Boolean '登陆是否成功\n          Dim Errinfo As String '失败错误信息\n          Dim OutInfo As String '第二代输出信息\n    End Structure\n    Function GetFun(FunName As String, DLLPath As String) As Object()\n        Dim a As Reflection.Assembly\n        Dim obj As Object = Nothing\n        Dim m As System.Reflection.MethodInfo = Nothing\n        a = Reflection.Assembly.LoadFile(DLLPath)\n        For Each classtemp As Type In a.GetTypes\n            Dim t As String\n            t = classtemp.FullName\n            Dim strs() As String\n            strs = t.Split(\".\")\n            If classtemp.GetMethod(FunName) <> Nothing Then\n                m = classtemp.GetMethod(FunName)\n                obj = a.CreateInstance(classtemp.FullName)\n            End If\n        Next\n        If m Is Nothing Then\n            Return {\"0\"}\n        End If\n        Return {m, obj}\n    End Function\n    Function GetVer(DLLpath As String) As String\n        Dim obj1 As Object()\n        Dim m As System.Reflection.MethodInfo\n        obj1 = GetFun(\"GetVersion\", \"t:\\yggdrasil.dll\")\n        If obj1.Length = 1 Then\n            Return \"1\"\n        Else\n            m = obj1(0)\n            Return m.Invoke(obj1(1), {2})\n        End If\n    End Function\n    Function GetName(DLLpath As String) As String\n        Dim a As Reflection.Assembly\n        Dim obj As Object = Nothing\n        Dim m As System.Reflection.MethodInfo = Nothing\n        a = Reflection.Assembly.LoadFile(DLLpath)\n        For Each classtemp As Type In a.GetTypes\n            Dim t As String\n            t = classtemp.FullName\n            Dim strs() As String\n            strs = t.Split(\".\")\n            If classtemp.GetMethod(\"GetName\") <> Nothing Then\n                m = classtemp.GetMethod(\"GetName\")\n                obj = a.CreateInstance(classtemp.FullName)\n            End If\n        Next\n        Return m.Invoke(obj, {\"zh-cn\"})\n    End Function\n    Function DLLLogin(DLLpath As String, username As String, password As String, Optional Client_identifier As String = \"\", Optional Lanauge As String = \"zh-cn\") As LoginInfo\n        Dim a As Reflection.Assembly\n        Dim obj As Object = Nothing\n        Dim LoginInfo As Object\n        Dim m As System.Reflection.MethodInfo = Nothing\n        Dim LI As LoginInfo\n        a = Reflection.Assembly.LoadFile(DLLpath)\n        For Each classtemp As Type In a.GetTypes\n            Dim str As String\n            str = classtemp.FullName\n            Dim strs() As String\n            strs = str.Split(\".\")\n            If InStr(strs(UBound(strs)), \"+logininfo\", CompareMethod.Text) > 0 Then\n                LoginInfo = a.CreateInstance(classtemp.FullName)\n            End If\n            If classtemp.GetMethod(\"Login\") <> Nothing Then\n                m = classtemp.GetMethod(\"Login\")\n                obj = a.CreateInstance(classtemp.FullName)\n            End If\n        Next\n        LoginInfo = m.Invoke(obj, {username, password, Client_identifier, Lanauge})\n        Dim ww As Type\n        ww = LoginInfo.GetType\n        LI.Suc = ww.GetField(\"Suc\").GetValue(LoginInfo)\n        If LI.Suc Then\n            LI.UN = ww.GetField(\"UN\").GetValue(LoginInfo)\n            LI.UID = ww.GetField(\"UID\").GetValue(LoginInfo)\n            LI.SID = ww.GetField(\"SID\").GetValue(LoginInfo)\n            LI.OtherInfo = ww.GetField(\"OtherInfo\").GetValue(LoginInfo)\n            LI.Client_identifier = ww.GetField(\"Client_identifier\").GetValue(LoginInfo)\n        Else\n            LI.Errinfo = ww.GetField(\"Errinfo\").GetValue(LoginInfo)\n        End If\n        Return LI\n    End Function\n\nC#\n暂无代码\n\n\n已完成Legacy正版验证、Skinme验证、minelogin验证、yggdrasil正版验证（即一个账号多个用户的新版验证系统）\nyggdrasil插件定义\n \n当登陆时Client_identifier可以不填\n登陆结束后：\n当Suc=False\nErrinfo 错误403    当用户名或密码错误时有时会返回403错误，启动器应注意识别，此错误文本收系统语言控制\n           NoReturnData mojang服务器故障，无返回数据，建议重试\n           JSON File Error     无法识别的返回数据，需要更新验证系统\n           No user list           mojang账号中无可用的游戏ID\n           返回符合格式的JSON字符串      为服务器返回的错误信息，但貌似服务器已经不会返回了。。。。\n           其它错误   返回由WebException产生的Message\n当Suc=True\nOtherInfo代表accessToken\nClient_identifier代表Client_identifier\nhttp://wiki.vg/Authentication可查看关于yggdrasil的详细信息\n\n选择方法\n根据启动器判断\n如果基于.net2/3/3.5则选择.net2.0版本\n如果基于.net4.0请选择.net4.0\n如果都不是，请根据操作系统判断\n注意：.net4.5不一定兼容.net4.0\n根据操作系统判断\n如果是win7用户，请选择.net2.0\n如果是win8用户，请选择.net4.0\n剩下的windows用户，就看你装过啥了。。\n至于linux和mac用户就不要卖萌了。。\n下载地址\n基于.net2.0 建议MCLauncherBN\n\n\n\n\nSkime_net2.rar\n(6.97 KB, 下载次数: 1060)\n\n\n\n2013-8-21 17:32 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\nLegacy_net2.rar\n(5.31 KB, 下载次数: 307)\n\n\n\n2013-8-21 17:32 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\nyggdrasil_net2.rar\n(8.96 KB, 下载次数: 418)\n\n\n\n2013-8-26 20:51 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\nyggdrasilv1.7_net2.rar\n(9.2 KB, 下载次数: 261)\n\n\n\n2013-11-22 12:32 上传\n点击文件名下载附件\n\n\n\n\n\n 插件接口标准V2\n\n\n\nyggdrasil_twitch_net2.rar\n(9.82 KB, 下载次数: 247)\n\n\n\n2013-11-22 18:56 上传\n点击文件名下载附件\n\n\n\n\n\n 插件接口标准V2\n\n基于.net4.0  建议BMCL\n\n\n\n\nSkime_net4.rar\n(7.01 KB, 下载次数: 393)\n\n\n\n2013-8-21 17:32 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\nLegacy_net4.rar\n(5.37 KB, 下载次数: 152)\n\n\n\n2013-8-21 17:47 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\nyggdrasil_net4.rar\n(9.09 KB, 下载次数: 147)\n\n\n\n2013-8-26 20:48 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\nyggdrasilv1.7_net4.rar\n(4.51 KB, 下载次数: 154)\n\n\n\n2013-10-31 13:15 上传\n点击文件名下载附件\n\n\n\n\n\n 插件接口标准V2\n\n\n\nyggdrasil_twitch_net4.rar\n(9.98 KB, 下载次数: 184)\n\n\n\n2013-11-22 18:56 上传\n点击文件名下载附件\n\n\n\n\n\n 插件接口标准V2\n\n\n",
    "replies": [
        {
            "author": "angbang93",
            "timestamp": 1377080580,
            "txt_content": "BMCLV2完成更新_(:з」∠)_同时欢迎其他启动器加入"
        },
        {
            "author": "Jack112233",
            "timestamp": 1377094800,
            "txt_content": "支持一个~"
        },
        {
            "author": "huanghongxun",
            "timestamp": 1378630440,
            "txt_content": " 本帖最后由 huanghongxun 于 2016-1-1 18:37 编辑 \n\n经过一番努力Hello Minecraft! Launcher实现了登陆模块外置插件化。。那么API跟1楼写的是一样的。。。\n但还是有地方不一样。。\n___________________________________________\n然而还是咔嚓掉了"
        },
        {
            "author": "angbang93",
            "timestamp": 1383197640,
            "txt_content": "接口更新提示_(:з」∠)_不过1.7居然连登录验证都改掉了……"
        },
        {
            "author": "hjw767500210",
            "timestamp": 1383894240,
            "txt_content": "吊炸天"
        },
        {
            "author": "tianlongni",
            "timestamp": 1386322920,
            "txt_content": "挺好的东西我喜欢加油希望推出更加好的"
        },
        {
            "author": "zjyl1994",
            "timestamp": 1387939620,
            "txt_content": "好东西，写启动器最纠结的就是各种登录验证的兼容，现在做成外置模块简直太方便了"
        },
        {
            "author": "小孩不乖",
            "timestamp": 1403274300,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "zhh0000zhh",
            "timestamp": 1403354100,
            "txt_content": "小孩不乖 发表于 2014-6-20 22:25\n我也想加入 有木有VB的?\n仅支持.net框架"
        },
        {
            "author": "a913844287",
            "timestamp": 1412251380,
            "txt_content": "第一代和第二代的区别在哪？是.NET版本不同？\n开发的时候，选择第一代还是第二代更好？"
        },
        {
            "author": "zhh0000zhh",
            "timestamp": 1412328600,
            "txt_content": "a913844287 发表于 2014-10-2 20:03\n第一代和第二代的区别在哪？是.NET版本不同？\n开发的时候，选择第一代还是第二代更好？\n ...\n第一代对yggrasil兼容性差，且扩展性差，建议使用第二代\n仅仅是协议上的区别，对.net2/4没有差异。"
        },
        {
            "author": "antecer",
            "timestamp": 1419163920,
            "txt_content": "登陆插件有源码吗？我能不能看下内部结构，仅仅是看这里的介绍貌似不太容易理解使用方法。"
        },
        {
            "author": "zhh0000zhh",
            "timestamp": 1419173880,
            "txt_content": "antecer 发表于 2014-12-21 20:12\n登陆插件有源码吗？我能不能看下内部结构，仅仅是看这里的介绍貌似不太容易理解使用方法。 ...\n登陆插件本身不开源，不过BMCL是开源的，你可以去看源码"
        },
        {
            "author": "Fighter",
            "timestamp": 1421501820,
            "txt_content": "請問一下MCLauncherBN的BestLogin帳號是甚麼"
        },
        {
            "author": "zhh0000zhh",
            "timestamp": 1421502000,
            "txt_content": "Fighter 发表于 2015-1-17 21:37\n請問一下MCLauncherBN的BestLogin帳號是甚麼\nBestLogin与皮肤出现严重兼容问题，导致碰面即跳出客户端\n正在解决中，所以BestLogin暂时不可用。"
        },
        {
            "author": "Fighter",
            "timestamp": 1421502480,
            "txt_content": "zhh0000zhh 发表于 2015-1-17 21:40\nBestLogin与皮肤出现严重兼容问题，导致碰面即跳出客户端\n正在解决中，所以BestLogin暂时不可用。 ...\n可是我用BestLogin帳號和skinme皮膚讀取器進入遊戲沒問題啊"
        },
        {
            "author": "zhh0000zhh",
            "timestamp": 1421503260,
            "txt_content": "Fighter 发表于 2015-1-17 21:48\n可是我用BestLogin帳號和skinme皮膚讀取器進入遊戲沒問題啊\n这不是简单能说清楚的，总之BestLogin暂时不可用。"
        },
        {
            "author": "8Mi丶以勒",
            "timestamp": 1441418820,
            "txt_content": "bangbang93 发表于 2013-8-21 18:23\nBMCLV2完成更新_(:з」∠)_同时欢迎其他启动器加入\n求易语言的代码，我去改造+多登陆方式，"
        },
        {
            "author": "小E",
            "timestamp": 1441541880,
            "txt_content": " yggdrasilv1.7_net4   login 崩溃错误 \n WebExcption错误 操作超时\n WebExpction错误 无法连接到远程服务器"
        }
    ]
}