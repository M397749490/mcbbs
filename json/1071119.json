{
    "title": "如何通过谓词检测方块实体是否具有对应的nbt标签？",
    "author": "低耐久铁砧",
    "replyCount": 26,
    "timestamp": 1593684420,
    "txt_content": "我通过修改刷怪笼nbt标签的方式制作出了自定义方块\n\n\n\n\nfile_1593683679000.jpg (201.33 KB, 下载次数: 0)\n\n下载附件\n\n自定义方块（修改刷怪笼nbt标签获得）\n2020-7-2 17:54 上传\n\n\n\n\n\n\n但是随后遇到了一个问题：我不知道如何通过战利品或谓词来设定具有不同nbt标签的刷怪笼掉落不同的物品。原版的战利品表里面似乎没有检测方块实体的办法，只有检测方块状态的办法。我找了很多种方法，得知谓词应该可以检测方块实体的nbt标签，但是都没有描述用法或展示示例。\n自己也试着编写战利品的json文件，但是都因为格式不正确而无法读取。\n希望有大佬能指导一下相关的战利品表格式，最好仅通过战利品表或谓词来获取方块实体的nbt标签而不需要再额外跑函数，且能够检测破坏刷怪笼的工具。\n",
    "replies": [
        {
            "author": "WYL0zhu",
            "timestamp": 1593684420,
            "txt_content": "低耐久铁砧 发表于 2020-7-2 21:53\n没使用工具就什么都不掉，使用了任何镐子类工具就掉落物品。现在问题就是它检测的是盔甲架不是刷怪笼，所 ...\n这简单啊，你就execute as @e[tag=你那盔甲架的tag] at @s if entity @e[type=minecraft:experience_orb,distance=..5] run loot spawn ~ ~ ~ loot 你破坏后生成的战利品表复制代码不就行了。如果用铁镐及以上的镐子进行破坏刷怪笼就会掉落经验球的。然后检测到周围掉落了经验球就掉落对应物品吗。"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593690720,
            "txt_content": "为此内容都来自战利品表，用战利品表肯定可以实现。\nhttp://www.minecraft-zh.gamepedia.com/战利品表\nhttps://www.mcbbs.net/thread-831542-1-1.html。"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593692040,
            "txt_content": "WYL0zhu 发表于 2020-7-2 19:52\n为此内容都来自战利品表，用战利品表肯定可以实现。\nhttp://www.minecraft-zh.gamepedia.com/战利品表\nhttp ...\n这两篇教程我都查看过，但是都没有说明检测方块实体nbt标签的办法，wiki搜索方块谓词搜不到，论坛教程虽然提到了方块谓词但是没说能够插入在战利品json里面的哪个位置，希望能够把方块谓词的使用方法说明清楚。"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593692280,
            "txt_content": "那你看看这些，谓词内容可以直接完全和战利品表兼容的。\nhttps://www.mcbbs.net/thread-914817-1-1.html\nhttps://minecraft-zh.gamepedia.com/谓词"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593692400,
            "txt_content": "WYL0zhu 发表于 2020-7-2 20:18\n那你看看这些，谓词内容可以直接完全和战利品表兼容的。\nhttps://www.mcbbs.net/thread-914817-1-1.html\nht ...\n这些还是那几个帖子啊......"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593692460,
            "txt_content": "低耐久铁砧 发表于 2020-7-2 20:20\n这些还是那几个帖子啊......\n对啊，那你到底想问什么。。。"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593692700,
            "txt_content": "WYL0zhu 发表于 2020-7-2 20:21\n对啊，那你到底想问什么。。。\n如何通过谓词检测方块实体的nbt标签，不是方块状态，那些断言生成器之类的只明说能够检测方块状态，nbt标签却没提。"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593692760,
            "txt_content": "低耐久铁砧 发表于 2020-7-2 20:25\n如何通过谓词检测方块实体的nbt标签，不是方块状态，那些断言生成器之类的只明说能够检测方块状态，nbt标 ...\n检测NBT的话干什么要用谓词，用execute if block子句足矣。\nhttp://www.minecraft-zh.gamepedia.com/命令/execute"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593693180,
            "txt_content": "WYL0zhu 发表于 2020-7-2 20:26\n检测NBT的话干什么要用谓词，用execute if block子句足矣。\nhttp://www.minecraft-zh.gamepedia.com/命令 ...\n我意思是说破坏带nbt标签的方块实体掉落对应掉落物，execute虽然能检测nbt但是难以指向玩家破坏的方块。为了方便我直接使用的刷怪笼内置盔甲架而没有外套盔甲架（外套盔甲架问题太多），所以通过盔甲架检测所在位置的方块是否被破坏这一方法不能用。"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593693240,
            "txt_content": "低耐久铁砧 发表于 2020-7-2 20:33\n我意思是说破坏带nbt标签的方块实体掉落对应掉落物，execute虽然能检测nbt但是难以指向玩家破坏的方块。 ...\n那你就别用刷怪笼，就不能用盔甲架吗。"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593693420,
            "txt_content": "WYL0zhu 发表于 2020-7-2 20:34\n那你就别用刷怪笼，就不能用盔甲架吗。\n盔甲架问题太多了，比如大量盔甲架会导致帧率下降，周围难以防置方块之类，所以我才考虑的刷怪笼......"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593693540,
            "txt_content": "低耐久铁砧 发表于 2020-7-2 20:37\n盔甲架问题太多了，比如大量盔甲架会导致帧率下降，周围难以防置方块之类，所以我才考虑的刷怪笼...... ...\n你用刷怪笼很难检测到哪里放置了对应方块的，建议还是用盔甲架。"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593693780,
            "txt_content": "WYL0zhu 发表于 2020-7-2 20:39\n你用刷怪笼很难检测到哪里放置了对应方块的，建议还是用盔甲架。\n行吧，我先试试能不能在原基础上套......"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593694020,
            "txt_content": "如果你懒得写了可以参考这个：https://www.mcbbs.net/thread-916294-1-1.html。"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593696900,
            "txt_content": "WYL0zhu 发表于 2020-7-2 20:47\n如果你懒得写了可以参考这个：https://www.mcbbs.net/thread-916294-1-1.html。\n算是套盔甲架做出来了，但是这样检测不了玩家用什么工具破坏的......"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593696960,
            "txt_content": "低耐久铁砧 发表于 2020-7-2 21:35\n算是套盔甲架做出来了，但是这样检测不了玩家用什么工具破坏的......\n啊，帖子里不写了，在#cpp_block:break函数标签里添加函数。"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593697080,
            "txt_content": "WYL0zhu 发表于 2020-7-2 21:36\n啊，帖子里不写了，在#cpp_block:break函数标签里添加函数。\n我没用他那个通用处理......"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593697260,
            "txt_content": "低耐久铁砧 发表于 2020-7-2 21:38\n我没用他那个通用处理......\n啊，你那数据包里到底写的什么，你发给我，我帮你写。"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593697620,
            "txt_content": "WYL0zhu 发表于 2020-7-2 21:41\n啊，你那数据包里到底写的什么，你发给我，我帮你写。\n不了，我这么给你说：\n就是一个刷怪笼，里面有一个加标签的盔甲架，每tick检测有没有对应标签的盔甲架，如果有，就检测那个盔甲架的位置有没有对应刷怪笼，如果没有，就读取一个loot_table把掉落物spawn出来然后杀掉那个盔甲架。现在就缺如何检测玩家手中工具了。"
        },
        {
            "author": "WYL0zhu",
            "timestamp": 1593697680,
            "txt_content": "低耐久铁砧 发表于 2020-7-2 21:47\n不了，我这么给你说：\n就是一个刷怪笼，里面有一个加标签的盔甲架，每tick检测有没有对应标签的盔甲架，如 ...\n你要检测玩家使用什么工具并分别掉落什么物品/方块啊？说的具体点，好写战利品表/函数。"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593697980,
            "txt_content": "WYL0zhu 发表于 2020-7-2 21:48\n你要检测玩家使用什么工具并分别掉落什么物品/方块啊？说的具体点，好写战利品表/函数。 ...\n没使用工具就什么都不掉，使用了任何镐子类工具就掉落物品。现在问题就是它检测的是盔甲架不是刷怪笼，所以block检测里面的match_tool不能用，同时entity_properties不知道为什么也没法检测，原本要求是检测谁破坏的，降低点要求只要检测离盔甲架最近的玩家手持什么工具就行（多人就gg了......）。"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593698040,
            "txt_content": "WYL0zhu 发表于 2020-7-2 21:48\n你要检测玩家使用什么工具并分别掉落什么物品/方块啊？说的具体点，好写战利品表/函数。 ...\n补充一点：entity_properties没用的原因应该是执行者不是玩家"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1593699300,
            "txt_content": "WYL0zhu 发表于 2020-7-2 22:00\n这简单啊，你就不就行了。如果用铁镐及以上的镐子进行破坏刷怪笼就会掉落经验球的。然后检测到周围掉落了 ...\n使用经验球治标不治本。当然，改成玩家并检测手持工具是可行的，当然如我上文所说，多人就gg了......"
        },
        {
            "author": "GF009",
            "timestamp": 1606312620,
            "txt_content": " 本帖最后由 GF009 于 2020-11-25 22:29 编辑 \n{\n  \"pools\": [\n    {\n      \"rolls\": 1,\n      \"entries\": [\n        {\n          \"type\": \"minecraft:item\",\n          \"name\": \"minecraft:方块\",\n          \"functions\": [\n            {\n              \"function\": \"minecraft:set_loot_table\",\n              \"name\": \"minecraft:你的战利品表\",\n              \"conditions\": [\n                {\n                  \"condition\": \"minecraft:条件\"\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}复制代码\n\n{  \"condition\": \"minecraft:location_check\",\n  \"predicate\": {\n    \"block\": {\n      \"block\": \"minecraft:id\",\n      \"tag\": \"minecraft:标签\",\n      \"nbt\": \"nbt\"\n    }\n  }\n}复制代码"
        },
        {
            "author": "GF009",
            "timestamp": 1606312860,
            "txt_content": " 本帖最后由 GF009 于 2020-11-25 22:22 编辑 \nGF009 发表于 2020-11-25 21:57\n不好意思第一行是多写的，不需要\n \"type\": \"minecraft:selector\",复制代码这个"
        },
        {
            "author": "低耐久铁砧",
            "timestamp": 1611225360,
            "txt_content": "GF009 发表于 2020-11-25 22:01\n不好意思第一行是多写的，不需要\n这个\n抱歉，这么晚才看到......\n首先，非常感谢你能帮忙研究这个问题，但是比较抱歉，这么写依旧无法让刷怪笼掉落正确的物品；并且，由于MC-113525，加之生存也可以拿刷怪蛋更改刷怪笼内容物，这个方法不再适用，所以我准备另找办法实现这个功能......\n不过在此依旧致以谢意！"
        }
    ]
}