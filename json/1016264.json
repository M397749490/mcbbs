{
    "title": "【PCD】Optifine 进阶技巧: 令方块在特定情况下显示特定模型",
    "author": "几何",
    "replyCount": 14,
    "timestamp": 1586684640,
    "txt_content": "不会排版\n\n\nOptifine 进阶技巧: 令方块在特定情况下显示特定模型\n\n\n        Optifine算是现在大家玩MC必装的一个模组了, 对于游戏有很多的优化。但是Optifine可做的不只是优化。看完这个教程, 你可以学会: \n(1)给方块改个名, 让它放下后变成其它模型 ( 例如家具 )\n(2)在特定的生物群系中, 让某种方块显示特定模型 ( 例如令海草在海洋里随机变成贝壳, 海星啥的 )等等\n        这篇教程不是模型制作教程, 也不面向材质新手, 需先了解资源包的基本制作方式和基础MC模型的制作(至少MC资源包的基本结构你总要了解吧), 当然如果你有了解过Optifine中的CTM, 那么这篇教程对你来说能懂得更透彻。\n\n\n指南:\n        Optifine官方教程文档(英文): https://github.com/sp614x/optifine/tree/master/OptiFineDoc/doc                               ( 站内中文翻译: https://www.mcbbs.net/thread-896135-1-1.html ) ( 帖内文字量大容易卡死 )        本帖所用的模型制作软件 [Blockbench] 的下载地址: https://blockbench.net/                ( 站内的Blockbench教程: https://www.mcbbs.net/thread-833634-1-1.html )        CTM官方教程文档: https://github.com/sp614x/optifine/blob/master/OptiFineDoc/doc/ctm.properties        注意: 本教程使用的是1.14.4版本的Optifine, 1.13-1.15 Optifine的内容储存在  材质文件夹/assets/minecraft/optifine/ 下, 而1.12及以前版本的 Optifine的内容储存在  材质文件夹/assets/minecraft/mcpatcher/ 下\n基本原理: 自定义材质(令方块在特定情况下显示特定的材质并把其原先的材质隐藏)\n↓本教程基本上都是围绕这个基本原理展开的↓\n\n\n\n\n\nfile_1586680656000.jpg (159.56 KB, 下载次数: 2)\n\n下载附件\n\n2020-4-12 16:37 上传\n\n\n\n\n\n自定义材质是由ctm下的properties文件(属性文件)控制的, 上面所述的特定情况可以为生物群系, 高度和容器名称(目前只发现这3种)\n\n\n[自定义材质基本原理的实例] : 让钻石块在沙漠生物群系时显示别的材质\n\n\n\n\n\n\n3.jpg (108.05 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 16:38 上传\n\n\n\n\n\n如图所示, 首先我们先在assets/minecraft/下新建一个名为optifine的文件夹, 再在其下新建一个名为ctm的文件夹。在这里面放入我们准备好的要替换在沙漠中的钻石块的材质。现在, 新建一个文本文档, 将其连名称和后缀名改成 [随便什么名字只要不是中文].properties 。用文本编辑软件打开这个文件, 输入以下内容: \n\n\n\n\n\n4.jpg (110.29 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 16:38 上传\n\n\n\n\n\nmethod=fixed\nmatchTiles=diamond_block\ntiles=abc\nbiomes=desert\nmethod=fixed        # 表示运用的CTM功能为替换贴图\nmatchTiles=diamond_block        # 表示被替换的贴图为textures/block/下的diamond_block.png  也就是钻石块的贴图\ntiles=abc                        # 表示替换的贴图为本属性文件目录中的abc.png  也就是我们准备好的红色钻石块贴图\nbiomes=desert        # 表示当钻石块满足在沙漠生物群系时, 应用这个属性文件内的内容, desert 为沙漠生物群系的id\n\n可以看到, 效果出现了\n\n\n\n\n\nfile_1586680788000.jpg (238.45 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-12 16:39 上传\n\n\n\n\n\n\n关于生物群系的ID, 各位可以去Wiki里找\n\n\n\n\n\n14.jpg (147.29 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 16:40 上传\n\n\n\n\n\n\n\n\n[应用实例一]: 将在高度为62的海草的模型变成芦苇的模型\n\n\n大家可能知道, MC中海平面的高度为62, 也就是说河流和海洋的最上面一格水方块的高度是62。现在, 如果我们想制作在岸边生长的芦苇的效果, 我们可以用海草这个方块来制作。\n\n看上面的基本原理, 首先我们要直接在指定方块的模型上建好芦苇的模型并贴好图, 芦苇的贴图位置我放在了textures/block/reed.png, 海草的模型是在游戏主jar文件内/assets/minecraft/models/block/里的seagrass.json\n\n\n\n\n\n7.jpg (290.84 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 16:51 上传\n\n\n\n\n\n好, 我们的目的是让在62层的海草方块显示芦苇的模型, 那么为了让其它层数的海草显示正常, 我们先把芦苇的贴图reed.png先复制一份到ctm文件夹下, 并把block下的芦苇的贴图变成完全透明的\n\n\n\n\n\nfile_1586681556000.jpg (182.93 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-12 16:52 上传\n\n\n\n\n\n现在我们新建一个.properties文件, 名称随意, 在里面写method=fixed\nmatchTiles=reed\ntiles=reed\nheights=62\n\n\n\n\n\n\n9.jpg (107.33 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 16:56 上传\n\n\n\n\n\n\nmethod=fixed        # 表示运用的CTM功能为替换贴图matchTiles=reed        # 表示被替换的贴图为textures/block/下的reed.png  也就是那个透明的贴图tiles=reed        # 表示替换的贴图为本属性文件目录中的reed.png  也就是那个非透明的芦苇的贴图heights=62        # 表示当海草处于62层时应用这个属性文件的贴图\n\n进入游戏, 可以发现, 效果已经出来了。但也可见, 并不完美, 因为其原来的海草的贴图还在\n\n\n\n\n\nfile_1586681881000.jpg (208.87 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 16:58 上传\n\n\n\n\n\n所以我们还要写一个属性文件, 令高度为62的海草的贴图隐藏。\n\n\n\n\n\n11.jpg (172.02 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 16:58 上传\n\n\n\n\n\n先将block文件夹内的reed.png这个完全透明的贴图复制一份副本, 这里命名为t.png, 作为海草在62层显示的全透明的贴图。再在ctm文件夹下新建一个properties文件, 里面写matchTiles=seagrass\nmethod=fixed\ntiles=textures/block/t\nheights=62matchTiles=seagrass        # 表示被替换的贴图为textures/block/下的seagrass.png  也就是海草的贴图\nmethod=fixed        # 表示运用的CTM功能为替换贴图\ntiles=textures/block/t        # 表示替换的贴图为textures/block下的t.png, 也就是拷贝的那个透明的图像\nheights=62        # 表示当海草处于62层时应用这个属性文件的贴图\n\n( 扩展: 为什么这里的透明贴图不能应用原来的block文件夹内的那个芦苇的全透明贴图而要拷贝一份: 因为当海草的高度为62时, 按照上面luwei.properties的内容, 将全透明的芦苇贴图替换成了正常的芦苇贴图, 这样就套了一次娃, 等于白搭 )\n打开游戏后, 可以发现芦苇已经没什么问题了。\n\n\n\n\n\nfile_1586682066000.jpg (223.91 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 17:01 上传\n\n\n\n\n\n\n\n[应用实例二]: 利用重命名漏斗制作家具\n\n\n帖子标题所谓的\"特定情况\"中, 包括方块的名字, 也就是说我们可以令方块在有特定的名字上显示特定的贴图, 从而显示特定的模型。那么什么方块可以命名呢? 你可能会说所有的方块物品不都是可以命名的吗。但是, 绝大多数方块命名后, 放下来就失去了它名字的nbt标签, 破坏下来之后也不能保持原有的名字。好在目前有一些方块是命名后破坏下来名字可以保留的:\n酿造台        附魔台        熔炉        漏斗        投掷器        发射器        木桶        烟熏炉\n这里要使用透明方块, 去除不透明方块后剩下\n酿造台        漏斗\n但是酿造台只有1个方向, 漏斗有5个方向, 所以漏斗是最合适的。\n\n\n\n\n\n13.jpg (341.23 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 17:02 上传\n\n\n\n\n\n看完上面的两个实例, 我们知道了属性文件内 heights可以控制材质应用的高度, biomes可以控制材质应用的生物群系, 例如heights=32-64        # 当方块的y值位于32到64时应用属性文件的内容biomes=ocean  # 当方块所处的生物群系为海洋时应用属性文件的内容\nheights=48\nbiomes=ice_spikes dark_forest          # 两行代码写一起表示 当方块所处的生物群系为黑森林或冰刺之地 且y值为48时 应用属性文件的内容\n感谢强大的Optifine, 现在我们可以用容器的名称控制是否应用属性文件的内容, 其代码为name=\n\n下面进入实例, 我们做一个蜡烛家具, 当漏斗的名字为lazhu, 且漏斗为垂直摆放时出现家具模型\n我们在游戏主jar文件内/assets/minecraft/models/block/里找到hopper.json, 打开  (hopper.json为垂直漏斗的模型, 只有1个方向; hopper_side.json为有朝向的漏斗的模型, 有4个方向)\n\n\n\n\n\n15.jpg (270.82 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 17:07 上传\n\n\n\n\n\n直接在上面建好蜡烛的模型, 贴好图。这里蜡烛的贴图存在textures/block/下的candle.png。这里我也准备好了漏斗的3个贴图。\n\n\n\n\n\nfile_1586682493000.jpg (129.53 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 17:08 上传\n\n\n\n\n\n\n\n\n\n17.jpg (38.47 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 17:08 上传\n\n\n\n\n\n传统艺能。下面把蜡烛的贴图文件candle.png复制一份到optifine/ctm/文件夹, 然后把原来的textures/block/文件夹内的candle.png变成全透明的贴图\n我们进入/optifine/ctm/内, 新建一个属性文件, 里面写\nmatchTiles=candle\nmethod=fixed\ntiles=lazhu\nname=lazhu\n\n\n\n\n\n19.jpg (320.15 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-12 17:09 上传\n\n\n\n\nmatchTiles=candle        # 表示被替换的贴图为textures/block/下的candle.png  也就是蜡烛的全透明贴图\nmethod=fixed        # 表示运用的CTM功能为替换贴图\ntiles=lazhu        # 表示替换的贴图为本属性文件目录中的lazhu.png 也就是蜡烛的正常贴图\nname=lazhu        # 表示当漏斗名字为lazhu时应用本属性文件的内容\n进入游戏: \n\n\n\n\n\nfile_1586682619000.jpg (211.13 KB, 下载次数: 2)\n\n下载附件\n\n2020-4-12 17:10 上传\n\n\n\n\n\n可以看见我们还需要隐藏掉漏斗的贴图\n\n\n\n\n\nfile_1586682646000.jpg (176.95 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-12 17:10 上传\n\n\n\n\n\n漏斗的贴图有3个, 所以这里要准备3个属性文件, 再准备一个全透明的贴图文件。我这里的3个属性文件分别是l1.properties, l2.properties, l3.properties。全透明文件是储存在textures/block/下的touming.png。这里拿属性文件l1.properties再解释一下。\nmatchTiles=hopper_inside        # 表示被替换的贴图为textures/block/下的hopper_inside.png  也就是漏斗的其中一个贴图\nmethod=fixed        # 表示运用的CTM功能为替换贴图\ntiles=textures/block/touming        # 表示替换的贴图为textures/block/touming.png 也就是那个全透明贴图\nname=lazhu        # 表示当漏斗名字为lazhu时应用本属性文件的内容\n\n\n\n\n\n\nfile_1586682682000.jpg (137.55 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-12 17:11 上传\n\n\n\n\n\n成功!\n\n\n[扩展(超纲)教程]: 利用CIT功能令漏斗物品在特定的名字显示特定的材质\n\n\n\n\n\n有关CIT的Optifine官方文档: https://github.com/sp614x/optifine/blob/master/OptiFineDoc/doc/cit_single.properties\n接上一栏的教程。我们已经做好了蜡烛这个家具, 但是它的物品还是漏斗的样子。我们还可以利用Optifine的CIT(自定义物品贴图)功能, 令漏斗当命名为lazhu时修改它的贴图。\n首先我们在optifine文件夹内新建一个文件夹名为cit, 将画好的蜡烛的物品贴图candle.png放进去。再创建一个属性文件, 打开后写type=item\nitems=hopper\ntexture=candle\nnbt.display.Name=lazhu\n\n\n\n\n\n\nfile_1586682745000.jpg (193.3 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-12 17:12 上传\n\n\n\n\n\ntype=item        # 这行照着写就行了, 细究下去就变成cit教程了\nitems=hopper        # 表示我们要更改的物品贴图为漏斗\ntexture=candle        # 表示替换的贴图为本目录下的candle.png\nnbt.display.Name=lazhu        # 表示当你把物品漏斗命名为lazhu时应用本属性文件的内容\n\n\n\n\n\n23.jpg (337.19 KB, 下载次数: 1)\n\n下载附件\n\n2020-4-12 17:14 上传\n\n\n\n\n\n成功!\n\n后记\n\n\n       有些同学想要我介绍一下自定义模型的做法, 我自己本来也想写一篇教程(因为当初我看了一晚上的Optifine文档沉思了一会儿发现Optifine可以通过某种歪门邪道来自定义模型时我兴奋激动得就像[]), 所以我想把这个小技巧分享给大家。这是我脑洞大开想出来的, 但是我不想让它变为这是\"我的创意\", 我希望大家也许能通过这个制作出更好更精美的材质包。国内外有很多有名的家具材质包, 大多数是利用命名物品+cit内的自定义物品模型功能, 然后把物品放进物品展示框内生效。但这缺点是不直观且麻烦, 而且1.14和1.15的新的Optifine貌似还使用不了(我是使用不了)。还有一些例如制作精良的Cocricot材质,是利用更改方块的元数据(Metadata)来制作家具装饰 (你像我一样一听见要改什么数据就嫌麻烦, 且这不能在生存使用) 。所以帖子里介绍的方法还是比较实用的。\n教程再长, 看完之后, 都不如去自己看看, 研究一下原理。所以这里分享给大家写帖子制作并作为实例内容的资源包:\n\n\n\n\n[0000材质教程.zip\n(19.78 KB, 下载次数: 44)\n\n\n\n2020-4-12 17:17 上传\n点击文件名下载附件\n阅读权限: 20\n\n\n\n\n\n适用于1.14-1.15的Optifine\n\n\n\n\n\n\n\n\n\n[groupid=1330]PluginsCDTribe[/groupid]",
    "replies": [
        {
            "author": "SQwatermark",
            "timestamp": 1586686080,
            "txt_content": " 本帖最后由 SQwatermark 于 2020-4-12 18:13 编辑 \n\n通过重命名方块实体（就是熔炉之类）修改材质似乎只适用于单机游戏，想用于服务器的可能无法如愿以偿。\n其他几种没有尝试过，至少熔炉是这样，具体参考这个issue：https://github.com/sp614x/optifine/issues/3537\n和这个问题：https://www.mcbbs.net/thread-983914-1-1.html\n\n头一次知道optifine翻译帖会卡死，有空弄个网盘下载吧（咕）"
        },
        {
            "author": "LittleHei",
            "timestamp": 1586693220,
            "txt_content": " 本帖最后由 LittleHei 于 2020-4-12 20:10 编辑 \n\n优秀通过，内容简明扼要，足以突出重点，但还是建议跟进一下排版以达到美化帖子的效果\n你说你不会排版我和其他审议版主都是8信的"
        },
        {
            "author": "wuheng-",
            "timestamp": 1586881380,
            "txt_content": "俩个以上的的特定模型怎么做"
        },
        {
            "author": "几何",
            "timestamp": 1586912040,
            "txt_content": "wuheng- 发表于 2020-4-15 00:23\n俩个以上的的特定模型怎么做\n不论几个, 原理都是一样的\n在方块上建2个模型, 然后按是否满足要求显示或不显示就行了"
        },
        {
            "author": "wuheng-",
            "timestamp": 1586929680,
            "txt_content": "几何 发表于 2020-4-15 08:54\n不论几个, 原理都是一样的\n在方块上建2个模型, 然后按是否满足要求显示或不显示就行了 ...\n也就是说我在蜡烛的基础上再继续建模是这样的吗"
        },
        {
            "author": "几何",
            "timestamp": 1586931720,
            "txt_content": "wuheng- 发表于 2020-4-15 13:48\n也就是说我在蜡烛的基础上再继续建模是这样的吗\n是的      "
        },
        {
            "author": "wuheng-",
            "timestamp": 1586938260,
            "txt_content": "几何 发表于 2020-4-15 14:22\n是的\n谢谢了，我理解了，但做出来的好像有点不对哈哈"
        },
        {
            "author": "wuheng-",
            "timestamp": 1586961000,
            "txt_content": "如果材质分辨率不一样会怎么样"
        },
        {
            "author": "几何",
            "timestamp": 1586962800,
            "txt_content": "wuheng- 发表于 2020-4-15 22:30\n如果材质分辨率不一样会怎么样\n?\n我没理解什么什么意思"
        },
        {
            "author": "2433850388",
            "timestamp": 1587427020,
            "txt_content": "x'x'x'x'x'x'x'x'x'x'x'x'x'x'x'x'x"
        },
        {
            "author": "小凡Eric",
            "timestamp": 1590677940,
            "txt_content": "我仔细的看了几遍，然后发现自己还是一条咸鱼说哈也不会"
        },
        {
            "author": "Frost-ZX",
            "timestamp": 1592826120,
            "txt_content": "学到了，感谢！"
        },
        {
            "author": "喜欢小刘",
            "timestamp": 1592833200,
            "txt_content": "感谢分享 尝试一下  插个眼"
        },
        {
            "author": "哒哒哒啦啦",
            "timestamp": 1613280420,
            "txt_content": "这个难度好高啊 还是教程不全"
        }
    ]
}