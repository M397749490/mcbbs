{
    "title": "MadAuth —— 外置登录.安全性能.轻量.密码找回 V3.1!",
    "author": "DarcJC",
    "replyCount": 26,
    "timestamp": 1454605560,
    "txt_content": " 本帖最后由 z25096708 于 2016-3-13 11:41 编辑 \n\n本外置登录系统已经发布在插件百科！点击可以到插件百科查看！排版更好！\n介绍\n这次我给大家带来了一个新的网页验证！\n下载地址已经填入模板了。\n这个网页验证使用SQLite + Python + Django环境，无需搭建MySQL环境！\nMySQL设置教程已经写出\n可以说这个是绝对安全的。(排除Python或Django自身漏洞)\n并且如果合理部署的话，可以说是几乎不占用性能的！\n由于原先的版本太多XXX，我重写了一个新的验证系统！并且更名为MadAuth\n\nSECRET_KEY = '_k%j6j#m(&-$72_)5j^2=-rnw+iv@fr7j6wr^9hf-f3qw9(ca2'此项必须修改或删除！！！！\n\n环境(灰色为ubuntu)\n由于使用了Django，所以很多需要配置。\n先下载Python。我在这里提供Windows下的py2.7.10\n其他系统例如ubuntu使用apt-get install python27应该也是可以的。\n下载完成后，开始安装。\n由于Windows下默认不安装pip，所以到了选择安装文件的那一步一定要把pip那里改为安装\nUbuntu默认是安装。然后使用pip install django即可\n开发使用的是目前最新版的Django1.9，所以直接安装即可\n[由于py2exe需求版本为python3.3。开发用版本无法支持，所以无法提供EXE文件]\n\n查毒报告\nPython程序哪来的查毒报告？\n好吧好吧，你们赢了，查毒报告等等出来就给你们\n\nhttp://r.virscan.org/report/c9192ce43e7ee82c49ed29499bb71093\nhttps://www.virustotal.com/zh-cn/file/d2a7650f3c83aa2490af04cc0a195c352290517754bc5534ae0f559a3555294b/analysis/1455364292/\n\n\n\n\nchadu.PNG (28.49 KB, 下载次数: 43)\n\n下载附件\n\n2016-2-13 19:54 上传\n\n\n\n\n\n\n拿去吧....X虎3X0奇葩了。给我扫描出一个ui病毒。666。尼玛我这有UI吗？\n我又拿去给X虎扫了一遍！怎么病毒又不见了？\n\n\n截图\n注意！原先的错误码被我去掉了！\n\n\n\n\n\nlist.png (13.12 KB, 下载次数: 45)\n\n下载附件\n\n2016-2-13 18:42 上传\n\n\n\n\n\n文件列表\n\n\n\n\nsrc-1.PNG (28.1 KB, 下载次数: 47)\n\n下载附件\n\n2016-2-13 18:43 上传\n\n\n\n\n\n数据库模型\n\n\n\n\nsrc-2.PNG (37.01 KB, 下载次数: 43)\n\n下载附件\n\n2016-2-13 18:44 上传\n\n\n\n\n\n链接处理\n\n\n\n\nsrc-3.PNG (56.08 KB, 下载次数: 45)\n\n下载附件\n\n2016-2-13 18:43 上传\n\n\n\n\n\n主处理文件\n\n\n\n\ncons.PNG (11.15 KB, 下载次数: 41)\n\n下载附件\n\n2016-2-13 18:46 上传\n\n\n\n\n\n控制台\n\n\n\n\nweb-1.PNG (17.05 KB, 下载次数: 43)\n\n下载附件\n\n2016-2-13 18:47 上传\n\n\n\n\n\n注册\n\n部署\n1-1. 你可以直接使用根目录下的manage.py部署 [完工]\n1-2. 你可以使用nginx或者apache部署  [完成50%(Apache完工)]\n2-1. 食用方法 [完工]\n2-2. 服务端插件 [完工]\n2-3. 启动器 [完工]\n3-1. 配置【必看】 [完工]\n3-2. 后台 [完工]\n4-1. 注册邮件 [完工]\n4-2. 使用MySQL [完工]\n\n更新记录\n\n\n2016.03.12更新v3.0及v3.1。【添加了密码找回功能】(v3.1修复一些漏洞)\n2016.02.14更新v2.2 【添加了注册时发送邮件的功能】\n2016.02.14更新v2.1 【修正了IP获取的BUG】\n2016.02.13更新MadAuth2.0 【修正以往已知所有BUG！】\n2016.02.05更新 ver1.1 【修正了一个登陆验证方法中的安全漏洞。现在登陆完成后将会设置login字段为no】\n2016.02.05发布 ver1.0发行版\n\n\n反馈 【你的回复&评分是我最大的动力】\n你可以加入QQ群：101129344 点击自动入群\n不遵守任何协议！请在转载/使用/修改前告知作者即可！\n\n\n2.3版本稍后放出。支持使用邮箱的账号找回！\n\n\n\n\n\n\n\n\n\n\n测试网址：http://www.galway.cc:8000/\n使用版本为v3.1.所有配置维持发布版原样。\n使用nginx的话请在配置文件中加入fastcgi_param REMOTE_ADDR $remote_addr;\n\n\n\n\n\n\n\n\n\n\n[groupid=1151]Minecraft插件百科[/groupid]",
    "replies": [
        {
            "author": "DarcJC",
            "timestamp": 1454605860,
            "txt_content": "标题: manage.py部署 本帖最后由 z25096708 于 2016-3-13 11:33 编辑 \n\nmanage.py部署\n这是最为简单的部署方法！\n进入根目录，打开命令行(或者ssh使用cd进入根目录)。\n使用python manage.py runserver <你需要的端口>\n端口那里选填。若不填默认8000。\n不要修改manage.py！\n若出现python未找到请重新安装。\n若出现语法错误请确认python版本为2.7.10\n\n\n使用之前你先需要确认你的Setting.py中ALLOWED_HOSTS = [你的域名] 已经添加好了\n\n以及，如果需要外网访问需要使用python manage.py runserver 0.0.0.0:你的端口\n\nLinux用的文件需要sudo chmod +x 你的文件.sh    【需要cd到文件所在目录】给予文件可执行权限\n\nWindows用批处理\n\n\n\n\n@echo off\npython manage.py runserver 你要的端口\npause复制代码\nSH文件[Linux用]\npython manage.py runserver 你要的端口复制代码\n建议使用screen以防止退出登录时进程被系统销毁。\nUbuntu: sudo apt-get install screen\nCentos: sudo yun install screen\n\n\n"
        },
        {
            "author": "md_5",
            "timestamp": 1454606160,
            "txt_content": "在Windows上弄Python+pip还是有点小麻烦的- -||"
        },
        {
            "author": "DarcJC",
            "timestamp": 1454606280,
            "txt_content": "标题: 食用方法-1 本帖最后由 z25096708 于 2016-2-15 16:24 编辑 \n\n食用方法-1\n登录请求格式：http://yourip/?p=密码&u=用户名\n                或：http://yourip/login/?p=密码&u=用户名\n\n注册请求格式：http://yourip/register/?p=密码&u=用户名&key=你设置的serverKey1\n【注册IP不同于登录IP】【这里获取IP是为了防止重复注册。重复注册将会一直显示注册成功！】\n【但是若密码不同将会报错！(DEBUG为True的情况下)】\n\n\n验证请求格式：http://yourip/islogin/?key=你设置的serverKey2&u=用户名&ip=客户端IP\n\n关于秘钥修改的方法在配置教程那里\n\n\n官方验证插件已经写出来了。\n\n所有操作暂不支持POST方法！【就算支持你们也会用GET方法吧。。。】\n\n\n\n\n\n\n登录注册不再要求提交ip地址！！！会自行获取。若无法获取则提示参数不全！\n\n\n\n"
        },
        {
            "author": "九尾·",
            "timestamp": 1454607180,
            "txt_content": "登录验证……那能不能检测是否作弊呢=-="
        },
        {
            "author": "DarcJC",
            "timestamp": 1454607780,
            "txt_content": "九尾· 发表于 2016-2-5 01:33\n登录验证……那能不能检测是否作弊呢=-=\n这个目前若不修改客户端或者在服务器检测的话是基本不可能实现的。"
        },
        {
            "author": "McLarens",
            "timestamp": 1454619300,
            "txt_content": "比登陆插件还好用？"
        },
        {
            "author": "ーのものー",
            "timestamp": 1454640600,
            "txt_content": "为什么会不支持 POST。。密码用GET也是有点醉的"
        },
        {
            "author": "15166549878",
            "timestamp": 1455019140,
            "txt_content": "怎么看不到图了"
        },
        {
            "author": "DarcJC",
            "timestamp": 1455362820,
            "txt_content": "标题: 配置 本帖最后由 z25096708 于 2016-2-13 20:07 编辑 \n\n若脱机请阅读README文件\n秘钥\n存放在../../Auth/views.py文件中\n\n\n\n\n\nconfig-1.PNG (8.45 KB, 下载次数: 3)\n\n下载附件\n\n2016-2-13 19:32 上传\n\n\n\n\n\n如图，我用荧光高亮的地方就是秘钥。第一个是用户注册用的秘钥。第二个是服务器验证用户是否登录的秘钥。\n请自行修改该秘钥！\n\n\nDEBUG\n存放在../../MadAuth/setting.py文件中\n\n\n\n\n\nsetting.PNG (24.01 KB, 下载次数: 6)\n\n下载附件\n\n2016-2-13 20:08 上传\n\n\n\n\n\n依然是我用荧光高亮的地方.设置为False即可.    记住一定要大写F!!!!!\n\n\n\n\n\n\n"
        },
        {
            "author": "DarcJC",
            "timestamp": 1455365460,
            "txt_content": "标题: 使用Apache部署 本帖最后由 z25096708 于 2016-2-13 20:33 编辑 \n\nLinux(Ubunut)：\nsudo apt-get install apache2 libapache2-mod-wsgi复制代码\n安装apache2与拓展. (Centos的话apt-get变为yum。apache2要变成httpd)\napachectl -v复制代码\n检查apache的版本\n\nServer version: Apache/2.4.6 (ubuntu)\n\nServer built:   Dec  5 2013 18:32:22\n复制代码\nsudo vi /etc/apache2/sites-available/MadAuth.conf复制代码\n建新一个站点配置文件\n\n<VirtualHost *:80>\n\n    ServerName www.yourdomain.com\n\n    # ServerAlias otherdomain.com\n\n    ServerAdmin mcbbs@mcbbs.net\n\n  \n\n    WSGIScriptAlias / /home/MadAuth/MadAuth/wsgi.py\n\n    # WSGIDaemonProcess \n\n    # WSGIProcessGroup ziqiangxuetang.com\n\n  \n\n    <Directory /home/MadAuth/MadAuth/>\n\n    <Files wsgi.py>\n\n        Require all granted\n\n    </Files>\n\n    </Directory>\n\n</VirtualHost>复制代码www.yourdomain.com修改为你的域名\notherdomain.com修改为别的域名。不要的话可以注释掉\nmcbbs@mcbbs.net改为你的邮箱(网站管理员邮箱)\n如果你的apache版本为2.2.x需要用下面的替代Require all granted\n\n<div>Order deny,allow</div><div>Allow from all</div>复制代码\n然后，我们就要修改wsgi.py文件了。这个文件在下载来的压缩包里有。\n把它解压到/home目录下\n然后wsgi.py在/home/MadAuth/MadAuth/wsgi.py\n\nimport os\n\nfrom os.path import join,dirname,abspath\n\n \n\nPROJECT_DIR = dirname(dirname(abspath(__file__)))\n\nimport sys \n\nsys.path.insert(0,PROJECT_DIR) \n\n \n\nos.environ[\"DJANGO_SETTINGS_MODULE\"] = \"MadAuth.settings\" \n\n \n\nfrom django.core.wsgi import get_wsgi_application\n\napplication = get_wsgi_application()复制代码\n\n中间那些是添加的。\n然后chmod -Rf 777 /home/MadAuth/*\n不论如何，/home/MadAuth目录下的manage.py与db.sqlite3文件必须是777权限！\nsudo a2ensite MadAuth 或 sudo a2ensite MadAuth.conf复制代码\n\n\n\n\n"
        },
        {
            "author": "DarcJC",
            "timestamp": 1455366780,
            "txt_content": "标题: 服务端插件 本帖最后由 z25096708 于 2016-3-12 16:01 编辑 \n\n下载\n插件下载\n配置\n咳咳。。。配置文件也就一个config.yml\nserverKey2: MineCraft\n#  服务器秘钥\nurl: http://www.xxx.com/islogin\n#  请求url\nisLoginMessage: 用户已登录.\n#  登录的返回信息.一般不用修改.\nKickMessage: 对不起,你还没有登录.请使用启动器登录后再入服.\n#  玩家被踢出显示的信息.不支持颜色代码\n\n复制代码按上面的说明修改即可~\n支持\n插件编译使用spigot-api-1.8.7.jar。按道理来说都兼容。。。因为加入事件似乎万年没改过\n\n\n\n\n"
        },
        {
            "author": "DarcJC",
            "timestamp": 1455369540,
            "txt_content": "标题: 启动器的编写 本帖最后由 z25096708 于 2016-2-14 14:39 编辑 \n\n(⊙v⊙)嗯。用E会被吐槽的(⊙v⊙)。那么我们就用C#吧。{:10_492:}\nAVA其实嘛。。。用KMCCC不就行了。。。点这\n我就告诉你们我发现的一些方法吧。。。。\n设置java：\nProgram.Core.JavaPath =复制代码\n这个接受字符串\n\n直接进服的启动方法：\nvar result = Program.Core.Launch(new KMCCC.Launcher.LaunchOptions\n            {\n                Version = ver,\n                MaxMemory = 1024,\n                Authenticator = new OfflineAuthenticator(textBox2.Text),\n                Mode = LaunchMode.MCLauncher,\n                Server = new ServerInfo { Address = \"mc.g*****y.cc\", Port = 25565 },\n                MinMemory = 512,\n                \n                //Size = new WindowSize { Height = 768, Width = 1280 }\n            });复制代码\n【为了不被说是宣传服务器。我把我域名和谐了。。】\n\n启动后退出：\n在启动按钮点击事件的最后添加：\nClose();复制代码\n.然后就是注册和登录的了。\n登录：\n<div>HttpWebRequest request = (HttpWebRequest)WebRequest.Create(\"http://youwebsite.com:8000/?u=用户名&p=密码&ip=客户端IP\");</div><div>WebResponse response = request.GetResponse();</div><div>Stream resStream = response.GetResponseStream();</div><div>StreamReader sr = new StreamReader(resStream);</div><div>string gettext = sr.ReadLine();</div><div>if (gettext == \"登录成功!\")</div><div>{</div><div>    MessageBox.Show(gettext);</div><div>    启动游戏写在这里。其他的错误检测代码也是。</div><div>}</div>复制代码\n启动器源码下载（你们得自己修改网址。还有启动器标题== ）\n\nKMCCC在这\n\n\n\nKMCCC.Pro .zip\n(104 KB, 下载次数: 42)\n\n\n\n2016-2-14 14:40 上传\n点击文件名下载附件\n\n\n\n\n\n\n自己改后缀为dll\n\n\n\n\n\n\n"
        },
        {
            "author": "DarcJC",
            "timestamp": 1455371040,
            "txt_content": "标题: 后台 本帖最后由 z25096708 于 2016-2-13 22:28 编辑 \n\n这个。。其实是有后台的。。。\nhttp://yourwebsite.com:8000/admin\n就行了。。。\n默认的用户名和密码:\n用户名：admin\n密码：mc@123456\n\n请自行登录后台修改用户名和密码。\n若不想要后台可以把urls.py文件中的url(r'^admin/', admin.site.urls),用#注释掉\n"
        },
        {
            "author": "DarcJC",
            "timestamp": 1455430320,
            "txt_content": "标题: 邮件系统 本帖最后由 z25096708 于 2016-2-14 14:31 编辑 \n\n支持版本：v2.2及以上\n\n=配置=\n配置文件是/MadAuth/setting.py\n拉倒最下面，你们可以看见# Email Setting\n#Email Setting\n\nEMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'  #不用改\n\nEMAIL_USE_TLS = True  # 是否使用HTTPS [True or False]\n\nEMAIL_HOST = 'smtp.ym.163.com'  # smtp服务器\n\nEMAIL_PORT = 994  # smtp端口\n\nEMAIL_HOST_USER = 'mail@xxx.com'  # 登录服务器的用户名. such as mcdarc<span id=\"kM0.6876477607960371\">@163.com</span>\n\nEMAIL_HOST_PASSWORD = 'xxxx'  # 登录服务器的密码\n\nDEFAULT_FROM_EMAIL = 'xxx <mail@xxx.com>'  # 默认发送邮件用的名称。复制代码\n恩没错，就是这些。如果要发送邮件的话，你首先得把这里搞定！\n借用这张图片。\n如果FROM_EMAIL是'tuweizhong <tuweizhong@163.com>' ，他们收到的效果就类似这个。\n当然，不止这里要配置，/Auth/views.py也要\n找到这一句：\nsend_mails(\"XXX服务器——注册成功\", \"感谢注册XXX服务器！您的用户名为: %s , 您的密码为: %s , 注册IP已记录, 请不要重复注册！\", \"xxx <mail@xxx.com>\",\n                   email) % username, password复制代码\n\n自己修改。。。%s别弄没了就好。。。\n\n\n=提交玩家邮箱=\n只要在注册的GET提交里加入一个参数就好。\nhttp://yourwebsite.com:8000/register/?email=玩家邮箱&u=玩家名&p=密码&k=秘钥\n如此即可\n\n\n\n"
        },
        {
            "author": "matts8008",
            "timestamp": 1456064460,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "DarcJC",
            "timestamp": 1457765940,
            "txt_content": "标题: 使用MySQL 本帖最后由 z25096708 于 2016-3-12 15:07 编辑 \n\n大家一定希望这个系统可以支持MySQL吧~\n虽然他是一直支持的，但是我并没有写出教程。。。\n这里说一下\n\n\n在MadAuth目录下的setting.py文件中，会有这样一段\n# Database\n# https://docs.djangoproject.com/en/1.9/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n}复制代码\n这是默认的数据库.\n我们要将其改为\n# Database\n# https://docs.djangoproject.com/en/1.9/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': '', #数据库名\n        'USER': 'root',\n        'PASSWORD': '',\n        'HOST': '',\n        'PORT': '3306',\n    }\n}复制代码不过在这之前请先使用pip install mysqldb安装模块\n然后就好了.\n不对！我们还要setup他！\npython manage.py makemigrations\n\npython manage.py migrate复制代码\n在manage.py的目录下打开命令行,输入上面的命令即可\n\n"
        },
        {
            "author": "Fantasea_",
            "timestamp": 1457766600,
            "txt_content": "前来领锭，恭喜楼主。"
        },
        {
            "author": "DarcJC",
            "timestamp": 1457767380,
            "txt_content": "标题: 找回密码 本帖最后由 z25096708 于 2016-3-12 15:31 编辑 \n\n同样的，找回密码也使用get方式。\n请求找回密码邮件：http://yoursite/findacc/?u=用户名&e=邮箱\n如果没有找到匹配的用户名及邮箱，那么会返回未匹配到用户名与邮箱\n若成功则会返回邮件已发送。\n若未提交足够参数则返回参数错误。\n\n请求修改密码： http://yoursite/findback/?u=用户名&p=新的密码&c=验证码(通常为八位数字)\n成功则返回密码修改成功\n\n当然你也可以禁用这个功能。在urls.py中使用#注释掉\nurl(r'^findacc/', views.findacc),\nurl(r'^findback/', views.findback),复制代码\n即可\n\n"
        },
        {
            "author": "824421229",
            "timestamp": 1463901000,
            "txt_content": "面板的我自觉点击X=.="
        },
        {
            "author": "MycraftServer",
            "timestamp": 1464441840,
            "txt_content": "请问楼主，插件那个下载链接挂了，能不能发给我，打算入坑"
        },
        {
            "author": "tallmoon",
            "timestamp": 1465517580,
            "txt_content": "楼主下载地址不行了"
        },
        {
            "author": "7628226",
            "timestamp": 1465550040,
            "txt_content": "好用！！！！！！"
        },
        {
            "author": "翼LOVE·小爱",
            "timestamp": 1467292860,
            "txt_content": "请问楼主 能推出支持sponge的插件吗？QwQ"
        },
        {
            "author": "DarcJC",
            "timestamp": 1467294840,
            "txt_content": "翼LOVE·小爱 发表于 2016-6-30 21:21\n请问楼主 能推出支持sponge的插件吗？QwQ\n谢谢支持，不过已弃坑"
        },
        {
            "author": "神~阿尔法",
            "timestamp": 1467363480,
            "txt_content": "这个是正版登陆用的？"
        },
        {
            "author": "Ynglife",
            "timestamp": 1467471840,
            "txt_content": "好东西,就是对外接口会麻烦"
        }
    ]
}