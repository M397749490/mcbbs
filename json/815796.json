{
    "title": "帮忙修改编译模组-开源模组修改可能在服务器出的问题",
    "author": "cbsjz",
    "replyCount": 0,
    "timestamp": 1534725000,
    "txt_content": "先说一下是什么模组 AcademyCraft(学园都市/超能力)\n模组是开源的啊 源码 这只是一个小修改\n要修改的就是电击使的技能电弧激发 击到易燃方块会产生火(开发机里的技能解释能不能也忙吧修改一下)\n这个火在服务器里很头疼(玩家放技能产生一大堆的火挺烦的)\n\n\n\n\nQQ截图20180820081734.png (221.34 KB, 下载次数: 0)\n\n下载附件\n\n2018-8-20 08:19 上传\n\n\n\n\n\n这里还有一个问题服务器用的模组是修复版的 (这里来的)\n这个我不知道他修改了哪 (帖子说:一方矢量操作的集束冲击技能无视保护)\n希望是两个问题都能一起解决\n\n\n就是我不太会编译 想请人帮忙修改编译一下我查百度瞎改了个文件不知道对不对\n\n/**\n  * Copyright (c) Lambda Innovation, 2013-2016\n  * This file is part of the AcademyCraft mod.\n  * https://github.com/LambdaInnovation/AcademyCraft\n  * Licensed under GPLv3, see project root for more information.\n  */\npackage cn.academy.vanilla.electromaster.skill\n\nimport cn.academy.ability.api.AbilityAPIExt._\nimport cn.academy.ability.api.Skill\nimport cn.academy.ability.api.context.{RegClientContext, ClientContext, Context, ClientRuntime}\nimport cn.academy.core.client.sound.ACSounds\nimport cn.academy.vanilla.electromaster.client.effect.ArcPatterns\nimport cn.academy.vanilla.electromaster.entity.EntityArc\nimport cn.lambdalib.annoreg.core.Registrant\nimport cn.lambdalib.s11n.network.NetworkMessage.Listener\nimport cn.lambdalib.util.entityx.handlers.Life\nimport cn.lambdalib.util.generic.MathUtils._\nimport cn.lambdalib.util.generic.RandUtils\nimport cn.lambdalib.util.mc.{BlockSelectors, IBlockSelector, Raytrace}\nimport cpw.mods.fml.relauncher.{Side, SideOnly}\nimport net.minecraft.block.Block\nimport net.minecraft.entity.item.EntityItem\nimport net.minecraft.entity.player.EntityPlayer\nimport net.minecraft.init.{Items, Blocks}\nimport net.minecraft.item.ItemStack\nimport net.minecraft.util.MovingObjectPosition.MovingObjectType\nimport net.minecraft.world.World\n\n/**\n  * [url=home.php?mod=space&uid=1231151]@author[/url] WeAthFolD, KSkun\n  */\nobject ArcGen extends Skill(\"arc_gen\", 1) {\n\n  @SideOnly(Side.CLIENT)\n  override def activate(rt: ClientRuntime, keyid: Int) = activateSingleKey(rt, keyid, p => new ArcGenContext(p))\n\n}\n\nprivate object ArcGenContext {\n\n  final val MSG_EFFECT = \"effect\"\n  final val MSG_PERFORM = \"perform\"\n\n  val blockFilter = new IBlockSelector {\n    override def accepts(world: World, x: Int, y: Int, z: Int, block: Block) = {\n      block == Blocks.water || block == Blocks.flowing_water ||\n        BlockSelectors.filNormal.accepts(world, x, y, z, block)\n    }\n  }\n\n}\n\nimport ArcGenContext._\n\nclass ArcGenContext(p: EntityPlayer) extends Context(p, ArcGen) {\n\n  private val damage = lerpf(5, 9, ctx.getSkillExp)\n  private val igniteProb = lerpf(0, 0.6f, ctx.getSkillExp)\n  private val fishProb = if(ctx.getSkillExp > 0.5f) 0.1 else 0\n  private val canStunEnemy = ctx.getSkillExp >= 1.0f\n  private val range = lerpf(6, 15, ctx.getSkillExp)\n  private val cp = lerpf(30, 70, ctx.getSkillExp)\n\n  private def consume() = {\n    val overload = lerpf(18, 11, ctx.getSkillExp)\n\n    ctx.consume(overload, cp)\n  }\n\n  @Listener(channel=MSG_KEYDOWN, side=Array(Side.CLIENT))\n  private def l_keydown() = {\n    sendToServer(MSG_PERFORM)\n  }\n\n  @Listener(channel=MSG_PERFORM, side=Array(Side.SERVER))\n  private def s_perform() = {\n    if(consume()) {\n      val world = player.worldObj\n      // Perform ray trace\n      val result = Raytrace.traceLiving(player, range, null, blockFilter)\n\n      sendToClient(MSG_EFFECT, range.asInstanceOf[AnyRef])\n\n      if (result != null) {\n        var expincr = 0f\n        if (result.typeOfHit == MovingObjectType.ENTITY) {\n          EMDamageHelper.attack(ctx, result.entityHit, damage)\n          expincr = getExpIncr(true)\n        } else {\n          //BLOCK\n          val hx = result.blockX\n          val hy = result.blockY\n          val hz = result.blockZ\n          val block = player.worldObj.getBlock(hx, hy, hz)\n          if (block == Blocks.water) {\n            if (RandUtils.ranged(0, 1) < fishProb) {\n              world.spawnEntityInWorld(new EntityItem(\n                world,\n                result.hitVec.xCoord,\n                result.hitVec.yCoord,\n                result.hitVec.zCoord,\n                new ItemStack(Items.cooked_fished)))\n              ArcGen.triggerAchievement(player)\n            }\n          }\n          expincr = getExpIncr(false)\n        }\n        ctx.addSkillExp(expincr)\n      }\n\n      ctx.setCooldown(lerpf(15, 5, ctx.getSkillExp).toInt)\n    }\n    terminate()\n  }\n\n  private def getExpIncr(effectiveHit : Boolean) = {\n    if (effectiveHit) {\n      lerpf(0.0048f, 0.0072f, ctx.getSkillExp)\n    } else {\n      lerpf(0.0018f, 0.0027f, ctx.getSkillExp)\n    }\n  }\n\n}\n\n@Registrant\n@SideOnly(Side.CLIENT)\n@RegClientContext(classOf[ArcGenContext])\nclass ArcGenContextC(par: ArcGenContext) extends ClientContext(par) {\n\n  @Listener(channel=MSG_EFFECT, side=Array(Side.CLIENT))\n  private def c_spawnEffects(range: Float) = {\n    val arc = new EntityArc(player, ArcPatterns.weakArc)\n    arc.texWiggle = 0.7\n    arc.showWiggle = 0.1\n    arc.hideWiggle = 0.4\n    arc.addMotionHandler(new Life(10))\n    arc.lengthFixed = false\n    arc.length = range\n\n    player.worldObj.spawnEntityInWorld(arc)\n    ACSounds.playClient(player, \"em.arc_weak\", 0.5f)\n  }\n\n}复制代码\n乱东西打包链接：https://pan.baidu.com/s/1CVrTTZ5UHv9CgnoeJ62pFA 密码：z0eh\n联系QQ763041795(注明来意)别宰我啊，其他的都好说\n\n\n\n",
    "replies": []
}