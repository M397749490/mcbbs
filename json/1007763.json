{
    "title": "Authme链接MYSQL问题",
    "author": "Galaxy_CC",
    "replyCount": 4,
    "timestamp": 1586021820,
    "txt_content": "报错内容：\n\n[01:31:17 WARN]: [Server thread] INFO fr.xephi.authme.libs.zaxxer.hikari.HikariDataSource - AuthMeMYSQLPool - Starting...\n[01:31:19 WARN]: [Server thread] ERROR fr.xephi.authme.libs.zaxxer.hikari.pool.HikariPool - AuthMeMYSQLPool - Exception during pool initialization.\n[01:31:19 WARN]: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n[01:31:19 WARN]: \n[01:31:19 WARN]: The last packet successfully received from the server was 430 milliseconds ago.  The last packet sent successfully to the server was 420 milliseconds ago.\n[01:31:19 WARN]:        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n[01:31:19 WARN]:        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n[01:31:19 WARN]:        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n[01:31:19 WARN]:        at java.lang.reflect.Constructor.newInstance(Unknown Source)\n[01:31:19 WARN]:        at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)\n[01:31:19 WARN]:        at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:990)\n[01:31:19 WARN]:        at com.mysql.jdbc.ExportControlled.transformSocketToSSLSocket(ExportControlled.java:201)\n[01:31:19 WARN]:        at com.mysql.jdbc.MysqlIO.negotiateSSLConnection(MysqlIO.java:4869)\n[01:31:19 WARN]:        at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1656)\n[01:31:19 WARN]:        at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1217)\n[01:31:19 WARN]:        at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2189)\n[01:31:19 WARN]:        at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2220)\n[01:31:19 WARN]:        at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2015)\n[01:31:19 WARN]:        at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:768)\n[01:31:19 WARN]:        at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)\n[01:31:19 WARN]:        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n[01:31:19 WARN]:        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n[01:31:19 WARN]:        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n[01:31:19 WARN]:        at java.lang.reflect.Constructor.newInstance(Unknown Source)\n[01:31:19 WARN]:        at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)\n[01:31:19 WARN]:        at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:385)\n[01:31:19 WARN]:        at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:323)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:117)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:123)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:375)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:204)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:445)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:516)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:116)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:97)\n[01:31:19 WARN]:        at fr.xephi.authme.datasource.MySQL.getConnection(MySQL.java:157)\n[01:31:19 WARN]:        at fr.xephi.authme.datasource.MySQL.checkTablesAndColumns(MySQL.java:164)\n[01:31:19 WARN]:        at fr.xephi.authme.datasource.MySQL.<init>(MySQL.java:69)\n[01:31:19 WARN]:        at fr.xephi.authme.initialization.DataSourceProvider.createDataSource(DataSourceProvider.java:72)\n[01:31:19 WARN]:        at fr.xephi.authme.initialization.DataSourceProvider.get(DataSourceProvider.java:49)\n[01:31:19 WARN]:        at fr.xephi.authme.initialization.DataSourceProvider.get(DataSourceProvider.java:26)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.jalu.injector.handlers.provider.ProviderHandlerImpl$UninitializedProviderInstantiation.instantiateWith(ProviderHandlerImpl.java:141)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.jalu.injector.InjectorImpl.instantiate(InjectorImpl.java:181)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.jalu.injector.InjectorImpl.get(InjectorImpl.java:155)\n[01:31:19 WARN]:        at fr.xephi.authme.libs.jalu.injector.InjectorImpl.getSingleton(InjectorImpl.java:56)\n[01:31:19 WARN]:        at fr.xephi.authme.AuthMe.instantiateServices(AuthMe.java:246)\n[01:31:19 WARN]:        at fr.xephi.authme.AuthMe.initialize(AuthMe.java:221)\n[01:31:19 WARN]:        at fr.xephi.authme.AuthMe.onEnable(AuthMe.java:136)\n[01:31:19 WARN]:        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:263)\n[01:31:19 WARN]:        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:337)\n[01:31:19 WARN]:        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:483)\n[01:31:19 WARN]:        at org.bukkit.craftbukkit.v1_15_R1.CraftServer.enablePlugin(CraftServer.java:470)\n[01:31:19 WARN]:        at org.bukkit.craftbukkit.v1_15_R1.CraftServer.enablePlugins(CraftServer.java:384)\n[01:31:19 WARN]:        at net.minecraft.server.v1_15_R1.MinecraftServer.a(MinecraftServer.java:482)\n[01:31:19 WARN]:        at net.minecraft.server.v1_15_R1.DedicatedServer.init(DedicatedServer.java:298)\n[01:31:19 WARN]:        at net.minecraft.server.v1_15_R1.MinecraftServer.run(MinecraftServer.java:885)\n[01:31:19 WARN]:        at java.lang.Thread.run(Unknown Source)\n[01:31:19 WARN]: Caused by: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors\n[01:31:19 WARN]:        at sun.security.ssl.Alerts.getSSLException(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.SSLSocketImpl.fatal(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.Handshaker.fatalSE(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.Handshaker.fatalSE(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.ClientHandshaker.serverCertificate(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.ClientHandshaker.processMessage(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.Handshaker.processLoop(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.Handshaker.process_record(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.SSLSocketImpl.readRecord(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)\n[01:31:19 WARN]:        at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)\n[01:31:19 WARN]:        at com.mysql.jdbc.ExportControlled.transformSocketToSSLSocket(ExportControlled.java:186)\n[01:31:19 WARN]:        ... 45 more\n[01:31:19 WARN]: Caused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors\n[01:31:19 WARN]:        at com.mysql.jdbc.ExportControlled$X509TrustManagerWrapper.checkServerTrusted(ExportControlled.java:302)\n[01:31:19 WARN]:        at sun.security.ssl.AbstractTrustManagerWrapper.checkServerTrusted(Unknown Source)\n[01:31:19 WARN]:        ... 54 more\n[01:31:19 WARN]: Caused by: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors\n[01:31:19 WARN]:        at sun.security.provider.certpath.PKIXCertPathValidator.validate(Unknown Source)\n[01:31:19 WARN]:        at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(Unknown Source)\n[01:31:19 WARN]:        at java.security.cert.CertPathValidator.validate(Unknown Source)\n[01:31:19 WARN]:        at com.mysql.jdbc.ExportControlled$X509TrustManagerWrapper.checkServerTrusted(ExportControlled.java:295)\n[01:31:19 WARN]:        ... 55 more\n[01:31:19 WARN]: [AuthMe] Can't initialize the MySQL database: [CommunicationsException]: Communications link failure\n\nThe last packet successfully received from the server was 430 milliseconds ago.  The last packet sent successfully to the server was 420 milliseconds ago.\n[01:31:19 WARN]: [AuthMe] Please check your database settings in the config.yml file!\n[01:31:19 WARN]: [AuthMe] Could not create data source: [CommunicationsException]: Communications link failure\n\nThe last packet successfully received from the server was 430 milliseconds ago.  The last packet sent successfully to the server was 420 milliseconds ago.\n[01:31:19 WARN]: [AuthMe] Aborting initialization of AuthMe: [IllegalStateException]: Error during initialization of data source\n[01:31:19 WARN]: [AuthMe] THE SERVER IS GOING TO SHUT DOWN AS DEFINED IN THE CONFIGURATION!\n\n",
    "replies": [
        {
            "author": "天辉胡萝卜",
            "timestamp": 1586021820,
            "txt_content": "Galaxy_CC 发表于 2020-4-5 02:01\n新的报错：\n[01:59:39 WARN]: [Server thread] INFO fr.xephi.authme.libs.zaxxer.hikari.HikariDataSour ...\n下载不到geoip也就是ip-地理位置数据库\n\nProtection:\n    # Enable some servers protection (country based login, antibot)\n    enableProtection: false\n    # Apply the protection also to registered usernames\n    enableProtectionRegistered: false\n\n暂时把这两项设为false可以绕过"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1586022360,
            "txt_content": "ssl证书错误\n在authme文件夹下的config.yml中，将\nmySQLUseSSL: true\n修改为\nmySQLUseSSL: false"
        },
        {
            "author": "Galaxy_CC",
            "timestamp": 1586023260,
            "txt_content": "疾风暗影 发表于 2020-4-5 01:46\nssl证书错误\n在authme文件夹下的config.yml中，将\nmySQLUseSSL: true\n新的报错：\n[01:59:39 WARN]: [Server thread] INFO fr.xephi.authme.libs.zaxxer.hikari.HikariDataSource - AuthMeMYSQLPool - Starting...\n[01:59:39 WARN]: [Server thread] INFO fr.xephi.authme.libs.zaxxer.hikari.HikariDataSource - AuthMeMYSQLPool - Start completed.\n[01:59:39 INFO]: [AuthMe] Created column 'regdate' and set the current timestamp, 1586023179618, to all 0 rows\n[01:59:39 INFO]: [AuthMe] MySQL setup finished\n[01:59:39 INFO]: [AuthMe] No supported permissions system found! Permissions are disabled!\n[01:59:40 WARN]: [AuthMe] Could not download GeoLiteAPI database [UnknownHostException]: geolite.maxmind.com\n[01:59:40 WARN]: [AuthMe] Aborting initialization of AuthMe: [InjectorReflectionException]: Could not invoke constructor of class 'class fr.xephi.authme.command.CommandHandler'\n[01:59:40 WARN]: [AuthMe] THE SERVER IS GOING TO SHUT DOWN AS DEFINED IN THE CONFIGURATION!\n[01:59:40 INFO]: [AuthMe] Waiting for 0 tasks to finish\n[01:59:40 WARN]: [Server thread] INFO fr.xephi.authme.libs.zaxxer.hikari.HikariDataSource - AuthMeMYSQLPool - Shutdown initiated...\n[01:59:40 WARN]: [Server thread] INFO fr.xephi.authme.libs.zaxxer.hikari.HikariDataSource - AuthMeMYSQLPool - Shutdown completed.\n这么晚还能帮助，真是太感谢了\n"
        },
        {
            "author": "Galaxy_CC",
            "timestamp": 1586085240,
            "txt_content": " 本帖最后由 Galaxy_CC 于 2020-4-5 19:33 编辑 \n疾风暗影 发表于 2020-4-5 02:21\n下载不到geoip也就是ip-地理位置数据库\n\nProtection:\n总结了一下报错信息，有用的应该是这三条，是哪个配置有问题啊\n[19:09:16 WARN]: [AuthMe] Could not download GeoLiteAPI database [UnknownHostException]: geolite.maxmind.com\n[19:09:16 WARN]: [AuthMe] Aborting initialization of AuthMe: [InjectorReflectionException]: Could not invoke constructor of class 'class fr.xephi.authme.command.CommandHandler'\n[19:09:16 WARN]: [AuthMe] THE SERVER IS GOING TO SHUT DOWN AS DEFINED IN THE CONFIGURATION!\n我尝试更新了authme，现在不会出现问题了，非常感谢大佬回答我的问题！\n"
        }
    ]
}