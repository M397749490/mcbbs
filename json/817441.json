{
    "title": "[已解决][Bukkit]如何以玩家为中心获取一个半径圆内是否存在某一方块",
    "author": "2609848420",
    "replyCount": 3,
    "timestamp": 1535271120,
    "txt_content": " 本帖最后由 2609848420 于 2018-9-9 10:36 编辑 \n\n如题比如一个玩家为中心坐标画圆 \n如何判断此圆内是否存在某一个方块\ngetNearByEntities返回的是生物对象吧\n我希望监测的方块是BANNER\n半径大约是8格",
    "replies": [
        {
            "author": "哦快快快",
            "timestamp": 1535332500,
            "txt_content": "或许可以直接把周围方块一个个检测"
        },
        {
            "author": "1139365029",
            "timestamp": 1535980860,
            "txt_content": " 本帖最后由 1139365029 于 2018-9-4 09:53 编辑 \n\n首先你这个问题只能对方块一个一个进行遍历，然后判断是不是目标方块，\n而你题目中提到“半径大约是8格”，也不知道半径是不是可变的，\n\n先给你固定半径的遍历方法，\n你只需要去坐标原点，\n然后把球形区域里所有方块的坐标记录下来（随便记录在什么地方），\n遍历的时候就根据玩家坐标推算出方块坐标，\n一个一个遍历，\n假设你记录的方块坐标为（i,j,k），\n玩家坐标为（x,y,z），\n则实际方块坐标为（i+x,j+y,k+z）\n\n接下来是可变半径的遍历方法：\n\n\n\n\n\n1.png (15.11 KB, 下载次数: 0)\n\n下载附件\n\n2018-9-3 21:17 上传\n\n\n\n\n\n\n\n\n\n2.png (13.65 KB, 下载次数: 0)\n\n下载附件\n\n2018-9-3 21:05 上传\n\n\n\n\n\n\n\n\n\n3.png (13.62 KB, 下载次数: 0)\n\n下载附件\n\n2018-9-3 21:17 上传\n\n\n\n\n\n\n\n\n\n4.png (15.15 KB, 下载次数: 0)\n\n下载附件\n\n2018-9-3 21:18 上传\n\n\n\n\n\n\n\n\n\n5.png (16.75 KB, 下载次数: 0)\n\n下载附件\n\n2018-9-3 21:18 上传\n\n\n\n\n\n\n更新：上面为原答案，下面为新增加的内容：\n\njava开根号的函数，需要先看完上面的“可变半径的遍历方法”才能点开，\nMath.sqrt()复制代码\n感谢评论区给的解答"
        },
        {
            "author": "阿淼",
            "timestamp": 1536555780,
            "txt_content": "1139365029 发表于 2018-9-3 21:21\n首先你这个问题只能对方块一个一个进行遍历，然后判断是不是目标方块，\n而你题目中提到“半径大约是8格”， ...\n优化提示：不要开根号，因为如果n < sqrt(x^2 + y^2 + z^2)的话那么n^2 = x^2 + y^2 + z^2"
        }
    ]
}