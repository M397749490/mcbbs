{
    "title": "Spigot插件更改寒冷群系下雪高度",
    "author": "renzd2001",
    "replyCount": 5,
    "timestamp": 1596850140,
    "txt_content": "各位大佬好。我平常使用Spigot Api 写点小插件，今天遇到了一个问题：部分生物群系在y=92高度以上会下雪，而我不知道如何更改这个高度。\n\n请问各位大佬愿意指点一下吗？ 十分感谢！",
    "replies": [
        {
            "author": "1151739616",
            "timestamp": 1596850200,
            "txt_content": ""
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1596850500,
            "txt_content": "https://minecraft-zh.gamepedia.c ... 9%E7%BE%A4%E7%B3%BB\n\n下雪受biome的温度决定\n每从默认海平面（Y=64）向上升高1米，温度将会降低0.0016\n所以某些群系高空会下雪\n\n\n群系的base Temperature无法被spigot直接操控\n之前spigot论坛上有开发者用反射强行修改NMS群系中temperature的值，但是失败了"
        },
        {
            "author": "renzd2001",
            "timestamp": 1596851580,
            "txt_content": "疾风暗影 发表于 2020-8-8 09:35\nhttps://minecraft-zh.gamepedia.com/%E7%94%9F%E7%89%A9%E7%BE%A4%E7%B3%BB\n\n下雪受biome的温度决定\n感谢！那么我就找一找有没有其他的办法"
        },
        {
            "author": "William_Shi",
            "timestamp": 1596852900,
            "txt_content": "带你分析一下NMS\n这是BiomeBase类的代码（abstract  class，所有具体生物群系的父类）\n\n  protected float a(BlockPosition var0) {\n    if (var0.getY() > 64) {\n      float var1 = (float)(d.a((var0.getX() / 8.0F), (var0.getZ() / 8.0F), false) * 4.0D);\n      return getTemperature() - (var1 + var0.getY() - 64.0F) * 0.05F / 30.0F;\n    } \n    return getTemperature();\n  }\n\n意思就是说，y=64以下，直接返回基准温度\n否则，进行@疾风暗影 所说的计算\n\n\n  public final float getTemperature() {\n    return this.i;\n  }\n\n所以就是这个i变量代表温度"
        },
        {
            "author": "DLumina",
            "timestamp": 1601384100,
            "txt_content": "这个需求之前见到过。下雪是纯客户端渲染效果，如果想改只能欺骗客户端，让它认为当前群系其实是其他的某个原版群系。自然，树叶、水体的颜色也会跟着变化，而且不能调出在原版mc当中不存在的雪线高度。如果想要控制雪片方块产生的高度倒是简单……"
        }
    ]
}