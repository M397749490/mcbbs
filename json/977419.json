{
    "title": "[已解决]怎么才能调用Block中的setSoundType方法",
    "author": "squid233",
    "replyCount": 6,
    "timestamp": 1583395680,
    "txt_content": " 本帖最后由 squid233 于 2020-6-14 19:55 编辑 \n\nMinecraft版本: 1.12.2\nForge为最新版\n\n如题。自己写的一个mod，在开发新方块时发现不能调用setSoundType方法，导致不能设置方块声音。\n\n由于Block类中的setSoundType方法被标记为protected，导致无法正常调用。\n请问如何才能调用这个方法？\n代码如下：\npackage io.github.yummyfood.register;\n\nimport io.github.yummyfood.YummyFood;\nimport net.minecraft.block.Block;\nimport net.minecraft.block.SoundType;\nimport net.minecraft.creativetab.CreativeTabs;\nimport net.minecraftforge.common.MinecraftForge;\nimport net.minecraftforge.event.RegistryEvent;\nimport net.minecraftforge.fml.common.Mod;\nimport net.minecraftforge.fml.common.eventhandler.SubscribeEvent;\n\n@Mod.EventBusSubscriber\npublic class BlocksRegister extends Block {\n    protected SoundType blockSoundType;\n    private Object Block;\n\n    private static String name_1 = \"pineapple_block\";\n\n    protected Block setSoundType(SoundType sound) {\n        this.blockSoundType = sound;\n        return (net.minecraft.block.Block) Block;\n    }\n\n    Block pineapple_block = new BlocksRegister().setRegistryName(name_1).setUnlocalizedName(YummyFood.MODID+\":\"+name_1).setCreativeTab(CreativeTabs.DECORATIONS);\n\n    public BlocksRegister(){\n        super(null);\n        MinecraftForge.EVENT_BUS.register(this);\n    }\n    @SubscribeEvent\n    public static void registerBlocks(RegistryEvent.Register<Block> event) {\n\n    }\n}\n复制代码",
    "replies": [
        {
            "author": "src_resources",
            "timestamp": 1583412060,
            "txt_content": "尝试用反射进行调用？\n\n        try {\n            // 通过反射获取方法\n            Method method = Block.class.getDeclaredMethod(\"setSoundType\", SoundType.class);\n            // 强行设置方法可见\n            method.setAccessible(true);\n            // 调用方法，blockObject 是对应的 Block 对象，sound 是要设置的声音类型。\n            method.invoke(blockObject, sound);\n        } catch (NoSuchMethodException e) {\n            e.printStackTrace();\n        }\n复制代码"
        },
        {
            "author": "清晨w",
            "timestamp": 1583456460,
            "txt_content": "或者用AT(https://fmltutor.ustc-zzzz.net/% ... ssTransformers.html)"
        },
        {
            "author": "KBlom",
            "timestamp": 1583473680,
            "txt_content": "6666666666"
        },
        {
            "author": "3TUSK",
            "timestamp": 1583481480,
            "txt_content": " 本帖最后由 3TUSK 于 2020-3-6 15:59 编辑 \n在开发新方块时发现不能调用setSoundType方法\n在你自己的方块的构造器里调用不就好了。protected 访问级修饰符允许你在这个类的子类中调用被修饰的方法。\n\npublic class MyBlock extends Block {\n  public MyBlock(Material mat) {\n    super(mat);\n    this.setSoundType(...); // 这样是可以的。\n  }\n  @Override // 你实在是在意的话你也可以直接把这个方法重新暴露出来。\n  public Block setSoundType(SoundType type) {\n    return super.setSoundType(type);\n  }\n}复制代码"
        },
        {
            "author": "qwq执范",
            "timestamp": 1587545940,
            "txt_content": "直接在方块调用，不就好了吗"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1587558600,
            "txt_content": "为什么不写个壳呢？\n一个public的调用this.soundType的方法。\n至于什么AT，有这么复杂吗？"
        }
    ]
}