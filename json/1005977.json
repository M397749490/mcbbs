{
    "title": "服务端一直重启",
    "author": "KS.xiaohui",
    "replyCount": 8,
    "timestamp": 1585807740,
    "txt_content": " 本帖最后由 KS.xiaohui 于 2020-4-2 14:13 编辑 \n\n后台也没显示报错 就出现这个启动器的\n\n\n\n\nQQ图片20200402140640.png (25.4 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-2 14:08 上传\n\n\n\n\n\n启动器文件\n@echo off\n::关闭回显\nset isre=1\n::是否重启 0为关 , 1为开\nset retime=3\n::设置重启等待时间\nset restart=0\n::设置重启次数初始值，默认为0，请勿修改\nset maxre=-1\n::重启多少次后不再重启,设置成-1关闭\n:start\n::start节点\n\nCLS\n::清除屏幕上内容\n\nset server_name=创世之光\n::服务器名称，会在服务端的标题处显示\nset min_ram=2048\n::最小内存，默认6048，单位MB\nset max_ram=6192\n::最大内存，默认6192，单位MB\nset tm1=%time:~0,2%\nset tm2=%time:~3,2%\nset tm3=%time:~6,2%\n@echo. \necho  现在时间：%date% %tm1%点%TM2%分\n@echo. -----------------------------------------------------------------\n@echo.                         %server_name%服务器     \n\n@echo.           注意:关闭服务器前请在后台输入stop保存玩家数据\n@echo.                      否则可能会出现回档情况\n@echo.\n@echo.                      服务器正在启动中,请稍等……\n@echo.\n@echo. -----------------------------------------------------------------\n::启动时的一些显示\n\n::警告，如果你使用x86架构的Java(即32位)，最大内存不能超过1024MB\nset jar_name=Uranium-1710-dev-5-B271-31d6587-server.jar\n::设置服务端核心名称，默认路径为该批处理文件所在的根目录，需要写入文件后缀\nif %isre% == 0 (title %server_name%服务器 最大内存%max_ram%M) else (title %server_name%服务器 最大内存%max_ram%M 重启次数%restart%次)\n::设置的服务端标题，调用上面的一些变量，可酌情修改\n\njava -server -Xincgc -Xmx%max_ram%M -Xms%min_ram%M -Xss32M -XX:+AggressiveOpts -XX:+UseCMSCompactAtFullCollection -XX:+UseFastAccessorMethods -XX:ParallelGCThreads=4 -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=2 -XX:CMSInitiatingOccupancyFraction=70 -XX:-DisableExplicitGC -XX:-DisableExplicitGC -XX:TargetSurvivorRatio=90 -jar %jar_name%\n::Java命令行开服代码，不推荐修改，已进行优化，32位Java运行可能会有些许问题，如有问题请替换为下方代码\n::java -Xincgc -Xmx%max_ram%M -Xms%min_ram%M -Xss512K -XX:+AggressiveOpts -XX:+UseFastAccessorMethods -XX:ParallelGCThreads=4 -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=2 -XX:CMSInitiatingOccupancyFraction=70 -XX:-DisableExplicitGC -XX:-DisableExplicitGC -XX:TargetSurvivorRatio=90 -jar %jar_name%\n\n@echo. -----------===服务端关闭，即将在五秒内重启,按Ctrl+C终止重启===------------\n@echo.\n@echo.               %server_name% --- 玩家数据保存完毕 已关服\n@echo.\n@echo. -----------------------------------------------------------------\n\nset/a restart=restart+1\n\nif %isre% == 0 (goto stop) else (goto restart)\n:restart\n::restart标签\n::设置重启次数自加一，请勿修改\ntimeout /t %retime% /NOBREAK\nif %restart% == %maxre% (goto stop) else (goto start)\n:stop\nif %isre% == 0 (echo 未开启自动重启，如果需要，请到bat中开启) else (echo 已经自动重启%maxre%次，停止自动重启，按任意键关闭)\npause\n",
    "replies": [
        {
            "author": "结城希亚",
            "timestamp": 1585807740,
            "txt_content": "KS.xiaohui 发表于 2020-4-2 14:22\n可以了  这是什么错误了这个错误一般发生于服务端本体的yaml出错时\n我之前也悬赏过的"
        },
        {
            "author": "思念化作海",
            "timestamp": 1585807740,
            "txt_content": "清除掉多余的启动参数 只留下-jar 服务端核心.jar呢"
        },
        {
            "author": "KS.xiaohui",
            "timestamp": 1585807980,
            "txt_content": "折叠 发表于 2020-4-2 14:09\n清除掉多余的启动参数 只留下-jar 服务端核心.jar呢\n我补充了 刚刚试了 不行"
        },
        {
            "author": "思念化作海",
            "timestamp": 1585808100,
            "txt_content": "KS.xiaohui 发表于 2020-4-2 14:13\n我补充了 刚刚试了 不行\nbat清空 直接用java -jar Uranium-1710-dev-5-B271-31d6587-server.jar 呢"
        },
        {
            "author": "KS.xiaohui",
            "timestamp": 1585808220,
            "txt_content": "折叠 发表于 2020-4-2 14:15\nbat清空 直接用java -jar Uranium-1710-dev-5-B271-31d6587-server.jar 呢\n不行啊。"
        },
        {
            "author": "思念化作海",
            "timestamp": 1585808280,
            "txt_content": "KS.xiaohui 发表于 2020-4-2 14:17\n不行啊。\n打开后有提示什么吗          发一下latest.log"
        },
        {
            "author": "结城希亚",
            "timestamp": 1585808340,
            "txt_content": "把服务端根目录下所有.yml扩展名的文件删除"
        },
        {
            "author": "KS.xiaohui",
            "timestamp": 1585808520,
            "txt_content": "结城希亚 发表于 2020-4-2 14:19\n把服务端根目录下所有.yml扩展名的文件删除\n可以了  这是什么错误了"
        }
    ]
}