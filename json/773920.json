{
    "title": "【cb】检测落地物品变容器后续",
    "author": "不动要塞",
    "replyCount": 7,
    "timestamp": 1514866740,
    "txt_content": "\n有关于落地物品事件的其他问题\n版本1.12+     主要是单机，最好支持多人\n之前需要\n          1.检测有特定lore且在地面上的物品，例如检测lore或者名称为“扔到地上变成宝箱”的箱子物品掉落物\n          2.在该物品处生成有内容的容器，例如在该物品处生成一个有颗钻石的箱子\n          3.应当删除该掉落物\n\n\n在前面大神的帮助下成功实现：http://www.mcbbs.net/thread-773909-1-1.html   \n/scoreboard players tag @e add sc {Item:{id:\"minecraft:chest\",Count:1b,tag:{display:{Name:\"扔到地上生成箱子\"}}},OnGround:1b}\n\n/execute @e[tag=sc] ~ ~ ~ /setblock ~ ~ ~ chest 0 keep {Items:[{Slot:0b,id:\"minecraft:diamond\",Count:1b}]}\n\n/kill @e[tag=sc,type=Item]复制代码 但是，我发现,出现一个生成箱子的事件，会把其他没有生成箱子的物品也删掉\n\n\n在非整格高的上面(比如雪，地毯，半砖)上不视为落地，不生成宝箱\n我使用条件，虽然不会出现没生成宝箱就刷掉物品的情况，但还是会出现上面的\n出现一个生成箱子事件，就删除物品\n应该如何解决?\n\n\n\n还有，放在展示框里也会被视为放在地上，且不会被删掉物品，能无限刷宝箱\n\n\n=====================================================================================\n因此，有这两个问题需要帮助：\n        1：需要解决刷一个宝箱，会删掉其他没刷宝箱的物品的问题（主要问题）\n        2：有办法解决在半砖上不能生成的问题吗（会需要像手榴弹，扔出物品爆炸，不然会出现扔到地毯                        上不爆炸的尴尬情况）\n        2：展示框里的物品也能出事件的问题（如果不能解决，我只能指定一个不能放展示区的地方，专门用来                   开箱）\n",
    "replies": [
        {
            "author": "ruhuasiyu",
            "timestamp": 1514866740,
            "txt_content": "因为你setblock 后面是 keep,也就是说如果当前位置不是空气的话不放置方块\n如果想要替换的话改成replace即可，但是注意到这样会将雪层和半砖一类的都替换掉\n如果你的本意不是，你就需要指明你的意思了\n\n展示框的问题你把第一条 @e 改成 @e[type=item] 即可，限定只有掉落物才检测。"
        },
        {
            "author": "pineapple_",
            "timestamp": 1514867880,
            "txt_content": "你为什么要用keep\n何replace而不为呢\n\n\n坚持keep?瞎[和谐]乱嵌套execute大法好\n\n/scoreboard players tag @e add sc {Item:{id:\"minecraft:chest\",Count:1b,tag:{display:{Name:\"扔到地上生成箱子\"}}},OnGround:1b}\n\n/execute @e[tag=sc] ~ ~ ~ /execute @s[tag=!scc] ~ ~ ~ setblock ~ ~ ~ chest 0 keep {Items:[{Slot:0b,id:\"minecraft:diamond\",Count:1b}]}\n\n可以和你之前一样使用制约模式(可以改成不用制约模式的，但是既然你用了我就不改了)\n/execute @e[tag=sc] ~ ~ ~ kill @s[tag=!scc]\n\n/scoreboard players tag @e[tag=sc] add scc\n\n复制代码"
        },
        {
            "author": "pineapple_",
            "timestamp": 1514867940,
            "txt_content": "我可能没看明白你这个\n你到底是想不想在半转上生成"
        },
        {
            "author": "不动要塞",
            "timestamp": 1514868660,
            "txt_content": "pineapple_ 发表于 2018-1-2 12:39\n我可能没看明白你这个\n你到底是想不想在半转上生成\n想在半砖上生成，可以在检测物品落地的情况下，生成在如何东西上吗"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1514872260,
            "txt_content": "笑出声...把展示框给忽视了\n毕竟replace有破坏地形的可能。所以用keep也能理解\n\n那么如果想保留keep。可以这样\n保留你现在用的指令，同时\n\n建立一个名为cd的dummy类计分板。之后，\n一个紫cb，给所有@e[type=item,tag=sc]的实体+1分\n\n另一个紫cb连着条件绿cb\n紫:execute @e[type,tag,score_cd_min=5] ~ ~ ~ detect ~ ~1 ~ air 0 setblock ~ ~1 ~ chest 0 keep {...}\n条件绿:kill @e[type,tag...,score_cd_min=5}\n\n所以就是...\n当掉落物落在正常地表时，根据你之前的命令会被set成箱子。\n当落在比如半砖地毯等东西，且掉落物所在位置的头顶为空气时，也就是在半砖/地毯的y轴+1位置set箱子。\n\n其实你可以一贴问完的..."
        },
        {
            "author": "不动要塞",
            "timestamp": 1514875140,
            "txt_content": "⊙v⊙ 发表于 2018-1-2 13:51\n笑出声...把展示框给忽视了\n毕竟replace有破坏地形的可能。所以用keep也能理解\n这样做，无论扔在哪都是生成在空中，离地面一格啊\n\n\n1——\nexecute @e[type=item,tag=sc,score_cd_min=5] ~ ~ ~ detect ~ ~1 ~ air 0 setblock ~ ~1 ~ chest 0 keep {Items:[{Slot:0b,id:\"minecraft:diamond\",Count:1b}]}\n2——\nkill @e[type=item,tag=sc,score_cd_min=5]\n3——\nscoreboard players tag @e[type=item] add sc {Item:{id:\"minecraft:chest\",tag:{display:{Name:\"扔到地上生成箱子\"}}},OnGround:1b}\n4——\n/scoreboard players add @e[type=item,tag=sc] cd 1复制代码\n\n"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1514878560,
            "txt_content": "不动要塞 发表于 2018-1-1 20:39\n这样做，无论扔在哪都是生成在空中，离地面一格啊\n这么说，你后面列出的3个问题\n第一个是发生在第二个的基础上。\n而第二个，那个setblock指令后面可以改为replace，但是会有破坏地形的可能。可以保留keep。但是要添加我前面提到的那些,注意,是添加...\n然后第三个问题,如楼上所说，@e选择器补上type就是了。\n\n反正我试的时候没有问题，丢地上在当前y轴生成\n丢半砖/上在y+1生成。\n\n不过其实还会遇上其他问题的，毕竟问题根源就是setblock如果是多人模式，怕是到时候到处都是空箱子\n(在多人模式下玩原版命令就要想很多东西，还有很多限制...所以还不如一个插件来得轻松快捷)\n\n所以我的建议其实是检测到掉落物之后生成一个头戴箱子的隐形实体(也可以不戴...)\n要点是通过loottable掉落指定/随机物品...\n也就是用summon取代setblock...\n"
        }
    ]
}