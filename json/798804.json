{
    "title": "[sponge]插件开发实战-模拟一个登录插件",
    "author": "Fa_de",
    "replyCount": 4,
    "timestamp": 1528855020,
    "txt_content": " 本帖最后由 Fa_de 于 2018-6-13 11:28 编辑 \n距离上次发教程贴是很久远的事了。直接进入正题。今天带来的教程是实战，模拟登录插件。为什么叫模拟呢？因为没有连接数据库！！！在做用户登录之前，首先要想一想有几个步骤。就好比冰箱装大象。\n第一步是不是打开冰箱啊，接着把大象放进去，然后关闭冰箱。\n\n\n\n\n\n大象.png (11.72 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:03 上传\n\n\n\n\n\n\n说这些呢，是想让你具备一点基础的编程思维。把复杂的事物简单化，抽象化。\n那么用户登录怎么做呢？\n\n\n\n\n\n用户登录.png (33 KB, 下载次数: 1)\n\n下载附件\n\n2018-6-13 02:03 上传\n\n\n\n\n\n经过简单化，抽象化之后我们再来把它复杂化，具体化甚至多样化。\n那我们要通过什么来办法传递参数呢？\n有了解过的人应该知道可以通过命令来传递参数，不了解的人呢跟着做\n\n\n首先我们要创建一个基于maven管理的项目，不会的话自行去b战搜索maven\n既然我们知道指令可以传递参数那么思维导图是不是变成这样了。\n\n\n\n\n\n用户登录2.png (40.12 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:04 上传\n\n\n\n\n\n\n这里说下我的模式是三层架构+mvc\n\n\n\n\n包路径.png (11.1 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:04 上传\n\n\n\n\n\n你问我见这么多包是不是有什么好处，那是当然程序员是最“偷懒”的职业之一，\n好处就是高内聚低耦合听不懂？多百度谢谢！\n\n\n那我们从哪里开头？还是一样看思维导图\n\n一眼看过去是不是发现数据这个词很频繁的出现，对的我们先从数据入手。不是先写什么\n@Plugin(id=\"\",name=\"\",version=\"\")@Listenerpublic class LoginPlugin{\n\n}\n来看看这数据，你看又是输入又是提交又是接受那它是不是一个实体啊。\n就好像你一样会吃饭，会跑，会叫是一个实实在在的人，一个具体的实体。\n\n\n\n\nuser.png (50.87 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:06 上传\n\n\n\n\n\n为什么叫User啊？我们传递的数据是不是就是用户的数据啊！！！\nUser里面有什么呢？是不是用户名和密码啊，这个数据能让别人看见嘛？肯定是不能所以我们要private\n你不让看见但是我又要用怎么办？get()和set()啊，对不对。\n这里要注意一下因为sponge是依赖JAVA8，JAVA8里面有个Optional看了sponge的源码大多类都写入了Optional,因为我们的实体类中为了避免null异常要加个静态常量。\n\n\n\n\ngetset.png (128.15 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 09:03 上传\n\n\n\n\n\n好的用户实体写完了，来想想之后我们写什么？\n\n哎，这同学说对了看思维导图\n\n这些数据是不是要进行查询啊。唉，所以我们要来到dao层。面向接口编程。\n\n\n\n\ndao.png (40.48 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:08 上传\n\n\n\n\n\n\n这个接口里面写什么呢？是不是查询传递进来的数据对，还是不对啊？所以\n\n\n\n\n\ndao内容.png (26.68 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:08 上传\n\n\n\n\n\n插座(接口)写好了，我们是不是要去写插头(实现)了啊。\n\n\n\n\n\ndaoimpl.png (43.3 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:09 上传\n\n\n\n\n\n由于我们没有连接数据库所以用户名要自己先设置\n\n\n\n\n\n静态块.png (48.79 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:10 上传\n\n\n\n\n然后写判断语句\n\n\n\n\ndaoimpl判断.png (67.68 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 09:13 上传\n\n\n\n\n\n\n\n来看思维导图\n我们是不是已经完成了数据的建立和查询啦，现在应该干嘛？\n对，舒服了是不是接受数据啦。所以我们要跑去service层。当然还是面向接口\n\n\n\n\n\nservice.png (40.07 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:11 上传\n\n\n\n\n\n好了去写插头之前想一想，接受之后是不是要判断一下，但是我自己判断不了。我的任务只是\n接受数据那怎么办？是不是要请人帮忙？所以我们要调用Dao层。然后Dao层给我答案\n\n\n\n\n\nserviceipml完成.png (45.44 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:11 上传\n\n\n\n\n\n\n\n还是一样思维导图\n我们看看前面写的是不是查询和接受写完了，是不是轮到客户端了。好的我们开始写插件入口了。\n\n\n\n\n插件入口.png (52.47 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:30 上传\n\n\n\n\n命令生成器\n\n\n\n\n命令生成器.png (82.12 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 02:40 上传\n\n\n\n\n命令执行器中我们要去调用service层接受数据等待结果在返回给用户\n\n\n\n\n命令执行器.png (142.69 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 08:50 上传\n\n\n\n\n\n命令写完之后记得去插件入口处注册这个命令！！！！！\n\n插件我们已经制作完成了，来测试下吧\n\n登录失败\n\n\n\n\nlogin失败.png (3.61 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 09:40 上传\n\n\n\n\n\n\n\n\nlogin失败1.png (5.93 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 09:40 上传\n\n\n\n\n\n\n\n登陆成功\n\n\n\n\n\nlogin成功.png (3.25 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 09:40 上传\n\n\n\n\n\n\n\n\nlogin成功1.png (4.45 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-13 09:40 上传\n\n\n\n\n\n\n这里布置下课后作业吧，用户登录是不是还缺少一个注册啊？这个就留给各位同学了。不会做？思维导图，思维导图，思维导图\n多看看我的思维导图你就明白了。我的思维导图工具是XMind。上图的代码中有错误，这里的错误不是编译错误。而是运行错误。遇到错误不要急。虽然没有测试环境，但是我们可以System.out.println();或者logger再或者sendMessage 对不对。\n给点提示那就是新手很容易犯的错误，实在解决不了？那就下载源码对比吧。\n源码\n\n\n\nloginpluginJAVA.jar\n(13.68 KB, 下载次数: 43)\n\n\n\n2018-6-13 09:45 上传\n点击文件名下载附件\n源码\n\n\n\n\n\n这里没有看过我上期命令教程的同学呢\n[sponge]插件开发教程-创建一个简单的命令\n\n\n\n\n",
    "replies": [
        {
            "author": "SevenC",
            "timestamp": 1528884300,
            "txt_content": "折叠和分页很让人不舒服.....\n\n建议修改一下优化阅读\n\n在照葫芦画瓢的时候也会有很多阻碍。"
        },
        {
            "author": "Fa_de",
            "timestamp": 1528885500,
            "txt_content": "SevenC 发表于 2018-6-13 18:05\n折叠和分页很让人不舒服.....\n\n建议修改一下优化阅读\n谢谢你的建议，由于发表再编辑已无法预览。所以不做大修改了。\n\n下篇教程贴会改变风格。"
        },
        {
            "author": "hunsu",
            "timestamp": 1528938180,
            "txt_content": "谢谢楼主分享"
        },
        {
            "author": "dakuo",
            "timestamp": 1577541900,
            "txt_content": "支持楼主，"
        }
    ]
}