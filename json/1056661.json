{
    "title": "关于技能cd系统的结构问题",
    "author": "_XuanFsant_",
    "replyCount": 2,
    "timestamp": 1591382880,
    "txt_content": " 本帖最后由 _XuanFsant_ 于 2020-6-6 02:49 编辑 \n\n想写一个带有cd的多段跳，尝试使用hashmap，但是做出来会报错，大概知道是什么问题，就是不知道怎么改，附上源码和报错HashMap<UUID,Long> status = new HashMap<>();\n\n    @EventHandler\n    public void PlayerToggleFlight(PlayerToggleFlightEvent e) {\n        Player player = e.getPlayer();\n        if (player.getGameMode() != GameMode.CREATIVE) {\n            e.setCancelled(true);\n            player.setAllowFlight(false);\n            player.setFlying(false);\n            if (System.currentTimeMillis() - status.get(player.getUniqueId()) >= 0.5) {\n                player.setVelocity(player.getLocation().getDirection().multiply(2).setY(1.5));\n                status.put(player.getUniqueId(), System.currentTimeMillis());\n            }else if (System.currentTimeMillis() - status.get(player.getUniqueId()) < 0.5){\n                player.sendTitle(null,\"[多段跳]cd中\",0,1,0);\n            }\n        }\n    }\n\n    @EventHandler\n    public void onMove(PlayerMoveEvent e) {\n        Player player = e.getPlayer();\n        if (player.getGameMode() != GameMode.CREATIVE) {\n                player.setAllowFlight(true);\n        }\n    }复制代码发帖出问题。。恢复数据的时候报错挂了。。报错点是在PlayerToggleFlightEvent的判断那一块\n",
    "replies": [
        {
            "author": "天辉胡萝卜",
            "timestamp": 1591383420,
            "txt_content": "用status.get之前先判断status里面是否有该uuid，否则get会返回null值触发报错"
        },
        {
            "author": "惆丿怅",
            "timestamp": 1591409580,
            "txt_content": "            player.setAllowFlight(false);\n            player.setFlying(false);\n这两个方法很多余，去掉还是一样的."
        }
    ]
}