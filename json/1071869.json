{
    "title": "关于自定义事件的几个问题",
    "author": "GhostSkyV9",
    "replyCount": 17,
    "timestamp": 1593830280,
    "txt_content": "我定义了一个玩家跳跃事件，代码就这样写的话，有什么问题，还需要再写什么内容，才能让这个事件发挥作用\n\n\n\n\n\nQQ截图20200704103656.png\n(91.65 KB, 下载次数: 3)\n\n\n\n\n下载附件\n\n\n2020-7-4 10:37 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nQQ截图20200704103704.png\n(49.83 KB, 下载次数: 1)\n\n\n\n\n下载附件\n\n\n2020-7-4 10:37 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nQQ截图20200704103712.png\n(58.63 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2020-7-4 10:37 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "沐雪倾尘",
            "timestamp": 1593831120,
            "txt_content": "emmmm 看不懂"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1593840000,
            "txt_content": "callEvent用法没错 \n\n然后你event里面的Message没用上\n应该是player.sendMessage(event.getMessage);\n\n另 注意NullPointException"
        },
        {
            "author": "William_Shi",
            "timestamp": 1593842820,
            "txt_content": "你需要在玩家跳跃的时候手动call\n要不然bukkit怎么知道你是要监听跳跃呢？？？\n插件加载时怎么获取的player？NPE警告\n\n正确做法是，监听比如说玩家移动，然后计算y坐标（具体看mcwiki）\n如果是玩家跳的高度\n那就在这个事件监听里面call event"
        },
        {
            "author": "DogLong",
            "timestamp": 1593843180,
            "txt_content": "跳过Java的bukkit玩家，callEvent是唤醒事件，然后玩家也为null，也没有注册监听器"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1593853080,
            "txt_content": "William_Shi 发表于 2020-7-4 14:07\n你需要在玩家跳跃的时候手动call\n要不然bukkit怎么知道你是要监听跳跃呢？？？\n插件加载时怎么获取的player ...\n能详细说一下，具体怎么做嘛"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1593853200,
            "txt_content": "南柯郡守 发表于 2020-7-4 13:20\ncallEvent用法没错 \n\n然后你event里面的Message没用上\n我主类这边的public Player player;需要写什么"
        },
        {
            "author": "William_Shi",
            "timestamp": 1593854640,
            "txt_content": "sky295 发表于 2020-7-4 16:58\n能详细说一下，具体怎么做嘛\n先监听move，比如说\n然后如果你判断是跳跃（这个就要靠你自己了\n就callEvent\n参数的事件就new一个你的跳跃事件\n构造器的player就填事件中的player，等等\n这样才可以每一次有玩家跳跃都触发\n\n你现在的做法是插件加载的时候，call一次\n但是目标应该是每次有玩家跳就call一次\ncall是一次性的东西，会把一个event对象传给所有的handler"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1593856440,
            "txt_content": " 本帖最后由 sky295 于 2020-7-4 18:03 编辑 \nWilliam_Shi 发表于 2020-7-4 17:24\n先监听move，比如说\n然后如果你判断是跳跃（这个就要靠你自己了\n就callEvent\n获取y坐标的方法是用什么，player.getLocation().getY() 是这个嘛"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1593857460,
            "txt_content": "sky295 发表于 2020-7-4 17:54\n获取y坐标的方法是用什么，player.getLocation().getY() 是这个嘛\n差不多\n\n所以你要是要做一个跳跃事件 你首先要监听玩家移动事件\n然后判断玩家Y值是不是变化到跳跃的部分\n如果是 就callEvent 你这个跳跃事件\n"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1593858000,
            "txt_content": " 本帖最后由 sky295 于 2020-7-4 18:22 编辑 \n南柯郡守 发表于 2020-7-4 18:11\n差不多\n\n所以你要是要做一个跳跃事件 你首先要监听玩家移动事件package com.github.sky295;\n\nimport com.github.sky295.Listener.MyEvents;\nimport com.github.sky295.events.PlayerJumpEvent;\nimport org.bukkit.Bukkit;\nimport org.bukkit.entity.Player;\nimport org.bukkit.plugin.java.JavaPlugin;\nimport org.bukkit.scheduler.BukkitScheduler;\n\npublic class CustomEvent extends JavaPlugin {\n    public static Player player;\n    @Override\n    public void onEnable() {\n        getLogger().info(\"§6插件已加载\");\n        BukkitScheduler scheduler=Bukkit.getScheduler();\n        scheduler.scheduleSyncDelayedTask(this, new Runnable() {\n            @Override\n            public void run() {\n                if (player.getLocation().getY()>=1.0D){\n                    Bukkit.getPluginManager().callEvent(new PlayerJumpEvent(player));\n                }\n            }\n        },20L);\n        Bukkit.getPluginManager().registerEvents(new MyEvents(),this);\n    }\n\n    @Override\n    public void onDisable() {\n        getLogger().info(\"§6插件已卸载\");\n    }\n\n}\n复制代码\n我在主类用同步（问了别人说用同步）\n\n然后我是要在实现Listner接口的那个类再写一个监听玩家移动事件是么"
        },
        {
            "author": "William_Shi",
            "timestamp": 1593858240,
            "txt_content": "sky295 发表于 2020-7-4 18:20\n我在主类用同步（问了别人说用同步）\n\n然后我是要在实现Listner接口的那个类再写一个监听玩家移动事件是 ...\n在监听玩家移动事件的地方\n写上y坐标的判断\n然后\n\n                    Bukkit.getPluginManager().callEvent(new PlayerJumpEvent(player));\n\n就是说你在事件监听里面call你自己的事件监听\n还有关于跳跃的坐标，没那么简单，不是1.0就好的了"
        },
        {
            "author": "GhostSkyV9",
            "timestamp": 1593858600,
            "txt_content": "William_Shi 发表于 2020-7-4 18:24\n在监听玩家移动事件的地方\n写上y坐标的判断\n然后\n    @EventHandler\n    public void onPlayerMoveEvent(PlayerMoveEvent event){\n        Player player=event.getPlayer();\n        BukkitScheduler scheduler= Bukkit.getScheduler();\n        scheduler.scheduleSyncDelayedTask(new CustomEvent(), new Runnable() {\n            @Override\n            public void run() {\n                if (player.getLocation().getY()>=1.0D){\n                    Bukkit.getPluginManager().callEvent(new PlayerJumpEvent(player));\n                }\n            }\n        },20L);\n    }\n你看是这样嘛"
        },
        {
            "author": "William_Shi",
            "timestamp": 1593858720,
            "txt_content": "sky295 发表于 2020-7-4 18:30\n@EventHandler\n    public void onPlayerMoveEvent(PlayerMoveEvent event){\n        Player player= ...\n这个事件监听的文档读了吗？\n有getFrom、getTo这两个位置的\n\nplayer.getLocation().getY()>=1.0D\n\n你的意思是，玩家Y坐标大于1\n玩家只要在坐标大于1 的地方随便动一下都算跳跃？？？\n\n这玩意怎么说也得有个相对坐标的\n具体去翻mcwiki，我不记得了"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1593859260,
            "txt_content": "sky295 发表于 2020-7-4 18:30\n@EventHandler\n    public void onPlayerMoveEvent(PlayerMoveEvent event){\n        Player player= ...\n不需要做一个线程！\n\n\n\n你要做的是直接监听PlayerMoveEvent\n然后比较From的坐标和To的坐标之间Y轴高度的变化\n如果变化超过0.4还是0.3就是玩家跳跃了\n然后这个时候callEvent"
        },
        {
            "author": "Dutst",
            "timestamp": 1593967800,
            "txt_content": "不清楚呀  我丢  太难了"
        },
        {
            "author": "Dutst",
            "timestamp": 1593967980,
            "txt_content": "6666666666666666666666"
        },
        {
            "author": "qlsjlwb",
            "timestamp": 1594015500,
            "txt_content": "看不懂\nｅｅｅｅｅｅｅ"
        }
    ]
}