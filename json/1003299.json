{
    "title": "服务器后台刷屏，tps极低",
    "author": "lengshao233",
    "replyCount": 14,
    "timestamp": 1585634760,
    "txt_content": " 本帖最后由 lengshao233 于 2020-3-31 14:13 编辑 \n\n服务器后台刷屏，tps极低，玩家们挨个问过来，也没干什么，早上还好好的，怀疑被压测了，有大佬告诉我解决办法吗\n\n\n\n\nimage.png (13.13 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-31 14:06 上传\n\n\n\n\n\n\n\n\nimage.png (33.5 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-31 14:06 上传\n\n\n\n\n就一直刷这种，还不带停的\n\n\n\n\n\n\n\nlog.zip\n\n\n2020-3-31 14:13 上传\n点击文件名下载附件\n\n\n\n\n111.93 KB, 下载次数: 3\n\n\n\n\n\n",
    "replies": [
        {
            "author": "xmdhs",
            "timestamp": 1585634760,
            "txt_content": "lengshao233 发表于 2020-3-31 14:14\n已经补齐，求大佬帮忙看看\n更新 Residence v2.8.3.6 即可\n\n1.12.2 的服务器用 2.8 是在想什么"
        },
        {
            "author": "xmdhs",
            "timestamp": 1585634880,
            "txt_content": "上传完整的 log"
        },
        {
            "author": "huangziming",
            "timestamp": 1585634880,
            "txt_content": "到经济插件配置文件里面把\nvault-unsafe-lookups = true"
        },
        {
            "author": "lengshao233",
            "timestamp": 1585635060,
            "txt_content": "\n\n\n\n\nimage.png (36.62 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-31 14:10 上传\n\n\n\n\n经济插件里没有\n"
        },
        {
            "author": "huangziming",
            "timestamp": 1585635060,
            "txt_content": "lengshao233 发表于 2020-3-31 14:11\n经济插件里没有\nvault只是个前置，找他相关的经济插件"
        },
        {
            "author": "lengshao233",
            "timestamp": 1585635240,
            "txt_content": "xmdhs 发表于 2020-3-31 14:08\n上传完整的 log\n已经补齐，求大佬帮忙看看"
        },
        {
            "author": "lengshao233",
            "timestamp": 1585635420,
            "txt_content": "xmdhs 发表于 2020-3-31 14:15\n更新 Residence v2.8.3.6 即可\n\n1.12.2 的服务器用 2.8 是在想什么\n更新res吗，tps低和这个有关吗"
        },
        {
            "author": "结城希亚",
            "timestamp": 1585635480,
            "txt_content": "更新你的res插件\n[安全|整地]Residence——领地，安全地保护玩家的领地[永更][1.7.10-1.15]\nhttps://www.mcbbs.net/thread-631343-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n\n\n\nResidence4.8.8.2.jar\n(1.05 MB, 下载次数: 0)\n\n\n\n2020-3-31 14:19 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "xmdhs",
            "timestamp": 1585635480,
            "txt_content": "lengshao233 发表于 2020-3-31 14:17\n更新res吗，tps低和这个有关吗\nres 主线程查询玩家信息被 luckperms 拦截了"
        },
        {
            "author": "Fur_Xia",
            "timestamp": 1585635600,
            "txt_content": "看log文件看起来主要刷屏的报错不是你写的这个啊，这个看起来是Residence引起的吧？应该是Residence不够新的原因。建议升级Residence\n\n[12:51:53] [Server thread/ERROR] [Minecraft]: Could not pass event BlockPlaceEvent to Residence v2.8.3.6-git-685f97b512024f4997979714fae64a9efcb0be78\norg.bukkit.event.EventException: null\n        at org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:69) ~[EventExecutor$2.class:git-CatServer-1.12.2-3440193]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[RegisteredListener.class:git-CatServer-1.12.2-3440193]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:503) [SimplePluginManager.class:git-CatServer-1.12.2-3440193]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:488) [SimplePluginManager.class:git-CatServer-1.12.2-3440193]\n        at org.bukkit.craftbukkit.v1_12_R1.event.CraftEventFactory.callBlockPlaceEvent(CraftEventFactory.java:189) [CraftEventFactory.class:git-CatServer-1.12.2-3440193]\n        at net.minecraftforge.event.world.BlockEvent$PlaceEvent.<init>(BlockEvent.java:226) [BlockEvent$PlaceEvent.class:git-CatServer-1.12.2-3440193]\n        at net.minecraftforge.event.ForgeEventFactory.onPlayerBlockPlace(ForgeEventFactory.java:153) [ForgeEventFactory.class:git-CatServer-1.12.2-3440193]\n        at net.minecraftforge.common.ForgeHooks.onPlaceItemIntoWorld(ForgeHooks.java:954) [ForgeHooks.class:git-CatServer-1.12.2-3440193]\n        at com.buuz135.industrial.tile.mob.WitherBuilderTile.work(WitherBuilderTile.java:165) [WitherBuilderTile.class:?]\n        at com.buuz135.industrial.tile.WorkingAreaElectricMachine.performWork(WorkingAreaElectricMachine.java:112) [WorkingAreaElectricMachine.class:?]\n        at net.ndrei.teslacorelib.tileentities.ElectricMachine.protectedUpdate(ElectricMachine.kt:280) [ElectricMachine.class:?]\n        at com.buuz135.industrial.tile.CustomElectricMachine.protectedUpdate(CustomElectricMachine.java:120) [CustomElectricMachine.class:?]\n        at net.ndrei.teslacorelib.tileentities.ElectricTileEntity.innerUpdate(ElectricTileEntity.kt:118) [ElectricTileEntity.class:?]\n        at net.ndrei.teslacorelib.tileentities.SidedTileEntity.func_73660_a(SidedTileEntity.kt:991) [SidedTileEntity.class:?]\n        at net.minecraft.world.World.func_72939_s(World.java:2133) [amu.class:?]\n        at net.minecraft.world.WorldServer.func_72939_s(WorldServer.java:756) [oo.class:?]\n        at net.minecraft.server.MinecraftServer.func_71190_q(MinecraftServer.java:912) [MinecraftServer.class:?]\n        at net.minecraft.server.dedicated.DedicatedServer.func_71190_q(DedicatedServer.java:472) [nz.class:?]\n        at net.minecraft.server.MinecraftServer.func_71217_p(MinecraftServer.java:782) [MinecraftServer.class:?]\n        at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:636) [MinecraftServer.class:?]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_211]\nCaused by: java.lang.RuntimeException: The operation to lookup a UUID for '[if]' was cancelled by LuckPerms. This is NOT a bug. \nThe lookup request was made on the main server thread. It is not safe to execute a request to \nload username data from the database in this context. \nIf you are a plugin author, please either make your request asynchronously, \nor provide an 'OfflinePlayer' object with the UUID already populated. \nAlternatively, server admins can disable this catch by setting 'vault-unsafe-lookups' to true \nin the LP config, but should consider the consequences (lag) before doing so.\n        at me.lucko.luckperms.bukkit.vault.LuckPermsVaultPermission.lookupUuid(LuckPermsVaultPermission.java:107) ~[?:?]\n        at me.lucko.luckperms.bukkit.vault.AbstractVaultPermission.getPrimaryGroup(AbstractVaultPermission.java:372) ~[?:?]\n        at pw.yumc.Residence.vaultinterface.ResidenceVaultAdapter.getPlayerGroup(ResidenceVaultAdapter.java:95) ~[?:?]\n        at com.bekvon.bukkit.residence.permissions.PermissionManager.getPermissionsGroup(PermissionManager.java:102) ~[?:?]\n        at com.bekvon.bukkit.residence.permissions.PermissionManager.getGroupNameByPlayer(PermissionManager.java:87) ~[?:?]\n        at com.bekvon.bukkit.residence.permissions.PermissionManager.getGroupNameByPlayer(PermissionManager.java:73) ~[?:?]\n        at pw.yumc.Residence.listeners.ResidenceBlockListener.onBlockPlace(ResidenceBlockListener.java:179) ~[?:?]\n        at catserver.server.executor.asm.generated.GeneratedEventExecutor208.execute(Unknown Source) ~[?:?]\n        at org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:67) ~[EventExecutor$2.class:git-CatServer-1.12.2-3440193]\n        ... 20 more\n\n"
        },
        {
            "author": "lengshao233",
            "timestamp": 1585635600,
            "txt_content": "xmdhs 发表于 2020-3-31 14:18\nres 主线程查询玩家信息被 luckperms 拦截了\n能推荐一个搬运帖吗，bbs上好多个，不知道哪个好"
        },
        {
            "author": "xmdhs",
            "timestamp": 1585635660,
            "txt_content": "lengshao233 发表于 2020-3-31 14:20\n能推荐一个搬运帖吗，bbs上好多个，不知道哪个好\nhttps://www.mcbbs.net/thread-631343-1-1.html"
        },
        {
            "author": "Fur_Xia",
            "timestamp": 1585635720,
            "txt_content": "lengshao233 发表于 2020-3-31 14:20\n能推荐一个搬运帖吗，bbs上好多个，不知道哪个好\n你去原站下啊，关注一下原站：https://www.spigotmc.org/resourc ... 0-up-to-1-15.11480/\n这里就能下到最新的"
        },
        {
            "author": "lengshao233",
            "timestamp": 1585644600,
            "txt_content": "xmdhs 发表于 2020-3-31 14:21\nhttps://www.mcbbs.net/thread-631343-1-1.html\n大佬，根据log能帮我看看tps吗"
        }
    ]
}