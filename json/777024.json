{
    "title": "config变量问题",
    "author": "我是小童鞋",
    "replyCount": 4,
    "timestamp": 1516955100,
    "txt_content": " 本帖最后由 我是小童鞋 于 2018-1-26 18:34 编辑 \n\n有两个类：theConfig和Listen\n\nconfig.yml:\n\nPlugin:\n  enable: true\n  message: '%player% 在潜行'\n\ntheConfig是保存载入config.yml\n那么Listen类监听到玩家潜行怎么获得config中的message并发出消息：玩家名字 在潜行\n\n找的教程没有找到类访问另类的config.yml，各位大佬求助啦\n\n\nconfig.yml\n\nPlugin:\n  enable: true\n  message: '%player% 在潜行'\n\n\n部分代码\n\n\npublic class mcore extends JavaPlugin {\n        \n        FileConfiguration config = getConfig();\n        \n        public static Boolean tf;\n        public static String pm;\n        \n        public void onEnable() {\n                \n                config.options().copyDefaults(true);\n                saveConfig();\n                \n                tf = getConfig().getBoolean(\"Plugin.enable\");\n                pm = getConfig().getString(\"Plugin.message\").replace(\"%player%\", Listen.iplay);\n                System.out.println(tf);\n                System.out.println(iplay);\n                \n                reloadConfig();\n                saveConfig();\n                \n        }\n\n}\n\n\npublic class Listen implements Listener {\n        \n        public static String iplay;\n        \n        @EventHandler\n        public void onPlayerJoin(PlayerJoinEvent i) {\n                \n                //这是测试，之前改成了玩家一样错误\n                iplay = \"测试\";\n                i.setJoinMessage(mcore.pm);\n                \n                \n        }\n\n}\n复制代码\n\n\n报错：\n\n[18:19:38 ERROR]: Error occurred while enabling ManagerHub v0.0.1 (Is it up to d\nate?)\njava.lang.NullPointerException\n        at java.lang.String.replace(String.java:2240) ~[?:1.8.0_151]\n        at com.github.AshStranger.runPlugin.onEnable(runPlugin.java:22) ~[?:?]\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:271) ~[p\naper1112.jar:git-Paper-1040]\n        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader\n.java:316) [paper1112.jar:git-Paper-1040]\n        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManage\nr.java:407) [paper1112.jar:git-Paper-1040]\n        at org.bukkit.craftbukkit.v1_11_R1.CraftServer.enablePlugin(CraftServer.\njava:378) [paper1112.jar:git-Paper-1040]\n        at org.bukkit.craftbukkit.v1_11_R1.CraftServer.enablePlugins(CraftServer\n.java:328) [paper1112.jar:git-Paper-1040]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.t(MinecraftServer.java:\n433) [paper1112.jar:git-Paper-1040]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.l(MinecraftServer.java:\n394) [paper1112.jar:git-Paper-1040]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.a(MinecraftServer.java:\n332) [paper1112.jar:git-Paper-1040]\n        at net.minecraft.server.v1_11_R1.DedicatedServer.init(DedicatedServer.ja\nva:276) [paper1112.jar:git-Paper-1040]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.run(MinecraftServer.jav\na:599) [paper1112.jar:git-Paper-1040]\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_151]\n\n\n",
    "replies": [
        {
            "author": "咕",
            "timestamp": 1516957980,
            "txt_content": "插件主类实例.saveDefaultConfig();\nplayer.sendMessage(插件主类实例.getConfig().getString(\"Plugin.message\").replace(\"%player%\", player.getName()));"
        },
        {
            "author": "我是小童鞋",
            "timestamp": 1516962360,
            "txt_content": " 本帖最后由 我是小童鞋 于 2018-1-26 18:31 编辑 \nItaliangun 发表于 2018-1-26 17:13\n插件主类实例.saveDefaultConfig();\nplayer.sendMessage(插件主类实例.getConfig().getString(\"Plugin.mess ...\n\n报错，上面帖子改了"
        },
        {
            "author": "1850343382",
            "timestamp": 1516963020,
            "txt_content": "我是小童鞋 发表于 2018-1-26 18:26\nconfig.yml\n从代码中看，你的onEnable方法中为什么要对Plugin.message的内容进行替换？\n这里在主类中定义了两个静态空开变量应该是方便你的监听器来获得这个变量。\n那么下面在监听到玩家潜行之后，Player player = e.getPlayer();\nplayer.sendMessage(mcore.replace(\"%play%\",player.getName());复制代码"
        },
        {
            "author": "我是小童鞋",
            "timestamp": 1516963980,
            "txt_content": " 本帖最后由 我是小童鞋 于 2018-1-26 19:10 编辑 \n1850343382 发表于 2018-1-26 18:37\n从代码中看，你的onEnable方法中为什么要对Plugin.message的内容进行替换？\n这里在主类中定义了两个静态空 ...\n噢！一定是我脑子短路了\n\n但是改了后，后台有输出，进服的消息没变化脑子又短路，忘了注册\n\n\n"
        }
    ]
}