{
    "title": "[信息|管理]Speaker —— 一个更灵活、多功能的Sponge自动公告插件[1.12.2]",
    "author": "Eric12324",
    "replyCount": 29,
    "timestamp": 1581004200,
    "txt_content": " 本帖最后由 Eric12324 于 2020-2-25 23:23 编辑 \n\nSPEAKER效果图\n\n\n\n\n$(90VJN1PE%G`ATB5SC]7.png (67.28 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-6 20:18 上传\n\n\n\n\n\n\n\n\n\n\nIW]IA3U39CJC)9ZG07I2G%B.png (50.32 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-8 18:22 上传\n\n\n\n\n\n\n\n\n\n\nHDMB)GTV1UT`){99MRP){88.png (170.06 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-6 20:22 上传\n\n\n\n\n\n\n\n\n\n\nfile_1581142400000.jpg (332.31 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-8 14:13 上传\n\n\n\n\n\n 插件介绍及特色\n     Speaker是一款Sponge服务器端的自动公告插件，最近开了一个Sponge的服务器，希望找一款自动公告插件来播放一些公告，但是Sponge端的插件本来就相对较少，找来找去都没有特别满意的公告插件。就尝试自己写了一款公共插件\n     插件原创双模式多种显示方式的公告发送方式，全新设计了一套内部逻辑，可以实现不同公告，不同发送模式，不同显示模式的并发。总共近2400行代码，主要限于内部逻辑稍微有些繁琐，并且希望配置完全在游戏内更改、即时生效。目前该插件经我多次测试可以在服务端稳定运行，如果你使用了该插件并发现有问题，请在帖子回复。\n支持两种模式的公告，间隔时间段模式和固定时间点模式支持三种公告显示方式，普通模式，Title模式，Boss血条模式支持进服公告（针对进服玩家单独发送）每个公告任务可以单独设置间隔时间，固定时间点，互不影响所有公告设置支持游戏内修改，即时生效，随时启动/关闭，修改内容，修改间隔时间，无需重载或重启支持点击公告执行指令，点击公告打开网页，支持悬浮显示信息（限普通模式）自带多个换位符，同时支持PlaceHolderAPI支持颜色代码支持所有指令Tab补全，包括创建的公共名称\n\n关于显示模式的解释\n什么是普通模式？公告直接显示在聊天栏为普通模式，该模式下支持点击执行指令和悬浮显示信息\n什么是Title显示模式？\n如效果图的最后一张图片显示\n什么是boss显示模式？\n以boss血条的模式来显示公告，血条清零则公告结束\n\n\n\n\nfile_1581143482000.jpg (126 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-8 14:31 上传\n\n\n\n\n插件指令和权限\n\n\n指令权限描述/spk add <公告名称> <公告内容>speaker.command.add添加一条公告/spk remove <公告名称>speaker.command.remove移除一条公告/spk listspeaker.command.list显示所有已创建的公告/spk show <公告名称>speaker.command.show查看一条已经创建的广播/spk helpspeaker.command.base显示帮助信息/spkspeaker.command.base显示版本信息/spk set content <公告名称> <新的公告内容>speaker.command.set.content修改一条公告的内容/spk set interval <公告名称> <间隔时间（秒）>speaker.command.set.interval修改一条公告的间隔时间/spk set fix <公告名称> <时间点，例：12:30>speaker.command.set.fix修改一条公告的固定时间点/spk set mode <公告名称> <fix|interval>speaker.command.set.mode修改一条公告的模式（间隔|固定）/spk set enable <公告名称> <true|false>speaker.command.set.enable开启或者关闭一条公告/spk set hover <公告名称> <鼠标悬浮显示内容>speaker.command.set.hover修改一条公告的鼠标悬浮显示内容\n/spk set cmd <公告名称> <点击执行指令>speaker.command.set.cmd修改一条公告的鼠标点击执行的指令\n/spk set url <公告名称> <点击打开url>speaker.command.set.url修改一条公告的鼠标点击打开的网址\n/spk set join <公告名称> <true|false>speaker.command.set.join修改一条公告的进服显示状态\n/spk set title <公告名称> <持续时间：秒>\n<淡入时间：秒：非必须参数> <淡出时间：秒：\n非必须参数>speaker.command.set.title修改一条公告的title显示设定\n/spk set boss <公告名称> <持续时间：秒> \n<颜色：请使用tab补全>speaker.command.set.boss修改一条公告的boss显示设定\n/spk set display <公告名称> <显示模式>speaker.command.set.display修改一条公告的显示模式\n\n插件指令说明以及注意事项必读内容\n\n间隔时间模式：间隔指定的秒数执行一次，例如45秒循环一次，若要使用间隔模式，必须将模式切换成 interval（新添加公告默认 interval）固定时间点模式：在指定时间执行，例如：12:30，公告将在每天的12:30:00执行，不支持指定秒数。可以设置多个时间点，例如：12:30/12:50/18:30，使用符号 / 区分，请注意冒号是英文冒号，格式若错误将无法修改成功公告使用placeholderAPI并添加颜色代码时，颜色代码和换位符之间应有一空格，例： &c %player%。否则颜色可能不能正确解析请务必使用placeholderAPI发布在Sponge Ore的最新版本4.4，placeholderAPI作者发布在GitHub的4.5.1版本有bug（跟Speaker无关），或者使用论坛内转载的修复版也可，修复版地址鼠标点击公告执行指令或者打开网页只能选一个，另一个应设置为 None使用boss血条模式的公告时，间隔不宜太短，会导致多个血条使用Title模式时，hover信息会变成副标题（就是第二行的内容）Title模式和boss模式不支持点击指令和悬浮显示如果你不知道应该输入什么值，不妨试试Tap键补全不建议直接手动修改配置文件，所有项目均可在游戏内修改即时生效，如果配置文件出错，请删除/config/speaker文件夹\n\n\n无需PlaceHolderAPI即可使用的换位符\n{Player} 返回玩家ID{World} 返回玩家所在世界{GameMode} 返回玩家游戏模式（返回结果为英文）{Health} 返回玩家当前生命值{Food} 返回玩家当前饱食度{Balance} 返回玩家当前余额（默认货币，需要经济插件作为前置）\n\n\n配置文件\n\n\nAll {\n# 公告名称\n欢迎 {\n# 点击公告执行的指令，可以不加“/”\nCmd=\"/say 使用/spk set cmd 公告名称 指令 来设置点击公告时触发的指令\"\n# 公告内容\nContent=\"&b[公告] &e玩家 &d{Player} &e当前所在的世界是 &d{World} &e， 他的余额是 &d{Balance}\"\n# 服务端启动后，等待多久启动该公告（避免相同间隔时间的公告挤在一起，该项只能手动设置）\nDelayOnStart=0.5\n# 公告显示模式\nDisplay=normal\n# 是否开启公告\nEnable=true\n# 固定时间点模式下，公告会在下列时间点输出\nFixTime=[\n\"09:00\",\n\"12:00\"\n]\n# 鼠标悬浮显示的信息\nHover=\"&a使用 &e/spk set hover 公告名称 内容 &a来设置鼠标悬浮公告时显示的信息\"\n# 间隔时间段模式下，公告间隔时间，单位：秒\nInterval=45\n# 是否在玩家加入游戏时显示（仅对他个人，不是全服广播）\nJoin=true\n# 公告播放模式 interval --> 间隔时间模式  fix --> 固定时间模式\nModeCode=interval\nSetting {\nBoss {\n# boss显示模式时，血条持续的时间\n持续时间=10\n# boss显示模式血条颜色，可选PURPLE/RED/WHITE/BULE/YELLOW/GREEN/PINK，默认为紫色\n颜色=\"PURPLE\"\n}\nTitle {\n# title显示模式时，持续的时间\n持续时间=2\n# title显示模式时，淡入动画的时间\n淡入时间=1\n# title显示模式时，淡出动画的时间\n淡出时间=1\n}\n}\n# 点击公告时打开的链接，例：https://www.baidu.com(仅输入域名无效，错误示例： baidu.com 或者 www.baidu.com) \n# 如果要启用点击公共打开链接，请将Cmd设置为None\nUrl=None\n}\n}\n\n复制代码\n下载与安装提供蓝奏云下载：链接放入plugins文件夹下即可\n帖子内下载\n\n\n\nSpeaker-1.2-SNAPSHOT.jar\n(75.23 KB, 下载次数: 161)\n\n\n\n2020-2-25 23:23 上传\n点击文件名下载附件\n1.2版本\n\n\n\n\n\n前置插件（均非必须）EconomyLite:论坛转载地址PlaceHolder：论坛转载地址视频教程如果你看了以上的说明还是不知道怎么用的话...https://www.bilibili.com/video/av87164038/\n\n声明本插件所用所有代码均为原创,不存在借用/抄袭等行为\n本插件部分的功能思路参考了Pixel Auto Message以及Brotkasten，但是代码实现和内部逻辑完全原创\n本插件为非盈利插件，免费发布禁止商用插件内不包含任何后门、宣传、广告、自动更新本插件不对任何可能造成的后果负责\n本插件开源，遵循GPL协议：Github\n没有金粒和评分就没动力修bug!!!已知bug在linux环境下的服务端可能出现崩溃——已修复\n附测试成功所用平台版本：\nwindows 10Forge：forge-1.12.2-14.23.5.2847-universalSponge：spongeforge-1.12.2-2838-7.1.10-RC3992EconomyLite-7.1.0-2.15.1LuckPerms-Sponge-5.0.39Nucleus-1.14.2-S7.1-MC1.12.2-pluginPlaceholderAPI-4.5.1【修复版】Speaker-1.1(Beta)-SNAPSHOT \nUbuntu 18.04forge：forge-1.12.2-14.23.5.2847-universalSponge：spongeforge-1.12.2-2838-7.1.8【稳定版】PlaceholderAPI-4.4 /4.5.1修复版均可TotalEconomy-1.8.1Nucleus-1.12.2-S7.1-MC1.12.2-pluginSpeaker-1.1(Beta)-SNAPSHOT以及其他十几个插件。。。。\n\n最后因为插件功能和内部逻辑较为繁杂，本人没有精力测试每一个细节，如果你发现bug，请在帖子下方回复可以的话请收藏本贴，以便收取更新通知更新日志\n2020/2/7：发布1.0版本2020/2/9：发布1.1版本，添加title公告模式，添加boss血条公告模式，添加进服公告2020/2/9:  修复了show指令没有显示是否开启进服公告的问题2020/2/25:  修改版本号为1.2，添加了公告启动延迟，避免重启后相同间隔时间的多个公告挤在一起，注意：对于之前创建的公告，需要手动为每一个公告添加DelayOnStart参数，该参数决定服务器启动后，等待多少秒后开始该公告，仅对间隔模式生效。\n计划功能\nPaginationList形式的公告（类似效果图 1和2）\n\n\n\n\n\n",
    "replies": [
        {
            "author": "_DIM_",
            "timestamp": 1581006060,
            "txt_content": "https://www.mcbbs.net/thread-653926-1-1.html\nhttps://www.mcbbs.net/thread-849305-1-1.html\n\n要不整合一下？然后就太香了"
        },
        {
            "author": "Eric12324",
            "timestamp": 1581006960,
            "txt_content": "酷车手BB弹 发表于 2020-2-7 00:21\nhttps://www.mcbbs.net/thread-653926-1-1.html\nhttps://www.mcbbs.net/thread-849305-1-1.html\nwindows上跑的好好的，放到mac上跑崩溃了，明天继续修bug。。。太难了"
        },
        {
            "author": "3181869467",
            "timestamp": 1581007260,
            "txt_content": "不错不错功能齐全 带走咯"
        },
        {
            "author": "_DIM_",
            "timestamp": 1581047700,
            "txt_content": "Eric12324 发表于 2020-2-7 00:36\nwindows上跑的好好的，放到mac上跑崩溃了，明天继续修bug。。。太难了\n没人会用mac开服吧XD\n\nlinux和windows可以就行了"
        },
        {
            "author": "Eric12324",
            "timestamp": 1581047940,
            "txt_content": "酷车手BB弹 发表于 2020-2-7 11:55\n没人会用mac开服吧XD\n\nlinux和windows可以就行了\n刚刚在ubuntu上测试了下，是因为Placeholder的原因。。用修复版就没问题了。。"
        },
        {
            "author": "_DIM_",
            "timestamp": 1581048180,
            "txt_content": "Eric12324 发表于 2020-2-7 11:59\n刚刚在ubuntu上测试了下，是因为Placeholder的原因。。用修复版就没问题了。。 ...\n恩，Placeholder用原版的都是会出问题的。\n\n对了，那个血条公告的插件有个特色就是，按照设定的显示时间来平均扣血，就相当于一个进度条，这个能模仿吗。"
        },
        {
            "author": "Eric12324",
            "timestamp": 1581048660,
            "txt_content": "酷车手BB弹 发表于 2020-2-7 12:03\n恩，Placeholder用原版的都是会出问题的。\n\n对了，那个血条公告的插件有个特色就是，按照设定的显示时间 ...\n没有用过欸，我看一下"
        },
        {
            "author": "Eric12324",
            "timestamp": 1581093960,
            "txt_content": "酷车手BB弹 发表于 2020-2-7 12:03\n恩，Placeholder用原版的都是会出问题的。\n\n对了，那个血条公告的插件有个特色就是，按照设定的显示时间 ...\n\n\n\n\nfile_1581093638000.jpg (219.38 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-8 00:40 上传\n\n\n\n\n\n\n琢磨了一天用几十行代码大致实现了一下，然后还添加了一个title公告模式（中间这个），我没有用过那个血条插件公告，就根据转载帖的截图来做的，感觉还行？不过很多小功能（跳过、mute什么的）就不会实现了，不然等于把那个插件完全重写一遍。。考虑再加个进服公告模式，还有很多细节没做完，做好再更新\n"
        },
        {
            "author": "Eric12324",
            "timestamp": 1581147420,
            "txt_content": " 本帖最后由 Eric12324 于 2020-2-8 15:44 编辑 \nEric12324 发表于 2020-2-8 00:46\n琢磨了一天用几十行代码大致实现了一下，然后还添加了一个title公告模式（中间这个），我没有用过那个 ...\n @酷车手BB弹 \n\n更新了，可以设置颜色和持续时间，api提供七种颜色可选，公告内容依然支持placeholderAPI，间隔时间的设置跟之前一样\n使用血条公告只要把display改成boss就可以，可以自由在三种显示模式切换\n目前我直接测试了一下还是相对满意的，就不知道符不符合你的要求了。。\n暂时没发现什么bug，不过还是打个Beta标签"
        },
        {
            "author": "3448737105",
            "timestamp": 1581943200,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "qq107289387",
            "timestamp": 1581997680,
            "txt_content": "作者可以添加个换行操作吗？有时候为了美观要自己打空格有点麻烦"
        },
        {
            "author": "Javi_Li",
            "timestamp": 1582160520,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "Javi_Li",
            "timestamp": 1582249440,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "HHD统治",
            "timestamp": 1584155460,
            "txt_content": "论坛上的两款公告插件的整合加强版~ 感谢作者大大的原创插件~ 就很nice就很棒~"
        },
        {
            "author": "HHD统治",
            "timestamp": 1584188400,
            "txt_content": "请问这个公告间隔应该如何设置呢 \nA公告\n# 服务端启动后，等待多久启动该公告（避免相同间隔时间的公告挤在一起，该项只能手动设置）\nDelayOnStart=110\n# 间隔时间段模式下，公告间隔时间，单位：秒\nInterval=60\n\nB公告\n# 服务端启动后，等待多久启动该公告（避免相同间隔时间的公告挤在一起，该项只能手动设置）\nDelayOnStart=260\n# 间隔时间段模式下，公告间隔时间，单位：秒\nInterval=60\n结果是同一时间刷出来。。不知道该如何设置= =\n如图\n\n\n\n\n公告.png (4.67 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-14 20:20 上传\n\n\n\n\n\n"
        },
        {
            "author": "Eric12324",
            "timestamp": 1584192120,
            "txt_content": "HHD统治 发表于 2020-3-14 20:20\n请问这个公告间隔应该如何设置呢 \nA公告\n# 服务端启动后，等待多久启动该公告（避免相同间隔时间的公告挤在 ...\n你把你的配置文件发我一份，用那个代码格式，就在插入图片哪里，那个<>符号"
        },
        {
            "author": "HHD统治",
            "timestamp": 1584199080,
            "txt_content": " 本帖最后由 HHD统治 于 2020-3-14 23:20 编辑 \nEric12324 发表于 2020-3-14 21:22\n你把你的配置文件发我一份，用那个代码格式，就在插入图片哪里，那个符号 ...All {\n    \"NO.1\" {\n        Cmd=None\n        Content=\"&f[&b萌主公告&f]&a输入&n{item}&a发送手中物品信息至聊天框中，&c{item $1}&a发送快捷栏一号位置的物品信息\"\n        DelayOnStart=120\n        Display=normal\n        Enable=true\n        FixTime=[\n            \"12:00\"\n        ]\n        Hover=\"{item $0~9}展示快捷栏中0~9的物品,例如{item $9}展示快捷栏从左往右数第九个快捷的物品\"\n        Interval=60\n        Join=false\n        ModeCode=interval\n        Setting {\n            Boss {\n                持续时间=10\n                颜色=PURPLE\n            }\n            Title {\n                持续时间=2\n                淡入时间=1\n                淡出时间=1\n            }\n        }\n        Url=None\n    }\n    \"NO.2\" {\n        Cmd=\"/latch\"\n        Content=\"&f[&b萌主公告&f]&a牌子锁插件请输入指令&n/latch&a查看指令详情 点击可直接查看\"\n        DelayOnStart=60\n        Display=normal\n        Enable=true\n        FixTime=[\n            \"12:00\"\n        ]\n        Hover=\"&e↓点击打开↓\"\n        Interval=60\n        Join=false\n        ModeCode=interval\n        Setting {\n            Boss {\n                持续时间=10\n                颜色=PURPLE\n            }\n            Title {\n                持续时间=2\n                淡入时间=1\n                淡出时间=1\n            }\n        }\n        Url=None\n    }\n    \"NO.3\" {\n        Cmd=None\n        Content=\"&f[&b萌主公告&f]&2阿特拉斯世界的猩红炼狱、末影之地,由于没有&7&n神圣魔法&2的保护，死亡会&c&n掉落物品\"\n        DelayOnStart=180\n        Display=normal\n        Enable=true\n        FixTime=[\n            \"12:00\"\n        ]\n        Hover=\"\"\n        Interval=60\n        Join=false\n        ModeCode=interval\n        Setting {\n            Boss {\n                持续时间=10\n                颜色=PURPLE\n            }\n            Title {\n                持续时间=2\n                淡入时间=1\n                淡出时间=1\n            }\n        }\n        Url=None\n    }\n    \"NO.4\" {\n        Cmd=None\n        Content=\"&f[&b萌主公告&f]&a&n点击链接加入群聊【Minecraft萌の国度 1.12.2】\"\n        DelayOnStart=240\n        Display=normal\n        Enable=true\n        FixTime=[\n            \"12:00\"\n        ]\n        Hover=\"&e↓点击打开↓\"\n        Interval=60\n        Join=true\n        ModeCode=interval\n        Setting {\n            Boss {\n                持续时间=10\n                颜色=PURPLE\n            }\n            Title {\n                持续时间=2\n                淡入时间=1\n                淡出时间=1\n            }\n        }\n        Url=None\n    }\n    \"NO.5\" {\n        Cmd=None\n        Content=\"&f[&b萌主公告&f]&AAT功能:输入&N&b@[玩家]&A,就可以在服务器里AT玩家啦~\"\n        DelayOnStart=320\n        Display=normal\n        Enable=true\n        FixTime=[\n            \"12:00\"\n        ]\n        Hover=\"\"\n        Interval=60\n        Join=false\n        ModeCode=interval\n        Setting {\n            Boss {\n                持续时间=10\n                颜色=PURPLE\n            }\n            Title {\n                持续时间=2\n                淡入时间=1\n                淡出时间=1\n            }\n        }\n        Url=None\n    }\n    \"NO.6\" {\n        Cmd=None\n        Content=\"&f[&b萌主公告&f]&a进服务器发现mod物品变为&n&5紫色方块&a请&n重新进入服务器\"\n        DelayOnStart=400\n        Display=normal\n        Enable=true\n        FixTime=[\n            \"12:00\"\n        ]\n        Hover=\"这个问题是暂时无法解决，但不影响游戏体验，还请谅解\"\n        Interval=60\n        Join=false\n        ModeCode=interval\n        Setting {\n            Boss {\n                持续时间=10\n                颜色=PURPLE\n            }\n            Title {\n                持续时间=2\n                淡入时间=1\n                淡出时间=1\n            }\n        }\n        Url=None\n    }\n}\n复制代码"
        },
        {
            "author": "dogeggson",
            "timestamp": 1587997680,
            "txt_content": "公告内容有办法换行吗?"
        },
        {
            "author": "Eric12324",
            "timestamp": 1587998040,
            "txt_content": "dogeggson 发表于 2020-4-27 22:28\n公告内容有办法换行吗?\n不能，不过理论上你可以这样，两条公告，相同间隔时间，然后一条的启动延迟比另一条长零点几秒，这样他会稳定的出现在另一条的后面，等同于换行效果"
        },
        {
            "author": "爱笑的节操",
            "timestamp": 1588005720,
            "txt_content": "非常不错的插件,支持支持"
        },
        {
            "author": "dogeggson",
            "timestamp": 1588017240,
            "txt_content": "Eric12324 发表于 2020-4-27 22:34\n不能，不过理论上你可以这样，两条公告，相同间隔时间，然后一条的启动延迟比另一条长零点几秒，这样他会 ...\n请问启动延迟在哪设置？"
        },
        {
            "author": "七宫安澄",
            "timestamp": 1588031880,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "Eric12324",
            "timestamp": 1588039740,
            "txt_content": "dogeggson 发表于 2020-4-28 03:54\n请问启动延迟在哪设置？\n在配置文件里，如果你用的是最新的版本的话，会有一个DelayOnStart，这个参数指这条公告在服务器完成启动后等待多少秒开始执行循环，只有间隔模式才有效，固定时间点模式无效，这个参数只能直接通过配置文件改"
        },
        {
            "author": "676065874",
            "timestamp": 1588042020,
            "txt_content": "插件不错，支持"
        },
        {
            "author": "233的石头",
            "timestamp": 1594028040,
            "txt_content": "希望能加一个轮播模式，写了好几条公告过一会就唰一下全都出来了"
        },
        {
            "author": "Eric12324",
            "timestamp": 1594092120,
            "txt_content": "233的石头 发表于 2020-7-6 17:34\n希望能加一个轮播模式，写了好几条公告过一会就唰一下全都出来了\n给公告设置不同的间隔时间，并且不要互成倍数，比如300，600这种\n或者在配置文件中设置delayOnstart参数"
        },
        {
            "author": "233的石头",
            "timestamp": 1594109880,
            "txt_content": "Eric12324 发表于 2020-7-7 11:22\n给公告设置不同的间隔时间，并且不要互成倍数，比如300，600这种\n或者在配置文件中设置delayOnstart参数 ...\n啊这个之前想到过，但这样的话会造成有的频繁有的偶尔才能出现的情况"
        },
        {
            "author": "Eric12324",
            "timestamp": 1594117440,
            "txt_content": "233的石头 发表于 2020-7-7 16:18\n啊这个之前想到过，但这样的话会造成有的频繁有的偶尔才能出现的情况\n那就设置delayOnStart, 可以让相同间隔时间的公告不叠在一起，相同间隔时间的公告有不同的delayOnStart秒数就不会叠在一起。这个参数的意义是：对应的公告在服务器启动完成后等待多少秒再开始循环公告"
        },
        {
            "author": "し不懂丶装懂つ",
            "timestamp": 1594917900,
            "txt_content": "mcbbs有你更精彩"
        }
    ]
}