{
    "title": "Day's 水桶插件开发教程 第七章 箱子GUI界面",
    "author": "whatafcukday",
    "replyCount": 43,
    "timestamp": 1435452180,
    "txt_content": " 本帖最后由 whatafcukday 于 2016-1-30 18:34 编辑 \n10年没更了{:10_492:}看到终于有人看我的教程了， 就来更新一下 (也就是说你们看教程记得要回帖子！或者评分！)永不停更个屁，还会有后续章节哦。\n\n\nDay's 水桶插件开发教程 第七章 箱子GUI界面\n\n1.了解背包\n\n\n我们先来了解一下背包类，打开API搜索inventory包  (API在前面的几个章节中有地址)\n\n打开 Inventory 类，查看相关的方法。 \n\n2.自定义一个箱子背包\n\n背包不是new出来的，要这样Inventory inv = Bukkit.createInventory(所有者, 大小, 标题);大小只能是9的倍数，就只能一行一行加\n这里不加类型就是默认的箱子背包，其实还可以加类型，就是这些\n  \n这样我们就得到一个完全空的背包啦，下一步就要往里面添加物品(ItemStack)\n比如这样ItemStack item=new ItemStack(ID); 新建一个ItemStack，更好的itemstack构造方法请至api查看。\n你也可以对ItemStack取meta然后做点处理，比如换displayname，添加Lore、附魔等等，请至API查看 （233333）\n 就是这个方法，和返回一个ItemMeta，你在itemmeta中设置完毕后再把它setItemMeta回去\n把他添加进背包 inv.setItem(0 , item); 那个0是位置的意思，\n箱子背包位置ID为 从上到下 从左到右 跟数组一样从0开始.. \n我这样说有人能理解咩？ 就是左上角那个为0，左上角左边那个为1，左上角下面那个为9，右下角为 大小-1 （懒人）\n背包做好了，就可以让人打开了： 先关掉那个玩家正在打开的背包 player.closeInventory();\n然后打开我们的 player.openInventory(inv);\n一个背包就做好了，但是我们还需要监听他的背包点击事件 下\n\n\n3.监听背包点击事件\n\n\n在API的事件包中找到背包事件包，再找到InventoryClickEvent这个事件\n放上去监听 【神马你不懂如何监听事件？？？ 认真看我之前的教程没有？ \n然后他就会在玩家点击背包的时候触发了！   当然你怎么知道他点的是你给他打开的背包？\n判断一下标题就好啦！ 第一条是判断是否玩家触发（虽然我不知道非玩家如何触发.. 保险起见）\n第三条就是得到他的title 然后跟我的背包的Title对比一下\nif (evt.getWhoClicked() instanceof Player == false) { return;}\nPlayer p = (Player)evt.getWhoClicked();\nif (!evt.getInventory().getTitle().equalsIgnoreCase(guiname)) {return;}\n现在就基本可以确定他是在我们的背包触发了！ \n我们放上去的东西只是 给他看的 给他点的 没说给他拿走呀\n然后我们就取消掉这点击事件evt.setCancelled(true);\n\n注意，目前我在1.72测试，因为背包更新会有一定延迟，也就是说取消掉事件后看起来是你拿出来了，实际上那是不能用的，一会就消失了，也不能合成之类的。\n有一个更新背包的方法 ： p.updateInventory(); \n但我一般解决方法都是检测到就把背包关掉然后重新打开 【别打我...\n取消事件后 直接吧背包关掉就不会出现上述情况\n然后我们取得他点的是哪个位置: evt.getRawSlot()；\n\n现在你想做什么就做什么  ， 比如弄死他oAo 给它点东西 oAo 让他执行一个命令... \n俺习惯这样写player.chat(“/spawn”)\n\n金币呢？ 人气呢？\n",
    "replies": [
        {
            "author": "可可可可可乐",
            "timestamp": 1435543080,
            "txt_content": "支持楼主的教程，话说楼主有没有总帖"
        },
        {
            "author": "lxroo96",
            "timestamp": 1435569600,
            "txt_content": "围观大神..."
        },
        {
            "author": "请填写",
            "timestamp": 1435571940,
            "txt_content": "啊实打实大"
        },
        {
            "author": "whatafcukday",
            "timestamp": 1435666800,
            "txt_content": "可可可可可乐 发表于 2015-6-29 09:58\n支持楼主的教程，话说楼主有没有总帖\n有的 全站搜索Day's就找到了"
        },
        {
            "author": "whatafcukday",
            "timestamp": 1435666800,
            "txt_content": "可可可可可乐 发表于 2015-6-29 09:58\n支持楼主的教程，话说楼主有没有总帖\n有的 全站搜索Day's就找到了"
        },
        {
            "author": "xingxxx",
            "timestamp": 1435972020,
            "txt_content": "可可可可可乐 发表于 2015-6-29 09:58\n支持楼主的教程，话说楼主有没有总帖\n支持！！！"
        },
        {
            "author": "whatafcukday",
            "timestamp": 1435986180,
            "txt_content": "sunaotong2 发表于 2015-7-4 08:59\n我觉得，讲触发事件的时候不详细，希望可以补上一个实例\n好的 近期会补上一个实例"
        },
        {
            "author": "xingyu",
            "timestamp": 1441144860,
            "txt_content": "支持！{:10_512:}"
        },
        {
            "author": "LIUIF",
            "timestamp": 1441200420,
            "txt_content": "然而只能凑凑热闹"
        },
        {
            "author": "马上登陆",
            "timestamp": 1441616700,
            "txt_content": "看不懂啊！！！！！！！！"
        },
        {
            "author": "4one_R",
            "timestamp": 1441640040,
            "txt_content": "0.0撞了哈哈"
        },
        {
            "author": "seesaw_233",
            "timestamp": 1444708980,
            "txt_content": " 本帖最后由 seesaw_233 于 2016-5-1 09:16 编辑 \n箱子GUI也要补充补充\n应该叫做 物品容器GUI .....\n getRawSlot() 的用法是\npublic void onInventoryClick(InventoryClickEvent event)\nif(event.getRawSlot() == 0 )复制代码Inventory inv = Bukkit.createInventory(所有者, 大小, 标题);\n所有者一般为 null (空值) ，大小可以是数字（int）和类型（InventoryType）\n Inventory inve = Bukkit.createInventory(null, 54 , \" §2 !DC! \");复制代码    Inventory inv = Bukkit.createInventory(null,InventoryType.CHEST , \" §2 !seesaw! \");复制代码\n物品也是，ID可以是数字（int）和原版类型（Material）\nItemStack a = new ItemStack(Material.DIAMOND_PICKAXE ,1) ;复制代码更改ItemMeta这样用：\nItemMeta ai = a.getItemMeta();复制代码然后.....\nai.setDisplayName(\"§2 lol~ \") ; 复制代码 setItemMeta回来a.setItemMeta(ai);复制代码至于Lore没试过，不讲，不敢保证对不对....\n我是这样写的\n// Lore set\npublic void invSetup() \n    {复制代码public void onEnable()\n{ \n    invSetup();\n    getLogger().info(\"插件已启用\");\n}复制代码\n完事...\n{:10_492:} {:10_492:} {:10_492:} {:10_492:} {:10_492:}\n\n\n\n\n\n\n\n"
        },
        {
            "author": "181133567",
            "timestamp": 1445073420,
            "txt_content": "seesaw_233 发表于 2015-10-13 12:03\n本帖最后由 seesaw_233 于 2015-10-13 12:07 编辑 \n箱子GUI也要补充补充\n应该叫做 物品容器GUI .....\nwow   这个补充的真到位"
        },
        {
            "author": "181133567",
            "timestamp": 1445074140,
            "txt_content": "你好~ 问个问题 【你也可以对ItemStack取meta然后做点处理，比如换displayname，添加Lore、附魔等等，请至API查看 （233333）】 这里的对itemstack取meta中的meta是什么含义，不太懂。。。"
        },
        {
            "author": "seesaw_233",
            "timestamp": 1445314920,
            "txt_content": "181133567 发表于 2015-10-17 17:29\n你好~ 问个问题 【你也可以对ItemStack取meta然后做点处理，比如换displayname，添加Lore、附魔等等，请至A ...\n他说的很难懂，我是看老外的插件才懂的\n取Meta是\n ItemMeta ai = a.getItemMeta();复制代码\n具体可以在我的补充里找到"
        },
        {
            "author": "181133567",
            "timestamp": 1445364180,
            "txt_content": "seesaw_233 发表于 2015-10-20 12:22\n他说的很难懂，我是看老外的插件才懂的\n取Meta是\n好的~谢啦 能加个Q嘛 一起交流和学习 181133567"
        },
        {
            "author": "seesaw_233",
            "timestamp": 1445406120,
            "txt_content": "181133567 发表于 2015-10-21 02:03\n好的~谢啦 能加个Q嘛 一起交流和学习 181133567\n不能，去Minecraft插件百科官网找群，我在那里。\nhttp://mineplugin.org"
        },
        {
            "author": "sd_leilei@163.c",
            "timestamp": 1446452400,
            "txt_content": "支持一下，太好了"
        },
        {
            "author": "sd_leilei@163.c",
            "timestamp": 1446453120,
            "txt_content": "厉害啊，支持一下"
        },
        {
            "author": "Bryan33",
            "timestamp": 1446803400,
            "txt_content": "标准的使某人或后台执行命令的姿势应该是\nBukkit.dispatchCommand(CommandSender sender,String commandLine);\n所有的实体还有后台都是CommandSender的子接口\n所以通用性不用质疑"
        },
        {
            "author": "asjkdaskljda",
            "timestamp": 1449373260,
            "txt_content": "感觉图片过少，然后教程有点看不懂"
        },
        {
            "author": "周润发",
            "timestamp": 1450353600,
            "txt_content": "if (!evt.getInventory().getTitle().equalsIgnoreCase(guiname)) {return;}\n里面的guiname写啥？是inv还是啥\nevt.setCancelled(true);这个写在哪里\n=========我是这样写的,但是不行=============\n    @EventHandler\n    public void Effect(InventoryClickEvent jc){\n            if (jc.getWhoClicked() instanceof Player == false) { \n                    return;}\n            Player p = (Player)jc.getWhoClicked();\n            if (!jc.getInventory().getTitle().equalsIgnoreCase(\"inv\")) {\n                    return;}\n            jc.setCancelled(true);\n            \n    }\n===========================================\n求楼主大人解答，爱你么么哒"
        },
        {
            "author": "1606140786",
            "timestamp": 1450369080,
            "txt_content": "哇，好的，谢谢"
        },
        {
            "author": "rebam",
            "timestamp": 1450793280,
            "txt_content": "楼主加油，不要放弃啊，我就看的懂你的教程"
        },
        {
            "author": "1377023219",
            "timestamp": 1452320820,
            "txt_content": "楼主，可以给一下水桶的事件吗？\n最好中文的，因为我看不懂。谢谢！"
        },
        {
            "author": "tyb123789",
            "timestamp": 1455255660,
            "txt_content": "尼玛骗子！！！货呢？？？拿钱就删好友啊？"
        },
        {
            "author": "caizhong3",
            "timestamp": 1459389120,
            "txt_content": "楼主啊  图挂了"
        },
        {
            "author": "whatafcukday",
            "timestamp": 1461460380,
            "txt_content": "a390807154 发表于 2015-11-6 17:50\n标准的使某人或后台执行命令的姿势应该是\nBukkit.dispatchCommand(CommandSender sender,String commandLin ...\n当然也可以那样写。。\n4/24考古"
        },
        {
            "author": "Bryan33",
            "timestamp": 1461473400,
            "txt_content": "whatafcukday 发表于 2016-4-24 09:13\n当然也可以那样写。。\n4/24考古\n而且也完全不用evt.getWhoClicked() instanceof Player == false复制代码\n直接用!(evt.getWhoClicked() instanceof Player)复制代码"
        },
        {
            "author": "qq307198081",
            "timestamp": 1461479040,
            "txt_content": "图挂了大神~！"
        },
        {
            "author": "seesaw_233",
            "timestamp": 1462065300,
            "txt_content": "hushubao 发表于 2015-12-17 20:00\nif (!evt.getInventory().getTitle().equalsIgnoreCase(guiname)) {return;}\n里面的guiname写啥？是inv还是 ...\n@EventHandler\n    public void Effect(InventoryClickEvent jc)\n{\n            if (jc.getWhoClicked() instanceof Player) \n                    return;\n            Player p = (Player)jc.getWhoClicked();\n            if (!jc.getInventory().getTitle().equalsIgnoreCase(\"inv\")) \n                    return;\n            jc.setCancelled(true);\n }\n复制代码"
        },
        {
            "author": "whatafcukday",
            "timestamp": 1462607340,
            "txt_content": "a390807154 发表于 2016-4-24 12:50\n而且也完全不用\n直接用\n小符号太多看的眼花.."
        },
        {
            "author": "Laver",
            "timestamp": 1464328680,
            "txt_content": "图全挂了还要人气"
        },
        {
            "author": "licrafter_",
            "timestamp": 1464351960,
            "txt_content": "不错的教程，加油"
        },
        {
            "author": "Rain丶鋭",
            "timestamp": 1469104200,
            "txt_content": "图全挂了。。"
        },
        {
            "author": "YoungMC",
            "timestamp": 1469290680,
            "txt_content": "支持一下，正在学此类#gui正好有帮助，"
        },
        {
            "author": "DevilDrgon",
            "timestamp": 1473343920,
            "txt_content": "请问API怎么看？"
        },
        {
            "author": "情已死",
            "timestamp": 1486483140,
            "txt_content": "求更新。。。"
        },
        {
            "author": "神奈川归尘",
            "timestamp": 1523192160,
            "txt_content": "楼主图挂了 能补一下吗"
        },
        {
            "author": "lusurui",
            "timestamp": 1523496720,
            "txt_content": "你好~ 问个问题"
        },
        {
            "author": "Aj_破晓",
            "timestamp": 1535016480,
            "txt_content": "图全挂了看不到啊~"
        },
        {
            "author": "克鲁鲁殿下",
            "timestamp": 1589972340,
            "txt_content": "是不是考虑把这一行代码写进去\nif(event.getRawSlot() == 0 )\n\n监测点击位置\n\n\n还有为什么不讲一讲gui内格子的坐标呢= ="
        },
        {
            "author": "结城希亚",
            "timestamp": 1589984940,
            "txt_content": "fantuan_233 发表于 2020-5-20 18:59\n是不是考虑把这一行代码写进去\nif(event.getRawSlot() == 0 )\n这不是判断点击的格子是否为最左上角吗\n\n\n坐标没什么好讲的\n最左上角为0，最右下角为53\n左到右，上到下\n只不过和正常数的习惯有点差别，-1就行了"
        }
    ]
}