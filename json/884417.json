{
    "title": "[已解决]无法加载非config.yml配置文件(诡异的npe)",
    "author": "Legoshi",
    "replyCount": 5,
    "timestamp": 1562858880,
    "txt_content": " 本帖最后由 z1224748848 于 2019-7-13 08:41 编辑 \n\n\n\n在写语言配置文件的时候遇到了这个问题。\nFileConfiguration data = YamlConfiguration.loadConfiguration(dataFile);复制代码\n这一行一直出问题，尝试将语言配置写到config.yml中，但是这样config的读取也遇到问题了(在这么做之前并没有出现问题)。\n核心是KCauldron 1.7.10，配置文件编码是GB2312，尝试过UTF-8，但是这样会说遇到不允许的字符，然后还是无法读取。\n通常遇到这个“遇到不允许的字符”我转码成ANSI(GB2312)后就没事了，但是这次就不停报错导致无法正常使用。\n\n尤其是convertMapsToSections这个方法(点名批评)\n\n希望各位大佬能教教我怎么解决，或者对于读取配置文件更好的方案。\n\n谢谢ov o",
    "replies": [
        {
            "author": "a1294790523",
            "timestamp": 1562866740,
            "txt_content": " 本帖最后由 a1294790523 于 2019-7-12 01:42 编辑 \n\nemmm\n我是用path作中转的。。。这可能是最糟糕的读取方式了\n\nPath langFile = getPlugin().getDataFolder().toPath().resolve(\"message.lang\");\n        if (!langFile.toFile().exists()) {\n            getPlugin().saveResource(\"message.lang\", false);\n        }\n复制代码\n这个读取可能是你的文件有问题\n可以试试直接用readFromString方法看看有没有异常\n这个是yaml的检查器，你也可以试试：http://yamllint.com\n1.7.10的话默认是按照你的系统编码来的\n1.12是强制UTF-8，中间不太清楚\n"
        },
        {
            "author": "星",
            "timestamp": 1562913120,
            "txt_content": " 本帖最后由 小星啊啊啊 于 2019-7-12 14:37 编辑 \n\n看样子是配置文件yaml格式不对或者有什么不能出现的值吧 可以发下配置文件么"
        },
        {
            "author": "Legoshi",
            "timestamp": 1562913480,
            "txt_content": "a1294790523 发表于 2019-7-12 01:39\nemmm\n我是用path作中转的。。。这可能是最糟糕的读取方式了\n\n\n好像通过检查了？\n然而还是无法读取qwq"
        },
        {
            "author": "Legoshi",
            "timestamp": 1562913540,
            "txt_content": "小星啊啊啊 发表于 2019-7-12 14:32\n看样子是配置文件yaml格式不对或者有什么不能出现的值吧 可以发下配置文件么 ...Plugin:\n  Prefix: \"&9[&bHungu &6&l魂骨&9] \"\n  INFO: \"&a&l>> \"\n  ERROR: \"&e&l>> \"\n  WARN: \"&c&l>> \"\n  NoPermission: \"&7您没有权限这么做. :(\"\n  NotPlayer: \"&7此操作仅玩家可执行.\"\nCommand:\n  Success:\n    Inlay:\n      Message: \"&7成功镶嵌魂骨 &a%hungu%&7.\"\n      Broadcast: \"&7恭喜玩家 &a%player% &7成功为 &b%item% &7镶嵌上 &c%hungu%&7!\"\n    Unload:\n      Message: \"&7成功拆卸魂骨 &c%hungu%&7.\"\n      Broadcast: \"&7恭喜玩家 &a%player% &7成功将 &c%hungu% &7从 &b%item% &7上拆卸!\"\n  Invalid:\n    Item:\n      Amount: \"&7将要进行镶嵌的目标装备数量必须为 &a1&7.\"\n      Empty: \"&7该装备上未镶嵌指定魂骨.\"\n      ReachLimit: \"&7目标装备已达到最大镶嵌限制&8(&c%limit%&8)&7.\"\n    Hungu:\n      Null: \"&7目标魂骨位&8(快捷栏第 &c9 &8格)&7为空或目标魂骨无效.\"\n      InvalidID: \"&7指定魂骨ID无效.\"\n  Cost:\n    NotEnough: \"&7您的账户余额&8(&a%money%&8)&7不足以进行一次镶嵌&8(&c%cost%&8)&7.\"\n    Success: \"&7支付成功! 花费 &c%cost% &7进行一次镶嵌, 当前账户余额 &a%money%&7.\"复制代码"
        },
        {
            "author": "星",
            "timestamp": 1562913660,
            "txt_content": "z1224748848 发表于 2019-7-12 14:39\nNull: \"&7目标魂骨位&8(快捷栏第 &c9 &8格)&7为空或目标魂骨无效.\"\n这里键为Null了 emmm 你上面哪个截图 也显示了 Null被替换为了~\n之前我也因为这个被坑过 整了好久 emm\n吧null替换为别的键吧 不要用Null什么的来做key！"
        }
    ]
}