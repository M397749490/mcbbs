{
    "title": "[聊天]TTOY——让玩家来自定义自己的称号吧![完全弃坑][理论全版本]",
    "author": "Meagic",
    "replyCount": 39,
    "timestamp": 1499334300,
    "txt_content": " 本帖最后由 Meagic 于 2018-4-1 21:15 编辑 \n插件已弃坑 欢迎有人接坑 不过应该不会有人接吧前言&废话 排版渣不好意思 将就看着吧！BBS上也有这么款称号插件 但不支持敏感词 更改称号次数 所以才会有这个插件的诞生! (感叹号强行凑字数)(滑稽)\n                                                                                                     \n功能&用法\n  它有什么功能？\n  它可以让玩家设置称号\n  并且限制次数\n  它该怎么用？\n  你只需要把插件放入插\n  件目录,重启服务器即可\n\n指令&权限&config\n 指令:\n  /TTOY set 称号  ——为自己设置称号    权限:(TTOY.use)\n  /TTOY kk            ——查看自己剩余次数    权限:(无)\n  /TTOY reload     ——重载插件   (OP命令)\n  /TTOY look ID    ——查看指定玩家的剩余次数  (OP命令)                                                                   Config配置文件:(因为我用代码框有问题)#允许更改称号的次数\nnumber: 3\n#禁止称号中出现的词\nkeywords:\n     - 腐竹\n     - op(这里结束)\n效果图                         开源[+] 请不要问我为什么全部挤在一个类!\n因为我是个渣....\n                   package com.mc;\n\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.configuration.file.YamlConfiguration;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.AsyncPlayerChatEvent;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Main extends JavaPlugin implements Listener{\n        List<String> k = getConfig().getStringList(\"keywords\");\n        List<String> player = getConfig().getStringList(\"Player\");\n        String c = getConfig().getString(\"number\");\n        File fils=new File(getDataFolder(),\"player.yml\");\n        public void onEnable() {\n                \n                if(!getDataFolder().exists()) {\n                getDataFolder().mkdir();\n                reloadConfig();\n              }\n              File file=new File(getDataFolder(),\"config.yml\");\n              if (!(file.exists())) {saveDefaultConfig();}\n              reloadConfig();\n          \n              \n              if(!fils.exists())\n              {\n                  if(!fils.getParentFile().exists())\n                    fils.getParentFile().mkdirs(); \n                  try\n                  {\n                          fils.createNewFile();\n                  }catch(Exception e){}\n              }        \n        getServer().getPluginManager().registerEvents(this, this);\n        }\n        //\n        //\n        //\n        //\n        //\n        public boolean onCommand(CommandSender sender,Command cmd,String label,String[] args) {                \n                if (label.equalsIgnoreCase(\"TTOY\")) {                        \n                    if(args.length == 0){\n                        sender.sendMessage(\"§a§c————————§e§l帮助菜单§a§c————————\");\n                        sender.sendMessage(\"§b§l/TTOY set 称号         ——§7§l设置你的称号\");\n                        sender.sendMessage(\"§b§l/TTOY kk         -—§7§l查看设置称号剩余次数\");\n                        if(sender.isOp()){\n                    sender.sendMessage(\"§b§l/TTOY look 玩家id    ——§7§l查看指定玩家设置称号的剩余次数\"); \n                        sender.sendMessage(\"§b§l/TTOY reload     ——§7§l重载插件\");\n                        }                \n                    }\n                        FileConfiguration cawd=fils.exists() ? YamlConfiguration.loadConfiguration(fils) : new YamlConfiguration();\n                        List<String> ads=cawd.getStringList(sender.getName());\n                        if(args[0].equalsIgnoreCase(\"kk\")){\n                                if(ads.size() == 2){            \n                            sender.sendMessage(\"§7§l[称号系统]§c§l你还剩下:\"+String.valueOf(Integer.parseInt(getConfig().getString(\"number\"))-Integer.parseInt(ads.get(0)))+\"次\");\n                           }\n                                else{\n                        sender.sendMessage(\"§7§l[称号系统]§c§l你还剩下:\"+getConfig().getString(\"number\")+\"次\");\n                                        \n                        }\n        \n                                }\n                if(args[0].equalsIgnoreCase(\"look\")){\n                        if(sender.isOp()){\n                                if(args.length == 2)  {\n                                List<String> mmp = cawd.getStringList(args[1]);\n                                if(mmp.size() != 2){\n                                        sender.sendMessage(\"§c§l玩家:\"+args[1]+\"\\n§7§l次数: 0\\n§7§l称号: 无\");\n                                }\n                                else{\n                                        sender.sendMessage(\"§c§l玩家:\"+args[1]+\"\\n§7§l次数: \"+mmp.get(0)+\"\\n§7§l称号: \"+mmp.get(1));\n                                }\n                                }\n                                else{\n                                        sender.sendMessage(\"§7§l[称号系统]§c§l正确用法: /TTOY look 玩家ID\");\n                                }\n                        }\n                }\n                if(args[0].equalsIgnoreCase(\"reload\")){\n                        if(sender.isOp())\n                        {\n                                if(!getDataFolder().exists()) {\n                                getDataFolder().mkdir();\n                                reloadConfig();\n                              }\n                              File file=new File(getDataFolder(),\"config.yml\");\n                              if (!(file.exists())) {saveDefaultConfig();}\n                              reloadConfig();\n                          \n                              \n                              if(!fils.exists())\n                              {\n                                  if(!fils.getParentFile().exists())\n                                    fils.getParentFile().mkdirs(); \n                                  try\n                                  {\n                                          fils.createNewFile();\n                                  }catch(Exception e){}\n                              }        \n                                sender.sendMessage(\"§7§l[称号系统]§c§l重载成功！\");\n                }\n                }                \n               if (sender.hasPermission(\"TTOY.use\")){         \n                        if (args[0].equalsIgnoreCase(\"set\")) {        \n                                   if (args.length != 2){\n                                           sender.sendMessage(\"§7§l[称号系统]§c§l请使用/TTOY set 称号！\");\n                                   }\n                                   else{\n                                                int n = 0;\n                                                for(String s :k)\n                                                {\n                                                n = n + 1;\n                                                String m = args[1];\n                                                int a=m.indexOf(s); \n                                                if(a>=0){ \n                                                sender.sendMessage(\"§7§l[称号系统]§c§l称号内含有敏感词: \"+s+\"!\");                                        \n                                   }\n                                                else{\n                                                        FileConfiguration config=fils.exists() ? YamlConfiguration.loadConfiguration(fils) : new YamlConfiguration();\n                                                        List<String> player=config.getStringList(sender.getName());\n                                                        if(player.size() != 2){                                                        \n                                                                List<String> list=new ArrayList<>();\n                                                                list.add(\"1\");\n                                                                list.add(args[1]);                                                        \n                                                                config.set(sender.getName(),list);\n                                                                try\n                                                                {\n                                                                  config.save(fils);\n                                                                }\n                                                                catch(Exception e)\n                                                                {\n                                                                  e.printStackTrace();\n                                                                }\n                                                                //sender.sendMessage(config.getStringList(sender.getName()).get(0));\n                                                                sender.sendMessage((\"§7§l[称号系统]§c§l成功保存称号！\"));\n                                                                break;\n                                                        }\n                                                        else{\n                                                                if(player.size() == 2)\n                                                                {\n                                                        if(Integer.parseInt(player.get(0)) >=  Integer.parseInt(c)){\n                                                                sender.sendMessage((\"§7§l[称号系统]§c§l你已经没有修改称号的机会了！\"));\n                                                        }\n                                                        else{\n                                                        List<String> list=new ArrayList<>();        \n                                                        list.add(Integer.valueOf(player.get(0)).intValue()+1+\"\");\n                                                        list.add(args[1]);\n                                                        config.set(sender.getName(),list);\n                                                        try\n                                                        {\n                                                          config.save(fils);\n                                                        }\n                                                        catch(Exception e)\n                                                        {\n                                                          e.printStackTrace();\n                                                        }\n                                                        sender.sendMessage((\"§7§l[称号系统]§c§l成功保存称号！\"));\n                                                                }\n                                                        break;\n                                                                }\n                                                }\n                                                }\n                                                        \n\n                                                }\n                                                        }\n                                   }\n        \n                        }                \n                };\n                return false;\n        }\n    @EventHandler\n    public void chat(AsyncPlayerChatEvent e)\n    {\n            FileConfiguration config=fils.exists() ? YamlConfiguration.loadConfiguration(fils) : new YamlConfiguration();\n               String format = config.getStringList(e.getPlayer().getName()).get(1).replace(\"&\", \"§\");\n           e.setFormat(format+\"§f\"+e.getFormat());\n    }\n    \n<b style=\"line-height: 1.5; background-color: rgb(214, 190, 150);\"></b>复制代码                                                                                            \n 最后 & 下载\n链接: http://pan.baidu.com/s/1pLmaHKn 密码: nmmf\n支持的话请下载附件！\n你们的支持就是我更新的动力！\n                                                      \n                                                                                                        \n                                                                                                        \n                                                                                                             \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTTOY.jar\n\n\n2017-7-6 17:43 上传\n点击文件名下载附件\n\n\n\n\n4.69 KB, 下载次数: 125\n\n\n插件\n\n\n",
    "replies": [
        {
            "author": "wenl",
            "timestamp": 1499335680,
            "txt_content": "Meagic 发表于 2017-7-6 18:11\n配置文件第一个 就是次数= = 完全自定义\n这样弄的是每一个人都这么多次数,我希望你加入指定权限组的人多少次数和使用指令添加某某某人的次数\n望理解,如不懂请私聊"
        },
        {
            "author": "wenl",
            "timestamp": 1499335800,
            "txt_content": "果断好评,只是希望可以自定义添加次数"
        },
        {
            "author": "Meagic",
            "timestamp": 1499335860,
            "txt_content": "wenl 发表于 2017-7-6 18:10\n果断好评,只是希望可以自定义添加次数\n配置文件第一个 就是次数= = 完全自定义"
        },
        {
            "author": "小_丰",
            "timestamp": 1499335920,
            "txt_content": "支持楼主，顺便问下   这插件的版本是多少呢？ 在帖子里补上吧"
        },
        {
            "author": "volta薯片~",
            "timestamp": 1499338800,
            "txt_content": "woc原创必须支持啊"
        },
        {
            "author": "Meagic",
            "timestamp": 1499343180,
            "txt_content": " 本帖最后由 Meagic 于 2017-7-6 20:32 编辑 \nwenl 发表于 2017-7-6 18:08\n这样弄的是每一个人都这么多次数,我希望你加入指定权限组的人多少次数和使用指令添加某某某人的次数\n望理 ...             于是\n下个版本加入  感谢提议"
        },
        {
            "author": "makai5826787",
            "timestamp": 1499344920,
            "txt_content": "23333，这是第一次原创的？有没有想过想要发展，哈。"
        },
        {
            "author": "Meagic",
            "timestamp": 1499345460,
            "txt_content": "makai5826787 发表于 2017-7-6 20:42\n23333，这是第一次原创的？有没有想过想要发展，哈。\n第二次了 慢慢发展起来吧"
        },
        {
            "author": "动物的世界",
            "timestamp": 1499391360,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "2949848385",
            "timestamp": 1499391480,
            "txt_content": "果断评分，就是因为没有更改次数所以才放弃了另一个类似插件"
        },
        {
            "author": "yanshuchen",
            "timestamp": 1499391840,
            "txt_content": "楼主 如果要继续更新的话\n建议弄成可在config设置每个字花费多少钱"
        },
        {
            "author": "Meagic",
            "timestamp": 1499391960,
            "txt_content": "yanshuchen 发表于 2017-7-7 09:44\n楼主 如果要继续更新的话\n建议弄成可在config设置每个字花费多少钱\n这个可以有  下版本加入"
        },
        {
            "author": "Meagic",
            "timestamp": 1499392200,
            "txt_content": " 本帖最后由 Meagic 于 2017-7-7 19:12 编辑 \n动物的世界 发表于 2017-7-7 09:36\n可以改成用命令给玩家自定义次数\n会和我当前的逻辑冲突 sorry"
        },
        {
            "author": "安朵",
            "timestamp": 1500435300,
            "txt_content": "这个称号插件的变量是什么我用杜蕾斯聊天他不显示称号"
        },
        {
            "author": "安朵",
            "timestamp": 1500435480,
            "txt_content": "安朵 发表于 2017-7-19 11:35\n这个称号插件的变量是什么我用杜蕾斯聊天他不显示称号\n@Meagic"
        },
        {
            "author": "Meagic",
            "timestamp": 1500435840,
            "txt_content": "安朵 发表于 2017-7-19 11:35\n这个称号插件的变量是什么我用杜蕾斯聊天他不显示称号\n暂时没有"
        },
        {
            "author": "天朝世界",
            "timestamp": 1500443220,
            "txt_content": "大佬，我的聊天插件是用的MiaoChat，您的这个称号有没有PlaceholderAPI变量。因为我没有装ESS，我又想用这个聊天插件。"
        },
        {
            "author": "~KU~",
            "timestamp": 1500447000,
            "txt_content": " 本帖最后由 ~KU~ 于 2017-7-19 14:51 编辑 \n\n欸恶，原帖跟下载地址都是作者的下面 (//_//)\n正文:\n关键词会有类似于正则表达式那类的筛选吗?\n例如:\n^(&\\w)*\\[(\\S)*\\](&\\w)*复制代码\n之类的"
        },
        {
            "author": "安朵",
            "timestamp": 1500455220,
            "txt_content": "能不能添加支持特殊符号"
        },
        {
            "author": "★遨游の星空★",
            "timestamp": 1500455760,
            "txt_content": "想问一下这个可以在Tab列表里面显示称号的么？"
        },
        {
            "author": "Meagic",
            "timestamp": 1500456060,
            "txt_content": "★遨游の星空★ 发表于 2017-7-19 17:16\n想问一下这个可以在Tab列表里面显示称号的么？\n不可以  "
        },
        {
            "author": "蛇皮螃蟹怪",
            "timestamp": 1500464760,
            "txt_content": "66666666666翻了"
        },
        {
            "author": "蛇皮螃蟹怪",
            "timestamp": 1500465120,
            "txt_content": "希望能支持后戳"
        },
        {
            "author": "小_丰",
            "timestamp": 1500516900,
            "txt_content": "希望支持后戳"
        },
        {
            "author": "835937766",
            "timestamp": 1522982820,
            "txt_content": "自定义称号？貌似一个氪金系统来了"
        },
        {
            "author": "DJ_DJ",
            "timestamp": 1524909300,
            "txt_content": "如果能叠加2个想要的指定称号就好了 例如我有个A称号 B称号 我要2个一起用"
        },
        {
            "author": "Jklhgf",
            "timestamp": 1528136760,
            "txt_content": "楼主这插件只能1个称号吗?"
        },
        {
            "author": "Jklhgf",
            "timestamp": 1533550140,
            "txt_content": "代码写的好烂啊 有报错 我尝试修一下吧"
        },
        {
            "author": "July_Summer",
            "timestamp": 1533550920,
            "txt_content": " 本帖最后由 July.七月 于 2018-11-29 19:11 编辑 \nJklhgf 发表于 2018-8-6 18:09\n代码写的好烂啊 有报错 我尝试修一下吧\n我承认我写得很烂 \n如果你有能力的话 可以把此坑接下来\n\n"
        },
        {
            "author": "22222782",
            "timestamp": 1533551040,
            "txt_content": "插件不错，收下了！感谢楼主分享！"
        },
        {
            "author": "Jklhgf",
            "timestamp": 1534694340,
            "txt_content": "我接坑"
        },
        {
            "author": "＜光速＞",
            "timestamp": 1566366360,
            "txt_content": "mcbbs你有更精彩[:dragon:]"
        },
        {
            "author": "aa1927446750",
            "timestamp": 1587823320,
            "txt_content": "虽然已经弃坑了  但是真的很好  别在举报我了 不然又要5天了"
        },
        {
            "author": "kejiyun",
            "timestamp": 1589213580,
            "txt_content": "太棒了，果断好评"
        },
        {
            "author": "1182350036",
            "timestamp": 1589263740,
            "txt_content": "可以 很不错"
        },
        {
            "author": "jrx233",
            "timestamp": 1589613300,
            "txt_content": "可以给VIP玩家自定义称号权限"
        },
        {
            "author": "3310201",
            "timestamp": 1589615100,
            "txt_content": "牛逼牛逼牛逼，我下载了，支持模组端就好"
        },
        {
            "author": "余北哥哥",
            "timestamp": 1589615220,
            "txt_content": "好用，果断下载到服务器，很棒！"
        },
        {
            "author": "xiaozia",
            "timestamp": 1592491800,
            "txt_content": "支持原创插件"
        }
    ]
}