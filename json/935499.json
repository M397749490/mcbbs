{
    "title": "如何优雅的记录玩家数据",
    "author": "冰上云梦",
    "replyCount": 8,
    "timestamp": 1577360820,
    "txt_content": " 本帖最后由 季末旋律 于 2019-12-26 20:49 编辑 \n\n一共两个问题:\n1. 如何创建除config.yml以外的文件,因为我想创建一个data.yml用来存储玩家数据(已解决)\n2. 如何记录玩家ID,并写入到data.yml这个文件中.用键值对的方式存储(已解决)源码地址:\nGitHub(优先更新)\n码云(可能有延迟)\n\n\n",
    "replies": [
        {
            "author": "mc能吃吗",
            "timestamp": 1577364000,
            "txt_content": " 本帖最后由 mc能吃吗 于 2019-12-26 20:44 编辑 \n\n嗯。。你居然是LV8 可怕\n好吧 记录很简单 但是我找不到你创建文件的方法（懒得找233）\n这下面封装了一个自定义配置的方法 是我用的 注意你需要有一个全局变量YamlConfiguration f;\n\n public void customConfig() {\nFile f = new File(this.getDataFolder(), \"save.yml\");\n        if (f.exists()) {\n            this.getLogger().info(\"save.yml成功载入\");\n            this.file = YamlConfiguration.loadConfiguration(f);\n        }\n        else {\n            this.getLogger().info(\"没有save.yml,正在创建\");\n            this.saveResource(\"save.yml\", true);\n            this.file = YamlConfiguration.loadConfiguration(f);\n        }\n}\n\n复制代码\n首先你需要确定你的data.yml属于YamlConfiguration类型\n如果是普通的File类型就需要这样转换\nYamlConfiguration yf = YamlConfiguration.loadConfiguration(f);复制代码然后？\nyf.set(p.getName(), \"假装我是数据\");\nyf.getString(p.getName()); //return \"假装我是数据\"复制代码\n\n\n这是我见过最强的代码\n你就不能兼容一下嘛 是在不行关插件不得了嘛[:hide:]\n"
        },
        {
            "author": "冰星",
            "timestamp": 1577364000,
            "txt_content": "不是跟config一个道理吗？"
        },
        {
            "author": "mc能吃吗",
            "timestamp": 1577364060,
            "txt_content": "冰星 发表于 2019-12-26 20:40\n不是跟config一个道理吗？\n说实话 File f = new File(\"data.yml\");都可以创建一个文件\n当然 打个比方233"
        },
        {
            "author": "冰上云梦",
            "timestamp": 1577364360,
            "txt_content": "冰星 发表于 2019-12-26 20:40\n不是跟config一个道理吗？\n和config道理类似,但是不一样"
        },
        {
            "author": "冰上云梦",
            "timestamp": 1577364420,
            "txt_content": "mc能吃吗 发表于 2019-12-26 20:41\n说实话 File f = new File(\"data.yml\");都可以创建一个文件\n当然 打个比方233\n已经OK了,现在就是需要判断是否玩家ID已经被记录"
        },
        {
            "author": "mc能吃吗",
            "timestamp": 1577365200,
            "txt_content": " 本帖最后由 mc能吃吗 于 2019-12-26 21:02 编辑 \n季末旋律 发表于 2019-12-26 20:47\n已经OK了,现在就是需要判断是否玩家ID已经被记录yf.getConfig().getKey(true) /*获得\"yf\"文件中所有的键值 也就是冒号前面的所有东西 以List储存*/\nKeys.contains(p.getName())\n复制代码差不多这样。但是你干嘛要获取呢233\nset,有就替换 没有就新建啊\n\n不妨给个最佳\n"
        },
        {
            "author": "海螺螺",
            "timestamp": 1577418420,
            "txt_content": "https://www.mcbbs.net/thread-918325-1-1.html"
        },
        {
            "author": "1837019522",
            "timestamp": 1577547360,
            "txt_content": " 本帖最后由 1837019522 于 2019-12-28 23:45 编辑 \n\n我这里贴上一段代码看注释public class NewPlayer implements Listener{\n        \n        SimpleDateFormat df = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");//设置日期格式\n        \n        @EventHandler\n        public void NewPlaye(PlayerJoinEvent e) {\n                List<String> player = new ArrayList<String>();\n                List<String> uuid = new ArrayList<String>();\n                List<String> Time = new ArrayList<String>();\n                //建立泛型存储数据\n                File join = new File(Config().getDataFolder(),\"date.yml\");\n                FileConfiguration Join = YamlConfiguration.loadConfiguration(join);\n                //建立文件\n                player = Join.getStringList(\"Player\");\n                uuid = Join.getStringList(\"Uuid\");\n                Time = Join.getStringList(\"Time\");\n                //将date.yml文件内数据读入泛型\n                if(!Join.getStringList(\"Uuid\").contains(e.getPlayer().getUniqueId().toString()) && !Join.getStringList(\"Player\").contains(e.getPlayer().getName())) {\n                        //判断玩家是否已经存储在文件里\n                        player.add(e.getPlayer().getName());\n                        uuid.add(e.getPlayer().getUniqueId().toString());\n                        Time.add(e.getPlayer().getName()+\":\"+e.getPlayer().getUniqueId().toString()+\":\"+df.format(new Date()));\n                        //将玩家添加进泛型\n                        Join.set(\"Player\", player);\n                        Join.set(\"Uuid\", uuid);\n                        Join.set(\"Time\", Time);\n                        //将泛型存入缓存\n                        try {\n                                Join.save(join);\n                                //保存文件 需要用try\n                        }catch(IOException ee) {\n                                ee.printStackTrace();\n                        }\n                }\n        }\n}复制代码\n\n\n"
        }
    ]
}