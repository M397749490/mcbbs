{
    "title": "利用java反射指定服务端存档位置",
    "author": "Itsusinn",
    "replyCount": 6,
    "timestamp": 1525595520,
    "txt_content": " 本帖最后由 Yi_Xin24 于 2018-5-6 17:17 编辑 \n\n用java的反射功能制作开服工具的时候发现存档位置会和jar包的位置相同,我想对他们分离import java.io.File;  \nimport java.lang.reflect.Method;  \nimport java.net.URL;  \nimport java.net.URLClassLoader; \n\npublic class Test {\n        @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\n        public static void main(String[] args) throws Exception {\n        File file=new File(\".\\\\serverfile\\\\Spigot-1.9.jar\");//jar包的路径  \n        URL url=file.toURI().toURL();  \n        URLClassLoader urlClassLoader= (URLClassLoader) ClassLoader.getSystemClassLoader(); //获取系统加载器\n        Method add = URLClassLoader.class.getDeclaredMethod(\"addURL\", new Class[] { URL.class });\n        add.setAccessible(true);\n        add.invoke(urlClassLoader, new Object[] {url});\n        Class c=urlClassLoader.loadClass(\"org.bukkit.craftbukkit.Main\");//服务端主类的名字\n        Method mainmethod = c.getMethod(\"main\",String[].class);\n        mainmethod.invoke(null,(Object)new String[]{});\n        }\n\n}复制代码\n\n\n",
    "replies": [
        {
            "author": "Itsusinn",
            "timestamp": 1525598160,
            "txt_content": "发错了帖子"
        },
        {
            "author": "602723113",
            "timestamp": 1525616640,
            "txt_content": "为什么不试试Property和Runtime呢？同样是执行java -jar"
        },
        {
            "author": "Itsusinn",
            "timestamp": 1525645080,
            "txt_content": "602723113 发表于 2018-5-6 22:24\n为什么不试试Property和Runtime呢？同样是执行java -jar\nemmmmm,runtime还要针对底层系统做不同的实现"
        },
        {
            "author": "Itsusinn",
            "timestamp": 1525645140,
            "txt_content": "602723113 发表于 2018-5-6 22:24\n为什么不试试Property和Runtime呢？同样是执行java -jar\n重点不在这里,重点是,不同的jar服务端执行的时候,存档糅合在一起了"
        },
        {
            "author": "Itsusinn",
            "timestamp": 1525645200,
            "txt_content": "Yi_Xin24 发表于 2018-5-7 06:19\n重点不在这里,重点是,不同的jar服务端执行的时候,存档糅合在一起了\n全在main()的执行目录下"
        },
        {
            "author": "Itsusinn",
            "timestamp": 1525677360,
            "txt_content": "602723113 发表于 2018-5-6 22:24\n为什么不试试Property和Runtime呢？同样是执行java -jar\n是我错了，我错了，反射解决不了我说的那个问题"
        }
    ]
}