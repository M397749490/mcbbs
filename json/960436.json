{
    "title": "为什么YamlConfiguration类无法存储Inventory类的信息",
    "author": "2418013844@qq",
    "replyCount": 10,
    "timestamp": 1581725460,
    "txt_content": " 本帖最后由 2418013844@qq 于 2020-2-15 08:28 编辑 \n\n最近在做一个抽奖的插件 需要保存抽奖内容 就用到了Inventory类 我想把玩家设置好的Inventory直接保存到yml文件里面但是出现了问题如下:        String Name=args[2],Display=args[3];\n                                         Inventory Inv=Bukkit.createInventory(null,54 , Display.replaceAll(\"&\",\"§\"));\n                                         LotInfo.set(Name+\".Inventory\", Inv);\n                                         如果这样的话是没有一点问题的\n\n因为没有保存在文件里面 这时如果服务器重启数据就没了\n但是如果保存了                 LotInfo.save(Path);\n再打开                              LotInfo=YamlConfiguration.loadConfiguration(Path);\n就会出现无法打开的问题 异常的意思是无法读取这个文件 或者说这个文件已经损坏\n这是yml文件:\nTest:\n  Inventory: !!org.bukkit.craftbukkit.v1_7_R4.inventory.CraftInventoryCustom\n    contents:\n    - ==: org.bukkit.inventory.ItemStack\n      type: STONE\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    - null\n    maxStackSize: 64\n\n然后他的报错:\n[08:09:43 ERROR]: Cannot load .\\plugins\\Lottery\\Lottery1.yml\norg.bukkit.configuration.InvalidConfigurationException: could not determine a constructor for the tag tag:yaml.org,2002:\norg.bukkit.craftbukkit.v1_7_R4.inventory.CraftInventoryCustom\n in 'string', line 2, column 14:\n      Inventory: !!org.bukkit.craftbukkit.v1_7_R4 ...\n求解答！！\n 另外顺便问一下怎么修改Inventory类的Titile 我看他只有GetTitle 只能通过重新创建Inventory然后复制物品来实现吗",
    "replies": [
        {
            "author": "Sssss...",
            "timestamp": 1581725940,
            "txt_content": "存ItemStack啊\ntitle的问题 好像是要重新创建"
        },
        {
            "author": "2418013844@qq",
            "timestamp": 1581726360,
            "txt_content": "Sssss... 发表于 2020-2-15 08:19\n存ItemStack啊\ntitle的问题 好像是要重新创建\n那问一下 YamlConfiguration类中的set(Object) 能不能存储除了Inventory类之外的其他类 比如Player World Location之类的 或者是我自定义的类"
        },
        {
            "author": "Sssss...",
            "timestamp": 1581726480,
            "txt_content": " 本帖最后由 Sssss... 于 2020-2-15 08:49 编辑 \n2418013844@qq 发表于 2020-2-15 08:26\n那问一下 YamlConfiguration类中的set(Object) 能不能存储除了Inventory类之外的其他类 比如Player World ...\n可以存，但有些会引发问题\nplayer world可以存名字，location可以存坐标和world的名字"
        },
        {
            "author": "2418013844@qq",
            "timestamp": 1581726540,
            "txt_content": "Sssss... 发表于 2020-2-15 08:28\n可以存，但有些没有读取方法，你一定要存就自己写方法\nplayer world可以存名字，location可以存坐标和wor ...\n不能使用YamlConfiguration.get(Path)吗 比如\nPlayer a=(Player)Config.get(\"xx\");"
        },
        {
            "author": "帅比小樊",
            "timestamp": 1581728520,
            "txt_content": "不能存的\n需要序列化的类 才能存储\n例如ItemStack"
        },
        {
            "author": "2505073177",
            "timestamp": 1581731580,
            "txt_content": "Yaml语法错误\nTest:\n  Inventory: !!org.bukkit.craftbukkit.v1_7_R4.inventory.CraftInventoryCustom\n    contents:\nInventory后面存在!!org.bukkit.craftbukkit.v1_7_R4.inventory.CraftInventoryCustom"
        },
        {
            "author": "a1294790523",
            "timestamp": 1581732780,
            "txt_content": "org.bukkit.configuration.InvalidConfigurationException: could not determine a constructor for the tag tag:yaml.org,2002:\norg.bukkit.craftbukkit.v1_7_R4.inventory.CraftInventoryCustom复制代码\nhttps://bukkit.org/threads/save- ... onfig-error.413905/\n总而言之就是Inventory本身不支持序列化\n请存储Itemstack并使用getItemStack()方法序列化"
        },
        {
            "author": "2418013844@qq",
            "timestamp": 1581734160,
            "txt_content": "a1294790523 发表于 2020-2-15 10:13\nhttps://bukkit.org/threads/save-an-inventory-in-config-error.413905/\n总而言之就是Inventory本身不支 ...\n那能不能这样 比如新建一个类CInventory extends Inventory  implements Serializable\n然后将它序列化并存储\n然后从文件中Get它强制转换为Inventory?"
        },
        {
            "author": "a1294790523",
            "timestamp": 1581734880,
            "txt_content": "2418013844@qq 发表于 2020-2-15 10:36\n那能不能这样 比如新建一个类CInventory extends Inventory  implements Serializable\n然后将它序列化并 ...\n理论上可以 但是前提是你得把这个类包装好 可以试试（"
        },
        {
            "author": "2418013844@qq",
            "timestamp": 1581739560,
            "txt_content": "a1294790523 发表于 2020-2-15 10:48\n理论上可以 但是前提是你得把这个类包装好 可以试试（\n哦哦知道了 "
        }
    ]
}