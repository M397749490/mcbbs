{
    "title": "【TRP快乐水出品】【已更新使用手册】真正的红石电脑(非计算器，无命令方块)",
    "author": "weixingl888",
    "replyCount": 48,
    "timestamp": 1411542000,
    "txt_content": " 本帖最后由 weixingl888 于 2014-9-27 00:01 编辑 \n\n此贴是LZ为TRP成员Happy Water代发，原作者拥有所有权利。\n\n\n本作品为一台具备完整结构的纯红石构造的电脑，没有使用命令方块和任何MOD，理论上支持比较器的版本都可使用(推荐1.7+)。\n\n-----9/26/14 23:59更新--------\n红石电脑编程手册\n\n一、指令介绍\n本计算机采用16bit等长指令编码（立即数操作除外，后面会说明），包含算术逻辑运算、数据传送、条件执行三类。\n内存字长为16位，即单个内存地址可存下16bit整数，亦可存下一条指令编码。\n\n指令的基本结构大致为：\n{区分码2bit；\n操作码5bit；\n源操作寄存器一3bit；\n源操作寄存器二3bit；\n目的操作寄存器3bit；\n}//MSB在前，LSB在后\n\n区分码用于区分指令类型，00为算术逻辑运算，10为数据传送，01为条件执行，11目前保留。\n操作码的编码因指令类型的不同而不同，操作寄存器部分的意义始终不变，但有时根据指令操作码可能会忽略一部分寄存器。\n\n下面详细介绍指令的机器码：\n1.算术逻辑运算\nADD X+Y->Z ：0 0 F 1 0 0 0 X X X Y Y Y Z Z Z   //每一个字母代表一个比特位，以下同\n即将寄存器X与寄存器Y中的数值相加，结果存入寄存器Z中。\nF位为标志位影响位（以下同）。若为0，则不影响标志位；为1，则影响标志位。\nCPU设有CF ZF SF OF四个标志位，标志位作为条件执行指令的条件判断依据用。\n\nADC  X+Y->Z ：0 0 F 1 1 0 0 X X X Y Y Y Z Z Z\n意义同上，但是带进位。（CF标志位）\n\nSUB  X+Y->Z ：0 0 F 1 0 1 0 X X X Y Y Y Z Z Z\n用寄存器X减去寄存器Y中的数值，结果存入寄存器Z中。\n\nSBB  X+Y->Z ：0 0 F 1 1 1 0 X X X Y Y Y Z Z Z\n同上，但是带借位。（CF标志位）\n\nAND  X+Y->Z ：0 0 F 0 1 1 1 X X X Y Y Y Z Z Z\n寄存器X与寄存器Y中的数值按位相与，结果存至Z。\n注意，对于逻辑计算而言，CF 和 OF无意义，但若影响标志位，则这两个标志位也将被刷新，其后的值将不可预见。\n\nNAND X+Y->Z ：0 0 F 0 0 1 1 X X X Y Y Y Z Z Z\n寄存器X与寄存器Y中的数值按位相与非，结果存至Z。\n\nOR   X+Y->Z ：0 0 F 0 0 0 1 X X X Y Y Y Z Z Z\n寄存器X与寄存器Y中的数值按位相或，结果存至Z。\n\nNOR  X+Y->Z ：0 0 F 0 0 0 1 X X X Y Y Y Z Z Z\n寄存器X与寄存器Y中的数值按位相或非，结果存至Z。\n\nXOR  X+Y->Z ：0 0 F 0 0 0 0 X X X Y Y Y Z Z Z\n寄存器X与寄存器Y中的数值按位相异或，结果存至Z。\n\nNXOR X+Y->Z ：0 0 F 0 1 0 0 X X X Y Y Y Z Z Z\n寄存器X与寄存器Y中的数值按位相同或，结果存至Z。\n\nBRS X->Z    ：0 0 F 1 0 0 1 X X X X X X Z Z Z\n寄存器X中的数值向右逻辑移位1位，结果存至Z。若移出位为1，切F位为1，则设置标志位CF。\n注意：指令中X寄存器的编号出现了两次。\n\n2.数据传送指令\nMOV [X+Y]->Z :1 0 0 0 1 0 0 X X X Y Y Y Z Z Z\n将地址编号为X+Y的内存单元中的数据传送至寄存器Z中。\n\nMOV [Y]->Z   :1 0 1 0 1 0 0 X X X Y Y Y Z Z Z\n将地址编号为Y的内存单元中的数据传送至寄存器Z中。\n\nMOV Z->[X+Y] :1 0 0 0 0 0 0 X X X Y Y Y Z Z Z\n将寄存器Z中的数据传送至地址编号为X+Y的内存单元中。\n\nMOV Z->[Y]   :1 0 1 0 0 0 0 X X X Y Y Y Z Z Z\n将寄存器Z中的数据传送至地址编号为Y的内存单元中。\n\nMOV N ->Z    :1 0 0 0 1 0 1 X X X Y Y Y Z Z Z\n将立即数N传送至寄存器Z中。立即数为16bit（占一个完整的内存字），紧挨在这条操作指令之后。\n\n3.条件执行指令\n条件执行指令，其实现就是条件加法，即根据指令操作码中的条件编号，\n与当前标志位中的状态进行比对判断，若满足条件，则执行一条加法指令，否则跳过当前指令。\n加法指令本质上就是 ADD X+Y->Z 命令，然加法指令本身可操作R7寄存器（即指令计数器），\n因而可以利用条件加法指令实现条件跳转功能，进而实现if goto的效果。\n加法的源操作数可以是X+Y，亦可只有Y，即直接Y->Z。\n也就是说，利用这条指令，即可实现绝对地址跳跃，亦可实现相对地址跳跃，方便实现地址无关代码（如动态链接库）。\n\n条件加法指令的编码格式为：\n| 0 | 1 | S | OP1| OP2| OP3| OP4| X | X | X | Y | Y | Y | Z | Z | Z |\n\nS位为0，则ADD X+Y->Z 形式；\nS位为1，则为Y->Z形式；\n\nOP1～OP4为条件编码，具体编码意义见下表。\n注：控制器在每次完成取指后（尚未执行指令之前）既已经将指令计数器加1，若作相对跳跃，请注意偏移量的计算。\n OP2 OP1 \nOP4 OP3\n0  00  11  01  10  0JZJNZJSJNS0  1JCJNCJOJNO1  0JA1  1JGJNGJGEJNG\n\n二、软件编程与物理结构关系\n地址空间采用16位平面地址空间，每个内存单元字长为16bit，不可拆分。\n当前内存单元数为256字，也就是512字节容量。\n在地图中，靠近控制器方向（南）为LSB，反方向（北）为MSB。\nRAM部分为上下两层，每层128个字。这128个字又自东向西排列，每一行（南北走向）为一组，一组4个，东西方向并列32组。\n地址排列顺序为\n上层自南数第一个 ->  下层自南数第一个 -> 上层自南数第二个 -> 下层自南数第二个 -> ………… ->上层自南数第四个 -> 下层自南数第四个\n-> 向西一格，上层自南数第一个 -> ……\n以此类推，蛇形前进。\n\n控制器部分位于地图南段，介于ALU和RAM之间的接缝处。分上下五层，每层各负责一种操作。\n其中下数第二层，也就是有蓝色标记的一层，为取指层，负责取指令动作，启动机器就是对它发出启动指令。\n当取指完成以后，它会输出一个信号传递个下一个控制器，该信号通过活塞组成的交换选择网格后到达目标控制器。\n目标控制器的选取由指令编码决定，指令编码的译码结果通过长线从地图北端附近传输至交换网格的四个活塞处，四个活塞响应信号完成信号通道交换。\n当目标控制器接收到控制信号后，开始执行相应的操作（算术逻辑运算、数据输入、数据输出、立即数输入等四种操作）。\n当目表控制器完成动作以后，亦会发出一个信号表明动作完成，该信号会被传输至取指控制器的输入信号端，如此完成循环，周而复始。\n当激活停机拉杆后（位于地图中间的控制平台上），活塞会阻塞信号回环，并将这个信号转发至停机指示灯上（位于地图中的控制平台上），此时就会看到停机指示灯闪烁一次。\n\n-----9/25/14 21:32更新--------\n下载地址:\nhttp://pan.baidu.com/s/1nthvRTJ\n未包含显示屏 稍后更新操作手册\n\n-----9/24/14 21:00更新--------\nGPU介绍:\n32x32像素活塞平，像素大小为2x2。\n屏幕本身的布线设计使得屏幕大小可以无限堆叠，背后的布线随水平分辨率线性增长，因而不会出现屏幕大了导致布线难度呈几何级数增长的尴尬情况。\n显存512字节，可以缓冲4个完整的全副图层，图层之间可由GPU完成图元合并。（亦即可以一个图层放“桌面”，一个图层放“选择框”）GPU的硬件加速可使得图形操作速度远远超过CPU一行一行地操作。\nGPU亦可完成帧序列播放动作，亦即光标闪烁，复选框闪烁等基本动作可完全脱离CPU，减少了CPU的工作量。\n前台屏幕可以锁定一副画面，后台的图形绘制过程不影响屏幕上的图像。\n显存与内存独立，图中屏幕右半边的就是显卡的显存，GPU部分被遮住，切还在调试中。\n\n------9/24/14 20:41更新--------\n\n原作者正在完善显卡部分，做好后预计可以实现：\n贪吃蛇\n俄罗斯方块\n2048\n十滴水\n\n------9/24/14 14:53原帖--------\n\n\n\n\n16bit CPU\n8个16bit通用寄存器 R0 到 R7 ，其中R7为指令计数器。\n\n512字节RAM（256字，因为数据线宽度为16bit）\n\nALU可完成\nADD ADC\nSUB SBB\nAND OR\nNAND NOR\nXOR NXOR\nNOT\nBitRightShift 等运算\n\n设有四个状态标志位：CF OF SF ZF\n\n条件跳跃指令可根据标志位情况判定是否跳跃。\n（亦即if else 语句）\n\n指令实例：\nMOV [R0+R1],R2 ;将地址编号为 R0+R1 的内存单元中的数据移动到R2中\nMOV [R0],R2\nMOV R2,[R0,R1]\nMOV N,R0 ;将立即数N移动至R0中，立即数位数为16bit\n\nADD R0,R1,R2 ;将R0与R1做加法运算，结果存至R2中\nADD R0,R1,R2 - FLAG ;同上，并且影响标志位\n\nJNZ R0,R1,R2 ;若标志位ZF为0，则执行 ADD R0,R1,R2 指令。\nJZ  R0,R1    ;若标志位ZF为1，则将R0 复制给R1\n注：若将最后一个寄存器换做 R7，则可完成对程序流程的跳转。\n\n--------------------------\n由于电路太过庞大，单机玩家请在地图中心的操作台启动机器，并保持在那里，以免局部电路失效导致死机或停机。\n地图中央的操作台有一个按钮，一个拉杆，两个红石灯。分别为启动按钮和停机拉杆，两个红石灯分别用于指示停机拉杆状态和停机状态。\n当停机拉杆处于非激活状态，按下启动按钮，机器即启动。\n在机器启动后，激活停机拉杆，等待一段时间，待停机指示灯闪烁一下，则表示机器已停止。\n在停机拉杆被激活的状态下按动启动按钮无效，虽然停机指示灯也会闪烁一下。\n\n\n\n\n内存中前15个字中存放了内存检测程序，是测试时用的\n汇编程序如下：\nmov 15,r0\nmov 1,r1\nsub r0,r0,r2\nmov -7,r6\nmov [r0+r2],r3 ;循环起始\nnor r3,r3,r4\nmov r4,[r0,r2]\nmov [r0,r2],r3\nsub r3,r4,r3 F;影响标志位\nadd r1,r2,r2 ;不影响标志位\njz r7,r6,r7 ;若结果为0，则跳跃至前面 循环起始 位置\nnor r5,r5,r5 ;除非出错，否则不应执行到这里\n\n\n显示屏在制作中，以后会持续更新\n\n\n\n\n\n\n\n\n\n[groupid=143]The Redpixel[/groupid]",
    "replies": [
        {
            "author": "fzh5837302",
            "timestamp": 1411542120,
            "txt_content": "火钳留名，- -可以操作什么内容呢"
        },
        {
            "author": "shangeng",
            "timestamp": 1411542660,
            "txt_content": "虽然理论上支持比较器的就可以玩，但是电脑配置也有相当的要求吧？不然一运行就要死机哦。"
        },
        {
            "author": "捌柒",
            "timestamp": 1411543080,
            "txt_content": "精前留名=。=（莫打我）"
        },
        {
            "author": "罗rt",
            "timestamp": 1411543500,
            "txt_content": "哇塞！lz把我吓到了"
        },
        {
            "author": "进击的mzh",
            "timestamp": 1411543560,
            "txt_content": "好厉害的感觉"
        },
        {
            "author": "Angelia777",
            "timestamp": 1411543620,
            "txt_content": "膜拜大触！非尔等凡夫俗子所比拟。\n{:10_517:}{:10_517:}{:10_517:}"
        },
        {
            "author": "514398542",
            "timestamp": 1411544880,
            "txt_content": "妈妈问我 为什么跪着玩电脑？"
        },
        {
            "author": "176q72x",
            "timestamp": 1411545480,
            "txt_content": "这么多红石我的电脑肯定带不起来"
        },
        {
            "author": "昵称能吃吗",
            "timestamp": 1411545960,
            "txt_content": "重点是无命令方块"
        },
        {
            "author": "jjxxz2",
            "timestamp": 1411547100,
            "txt_content": "好可怕！我连计算器都不会做"
        },
        {
            "author": "2573786055",
            "timestamp": 1411547820,
            "txt_content": "shangeng 发表于 2014-9-24 15:11\n虽然理论上支持比较器的就可以玩，但是电脑配置也有相当的要求吧？不然一运行就要死机哦。 ...\n上回我下载了一个命令方块计算器存档，进去后几秒钟就卡死，并且闪退。。。"
        },
        {
            "author": "luke36",
            "timestamp": 1411548240,
            "txt_content": "请问能干嘛。。。"
        },
        {
            "author": "黑椒牛排",
            "timestamp": 1411549140,
            "txt_content": "好屌丝的样子"
        },
        {
            "author": "Simon-Riley",
            "timestamp": 1411549320,
            "txt_content": "哇大触你这么叼你家人知道么"
        },
        {
            "author": "jianghr",
            "timestamp": 1411550820,
            "txt_content": "后排预定，等更新完毕后回复我予以评分。"
        },
        {
            "author": "a3160012",
            "timestamp": 1411551180,
            "txt_content": "电脑终于出现了！"
        },
        {
            "author": "mai20001225",
            "timestamp": 1411562460,
            "txt_content": "Simon-Riley 发表于 2014-9-24 17:02\n哇大触你这么叼你家人知道么\n你头像为啥像\"葛炮\"= =？"
        },
        {
            "author": "shangeng",
            "timestamp": 1411565820,
            "txt_content": "2573786055 发表于 2014-9-24 16:37\n上回我下载了一个命令方块计算器存档，进去后几秒钟就卡死，并且闪退。。。 ...\n看来这样的作品只能远观了。"
        },
        {
            "author": "2573786055",
            "timestamp": 1411565880,
            "txt_content": "shangeng 发表于 2014-9-24 21:37\n看来这样的作品只能远观了。\n要么是存档强大，要么是我家电脑渣。"
        },
        {
            "author": "Siri",
            "timestamp": 1411570260,
            "txt_content": "嗯 支持个"
        },
        {
            "author": "Siri",
            "timestamp": 1411570800,
            "txt_content": " 本帖最后由 Siri 于 2014-9-25 08:26 编辑 \n\n今天丢到TimeLine"
        },
        {
            "author": "GKF",
            "timestamp": 1411571040,
            "txt_content": "游戏里的游戏，好强"
        },
        {
            "author": "叁只番茄",
            "timestamp": 1411571100,
            "txt_content": "新时代红石电脑 16位CPU 显卡横空出世\n512byte内存与显存带给你极致体验_(:з」∠)_\n\n到最后如果不影响的话可以找个大触撸一个i7和295x2的外壳233333\n啊不对 295x2那是双芯 虽然窝是AMD狂热者 但为了实际点还是titanZ好惹=-="
        },
        {
            "author": "59852364",
            "timestamp": 1411598580,
            "txt_content": "mark一个，完成后求下载\nMC·红石计算机·贪吃蛇   lol"
        },
        {
            "author": "liujian017",
            "timestamp": 1411602060,
            "txt_content": "看起来非常叼  不过下载在哪……"
        },
        {
            "author": "Minecraft",
            "timestamp": 1411660140,
            "txt_content": "好厉害呀 摸摸达{:10_512:}"
        },
        {
            "author": "PTmissionary",
            "timestamp": 1411696860,
            "txt_content": "萌的说。"
        },
        {
            "author": "delanz",
            "timestamp": 1411709520,
            "txt_content": "给跪了。。。。。。。。。。。。。。。。。。"
        },
        {
            "author": "reezhu",
            "timestamp": 1411766040,
            "txt_content": "硬件完全不懂，看起来很不错的样子"
        },
        {
            "author": "nio-on_cyc",
            "timestamp": 1411793760,
            "txt_content": "HW+++++++++++++++++++++++++++++++\nTRP+++++++++++++++++++++++++++++++"
        },
        {
            "author": "真的游客",
            "timestamp": 1411797360,
            "txt_content": "66666666666大触我们做朋友吧~~~~"
        },
        {
            "author": "天华残月",
            "timestamp": 1411802280,
            "txt_content": "我突然想要删游戏了，这个世界太可怕了"
        },
        {
            "author": "gm20082008",
            "timestamp": 1411869840,
            "txt_content": "标记标记"
        },
        {
            "author": "leveldada",
            "timestamp": 1411898040,
            "txt_content": "这个厉害 期待更新显示屏"
        },
        {
            "author": "csjz0805",
            "timestamp": 1411944960,
            "txt_content": "大神，你能不能给再屌丝点，\n在这游戏里，我似乎看到了未来游戏的发展方向，\n难怪微软花25亿，做好了，可以独霸天下"
        },
        {
            "author": "linnaea",
            "timestamp": 1411947720,
            "txt_content": "浓浓的ARM既视感"
        },
        {
            "author": "渣滓路过",
            "timestamp": 1411984440,
            "txt_content": "遥望                                 "
        },
        {
            "author": "creative",
            "timestamp": 1415113440,
            "txt_content": "mc电脑的缺陷：\n1.输入特别慢，特别是在无命令方块时\n2.区块加载永远的痛\n3.色彩（没有命令方块甚至只能单色----希望有人出丧心病狂的材质包[方块全部变成颜色]或mod）\n话说玩8192这储存器hold住吗、而且这个电脑编程难度~~~~~噩梦级"
        },
        {
            "author": "云小龙",
            "timestamp": 1415140740,
            "txt_content": "太深奥了吧"
        },
        {
            "author": "妄想者",
            "timestamp": 1415535240,
            "txt_content": "红石渣吓到了"
        },
        {
            "author": "milky~way",
            "timestamp": 1423301880,
            "txt_content": "大触我来了～"
        },
        {
            "author": "kiands",
            "timestamp": 1502434260,
            "txt_content": "大佬请收下膝盖"
        },
        {
            "author": "楪祈YeQi",
            "timestamp": 1502438880,
            "txt_content": "不会 太蓝了qwq"
        },
        {
            "author": "羽星缘",
            "timestamp": 1502446020,
            "txt_content": "可怕可怕~~"
        },
        {
            "author": "1368552027",
            "timestamp": 1502469720,
            "txt_content": "很棒啊"
        },
        {
            "author": "BlackCB.",
            "timestamp": 1502849580,
            "txt_content": "我怎么觉得MC装了这个地图后有点奇怪呢"
        },
        {
            "author": "§4我哈啊",
            "timestamp": 1502869140,
            "txt_content": "可惜这些计算机太大了，计算机配置高的同时，真实的计算机的配置需要大幅度的提升。\n我认为不需要这么好的配置，真正可以实现计算机，模拟计算机就可以了。"
        },
        {
            "author": "Create_Dreams",
            "timestamp": 1503061320,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        }
    ]
}