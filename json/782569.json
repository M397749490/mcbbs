{
    "title": "求个指令延迟器写法",
    "author": "805781737",
    "replyCount": 4,
    "timestamp": 1518865200,
    "txt_content": "比如让\n  res tp a 可以延迟5分钟\n  res tp b 可以延迟10分钟\n",
    "replies": [
        {
            "author": "狡诈师",
            "timestamp": 1518865980,
            "txt_content": "延时任务\nBukkit.getScheduler().scheduleSyncDelayedTask(main.getPlugin(main.class), new Runnable(){\n                    //@Override\n                    public void run() {\n                    //运行\n                    }\n}, 20L); //20L在Minecraft是1秒复制代码\n"
        },
        {
            "author": "ddyy163",
            "timestamp": 1518869400,
            "txt_content": "你写一个依赖领地插件的附属\n\n然后:\n\nPluginCommand respc = Bukkit.getPluginCommand(\"res\");\nCommandExecutor res = respc.getExecutor();\nrespc.setExecutor(new CommandExecutor() {\n    @Override\n    public boolean onCommand(CommandSender sender, Command cmd, String s, String[] args) {\n         if (args.length == 2 && args[0].equalsIgnoreCase(\"tp\")) {\n            new BukkitRunnable() {\n               @Override\n               public void run() {\n                  res.onCommand(sender,cmd,s,args);\n                  }\n               }.runTaskLater(插件主类,延迟秒数*20);\n               return true;\n         }else {\n            return res.onCommand(sender,cmd,s,args);\n         }\n    }\n });复制代码\n\n什么原理自己琢磨琢磨"
        },
        {
            "author": "耗子",
            "timestamp": 1518877980,
            "txt_content": " 本帖最后由 耗子 于 2018-2-17 22:43 编辑 \n\n我想楼主想要的是，执行该指令后，一段时间内不能再次执行该指令的功能import java.util.HashMap;\nimport java.util.Map;\n\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Plugin extends JavaPlugin {\n        \n        private Map<Player, Long> playerLastExecutionTime = new HashMap<>();\n        private long limitTime = 1000 * 60 * 5; // 5分钟\n\n        @Override\n        public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n                if(sender instanceof Player) {\n                        Player player = (Player) sender;\n                        long currentTime = System.currentTimeMillis();\n                        if(!playerLastExecutionTime.containsKey(player) || playerLastExecutionTime.get(player) <= currentTime) {\n                                playerLastExecutionTime.put(player, currentTime + limitTime);\n                                //do something...\n                        }\n                }\n                return false;\n        }\n}复制代码\n"
        },
        {
            "author": "HMTD",
            "timestamp": 1519208760,
            "txt_content": "监听执行事件\n主类添加Map<String,String>\n玩家执行时检测Map里面是否含有符合用户名与命令对应的键和值\n如果有则拦截\n没有就添加\n添加同时建立一个线程倒计时，时间到了以后就从Map里面移除对应的键和值"
        }
    ]
}