{
    "title": "如何监听玩家空手对空气的右键？",
    "author": "一条末鱼",
    "replyCount": 18,
    "timestamp": 1534943640,
    "txt_content": "PlayerInteractEvent试过了，只能监听空手对方块左右键以及空手对空气的左键监听，为什么右键就不行呢\n有没有什么方法可以监听空手对空气的右键？",
    "replies": [
        {
            "author": "子德",
            "timestamp": 1534944180,
            "txt_content": "右键貌似是不会给服务器传包的？\n试试通过发包在玩家面前创建屏障？"
        },
        {
            "author": "‮rehctaCykS‭",
            "timestamp": 1534944180,
            "txt_content": "                if(e.getAction().equals(Action.RIGHT_CLICK_AIR)) {\n                        if(e.getPlayer().getItemInHand().equals(Material.AIR)) {\n                                \n                        }\n                }"
        },
        {
            "author": "一条末鱼",
            "timestamp": 1534944540,
            "txt_content": "针织薄外套 发表于 2018-8-22 21:23\nif(e.getAction().equals(Action.RIGHT_CLICK_AIR)) {\n                        if(e.getPlayer().getItemInHand().equals(Mate ...\n没用的，连监听都监听不了，更不用说加if了"
        },
        {
            "author": "鬼畜畜",
            "timestamp": 1534945020,
            "txt_content": " 本帖最后由 Ghost_chu 于 2018-8-22 21:38 编辑 \n\n如果是空气的话或者这个点击操作在原版中不会发生任何事情 那么这个事件传出来就是被cancel掉的 你普通监听当然是监听不到的\n\n把你的EventHandler改成这样子\n\n@EventHandler(ignoreCancelled=true)复制代码\n通知Bukkit你要监听包括被取消的事件"
        },
        {
            "author": "一条末鱼",
            "timestamp": 1534945560,
            "txt_content": " 本帖最后由 一条末鱼 于 2018-8-22 21:49 编辑 \nGhost_chu 发表于 2018-8-22 21:37\n如果是空气的话或者这个点击操作在原版中不会发生任何事情 那么这个事件传出来就是被cancel掉的 你普通监听 ... @EventHandler(ignoreCancelled=true)\n        \n        public void onInteract(PlayerInteractEvent e) {\n                \n                if(e.getItem()==null) {\n                        \n                        if(e.getAction().equals(Action.RIGHT_CLICK_AIR)) {\n                                \n                                e.getPlayer().sendMessage(\"你空手对空气右键\");\n                                \n                        }\n                        \n                }复制代码没用啊，还是监听不了"
        },
        {
            "author": "‮rehctaCykS‭",
            "timestamp": 1534946040,
            "txt_content": "Ghost_chu 发表于 2018-8-22 21:37\n如果是空气的话或者这个点击操作在原版中不会发生任何事情 那么这个事件传出来就是被cancel掉的 你普通监听 ...\nignoreCancelled=true\n这条的意思是忽略掉被cancel掉的事件了，并不是要监听被取消的事件..\n效果类似于if(e.isCancelled()) return;"
        },
        {
            "author": "鬼畜畜",
            "timestamp": 1534946280,
            "txt_content": " 本帖最后由 Ghost_chu 于 2018-8-22 22:01 编辑 \n针织薄外套 发表于 2018-8-22 21:54\nignoreCancelled=true\n这条的意思是忽略掉被cancel掉的事件了，并不是要监听被取消的事件..\n效果类似于if ...\n建议你自己读一下Bukkit doc加上这个 Bukkit就连带被取消的事件一起发过来 不加 被取消的就不会给你 直接跳过"
        },
        {
            "author": "鬼畜畜",
            "timestamp": 1534946340,
            "txt_content": " 本帖最后由 Ghost_chu 于 2018-8-22 22:00 编辑 \n一条末鱼 发表于 2018-8-22 21:46\n没用啊，还是监听不了\n手里拿的东西不会是null\n应该是Material.AIR\n用下面这个代码你可以很直观的看到区别\n\n@EventHandler(ignoreCancelled=true)\n        \n        public void onInteract(PlayerInteractEvent e) {\n               e.getPlayer().sendMessage(\"监听到事件了\");\n                \n                if(e.getItem()==null) {\n                        \n                        if(e.getAction().equals(Action.RIGHT_CLICK_AIR)) {\n                                \n                                e.getPlayer().sendMessage(\"你永远看不见这句话发送给玩家 因为没有物品也不会返回NULL\");\n                                \n                        }\n                  if(e.getItem()==Material.AIR) {\n                        \n                        if(e.getAction().equals(Action.RIGHT_CLICK_AIR)) {\n                                \n                                e.getPlayer().sendMessage(\"嗨 你空手右键了\");\n                                \n                        }\n                        \n                }复制代码"
        },
        {
            "author": "‮rehctaCykS‭",
            "timestamp": 1534946940,
            "txt_content": " 本帖最后由 针织薄外套 于 2018-8-22 22:10 编辑 \nGhost_chu 发表于 2018-8-22 21:58\n建议你自己读一下Bukkit doc加上这个 Bukkit就连带被取消的事件一起发过来 不加 被取消的就不会给你 直接 ...\n打扰了..但是我简单测试了以下代码\n@EventHandler(priority = EventPriority.LOWEST)\n        public void on0(PlayerInteractEvent e) {\n                e.setCancelled(true);\n        }\n        @EventHandler(priority = EventPriority.MONITOR)\n        public void on1(PlayerInteractEvent e) {\n                if(e.isCancelled()) e.getPlayer().sendMessage(\"Cancelled1\");\n        }\n        @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n        public void on2(PlayerInteractEvent e) {\n                if(e.isCancelled()) e.getPlayer().sendMessage(\"Cancelled2\");\n        }\n        @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = false)\n        public void on3(PlayerInteractEvent e) {\n                if(e.isCancelled()) e.getPlayer().sendMessage(\"Cancelled3\");\n        }复制代码\n结果确实是\nCancelled3\nCancelled1复制代码"
        },
        {
            "author": "一条末鱼",
            "timestamp": 1534947420,
            "txt_content": "Ghost_chu 发表于 2018-8-22 21:59\n手里拿的东西不会是null\n应该是Material.AIR\n用下面这个代码你可以很直观的看到区别\nignoreCancelled=true加了也不行啊"
        },
        {
            "author": "GiNYAi",
            "timestamp": 1534948200,
            "txt_content": " 本帖最后由 GiNYAi 于 2018-8-22 22:35 编辑 \n\n看了一下 原版 （1.12.2） 手持物品为空 右键空气 是不会给服务器发送数据的\nForge的事件似乎也不能在服务器生效"
        },
        {
            "author": "一条末鱼",
            "timestamp": 1534997640,
            "txt_content": "GiNYAi 发表于 2018-8-22 22:30\n看了一下 原版 （1.12.2） 手持物品为空 右键空气 是不会给服务器发送数据的\nForge的事件似乎也不能在服务 ...\n那可不可以通过模组发包来实现监听右键？"
        },
        {
            "author": "GiNYAi",
            "timestamp": 1535009880,
            "txt_content": "一条末鱼 发表于 2018-8-23 12:14\n那可不可以通过模组发包来实现监听右键？\n通过模组自然很容易实现，但是代价呢。\n（代价就是需要专用客户端"
        },
        {
            "author": "lliiooll",
            "timestamp": 1535692560,
            "txt_content": "                        if (act.equals(Action.RIGHT_CLICK_AIR)){\n                                //右键\n                        }\n                        if (act.equals(Action.LEFT_CLICK_AIR)){\n                                //左键\n                        }"
        },
        {
            "author": "Gyzer",
            "timestamp": 1535702400,
            "txt_content": "一条末鱼 发表于 2018-8-22 21:46\n没用啊，还是监听不了\n你是不是忘记注册监听器了？\n\npublic void onEnable()\n{\nBukkit.getPluginManager().registerEvents(new 监听器类的名称(), this);\n}"
        },
        {
            "author": "Himmelt",
            "timestamp": 1536985020,
            "txt_content": "空手右键空气事件不会发送给服务端，因为这在原版里是一个无效的动作，只有客户端才能监听到。"
        },
        {
            "author": "Himmelt",
            "timestamp": 1536985080,
            "txt_content": "Ghost_chu 发表于 2018-8-22 21:37\n如果是空气的话或者这个点击操作在原版中不会发生任何事情 那么这个事件传出来就是被cancel掉的 你普通监听 ...\n(ignoreCancelled=true)\n是  忽略取消的事件   ，和你说的正好相反吧。"
        },
        {
            "author": "1041057958",
            "timestamp": 1537322880,
            "txt_content": "你可以尝试一下解剖插件"
        }
    ]
}