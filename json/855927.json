{
    "title": "ColorMOTD的smode忽视权限问题",
    "author": "qq794195711",
    "replyCount": 13,
    "timestamp": 1554597660,
    "txt_content": "\n\n\n\n\nQQ截图20190407082516.jpg (11.75 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-7 08:27 上传\n\n\n\n\n\n\n\n\n\nQQ截图20190407083011.jpg (65.17 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-7 08:29 上传\n\n\n\n\n\n\n\n\n\n\n\nQQ截图20190407082950.jpg (38.64 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-7 08:29 上传\n\n\n\n\n\n\n如图，权限是有的。权限节点我也特意看了下原贴和插件，对比了下。\n之前我是有连enter的节点也给了的，还是不行，维护的smode开启，拥有这些权限的玩家被拒绝进入。\n我是想防假人的，用菜单玩家自行升级自己的用户组，用bs菜单，manuadd 用户 组，这样添加的。\n遇到假人直接开启smode这样的想法（因为我昨天才遇到）。\n权限组我确认弄的应该是对的，因为同组其他权限都可以用，就是这个权限无效。\nOP权限可以忽视这个，但是总不能都给OP吧。\n前置的ProtocolLib插件我也安装了，版本3.7.0，官方推荐1.7.10用这个。\n插件本体版本是1.5.3。\n哪位老铁给解一下惑。\n\n@andylizi\n",
    "replies": [
        {
            "author": "叽叽小石头",
            "timestamp": 1554600900,
            "txt_content": " 本帖最后由 PY狗 于 2019-4-7 09:36 编辑 \n\n权限给错了是colormotd.smode.enter不是colormotd.smode.join"
        },
        {
            "author": "顽石",
            "timestamp": 1554604440,
            "txt_content": "提示: 该帖被管理员或版主屏蔽"
        },
        {
            "author": "andylizi",
            "timestamp": 1554644040,
            "txt_content": "楼上正解。。权限节点是colormotd.smode.join复制代码而不是 enter...可能是我写帖子时写错了。"
        },
        {
            "author": "qq794195711",
            "timestamp": 1554644220,
            "txt_content": "andylizi 发表于 2019-4-7 21:34\n楼上正解。。权限节点是  而不是 enter...可能是我写帖子时写错了。\n我给了权限了，是join，但是还是不能用，看我上面图片。\n给join我之前jdgui看了下，是给的join"
        },
        {
            "author": "andylizi",
            "timestamp": 1554644400,
            "txt_content": "qq794195711 发表于 2019-4-7 21:37\n我给了权限了，是join，但是还是不能用，看我上面图片。\n给join我之前jdgui看了下，是给的join ...\n那就比较奇怪了啊，毕竟代码里写的清清楚楚，这么简单的逻辑理论上不应该出问题……\n\n要不试一下这三点：\n1. OP能不能进入\n2. 不通过权限组，而是单独给一个玩家权限，看看能不能进入\n3. 给权限组里加一个其他的权限，比如 reload 的，然后请一个玩家确认一下看他能不能用这个指令。\n\n如果1都不行的话那就是其他的原因导致玩家无法进入了。毕竟 isOp() 判断怎么可能出问题\n如果2可以的话那就是权限插件/权限插件设置的问题。\n如果3可以的话……嘛那我也想不出能是怎么样了。真的发生了再说吧……"
        },
        {
            "author": "qq794195711",
            "timestamp": 1554645000,
            "txt_content": " 本帖最后由 qq794195711 于 2019-4-7 21:52 编辑 \nandylizi 发表于 2019-4-7 21:40\n那就比较奇怪了啊，毕竟代码里写的清清楚楚，这么简单的逻辑理论上不应该出问题……\n\n要不试一下这三点： ...\n\n\n\n\nQQ截图20190407214856.jpg (163.49 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-7 21:49 上传\n\n\n\n\n\n\n\n\nQQ截图20190407215305.jpg (8.31 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-7 21:52 上传\n\n\n\n\n\n试了好久，这我刚试过的。我把我自己的组降级到builder。\ndeop，上了join权限节点给我的号，开smode，进服，不行。\nop是可以忽视权限的，维护的情况下OP可以进。\n"
        },
        {
            "author": "andylizi",
            "timestamp": 1554645420,
            "txt_content": "qq794195711 发表于 2019-4-7 21:50\n试了好久，这我刚试过的。我把我自己的组降级到builder。\ndeop，上了join权限节点给我的号，开smode，进 ...\n仔细想了想。我猜到怎么回事了……\n这个权限判断是在 PlayerLoginEvent 的时候触发的，而ess的权限管理是在 PlayerJoinEvent 时才触发的，所以那个时候权限还没有被填充。。\n\n说实话，这个就比较尴尬了。我想不出能怎么避开这个问题。。或许 PermissionEx 使用的是不同的逻辑？手边没插件没法确认。如果它也不行的话可能只能放弃使用维护模式反压测这个想法了。"
        },
        {
            "author": "qq794195711",
            "timestamp": 1554645540,
            "txt_content": "andylizi 发表于 2019-4-7 21:57\n仔细想了想。我猜到怎么回事了……\n这个权限判断是在 PlayerLoginEvent 的时候触发的，而ess的权限管理是 ...\n行吧，我想想别的办法。谢了，大佬。或许我换个权限插件看看吧。"
        },
        {
            "author": "andylizi",
            "timestamp": 1554645660,
            "txt_content": "qq794195711 发表于 2019-4-7 21:59\n行吧，我想想别的办法。谢了，大佬。\n但其实这么想来，我记得以前在 mcbbs 见到过一个功能类似“有特定权限的玩家可以进入满人的服务器”的插件。用来鼓励玩家氪金的。那个的原理应该也是在玩家进入之前检测权限才对，为什么它就可以？"
        },
        {
            "author": "qq794195711",
            "timestamp": 1554645780,
            "txt_content": "andylizi 发表于 2019-4-7 22:01\n但其实这么想来，我记得以前在 mcbbs 见到过一个功能类似“有特定权限的玩家可以进入满人的服务器”的插 ...\n这就触及到我的知识盲区了。\n我这个只会用，会看看代码，分析就不行了。"
        },
        {
            "author": "qq794195711",
            "timestamp": 1554646500,
            "txt_content": "andylizi 发表于 2019-4-7 22:01\n但其实这么想来，我记得以前在 mcbbs 见到过一个功能类似“有特定权限的玩家可以进入满人的服务器”的插 ...\n是不是你这个处理玩家加入事件优先级太高了，高到ess还没有来得及处理玩家加入事件就直接kick玩家了呢？"
        },
        {
            "author": "andylizi",
            "timestamp": 1554715680,
            "txt_content": "qq794195711 发表于 2019-4-7 22:15\n是不是你这个处理玩家加入事件优先级太高了，高到ess还没有来得及处理玩家加入事件就直接kick玩家了呢？ ...\n……这有可能。但具体是不是这样恐怕得写个测试用的插件试一下才知道。"
        },
        {
            "author": "qq794195711",
            "timestamp": 1554719460,
            "txt_content": " 本帖最后由 qq794195711 于 2019-4-8 18:38 编辑 \nandylizi 发表于 2019-4-8 17:28\n……这有可能。但具体是不是这样恐怕得写个测试用的插件试一下才知道。 ...\n我用其他的方法防假人了，等有空我改改，自己再试试吧。个人感觉就是这个原因，因为你的colormotd玩家加入事件用的是最高级，满人进服用不是最高级。有空我自己编译下再试试吧。\n谢了大佬。\n"
        }
    ]
}