{
    "title": "MC forge 1.7.10 如何在放置方块时可以自动设置方块方向，如熔炉",
    "author": "Himmelt",
    "replyCount": 6,
    "timestamp": 1457671200,
    "txt_content": "MC forge 1.7.10 如何在放置方块时可以自动设置方块方向，如熔炉.\n在放置时，被放置方块的朝向是指向玩家所在的方向。\n新手，已经百度谷歌了很久，没有找到答案，源码尚不熟悉，不知道该去哪个地方找。希望有大神指点一二。\n\n",
    "replies": [
        {
            "author": "土球球",
            "timestamp": 1457677620,
            "txt_content": "BlockFurnace类有一个名为onBlockPlacedBy的方法，这个方法会检测放置这个熔炉的玩家的方向，你可以试试。"
        },
        {
            "author": "Himmelt",
            "timestamp": 1457677860,
            "txt_content": "ustc_zzzz 发表于 2016-3-11 14:27\nBlockFurnace类有一个名为onBlockPlacedBy的方法，这个方法会检测放置这个熔炉的玩家的方向，你可以试试。 ...\nQwQ，大神！！ 好，我试试"
        },
        {
            "author": "Himmelt",
            "timestamp": 1457679960,
            "txt_content": "ustc_zzzz 发表于 2016-3-11 14:27\nBlockFurnace类有一个名为onBlockPlacedBy的方法，这个方法会检测放置这个熔炉的玩家的方向，你可以试试。 ...\n小弟愚笨，这些参数名看不懂啊\n\n    /**\n     * Called when the block is placed in the world.\n     */\n    public void onBlockPlacedBy(World p_149689_1_, int p_149689_2_, int p_149689_3_, int p_149689_4_, EntityLivingBase p_149689_5_, ItemStack p_149689_6_)\n    {\n        int l = MathHelper.floor_double((double)(p_149689_5_.rotationYaw * 4.0F / 360.0F) + 0.5D) & 3;\n\n        if (l == 0)\n        {\n            p_149689_1_.setBlockMetadataWithNotify(p_149689_2_, p_149689_3_, p_149689_4_, 2, 2);\n        }\n\n        if (l == 1)\n        {\n            p_149689_1_.setBlockMetadataWithNotify(p_149689_2_, p_149689_3_, p_149689_4_, 5, 2);\n        }\n\n        if (l == 2)\n        {\n            p_149689_1_.setBlockMetadataWithNotify(p_149689_2_, p_149689_3_, p_149689_4_, 3, 2);\n        }\n\n        if (l == 3)\n        {\n            p_149689_1_.setBlockMetadataWithNotify(p_149689_2_, p_149689_3_, p_149689_4_, 4, 2);\n        }\n\n        if (p_149689_6_.hasDisplayName())\n        {\n            ((TileEntityFurnace)p_149689_1_.getTileEntity(p_149689_2_, p_149689_3_, p_149689_4_)).func_145951_a(p_149689_6_.getDisplayName());\n        }\n    }\n复制代码\n\n我想做一个可以根据玩家的朝向而决定朝向的方块，还有就是这种情况下1.7.10的材质应该怎么设置啊。"
        },
        {
            "author": "Himmelt",
            "timestamp": 1457698680,
            "txt_content": "ustc_zzzz 发表于 2016-3-11 14:27\nBlockFurnace类有一个名为onBlockPlacedBy的方法，这个方法会检测放置这个熔炉的玩家的方向，你可以试试。 ...\n大神，我又遇到问题了=-= 求教\n    /**\n     * Gets the block's texture. Args: side, meta\n     */\n    @SideOnly(Side.CLIENT)\n    public IIcon getIcon(int p_149691_1_, int p_149691_2_)\n    {\n        return p_149691_1_ == 1 ? this.field_149984_b : (p_149691_1_ == 0 ? this.field_149984_b : (p_149691_2_ == 2 && p_149691_1_ == 2 ? this.field_149986_M : (p_149691_2_ == 3 && p_149691_1_ == 5 ? this.field_149986_M : (p_149691_2_ == 0 && p_149691_1_ == 3 ? this.field_149986_M : (p_149691_2_ == 1 && p_149691_1_ == 4 ? this.field_149986_M : this.blockIcon)))));\n    }复制代码\n这个方法在什么时候什么地方被调用啊，我加了个log输出，结果满屏跑。还有，它的第二个参数meta是啥意思啊TvT"
        },
        {
            "author": "a970695276",
            "timestamp": 1463924220,
            "txt_content": "Himmelt 发表于 2016-3-11 20:18\n大神，我又遇到问题了=-= 求教\n\n这个方法在什么时候什么地方被调用啊，我加了个log输出，结果满屏跑。还 ...\n你这样写明显不对啊，这个是方法是在渲染时需要用到材质的时候调用，你添加LOGMC一秒渲染20次就输出二十次，实话说代码太长懒得看，\nreturn p_149691_1_==1?icon1:(p_149691_1_==0?icon2:(p_149691_1_!=p_149691_2_?icon3:icon4));\n这是个例子，直接抄熔炉的，不难"
        },
        {
            "author": "135600",
            "timestamp": 1471415820,
            "txt_content": "无聊说几句，里面的0~5是6个面，记得是下上北南西东。底下的IIcon的是判断不同面返回不同的贴图。和placeby互相呼应。"
        }
    ]
}