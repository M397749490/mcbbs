{
    "title": "简单的rcon——当python爱上rcon",
    "author": "MeTerminator",
    "replyCount": 6,
    "timestamp": 1554448380,
    "txt_content": " 本帖最后由 jiazhengkun 于 2019-4-5 15:53 编辑 \npython作为一种简单而强大的语言，我闲的无聊，做了一个只有2.77KB的rcon工具，方便，简单，支持中文。\n\n\n启动方式:python run.py <IP> <端口> <密码>\n\n\n\n\n\n批注 2019-04-05 150423.jpg (260.09 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-5 15:05 上传\n\n\n\n\n\n\n\n\n批注 2019-04-05 150137.jpg (224.27 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-5 15:05 上传\n\n\n\n\n\n\n\n\n批注 2019-04-05 150257.jpg (116.01 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-5 15:05 上传\n\n\n\n\n\n\n\n\n批注 2019-04-05 150049.jpg (55.49 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-5 15:05 上传\n\n\n\n\n\n\n下载地址：https://pan.baidu.com/s/1raYMyrJr7A59l4IU0Wh2Sg\n\n如果你是开发者：\nconnect(ip,端口,密码)\ncommand(执行的命令)\n返回的命令可以用a=command(执行命令)\n这样返回指令就保存到a变量里了\n断开连接disconnect()\n\n代码一览：\n注意：只有更新后的run.py可用！！！原来链接里的run.py失效！！！\n\n\n\nrcon.rar\n(1.4 KB, 下载次数: 66)\n\n\n\n2019-4-5 15:09 上传\n点击文件名下载附件\n\n\n\n\n\n\n<blockquote>import mcrcon复制代码import socket\nimport select\nimport struct\nimport time\n\n\n\nclass MCRconException(Exception):\n    pass\n\nclass MCRcon(object):\n    socket = None\n\n    def connect(self, host, port, password):\n        if self.socket is not None:\n            raise MCRconException(\"Already connected\")\n        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        self.socket.connect((host, port))\n        self.send(3, password)\n\n    def disconnect(self):\n        if self.socket is None:\n            raise MCRconException(\"Already disconnected\")\n        self.socket.close()\n        self.socket = None\n\n    def read(self, length):\n        data = b\"\"\n        while len(data) < length:\n            data += self.socket.recv(length - len(data))\n        return data\n\n    def send(self, out_type, out_data):\n        if self.socket is None:\n            raise MCRconException(\"Must connect before sending data\")\n\n        # 发送请求包\n        out_payload = struct.pack('<ii', 0, out_type) + out_data.encode('utf8') + b'\\x00\\x00'\n        out_length = struct.pack('<i', len(out_payload))\n        self.socket.send(out_length + out_payload)\n\n        # 读取响应包\n        in_data = \"\"\n        while True:\n            # 读包\n            in_length, = struct.unpack('<i', self.read(4))\n            in_payload = self.read(in_length)\n            in_id, in_type = struct.unpack('<ii', in_payload[:8])\n            in_data_partial, in_padding = in_payload[8:-2], in_payload[-2:]\n\n            # 连接检查\n            if in_padding != b'\\x00\\x00':\n                raise MCRconException(\"Incorrect padding\")\n            if in_id == -1:\n                raise MCRconException(\"Login failed\")\n\n            # 记录的响应\n            in_data += in_data_partial.decode('utf8')\n\n            # 如果没有更多的东西要接收，返回响应\n            if len(select.select([self.socket], [], [], 0)[0]) == 0:\n                return in_data\n\n    def command(self, command):\n        result = self.send(2, command)\n        time.sleep(0.003) # MC-72390 的bug让我这样做。。。\n        return result\n\n复制代码\n\n\n\n我不会排版，教我啊！！！\n\n伸手党，肯定在找提取码\n提取码: 6efv \n\n\n\n\n\n\n\n\n\n\nrun.rar\n\n\n2019-4-5 15:52 上传\n点击文件名下载附件\n\n\n\n\n465 Bytes, 下载次数: 31\n\n\n\n\n\n",
    "replies": [
        {
            "author": "Loic",
            "timestamp": 1556969520,
            "txt_content": "牛逼了，作者!支持下，MCbbs有你更精彩~"
        },
        {
            "author": "543355801",
            "timestamp": 1556974080,
            "txt_content": "这代码我咋看着这么眼熟= =https://github.com/laomie233/Minecraft-Rcon"
        },
        {
            "author": "MeTerminator",
            "timestamp": 1557580440,
            "txt_content": "543355801 发表于 2019-5-4 20:48\n这代码我咋看着这么眼熟= =https://github.com/laomie233/Minecraft-Rcon\n不一样哦，我对代码进行了优化，还有原创部分，后续将发布一个远程充值系统。"
        },
        {
            "author": "cangkuai",
            "timestamp": 1559299440,
            "txt_content": "有意义吗发github好一点"
        },
        {
            "author": "AyerKx",
            "timestamp": 1559314320,
            "txt_content": "顶~~~~~~~~~~~~~~~~~~~~~~~~~~~"
        },
        {
            "author": "down_drop",
            "timestamp": 1564892880,
            "txt_content": "java.lang.NullPointerException"
        }
    ]
}