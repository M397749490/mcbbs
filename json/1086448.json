{
    "title": "[原创|开源|前置API][DLL]BDSNetRunner——Win版BDS下.Net扩展插件运行平台[1.16.x]",
    "author": "Xiaohua001",
    "replyCount": 13,
    "timestamp": 1595734020,
    "txt_content": " 本帖最后由 Xiaohua001 于 2020-12-9 17:05 编辑 \n\nBDSNetRunner\n本插件为基于JSRunner运作机制而开发的高级语言扩展平台（DLL类插件）。采用的player的开发方案，需要启动器注入执行。\n开源地址详见 https://github.com/zhkj-liuxiaohua/BDSNetRunner\n介绍\n市面上涌现了一堆又一堆的加载平台，NetRunner只是其中的一款而已。虽然国内加载器乱象已经不是一时的事，无论如何，有需求就有市场。比如，部分开发者觉得c++语言门槛太高，自行去ida寻找hook点位和逆向反编译代码过于困难，维护成本过高；又比如，部分开发者觉得js门槛太低，剽窃成本低，不利于保护劳动所得甚至无利可图。据此，NetRunner应运而生。现在，用户可以使用.Net Framework框架构建自己的.Net插件了！自上而下、或者自下而上的扩展应用，在.Net平台下都能实现。其中，用户可以选择多种语言（vb/c#/c++等）进行开发。推荐使用c#，语法与Java相近，且可无缝编写底层代码实现硬核功能。\n软件架构\n采用Player提供的win版bds插件开发框架。使用微软hook库；JSONCPP库。插件基本运作原理：基于非托管->托管代码交互式操作。hook bds事件点位 -> 转托管代码注册的监听器执行对应程序 -> 取结果决定是否拦截/继续执行。\n主要功能\n提供了一套.Net插件开发的解决方案。加载.Net插件，通过采用监听器注册机制以完成特定事件的处理。一段简单的爆炸事件处理代码如下：// 世界范围爆炸监听，拦截\n                        api.addBeforeActListener(EventKey.onLevelExplode, x => {\n                                Console.WriteLine(\"[CS] type = {0}, mode = {1}, result= {2}\", x.type, x.mode, x.result);\n                                var e = BaseEvent.getFrom(x) as LevelExplodeEvent;\n                                if (e != null) {\n                                        Console.WriteLine(\"位于 {0} ({1},{2},{3}) 的 {4} 试图发生强度 {5} 的爆炸。\",\n                                                e.dimension, e.position.x, e.position.y, e.position.z,\n                                                string.IsNullOrEmpty(e.entity) ? e.blockname : e.entity, e.explodepower);\n                                }\n                                return false;\n                        });复制代码该代码的功能是记录一个爆炸事件在后台并进行拦截。由于采用JSRunner类似的机制，转移你的js插件功能到.Net平台上非常简单，更可基于语言特性构建更强大的上层应用。开源的社区版本已提供了基础api和基础事件监听处理。基于LGPL开源协议发行，更利于开发者实现预期目标和保护自己劳动所得。任何人都可参与贡献提交pull request进行平台的改进。源码开发包里已提供了底层hook调用示例，不想使用c++但又需要自行注册hook事件处理实现高级开发功能的可供参考。相关开发案例详见 https://github.com/zhkj-liuxiaohua/CSRMods\n使用方式\n一、在BDS主服务端所在的根目录下创建CSR文件夹\n\n\n\n\n创建文件夹.png (36.78 KB, 下载次数: 3)\n\n下载附件\n\n2020-7-26 11:06 上传\n\n\n\n\n二、将你构建的.Net插件放置于CSR文件夹内（后缀名为.csr.dll）\n\n\n\n\ncsr插件.png (15.55 KB, 下载次数: 3)\n\n下载附件\n\n2020-7-26 11:09 上传\n\n\n\n\n三、执行启动器，开服，提示csr文件加载成功即可应用你的.Net插件了。\n\n\n\n\n插件加载.png (71.12 KB, 下载次数: 2)\n\n下载附件\n\n2020-7-26 11:18 上传\n\n\n\n\n\n其它\n欢迎提出相关改进意见与建议，还请在本帖留言，或前往 https://github.com/zhkj-liuxiaohua/BDSNetRunner/issues 提出反馈。\n更新日志\n适配版本至1.16.1.2版2020-07-29 完善部分api，修正c#方面接口不正确2020-07-30 调整完善c#字符读取接口2020-08-04 适配版本至1.16.10.2版2020-08-12 适配版本至1.16.20.3版，完善使用物品监听信息；规范string函数接口，加强异常处理2020-08-14 修复维度切换成功时事件数据未刷新的问题2020-08-15 更新模板2020-08-29 启用动态挂载事件监听，修复移动监听崩溃问题2020-09-10 适配版本至1.16.40.2版，添加组件功能，添加强制断连函数2020-10-01 修复重生监听位置不正确，新增防具穿戴监听2020-10-02 新增玩家升级事件监听\n下载\n\n请选择适配您当前BDS服务端版本的插件平台进行下载：\n\n\n\nBDSNetRunner1.16.40.2v3.zip\n(350.85 KB, 下载次数: 51)\n\n\n\n2020-10-2 15:27 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\nBDSNetRunner1.16.20.3v5.zip\n(340.07 KB, 下载次数: 78)\n\n\n\n2020-8-29 03:06 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\nBDSNetRunner1.16.10.2.zip\n(337.28 KB, 下载次数: 32)\n\n\n\n2020-8-4 01:52 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\nBDSNetRunner1.16.1.2v4.zip\n(337.28 KB, 下载次数: 18)\n\n\n\n2020-7-30 09:07 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "Jasonzyt",
            "timestamp": 1595771520,
            "txt_content": "支持1.14的bdx么"
        },
        {
            "author": "Xiaohua001",
            "timestamp": 1595777100,
            "txt_content": "Jasonzyt 发表于 2020-7-26 21:52\n支持1.14的bdx么\n抱歉，版本过老，符号变动较多，基本无法提供早期版本支持了。不过可以参考其他开源插件的历史版本自行编译想要回滚适配的版本。比如参考jsr的开源历史版本。"
        },
        {
            "author": "北斗七星Chk",
            "timestamp": 1595813400,
            "txt_content": "您好，请问是否后续是否会在压缩包中加入示例插件？就像JSR一样？"
        },
        {
            "author": "Xiaohua001",
            "timestamp": 1595822160,
            "txt_content": "北斗七星Chk 发表于 2020-7-27 09:30\n您好，请问是否后续是否会在压缩包中加入示例插件？就像JSR一样？\n这个后续会考虑。这个项目目前还在持续完善中，如果你有更好的改进方案的话，可自行发起pull request。"
        },
        {
            "author": "1314520love",
            "timestamp": 1596290100,
            "txt_content": "装了这个怎么js插件就不能用了"
        },
        {
            "author": "Xiaohua001",
            "timestamp": 1596290340,
            "txt_content": "1314520love 发表于 2020-8-1 21:55\n装了这个怎么js插件就不能用了\n这个插件强制变更了工作目录为bds所在目录。如果要同时使用jsr，请尝试移动js插件到bds所在目录下的js文件夹内试试。"
        },
        {
            "author": "1314520love",
            "timestamp": 1596290880,
            "txt_content": "可以使用了 谢谢"
        },
        {
            "author": "zgsj888",
            "timestamp": 1599392940,
            "txt_content": "不会用，那个压缩包下载下来，里面两个东西，一个放主目录那个dll文件放哪里"
        },
        {
            "author": "doubiovo",
            "timestamp": 1599609120,
            "txt_content": "下载的那几个文件放在哪呐，他都不加载插件"
        },
        {
            "author": "小家伙的零食",
            "timestamp": 1605090060,
            "txt_content": "我用BDXC加载，这个插件倒是加载成功了，但是没法加载格式正确的csr插件，版本1.16.4"
        },
        {
            "author": "Xiaohua001",
            "timestamp": 1605102540,
            "txt_content": "小家伙的零食 发表于 2020-11-11 18:21\n我用BDXC加载，这个插件倒是加载成功了，但是没法加载格式正确的csr插件，版本1.16.4 ...\n暂不支持梦故以外的插件加载器，但如果需要添加支持的可自行发起pull request进行平台的改进。另，据悉bdxc作者提供的完整授权版的bdx(非免费)已可以兼容额外加载player大佬框架开发的dll插件（如JSR、CSR、行为监控dll等），如有需求可咨询作者提供额外加载方式。"
        },
        {
            "author": "派达星",
            "timestamp": 1605747960,
            "txt_content": "真惨，我前天刚从java版转到基岩版开服，选择了BDSNetRunner，写了两个Q群插件，还没用几分钟，客户端更新到1.16.100了。然后说我服务端过期，从java版过来的我一脸懵逼。然后服务器端BDSNetRunner居然不支持1.16.100。那种进军基岩版的火焰，瞬间冻住了。"
        },
        {
            "author": "Xiaohua001",
            "timestamp": 1605772620,
            "txt_content": "派达星 发表于 2020-11-19 09:06\n真惨，我前天刚从java版转到基岩版开服，选择了BDSNetRunner，写了两个Q群插件，还没用几分钟，客户端更新 ...\ngithub上的release里或许有点东西，你可以仔细翻翻。今天上传的玩意，但是还没公开发布。\nhttps://github.com/zhkj-liuxiaohua/BDSNetRunner/releases"
        }
    ]
}