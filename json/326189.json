{
    "title": "关于牌子的插件",
    "author": "ybw0014",
    "replyCount": 10,
    "timestamp": 1408606320,
    "txt_content": "我想写一款插件，就是一个垃圾箱插件，功能是右击一个合法（第一行是[Disposal]且为蓝色，在创建牌子的时候如果第一行是[Disposal]会自动变成蓝色）的牌子会打开垃圾箱，往里面丢东西，然后关掉东西就没了。\n写完测试时遇到一个问题，就是创建牌子以后第一行不变蓝色，求解。\n\n代码（配置文件就是几句提示信息）：\npackage net.nat123.mygunclub.disposal;\n\nimport java.io.File;\nimport org.bukkit.Bukkit;\nimport org.bukkit.ChatColor;\nimport org.bukkit.block.Sign;\nimport org.bukkit.entity.HumanEntity;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.*;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.inventory.Inventory;\nimport org.bukkit.plugin.PluginManager;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Disposal extends JavaPlugin implements Listener{\n    \n    public String pcreate,puse,pbreak,head;\n    File configFile;\n    \n    @Override\n    public void onEnable(){\n        head = ChatColor.translateAlternateColorCodes('&', \"&2[Disposal]\");\n        pcreate = \"disposal.create\";\n        puse = \"disposal.use\";\n        pbreak = \"disposal.break\";\n        saveDefaultConfig();\n        configFile = new File(getDataFolder(), \"config.yml\");\n        if (!configFile.exists()){\n            getConfig().options().copyDefaults(true);\n            saveConfig();\n        }\n        Bukkit.getServer().getPluginManager().registerEvents(this, this);\n        getLogger().info(\"垃圾桶插件已载入，版本1.0，作者ybw0014\");\n    }\n    \n    public void onBlockBreak(BlockBreakEvent e){\n        if (e.getBlock().getState() instanceof Sign){\n            Sign s = (Sign)e.getBlock().getState();\n                if (s.getLine(0).equalsIgnoreCase(ChatColor.translateAlternateColorCodes('&', \"&1[Disposal]\"))){\n                        Player p = e.getPlayer();\n                        if (p.hasPermission(pbreak)){\n                            e.setCancelled(false);\n                        }else{\n                            p.sendMessage(head + ChatColor.translateAlternateColorCodes('&', getConfig().getString(\"nopermsg\")));\n                            e.setCancelled(true);\n                        }\n                }\n        }\n    }\n\n        public void onSignChange(SignChangeEvent e){\n                if (e.getLine(0).equals(\"[Disposal]\")){\n                        Player p = e.getPlayer();\n                        if(p.hasPermission(pcreate)){\n                            e.setLine(0, ChatColor.translateAlternateColorCodes('&', \"&1[Disposal]\"));\n                            p.sendMessage(head + ChatColor.translateAlternateColorCodes('&', getConfig().getString(\"createmsg\")));\n                        }else{\n                            p.sendMessage(head + ChatColor.translateAlternateColorCodes('&', getConfig().getString(\"nopermmsg\")));\n                        }\n                }\n        }\n\n        public void onPlayerInteract(PlayerInteractEvent e){\n                if (e.getAction() != Action.RIGHT_CLICK_BLOCK)\n                        return;\n                if (e.getClickedBlock().getState() instanceof Sign){\n                        Sign s = (Sign)e.getClickedBlock().getState();\n                        if (s.getLine(0).equalsIgnoreCase(ChatColor.translateAlternateColorCodes('&', \"&1[Disposal]\"))){\n                                Player p = e.getPlayer();\n                                if(p.hasPermission(puse)){\n                                    p.sendMessage(ChatColor.translateAlternateColorCodes('&', getConfig().getString(\"nopermsg\")));\n                                }else{\n                                    Inventory inv = Bukkit.createInventory(null, 9, ChatColor.translateAlternateColorCodes('&', \"&a&l垃圾桶\"));\n                                    ((HumanEntity)p).openInventory(inv);\n                                }        \n                        }\n                }\n        }\n        \n        @Override\n        public void onDisable(){\n            getLogger().info(\"垃圾桶插件已卸载，版本1.0，作者ybw0014\");\n        }    \n}\n复制代码\n\n",
    "replies": [
        {
            "author": "起名想到金坷垃",
            "timestamp": 1408607400,
            "txt_content": " 本帖最后由 起名想到金坷垃 于 2014-8-21 16:05 编辑 \n\n我反正看不懂"
        },
        {
            "author": "a8105",
            "timestamp": 1408608300,
            "txt_content": "起名想到金坷垃 发表于 2014-8-21 15:50\n太长不看系列\n水回复自重"
        },
        {
            "author": "a8105",
            "timestamp": 1408608360,
            "txt_content": "把&改成:\n按下Alt键不放\n依次按顺序按下1 6 7\n然后松开Alt键出现的字符"
        },
        {
            "author": "起名想到金坷垃",
            "timestamp": 1408608420,
            "txt_content": "随便点个好友，在QQ对话框中，输入\"我是\"两字， 不要发送. 再按住ALT键， 然后顺序按小键盘29482， 松开ALT键，再按ALT键+S\n几年前整人用的\n按住ALT键不放，再按数字键是输入ASCII的方法，可以输入所有ASCII码，包括不可显示的制表符等等。比如ALT＋13就是回车。同样你输入的数字大于255时，就会显示出《国家标准信息交换用的字符编码GB2312-80》（简称国标区位码）里的字符了，包括汉字等等。\n\n不过我发现，在QQ聊天栏与在记事本里得到效果不完全一样，ALT＋13两者都是回车，但在QQ中，29482是“猪”，29483是“猫”，而在记事本中（在博客的编辑窗口中也是）得到的却分别是：“*”“+”；在QQ中24859是“爱”，而在记事本中却没有反应。这个问题我就弄不清楚了。"
        },
        {
            "author": "ybw0014",
            "timestamp": 1408610280,
            "txt_content": "810587921 发表于 2014-8-21 16:06\n把&改成:\n按下Alt键不放\n依次按顺序按下1 6 7\n这个方法我还真不知道，谢谢了。另外感谢你开发出更多背包这么好的插件，我服里的人自从加了这个插件身上满了也不怕了。"
        },
        {
            "author": "ybw0014",
            "timestamp": 1408610760,
            "txt_content": "810587921 发表于 2014-8-21 16:06\n把&改成:\n按下Alt键不放\n依次按顺序按下1 6 7\n不过还是不行，求大神解答：\npackage net.nat123.mygunclub.disposal;\n\nimport java.io.File;\nimport org.bukkit.Bukkit;\nimport org.bukkit.block.Sign;\nimport org.bukkit.entity.HumanEntity;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.*;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.inventory.Inventory;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Disposal extends JavaPlugin implements Listener{\n    \n    public String pcreate,puse,pbreak,head;\n    File configFile;\n    \n    @Override\n    public void onEnable(){\n        head = \"§2[Disposal]\";\n        pcreate = \"disposal.create\";\n        puse = \"disposal.use\";\n        pbreak = \"disposal.break\";\n        saveDefaultConfig();\n        configFile = new File(getDataFolder(), \"config.yml\");\n        if (!configFile.exists()){\n            getConfig().options().copyDefaults(true);\n            saveConfig();\n        }\n        Bukkit.getServer().getPluginManager().registerEvents(this, this);\n        getLogger().info(\"垃圾桶插件已载入，版本1.0，作者ybw0014\");\n    }\n    \n    public void onBlockBreak(BlockBreakEvent e){\n        if (e.getBlock().getState() instanceof Sign){\n            Sign s = (Sign)e.getBlock().getState();\n                if (s.getLine(0).equalsIgnoreCase(\"§1[Disposal]\")){\n                        Player p = e.getPlayer();\n                        if (p.hasPermission(pbreak)){\n                            e.setCancelled(false);\n                        }else{\n                            p.sendMessage(head + getConfig().getString(\"nopermsg\"));\n                            e.setCancelled(true);\n                        }\n                }\n        }\n    }\n\n        public void onSignChange(SignChangeEvent e){\n                if (e.getLine(0).equals(\"[Disposal]\")){\n                        Player p = e.getPlayer();\n                        if(p.hasPermission(pcreate)){\n                            e.setLine(0, \"§1[Disposal]\");\n                            p.sendMessage(head + getConfig().getString(\"createmsg\"));\n                        }else{\n                            p.sendMessage(head + getConfig().getString(\"nopermmsg\"));\n                        }\n                }\n        }\n\n        public void onPlayerInteract(PlayerInteractEvent e){\n                if (e.getAction() != Action.RIGHT_CLICK_BLOCK)\n                        return;\n                if (e.getClickedBlock().getState() instanceof Sign){\n                        Sign s = (Sign)e.getClickedBlock().getState();\n                        if (s.getLine(0).equalsIgnoreCase(\"§1[Disposal]\")){\n                                Player p = e.getPlayer();\n                                if(!p.hasPermission(puse)){\n                                    p.sendMessage(head + getConfig().getString(\"nopermsg\"));\n                                }else{\n                                    Inventory inv = Bukkit.createInventory(null, 9, \"§a§l垃圾桶\");\n                                    ((HumanEntity)p).openInventory(inv);\n                                }        \n                        }\n                }\n        }\n        \n        @Override\n        public void onDisable(){\n            getLogger().info(\"垃圾桶插件已卸载，版本1.0，作者ybw0014\");\n        }    \n}\n复制代码"
        },
        {
            "author": "a8105",
            "timestamp": 1408610760,
            "txt_content": "ybw0014 发表于 2014-8-21 16:46\n不过还是不行，求大神解答：\n在判断s.getLine(0).equalsIgnoreCase(\"§1[Disposal]\")的前面\n发送信息:\nBukkit.broadcastMessage((s.getLine(0).equalsIgnoreCase(\"§1[Disposal]\"))+\"\");\n就知道判断是否成立了"
        },
        {
            "author": "ybw0014",
            "timestamp": 1408611300,
            "txt_content": "810587921 发表于 2014-8-21 16:46\n在判断s.getLine(0).equalsIgnoreCase(\"§1[Disposal]\")的前面\n发送信息:\nBukkit.broadcastMessage((s.ge ...\n右击牌子根本没信息求解"
        },
        {
            "author": "a8105",
            "timestamp": 1408611600,
            "txt_content": "ybw0014 发表于 2014-8-21 16:55\n右击牌子根本没信息求解\n@EventHandler\npublic void inter(PlayerInteractEvent e);\n你缺个@EventHandler啊= =\n还有其他事件也是"
        },
        {
            "author": "ybw0014",
            "timestamp": 1408611840,
            "txt_content": "810587921 发表于 2014-8-21 17:00\n@EventHandler\npublic void inter(PlayerInteractEvent e);\n你缺个@EventHandler啊= =\n成功了，谢谢！我第一次学习事件。"
        }
    ]
}