{
    "title": "【1.14原版前置模组】NBT工作台",
    "author": "Ph-苯",
    "replyCount": 21,
    "timestamp": 1552741740,
    "txt_content": " 本帖最后由 七刀月复 于 2020-2-8 19:55 编辑 \n\n\n论坛内已有更好的做法：【LAY Studio|CAM开发随笔】如何用datapack更好的模拟原版工作台？https://www.mcbbs.net/thread-947897-1-1.html\n\n前言\nMC原版添加配方的方式无法涉及NBT，然而许多原版模组都需要涉及NBT的合成，于是每个模组都设定了自己的合成方式。但是每个模组一个工作台，不仅要耗费制作者大量精力写一遍别人重复过多次的命令，还要考虑如何不与别人的模组冲突，所以我在此发布一个前置模组，希望能统一各模组的工作台，减少时间浪费。\n效果\nNBT工作台由副手放置原版工作台获得，主手放置的仍然是原版工作台。破坏NBT工作台掉落的仍是原版工作台。\n\n\n\n\nfile_1553348116000.jpg (177.54 KB, 下载次数: 3)\n\n下载附件\n\n2019-3-23 21:34 上传\n\n\n\n\n\n原版工作台和NBT工作台比较：\n\n\n\n\n2019-03-23_21.24.49.png (155.01 KB, 下载次数: 3)\n\n下载附件\n\n2019-3-23 21:34 上传\n\n\n\n\n\nNBT工作台界面：\n\n\n\n\n2019-03-23_21.34.01.png (3.61 KB, 下载次数: 3)\n\n下载附件\n\n2019-3-23 21:44 上传\n\n\n\n\n\n\n\n引用方法\n请自己创建和命名新的函数，复制以下代码并替换关键字，放入自己的数据包中，并将第一个函数加入到nbtr:crafting标签中。\n第一个函数：\n有序合成：\nexecute if block ~ ~ ~ barrel{Items:[所有需要的材料物品，含Slot，不含Count]} unless block ~ ~ ~ barrel{Items:[{Slot:16b}]} run function 第二个函数复制代码3x3的合成栏，从左到右、从上到下的Slot分别是\n1b，2b，3b，\n10b，11b，12b，\n19b，20b，21b。\n无序合成：\nexecute if block ~ ~ ~ barrel{Items:[所有需要的材料物品，不含Count和Slot]} unless block ~ ~ ~ barrel{Items:[{Slot:16b}]} run function 第二个函数复制代码第二个函数：scoreboard objectives add nbtr_sl dummy\nexecute store result score cnt nbtr_sl run data get block ~ ~ ~ Items\nexecute if score cnt nbtr_sl matches 所需的材料物品总数+17 run function 第三个函数\nscoreboard objectives remove nbtr_sl复制代码第三个函数：\nreplaceitem版：tag @s add nbtr_c\nreplaceitem block ~ ~ ~ container.16 成品复制代码loot版：\ntag @s add nbtr_c\nloot replace block ~ ~ ~ container.16 loot 成品战利品表复制代码如果有多个合成表，无论是有序还是无序，第一个函数都可以合并。\n使用NBT工作台时必须同时启用该模组的数据包和资源包。\n\n下载\n数据包\n\n\n\n含NBT配方.datapack.zip\n(10.41 KB, 下载次数: 33)\n\n\n\n2019-3-23 21:47 上传\n点击文件名下载附件\n数据包\n\n\n\n\n\n资源包\n\n\n\n含NBT配方.zip\n(11.87 KB, 下载次数: 26)\n\n\n\n2019-3-23 21:47 上传\n点击文件名下载附件\n资源包\n\n\n\n\n\n\n示例\n有序合成：\n绿宝石镐=绿宝石x3+木棍x2\n第一个函数（nbtr:crafting_table/recipes）（#nbtr:crafting）：\nexecute if block ~ ~ ~ barrel{Items:[{id:\"minecraft:emerald\",Slot:1b},{id:\"minecraft:emerald\",Slot:2b},{id:\"minecraft:emerald\",Slot:3b},{id:\"minecraft:stick\",Slot:11b},{id:\"minecraft:stick\",Slot:20b}]} unless block ~ ~ ~ barrel{Items:[{Slot:16b}]} run function nbtr:crafting_table/recipes_1复制代码第二个函数（nbtr:crafting_table/recipes_1）：\nscoreboard objectives add nbtr_sl dummy\nexecute store result score cnt nbtr_sl run data get block ~ ~ ~ Items\nexecute if score cnt nbtr_sl matches 22 run function nbtr:crafting_table/recipes_4\nscoreboard objectives remove nbtr_sl复制代码第三个函数（nbtr:crafting_table/recipes_4）：\ntag @s add nbtr_c\nreplaceitem block ~ ~ ~ container.16 diamond_pickaxe{display:{Name:'\"§r绿宝石镐\"'}}复制代码\n\n\n\n\n绿宝石镐.png (19.57 KB, 下载次数: 0)\n\n下载附件\n\n2019-3-23 21:45 上传\n\n\n\n\n\n\n无序合成：\n合珍钻=钻石x1+绿宝石x1+铁锭x1+金锭x1\n第一个函数（nbtr:crafting_table/recipes）（#nbtr:crafting）（你可以像我一样把两个合成表的第一个函数合并到同一个函数中，也可以另创新的函数，不过别忘了加标签）：\nexecute if block ~ ~ ~ barrel{Items:[{id:\"minecraft:emerald\"},{id:\"minecraft:diamond\"},{id:\"minecraft:iron_ingot\"},{id:\"minecraft:gold_ingot\"}]} unless block ~ ~ ~ barrel{Items:[{Slot:16b}]} run function nbtr:crafting_table/recipes_2复制代码第二个函数（nbtr:crafting_table/recipes_2）：\nscoreboard objectives add nbtr_sl dummy\nexecute store result score cnt nbtr_sl run data get block ~ ~ ~ Items\nexecute if score cnt nbtr_sl matches 21 run function nbtr:crafting_table/recipes_3\nscoreboard objectives remove nbtr_sl复制代码第三个函数（nbtr:crafting_table/recipes_3）：\ntag @s add nbtr_c\nreplaceitem block ~ ~ ~ container.16 diamond{display:{Name:'\"§r合珍钻\"'}}复制代码\n\n\n\n\n合珍钻.png (8.34 KB, 下载次数: 0)\n\n下载附件\n\n2019-3-23 21:45 上传\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "鹿小语",
            "timestamp": 1552742040,
            "txt_content": "想知道 你是如何将函数工作台的材质更改成其他材质的"
        },
        {
            "author": "Ph-苯",
            "timestamp": 1552742100,
            "txt_content": "mango2017 发表于 2019-3-16 21:14\n想知道 你是如何将函数工作台的材质更改成其他材质的\n资源包。"
        },
        {
            "author": "鹿小语",
            "timestamp": 1552742160,
            "txt_content": "但是你另一个工作台是原版的材质呀\n\n\n\n\nimage.png (263.96 KB, 下载次数: 4)\n\n下载附件\n\n2019-3-16 21:16 上传\n\n\n\n\n\n"
        },
        {
            "author": "Ph-苯",
            "timestamp": 1552742280,
            "txt_content": "mango2017 发表于 2019-3-16 21:16\n但是你另一个工作台是原版的材质呀\n1.14新增的CustomModelData标签可以让同一个物品在不同的情况下呈现不同的材质，而且我并没有替换工作台的材质，替换的是去皮金合欢树根。"
        },
        {
            "author": "鹿小语",
            "timestamp": 1552742700,
            "txt_content": "七刀月复 发表于 2019-3-16 21:18\n1.14新增的CustomModelData标签可以让同一个物品在不同的情况下呈现不同的材质，而且我并没有替换工作台 ...\n我去研究研究，谢了"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1552743360,
            "txt_content": "为啥不检测Items大小，免得unless一堆。然后其实不需要用tag add，直接可以做到一条命令一条配方的，最后统一检测清理"
        },
        {
            "author": "Ph-苯",
            "timestamp": 1552743540,
            "txt_content": " 本帖最后由 七刀月复 于 2019-3-16 21:45 编辑 \nruhuasiyu 发表于 2019-3-16 21:36\n为啥不检测Items大小，免得unless一堆。然后其实不需要用tag add，直接可以做到一条命令一条配方的，最后统 ...\n你可以下载来试一试，我这个和你那个有略微的不同，所以多了一些命令。"
        },
        {
            "author": "Ruainbow_",
            "timestamp": 1552772700,
            "txt_content": "合成界面你不如直接用原版工作台的材质了事\n最多在左上角加个NBT之类的awa\n不是我说啊，Cpp的材质不是不好看，但是兼容性不是很高啊awa"
        },
        {
            "author": "楚zzz",
            "timestamp": 1552790220,
            "txt_content": "资源包要分别放进文件夹吗？还是直接放mod里？"
        },
        {
            "author": "Ph-苯",
            "timestamp": 1552796940,
            "txt_content": "楚zzz 发表于 2019-3-17 10:37\n资源包要分别放进文件夹吗？还是直接放mod里？\n资源包就像普通资源包一样加载，数据包放进存档文件夹里的datapacks文件夹。"
        },
        {
            "author": "Ph-苯",
            "timestamp": 1552797060,
            "txt_content": "Ruainbow_ 发表于 2019-3-17 05:45\n合成界面你不如直接用原版工作台的材质了事\n最多在左上角加个NBT之类的awa\n不是我说啊，Cpp的材质不是不好 ...\n我只是使用了工作台的材质，并且替换的是去皮金合欢树根，应该不会与其它模组资源包冲突，兼容性应该很高吧？"
        },
        {
            "author": "Ruainbow_",
            "timestamp": 1552803840,
            "txt_content": "七刀月复 发表于 2019-3-17 12:31\n我只是使用了工作台的材质，并且替换的是去皮金合欢树根，应该不会与其它模组资源包冲突，兼容性应该很高 ...\nawa...也许我应该用相性这个词？\n这种背景比较适合以经验为基础的魔法向模组吧，如果是一个科技模组的话用这个就不太恰当"
        },
        {
            "author": "RF_Tar_Railt",
            "timestamp": 1552810740,
            "txt_content": "Ruainbow_ 发表于 2019-3-17 05:45\n合成界面你不如直接用原版工作台的材质了事\n最多在左上角加个NBT之类的awa\n不是我说啊，Cpp的材质不是不好 ...\n原版工作台没法检测你放进去的物品的"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1552813140,
            "txt_content": "Ruainbow_ 发表于 2019-3-17 05:45\n合成界面你不如直接用原版工作台的材质了事\n最多在左上角加个NBT之类的awa\n不是我说啊，Cpp的材质不是不好 ...\n是这样……cpp的合成器还是有点魔法的味道……"
        },
        {
            "author": "Ph-苯",
            "timestamp": 1552833180,
            "txt_content": "Ruainbow_ 发表于 2019-3-17 14:24\nawa...也许我应该用相性这个词？\n这种背景比较适合以经验为基础的魔法向模组吧，如果是一个科技模组的话 ...\n有道理，那我有时间修改一下。"
        },
        {
            "author": "☆娜娜★",
            "timestamp": 1552911780,
            "txt_content": "感谢分享"
        },
        {
            "author": "18168559302",
            "timestamp": 1563944340,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "CR_019",
            "timestamp": 1580658720,
            "txt_content": "理论上有一个bug：将一个有效配方放入nbt合成台，退出界面，破坏方块，输出的物品和输入的物品会一起掉出来\n我目前的解决方案是给输出加个tag，但这样就不能方便的堆叠，降低游戏体验。请问有更好的方案吗"
        },
        {
            "author": "Ph-苯",
            "timestamp": 1580681640,
            "txt_content": "chaoren019 发表于 2020-2-2 23:52\n理论上有一个bug：将一个有效配方放入nbt合成台，退出界面，破坏方块，输出的物品和输入的物品会一起掉出来 ...\n可以先把材料栏里的物品储存起来，在破坏的那一刻清除所有掉落物，再自行生成材料栏里的物品。"
        },
        {
            "author": "Ruainbow_",
            "timestamp": 1587125040,
            "txt_content": "PH的老黑历史了\n最近搞一个新坑，懒得写合成表前置了，就用用你的。\n虽然本体懒得搞，但是你这个模板太复杂了...顺手改了一下，一个函数就可以，那么麻烦...\n#\nexecute store result score @s temp1 run data get block ~ ~ ~ Items\n#以上，temp1可以改为任何不引起冲突的其他记分板\n#以下，如此书写配方，每个配方两条，条件判定完全相同，matches后面的n=17+所占格数\nexecute if score @s temp1 matches n if block ~ ~ ~ barrel{Items:[所有需要的材料物品，含Slot，不含Count]} unless block ~ ~ ~ barrel{Items:[{Slot:16b}]} run tag @s add nbtr_c\nexecute if score @s temp1 matches n if block ~ ~ ~ barrel{Items:[所有需要的材料物品，含Slot，不含Count]} unless block ~ ~ ~ barrel{Items:[{Slot:16b}]} run replaceitem block ~ ~ ~ container.16 成品复制代码"
        },
        {
            "author": "雪-ices",
            "timestamp": 1587213840,
            "txt_content": "膜拜大佬awa"
        }
    ]
}