{
    "title": "让你的服务器整合包瘦身57%!",
    "author": "Zapic",
    "replyCount": 6,
    "timestamp": 1553839140,
    "txt_content": " 本帖最后由 Zapic 于 2019-3-29 20:23 编辑 \n\n实际测试证明\n前言\n  这是一个非常简单暴力的方法来提高含有大量jar文件的压缩包的压缩率,对服务端整合包/完全备份有一定有一定帮助.如果有一点脑子就看完下面这一段话就不用继续看下去了:\n  将所有jar文件解压并重新压缩为无压缩(100%)的zip文件,并全部重命名为jar文件,再用7z格式的极限压缩+完全固实的方法压缩文件,就能得到极高的压缩率和极低的文件大小.\n你需要\n任意支持7z/rar压缩的压缩软件足够[ruby=耐操]强壮[/ruby]的手耐心\n步骤\n解压你的jar核心文件(对于mod服需要解压lib下的所有jar文件)重新将核心压缩为无压缩的zip文件将后缀改为\".jar\"(可以使用命令行\"rename *.zip *.jar\")删除原jar和解压的文件使用7z/rar+\"极限压缩\"+\"完全固实\"来压缩你的服务端文件夹\n  这样,你的压缩包的压缩率就会显著提升,占用体积会显著下降.\n  如果还想要更小,你只需要对你的插件(以及mod)做同样的事情就好了.\n\n原理\n  7z/rar对于zip多了一项功能--固实压缩,这个功能会把所有文件作为一个文件处理.这样的话对于大量重复/内容相似的文件压缩率的提升有很大帮助.压缩的原理就是将相同的内容合并,使其只占1内容的空间.  你可以试一试这样做:压缩一个3m的图片,然后再复制粘贴一大堆\"test\"到一个txt文件内,凑够3m,然后压缩.\n你会发现压缩的txt占用空间明显比压缩的图片小.\n  那么简单来说,对于压缩文件,源文件内容越有规律,压缩率越高,压缩后就会越小;相反的,源文件越无规律,压缩率越低,压缩后越大.\n  那么上面所说的:\n2.重新将核心压缩为无压缩的zip文件\n就是为了让压缩文件的内容更加有规律.任何压缩的基本原理就是将多个相同内容合并成一个,那意味着压缩后源文件的规律性就会被大幅削减.\n  jar使用的是zip的压缩方法,虽然对文件有一定的压缩作用,但不会将多个文件作为一个文件来处理.如果一堆文件内有大量的相同内容,那么使用zip压缩会使相同内容占用更多的空间(单个文件的相同内容会被合并,但不会将所有文件的相同内容合并,导致一个相同内容占用多份空间).\n  如果改用7z/rar并启用了固实压缩,那么它会将所有文件的相同内容合并(所有的相同内容都被合并,只占用1份相同内容的空间),压缩率大幅提高.\n  啥?你懵了?打个简单的比方:\n\n  有3张纸,上面都写着一样的内容:\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n你把他们写到一张纸上,如果不偷懒,那么结果是这样的:\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n无耻老贼某kkariin快给我海带\n但不过你想偷懒,便向zip和7z询问方法:\n  zip:\"你可以这样写:\n无耻老贼某kkariin快给我海带*3\n无耻老贼某kkariin快给我海带*3\n无耻老贼某kkariin快给我海带*3\n\"\n  而7z告诉你:\"别理那货,你这样写:\n无耻老贼某kkariin快给我海带*9\n\"\n  显而易见,7z的方法更有效率,这就是固实压缩与非固实压缩的区别.[ruby=固实压缩]7z的方法[/ruby]会把所有[ruby=文件]纸[/ruby]的相同内容合并,而[ruby=非固实压缩]zip的方法[/ruby]并不会把所有[ruby=文件]纸[/ruby]的相同内容合并,他只将[ruby=一个文件]一张纸[/ruby]上的相同内容合并了.\n\n结语\n  这个方法非常适合于制作服务端整合包的同学们,会减少网盘传输所需的时间.但不过这个方法很可能导致导致解压后的文件夹非常大,所以这个方法也仅仅能拿来玩一下,并没有什么实际的卵用.\n>----------完结分界线 2019.3.29 13:57----------<喜欢就来个论坛3连(顶一下/评分/收藏)吧~有什么问题/发现任何错误请在下面指出,感激不尽\n",
    "replies": [
        {
            "author": "赵鑫洋",
            "timestamp": 1554302820,
            "txt_content": "tar -J -f  file name.tar.xz"
        },
        {
            "author": "Zapic",
            "timestamp": 1554353160,
            "txt_content": "赵鑫洋 发表于 2019-4-3 22:47\ntar -J -f  file name.tar.xz\n第一,我不认为在别人楼底下砸场子是什么好事,也不会显得你很聪明.\n第二,无论是什么压缩方法,内容规律性越高压缩率越高.即使你的压缩算法再怎么强大,只要内容是团乱麻,任何无损压缩都是扯淡(即使xz在某些地方强于7z).这就跟你压缩一部电影不会使用压缩包这种愚蠢的方式是一个道理.如果不信,请用事实来打我的脸,谢谢."
        },
        {
            "author": "赵鑫洋",
            "timestamp": 1554364260,
            "txt_content": "Zapic 发表于 2019-4-4 12:46\n第一,我不认为在别人楼底下砸场子是什么好事,也不会显得你很聪明.\n第二,无论是什么压缩方法, ...\n我就是想水个经验，不至于吧哥........\n就是提供了一下linux的压缩指令......"
        },
        {
            "author": "xmdhs",
            "timestamp": 1555252380,
            "txt_content": "要是写个脚本就简单多了"
        },
        {
            "author": "浅阳Jenkins",
            "timestamp": 1555392840,
            "txt_content": "感谢分享！\n希望继续加油"
        },
        {
            "author": "chyx",
            "timestamp": 1560277620,
            "txt_content": "感觉这个操作适合写个脚本啊。。。\n不然能把人累死"
        }
    ]
}