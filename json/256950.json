{
    "title": "【怒开源】Go语言+QML写的MOTD工具",
    "author": "799669332",
    "replyCount": 8,
    "timestamp": 1396088580,
    "txt_content": " 本帖最后由 799669332 于 2014-3-29 18:25 编辑 \n\n唔，其实就是一个MOTD转换器，设置好颜色什么的后会自动转换成Minecraft的颜色代码和Unicode\n当然写到一半就弃坑了（当然各种未完善啦）\n于是现在开源下，当然注释什么的还是很全的\n用Go语言和QML库写的，想要获取Go的QML库的话可以现安装Go语言然后<font face=\"微软雅黑\" size=\"3\"><span style=\"line-height: 24px;\">go get </span></font><font size=\"3\">gopkg.in/v0/qml</font>复制代码QML库的Github：https://github.com/go-qml/qml\n至于Go语言和QML是什么\n自己百度去吧=A=\n总之是很吊的一种语言，语法和Python一样简介，效率和C++有一拼\n然后，\n下面是图：\n\n\n部分源码：\nGo：\npackage main\n\nimport (\n    \"gopkg.in/v0/qml\"\n    \"log\"\n)\n\n// 用于注入qml的go结构\ntype GoObject struct {\n}\n\nvar root qml.Object\n\nfunc (GoObject) MOTDChanged(text string) {\n    log.Println(\"go: \", text)\n    obj := root.ObjectByName(\"mainShow\")\n    obj.Set(\"text\", text)\n}\n\nfunc (GoObject) CopyMOTD(a string) {\n    log.Println(\"go: copy MOTD clicked\")\n}\n\nfunc (GoObject) ColorChanged(color string) {\n    log.Println(\"go: \", color)\n    switch color {\n    case \"4\":\n        log.Println(\"红\")\n    case \"c\":\n        log.Println(\"粉红\")\n    case \"6\":        log.Println(\"金黄\")\n    case \"e\":\n        log.Println(\"黄\")\n    case \"2\":\n        log.Println(\"绿\")\n    case \"a\":\n        log.Println(\"浅绿\")\n    case \"b\":\n        log.Println(\"青\") \n    case \"3\":\n        log.Println(\"浅蓝\")\n    case \"1\":\n        log.Println(\"蓝\")\n    case \"9\":\n        log.Println(\"蓝紫\")\n    case \"d\":\n        log.Println(\"浅粉\")\n    case \"5\":\n        log.Println(\"紫\")\n    case \"f\":\n        log.Println(\"白\")\n    case \"7\":\n        log.Println(\"浅灰\")\n    case \"8\":\n        log.Println(\"灰\")\n    case \"0\":\n        log.Println(\"黑\")\n    default:\n        log.Println(\"无法识别颜色代码！\")    }}\nfunc main() {    // 初始化qml    qml.Init(nil)\n    // 创建引擎    engine := qml.NewEngine()\n    // 加载qml    component, err := engine.LoadFile(\"MOTDTool.qml\")    if err != nil {        panic(err)    }\n    // 获得上下文    context := engine.Context()\n    // 将一个go对象注入进qml上下文    goObject := GoObject{}    context.SetVar(\"goObject\", goObject)\n    // 创建qml窗口\n    window := component.CreateWindow(nil)\n    // 获得根控件\n    root = window.Root()\n    // 显示窗口\n    window.Show()\n    // 等待退出\n    window.Wait()}\n\n\nQML：\n\nimport QtQuick 2.0\nRectangle {    id: root    width: 500    height: 250    color: \"#e0e0e0\"    radius: 0    border.width: 3    border.color: \"#ffffff\"\n\n    TextEdit {        id: motd_edit        x: 19        y: 19        width: 463        height: 66        text: qsTr(\"\")        clip: false        textFormat: TextEdit.AutoText        selectedTextColor: \"#000000\"        selectionColor: \"#000000\"        z: 4        wrapMode: TextEdit.NoWrap        font.pixelSize: 12\n        //焦点变更事件        onFocusChanged: {            if(focus){                console.log(\"qml: motd_edit focused\")            }        }        onTextChanged: {            console.log(\"qml: \" + motd_edit.text)            //goObject注入            goObject.mOTDChanged(motd_edit.text)        }\n        Rectangle {            id: rectangle1            x: -5            y: -5            width: 474            height: 77            color: \"#ffffff\"            z: -3        }    }\n    TextEdit {        id: motd_show        x: 19        y: 100        width: 463        height: 66        objectName: \"mainShow\"        text: \"\"        z: 3        readOnly: true        horizontalAlignment: TextEdit.AlignLeft        font.pixelSize: 12\n        Rectangle {            id: rectangle2            x: -5            y: -5            width: 474            height: 77            color: \"#ffffff\"            z: -2\n            MouseArea {                id: motd_copy                x: 0                y: 0                width: 475                height: 78                //onClicked处理按钮点击事件                onClicked: {                    console.log(\"copy MOTD clicked\" )                    goObject.copyMOTD(\"\")                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#ffffff\"            }        }\n    }\n    Rectangle {            id: color_0            x: 374            y: 213            width: 36            height: 24            color: \"#000000\"            rotation: 0\n            MouseArea {                id: mousearea17                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"0\")                    motd_edit.color = \"#000000\"                    motd_edit.text = motd_edit.text+\"&0\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#000000\"            }    }\n    Rectangle {            id: color_8            x: 332            y: 213            width: 36            height: 24            color: \"#555353\"            rotation: 0\n            MouseArea {                id: mousearea15                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"8\")                    motd_edit.color = \"#555353\"                    motd_edit.text = motd_edit.text+\"&8\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#555353\"            }    }\n    Rectangle {            id: color_7            x: 290            y: 213            width: 36            height: 24            color: \"#bbbbbb\"            rotation: 0\n            MouseArea {                id: mousearea13                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"7\")                    motd_edit.color = \"#bbbbbb\"                    motd_edit.text = motd_edit.text+\"&7\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#bbbbbb\"            }    }\n    Rectangle {            id: color_f            x: 248            y: 213            width: 36            height: 24            color: \"#ffffff\"            rotation: 0\n            MouseArea {                id: mousearea11                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"f\")                    motd_edit.color = \"#ffffff\"                    motd_edit.text = motd_edit.text+\"&f\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#fdfdfd\"            }    }\n    Rectangle {            id: color_5            x: 206            y: 213            width: 36            height: 24            color: \"#900ab5\"            rotation: 0\n            MouseArea {                id: mousearea9                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"5\")                    motd_edit.color = \"#900ab5\"                    motd_edit.text = motd_edit.text+\"&5\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#900ab5\"            }    }\n    Rectangle {            id: color_d            x: 164            y: 213            width: 36            height: 24            color: \"#d94fff\"            rotation: 0\n            MouseArea {                id: mousearea7                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"d\")                    motd_edit.color = \"#d94fff\"                    motd_edit.text = motd_edit.text+\"&d\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#d94fff\"            }    }\n    Rectangle {            id: color_9            x: 122            y: 213            width: 36            height: 24            color: \"#4a5aee\"            rotation: 0\n            MouseArea {                id: mousearea6                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"9\")                    motd_edit.color = \"#4a5aee\"                    motd_edit.text = motd_edit.text+\"&9\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#4a5aee\"            }    }\n    Rectangle {            id: color_1            x: 80            y: 213            width: 36            height: 24            color: \"#0217f7\"            rotation: 0\n            MouseArea {                id: mousearea5                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"1\")                    motd_edit.color = \"#0217f7\"                    motd_edit.text = motd_edit.text+\"&1\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#0217f7\"            }    }\n    Rectangle {            id: color_3            x: 374            y: 183            width: 36            height: 24            color: \"#00aec8\"            rotation: 0\n            MouseArea {                id: mousearea16                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"3\")                    motd_edit.color = \"#00aec8\"                    motd_edit.text = motd_edit.text+\"&3\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#00aec8\"            }    }\n    Rectangle {            id: color_b            x: 332            y: 183            width: 36            height: 24            color: \"#0feafd\"            rotation: 0\n            MouseArea {                id: mousearea14                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"b\")                    motd_edit.color = \"#0feafd\"                    motd_edit.text = motd_edit.text+\"&b\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#0feafd\"            }    }\n    Rectangle {            id: color_a            x: 290            y: 183            width: 36            height: 24            color: \"#29fd15\"            rotation: 0\n            MouseArea {                id: mousearea12                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"a\")                    motd_edit.color = \"#29fd15\"                    motd_edit.text = motd_edit.text+\"&a\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#29fd15\"            }    }\n    Rectangle {            id: color_2            x: 248            y: 183            width: 36            height: 24            color: \"#0dcf00\"            rotation: 0\n            MouseArea {                id: mousearea10                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"2\")                    motd_edit.color = \"#0dcf00\"                    motd_edit.text = motd_edit.text+\"&2\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#0dcf00\"            }    }\n    Rectangle {            id: color_e            x: 206            y: 183            width: 36            height: 24            color: \"#f5f209\"            rotation: 0\n            MouseArea {                id: mousearea8                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"e\")                    motd_edit.color = \"#f5f209\"                    motd_edit.text = motd_edit.text+\"&e\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#f5f209\"            }    }\n    Rectangle {            id: color_6            x: 164            y: 183            width: 36            height: 24            color: \"#f59f0a\"            rotation: 0\n            MouseArea {                id: mousearea4                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"6\")                    motd_edit.color = \"#f59f0a\"                    motd_edit.text = motd_edit.text+\"&6\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#f59f0a\"            }    }\n    Rectangle {            id: color_c            x: 122            y: 183            width: 36            height: 24            color: \"#f75050\"            rotation: 0\n            MouseArea {                id: mousearea3                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"c\")                    motd_edit.color = \"#f75050\"                    motd_edit.text = motd_edit.text+\"&c\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#f75050\"            }    }\n    Rectangle {            id: color_4            x: 80            y: 183            width: 36            height: 24            color: \"#ff0000\"            z: 0            rotation: 0\n            MouseArea {                id: mousearea2                x: 0                y: 0                width: 36                height: 24                onClicked: {                    goObject.colorChanged(\"4\")                    motd_edit.color = \"#ff0000\"                    motd_edit.text = motd_edit.text+\"&4\"                }                onEntered: parent.border.color = \"#e4e4e4\"                onExited:  parent.border.color = \"#ff0000\"            }    }}\n\n源码打包下载：http://www.kuaipan.cn/file/id_246157928787083820.htm",
    "replies": [
        {
            "author": "残忆",
            "timestamp": 1396088820,
            "txt_content": "看着很高端的样子\n支持一下~"
        },
        {
            "author": "799669332",
            "timestamp": 1396149420,
            "txt_content": "QML功能还是太少 = =\n前端库已经准备用QT了"
        },
        {
            "author": "qiuF",
            "timestamp": 1396149540,
            "txt_content": "不明觉厉"
        },
        {
            "author": "尘曲",
            "timestamp": 1396178280,
            "txt_content": "大神这是我的膝盖"
        },
        {
            "author": "1277832129",
            "timestamp": 1397210820,
            "txt_content": "访问的图片已经被删除"
        },
        {
            "author": "799669332",
            "timestamp": 1397212980,
            "txt_content": "1277832129 发表于 2014-4-11 18:07\n访问的图片已经被删除\n=A+删了就删了吧\n不要在意细节"
        },
        {
            "author": "Jianghao7172",
            "timestamp": 1446701940,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "Jianghao7172",
            "timestamp": 1446702000,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        }
    ]
}