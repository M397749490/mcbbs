{
    "title": "gui物品退回问题",
    "author": "55555hhh",
    "replyCount": 3,
    "timestamp": 1530293220,
    "txt_content": "\n          @EventHandler\n          public void closeingInvetory(InventoryCloseEvent event)\n          {\n            Inventory inventory = event.getInventory();\n            Player whoClosePlayer = (Player)event.getPlayer();\n            if (inventory.getName().equalsIgnoreCase(\"§a§l? §f§l重铸\"))\n            {\n              List<ItemStack> itemStacks = new ArrayList();\n              if (inventory.getItem(13) != null) {\n                itemStacks.add(inventory.getItem(13));\n              }\n              Thread sendItemThread = new Thread(new Runnable()\n              {\n                public void run()\n                {\n                  for (ItemStack itemStack : itemStacks) {\n                    whoClosePlayer.getInventory().addItem(new ItemStack[] { itemStack });\n                  }\n                }\n              });\n              sendItemThread.start();\n            }\n          }复制代码这样写，把物品放入gui 直接关闭游戏 再上线 背包会有*2刚刚放入的物品\n应该怎么写才能避免这种问题..\n据我所知现在很多插件都是用这种方法，比如以前的sas...",
    "replies": [
        {
            "author": "狡诈师",
            "timestamp": 1530316440,
            "txt_content": "你是想，Gui的物品东西在退出游戏或关闭服务器的时候返回玩家的背包？\n\n这是关闭服务器时的例子\n\n    @Override\n    public void onDisable() {\n        for (Player player : Bukkit.getServer().getOnlinePlayers()) {\n            if (player.getOpenInventory().getTopInventory().getItem(3) != null) {\n                player.getInventory().addItem(player.getOpenInventory().getTopInventory().getItem(3));\n            }\n        }\n    }\n复制代码"
        },
        {
            "author": "黑",
            "timestamp": 1530330660,
            "txt_content": "itemStacks.add(inventory.getItem(13));\ninventory.setItem(13, null);复制代码\n\n在获取物品后将物品删掉。\n因为玩家离线时会触发两次 InventoryCloseEvent 事件。"
        },
        {
            "author": "hnfhu1",
            "timestamp": 1530761820,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        }
    ]
}