{
    "title": "tps很低，服务器配置却没吃满",
    "author": "lengshao233",
    "replyCount": 20,
    "timestamp": 1587455700,
    "txt_content": " 本帖最后由 lengshao233 于 2020-4-21 16:02 编辑 \n\n服务器tps很低\n\n\n\n\nimage.png (35.09 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-21 15:54 上传\n\n\n\n\n19个人就这样子，但后台任务管理器中单核性能都没有吃满，内存也没满\n\n\n\n\nimage.png (67.21 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-21 15:54 上传\n\n\n\n\n附上timings报告https://timings.spigotmc.org/?url=hupuwopuhi请不要让我看优化教程优化插件之类的，帮忙看看timings才是实际的\n我已经跟着优化走了一遍又一遍\n",
    "replies": [
        {
            "author": "Salt_lovely",
            "timestamp": 1587455700,
            "txt_content": "集体掉线一般是网络波动问题，试试这个：\n[其他]AsyncKeepAlive —— 减少网络和服务器卡顿掉线[1.7-1.14.2]\nhttps://www.mcbbs.net/thread-843701-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n47.30%          78.30%        348.08 s            39.15 ms         1.0               8.9k            world - tileEntityTick\n43.22%          71.54%        318.01 s            35.77 ms        8,365          74,376.4k            tickTileEntity\n22.32%          36.94%        164.23 s            18.47 ms          17             151.2k            tickTileEntity - TileLevelMaintainer\n主世界实体卡服，特别是那2w的tiles很迷，你是CatServer，发一下插件和MOD列表"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587455760,
            "txt_content": "还有一个问题服务器莫名其妙会踢出一些人\n\n\n\n\nimage.png (21.28 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-21 15:56 上传\n\n\n\n\n显示是：time out"
        },
        {
            "author": "2414098984",
            "timestamp": 1587455940,
            "txt_content": "看看后台是不是有什么插件占用主线程了"
        },
        {
            "author": "即陈",
            "timestamp": 1587455940,
            "txt_content": "试着分配给服务器的内存啥的大一点，话说自动踢人能说的详细一点吗"
        },
        {
            "author": "即陈",
            "timestamp": 1587456000,
            "txt_content": "也可以尝试这个插件https://www.mcbbs.net/forum.php?mod=viewthread&tid=603072"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587456060,
            "txt_content": "即陈 发表于 2020-4-21 16:00\n也可以尝试这个插件https://www.mcbbs.net/forum.php?mod=viewthread&tid=603072\n不好意思我没说清除，我已经跟着站内的优化走了很多边，能否看看timings"
        },
        {
            "author": "酷乐工作室",
            "timestamp": 1587456180,
            "txt_content": "问问机房各线程有不有网络波动什么的，我原来服务器被攻击也是这样"
        },
        {
            "author": "即陈",
            "timestamp": 1587456240,
            "txt_content": "lengshao233 发表于 2020-4-21 16:01\n不好意思我没说清除，我已经跟着站内的优化走了很多边，能否看看timings\ntimings看不了，外站？我这里对外网不是很好，网络超时"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587456240,
            "txt_content": "酷乐工作室 发表于 2020-4-21 16:03\n问问机房各线程有不有网络波动什么的，我原来服务器被攻击也是这样\n无，带宽也没满，洛神云的机子"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587456240,
            "txt_content": "2414098984 发表于 2020-4-21 15:59\n看看后台是不是有什么插件占用主线程了\n怎么样算占用呢，我不太清楚"
        },
        {
            "author": "瘟疫威胁全世界",
            "timestamp": 1587456780,
            "txt_content": "lengshao233 发表于 2020-4-21 16:04\n怎么样算占用呢，我不太清楚\n后台有报错或警告等？贴出来\n其次视距太高，可以调到3\n然后，实体和Tile占用过大，这个我推荐你装一些动物无AI之类的插件\n还有玩家传送时加载区块对TPS损耗很大，推荐使用一些预加载区块插件，对于一些地标如商店可以考虑永久加载区块\n但是你的机器都没有占满内存等就很奇怪，也不排除是假机器的可能"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587457260,
            "txt_content": "Salt_lovely 发表于 2020-4-21 16:19\n集体掉线一般是网络波动问题，试试这个：\n[其他]AsyncKeepAlive —— 减少网络和服务器卡顿掉线[1.7-1.14.2 ...\n找到原因了，有个人的区块很奇怪1000+的实体，但是一过去加载区块，又没用任何实体了"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587457320,
            "txt_content": "Salt_lovely 发表于 2020-4-21 16:19\n集体掉线一般是网络波动问题，试试这个：\n[其他]AsyncKeepAlive —— 减少网络和服务器卡顿掉线[1.7-1.14.2 ...\n\n\n\n\nimage.png (9.73 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-21 16:22 上传\n\n\n\n\n我只能一直让他保持加载，这样应该没什么事\n"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587457980,
            "txt_content": "Salt_lovely 发表于 2020-4-21 16:19\n集体掉线一般是网络波动问题，试试这个：\n[其他]AsyncKeepAlive —— 减少网络和服务器卡顿掉线[1.7-1.14.2 ...\n大佬，解决了实体的问题，现在又开始掉了，掉到17了"
        },
        {
            "author": "Salt_lovely",
            "timestamp": 1587458220,
            "txt_content": "lengshao233 发表于 2020-4-21 16:33\n大佬，解决了实体的问题，现在又开始掉了，掉到17了\n解决了？那就再跑一份timings，刚刚那一份我除了实体卡服以外也没看到什么可疑项目\n\n除了这个可能导致突然小卡顿的世界保存\n\n0.49%        3,612.49%          3.61 s         1,806.24 ms         0.0               0.0k            World Save"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587458280,
            "txt_content": "Salt_lovely 发表于 2020-4-21 16:37\n解决了？那就再跑一份timings，刚刚那一份我除了实体卡服以外也没看到什么可疑项目\n\n除了这个可能导致突 ...\nhttps://www.spigotmc.org/go/timings?url=urovobilay\n这是新的timings"
        },
        {
            "author": "Salt_lovely",
            "timestamp": 1587460140,
            "txt_content": "lengshao233 发表于 2020-4-21 16:38\nhttps://www.spigotmc.org/go/timings?url=urovobilay\n这是新的timings21.03%          24.46%         58.45 s            12.23 ms        5,433          25,965.3k            tickTileEntity8.18%           9.52%         22.74 s             4.76 ms         301           1,439.0k            tickEntity\n其中：\n26.22%          30.50%         72.87 s            15.25 ms         1.0               4.8k            world - tileEntityTick\n主世界那2w个tiles卡服，我毫无头绪XD，tiles增加是因为箱子/漏斗/熔炉之类的容器及其里面的东西越来越多，是无法避免的事情（19人开出2w tiles说明发展部分玩家得还不错XD），找找有没有那种容器特别多的地方/或者某个MOD可能会带的超大容器？\n\n有一个会影响游戏体验而且会导致服务器不稳定的优化方式：\nspigot.yml-->\nmax-tick-time:\n  tile:50 #这个会限制tiles每tick占用时间，但是改小了可能导致未知的错误复制代码"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587460500,
            "txt_content": "Salt_lovely 发表于 2020-4-21 17:09\n其中：\n\n主世界那2w个tiles卡服，我毫无头绪XD，tiles增加是因为箱子/漏斗/熔炉之类的容器及其里面的东 ...\n服务器有大量科技类模组tiles高无法避免，没什么办法，现在只能在其他方面提升，能否告诉我一下这个指标是什么意思吗\n\n\n\n\nimage.png (2.03 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-21 17:15 上传\n\n\n\n\n"
        },
        {
            "author": "Salt_lovely",
            "timestamp": 1587460680,
            "txt_content": "lengshao233 发表于 2020-4-21 17:15\n服务器有大量科技类模组tiles高无法避免，没什么办法，现在只能在其他方面提升，能否告诉我一下这 ...\n主要是玩家和服务器的交互（移动跳跃/放置方块/破坏方块/存放物品），玩家多起来的时候，这个占用高是无法避免的。"
        },
        {
            "author": "lengshao233",
            "timestamp": 1587460860,
            "txt_content": "Salt_lovely 发表于 2020-4-21 17:18\n主要是玩家和服务器的交互（移动跳跃/放置方块/破坏方块/存放物品），玩家多起来的时候，这个占用高是无 ...\n这样啊，那只能佛系开服了"
        }
    ]
}