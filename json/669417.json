{
    "title": "【TCP|skeleton小白】平面追踪导弹（弹道修正）",
    "author": "skeleton小白",
    "replyCount": 1,
    "timestamp": 1485936000,
    "txt_content": " 本帖最后由 skeleton小白 于 2017-2-1 16:18 编辑 \n\n   之前也看到了雷鸣关于同样是平面追踪导弹的帖子，用的是一颗赛艇黑科技和两点之间线段最短的原理，但这种方式的导弹有一个缺点：无论如何，只要实体被追踪，就不可能甩掉导弹，如果用在PVP游戏里，会破坏游戏平衡性。本帖在这种导弹的基础上，使用的是如果弹道偏了，就向偏的反方向修正弹道的原理。这样，只要实体的移动速度大于弹道修正的速度，就可以将导弹甩掉。同时也比雷鸣的方法节省了实体。\n雷鸣的导弹\n    \n\n效果图\n\n\n完美闪避\n\n原理讲解：\n\n这里以一个精度为30°，修正范围±60°，每tick修正量5°的导弹为一个例子。\n生成：\n/summon area_effect_cloud ~ ~-4 ~ {Rotation:[90.0f,0.0f],CustomName:\"Bullet\",WaitTime:0,Duration:10000,Passengers:[\n{id:boat,CustomName:\"Head\",Passengers:[{id:armor_stand,CustomName:\"Useless\"},{id:armor_stand,CustomName:\"test\",Tags:[\"TP\"]}]},\n{id:boat,CustomName:\"R1\",Passengers:[{id:armor_stand,CustomName:\"Useless\"},{id:armor_stand,CustomName:\"test\",Tags:[\"R\"]}]},\n{id:boat,CustomName:\"R2\",Passengers:[{id:armor_stand,CustomName:\"Useless\"},{id:armor_stand,CustomName:\"test\",Tags:[\"R\"]}]},\n{id:boat,CustomName:\"R3\",Passengers:[{id:armor_stand,CustomName:\"Useless\"},{id:armor_stand,CustomName:\"test\"}]},\n{id:boat,CustomName:\"L1\",Passengers:[{id:armor_stand,CustomName:\"Useless\"},{id:armor_stand,CustomName:\"test\",Tags:[\"L\"]}]},\n{id:boat,CustomName:\"L2\",Passengers:[{id:armor_stand,CustomName:\"Useless\"},{id:armor_stand,CustomName:\"test\",Tags:[\"L\"]}]},\n{id:boat,CustomName:\"L3\",Passengers:[{id:armor_stand,CustomName:\"Useless\"},{id:armor_stand,CustomName:\"test\"}]}\n]}复制代码类似于雷鸣的导弹，也是生成一圈双人船并用船尾盔甲架来判断方向。\n\n展开双人船：\n高频：\n/execute @e[type=area_effect_cloud,name=Bullet] ~ ~ ~ teleport @e[type=boat,name=Head] ~ ~ ~ ~180 ~复制代码/execute @e[type=area_effect_cloud,name=Bullet] ~ ~ ~ teleport @e[type=boat,name=R1] ~ ~ ~ ~210 ~复制代码/execute @e[type=area_effect_cloud,name=Bullet] ~ ~ ~ teleport @e[type=boat,name=R2] ~ ~ ~ ~240 ~复制代码/execute @e[type=area_effect_cloud,name=Bullet] ~ ~ ~ teleport @e[type=boat,name=R3] ~ ~ ~ ~270 ~复制代码/execute @e[type=area_effect_cloud,name=Bullet] ~ ~ ~ teleport @e[type=boat,name=L1] ~ ~ ~ ~150 ~复制代码/execute @e[type=area_effect_cloud,name=Bullet] ~ ~ ~ teleport @e[type=boat,name=L2] ~ ~ ~ ~120 ~复制代码/execute @e[type=area_effect_cloud,name=Bullet] ~ ~ ~ teleport @e[type=boat,name=L3] ~ ~ ~ ~90 ~复制代码\n展开之后的效果图：\n\n\n\n\n\n每一个圆表示一个盔甲架，其中L1、L2带有L标签，R1、R2带有R标签。每两个盔甲架之间间隔30°，这决定了探测精度。精度越高，导弹走的路线就越圆润，但需要的盔甲架也越多。L2和R2之间夹角为120°，所以修正范围为±60°，只有目标位于这个角度范围内才会追踪。每次以目标为中心，选取最近的盔甲架，如果带有L/R标签，说明弹道偏了，但在修正范围之内，就把药水云整体向右转/向左转一定角度；如果最近的盔甲架为TP，则说明弹道是正的或偏的角度还没达到修正精度；如果最近的盔甲架为L3或R3，则说明弹道偏了，但已经超出修正范围。与雷鸣的导弹不同的是，这里L3和R3可以作为一个边界，L3与R3之间的劣弧部分不需要盔甲架进行探测了，这使原本的探测环变成了一个探测弧，可以节约实体。\n\n弹道修正：\n首先创建一个名为near的计分板\n<font size=\"2\">/scoreboard objectives add near dummy</font>复制代码其实可以用tag代替的，但选择器里不能放两个tag，所以就用计分板代替了\n\n以下指令全部高频\n/execute @e[type=area_effect_cloud,name=Bullet] ~ ~ ~ execute @e[type=villager,c=1] ~ ~ ~ scoreboard players set @e[type=armor_stand,name=test,c=1] near 1复制代码先确定离导弹最近的目标（村民），再以目标为中心确定离目标最近的名为test的盔甲架，将其near分数设为1\n/execute @e[type=armor_stand,name=test,tag=R,score_near_min=1] ~ ~ ~ tp @e[type=area_effect_cloud,name=Bullet,c=1] ~ ~ ~ ~5 ~复制代码/execute @e[type=armor_stand,name=test,tag=L,score_near_min=1] ~ ~ ~ tp @e[type=area_effect_cloud,name=Bullet,c=1] ~ ~ ~ ~-5 ~复制代码如果near标记为1的盔甲架带有L标签，则弹道偏左，向右调，否则如果带有R标签，则弹道偏右，向左调。5是每tick弹道修正量，这个值越大，弹道修正速度就越快，导弹就越难被闪掉。但是这个值不能超过两个盔甲架之间间隔，否则有可能修正过头，又向另外一个方向偏了。\n/scoreboard players reset @e near复制代码重置near判定\n\n<font size=\"2\">/execute @e[type=armor_stand,tag=TP] ~ ~-0.375 ~ teleport @e[type=area_effect_cloud,name=Bullet,c=1] ~ ~ ~</font>复制代码导弹移动。将药水云移动到正前方的那个盔甲架处。因为乘骑的盔甲架y轴比药水用大约高0.375格，所以tp时要减去0.375。\n\n/execute @e[type=area_effect_cloud,name=Bullet] ~ ~4 ~ scoreboard players tag @e[type=villager,r=1,c=1] add hurt复制代码/execute @e[type=villager] ~ ~-4 ~ execute @e[type=area_effect_cloud,name=Bullet,r=1,c=1] ~ ~ ~ kill @e[type=boat,r=1]复制代码/execute @e[type=villager] ~ ~-4 ~ execute @e[type=area_effect_cloud,name=Bullet,r=1,c=1] ~ ~ ~ kill @e[type=armor_stand,r=2]复制代码/execute @e[type=villager] ~ ~-4 ~ execute @e[type=area_effect_cloud,name=Bullet,r=1,c=1] ~ ~ ~ kill @e[type=area_effect_cloud,r=1]复制代码/effect @e[tag=hurt] instant_damage 1 1复制代码/scoreboard players tag @e remove hurt复制代码这部分是击中判定。如果击中目标，就给目标伤害并且清掉导弹。\n\n/execute @e[type=area_effect_cloud,name=Bullet] ~ ~4 ~ particle flame ~ ~ ~ 0 0 0 0 1复制代码导弹特效不解释\n\n\n   可能讲解的略有点快。。。如果没有看懂，欢迎戳雷鸣的导弹贴看更详细的教程。虽然原理不同，但在环形盔甲架探测部分基本是一样的。\n\n[groupid=1009]The Command's Power[/groupid]",
    "replies": [
        {
            "author": "乙烯_中国",
            "timestamp": 1485991440,
            "txt_content": "你这帖子写的啊。。。卖相也太惨了点\n这个思路不得不说仔细一看还是蛮赞的，很不错，值得鼓掌。"
        }
    ]
}