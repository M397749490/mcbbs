{
    "title": "新人教程  配置文件枚举",
    "author": "494308843",
    "replyCount": 6,
    "timestamp": 1458284040,
    "txt_content": " 本帖最后由 494308843 于 2016-3-19 20:07 编辑 \n\n{:10_492:}新人学习插件   看到论坛配置文件说明不够多\n学习的过程中发个帖子  不会排版勿怪\n(我不会描述,语言能力查)\n最近写插件遇见一个问题\n像这种\nlist:\n    分支1:\n              Enabled:false\n    分支2:\n              Enabled:false\n如何取list有多少项   每个分支里 内容是什么\n比如保存玩家技能数据 你总不能几十个技能都 一句一句判定是否存在吧\n研究其他插件发现\n应该是这样来处理的\n\nconfig.getConfigurationSection(\"list\").getKeys(false);\n可以获取到一个Set<String>\n这个Set集合  存储的是子分支的名字\n比如 分支1\n getKeys() 方法   false 的意思是 只获取目录下的分支\ntrue是包括子分支的分支 如果我没理解错的话= =\n{:10_504:}\n\n\n代码如下\nfor(String key:config.getConfigurationSection(\"list\").getKeys(false));\n//枚举分支名  然后读取设置\n{\nif(config.getBoolean(\"list.\"+key+\".Enabled\")){\n//建议先判断是否存在\n}\n\n}\n\n判断是否存在的方法是\nconfig.contains(\"list.\" + key + \".enabled\");\n\n仅供参考.小白QAQ不会排版\n希望论坛大神们\n给出详细的说明\n论坛资料有点少\n很多都只写了一点内容其他都没说明\n比如路径    分支(雾)\n\n还有这种\n文本数组的获取方法========\n看2楼 splt 的解答 我原来写的有误\n\n\n\n\n还有一些要注意的事项\n用代码生成默认的配置文件\n比如用一堆config.set();\n只能用一些支持的类型\n比如int,Boolean,String,等\n千万不能弄个MAP 等  不支持的类型直接set\n不然会变成这样\n    M: &id001\n      TEST2: '2'\n      TEST3: '3'\n      TEST1: '1'\n\n多了&id001 之类的\n不清楚有什么影响  不过不推荐\n\n也不要设置 对象.toString();\n不可靠\n{:10_514:}不会排版  你怕不怕=============\n感谢splt大神的解答\n引号 单引号双引号以及读取String[]和List<String>\n的问题  在2楼\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "云闪",
            "timestamp": 1458378840,
            "txt_content": " 本帖最后由 splt 于 2016-3-20 07:11 编辑 \n\n还不错~建议做出更详细的说明~还有_(:_」∠)_排版很重要~\n\n第一个取多少项你研究得是对的\n不过判断是否存在有个更好的方法，config.isInt(\"aaa.bbb\")，这样当aaa.bbb存在并且这一项是int的时候就会返回true，其它时候返回的是false，其它的类型String那些也是同理\n\n然后是引号的问题：\n纯英文数字加普通符号并且没有空格的，不需要引号\n多数情况yaml不需要引号，但是仍然建议每个字符串都加上单引号，有特殊需要的加双引号\n有空格的需要单引号\n有非ascll字符的(一般都是中文)，就需要双引号\n然后双引号可以用\\(反斜杠)转义，比如  'test\\ntest'  获取以后输出就直接输出的是  test\\ntest\n如果是  \"test\\ntest\"  获取后输出就是：test\ntest\n[你会注意到第二个用双引号包围的我换行了~]\n\n第三就是那个&id001，那个&是yaml的锚点，可以用*符号来指向，举个梨例子：\ntest: &id001\n  asd: \"这是一个配置，可以通过qwq.asd获取\"\nqwq: *id001\n\n上面这个配置，按照普通方法可以使用test.asd来获取那句话，而且加了那个锚点以后也可以通过qwq.asd来获取了，简单来讲就是你获取的时候那个qwq会被替换成test，然后其他的东西完全一样~[当然这是yaml格式的要求，bukkit有没有实现我就不知道了，我觉得应该实现了~]\n~~~不过一定要注意，虽然这个东西看起来可能会很方便，但是绝对不能滥用，事实上这个东西会扰乱yaml的逻辑，如果不是非常特殊的情况就不要用它(事实上你开始玩编程的一两年之内都不会碰到真正的那种特殊情况的(当然世界之大无奇不有，我不敢说每个人绝对碰不到，但是几乎所有的所谓的特殊情况其实都能用一种更好的方式去解决~~~))\n\n\n\n\n好嘛，理论都没搞明白就乱说2333我的错，在yaml中：\n\ntest: [aaa,bbb,ccc]\n和\ntest:\n  - aaa\n  - bbb\n  - ccc\n是完全一样的，只不过是写法的区别_(:_」∠)_我的建议是都使用第二种形式，比较好看，当然如果配置项非常简单的时候也可以使用第一种形式\n唔，后来又看了一下，你那个数组的应该有问题，如果是数组(new String[]{\"aaa\",\"bbb\",\"ccc\"})set以后应该是test: [aaa,bbb,ccc]这个样子的\n而\ntest:\n  - aaa\n  - bbb\n  - ccc\n这种样子的应该是列表，也就是set了List<String>就会用这种格式\n当然，这一段我是根据理论分析的，并没有经过实际测试的，如果说得有错一样见谅~\n\n\n\n"
        },
        {
            "author": "494308843",
            "timestamp": 1458389040,
            "txt_content": "splt 发表于 2016-3-19 17:14\n还不错~建议做出更详细的说明~还有_(:_」∠)_排版很重要~\n\n第一个取多少项你研究得是对的\n不知道为什么 汉化插件的时候\n语言文件\n默认是单引号也正常使用  所以搞不清是怎么回事"
        },
        {
            "author": "云闪",
            "timestamp": 1458428460,
            "txt_content": "494308843 发表于 2016-3-19 20:04\n不知道为什么 汉化插件的时候\n语言文件\n默认是单引号也正常使用  所以搞不清是怎么回事 ...\n抱歉，我又回去看了一下yaml的语法，有几个地方我是说错了的\n\n首先是最后那个数组和列表的问题，其实那两种格式在yaml中是一样的，只不过是两种不同的写法而已~\n\n然后是字符串的问题，一般情况下是不需要引号的，即使有空格有中文也一样，引号只有在必要的时候才需要加，比如：\n1.字符串里有#这个符号，由于#是yaml的注释符号，所以如果不加引号的话#后面的字符都会被忽略到换行\n2.需要使用\\进行转义的时候，比如\\n换行，就需要使用双引号\n3.可能还有其他情况，但是我目前没想到…\n\n反正我是建议一般都加单引号，根据需要加双引号，这样的yaml文件无论是对人还是对机器都比较友好~~~"
        },
        {
            "author": "云闪",
            "timestamp": 1458429060,
            "txt_content": "你原来写的有些是对的_(:_」∠)_建议错的部分使用删除线划掉并在上方做出说明，而不是直接删掉，当然你不使用这种方式也没啥"
        },
        {
            "author": "kanming",
            "timestamp": 1458441000,
            "txt_content": "排版要帅就好看了QAQ写的还行的啦\n主要看排版的气质"
        },
        {
            "author": "绿村民",
            "timestamp": 1584716400,
            "txt_content": "非常好的教程，不过希望LZ更新"
        }
    ]
}