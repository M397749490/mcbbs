{
    "title": "MCmod制作 1.11(10.openGL渲染实体)",
    "author": "zkm00323",
    "replyCount": 1,
    "timestamp": 1485086700,
    "txt_content": " 本帖最后由 zkm00323 于 2017-1-24 13:13 编辑 \n\n其实我完全没学过openGL\n所以这个教程可能不全面\n但是基本会用到的功能,这里会讲\n一般实体生物会有自己的model文件\n但是RenderArrow并没有(package net.minecraft.client.renderer.entity;)\n由于解释RenderArrow太麻烦,我直接来解释自己做的Render\n通过研究RenderArrow里的doRender方法,我们来自定义一个模型\n\n\n\n\n我们修改一下之前写的RenderIcebullet\npublic class RenderIcebullet extends Render<EntityIcebullet>{\n\n        public RenderIcebullet(RenderManager renderManagerIn) {\n                super(renderManagerIn);\n        }\n\n        @Override\n        protected ResourceLocation getEntityTexture(EntityIcebullet entity) {\n                return new ResourceLocation(Name.MOD_ID, \"textures/entity/ice.png\");//获取贴图路径,\n\n\n\n\nice.png (904 Bytes, 下载次数: 12)\n\n下载附件\n\n2017-1-22 20:15 上传\n\n\n\n\n←贴图顺便给了\n        }\n\n           @Override\n            public void doRender(EntityIcebullet entity, double x, double y, double z, float entityYaw, float partialTicks) {\n                this.bindEntityTexture(entity);//绑定贴图\n                //GlStateManager.color(1.0F, 1.0F, 1.0F, 1.0F);//渲染颜色RPG偏移\n                GlStateManager.pushMatrix();//压入当前矩阵堆栈\n                //GlStateManager.disableCull();//開啟雙面顯示(默认情况下渲染一个平面只有单面可显示,绕道后面看就没了)\n                GlStateManager.disableLighting();//關閉自帶光源,这样才能让mc用环境光去算他的亮度\n                GlStateManager.enableBlend();//開啟不透明度(因为这个是冰弹,所以给他读取贴图透明度的能力)\n                GlStateManager.translate((float)x, (float)y, (float)z);//坐標\n                //下面的GlStateManager.rotate第一个参数为转动的角度,后面3个参数分别为x,y,z轴,0则不作用,大于0则作用\n                //角度-------------------------------------------------------------------------------------------------------------------------------------------------↓只对y轴作用\n                GlStateManager.rotate(entity.prevRotationYaw + (entity.rotationYaw - entity.prevRotationYaw) * partialTicks - 90.0F, 0.0F, 1.0F, 0.0F);\n                //角度-------------------------------------------------------------------------------------------------------------------------------------------------↓只对z轴作用\n                GlStateManager.rotate(entity.prevRotationPitch + (entity.rotationPitch - entity.prevRotationPitch) * partialTicks, 0.0F, 0.0F, 1.0F)\n                Tessellator tessellator = Tessellator.getInstance();//由于3D绘图的实例?\n                VertexBuffer vertexbuffer = tessellator.getBuffer();//顶点计算???....反正抄就对了\n                GlStateManager.enableRescaleNormal();//重新规范化法向量???\n                GlStateManager.scale(0.05625F, 0.05625F, 0.05625F);//设置大小\n                GlStateManager.translate(-3.0F, 0.0F, 0.0F);//把渲染图形往箭尾移动一,图0\n\n//                if (this.renderOutlines){//似乎是一种renderOutlines防护措施可不写\n//                    GlStateManager.enableColorMaterial();\n//                    GlStateManager.enableOutlineMode(this.getTeamColor(entity));\n//                }\n\n              for (int j = 0; j < 4; ++j){//循环4次\n                  GlStateManager.rotate(90.0F, 1.0F, 0.0F, 0.0F);//x轴旋转90度(下次执行会在这次90度的基础下再转90度)\n\n                  //GlStateManager.glNormal3f(0.0F, 0.0F, 0.05625F);//不懂什么意义,不写也无妨\n                  vertexbuffer.begin(7, DefaultVertexFormats.POSITION_TEX);//开始绘制\n                  //pos(0,0,0)为游戏中实体中心坐标,tex(0,0)为贴图上的坐标,一格像素为0.03125,可以看图1参考\n                  vertexbuffer.pos(-3.0D, -3.0D, 3.0D).tex(0.0D,0.0D).endVertex();//点1\n                  vertexbuffer.pos(3.0D, -3.0D, 3.0D).tex(0.1875D, 0.0D).endVertex();//点2\n                  vertexbuffer.pos(3.0D, 3.0D, 3.0D).tex(0.1875D, 0.1875D).endVertex();//点3\n                  vertexbuffer.pos(-3.0D, 3.0D, 3.0D).tex(0.0D, 0.1875D).endVertex();//点4\n             //4个点绘制一个四边形\n                  tessellator.draw();//此次绘制结束,图2状态\n                  //下面以此类推总共画了3个面,for4次,每次增加90度,这样就可以绘制一个完整12面体\n                  vertexbuffer.begin(7, DefaultVertexFormats.POSITION_TEX);\n                  vertexbuffer.pos(-9.0D, 0.0D, 0.0D).tex(0.0D, 0.0D).endVertex();\n                  vertexbuffer.pos(-3.0D, -3.0D, 3.0D).tex(0.1875D, 0.0D).endVertex();\n                  vertexbuffer.pos(-3.0D, 3.0D, 3.0D).tex(0.1875D, 0.1875D).endVertex();\n                  vertexbuffer.pos(-9.0D, 0.0D, 0.0D).tex(0.0D, 0.1875D).endVertex();\n                  tessellator.draw();//此次绘制结束,图3状态\n\n                 vertexbuffer.begin(7, DefaultVertexFormats.POSITION_TEX);\n                  vertexbuffer.pos(9.0D, 0.0D, 0.0D).tex(0.0D, 0.0D).endVertex();\n                  vertexbuffer.pos(3.0D, 3.0D, 3.0D).tex(0.1875D, 0.0D).endVertex();\n                  vertexbuffer.pos(3.0D, -3.0D, 3.0D).tex(0.1875D, 0.1875D).endVertex();\n                  vertexbuffer.pos(9.0D, 0.0D, 0.0D).tex(0.0D, 0.1875D).endVertex();\n                  tessellator.draw();//此次绘制结束,图4状态\n\n              }//for(1),图5状态\n           //for(2),图6状态\n           //for(3),图7状态\n\n//                if (this.renderOutlines)\n//                {\n//                    GlStateManager.disableOutlineMode();\n//                    GlStateManager.disableColorMaterial();\n//                }\n\n             //openGL有很多渲染开关.需要在渲染完后恢复原状\n                GlStateManager.disableRescaleNormal();//关闭规范化法向量???\n                GlStateManager.enableLighting();//開啟自帶光源\n                //GlStateManager.enableCull();//關閉雙面顯示\n                GlStateManager.disableBlend();//關閉不透明度\n                GlStateManager.popMatrix();//弹出当前矩阵堆栈\n                super.doRender(entity, x, y, z, entityYaw, partialTicks);\n            }\n      }\n//////////////////////////////////////////////////////////////////////\n\n图0\n\n\n\n\n\nQQ截图20170122185442.png (8.58 KB, 下载次数: 1)\n\n下载附件\n\n2017-1-22 18:57 上传\n\n\n\n\n\n\n\n\n\n\n\nQQ截图20170124112538.png (186.37 KB, 下载次数: 2)\n\n下载附件\n\n2017-1-24 13:11 上传\n\n\n\n\n\n\n\n\n\n\n\nQQ截图20170124125520.png (74.57 KB, 下载次数: 1)\n\n下载附件\n\n2017-1-24 12:58 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\nQQ截图20170124124906.png (103.32 KB, 下载次数: 2)\n\n下载附件\n\n2017-1-24 12:51 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\nQQ截图20170124130203.png (74.63 KB, 下载次数: 4)\n\n下载附件\n\n2017-1-24 13:04 上传\n\n\n\n\n\n图5\n\n\n\n\n\nQQ截图20170124110402.png (122.89 KB, 下载次数: 4)\n\n下载附件\n\n2017-1-24 11:07 上传\n\n\n\n\n\n图6\n\n\n\n\nQQ截图20170124110410.png (160.39 KB, 下载次数: 1)\n\n下载附件\n\n2017-1-24 10:53 上传\n\n\n\n\n\n图7\n\n\n\n\nQQ截图20170124110421.png (117.56 KB, 下载次数: 1)\n\n下载附件\n\n2017-1-24 11:07 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n最后他应该会长这样\n\n\n\n\nQQ图片20170122195439.jpg (22.83 KB, 下载次数: 2)\n\n下载附件\n\n2017-1-22 19:57 上传\n\n\n\n\n\n\n一个正方体,前后都加个四角锥\n正方体 上,下,左,右 4个面\n+前四角锥 的4个斜面\n+后四角锥 的4个斜面\n总共12个面\n\n虽然可以实现自定义模型,不过原理没法解释很清楚\nhttp://www.mcbbs.net/thread-204115-1-1.html\n贴上这个教程想了解的可以去看看\n\n源代码\n\n\n\nsrc_教程10.rar\n(28.18 KB, 下载次数: 32)\n\n\n\n2017-1-22 20:18 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "zkm00323",
            "timestamp": 1485420960,
            "txt_content": "补充资料\nhttp://greyminecraftcoder.blogsp ... rldrenderer-18.html"
        }
    ]
}