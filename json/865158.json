{
    "title": "MOD打包发布问题",
    "author": "wingwolf",
    "replyCount": 11,
    "timestamp": 1557674100,
    "txt_content": " 本帖最后由 wingwolf 于 2019-5-12 23:16 编辑 \n\n各位大佬好，我在自制一个MOD，最近做的差不多想要打包发布出来的时候，遇到了一个问题想请教大家\n我是用 IDEA 的 Minecraft Development 插件制作的 Forge MOD，MOD做得差不多了使用IDEA的build成功地在 \\build\\libs 文件夹里创建了jar文件\n（这里我build出了两个jar文件，一个叫modname.jar，一个叫modname-source.jar，不知道有什么区别？）\n但是当我把这个jar文件放到MC的mods文件夹里面（MC已安装对应的forge），MOD却无法加载，错误信息如下：\n\n[Client thread/INFO] [FML]: FML has found a non-mod file modname.jar in your mods directory. It will now be injected into your classpath. This could severe stability issues, it should be removed if possible.\n\n为什么会这样呢？",
    "replies": [
        {
            "author": "3TUSK",
            "timestamp": 1557679620,
            "txt_content": "1. modname-source.jar 包含的是你的 Mod 的源码，而不是编译出来的 class。\n2. 这日志说明你的 mod 没被正确识别。是不是缺了 @Mod？"
        },
        {
            "author": "wingwolf",
            "timestamp": 1557716700,
            "txt_content": " 本帖最后由 wingwolf 于 2019-5-13 11:09 编辑 \nu.s.knowledge 发表于 2019-5-13 00:47\n1. modname-source.jar 包含的是你的 Mod 的源码，而不是编译出来的 class。\n2. 这日志说明你的 mod 没被正 ...\n谢谢大佬的解答\n\n1. 原来如此，那么发布MOD的时候，只需要发布 modname.jar 就可以了吧？~\n2. @mod 是有的，在IDEA里面测试的时候也是可以正常运行的，就是build出来的jar没法用~\n@Mod(\n        modid = Test.MOD_ID,\n        name = Test.MOD_NAME,\n        version = Test.VERSION\n)\npublic class Test{\n    public static final String MOD_ID = \"test\";\n    public static final String MOD_NAME = \"test\";\n    public static final String VERSION = \"1.0\";\n\n……（后续内容）……复制代码\n\n我的 build.gradle 是这样的~\nbuildscript {\n    repositories {\n        jcenter()\n        maven {\n            name = \"forge\"\n            url = \"http://files.minecraftforge.net/maven\"\n        }\n    }\n    dependencies {\n        classpath \"net.minecraftforge.gradle:ForgeGradle:2.2-SNAPSHOT\"\n    }\n}\n\napply plugin: \"net.minecraftforge.gradle.forge\"\n\nversion = modVersion\ngroup = modGroup\narchivesBaseName = modBaseName\n\n[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'\n\nminecraft {\n    version = project.forgeVersion\n    runDir = \"run\"\n\n    // the mappings can be changed at any time, and must be in the following format.\n    // snapshot_YYYYMMDD   snapshot are built nightly.\n    // stable_#            stables are built at the discretion of the MCP team.\n    // Use non-default mappings at your own risk. they may not always work.\n    // simply re-run your setup task after changing the mappings to update your workspace.\n    mappings = project.mcpVersion\n    // makeObfSourceJar = false // an Srg named sources jar is made by default. uncomment this to disable.\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n}\n\nprocessResources {\n    // this will ensure that this task is redone when the versions change.\n    inputs.property \"version\", project.version\n    inputs.property \"mcversion\", project.minecraft.version\n\n    // replace stuff in mcmod.info, nothing else\n    from(sourceSets.main.resources.srcDirs) {\n        include \"mcmod.info\"\n\n        // replace version and mcversion\n        expand \"version\": project.version, \"mcversion\": project.minecraft.version\n    }\n\n    // copy everything else, thats not the mcmod.info\n    from(sourceSets.main.resources.srcDirs) {\n        exclude \"mcmod.info\"\n    }\n}复制代码"
        },
        {
            "author": "gooding300",
            "timestamp": 1557718860,
            "txt_content": "如果方便的话请上传一下构建成品，我可以帮忙看一下。"
        },
        {
            "author": "3TUSK",
            "timestamp": 1557721500,
            "txt_content": "wingwolf 发表于 2019-5-13 11:05\n谢谢大佬的解答\n\n1. 原来如此，那么发布MOD的时候，只需要发布 modname.jar 就可以了吧？~\n1. 对。不过那个 source 里的源码实际上是混淆回 Serage 名的源码，在跨版本迁移的时候能派上用场。\n2. 这 build.gradle 看不出任何问题。同楼上，建议发一下构建成品或者源码什么的。"
        },
        {
            "author": "wingwolf",
            "timestamp": 1557725160,
            "txt_content": " 本帖最后由 wingwolf 于 2019-5-13 13:29 编辑 \n\n我的MOD有些大，我用百度网盘上传了，里面包含build出来的两个jar文件~\n链接: https://pan.baidu.com/s/1XdquXTVfwUDbY9wKW2lKSQ 提取码: bik4\n是 1.10.2 的MOD，Forge版本 12.18.3.2511"
        },
        {
            "author": "roj234",
            "timestamp": 1557758100,
            "txt_content": " 本帖最后由 roj234 于 2019-5-13 22:53 编辑 \n\nmod版本无效\n Zip file dragicland-test.jar failed to read properly, it will be ignored\njava.lang.RuntimeException: Empty reference \n        at net.minecraftforge.fml.common.versioning.VersionParser.parseVersionReference(VersionParser.java:49) ~[VersionParser.class:?]\n\n\nmcmod.info中和@mod的version项必须符合[0-9._-]\n即数字下划线中划线和点\n\n比如1.0.0\n2.3.7-beta\n\n=============追加\n刚在我还想编译时不是会提示不行的吗\n然后我把这个问题修复了\n又崩溃了： net.minecraftforge.fml.common.LoaderExceptionModCrash: Caught exception from The Elder Hunter (dragicland)\nCaused by: java.lang.NoSuchMethodError: net.minecraft.item.Item.setRegistryName(Ljava/lang/String;)Lnet/minecraftforge/fml/common/registry/IForgeRegistryEntry;\n        at wingwolf.dragicland.item.ItemLoader.register(ItemLoader.java:84)\n        at wingwolf.dragicland.item.ItemLoader.<init>(ItemLoader.java:47)\n        at wingwolf.dragicland.proxy.CommonProxy.preInit(CommonProxy.java:16)\n        at wingwolf.dragicland.proxy.ClientProxy.preInit(ClientProxy.java:13)\n        at wingwolf.dragicland.Dragicland.preinit(Dragicland.java:42)\n老哥麻烦用下gradle build好吗而不是runClient出来的未混淆文件\n"
        },
        {
            "author": "wingwolf",
            "timestamp": 1557762720,
            "txt_content": " 本帖最后由 wingwolf 于 2019-5-13 23:58 编辑 \nroj234 发表于 2019-5-13 22:35\nmod版本无效\n Zip file dragicland-test.jar failed to read properly, it will be ignored\njava.lang.Runt ...\n大佬你好，谢谢解答，不过我把 @mod 和 build.gradle 里的版本号都改成了1.0.0，结果依然报错呢~\nMinecraft: [23:15:23] [Client thread/WARN] [FML]: Zip file dragicland-1.0.0.jar failed to read properly, it will be ignored\nMinecraft: java.lang.RuntimeException: Empty reference \nMinecraft:     at net.minecraftforge.fml.common.versioning.VersionParser.parseVersionReference(VersionParser.java:52) ~[VersionParser.class:?]复制代码\n好的我试试gradle build"
        },
        {
            "author": "roj234",
            "timestamp": 1557808860,
            "txt_content": "wingwolf 发表于 2019-5-13 23:52\n大佬你好，谢谢解答，不过我把 @mod 和 build.gradle 里的版本号都改成了1.0.0，结果依然报错呢~\n\n好的我 ...\n我删除mcmod.info之后再build可以正常使用\n请检查mcmod.info的json语法"
        },
        {
            "author": "wingwolf",
            "timestamp": 1557813900,
            "txt_content": " 本帖最后由 wingwolf 于 2019-5-14 14:06 编辑 \nroj234 发表于 2019-5-14 12:41\n我删除mcmod.info之后再build可以正常使用\n请检查mcmod.info的json语法\n成功了！检查mcmod.info发现是依赖MOD列表里面多了个\"\"，变成了 \"dependencies\": [\"\"]，导致MOD无法加载，去掉\"\"之后就能够加载了\n谢谢！"
        },
        {
            "author": "1850343382",
            "timestamp": 1557987240,
            "txt_content": "上次也遇到了这个dependencies的问题，是这个idea插件创建的模板问题"
        },
        {
            "author": "JasonAlpha",
            "timestamp": 1587537720,
            "txt_content": "1850343382 发表于 2019-5-16 14:14\n上次也遇到了这个dependencies的问题，是这个idea插件创建的模板问题\n没错，俺也一样"
        }
    ]
}