{
    "title": "【TRPcb向】论mc中精确计算圆周率的各种方法【待更新】",
    "author": "乙烯_中国",
    "replyCount": 38,
    "timestamp": 1421831820,
    "txt_content": " 本帖最后由 乙烯_中国 于 2016-3-20 18:19 编辑 \n\n大家好，我是乙烯。今天给大家带来的是minecraft中的各种圆周率算法。\n当然，我知道站内有人已经做过计算π的机器，但是为什么我还是要发这个帖子呢，因为，由于mc中一个小小的特点，决定了那个机器其实是算不出误差可接受的圆周率，至于原因我会在下面详细说明。\n其实如果不做个能算机器的话。。。我会很遗憾的。。。\n我会分两大种办法来说，考虑到可能篇幅过长，所以会用三个折叠，各位按需观看。\n没用过折叠也不知道能不能叠起来。。。以及图床又没了。。。\n一，通过概率求π\n这里是之前那个帖子的机器还有我用随机原理做的类似机器的分析，鉴于可能会引起争端，我就把作者的名字放到折叠里面了。。。强调一点，用随机求π是无效率可言的，所以推荐阅读下一种方法。由cyqsimon补充，概率求法也可称为蒙特卡洛法。注意：字多图少。\n这里是songfeitong做的利用钝角三角形的原理制造的机器。。。截图不放了，附上那个帖子的链接\nhttp://www.mcbbs.net/thread-277699-1-1.html\n其实，确定一点，他本身的算法是正确的，从数学的角度上来说，得到的结果的确是会趋近于π，但是，有一点，这一点我想肯定是所有的高中数学老师都不断强调的东西，那么是什么呢？答案是，定义域。\n不断生成3个1-18内的随机数a,b,c\n这是帖子里的原话，我们可以看到，他的想法是取a，b，c∈[1,18]，这三个变量的定义域是[1,18]，就是说，abc这三个数可以取1到18包括首尾的任何数，然而，由于在minecraft里，\n他采用的随机数生成器是发射器+命令方块的组合，这样就决定了，这个随机器只能取到区间[1,18]里的所有整数，那么定义域就发生了小小的变化，现在的情况是a，b，c∈[1,18]∩Z，Z为整数集。\n这样的话，整个的算法的输出结果就会发生极大的改变，现在abc都有18种可能，而总共的可能性也减为了18^3=5832种可能，这样的话我们可以在其它平台上很轻易的计算这些可能性有多少可以构成钝角三角形，我通过Excel计算出的结果是有1474种，当然这几天Excel被我大数计算玩崩了，我只验算了两遍。。。，没法验算第三遍。。。\n有兴趣的同学可以也来算一算。\n那么我们计算这个数干什么呢，很显然，如果我们随机多次，必定有一个会无限趋近的结果，而随机总次数和成功次数的比必定趋近于总可能数和成功可能数的比，那么我们假设完美情况，即总次数为5832次，而成功次数为1474次，那么通过他的公式，我们可以变换出\nπ=4(n/m)+2，其中n为成功次数，m为总次数，\n带进去可想而知，结果为3.01097...这个误差很显然不能接受。\n而在mc中的挂机结果也证明了计算结果\n结果约为3.03320，相比于圆周率，更接近于我所计算的结果。2s一取样，想想近六千次我挂了多长时间。。。\n\n同样的，我也自己建了一个用随机器求π的机器，下面上图，\n机器概貌\n\n非常直观的设计，随机器会随机到这64*64这个大正方形里的随机一个点，而落入圆的会被计数。\n算法很简单，S（圆）=πr^2  S（方）=4r^2\n而4*S(圆)/S(方)=π\n顺带一提，这个圆是我手撸的，如果使用严格计算过并分配过面积的圆结果会更精确\n\n由于一个随机器带不动，所以我就建了16个随机器等概率随机到这正方形里的等面积16份，一来提升取样速度，二来在数学上其实是等效于一个16倍速的随机器。\n这个的效率是每秒取大约200次的样，由于太快我就不仔细数了。\n这是我去吃个饭挂机的成果（其实，连续挂了十几次，成绩都很稳定）\n其中TRP代表总次数，Ethylene_china代表在圆内的次数\n这样我们可以在mc中计算出大约的结果为\n但是这个算法也是有极限精确度的，实际上这个机器由于定义域同样不能连续取样，理论上的最大精确度通过计算确定只有三位，虽然三位的精度大概提了一点，但是依旧是没有效率的\n下图为我处理数据并输出的机器\n\n过段时间我会整理出在minecraft中利用计分板系统进行浮点运算的方法，届时我会发帖详细介绍。下文也略有提及。\n至于有人已经做了计分板简单计算器并声明了版权。。。不过那个帖子里好像没怎么说。。。总之我不会开发计分板计算器啦，虽然这个机器改改就可以作为一个除法模块。\n另外附上输出视觉上的浮点数的代码\ntellraw @p {text:\"π≈\",extra:[{score:{name:\"Ethylene_china\",objective:\"in2\"}},{text:\".\"},{score:{name:\"Ethylene_china\",objective:\"in5\"}}]}复制代码其实，这个代码是不完全的，应该补足上小数位为0的检查计分板。但是由于我们计算的目标为π而不是所有可能的小数，所以随便啦，不需要考虑那么多情况。\n\n通过随机器求π是绝对不行的，但我们依旧有很多办法提升精度，除了增大随机规模外，还有很多思路，这里我提你们一个思路：计分板虽然不能用浮点数，但是有些命令可以，例如tp。\n二，通过公式求π\n\n毫无疑问，求π的话最好还是利用公式法去计算，毕竟增加了计分板四则，不用真是太可惜了。\n公式的话其实百度百科或者wiki里面比比皆是，而关于我们需要什么公式呢，很简单，我们先要简单的！\n因为实际上计分板的加减乘都还算是比较好用的，至于除嘛，计分板的是整数除法并且不带四舍五入，这个设定既不方便又很方便，除法嘛，就按惯例来用一个计分板储存整数位，一个计分板储存小数位，基本上作为简单计算器是够用了，其他例如开方之类的计算，我们也会有很多简化并高度适用计算机的算法，最有名的例如雷神之锤三里的快速开方取倒数的方法，关于求π的我们也有高斯-勒让德算法，25次迭代可以计算到π后4500万位的数字。\n话题有点岔开了，其实我们只需要测试最简单的计算算法就好啦，那么我们需要什么样的公式呢？\n我在百度百科里找到一个看上去不错的公式，Leibniz定理，，这个公式的优点是计算过程非常简单，但是缺点也很明显，我们可以看出这个式子的收敛速度比较慢，如果我们要精确到小数后一位的话，我们起码得等到处理第6项即1/11≈0.091，即所处理的小数有效数字已经退至十分位之后，这时除了进位没有什么能影响到前面的数字，同理如果要精确到百分位得等到1/111之后，千分位则要1/1111，综上，每精确一位小数我们所需等待的时间成指数级增长。。。至少我挂机没计算出万分位。。。\n下面上图，这是这个公式的cb化处理，由于尝试压缩时间，右上去掉了一个中继器，可能导致不稳定，一旦加上，将会100%稳定，与Excel内部的计算结果完全相同。存档过会发布。\n\n\n附上计算结果，\n\n\n当然，虽然我还未完成，但是我还是比较想制作出一个mc里的快速算法，但仔细想了想。。。要直接做出可以足够支撑快速算法的位数的系统我还是有点压力\n但是现在正在做一个可以计算56位的圆周率的机器，主要原理是使用了泰勒展开。\n姑且上个图，留待日后更新。\n\n大召唤术：@pacerrecap @719823597 @jianghr @nenn @圆石 @软妹裙子 @阿散ASun \n\n\n\n\n\n\n[groupid=143]The Redpixel[/groupid]",
    "replies": [
        {
            "author": "SPE__HaiKuo",
            "timestamp": 1421831880,
            "txt_content": "图少的裂了'_>'\nTRP的成员啊……触啊poi"
        },
        {
            "author": "乙烯_中国",
            "timestamp": 1421832600,
            "txt_content": "SPE__HaiKuo 发表于 2015-1-21 17:18\n图少的裂了'_>'\nTRP的成员啊……触啊poi\n图已修，请阅"
        },
        {
            "author": "小白~别喷。",
            "timestamp": 1421832780,
            "txt_content": "大触你好呀"
        },
        {
            "author": "末影矿工",
            "timestamp": 1421832840,
            "txt_content": "总想说些什么，但是也无言以对\n就支持一下吧\n"
        },
        {
            "author": "潘韦东",
            "timestamp": 1421832900,
            "txt_content": "顶{:10_510:}"
        },
        {
            "author": "IgnizFeng",
            "timestamp": 1421832960,
            "txt_content": "这么好的帖子不回复可惜了  占个前排  虽然没怎么看懂...  大触收膝盖.!"
        },
        {
            "author": "chyx",
            "timestamp": 1421833320,
            "txt_content": "trp居然也cb向了{:10_503:} 能不能用别的命令起到计算的作用？比如坐标和速度？"
        },
        {
            "author": "修改器很好玩",
            "timestamp": 1421833620,
            "txt_content": "TRP中80%的教程都看不懂"
        },
        {
            "author": "黄凯航",
            "timestamp": 1421833680,
            "txt_content": "太高端了。\n我退出。{:10_503:}"
        },
        {
            "author": "pacerrecap",
            "timestamp": 1421834400,
            "txt_content": "e^(i*PI)=-1\nPI=log(-1)/log(e)/i\n看我多机智。"
        },
        {
            "author": "乙烯_中国",
            "timestamp": 1421834580,
            "txt_content": "pacerrecap 发表于 2015-1-21 18:00\ne^(i*PI)=-1\nPI=log(-1)/log(e)/i\n看我多机智。\n浮点数除以浮点数超鬼畜的"
        },
        {
            "author": "攻略之魔",
            "timestamp": 1421834700,
            "txt_content": "大触啊大触_(:зゝ∠)_命令方块好萌"
        },
        {
            "author": "邂逅",
            "timestamp": 1421835900,
            "txt_content": "看不懂，给跪了{:10_522:}"
        },
        {
            "author": "紫枫",
            "timestamp": 1421835960,
            "txt_content": "触爆了\nMC还能做数学简直神"
        },
        {
            "author": "840196733mw",
            "timestamp": 1421836740,
            "txt_content": "啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊\n\n为什么玩MC还要弄那么科学啊{:10_494:}"
        },
        {
            "author": "PTmissionary",
            "timestamp": 1421837760,
            "txt_content": "至少是算法有关的东西了。\n不是什么骑什么的了。"
        },
        {
            "author": "chyx",
            "timestamp": 1421841000,
            "txt_content": "pacerrecap 发表于 2015-1-21 18:00\ne^(i*PI)=-1\nPI=log(-1)/log(e)/i\n看我多机智。\n噗"
        },
        {
            "author": "36李",
            "timestamp": 1421841840,
            "txt_content": "π=3.141592653589793238.............."
        },
        {
            "author": "jianghr",
            "timestamp": 1421862900,
            "txt_content": "随机器圆那段确实噗噗噗噗……\n本想说WE的，不过那么搞反倒像是知道根据π画个圆再求π，那就略逗了。\n数学什么的我是高考及格多一点，不过这写得算是听得懂，群里也有说，问题应该不大。\n先给450观望，度度贡献已经砸上了，更新好喊我声，也会有的。"
        },
        {
            "author": "a795020470",
            "timestamp": 1421892000,
            "txt_content": "大触收膝盖{:10_502:}存档发布求@"
        },
        {
            "author": "chyx",
            "timestamp": 1421902980,
            "txt_content": "你问kg史莱姆随机器是不是就是为了这个帖子？"
        },
        {
            "author": "乙烯_中国",
            "timestamp": 1421910960,
            "txt_content": "chyx 发表于 2015-1-22 13:03\n你问kg史莱姆随机器是不是就是为了这个帖子？\n不是啦，我只想找出最高效的随机器，不过现在感觉随机器最高效率不过一游戏刻一次了"
        },
        {
            "author": "nenn",
            "timestamp": 1421997960,
            "txt_content": "怒顶巨触乙烯！{:10_492:}"
        },
        {
            "author": "阿散ASun",
            "timestamp": 1422107400,
            "txt_content": "乙烯需要ni提供的算法OwO而且上次乙烯在群里发图好像千分位就算错了Orz{:10_492:}总之加油吧"
        },
        {
            "author": "1466786645",
            "timestamp": 1422108600,
            "txt_content": "大触我们做盆友吧"
        },
        {
            "author": "etflly",
            "timestamp": 1422110580,
            "txt_content": "话说……最简单的公式不就是常函数么= =找简单公式其实是偷懒哗众取宠吧……\n\n我觉得确定公式优化电路和算法还算有意义"
        },
        {
            "author": ":spgbigfan:",
            "timestamp": 1422119460,
            "txt_content": "为什么我关心的重点在于记分板计算器。。。求链接"
        },
        {
            "author": "cyqsimon",
            "timestamp": 1428494280,
            "txt_content": "简单补充一下，概率求解方法是有特殊名称的，英文monte carlo method。中文不清楚，LZ可以自己查一下"
        },
        {
            "author": "乙烯_中国",
            "timestamp": 1428494760,
            "txt_content": "cyqsimon 发表于 2015-4-8 19:58\n简单补充一下，概率求解方法是有特殊名称的，英文monte carlo method。中文不清楚，LZ可以自己查一下 ...\n了解，蒙特卡洛法，我马上补充一下。"
        },
        {
            "author": "紫罗兰祝福",
            "timestamp": 1429680000,
            "txt_content": "不是3.14159265357...？\n差别略大（略大？）"
        },
        {
            "author": "nemochina",
            "timestamp": 1429713720,
            "txt_content": "我只想弱弱问一句你蒙特卡洛法求解就是那个64*64格子那个的圆是怎么回事，是用勾股定理求到圆心距离吗？还是手捋圆，设置组看是在圆里圆外？"
        },
        {
            "author": "xyzWesker",
            "timestamp": 1429713900,
            "txt_content": "表示我只看懂songfeitong的帖子，乙烯的就不懂了{:10_522:}"
        },
        {
            "author": "uniquetruth",
            "timestamp": 1429715460,
            "txt_content": "第二个思路靠谱，第一个的话……\nmc的随机数那就是java的随机数，也就是伪随机数，所以……\n计算机内用随机数来做概率实验是个伪命题。除非硬件上有真随机数芯片来支持，不过我一直只是听说有这芯片，从没实际见过，哪位有图来给个图开开眼*（貌似扯远了）"
        },
        {
            "author": "Deing",
            "timestamp": 1447387200,
            "txt_content": "乙烯_中国 发表于 2015-1-21 18:03\n浮点数除以浮点数超鬼畜的\n这已经不是浮点数的问题了啊，都有虚数了mc哪能处理"
        },
        {
            "author": "柏林少女v2",
            "timestamp": 1482459120,
            "txt_content": "图不能看哎"
        },
        {
            "author": "langyo",
            "timestamp": 1484987520,
            "txt_content": "乙烯_中国 发表于 2015-1-21 17:30\n图已修，请阅\n你的所有保存在贴图库的图全部都挂了，包括从索引贴到各个子贴都有不同程度严重的图片挂失，既然放寒假了不介意花点时间修一修？"
        },
        {
            "author": "乙烯_中国",
            "timestamp": 1484991480,
            "txt_content": "langyo 发表于 2017-1-21 16:32\n你的所有保存在贴图库的图全部都挂了，包括从索引贴到各个子贴都有不同程度严重的图片挂失，既然放寒假了 ...\n你放假了不代表我就放了。不过图床我都做好了，但是我懒，不得不说承认这一点还是满愉悦的。"
        },
        {
            "author": "BlackCB.",
            "timestamp": 1502442540,
            "txt_content": "我居然看懂了少许，厉害了"
        }
    ]
}