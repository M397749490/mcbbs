{
    "title": "[1.8-1.12.2]Mod服务器 客户端模组同步工具",
    "author": "luzhengwei",
    "replyCount": 29,
    "timestamp": 1534671840,
    "txt_content": " 本帖最后由 luzhengwei 于 2020-2-21 17:38 编辑 \n\n运行环境：客户端运行环境：Java 1.8.0_60及以上\n服务端以mod形式运行，需求Minecraft版本 1.8+\nps：学业原因这个mod（很水）以及客户端（贼乱）进入随缘维护，有熟悉jfx和rxjava的小伙伴可以尝试接手项目，因为上次更新准备做插件动态加载所以遗留一些未完成的不知名代码以及mod端的编译期注解可能会造成的疑惑可以和我联系，邮箱可以到github找，0-0。\n\n使用指南：\n客户端：进入界面同步本地指定文件夹内的mod（不同于文件扫描，这里对每个Jar包进行扫描，提取Mod关键信息，在jar本身没有被修改的情况下，现在可以识别普通的Forge制作的mod（一直到1.12.2的info文件都是“记录型文件”，1.13开始应该可以稳定识别了），Sponge端的插件，Bukkit端的插件，liteLoader加载的litemod，对于大部分Forge Mod识别速度较快且信息较准确，CoreMod 信息在运行时插入加载器所以难以提取到关键信息），时间可能会比较长，请耐心等待；\n扫描过程中请不要修改扫描文件夹处的文件以免造成不可预料的错误；\n扫描完成后进行文件同步，文件同步的原则：删除“服务端标记”的不同版本mod 所有冲突mod以及多余的“服务端标记”的mod；\n要保护的mod比如一些客户端mod请在扫描界面右键并标记为客户端mod（Client）；\n\n已知问题 ：对于部分分包但又不规范的mod比如星系，他的前置由于不作为mod载入无法识别到需要手动更新（主要最近都没有时间更新了），这个可以自行测试，但是这种情况比较少见，对于大部分规范的mod都是没有问题的。\n\n服务端：服务端会以mod形式启动放在mods文件夹下即可；\n\n配置文件：\n客户端：如果要将客户端配置在整合包中请将路径设定为相对路径；修改服务器监听URL；\n保留config文件；\n\n服务端mod：bandWidth:控制下载文件的带宽保护(单位：Mbps)\n单线程下载速度为：设置带宽/connectionNum * 2（即50%连接数的平均速度）\nconnectionNum:允许同时连接的连接数，由于客户端使用多线程下载请设为较大值；\n另外两个参数其中port是你的下载服务器端口号，这个端口建议自己修改成固定的端口，否则每次重新启动服务器都会随机空闲的端口；\n\n最终的服务器下载地址填的是你的服务器ip地址和服务端mod生成（或者你配置的）端口，在服务器启动的时候可以看到打印信息；\n\n命令：sync start/stop(管理员权限) 描述:打开或者关闭HttpServer\n\n2019.8.19更新（Client 版本：1.6）\n更新内容：修复1.5的bug；\n\n2019.2.9更新（Client 版本：1.5）\n更新内容：修复1.4的bug；\n\n2019.2.8更新（Client 版本：1.4）\n更新内容：\n增加关于（包括版本更新）。计划更新1.13forge服务端，客户端ui修改和代码优化；\n\n历史更新记录\n\n2019.1.28更新（Client 版本：1.3b） 更新内容： 增加了对部分mod分包的识别。 \n2019.1.7更新（Client 版本：1.3a） 更新内容： 增加服务器管理界面（请在启动前删除旧版本的（1.3a之前的所有版本）config文件）。方便多个服务器更新切换。  \n2018.9.1更新（Server/Client 版本：1.2） 更新内容： 1.修复客户端部分bug； 2.服务端添加外部下载链接功能； 3.服务端添加部分指令；\n\n\n\n1）外部下载链接：\n对于大多服务器，流量或者说是带宽资源比较宝贵，下载功能对于服务器的依赖有时会造成一定的麻烦：为此增加了外部下载链接功能，可以从外部的直链直接下载mod来减轻服务器压力（比如各种云盘或者自建云存储）；\n具体在客户端下载时，服务端提供外部下载链接减轻服务器压力，配置方式如下：\n在sync_urls .usr文件中对所有（或部分）需要添加外部下载链接的mod添加地址，添加前请测试是否可以在迅雷或者IDM等中进行下载测试（如：百度网盘的直链服务器会识别HTTP头部，通过一般方式获取的百度网盘直链会直接返回403Forbidden错误）；\n\n注：对于服务器的资源文件路径修改是无效的！！！！！服务器的mods文件夹下的mod请不要使用中文或特殊符号，我找时间再修复。\n具体格式如下所示：\nsync_urls.usr(位于服务器mods文件夹下)\n{\n  \"tconstruct\": \"http://www.baidupcs.com/rest/2.0/pcs/file?method\\u003dbatchdownload\\u0026app_id\\u003d250528\\u0026zipcontent\\u003ddadadadadddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddfhnkajfHFKLkhfjkshfkjhsjkdfhsjakfhjsakfhjkashfjlshfjsahlfkjhsajkfskfsakfhksahfkjlshdfjkshfjksaflsfshdfkhsfjks%%\",//乱填的。。。\n  \"tinkertoolleveling\": \"\",//空表示没有外部下载链接，使用服务器资源进行下载\n  \"toughasnails\": \"\",\n  \"craftstudioapi\": \"\",\n  \"chinjufumod\": \"\",\n  \"mantle\": \"\",\n  \"twilightforest\": \"\",\n  \"animania\": \"\"\n}复制代码2）对于指令集的描述\n由于设计之初考虑到兼容性没有将其做成Sponge等端的插件，具体指令权限全部为管理员权限；主指令：\nsync\n子指令({}内为参数)：\nmodifyurl {modid} {newurl}:修改mod的url为newurl\nremoveurl {modid}：删除mod的外部链接\nlisturls：列出所有url地址\n\nreadurls：从配置文件中读取url\nsaveurls：保存到配置文件中\nstop：停止服务器的http服务器\nstart：启动服务器的http服务器\n复制代码\n\n服务端源码地址：https://github.com/LuZWCHA/syncmod\n客户端源码地址：https://github.com/LuZWCHA/ModSyncTool\n\n\n下载地址：服务端：https://www.lanzous.com/b608270\n客户端：https://www.lanzous.com/b375972/\n\n简短的说明（以版本1.6为例）详细文档请到最下方下载说明文档：\n\n软件首先分为三个主界面：本地文件扫描，服务器同步，服务器设置；\n1）本地文件扫描：作为文件同步的第一步，你必须完成本地的文件扫描才能进行同步，每次扫描完**会创建本地的缓存，所以不要轻易删除mod文件夹下的那两个文件哦。至于扫描速度和准确度在帖子开端已经进行了解释，在此不赘述；2）服务器同步：你只需要点击同步就开始所有mod的同步。同步可以打断，暂时不支持单任务暂停，但是整个是支持断点续传的请放心停止；3）服务器设置：在这里你可以设置多个服务器和其对应的更新文件夹方便在不同服务器间切换；在删除前请确定你当前选中的显示服务器不是该服务器，否则会被提示无法删除；\nQ&A:Q:我要怎么建立一个新的“服务器信息” 并更新？A:首先在 服务器设置 界面“新建”一个“服务器信息”，填写服务器的下载地址（这个地址需要由服务端的mod决定，你可以在服务端的mod的config文件夹找到sync的config文件在里面设置端口号来保证每次重启服务器都使用固定的端口，最终的地址就是你的服务器地址加上该端口号）。之后如果是第一次运行程序它会默认使用“默认服务器”，所以你需要打开右上角的齿轮图标（设置）来设置当前的服务器，在下拉框中选中你要进行更新的服务器。之后便完成了当前服务器的选定；\nQ:我要如何删除（编辑）mod列表中的mod 或是 服务器列表中的服务器项？A:对！由于我懒所有选项要点下右键，当然如果你要批量删除mod你可以按住shift多选或者ctrl单独增加或减少选项再右键选择操作；\nQ:我的客户端有一些mod是纯客户端mod（服务端没有），不需要同步，那么怎么保证这些mod不会被更新时删除呢？A:首先，客户端通过扫描按钮扫描到的所有客户端mod都是默认为客户端mod，并被软件打上“client”标签，所有通过软件下载得到的mod都默认为服务端mod，并同样被打上\"server“标签；所以当你扫描出的mod中有些是服务端mod的话，请手动右键该mod选项，并切换为服务端mod，同样的你新添加的mod如果不小心被标记成服务端mod你可以右键选择切换为客户端mod来防止删除；为了方便，如果整合包中使用了这个软件，作者可以考虑保持mod文件夹为空，进行一次服务端的同步，最后加入客户端mod；\nQ:如何保持在整合包的路径映射关系可以在其他电脑上正常找到路径？A:考虑到可能放入一个客户端的整合包中（连带所有的目录），但是在不同电脑上的绝对路径不同，请首先保证你的需要更新的文件夹在软件路径的可达子路径下，在设置（右上角）中对该映射选择尝试使用相对路径的切换按钮并保存。\nQ:如何更新软件？A:是右上角的”!”图标哦，由于感人的github网速，可能更新时会比较慢，下载中断后时支持断点续传的，所以如果觉得挡住了你的视线影响了你的当前工作线把它关了，至于为什么这样设计，因为我懒啊！\n已知BUG: 1.在扫描时切换当前服务器导致扫描未暂停并没有刷新；2.在下载时切换当前服务器造成未知错误；3.删除当前监控的目录造成监听进程失效；... ...\n当然以上bug我是绝对懒得去修复的（除非你手贱一般不会发生）\n说明文档地址：https://www.lanzous.com/i6l55bi\n\n\n\n\n\n\n\n\n1.3b截图.png\n(37.03 KB, 下载次数: 4)\n\n\n\n\n下载附件\n\n\n2019-1-28 16:28 上传\n\n\n\n\n\n\n\n\n客户端1.3b截图\n\n\n\n\n\n\n\n\n\n\n\n客户端1.6.png\n(62.17 KB, 下载次数: 2)\n\n\n\n\n下载附件\n\n\n2019-8-19 22:18 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "5uuwinn",
            "timestamp": 1548659100,
            "txt_content": "支持原创，支持作者！谢谢你的开发。"
        },
        {
            "author": "谁说的是东",
            "timestamp": 1560780660,
            "txt_content": "服务端下载链接挂了"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1560935220,
            "txt_content": "谁说的是东 发表于 2019-6-17 22:11\n服务端下载链接挂了\n                                      补了"
        },
        {
            "author": "qq2746167713",
            "timestamp": 1563221820,
            "txt_content": "谢谢分享，先留眼"
        },
        {
            "author": "reshuffle",
            "timestamp": 1565771400,
            "txt_content": "\n\n\n\n\nQQ图片20190814162840.png (11.31 KB, 下载次数: 0)\n\n下载附件\n\n2019-8-14 16:29 上传\n\n\n\n\n\n请问一下如果出现这种问题需要怎么解决呢\n服务器地址是要填要填FTP的地址吗\n"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1565853600,
            "txt_content": " 本帖最后由 luzhengwei 于 2019-8-15 15:26 编辑 \nreshuffle 发表于 2019-8-14 16:30\n请问一下如果出现这种问题需要怎么解决呢\n服务器地址是要填要填FTP的地址吗\n ...\n地址是服务器地址加上http服务器设置的端口号如果你不设置端口号会随机选取空闲端口，你可以看服务器的启动消息打印里面会打印端口号，也可以到配置文件（就是普通mod 的配置文件，你找到然后修改port后面的数字再启动服务器）里自己固定一个端口号。"
        },
        {
            "author": "cosnet",
            "timestamp": 1570188480,
            "txt_content": "楼主 有时间出详细的教程嘛 我看不懂 如果有视频教程就更好了"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1570247220,
            "txt_content": "cosnet 发表于 2019-10-4 19:28\n楼主 有时间出详细的教程嘛 我看不懂 如果有视频教程就更好了\n加了个说明文档在帖子末尾，具体的我已经尽力说明了，如果细节不懂的话可以私信我，假期应该还能回复。"
        },
        {
            "author": "cosnet",
            "timestamp": 1570255020,
            "txt_content": "luzhengwei 发表于 2019-10-5 11:47\n加了个说明文档在帖子末尾，具体的我已经尽力说明了，如果细节不懂的话可以私信我，假期应该还能回复。 ...\n谢谢楼主 不懂在找你"
        },
        {
            "author": "a1623495922",
            "timestamp": 1570354740,
            "txt_content": "辛苦了，楼主很棒帮！！！！！！！！！！！！"
        },
        {
            "author": "1051541160",
            "timestamp": 1581799200,
            "txt_content": "更改同步文件夹路径无效。。"
        },
        {
            "author": "1051541160",
            "timestamp": 1581799320,
            "txt_content": "还有MOD含有中文字也不能同步。。"
        },
        {
            "author": "1207365961",
            "timestamp": 1581945720,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1582208880,
            "txt_content": " 本帖最后由 luzhengwei 于 2020-2-20 22:31 编辑 \n1051541160 发表于 2020-2-16 04:42\n还有MOD含有中文字也不能同步。。\n请问下具体是有什么报错吗，我这里试了下没有问题==，我不扫描文件名的，应该和文件名没有任何关系，请问是服务端的报错还是客户端报错。"
        },
        {
            "author": "1051541160",
            "timestamp": 1582216200,
            "txt_content": "luzhengwei 发表于 2020-2-20 22:28\n请问下具体是有什么报错吗，我这里试了下没有问题==，我不扫描文件名的，应该和文件名没有任何关系，请问 ...\n客户端报错，显示的名字规则错误，还有路径是真的改不了鸭 感谢大佬"
        },
        {
            "author": "1051541160",
            "timestamp": 1582216440,
            "txt_content": "luzhengwei 发表于 2020-2-20 22:28\n请问下具体是有什么报错吗，我这里试了下没有问题==，我不扫描文件名的，应该和文件名没有任何关系，请问 ...\n路径不管怎么改都是同步的mods目录"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1582266480,
            "txt_content": "1051541160 发表于 2020-2-21 00:30\n客户端报错，显示的名字规则错误，还有路径是真的改不了鸭 感谢大佬\n能截个图吗，我真的不能理解，同步文件夹是靠文件浏览器选出来的不是自己填的，不知道你是怎么报那个错的=="
        },
        {
            "author": "1051541160",
            "timestamp": 1582267320,
            "txt_content": "luzhengwei 发表于 2020-2-21 14:28\n能截个图吗，我真的不能理解，同步文件夹是靠文件浏览器选出来的不是自己填的，不知道你是怎么报那个错的 ...\n好的稍等"
        },
        {
            "author": "1051541160",
            "timestamp": 1582267920,
            "txt_content": "luzhengwei 发表于 2020-2-21 14:28\n能截个图吗，我真的不能理解，同步文件夹是靠文件浏览器选出来的不是自己填的，不知道你是怎么报那个错的 ...\n"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1582269840,
            "txt_content": "1051541160 发表于 2020-2-21 14:52\n是只有这一个mod有问题吗？"
        },
        {
            "author": "1051541160",
            "timestamp": 1582270080,
            "txt_content": "luzhengwei 发表于 2020-2-21 15:24\n是只有这一个mod有问题吗？\n所有的都有 只要名字里有中文"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1582272780,
            "txt_content": "1051541160 发表于 2020-2-21 15:28\n所有的都有 只要名字里有中文\n好吧，现在的化我手头由于这次疫情没有那部分代码，把服务器上mod里的中文去掉应该就可以了"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1582272900,
            "txt_content": "luzhengwei 发表于 2020-2-21 16:13\n好吧，现在的化我手头由于这次疫情没有那部分代码，把服务器上mod里的中文去掉应该就可以了 ...\n这个确实我没考虑，以前测试时候linux服务器都是用英文命名的一直没发现"
        },
        {
            "author": "1051541160",
            "timestamp": 1582273380,
            "txt_content": "luzhengwei 发表于 2020-2-21 16:15\n这个确实我没考虑，以前测试时候linux服务器都是用英文命名的一直没发现\n好的 感谢大佬\n还有就是路径更改无效是什么鬼。。"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1582274640,
            "txt_content": "1051541160 发表于 2020-2-21 16:23\n好的 感谢大佬\n还有就是路径更改无效是什么鬼。。\n客户端的路径还是服务端的路径，客户端的路径我试了是可以的"
        },
        {
            "author": "1051541160",
            "timestamp": 1582275420,
            "txt_content": "luzhengwei 发表于 2020-2-21 16:44\n客户端的路径还是服务端的路径，客户端的路径我试了是可以的\n服务端的"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1582277040,
            "txt_content": " 本帖最后由 luzhengwei 于 2020-2-21 17:27 编辑 \n1051541160 发表于 2020-2-21 16:57\n服务端的\n哈哈，服务端那个当时没写完，然后有一次我把工程不小心全删了导致一直没去加==，主要是逻辑上有一些硬伤，要增加挺多东西的后来就一直拖着了"
        },
        {
            "author": "1051541160",
            "timestamp": 1582277220,
            "txt_content": "luzhengwei 发表于 2020-2-21 17:24\n哈哈，服务端那个当时没写完，然后有一次我把工程不小心全删了导致一直没去加==，主要是逻辑上有一些硬伤 ...\n哈哈哈 有点尴尬\n搞的我弄了半天"
        },
        {
            "author": "luzhengwei",
            "timestamp": 1582277640,
            "txt_content": "1051541160 发表于 2020-2-21 17:27\n哈哈哈 有点尴尬\n搞的我弄了半天\n因为要下载的mod我是在服务端读出来的，如果你换了文件夹，可能 会找不到对应的mod所以我后来一直没想到好的方案，一种方式就是和客户端一样再扫描一遍你设定的文件夹，这种是自动的，但是对于服务器代价太大，字节码扫描太慢了如果不榨取服务器的cpu的话速度就会非常慢几分钟十几分钟都有可能，还有一种就是要求服务器管理者保证文件名有对应关系，但这样又太麻烦了，最后就是你每次修改你设置的文件夹就要保证和原文件夹一样，但这就真的失去它的意义了，所以我还没考虑好怎么处理。"
        }
    ]
}