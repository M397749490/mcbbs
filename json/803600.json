{
    "title": "【教程？？？】让你的自定义NPC不再受到伤害脚本——免疫指定伤害",
    "author": "Hueihuea",
    "replyCount": 22,
    "timestamp": 1530868500,
    "txt_content": " 本帖最后由 skpsk自己家 于 2019-8-6 09:30 编辑 \n\n或许NPC的脚本在国内有点小众吧……\n你如果是一个RPG服腐竹（服务器还加了拔刀and自定义NPC）\n是否因为NPC被拔刀之类的逆天武器连上天而烦恼呢或许没有\n\n需要用到的东西：\n1.一双手 2.nashorn 3.随便什么文本编辑器\n\n这个帖子能让你NPC怎么样：\n不受某些伤害的影响 比如：铁砧砸 幻影剑 神秘的法杖\n\n第一步：配置环境①\n如果你之前给服务器和本地添加了nashorn.jar 可以跳过\n（其实其他脚本语言一样可行但是需要修改一些东西 因为API是不变的 但是语**有变化）\n\n找到你安装的java\n然后打开\nX：xxxx\\jre-xxxx\\lib\\ext\n里面会有一个nashorn.jar\n请和装mod一样 把他塞到mods文件夹\n\n如果有服务端 请把服务端mod也装上nashorn.jar\n\n第二步：配置环境②\n打开你的游戏\n找到你要修改的NPC 拿出脚本魔杖 对他右键\n看“语言”是不是ECMAScript\n把“开启”设为是\n\n\n第三步：了解代码\n\n\nvar getItem=null;\nvar getType=null;\ntry{\ngetItem=event.getSource().getHeldItem().getName()\ngetType=event.getType()\n}\ncatch(err){}//上面的都不用改\n\nfor(var i=0;i<1;i++){\nswitch(i){\ncase 0:\nif((getItem+\"\").indexOf(\"slashblade\")!=-1)event.setCancelled(true)\ncase 1:\nif(getType==\"directMagic\")event.setCancelled(true)\nif(getType==\"directMagic\")event.setDamage(0)\n }\n}\n//npc.say(\"item:\"getItem)\n//npc.say(\"type:\"getType)复制代码\n                                    这是一串非常简单易懂的代码（我也写不出NB的好吧）\n目前已经是预设好免疫拔刀和幻影剑伤害了\n现在我们来说说怎么改\n首先 我们认识两个变量：\ngetItem和getType\ngetItem就是玩家攻击时手里拿的武器\n（除非他切换武器的速度比你电脑计算速度还快 否则就是攻击所使用的物品）\ngetType就是伤害类型（也不知道怎么解释）\n\n然后 我们要配置更多的禁用\n下面这段是调试用的代码\n//npc.say(\"item:\"+getItem)\n//npc.say(\"type:\"+getType)\n它是被注释过的\n                    我们怎么让他运行呢 把前面的”//“删掉就可以了（加上去又不能运行了）\nnpc.say(\"item:\"+getItem)\nnpc.say(\"type:\"+getType)\n删掉以后，我们攻击他时 就会反顾数据给我们\nitem就是物品的注册名\n                                          type就是伤害类型（玩家 药水 幻影剑 爆炸 掉落等）\n那我们要怎么禁止物品或者伤害类型呢\nfor(var i=0;i<1;i++){\nswitch(i){\ncase 0:\nif((getItem+\"\").indexOf(\"slashblade\")!=-1)event.setCancelled(true)\ncase 1:\nif(getType==\"directMagic\")event.setCancelled(true)\nif(getType==\"directMagic\")event.setDamage(0)\n}\n}\n复制代码重要的事先说：\n如上代码\ni<1\n这里的”1“就是你要禁止的物品数量（从0开始）\n\n对没有编程基础的同学有点难解释\n还是举例子吧\n比如我用钻石剑打了NPC一下\n返回的是\nitem：minecraft:diamond_sword\ntype:player\nminecraft:diamond_sword就是钻石剑的注册名\nplayer就代表是type是玩家伤害\n那我们可以改写下代码\nfor(var i=0;i<2/*这里改成了2*/;i++){\nswitch(i){\ncase 0:\nif((getItem+\"\").indexOf(\"slashblade\")!=-1)event.setCancelled(true)\ncase 1:\nif(getType==\"directMagic\")event.setCancelled(true)\nif(getType==\"directMagic\")event.setDamage(0)\ncase 2:\nif((getItem()+\"\")).indexOf(\"minecraft:diamond_sword\")!=-1)event.setCancelled(true)复制代码也就是 i小于的数量一定要比有的case大或者等于\n如 我有0~100个case 但是我i<1000也可以\n但是 如果我有0~100个case 但是我i<1就不可以了\n\n其实也不一定把注册名写完 选一段他独有的就可以\n比如minecraft:diamond_sword可以写成diamond_sword甚至d_sword\n建议全部写完\n\ntype也是差不多的道理(type不能像item取一段 必须写完)\nfor(var i=0;i<3/*这里改成了3*/;i++){\nswitch(i){\ncase 0:\nif((getItem+\"\").indexOf(\"slashblade\")!=-1)event.setCancelled(true)\ncase 1:\nif(getType==\"directMagic\")event.setCancelled(true)\nif(getType==\"directMagic\")event.setDamage(0)//这串代码不用管一般情况下用不上\ncase 2:\nif((getItem()+\"\")).indexOf(\"minecraft:diamond_sword\")!=-1)event.setCancelled(true)\ncase = 3:\nif(getType==\"player\")event.setCancelled(true)\n}\n}复制代码一些注意事项：\n1.“player”这样子 一定要加“”不能写成player\n2.如果你不是很懂编程 千万别动{}括号 尽管有 也别手贱吧\n3.有什么问题 可以回帖问我\n4.本代码目前仅支持1.7.10的自定义NPCmod 更高版本过几天会写一下 弄在下面\n（其实只是语法的不同 思路还是这个样子 甚至API都差不多）\n5.我第一次发这种贴如果发错版了 那就发错了吧\n6.我可能表达得不是很好 所以不懂就问吧……\n\n\n\n",
    "replies": [
        {
            "author": "星层",
            "timestamp": 1530872880,
            "txt_content": "这个因该在mod教程更好点吧"
        },
        {
            "author": "粘兽",
            "timestamp": 1531633920,
            "txt_content": "帖子真是惨淡\n还有最后面那串代码\n<font color=\"#ff0000\">3</font>"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1531656240,
            "txt_content": "粘兽sama 发表于 2018-7-15 13:52\n帖子真是惨淡\n还有最后面那串代码\nemm 颜色的锅 本来是红色的 放到里面就变成代码了"
        },
        {
            "author": "暗流你不行？",
            "timestamp": 1533137220,
            "txt_content": "好像不是挺懂 楼主能加下QQ吗"
        },
        {
            "author": "2048028141",
            "timestamp": 1533177060,
            "txt_content": "很有帮助 楼主辛苦了"
        },
        {
            "author": "yuan_kun",
            "timestamp": 1535809980,
            "txt_content": "服务端和客服端也要装？"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1535810400,
            "txt_content": "yuan_kun 发表于 2018-9-1 21:53\n服务端和客服端也要装？\n客户端写的人装就行(似乎是这样)\n服务端一定要装"
        },
        {
            "author": "我心不变",
            "timestamp": 1535873460,
            "txt_content": "正是我想找的东西 ，谢谢，楼主辛苦了"
        },
        {
            "author": "Colin_Sakuya",
            "timestamp": 1563776220,
            "txt_content": "看起来挺实用的，顶起来"
        },
        {
            "author": "qq1829842455",
            "timestamp": 1565051220,
            "txt_content": "我复制你的第一段代码，控制台返回下列信息，是什么意思啊？\n<eval>:18:15 Expected , but found getItem\nnpc.say(\"item:\"getItem)\n               ^ in <eval> at line number 18 at column number 15"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1565054940,
            "txt_content": "qq1829842455 发表于 2019-8-6 08:27\n我复制你的第一段代码，控制台返回下列信息，是什么意思啊？\n:18:15 Expected , but found getItem\nnpc.say ...\n我忘记打+了\n字符串用+连接"
        },
        {
            "author": "qq1829842455",
            "timestamp": 1565056440,
            "txt_content": "skpsk自己家 发表于 2019-8-6 09:29\n我忘记打+了\n字符串用+连接\n好的，谢谢"
        },
        {
            "author": "xiaohei52142",
            "timestamp": 1565070300,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "小学妹",
            "timestamp": 1566555660,
            "txt_content": "怎么加？？？？？"
        },
        {
            "author": "小学妹",
            "timestamp": 1566555900,
            "txt_content": "file:///C:/Users/Administrator/Desktop/%E6%97%A0%E6%A0%87%E9%A2%98.png"
        },
        {
            "author": "小学妹",
            "timestamp": 1566555900,
            "txt_content": "eeeeeeeeeee"
        },
        {
            "author": "小学妹",
            "timestamp": 1566556020,
            "txt_content": "C:\\MCLDownload\\Game\\.minecraft\\mods"
        },
        {
            "author": "小学妹",
            "timestamp": 1566556140,
            "txt_content": "加在这里之后打开游戏就出问题了\n让我卸载组件后重试，我不加的话就没事，而且一打开游戏他会自动删除这个东西？"
        },
        {
            "author": "小学妹",
            "timestamp": 1566556200,
            "txt_content": "我的地图文件是这个C:\\MCLDownload\\Game\\.minecraft\\saves\\LanGame-d8ec6ac8-bed0-4e0d-9405-aefbfad1ad20"
        },
        {
            "author": "M.A.G.M.A",
            "timestamp": 1567850040,
            "txt_content": "楼主的思路是好的\n但是拔刀剑配置文件里可以改\n简单粗暴的让NPC免疫部分SA、剑气、右键等等伤害\n除了NPC之外....\n还可以设置其它生物吗？\n"
        },
        {
            "author": "静虚之锤",
            "timestamp": 1582163160,
            "txt_content": "楼主，我不是很懂我想做剧情，能加QQ吗?"
        },
        {
            "author": "walle1996",
            "timestamp": 1585309620,
            "txt_content": "我想知道NPC路径怎么弄"
        }
    ]
}