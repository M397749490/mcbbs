{
    "title": "【1.8】有序合成与无序合成（渣讲解）",
    "author": "爱心魔王FHC",
    "replyCount": 11,
    "timestamp": 1472968080,
    "txt_content": "的图是不是没了？",
    "replies": [
        {
            "author": "2209802631",
            "timestamp": 1472968080,
            "txt_content": "FHC红石 发表于 2016-9-4 13:48\n话说你前面的图是不是没了？\n好吧，我没注意到，被吃了.."
        },
        {
            "author": "2209802631",
            "timestamp": 1472968140,
            "txt_content": "标题: 【1.8】有序合成与无序合成（渣讲解） 本帖最后由 2209802631 于 2016-9-5 19:38 编辑 \n\n在Minecraft的合成中无非两种——有序合成、无序合成 (众：废话)。原版中的合成基本上都是在合成台或者背包自带四格合成的。但是我们在很多原版模组中可以看到把几件东西扔在地上的合成方式，这就是基于原版命令方块的无序合成。无序合成这里我举了一个合成有序合成台的配方，当然的,配方可以自定义。\n\n\n\n\nQQ图片20160904120934.png (4.15 KB, 下载次数: 6)\n\n下载附件\n\n2016-9-4 13:50 上传\n\n\n\n\n这是参与合成的三种配方。把他们扔出来以后，见朕骑妓(划掉)的时刻到了。\n\n\n\n\nQQ图片20160904121423.png (4.2 KB, 下载次数: 5)\n\n下载附件\n\n2016-9-4 13:59 上传\n\n\n\n\n\n\n\n\n\nQQ图片20160904121744.png (25.45 KB, 下载次数: 6)\n\n下载附件\n\n2016-9-4 13:59 上传\n\n\n\n\n先来理一下思路：可以看到我们把东西扔到一起了以后，就生成了一个刷怪蛋，然后我们原来的配方就不见了。要知道，掉落物也算是实体，可以被execute检测，那么，这就会很容易了。首先实时检测是否有我们要的配方被扔在了一起，然后summon召唤出来出一个我们的合成结果，并且在下一次判定之前杀掉原来的配方。关于怎么探测是否是我们要的配方，就需要我们用一个计分板来辅助我们了。(因为execute加不了{Item})scoreboard objectives add zpt dummy复制代码这里我创建了一个叫做zpt的虚拟变量。图中灰色羊毛上下两个命令方块一起构成一个fill高频。上面的命令是fill ~ ~-1 ~ ~10 ~-1 ~ redstone_block复制代码下面的命令是fill ~ ~1 ~ ~10 ~1 ~ air复制代码反正也不用多说，很简单的。（然而已经说了不少了）然后两个命令方块之间放上红石块，就开始刷屏了。然后黄色、绿色、粉色的命令方块里的命令就很简单了。scoreboard players set @e[type=Item] zpt 3 {Item:{id:\"minecraft:dropper\",Count:1b}}复制代码scoreboard players set @e[type=Item] zpt 2 {Item:{id:\"minecraft:redstone_block\",Count:1b}}\n复制代码scoreboard players set @e[type=Item] zpt 1 {Item:{id:\"minecraft:iron_block\",Count:1b}}\n复制代码\n总之，格式就是scoreboard players set @e[type=Item] zpt 1、2、3..... {Irem:{id:\"minecraft:物品id名\"，Count:数量b,Damage:损伤值s}}复制代码这些b什么s什么的是单位，推荐加上，以防失误。这几个命令的意义在于：刚才说execute是不能加{Item}的，但是计分板可以，所以我们要想让他在海一样的掉落物中找到我们要的配方，就只能用实体选择参数。因此设置的分数，即1/2/3什么的不能重复，这也是我们取巧的地方，就不需要设置多个计分板项了。这就给我们三个合成配方的掉落物加分了。然后我们就进行合成了execute @e[score_zpt=1,score_zpt_min=1] ~ ~ ~ execute @e[score_zpt=2,score_zpt_min=2,r=0] ~ ~ ~ execute @e[score_zpt=3,score_zpt_min=3,r=0] ~ ~ ~ summon Item ~ ~ ~ {Item:{id:\"minecraft:spawn_egg\",Count:1b,Damage:50s,tag:{display:{Name:\"Assembly\",Lore:[\"用于生成一个装配台\"]}}}}复制代码这就是蓝色羊毛下的指令，看起来稍微长一点，当然是最重要的指令了。咱们一点一点分析。execute高频探测是否存在计分板项目为1、2、3的物品，受到r=0的限制,(很奇怪...r=0,实际上相当于半径?格)这个命令的探测部分意思就是探测是否有zpt计分板项目为1、2、3的物品堆叠在一起。这里没有对选择器参数中增加type=Item的原因是，前面我们给配方加分的时候已经设置了掉落物的类型，被加分被标记的只可能是Item了。如果前面条件全部符合，就执行后面的指令，即生成一个苦力怕蛋(也就是我们合成的结果)。综上所述,这个命令就是说探测是否有我们要的合成配方堆叠在一起，如果有就原地生成一个掉落物——合成结果。这是上面指令的模板execute @e[score_计分板名称=之前设置给配方的分数,score_计分板名称_min=之前设置给这个配方的分数] ~ ~ ~ execute...(重复部分略过，注意后面中括号的内容需要增加r=0，与前面的其他内容用逗号\",\"隔开) summon Item ~ ~ ~ {Item:{id:\"minecraft:合成结果名称\",Count:数量b，Damage:损伤值s,tag:{nbt标签,即give指令中大括号中的内容，最外面的大括号略过，其他的括号不可以省略}}}复制代码这就可以合成了，但是如果你试验一下 = =反正我是不敢试，我机子本来就渣。可能反应快的早就反应过来了，是的！配方没有被杀掉！于是我们发现我们的fill高频很给力,一秒20下... = =所以我们需要尽快地杀掉这个配方。和上面一样,我们又需要用到计分板标记一下我们的合成结果了。如果你担心弄混掉可以再另外设置一个计分板项目，这里由于我就只设置了一个合成，我就继续用了原来的计分板项目。scoreboard players set @e[type=Item] zpt 4 {Item:{id:\"minecraft:spawn_egg\",Count:1b,Damage:50s,tag:{display:{Name:\"Assembly\",Lore:[\"用于生成一个装配台\"]}}}}复制代码这是橙色羊毛的指令,指令后面一堆(tuo)东西，（Item什么什么的）,就是刚才指令中的（论CV大法）。我这里把结果设置成zpt项的4分，这么做的目的是造成微延时.如果你的输出不是掉落物形式的，清理掉配方就需要考虑到x y z坐标的大小了。我这里是这么杀掉配方物品的 execute @e[score_zpt=4,score_zpt_min=4] ~ ~ ~ kill @e[score_zpt=3,score_zpt_min=1,r=1]复制代码这个指令在白色里面，是用来探测是否出现了分数为4的物品，也就是我们之前设置的合成结果，如果有就杀掉zpt分数在3到1之间,距离合成结果半径为1的所有实体，即之前参与合成的配方。到这里无序合成部分就结束了，什么？还有一个一个命令方块？嗯，是的，我图截错了。(事实证明他是下面的...)有序合成刚刚，我们合成了一个苦力怕的 蛋蛋(gao wan),我之前提到过,他是我们有序合成的合成台，好的，我们把他放下来。就决斗是你了！苦力怕！(Creeper:为什么是我啊！！！)然后他就牺牲了...(太快了，图截不下来)而他，为了让我们知道他的存在，他在死前留下了“装配台”\n\n\n\n\nQQ图片20160904131922.png (22.46 KB, 下载次数: 7)\n\n下载附件\n\n2016-9-4 13:21 上传\n\n\n\n\n\n这是我在电路里面设置好的配方\n\n\n\n\nQQ图片20160904132141.png (6.45 KB, 下载次数: 9)\n\n下载附件\n\n2016-9-4 13:14 上传\n\n\n\n\n我照样子在装配台里面摆一次再次见朕骑妓(呸，呸呸)\n\n\n\n\nQQ图片20160904132408.png (4.92 KB, 下载次数: 6)\n\n下载附件\n\n2016-9-4 13:17 上传\n\n\n\n\n这里主要用了execute,clone(也可以用blockdata达到更好的体验效果)和testforblocks，其实合成很简单，检测出是否合成台里面摆出来了我们定义的配方。然后把我们装有合成结果的工作台clone过来(或者blockdata直接更改物品)。这里为什么用投掷器(或者发射器)呢?因为原版的工作台其实不是容器(关闭GUI东西会喷出来)，所以我们需要找到一个容器。因为投掷器(或者发射器)跟原版工作台都是9个格子，十分像。按照激活顺序(图中是右到左)依次是execute @e[name=Assembly,type=Creeper] ~ ~ ~ summon ArmorStand ~ ~ ~ {Invisible:1b,Small:1b,Nogravity:1b}复制代码execute @e[name=Assembly,type=Creeper] ~ ~ ~ setblock ~ ~ ~ dropper 0 0 {CustomName:\"装配台\"}复制代码execute @e[name=Assembly,type=Creeper] ~ ~ ~ tp @e[type=Creeper,r=0,c=1] ~ ~-256 ~复制代码execute @e[type=ArmorStand,name=zpt] ~ ~ ~ detect ~ ~ ~ air 0 kill @e[type=ArmorStand,r=0,c=1]\n复制代码可以看到在我们刚才召出来的苦力怕那里放置了一个投掷器，名字叫做装配台,装配台哪儿还有一个叫做zpt的隐形的,无重力的小盔甲架。这个盔甲架就是我们定位合成台(投掷器)的关键。(当然，头上的羊毛可以不要，我只是为了可以看清楚)，然后立即把creeper tp到虚空里面去(这里不用kill，是为了防止经验和火药齐飞).最后一条指令是检测那个盔甲架处于的位置还是否是一个投掷器（即是否是空气），如果不是，就立即清除掉那个盔甲架,以免产生bug.。\n\n\n\n\n\nQQ图片20160904133842.png (27.91 KB, 下载次数: 10)\n\n下载附件\n\n2016-9-4 13:40 上传\n\n\n\n\n\n这是储存合成配方和合成结果的地方。上面的投掷器装的是合成配方，下面的是合成结果。值得注意的是：投掷器的方向要和你之前设置的合成台的方向一样，名字也要一样，比如我这里都是嘴朝下，名字都叫做装配台。靠上的命令方块中的命令是这样的execute @e[type=Player] ~ ~ ~ execute @e[type=ArmorStand,name=zpt,r=6] ~ ~ ~ testforblocks ~ ~ ~ ~ ~ ~ -8 55 -3 all其中 -8 55 -3是储存合成配方的投掷器的坐标。所以这个指令是execute @e[type=Player] ~ ~ ~ execute @e[type=ArmorStand,name=zpt,r=6] ~ ~ ~ testforblocks ~ ~ ~ ~ ~ ~ 配方的x y z all复制代码其实用masked模式也是一样的...意义很简单就是检查实体玩家(话说是不是该用@a...)再检查玩家半径6的范围内有没有那个小盔甲架(现在盔甲架就代表合成台了.为什么r=6?因为史蒂夫的手有5格长，所以当你站在超过6的地方的时候，你一定打不开投掷器)。下面那个命令方块指令是execute @a ~ ~ ~ execute @e[type=ArmorStand,name=zpt,c=1,r=6] ~ ~ ~ clone -8 52 -1 -8 52 -1 ~ ~ ~同理 -8 52 -1 是我储存结果的地方。即execute @a ~ ~ ~ execute @e[type=ArmorStand,name=zpt,c=1,r=6] ~ ~ ~ clone 结果的x y z x y z ~ ~ ~复制代码这是最后输出的结果，也很简单。检测跟上面的一样，然后就把那个投掷器的地方换成我们带有结果的投掷器，看起来就和合成出来的一样了。但是这个系统存在一个bug，我也不知道该怎么修复，就是说，当两个同样的合成在小于2gt的时间里被摆出来，会导致这个配方不可以再次合成。"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1472968620,
            "txt_content": "好高深，看不明白哎~"
        },
        {
            "author": "爱心魔王FHC",
            "timestamp": 1472970000,
            "txt_content": "关于最后一个BUG，你可以比较器后面连接活塞，然后活塞挡住高频线路\n只有活塞被激活了，线路才不会挡住，然后就会一直clone直到配对失败（clone完就配对失败了）"
        },
        {
            "author": "浅梦l",
            "timestamp": 1472971680,
            "txt_content": "楼主我对这个很感兴趣，请问你能上传存档让我学习一下么？？因为我看起来感觉好复杂的样子....."
        },
        {
            "author": "1448035301",
            "timestamp": 1472972400,
            "txt_content": "楼主你太6了，我本来打算自己做个MOD整合包做个RPG地图的，看了你的方法，我都打算这样做呢！感谢楼主！！！"
        },
        {
            "author": "2209802631",
            "timestamp": 1472972460,
            "txt_content": "浅梦l 发表于 2016-9-4 14:48\n楼主我对这个很感兴趣，请问你能上传存档让我学习一下么？？因为我看起来感觉好复杂的样子..... ...\n为了防止我的毛片暴露，吓得我赶紧重新弄了个账号   https://pan.baidu.com/s/1o8KYvIq"
        },
        {
            "author": "爱心魔王FHC",
            "timestamp": 1472979900,
            "txt_content": "好吧，如果要修那个BUG，可能要再来的计分板"
        },
        {
            "author": "Faker6",
            "timestamp": 1472982720,
            "txt_content": "哈哈哈哈哈十五字哈哈哈呵呵呵呵"
        },
        {
            "author": "1768019994",
            "timestamp": 1473653340,
            "txt_content": "好深奥，可惜我是个红石盲"
        },
        {
            "author": "迷失自我",
            "timestamp": 1473833580,
            "txt_content": "挺有趣的，来学习学习"
        }
    ]
}