{
    "title": "服务器TPS一直得不到改善",
    "author": "超级粒子炮",
    "replyCount": 10,
    "timestamp": 1573983360,
    "txt_content": " 本帖最后由 超级粒子炮 于 2019-11-26 16:53 编辑 \n\n我的服务器一开始TPS就不是很高……中间也做了许多优化。看了MCBBS许多的优化教程，也看了spigot论坛的优化教程，还买了优化插件。但后台还是经常报“ Can't keep up! Is the server overloaded? Running xxxxx ms or xxx ticks behind”看到Github说汉化的粘液科技严重卡服..我就想换成了英文版，然后今天中午我换成了英文版，换了之后20多个玩家在线，TPS确实比以前高了很多(TPS基本在20,偶尔浮动)，使用汉化版的时候TPS就在10左右徘徊。但是只是高了一个小时左右吧。然后TPS又像往常一样，变得很低。中间也出现了奇怪的报错(虽然看不懂..)。附件是近两天服务器的日志。\n\n\n\n\n",
    "replies": [
        {
            "author": "a1294790523",
            "timestamp": 1573999800,
            "txt_content": "不说别的，建议你先把插件都更新到最新版本再说\n然后你的服务商是什么？\n启动参数是什么？"
        },
        {
            "author": "gfjhf",
            "timestamp": 1574000220,
            "txt_content": "1.14垃圾优化 我开个1.14服都想吐血了，看你tps你可以试试安装这个插件\nhttps://www.mcbbs.net/forum.php? ... Btype%5D%3Dcheckbox"
        },
        {
            "author": "超级粒子炮",
            "timestamp": 1574001540,
            "txt_content": "bgfjhf 发表于 2019-11-17 22:17\n1.14垃圾优化 我开个1.14服都想吐血了，看你tps你可以试试安装这个插件\nhttps://www.mcbbs.net/forum.php?m ...\n这个插件在我发的插件列表里。。，是SAML，一直都在用"
        },
        {
            "author": "超级粒子炮",
            "timestamp": 1574002560,
            "txt_content": "提示: 该帖被管理员或版主屏蔽"
        },
        {
            "author": "a1294790523",
            "timestamp": 1574004480,
            "txt_content": "超级粒子炮 发表于 2019-11-17 22:56\n插件我每周都更新，真的!\n服务商是某宝一个13年老店。。\n启动参数参考这里。。的(最大内存和最小内存都是6 ...[14:32:22] [Server thread/INFO]: [LimitPillagers] 检查更新...\n[14:32:24] [Server thread/INFO]: [LimitPillagers] 检测到新版! ( 2.10.0 > 2.11.0 ), go download it at https://www.spigotmc.org/resources/69733\n\n[14:32:35] [Server thread/INFO]: [GroupManager] Enabling GroupManager v3.1*\n[14:32:36] [Server thread/INFO]: [GM+] -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-\n[14:32:36] [Server thread/INFO]: [GM+] \n[14:32:36] [Server thread/INFO]: [GM+] YOU ARE USING OLD VERSION! (3.1)\n[14:32:36] [Server thread/INFO]: [GM+] NEW VERSION: 3.2\n[14:32:36] [Server thread/INFO]: [GM+] \n[14:32:36] [Server thread/INFO]: [GM+] Please update plugin to the latest version!\n[14:32:36] [Server thread/INFO]: [GM+] Link: https://www.spigotmc.org/resources/40615/\n[14:32:36] [Server thread/INFO]: [GM+] \n[14:32:36] [Server thread/INFO]: [GM+] -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-\n更新一下呗\n\n14:32:30] [Server thread/INFO]: [CS-CoreLib] Enabling CS-CoreLib vDEV - 78 (git 199e1b1e)\n[14:32:31] [Server thread/WARN]:  \n[14:32:31] [Server thread/WARN]: ################## - DEVELOPMENT BUILD - ##################\n[14:32:31] [Server thread/WARN]: You appear to be using an experimental build of CS-CoreLib\n[14:32:31] [Server thread/WARN]: Version DEV - 78 (git 199e1b1e)\n[14:32:31] [Server thread/WARN]:  \n[14:32:31] [Server thread/WARN]: Auto-Updates have been disabled. Use at your own risk!\n[14:32:31] [Server thread/WARN]:  \n另外的话插件尽量不要使用开发版，换成这个看看：https://dev.bukkit.org/projects/cs-corelib/files/2721831\n\n我感觉应该是内存的问题，建议你将内存下调到5.5G\n应该是内存爆满触发与虚拟内存的交换了"
        },
        {
            "author": "超级粒子炮",
            "timestamp": 1574005320,
            "txt_content": "a1294790523 发表于 2019-11-17 23:28\n更新一下呗\n\n\n\n非常感谢你的建议！我这周会更新他们的。GroupManager+是因为插件作者发布插件时忘记把插件里的旧版本号改新版本号了。导致GroupManager+一直报更新，但是作者没发布新版。。"
        },
        {
            "author": "apzt",
            "timestamp": 1574060460,
            "txt_content": "插件更新下看看吧"
        },
        {
            "author": "1465328477",
            "timestamp": 1574083380,
            "txt_content": "1.14啊。。 优化是真的差\n可以考虑在启动参数上面做研究"
        },
        {
            "author": "超级粒子炮",
            "timestamp": 1574084040,
            "txt_content": " 本帖最后由 超级粒子炮 于 2019-11-18 21:37 编辑 \n\n这个是今天看到的。一个玩家进入服务器卡了一会儿然后TPS跌到16，持续了几秒吧。。然后TPS又升上去了，这个报错这几天我好想也见到过。。\n[21:30:50 INFO]: UUID of player byc89 is e6870919-ede3-31b7-81e8-106b70bf5e5a\n[21:30:57 ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH  - git-Paper-226 (MC: 1.14.4) ---\n[21:30:57 ERROR]: The server has not responded for 10 seconds! Creating thread dump\n[21:30:57 ERROR]: ------------------------------\n[21:30:57 ERROR]: Server thread dump (Look for plugins here before reporting to Paper!):\n[21:30:57 ERROR]: The server is waiting on these chunks: [[( -1066,2289) in 'sc']]\n[21:30:57 ERROR]: ------------------------------\n[21:30:57 ERROR]: Current Thread: Server thread\n[21:30:57 ERROR]:  PID: 24 | Suspended: false | Native: false | State: TIMED_WAITING\n[21:30:57 ERROR]:  Stack:\n[21:30:57 ERROR]:  sun.misc.Unsafe.park(Native Method)\n[21:30:57 ERROR]:  java.util.concurrent.locks.LockSupport.parkNanos(Unknown Source)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.IAsyncTaskHandler.bi(IAsyncTaskHandler.java:131)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.IAsyncTaskHandler.awaitTasks(IAsyncTaskHandler.java:120)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.ChunkProviderServer.getChunkAt(ChunkProviderServer.java:285)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.World.getChunkAt(World.java:373)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.IWorldReader.getChunkAt(IWorldReader.java:80)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.StructureGenerator.getNearestGeneratedFeature(StructureGenerator.java:107)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.ChunkGenerator.findNearestMapFeature(ChunkGenerator.java:73)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.WorldServer.a(WorldServer.java:1647)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootItemFunctionExplorationMap.a(SourceFile:68)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootItemFunctionConditional.apply(SourceFile:35)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootItemFunctionConditional.apply(SourceFile:24)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootItemFunction.a(SourceFile:16)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootItemFunction$$Lambda$4135/2004084890.accept(Unknown Source)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootItem.a(SourceFile:28)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootSelectorEntry$1.a(LootSelectorEntry.java:23)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootSelector.b(SourceFile:75)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootSelector.a(SourceFile:99)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootTable.populateLootDirect(SourceFile:75)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootTable.populateLoot(SourceFile:84)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootTable.populateLoot(SourceFile:89)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.LootTable.fillInventory(SourceFile:108)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.TileEntityLootable.d(TileEntityLootable.java:62)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.TileEntityLootable.createMenu(TileEntityLootable.java:130)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.EntityPlayer.openContainer(EntityPlayer.java:1141)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.BlockChest.interact(BlockChest.java:202)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.IBlockData.interact(IBlockData.java:226)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.PlayerInteractManager.a(PlayerInteractManager.java:486)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.PlayerConnection.a(PlayerConnection.java:1361)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.PacketPlayInUseItem.a(PacketPlayInUseItem.java:27)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.PacketPlayInUseItem.a(PacketPlayInUseItem.java:5)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.PlayerConnectionUtils.lambda$ensureMainThread$0(PlayerConnectionUtils.java:23)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.PlayerConnectionUtils$$Lambda$4015/1600700972.run(Unknown Source)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.TickTask.run(SourceFile:18)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.IAsyncTaskHandler.executeTask(IAsyncTaskHandler.java:136)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.IAsyncTaskHandlerReentrant.executeTask(SourceFile:23)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.IAsyncTaskHandler.executeNext(IAsyncTaskHandler.java:109)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.MinecraftServer.aX(MinecraftServer.java:1029)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.MinecraftServer.executeNext(MinecraftServer.java:1022)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.IAsyncTaskHandler.awaitTasks(IAsyncTaskHandler.java:119)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.MinecraftServer.sleepForTick(MinecraftServer.java:1006)\n[21:30:57 ERROR]:  net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:929)\n[21:30:57 ERROR]:  java.lang.Thread.run(Unknown Source)\n[21:30:57 ERROR]: ------------------------------\n[21:30:57 ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH ---\n[21:30:57 ERROR]: ------------------------------\n[21:30:59 WARN]: Can't keep up! Is the server overloaded? Running 12868ms or 257 ticks behind\n[21:31:00 INFO]: byc89[/222.221.253.76:24095] logged in with entity id 12303 at ([sc]-670.089908770385, 63.338461579681365, 482.18844348262047)\n\n\n\n\n\n\n还有一些其它奇怪的报错。。\n\n\n[21:34:20 WARN]: java.lang.reflect.InvocationTargetException\n[21:34:20 WARN]:  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[21:34:20 WARN]:  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n[21:34:20 WARN]:  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n[21:34:20 WARN]:  at java.lang.reflect.Method.invoke(Unknown Source)\n[21:34:20 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.ObjectID.callFunction(ObjectID.java:115)\n[21:34:20 WARN]:  at de.Ste3et_C0st.FurnitureLib.Events.FurnitureEvents$1.lambda$onPacketReceiving$1(FurnitureEvents.java:67)\n[21:34:20 WARN]:  at org.bukkit.craftbukkit.v1_14_R1.scheduler.CraftTask.run(CraftTask.java:84)\n[21:34:20 WARN]:  at org.bukkit.craftbukkit.v1_14_R1.scheduler.CraftScheduler.mainThreadHeartbeat(CraftScheduler.java:452)\n[21:34:20 WARN]:  at net.minecraft.server.v1_14_R1.MinecraftServer.b(MinecraftServer.java:1171)\n[21:34:20 WARN]:  at net.minecraft.server.v1_14_R1.DedicatedServer.b(DedicatedServer.java:417)\n[21:34:20 WARN]:  at net.minecraft.server.v1_14_R1.MinecraftServer.a(MinecraftServer.java:1098)\n[21:34:20 WARN]:  at net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:925)\n[21:34:20 WARN]:  at java.lang.Thread.run(Unknown Source)\n[21:34:20 WARN]: Caused by: java.lang.NoSuchMethodError: com.sk89q.worldguard.protection.managers.RegionManager.getApplicableRegions(Lorg/bukkit/Location;)Lcom/sk89q/worldguard/protection/ApplicableRegionSet;\n[21:34:20 WARN]:  at de.Ste3et_C0st.ProtectionLib.main.plugins.fWorldGuardv7.getRegion(fWorldGuardv7.java:33)\n[21:34:20 WARN]:  at de.Ste3et_C0st.ProtectionLib.main.plugins.fWorldGuardv7.isOwner(fWorldGuardv7.java:42)\n[21:34:20 WARN]:  at de.Ste3et_C0st.ProtectionLib.main.ProtectionLib.lambda$isOwner$4(ProtectionLib.java:215)\n[21:34:20 WARN]:  at java.util.stream.ReferencePipeline$2$1.accept(Unknown Source)\n[21:34:20 WARN]:  at java.util.ArrayList$ArrayListSpliterator.tryAdvance(Unknown Source)\n[21:34:20 WARN]:  at java.util.stream.ReferencePipeline.forEachWithCancel(Unknown Source)\n[21:34:20 WARN]:  at java.util.stream.AbstractPipeline.copyIntoWithCancel(Unknown Source)\n[21:34:20 WARN]:  at java.util.stream.AbstractPipeline.copyInto(Unknown Source)\n[21:34:20 WARN]:  at java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\n[21:34:20 WARN]:  at java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\n[21:34:20 WARN]:  at java.util.stream.AbstractPipeline.evaluate(Unknown Source)\n[21:34:20 WARN]:  at java.util.stream.ReferencePipeline.findFirst(Unknown Source)\n[21:34:20 WARN]:  at de.Ste3et_C0st.ProtectionLib.main.ProtectionLib.isOwner(ProtectionLib.java:215)\n[21:34:20 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.Protection.ProtectionManager.isOwner(ProtectionManager.java:72)\n[21:34:20 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.Protection.ProtectionManager.canBuild(ProtectionManager.java:106)\n[21:34:20 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.Protection.ProtectionManager.canBuild(ProtectionManager.java:85)\n[21:34:20 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.Protection.ProtectionManager.canBuild(ProtectionManager.java:76)\n[21:34:20 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.FurnitureLib.canBuild(FurnitureLib.java:141)\n[21:34:20 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.FurnitureHelper.canBuild(FurnitureHelper.java:80)\n[21:34:20 WARN]:  at de.Ste3et_C0st.Furniture.Objects.indoor.largeTable.onClick(largeTable.java:196)\n[21:34:20 WARN]:  ... 13 more\n[21:34:20 INFO]: [万圣giao][正版][MEM]~Bocai_BCA >>>来一起把这个蛋糕吃了吧\n[21:34:21 WARN]: java.lang.reflect.InvocationTargetException\n[21:34:21 WARN]:  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n[21:34:21 WARN]:  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n[21:34:21 WARN]:  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n[21:34:21 WARN]:  at java.lang.reflect.Method.invoke(Unknown Source)\n[21:34:21 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.ObjectID.callFunction(ObjectID.java:115)\n[21:34:21 WARN]:  at de.Ste3et_C0st.FurnitureLib.Events.FurnitureEvents$1.lambda$onPacketReceiving$1(FurnitureEvents.java:67)\n[21:34:21 WARN]:  at org.bukkit.craftbukkit.v1_14_R1.scheduler.CraftTask.run(CraftTask.java:84)\n[21:34:21 WARN]:  at org.bukkit.craftbukkit.v1_14_R1.scheduler.CraftScheduler.mainThreadHeartbeat(CraftScheduler.java:452)\n[21:34:21 WARN]:  at net.minecraft.server.v1_14_R1.MinecraftServer.b(MinecraftServer.java:1171)\n[21:34:21 WARN]:  at net.minecraft.server.v1_14_R1.DedicatedServer.b(DedicatedServer.java:417)\n[21:34:21 WARN]:  at net.minecraft.server.v1_14_R1.MinecraftServer.a(MinecraftServer.java:1098)\n[21:34:21 WARN]:  at net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:925)\n[21:34:21 WARN]:  at java.lang.Thread.run(Unknown Source)\n[21:34:21 WARN]: Caused by: java.lang.NoSuchMethodError: com.sk89q.worldguard.protection.managers.RegionManager.getApplicableRegions(Lorg/bukkit/Location;)Lcom/sk89q/worldguard/protection/ApplicableRegionSet;\n[21:34:21 WARN]:  at de.Ste3et_C0st.ProtectionLib.main.plugins.fWorldGuardv7.getRegion(fWorldGuardv7.java:33)\n[21:34:21 WARN]:  at de.Ste3et_C0st.ProtectionLib.main.plugins.fWorldGuardv7.isOwner(fWorldGuardv7.java:42)\n[21:34:21 WARN]:  at de.Ste3et_C0st.ProtectionLib.main.ProtectionLib.lambda$isOwner$4(ProtectionLib.java:215)\n[21:34:21 WARN]:  at java.util.stream.ReferencePipeline$2$1.accept(Unknown Source)\n[21:34:21 WARN]:  at java.util.ArrayList$ArrayListSpliterator.tryAdvance(Unknown Source)\n[21:34:21 WARN]:  at java.util.stream.ReferencePipeline.forEachWithCancel(Unknown Source)\n[21:34:21 WARN]:  at java.util.stream.AbstractPipeline.copyIntoWithCancel(Unknown Source)\n[21:34:21 WARN]:  at java.util.stream.AbstractPipeline.copyInto(Unknown Source)\n[21:34:21 WARN]:  at java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\n[21:34:21 WARN]:  at java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\n[21:34:21 WARN]:  at java.util.stream.AbstractPipeline.evaluate(Unknown Source)\n[21:34:21 WARN]:  at java.util.stream.ReferencePipeline.findFirst(Unknown Source)\n[21:34:21 WARN]:  at de.Ste3et_C0st.ProtectionLib.main.ProtectionLib.isOwner(ProtectionLib.java:215)\n[21:34:21 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.Protection.ProtectionManager.isOwner(ProtectionManager.java:72)\n[21:34:21 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.Protection.ProtectionManager.canBuild(ProtectionManager.java:106)\n[21:34:21 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.Protection.ProtectionManager.canBuild(ProtectionManager.java:85)\n[21:34:21 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.Protection.ProtectionManager.canBuild(ProtectionManager.java:76)\n[21:34:21 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.FurnitureLib.canBuild(FurnitureLib.java:141)\n[21:34:21 WARN]:  at de.Ste3et_C0st.FurnitureLib.main.FurnitureHelper.canBuild(FurnitureHelper.java:80)\n[21:34:21 WARN]:  at de.Ste3et_C0st.Furniture.Objects.indoor.largeTable.onClick(largeTable.java:196)\n[21:34:21 WARN]:  ... 13 more\n\n"
        },
        {
            "author": "NEIKI",
            "timestamp": 1574171940,
            "txt_content": "看你分析还有CPU利用率。。。实体和区块这2个占的比较多，而且你是多世界，加大怪物刷新时间，用随机算法生成怪物，设置点传送CD吧，毕竟一传送过去就要加载大量生物，传送来传送去这种突然的生成很容易掉TPS。本来1.14.4的区块加载耗CPU比较多，你可以用插件预加载一下世界。SAML要设置分组，把动物全部变傻，一些经常刷的怪物选择不冻结这样会好很多，我实体1000冻结和变傻大概500.。。"
        }
    ]
}