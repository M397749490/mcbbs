{
    "title": "[WIKI][CY] BossShopPro - 服务器Ping|ServerPinging",
    "author": "乔柚",
    "replyCount": 2,
    "timestamp": 1542663000,
    "txt_content": " 本帖最后由 longlongz 于 2018-11-24 04:03 编辑 \n\nBossShopProServerPinging | 服务器Ping字数统计: 1678字\n\n注：Ping的定义过于复杂/难懂，所以选择性的使用了英文而不是中文\nPing: 互联网包探索器\n\nServerpinging允许你在BossShopPro文本中显示玩家数量和一个特定服务器的描述, 例如一个物品的描述lore或者消息\n\n在BossShopPro 中，有些地方与 BossShop不同.\n\n注意:\n在新版Minecraft版本中，ServerPinging不一定适合你。这个问题已被察觉并会被尽快修复。\n我建议你使用下方方法（暂时）来使用PlaceholderAPI来替代:\n·       如果你在使用BC端: https://www.spigotmc.org/wiki/placeholderapi-placeholders/#bungeecord-placeholders\n·       通用\"Pinger\": https://www.spigotmc.org/wiki/placeholderapi-placeholders/#pinger-placeholders\n另外一种“修复”这个问题的方法可能是添加占位符(例如 \"%player%\") 来匹配商店物品，使占位符更新。\n\n否认声明: 我并没有自己测试这些PAPI占位符。如果你有任何相关的问题可以发消息给我。\n\nGuide|使用方法\n你可以在config.yml发现你的一个服务器的通用列表:\nServerPinging:\n  Enabled: false\n  Delay: 45\n  FixConnector: false\n  Timeout: 4000\n  WaitTimeAfterFail: 4500\n  List:\n  - becto.net:25565复制代码如果你想要使用这个功能，请设置\n  Enabled: true复制代码这个延迟会告诉 BossShopPro以什么频率向列表中的服务器发送Ping。这个被\n“帧”定义（20帧 = 1秒）。默认为45帧 = 2.25秒，但是你当然也可以增加或减少这个数字。\nCode (Text):\nDelay: 45\n因为Minecraft有很多不同的版本，所有有些服务器需要使用不同的方法来ping。这里有很多不同类型的连接器不断测试正确项来实现支持所有的版本。当ServerPinging第一次被运行时，它会测试所有可用的连接器类型直到发现正确的一个。然后ID就会被保存到 \"BossShopPro/data\"文件中。在将来ServerPinging会被直接使用保存的ID来快速加载。\n\n当ServerPing在50次尝试中依然无法找到任何可用的服务器是，它会尝试其他的连接器因为可能会有些变动（例如服务器更新）会需要一个新的连接器。为了防止 BossShopPro 在成功找到正确项时继续尝试新的连接器，你可以设置\"FixConnector: true\".\nFixConnector: false复制代码接下来是可配置的超时：插件会尝试ping那些被定义的服务器直到成功或超时并接受连接失败，可能是因为目标服务器可能处于离线状态。超时是由毫秒定义的。\nTimeout: 4000复制代码如果插件无法ping一个服务器，它会等待一定的时间（毫秒）然后重新尝试。这样BossShopPro就不会尝试像在线服务器一样快速的ping离线服务器，这就是完全不必要的。\nWaitTimeAfterFail: 4500复制代码\n最后，这里有一个ping服务器对象列表。这里有两种你可以添加到列表中的服务器：\n3.    任何服务器: '<服务器名>:<ip>:<端口>' (你可以使用任何的服务器名)\n4.    通过BC来连接服务器: '<BC配置中的服务器名>' (使用BungeeCord时无法使用motd占位符)\n任何服务器列表例子:\n  List:\n  - becto:mc.becto.net:25565\n  - snapcraft:mc.snapcraft.net:25565复制代码使用BC的列表例子:\n  List:\n  - survival\n  - creative复制代码\n你可以在任何地方使用下方变量来显示玩家数量或者服务器motd：\n·       %players_<服务器名>% - 这个会替换成服务器中拥有的玩家数\n·       %motd_<服务器名>% - 这会替换成服务器的motd\n\n提示: 你可以将不同服务器叠加在一起来显示服务器总玩家数（需要v1.0.1!）例子：:\n·       Becto 服务器玩家数: %players_becto%\n·       Snapcraft服务器玩家数: %players_snapcraft%\n·       两个服务器的总玩家数: %players_becto:snapcraft%\n\n\nExample|例子\nconfig.yml:\nServerPinging:\n  Enabled: true\n  Delay: 45\n  List:\n  - hypixel:mc.hypixel.net:25565\n  - mineplex:us.mineplex.com:25565\n  - cubecraft:play.cubecraftgames.net:25565\n  - hivemc:eu.hivemc.com:25565\n  - badlion:na.badlion.net:25565复制代码商店菜单:\nShopName: ping\nDisplayName: 'Ping菜单'\nInventorySize: 45\nsigns:\n  text: '[]'\n  NeedPermissionToCreateSign: true\nshop:\n  '1':\n    RewardType: NOTHING\n    PriceType: NOTHING\n    MenuItem:\n    - name:&6Hypixel\n    - amount:1\n    - type:FEATHER\n    - lore:&f%players_hypixel% #Hypixel服务器玩家数\n    Message: ''\n    ExtraPermission: ''\n    InventoryLocation: 1\n  '10':\n    RewardType: NOTHING\n    PriceType: NOTHING\n    MenuItem:\n    - name:&6Mineplex\n    - amount:1\n    - type:FEATHER\n    - lore:&f%players_mineplex% #Mineplex总玩家数\n    Message: ''\n    ExtraPermission: ''\n    InventoryLocation: 10\n  '19':\n    RewardType: NOTHING\n    PriceType: NOTHING\n    MenuItem:\n    - name:&6Cubecraft\n    - amount:1\n    - type:FEATHER\n    - lore:&f%players_cubecraft% #Cubecraft总玩家数\n    Message: ''\n    ExtraPermission: ''\n    InventoryLocation: 19\n  '21':\n    RewardType: NOTHING\n    PriceType: NOTHING\n    MenuItem:\n    - name:&6Total\n    - amount:1\n    - type:FEATHER\n    - lore:&f%players_hypixel:minexplex:cubecraft:hivemc:badlion% #多个服务器玩家总和\n    Message: ''\n    ExtraPermission: ''\n    InventoryLocation: 21\n  '28':\n    RewardType: NOTHING\n    PriceType: NOTHING\n    MenuItem:\n    - name:&6HiveMC\n    - amount:1\n    - type:FEATHER\n    - lore:&f%players_hivemc%\n    Message: ''\n    ExtraPermission: ''\n    InventoryLocation: 28\n  '37':\n    RewardType: NOTHING\n    PriceType: NOTHING\n    MenuItem:\n    - name:&6Badlion\n    - amount:1\n    - type:FEATHER\n    - lore:&f%players_badlion%\n    Message: ''\n    ExtraPermission: ''\n    InventoryLocation: 37复制代码\n输出:\n\n\n这可能不支持老服务器（1.7或以下）来ping很新的服务器（1.9或以上），支持与其他服务器相同版本的服务器永远是可行的。\n\n\n\nBungeeCord 全球聊天&玩家聊天输入\nBossShopPro API 允许让其他插件通过玩家聊天来获得玩家输入（input）。这就是 PlayerShops addon 的方法，可以让玩家输入他们商店的名字和物品的价格。如果你正在使用 BungeeCord（BC），你可能会想要通过所有的玩家聊天消息，例如使用BC来连接不同服务器的聊天信息，实现全服聊天。为了可以区分普通聊天信息和特殊玩家输入，BossShopPro 使用了插件聊天频道并了解玩家的消息是否属于普通聊天。 \n\n下方是一个BC插件的例子，可以检测玩家的输入（input）:\nimport java.io.ByteArrayInputStream;\nimport java.io.DataInputStream;\nimport java.io.IOException;\n\nimport net.md_5.bungee.api.event.PluginMessageEvent;\nimport net.md_5.bungee.api.plugin.Listener;\nimport net.md_5.bungee.event.EventHandler;\n\npublic class BungeeCordPluginListener implements Listener {\n    @EventHandler\n    public void onPluginMessage(PluginMessageEvent e) {   \n\n        if(e.getTag().equalsIgnoreCase(\"BungeeCord\")){\n            DataInputStream dis = new DataInputStream(new ByteArrayInputStream(e.getData()));\n\n\n            try{\n                String subchannel = dis.readUTF();\n\n\n                if (subchannel.equalsIgnoreCase(\"BossShopPro\")){\n\n                    String type = dis.readUTF();\n\n                    if (type.equalsIgnoreCase(\"PlayerInput\")){\n\n                        String playerUUID = dis.readUTF();       \n                        String inputType = dis.readUTF();\n\n                        if(inputType.equalsIgnoreCase(\"start\")){\n                            String endTimeMillis = dis.readUTF();\n                            System.out.println(\"Received plugin message by BossShopPro of type \"PlayerInput Start\" with player \" + playerUUID+\". Knowing that incoming message should not be sent to the global chat until either a stop message is received or time '\" + endTimeMillis + \"' is reached.\");\n\n                        }else if(inputType.equalsIgnoreCase(\"end\")){\n                            System.out.println(\"Received plugin message by BossShopPro of type \"PlayerInput End\" with player \" + playerUUID+\". Knowing that messages of that player no longer belong to BossShopPro input and can be sent to the chat.\");\n                        }\n                    }\n\n                }\n\n            }\n            catch (IOException e1) {         \n                e1.printStackTrace();         \n            }\n        }\n\n    }\n}复制代码你可以看到一条消息被使用\"BungeeCord\" 频道和\"BossShopPro\" 子频道来发送. 接下来，事件的类型被发送（当前只有一个事件叫做\"PlayerInput\"）. PlayerInput 还自带了受影响玩家的UUID。\n\n",
    "replies": [
        {
            "author": "二哈大魔王",
            "timestamp": 1542667560,
            "txt_content": "辛苦了 天都亮了 还在整理wiki"
        },
        {
            "author": "cat——猫仔",
            "timestamp": 1544356320,
            "txt_content": "哇，厉害......"
        }
    ]
}