{
    "title": "这个应该怎么写。求助各位大佬。",
    "author": "asd847696260",
    "replyCount": 22,
    "timestamp": 1548086640,
    "txt_content": "想写一个关于物品的判断语句但是不管怎么写都是红叉。\n\n获取玩家手里的物品ID，获取玩家手里的物品附加值，获取玩家手里物品的自定义名称。\n\n如果玩家手里的ID=1 附加值=0 名称为XXX\n\n则执行以下事件\n\n反之执行以下事件",
    "replies": [
        {
            "author": "酷酷KuMc",
            "timestamp": 1548089400,
            "txt_content": "希望这能帮到你\n\n@EventHandler\npublic void onPlayerClick(PlayerInteractEvent e) {\n\n    ItemStack mainHandItem = e.getPlayer().getInventory().getItemInMainHand();\n    if (mainHandItem != null && mainHandItem.getType() != Material.AIR) {\n        // 物品ID\n        int id = mainHandItem.getTypeId();\n        // 附加值\n        short durability = mainHandItem.getDurability();\n        // 名称\n        String displayName = mainHandItem.getItemMeta().getDisplayName();\n        \n        // 注意:\n        // displayName为自定义的名称哦,如果是Minecraft物品的原始名称是会返回null\n        // 设置自定义的名称可以通过 setDisplayName(\"XXX\")\n\n        // 如果 ID为1 附加值为0 名称为XXX\n        if (id == 1 && durability == 0 && displayName != null && displayName.equals(\"XXX\")) {\n            // 做你要做的事情\n        }\n        else {\n            // 做你要做的事情\n        }\n    }\n}"
        },
        {
            "author": "asd847696260",
            "timestamp": 1548131220,
            "txt_content": "酷酷KuMc 发表于 2019-1-22 00:50\n希望这能帮到你\n\n@EventHandler\n非常感谢，试了好几天，要不然就是写不了要不然就是红叉，感谢为我解决"
        },
        {
            "author": "asd847696260",
            "timestamp": 1548131820,
            "txt_content": "酷酷KuMc 发表于 2019-1-22 00:50\n希望这能帮到你\n\n@EventHandler\n请问 mainHandItem 无法解析变量怎么解决"
        },
        {
            "author": "酷酷KuMc",
            "timestamp": 1548136020,
            "txt_content": "asd847696260 发表于 2019-1-22 12:37\n请问 mainHandItem 无法解析变量怎么解决\n可以说下是如何发生的嘛"
        },
        {
            "author": "asd847696260",
            "timestamp": 1548163860,
            "txt_content": "酷酷KuMc 发表于 2019-1-22 13:47\n可以说下是如何发生的嘛\n这样他说无法解析\n\n\n\n\n\nQQ截图20190122212841.png\n(48.13 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-1-22 21:30 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "酷酷KuMc",
            "timestamp": 1548164700,
            "txt_content": "asd847696260 发表于 2019-1-22 21:31\n这样他说无法解析\n你没有定义这个mainHandItem变量哦~\n\n比如这样:\nItemStack mainHandItem = e.getPlayer().getInventory().getItemInMainHand();复制代码"
        },
        {
            "author": "asd847696260",
            "timestamp": 1548205980,
            "txt_content": "酷酷KuMc 发表于 2019-1-22 21:45\n你没有定义这个mainHandItem变量哦~\n\n比如这样:\n有个警告。。.getTypeId()用法在 ItemStack 里已过时\n\n\n\n\n\nQQ截图20190123091134.png\n(46.36 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-1-23 09:11 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "asd847696260",
            "timestamp": 1548206040,
            "txt_content": "酷酷KuMc 发表于 2019-1-22 21:45\n你没有定义这个mainHandItem变量哦~\n\n比如这样:\n拖进服务器里会错报，信息如下\nCould not pass event PlayerInteractEvent to TheGold v0.2\norg.bukkit.event.EventException\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:310) ~[mc.jar:git-PaperSpigot-e489049-07c3001]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[mc.jar:git-PaperSpigot-e489049-07c3001]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:502) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:487) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at org.bukkit.craftbukkit.v1_8_R3.event.CraftEventFactory.callPlayerInteractEvent(CraftEventFactory.java:228) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at org.bukkit.craftbukkit.v1_8_R3.event.CraftEventFactory.callPlayerInteractEvent(CraftEventFactory.java:195) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at net.minecraft.server.v1_8_R3.PlayerInteractManager.a(PlayerInteractManager.java:107) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at net.minecraft.server.v1_8_R3.PlayerConnection.a(PlayerConnection.java:625) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at net.minecraft.server.v1_8_R3.PacketPlayInBlockDig.a(SourceFile:40) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at net.minecraft.server.v1_8_R3.PacketPlayInBlockDig.a(SourceFile:10) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at net.minecraft.server.v1_8_R3.PlayerConnectionUtils$1.run(SourceFile:13) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_181]\n        at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_181]\n        at net.minecraft.server.v1_8_R3.SystemUtils.a(SourceFile:44) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at net.minecraft.server.v1_8_R3.MinecraftServer.B(MinecraftServer.java:772) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at net.minecraft.server.v1_8_R3.DedicatedServer.B(DedicatedServer.java:378) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at net.minecraft.server.v1_8_R3.MinecraftServer.A(MinecraftServer.java:711) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at net.minecraft.server.v1_8_R3.MinecraftServer.run(MinecraftServer.java:614) [mc.jar:git-PaperSpigot-e489049-07c3001]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_181]\nCaused by: java.lang.NullPointerException\n        at cc.thegold.TGEventListener.onPlayerClick(TGEventListener.java:31) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_181]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_181]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_181]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:306) ~[mc.jar:git-PaperSpigot-e489049-07c3001]\n        ... 18 more"
        },
        {
            "author": "酷酷KuMc",
            "timestamp": 1548254580,
            "txt_content": "asd847696260 发表于 2019-1-23 09:13\n有个警告。。.getTypeId()用法在 ItemStack 里已过时\n是的呢,getTypeId已过时,不过一样可以使用哦~\n替代getTypeId请使用getType获得的是一个Material的枚举"
        },
        {
            "author": "酷酷KuMc",
            "timestamp": 1548254640,
            "txt_content": "asd847696260 发表于 2019-1-23 09:14\n拖进服务器里会错报，信息如下\nCould not pass event PlayerInteractEvent to TheGold v0.2\norg.bukkit.e ...\n出现这个问题是出现null指针了,问题出现在 TGEventListener.java 第31行"
        },
        {
            "author": "asd847696260",
            "timestamp": 1548300120,
            "txt_content": "酷酷KuMc 发表于 2019-1-23 22:44\n出现这个问题是出现null指针了,问题出现在 TGEventListener.java 第31行\npackage cc.thegold;\n\nimport org.bukkit.Material;\nimport org.bukkit.block.Block;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.Action;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.event.player.PlayerJoinEvent;\nimport org.bukkit.inventory.ItemStack;\n\npublic class TGEventListener implements Listener {\n        @EventHandler\n        public void onJoin(PlayerJoinEvent event) {\n                event.setJoinMessage(\"§7§l[§e§lTheGold§7§l]§a插件已经启用了,欢迎玩家:§b§l\" + event.getPlayer().getName() + \"§a.\");\n                ItemStack mg = new ItemStack(Material.STICK);\n                event.getPlayer().getInventory().addItem(mg);\n        }\n\n        @EventHandler\n        public void onInteract0(PlayerInteractEvent event) {\n\n                ItemStack mainHandItem = event.getPlayer().getInventory().getItemInHand();\n\n                if (mainHandItem != null && mainHandItem.getType() != Material.AIR) {\n\n                        int id = mainHandItem.getTypeId();\n                        short durabiliy = mainHandItem.getDurability();\n                        String displayName = mainHandItem.getItemMeta().getDisplayName();\n                        \n                        if (id == 280 && durabiliy == 0 && displayName.equals(\"魔法棒\")) {\n\n                                if (event.getAction().equals(Action.LEFT_CLICK_BLOCK)) {\n\n                                        Block block = event.getClickedBlock();\n                                        if (block.getType() == Material.STONE) {\n\n                                                block.setType(Material.IRON_BLOCK);\n\n                                        }\n\n                                        Block block2 = event.getClickedBlock();\n                                        if (block2.getType() == Material.IRON_BLOCK) {\n\n                                                block2.setType(Material.GOLD_BLOCK);\n                                        }\n\n                                        Block block3 = event.getClickedBlock();\n                                        if (block3.getType() == Material.GOLD_BLOCK) {\n\n                                                block3.setType(Material.DIAMOND_BLOCK);\n\n                                        }\n                                }\n                        }\n\n                }\n        }\n}\n您还是帮我整个看看吧，我这个写法没有红色的语法错误，但是31行是个空行...拜托了，麻烦您了，还有进入游戏之后我用叫魔法棒的木棍点击石头他不是变成铁而是直接变成钻石了，是不是直接想下判断了。\n"
        },
        {
            "author": "roj234",
            "timestamp": 1548327600,
            "txt_content": " 本帖最后由 roj234 于 2019-1-24 19:03 编辑 \nasd847696260 发表于 2019-1-24 11:22\npackage cc.thegold;\n\nimport org.bukkit.Material;\n\npublic class TGEventListener implements Listener {\n        @EventHandler\n        public void onJoin(PlayerJoinEvent event) {\n                event.setJoinMessage(\"§7§l[§e§lTheGold§7§l]§a插件已经启用了,欢迎玩家:§b§l\" + event.getPlayer().getName() + \"§a.\");\n                ItemStack mg = new ItemStack(Material.STICK);\n                event.getPlayer().getInventory().addItem(mg);\n        }\n\n        @EventHandler\n        public void onInteract0(PlayerInteractEvent event) {//我是做MOD开发的，如果有PlayerLeftClickBlockEvent之类的事件可以用的话还是推荐这种\n\n                ItemStack mainHandItem = event.getPlayer().getInventory().getItemInHand();\n\n                if (mainHandItem != null && mainHandItem.getType() != Material.AIR && mainHandItem.getTypeId() == 280 && mainHandItem.getDurability() == 0 && mainHandItem.getItemMeta().getDisplayName().equals(\"魔法棒\")) {\n                        //只用一次的变量没必要储存\n                        try{\n\n\n                                if (event.getAction().equals(Action.LEFT_CLICK_BLOCK)) {\n                                        //你之前判断三次,每次都已经修改了再检测...\n                                        //也没重用block\n                                        //也没else\n                                        Block block = event.getClickedBlock();\n                                        if (block.getType() == Material.STONE) {\n                                                block.setType(Material.IRON_BLOCK);\n                                        }else if (block.getType() == Material.IRON_BLOCK) {\n                                                block.setType(Material.GOLD_BLOCK);\n                                        }else if (block.getType() == Material.GOLD_BLOCK) {\n                                                block.setType(Material.DIAMOND_BLOCK);\n\n                                        }\n                                }\n                        }catch(Exception e) {//检测有无错误\n                            System.out.println(\"发生了错误！以下是详细信息:\"+e.toString());\n                            e.printStackTrace();\n\n                       }\n\n\n                }\n        }\n}"
        },
        {
            "author": "asd847696260",
            "timestamp": 1548387420,
            "txt_content": "roj234 发表于 2019-1-24 19:00\npublic class TGEventListener implements Listener {\n        @EventHandler\n        public void onJoi ...\n非常感谢，但是进入服务器用普通木棍点击石头还是会错报，我估计是手持物品判断语句没有else，请问取消本次互交操作怎么写。"
        },
        {
            "author": "asd847696260",
            "timestamp": 1548387540,
            "txt_content": "roj234 发表于 2019-1-24 19:00\npublic class TGEventListener implements Listener {\n        @EventHandler\n        public void onJoi ...\n这段语句，玩家首次进入服务器后获取的木棍仍然是普通木棍，请问哪里有错误？\n\n\n\n\n\nQQ截图20190125113758.png\n(5.11 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-1-25 11:38 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "roj234",
            "timestamp": 1548584940,
            "txt_content": "asd847696260 发表于 2019-1-25 11:39\n这段语句，玩家首次进入服务器后获取的木棍仍然是普通木棍，请问哪里有错误？\n ...\n我又不做插件，怎么知道啊...我也只能指出一些语法错误、影响性能的语句而已"
        },
        {
            "author": "asd847696260",
            "timestamp": 1548955440,
            "txt_content": "酷酷KuMc 发表于 2019-1-23 22:44\n出现这个问题是出现null指针了,问题出现在 TGEventListener.java 第31行\n非常感谢，但是进入服务器用普通木棍点击石头还是会错报，我估计是手持物品判断语句没有else，请问取消本次互交操作怎么写。"
        },
        {
            "author": "壹陽峙",
            "timestamp": 1549384980,
            "txt_content": "asd847696260 发表于 2019-1-25 11:39\n这段语句，玩家首次进入服务器后获取的木棍仍然是普通木棍，请问哪里有错误？\n ...\nItemStack mg = new ItemStack(Material.STICK);\nItemMeta mgm = mg.getItemMeta();\nmgm.setDisplayName(\"§e魔法棒\");\nmg.setItemMeta(mgm);\nevent.getPlayer().getInventory().addItem(mg);\n(添加物品的方法我个人推荐为dropItem，代码如下：)\n//event.getPlayer().getWorld().dropItem(evt.getLocation(),mg);\n\n另外，你的问题应该是出在没有保存ItemMeta。仅仅只是设置"
        },
        {
            "author": "酷酷KuMc",
            "timestamp": 1550660820,
            "txt_content": "asd847696260 发表于 2019-2-1 01:24\n非常感谢，但是进入服务器用普通木棍点击石头还是会错报，我估计是手持物品判断语句没有else，请问取消本 ...\n注意判断displayName如果该物品没有设置(也就是Minecraft的物品名)那么getDisplayName是会返回null的"
        },
        {
            "author": "asd847696260",
            "timestamp": 1550939760,
            "txt_content": "壹陽峙 发表于 2019-2-6 00:43\nItemStack mg = new ItemStack(Material.STICK);\nItemMeta mgm = mg.getItemMeta();\nmgm.setDisplayName( ...\n非常感谢你的帮助\n但是使用您推荐的物品给予方法时发现evt无法解析，将evt改为event后,后面的getLocation()有红波浪线，好像是定义方法有问题，请问改怎样解决"
        },
        {
            "author": "asd847696260",
            "timestamp": 1550940060,
            "txt_content": "酷酷KuMc 发表于 2019-2-20 19:07\n注意判断displayName如果该物品没有设置(也就是Minecraft的物品名)那么getDisplayName是会返回null的 ...\n想让当玩家手持为原版物品没有Display点击石头的时候不进行任何操作，请问不进行任何操作这个应该怎么写"
        },
        {
            "author": "壹陽峙",
            "timestamp": 1552137540,
            "txt_content": "asd847696260 发表于 2019-2-24 00:41\n想让当玩家手持为原版物品没有Display点击石头的时候不进行任何操作，请问不进行任何操作这个应该怎么写 ...\n直接判断有没有Display就行，例如\nItemStack item = new ItemStack(Material.STONE);\nItemMeat itemm = item.getItemMeta();\nif(itemm.hasDisplay){\n   //do something···\n}\n"
        },
        {
            "author": "壹陽峙",
            "timestamp": 1552137600,
            "txt_content": "asd847696260 发表于 2019-2-24 00:36\n非常感谢你的帮助\n但是使用您推荐的物品给予方法时发现evt无法解析，将evt改为event后,后面的getLocation ...\nevt.getLocation()是获得位置，如果想掉落在玩家位置，可以使用\nevent.getPlayer().getLocation();"
        }
    ]
}