{
    "title": "如何扩展一个含方块实体的方块？",
    "author": "洞穴夜莺",
    "replyCount": 0,
    "timestamp": 1587715080,
    "txt_content": " 本帖最后由 洞穴夜莺 于 2020-8-7 17:46 编辑 \n\n试图实现一个能含水里的钟方块\nimport net.minecraft.block.*;\nimport net.minecraft.fluid.FluidState;\nimport net.minecraft.fluid.Fluids;\nimport net.minecraft.item.ItemPlacementContext;\nimport net.minecraft.state.StateManager;\nimport net.minecraft.state.property.Properties;\nimport net.minecraft.util.math.BlockPos;\nimport net.minecraft.util.math.Direction;\nimport net.minecraft.world.IWorld;\n\npublic class WaterloggableBellBlock extends BellBlock implements Waterloggable {\n    public WaterloggableBellBlock(Settings settings) {\n        super(settings);\n    }\n\n    @Override\n    public void appendProperties(StateManager.Builder<Block, BlockState> builder){\n        super.appendProperties(builder);\n        builder.add(Properties.WATERLOGGED);\n    }\n\n    @Override\n    public FluidState getFluidState(BlockState blockState_1) {\n        return (Boolean)blockState_1.get(Properties.WATERLOGGED) ?\n                Fluids.WATER.getStill(false) : super.getFluidState(blockState_1);\n    }\n\n    @Override\n    public BlockState getPlacementState(ItemPlacementContext ctx) {\n        BlockState srval = super.getPlacementState(ctx);\n        return srval == null ? null : srval.with(Properties.WATERLOGGED,\n                ctx.getWorld().getFluidState(ctx.getBlockPos()).getFluid() == Fluids.WATER);\n    }\n\n    @Override\n    public BlockState getStateForNeighborUpdate(BlockState blockState_1, Direction direction_1, BlockState blockState_2, IWorld iWorld_1, BlockPos blockPos_1, BlockPos blockPos_2) {\n        if ((Boolean)blockState_1.get(Properties.WATERLOGGED)) {\n            iWorld_1.getFluidTickScheduler().schedule(blockPos_1, Fluids.WATER, Fluids.WATER.getTickRate(iWorld_1));\n        }\n        return super.getStateForNeighborUpdate(blockState_1, direction_1, blockState_2, iWorld_1, blockPos_1, blockPos_2);\n    }\n}\n复制代码\n\n\n但是调试时发现方块实体没有正确创建\n[15:53:06] [main/WARN]: Block entity invalid: minecraft:bell @ BlockPos{x=-459, y=109, z=354}\n[15:53:07] [Server thread/WARN]: Block entity invalid: minecraft:bell @ BlockPos{x=-459, y=109, z=354}\n是还有什么东西要注册吗？\n\n[已解决，请勿回复]\n\nMixin修改方块实体的适用方块\n\n\n",
    "replies": []
}