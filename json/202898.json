{
    "title": "【GLSL光影修复】加载光影档时出现Error: Invalid program composite的解决方法",
    "author": "tjsjian",
    "replyCount": 9,
    "timestamp": 1386397680,
    "txt_content": " 本帖最后由 tjsjian 于 2013-12-7 14:41 编辑 \n\n声明：本教程所使用解决方法非本人原创而均来自外国MC论坛的公开讨论方案，教程制作参考视频：http://www.youtube.com/watch?v=-LVlDQJecq8（水表外置=w=）\n坐拥高档配置却苦恼于不能提升MC画质？找到好的光影设定档却加载报错？\n废话：\n\n\n\n\n01.jpg (22.86 KB, 下载次数: 40)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n大清早到处跑跑心情好，突然觉得好像少了什么东西……\n\n\n\n\n02.jpg (22.67 KB, 下载次数: 38)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n想起来是光影没加，于是点开光影配置准备加载自己最喜欢的光影设置档\n\n\n\n\n03.jpg (6.72 KB, 下载次数: 38)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n然后就成这样了(╯‵□′)╯︵┻━┻原先的大好心情烟消云散有木有观察左下角不难发现，除了光影加载成功加载的提示外还有一条“[Shaders] Error: Invalid program composite”，难不成是这里出了问题？\n\n重装电脑后发现原先运行正常的光影mod出现了“[Shaders] Error: Invalid program composite”报错，浏览论坛发现不少玩家也存在这个问题，却始终没有公布比较有效的解决方案\n教程编写环境：配置：操作系统        Windows 7 SP1处理器    英特尔 第三代酷睿 i7-3770内存    16 GB显卡    Nvidia GeForce GTX 560（求不被打QAQ）\nMC版本：Release 1.6.2\nForge版本：9.10.0.845\nGLSL光影mod版本：\nv2.0.1-beta18\n\n一不做二不休，下面介绍两种从国外论坛搬运过来的解决方法（其实应该都早在mcbbs上有出现过O.o，在这里整理一下罢了）\n方法一：降级显卡驱动至稳定版本（仅N卡）这个方法是一劳永逸的方法，推荐使用\n不少N卡玩家出现Error: Invalid program composite的原因是因为使用了nVIDIA的Beta或过高的驱动程序版本，而目前GLSL只兼容320.49或以下的WHQL驱动版本。下面介绍从N卡官网下载对应驱动程序并安装的方法（其实电脑玩得溜的知道原因后也不怎么需要看了吧=-=）\n\n\n\n\n\n04.jpg (16.14 KB, 下载次数: 40)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n摆渡一下找到nVIDIA官方网站\n\n\n\n\n05.jpg (12.39 KB, 下载次数: 40)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n进入官方网站后，鼠标移动至驱动程序菜单并在菜单中选择GeForce 驱动程序\n\n\n\n\n06.jpg (15.78 KB, 下载次数: 40)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n在手动搜索驱动程序栏中，在第二行选择匹配自己显卡型号的项目，并在红框标注的行中将原来的All设置为Recommended/Certified\n\n\n\n\n07.jpg (23.54 KB, 下载次数: 41)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n这样就列表中就只显示带有WHQL的项目了。从中选择320.49的驱动程序（本教程实际使用320.18）进入详细内容页面\n\n\n\n\n08.jpg (11.39 KB, 下载次数: 40)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n在显示的页面中选择“*同意并下载”开始下载驱动程序压缩包\n\n\n\n\n09.jpg (26.99 KB, 下载次数: 39)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n等待下载完成后，双击启动解压程序并选择一个目录进行解压（注意：安装完毕后解压出来的文件不会自动删除，因此最好挑选一个比较“顺手”的位置以方便在安装完成后删除）\n\n\n\n\n10.jpg (31.47 KB, 下载次数: 40)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n解压完成后安装程序会自动运行（如果没有自动运行或安装失败了打算重新运行的话可以进入刚刚选择的解压目录运行），如果没有特别需求的话一路按“同意”或“下一步”直到安装完成\n\n\n\n\n11.jpg (30.62 KB, 下载次数: 41)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n安装完成界面如图，如果先前安装过驱动程序的话一般不需要重新启动。点击“关闭”完成安装\n至此，方法一的介绍结束了。赶快开MC看看效果吧=w=\n\n方法二：修改光影配置文件\n如果您希望使用最新的驱动程序而不想降级，或因其他原因无法使用方法一的话，这个方法也不错\n\n\n方法二推荐事先安装Notepad++，它将简化不少工作量。关于Notepad++的下载和安装在此不再赘述\n\n\n\n\n\n\n12.jpg (13.83 KB, 下载次数: 48)\n\n下载附件\n\n2013-12-7 13:16 上传\n\n\n\n\n\n首先，找到光影配置档的存放位置，使用WinRAR或其他解压软件打开需要修改的配置文件\n\n\n\n\n13.jpg (56.17 KB, 下载次数: 46)\n\n下载附件\n\n2013-12-7 13:17 上传\n\n\n\n\n\n在压缩列表中找到composite.vsh文件，将其解压到任意位置准备修改\n\n\n\n\n14.jpg (27.6 KB, 下载次数: 46)\n\n下载附件\n\n2013-12-7 13:17 上传\n\n\n\n\n\n打开Notepad++，点击图中红框框起来的按钮，在对话框中找到并打开composite.vsh文件\n\n\n\n\n15.jpg (22.9 KB, 下载次数: 43)\n\n下载附件\n\n2013-12-7 13:17 上传\n\n\n\n\n\n观察左边的行数标记并定位至47行\n\n\n\n\n16.jpg (6.07 KB, 下载次数: 45)\n\n下载附件\n\n2013-12-7 13:17 上传\n\n\n\n\n\n将47行中\"float timePow\"的值2.0f改成3.0f，点击左上角保存（\n\n\n\n\n17.jpg (996 Bytes, 下载次数: 40)\n\n下载附件\n\n2013-12-7 13:17 上传\n\n\n\n\n）按钮保存\n\n\n\n\n18.jpg (57.09 KB, 下载次数: 46)\n\n下载附件\n\n2013-12-7 13:17 上传\n\n\n\n\n\n将修改完毕的vsh文件重新加入压缩包中（直接拖进去即可，不会出现覆盖提示）\n\n\n至此，方法二的介绍结束了\n\n\n\n\n\n\n\n\n\n\n19.jpg (16.16 KB, 下载次数: 39)\n\n下载附件\n\n2013-12-7 13:17 上传\n\n\n\n\n\n上述两种方法经过实测有效，终于可以体验光影的绚丽效果了~【撒花\n\n\n\n\n20.jpg (22.17 KB, 下载次数: 38)\n\n下载附件\n\n2013-12-7 14:27 上传\n\n\n\n\n\n最后和鸡群合个影（渣皮肤请无视=w=）\n",
    "replies": [
        {
            "author": "Aikawastep",
            "timestamp": 1386397980,
            "txt_content": "{:10_495:}低配置。。。OLO"
        },
        {
            "author": "tjsjian",
            "timestamp": 1386398280,
            "txt_content": "Aikawastep 发表于 2013-12-7 14:33 \n低配置。。。OLO\nQwQ低配置也能用一些简化版的光影的……还有请问正版勋章怎么申请"
        },
        {
            "author": "Aikawastep",
            "timestamp": 1386398400,
            "txt_content": "tjsjian 发表于 2013-12-7 14:38 \nQwQ低配置也能用一些简化版的光影的……还有请问正版勋章怎么申请\n{:10_566:}\nhttp://www.mcbbs.net/forum.php?m ... D%B0%E6%D1%AB%D5%C2"
        },
        {
            "author": "tjsjian",
            "timestamp": 1386398940,
            "txt_content": " 本帖最后由 tjsjian 于 2013-12-7 14:52 编辑 \nAikawastep 发表于 2013-12-7 14:40 \nhttp://www.mcbbs.net/forum.php?m ... D%B0%E6%D1%AB%D5%C2\nQAQ虽然点不开但还是谢谢的说 已经百度找到了的说"
        },
        {
            "author": "Aikawastep",
            "timestamp": 1386399000,
            "txt_content": "tjsjian 发表于 2013-12-7 14:49 \nQAQ虽然点不开但还是谢谢的说已经百度找到了的说\n{:10_495:}嗦嘎。。我负责错了OAO"
        },
        {
            "author": "SPE__HaiKuo",
            "timestamp": 1386400560,
            "txt_content": "哪里有低配置的光影？？"
        },
        {
            "author": "tsubasa56",
            "timestamp": 1386556980,
            "txt_content": "渣显卡没出过错的飘过"
        },
        {
            "author": "heyuwei1999",
            "timestamp": 1452098580,
            "txt_content": "                heldLightSpecMultiplier = vec3(1.0, 0.5, 0.0);\n第47行是这个怎么办？\n#version 120\n\nvarying vec4 texcoord;\n\nuniform vec3 sunPosition;\nuniform vec3 moonPosition;\n\nuniform int worldTime;\n\nvarying vec3 lightVector;\nvarying vec3 specMultiplier;\n\nuniform int heldItemId;\nuniform int heldBlockLightValue;\n\nvarying vec3 heldLightSpecMultiplier;\nvarying float heldLightMagnitude;\n\nvoid main() {\n        gl_Position = ftransform();\n        \n        texcoord = gl_MultiTexCoord0;\n\n        if (worldTime < 12700 || worldTime > 23250) {\n                lightVector = normalize(sunPosition);\n                specMultiplier = vec3(1.0, 1.0, 1.0);\n        } else {\n                lightVector = normalize(moonPosition);\n                specMultiplier = vec3(0.5, 0.5, 0.5);\n        }\n        \n        specMultiplier *= clamp(abs(float(worldTime) / 500.0 - 46.0), 0.0, 1.0) * clamp(abs(float(worldTime) / 500.0 - 24.5), 0.0, 1.0);\n        \n        heldLightMagnitude = float(heldBlockLightValue);\n\n        if (heldItemId == 50) {\n                // torch\n                heldLightSpecMultiplier = vec3(1.0, 0.9, 0.5);\n        } else if (heldItemId == 76 || heldItemId == 94) {\n                // active redstone torch / redstone repeater\n                heldLightSpecMultiplier = vec3(1.0, 0.0, 0.0);\n        } else if (heldItemId == 89) {\n                // lightstone\n                heldLightSpecMultiplier = vec3(1.0, 1.0, 0.4);\n        } else if (heldItemId == 10 || heldItemId == 11 || heldItemId == 51) {\n                // lava / lava / fire\n                heldLightSpecMultiplier = vec3(1.0, 0.5, 0.0);\n        } else if (heldItemId == 91) {\n                // jack-o-lantern\n                heldLightSpecMultiplier = vec3(1.0, 0.5, 0.0);\n        } else if (heldItemId == 326) {\n                // water bucket\n                heldLightMagnitude = 2.0;\n                heldLightSpecMultiplier = vec3(0.0, 0.0, 0.3);\n        } else if (heldItemId == 327) {\n                // lava bucket\n                heldLightMagnitude = 15.0;\n                heldLightSpecMultiplier = vec3(1.0, 0.5, 0.3);\n        } else {\n                heldLightSpecMultiplier = vec3(0.0);\n        }\n}"
        },
        {
            "author": "heyuwei1999",
            "timestamp": 1452098580,
            "txt_content": " 本帖最后由 heyuwei1999 于 2016-1-7 00:45 编辑 \n                heldLightSpecMultiplier = vec3(1.0, 0.5, 0.0);\n第47行是这个怎么办？\n#version 120\n\nvarying vec4 texcoord;\n\nuniform vec3 sunPosition;\nuniform vec3 moonPosition;\n\nuniform int worldTime;\n\nvarying vec3 lightVector;\nvarying vec3 specMultiplier;\n\nuniform int heldItemId;\nuniform int heldBlockLightValue;\n\nvarying vec3 heldLightSpecMultiplier;\nvarying float heldLightMagnitude;\n\nvoid main() {\n        gl_Position = ftransform();\n        \n        texcoord = gl_MultiTexCoord0;\n\n        if (worldTime < 12700 || worldTime > 23250) {\n                lightVector = normalize(sunPosition);\n                specMultiplier = vec3(1.0, 1.0, 1.0);\n        } else {\n                lightVector = normalize(moonPosition);\n                specMultiplier = vec3(0.5, 0.5, 0.5);\n        }\n        \n        specMultiplier *= clamp(abs(float(worldTime) / 500.0 - 46.0), 0.0, 1.0) * clamp(abs(float(worldTime) / 500.0 - 24.5), 0.0, 1.0);\n        \n        heldLightMagnitude = float(heldBlockLightValue);\n\n        if (heldItemId == 50) {\n                // torch\n                heldLightSpecMultiplier = vec3(1.0, 0.9, 0.5);\n        } else if (heldItemId == 76 || heldItemId == 94) {\n                // active redstone torch / redstone repeater\n                heldLightSpecMultiplier = vec3(1.0, 0.0, 0.0);\n        } else if (heldItemId == 89) {\n                // lightstone\n                heldLightSpecMultiplier = vec3(1.0, 1.0, 0.4);\n        } else if (heldItemId == 10 || heldItemId == 11 || heldItemId == 51) {\n                // lava / lava / fire\n                heldLightSpecMultiplier = vec3(1.0, 0.5, 0.0);\n        } else if (heldItemId == 91) {\n                // jack-o-lantern\n                heldLightSpecMultiplier = vec3(1.0, 0.5, 0.0);\n        } else if (heldItemId == 326) {\n                // water bucket\n                heldLightMagnitude = 2.0;\n                heldLightSpecMultiplier = vec3(0.0, 0.0, 0.3);\n        } else if (heldItemId == 327) {\n                // lava bucket\n                heldLightMagnitude = 15.0;\n                heldLightSpecMultiplier = vec3(1.0, 0.5, 0.3);\n        } else {\n                heldLightSpecMultiplier = vec3(0.0);\n        }\n}@MarcoV@tsubasa56\n不小心搞重复了，请求删除\n"
        }
    ]
}