{
    "title": "C#无法重定向使用Jline的Forge的输入流",
    "author": "Golden_key",
    "replyCount": 0,
    "timestamp": 1560434880,
    "txt_content": " 本帖最后由 Golden_key 于 2019-6-13 22:13 编辑 \n\n如题，写的是一个控制台程序的一个开服器，可以让游戏指令在开服器里输入给服务端\n\n相关代码如下：\n        javaShell.StartInfo.FileName = java;\n        javaShell.StartInfo.Arguments = \"-jar main.jar -Xmx\" + mem.ToString() + \"G nogui\";\n        javaShell.StartInfo.RedirectStandardInput = true;\n        javaShell.StartInfo.UseShellExecute = false;\n        javaShell.StartInfo.CreateNoWindow = false;\n        javaShell.Start();\n\n    然后写入输入流：\n        javaShell.StandardInput.WriteLine(cmdText);\n\n以前在1.7.10时Forge不使用jline的时候可以正常使用，但最近更新1.12.2后发现这个方法对使用了jline的Forge无效，\n提示信息如下：\n\n    Exception in thread \"WindowsStreamPump\" com.sun.jna.LastErrorException: [1] 函数不正确。\n        at com.sun.jna.Native.invokeVoid(Native Method)\n        at com.sun.jna.Function.invoke(Function.java:408)\n        at com.sun.jna.Function.invoke(Function.java:354)\n        at com.sun.jna.Library$Handler.invoke(Library.java:244)\n        at org.jline.terminal.impl.jna.win.$Proxy23.ReadConsoleInput(Unknown Source)\n        at org.jline.terminal.impl.jna.win.JnaWinSysTerminal.readConsoleInput(JnaWinSysTerminal.java:130)\n        at org.jline.terminal.impl.jna.win.JnaWinSysTerminal.processConsoleInput(JnaWinSysTerminal.java:65)\n        at org.jline.terminal.impl.AbstractWindowsTerminal.pump(AbstractWindowsTerminal.java:400)\n        at java.lang.Thread.run(Unknown Source)\n\n尝试过-nojline和-Djline.terminal=jline.UnsupportedTerminal都没有用。\n请问这是哪里出了问题？对此除了让服务端新开一个窗口分离运行有没有别的解决办法？\n\n\n\n\n\n\n\n",
    "replies": []
}