{
    "title": "save后配置变成Unicode编码",
    "author": "楠木i",
    "replyCount": 4,
    "timestamp": 1552202880,
    "txt_content": " 本帖最后由 1957863988 于 2019-3-10 15:33 编辑 \n\na2 = new File (getDataFolder(), \"a2.yml\");\n                if (!a2.exists()){\n                        saveResource(\"a2.yml\", true);\n                }\na1(YamlConfiguration.loadConfiguration(a2));\n\n然后我用\n\na2.set(\"测试\",\"测试\"); 设置\nthis.a1.save(this.a2); 保存\n之后a2.yml里面的内容会变 Unicode 码\n\n请问怎么解决。。",
    "replies": [
        {
            "author": "3TUSK",
            "timestamp": 1552203420,
            "txt_content": "//强制指定 UTF-8 编码方式即可\nYamlConfiguration.loadConfiguration(new InputStreamReader(new FileInputStream(a2), StandardCharsets.UTF_8));复制代码"
        },
        {
            "author": "楠木i",
            "timestamp": 1552204920,
            "txt_content": "u.s.knowledge 发表于 2019-3-10 15:37\n好像一样会变成Unicode编码。。"
        },
        {
            "author": "xiaodong150",
            "timestamp": 1552293900,
            "txt_content": "你这个我不知道为啥 ，但是建议使用io"
        },
        {
            "author": "海螺螺",
            "timestamp": 1552318440,
            "txt_content": "你的a1 a2都是些啥\n\n假设这样\nYamlConfiguration c = loadFromXxxx(...)\n因为1.7 1.8老版本的YamlConfiguration类里有一条yanlOptions.setAllowUnicode(true)，因此我们要手动改回来\nimport org.yaml.snakeyaml.*\nDumperOptions opt = new DumperOptions()\nopt.setAllowUnicode(false)\nopt.setDefaultFlowStyle(FlowStyle.BLOCK)\nRepresenter rep =  new YamlRepresenter()\nrep.setDefaultFlowStyle(FlowStyle.BLOCK)\nYaml yaml = new Yaml(new YamlConstructor(), rep, opt)\nField f = c.getClass().getDeclaredField(\"yaml\")\nf.setAccessible(true)\nf.set(c, yaml)\n\n然后你save就不会有Unicode了\n比较麻烦，但是如果你要用bukkit的配置文件库只能这样"
        }
    ]
}