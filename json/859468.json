{
    "title": "关于实体错误移动",
    "author": "2745398905",
    "replyCount": 7,
    "timestamp": 1555831980,
    "txt_content": "今天开服一段时间后服务端出现了以下警吿\n\n[12:46:41] [Server thread/WARN]: Wrong location for EntityItemFrame['entity.ItemFrame.name'/160, l='qwq', x=808.50, y=31.50, z=-128.06] in world 'qwq'!\n[12:46:41] [Server thread/WARN]: Entity is at 808.5,-128.0625 (chunk 50,-9) but was stored in chunk 50,-8\n[12:46:41] [Server thread/WARN]: Cauldron has removed EntityItemFrame['entity.ItemFrame.name'/160, l='qwq', x=808.50, y=31.50, z=-128.06] to prevent a server crash.\n\n\n以前开服时也偶而有几次出现这种警吿，请问一下各位大佬，是什么原因导致服务端出现这种警吿呢?\n",
    "replies": [
        {
            "author": "极光creeper",
            "timestamp": 1555831980,
            "txt_content": " 本帖最后由 极光creeper 于 2019-4-21 17:58 编辑 \n\n其实这是实体(展示框)保存的问题(展示框本身坐标就不是整数，卡在两个坐标中间)\n是实体保存的区块错误 导致启动的时候无法正常加载出来\n然后就会导致服务器自动崩溃\n而为了防止启动就无限崩溃 你的Cauldron核心直接把实体移除了\n\n问题似乎是在-128.0625这个坐标上 应该是保存的时候(z=127？-128]会分配到区块chunk 50,-9\n但是服务器加载地图的时候这个实体实际上是以(z=128-129？]被读取了的，也就是.0625这个数字尾的问题了\n导致加载的时候认为应该加载在chunk 50,-8\n\n(z=127？打问号是因为老娘不知道左边这个值会取到哪里XD)\n\n很难说问题出在了哪里，可以换个核心构筑试试看\n如果还有问题的话，可能会和一些自动保存插件有关\n\n但实际上这个报错应该并不影响服务器运行XD\n\nps：后来突然想起来，如果bat(服务器)突然崩溃，也可能会让在两个区块中间的实体保存的位置出现问题"
        },
        {
            "author": "2745398905",
            "timestamp": 1555840680,
            "txt_content": "极光creeper 发表于 2019-4-21 16:39\n其实这是实体(展示框)保存的问题(展示框本身坐标就不是整数，卡在两个坐标中间)\n是实体保存的区块错误 导致 ...\n感谢大佬回答qwq\n以前也偶尔有几次出现这种情况，影响主要是玩家养殖的动物被删除了，玩家多少会有一点损失（然后玩家就向我友好的问候）\n也就是说必须要换服务端核心或者升级服务端核心版本才能解决问题吗？\n另外请问那个自动保存插件是指地图自动备份插件吗"
        },
        {
            "author": "极光creeper",
            "timestamp": 1555841280,
            "txt_content": "2745398905 发表于 2019-4-21 17:58\n感谢大佬回答qwq\n以前也偶尔有几次出现这种情况，影响主要是玩家养殖的动物被删除了，玩家多少会有一点损 ...\n每一个版本(比如1.7)的Cauldron核心其实是有不知道多少(至少几百吧)个构筑的 \n猜想1是你这个核心保存地图实体和加载地图实体的区块判断方式不同而导致了这个问题\n很有可能后续构筑版本就修复了这种问题 所以可以先去试试看换一个其他构筑 \n几乎没有可能会影响到插件/mod工作\n\n猜想2指的的确是地图自动备份插件"
        },
        {
            "author": "2745398905",
            "timestamp": 1555849200,
            "txt_content": "极光creeper 发表于 2019-4-21 18:08\n每一个版本(比如1.7)的Cauldron核心其实是有不知道多少(至少几百吧)个构筑的 \n猜想1是你这个核心保存地图 ...\n非常感谢qwq"
        },
        {
            "author": "2745398905",
            "timestamp": 1555857660,
            "txt_content": "极光creeper 发表于 2019-4-21 18:08\n每一个版本(比如1.7)的Cauldron核心其实是有不知道多少(至少几百吧)个构筑的 \n猜想1是你这个核心保存地图 ...\n大佬我还可以再请教一个问题吗qwq\n就是关于这个实体错误，我感觉应该还有一种原因\nspigot文件设置中有2个选项，分别是tiles、entity，服务器物体，实体处理时间设定\n我感觉应该是这两个选项数值太低了，导致个别实体的事物还没有处理完成，就开始打断进行下一个事物循环\n本来那个实体要加载到a区块，结果因为事物还没有处理完成就进行了下一个事物循环，导致实体本来要加载到b区块结果被打断又加载不了，卡在两边形成冲突，然后就出现了这种情况了\n大佬你怎么看呢qwq\n关于这个原因，我主要是从这个贴子看到的\nhttp://www.mcbbs.net/thread-835520-1-1.html\n希望大佬有空闲时间能够回复一下谢谢qwq"
        },
        {
            "author": "极光creeper",
            "timestamp": 1555860660,
            "txt_content": "2745398905 发表于 2019-4-21 22:41\n大佬我还可以再请教一个问题吗qwq\n就是关于这个实体错误，我感觉应该还有一种原因\nspigot文件设置中有2个 ...\n咱 学 艺 不 精\n是个好问题 lz说的很有道理 但实际上和机子 服务器端的关联性都很强\n可能不同情况下试出来结果还不一样 就目前看来想知道这个问题的答案...\n还需要楼主备份一下配置文件然后先改了试试看吧XD\n有空的话老娘是一定要去测试一下的\n\n这里没法给出解答实在是抱歉\n只能给出一点点方案与想法\n1：先翻倍处理时间试试看(无效的话记得改回去)\n2：鉴于大部分实体是成功保存了的，是否真的由这几个数值影响处理效率还有待lz测试了XD\n\n如果这种问题偶发的话 看看会不会是崩端引起的未保存\n\n但是这不是Cauldron核心么，哪里来的spigot文件...\n(是猫端么233\n"
        },
        {
            "author": "2745398905",
            "timestamp": 1555924080,
            "txt_content": "极光creeper 发表于 2019-4-21 23:31\n咱 学 艺 不 精\n是个好问题 lz说的很有道理 但实际上和机子 服务器端的关联性都很强\n可能不同情况下试出 ...\n感谢大佬的方案~\n另外那个spigot.yml配置文件，我记得每个mod服务端都有啊qwq"
        }
    ]
}