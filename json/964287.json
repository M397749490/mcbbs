{
    "title": "如何利用PhatLoots插件将战利品列表绑定到特定名字的怪物上？",
    "author": "世界边境",
    "replyCount": 4,
    "timestamp": 1582169400,
    "txt_content": " 本帖最后由 世界边境 于 2020-2-20 11:34 编辑 \n\n比如我的服务器里会生成一种叫做“相啸魔”的怪物，\n我希望可以可以把一个战利品列表绑定到这种怪物上，\n在每次玩家击杀怪物后掉落相应的战利品，\n该如何配置?\n（可以配合其他插件实现）\n\n以及是否可以在名字判断中使用通配符或正则？\n（比如生成的怪物拥有等级，如：Lv165相啸魔，\n我希望可以让所有100级到199级的该怪物掉落某种战利品）\n\n",
    "replies": [
        {
            "author": "Qwe_Sakura",
            "timestamp": 1582169820,
            "txt_content": "大佬你看这个行不行https://www.mcbbs.net/forum.php?mod=viewthread&tid=791074"
        },
        {
            "author": "极光creeper",
            "timestamp": 1582172100,
            "txt_content": " 本帖最后由 极光creeper 于 2020-2-20 12:35 编辑 \n\n谢邀，一位萌新希望能帮到您\n我需要知道 你的怪物插件是什么\n\n\n以下是与mm怪物绑定 的代码 （毫无用处）\nphatloot 并不能用 正则，但是有mm的hook 所以战利品表可以绑在mm怪物身上\n\npackage com.codisimus.plugins.phatloots.commands;\n\nimport com.codisimus.plugins.phatloots.commands.CommandHandler.CodCommand;\nimport com.codisimus.plugins.phatloots.loot.MythicMobsItem;\nimport org.bukkit.command.CommandSender;\n\n/**\n * Executes Player Commands for configuring MythicMobs Loot\n *\n * @author Codisimus\n */\npublic class ManageMythicMobsLootCommand {\n\n    @CodCommand(\n        command = \"add\",\n        subcommand = \"mm\",\n        weight = 193.2,\n        aliases = {\"+\"},\n        usage = {\n            \"§e     PhatLoots Manage Loot Help Page:\",\n            \"§5A Parameter starts with the 1 character §2id\",\n            \"§2p§f: §5The Name of the PhatLoot ex. §6pEpic\",\n            \"§bIf PhatLoot is not specified then all PhatLoots linked to the target Block will be affected\",\n            \"§2%§f: §5The chance of looting ex. §6%50 §5or §6%0.1 §5(default: §6100§5)\",\n            \"§2c§f: §5The name of the collection to add the loot to ex. §6cFood\",\n            \"§2#§f: §5The amount to be looted ex. §6#10 §5or §6#1-64\",\n            \"§2<command> <tier> [Parameter1] [Parameter2]...\",\n            \"§bex. §6<command> ItemA #2-3 %80\",\n            \"§bex. §6<command> ItemB %10 cWeapon\",\n            \"§bTutorial Video:\",\n            \"§1§nNone yet, Submit yours!\"\n        },\n        permission = \"phatloots.manage\"\n    )\n    public boolean addMythicMobsItem(CommandSender sender, String itemId, String[] args) {\n        setMythicMobsItem(sender, true, itemId, args);\n        return true;\n    }\n\n    @CodCommand(\n        command = \"remove\",\n        subcommand = \"md\",\n        weight = 198.1,\n        aliases = {\"-\"},\n        usage = {\n            \"§e     PhatLoots Manage Loot Help Page:\",\n            \"§5A Parameter starts with the 1 character §2id\",\n            \"§2p§f: §5The Name of the PhatLoot ex. §6pEpic\",\n            \"§bIf PhatLoot is not specified then all PhatLoots linked to the target Block will be affected\",\n            \"§2%§f: §5The chance of looting ex. §6%50 §5or §6%0.1 §5(default: §6100§5)\",\n            \"§2c§f: §5The name of the collection to add the loot to ex. §6cFood\",\n            \"§2#§f: §5The amount to be looted ex. §6#10 §5or §6#1-64\",\n            \"§2<command> <tier> [Parameter1] [Parameter2]...\",\n            \"§bex. §6<command> ItemA #2-3 %80\",\n            \"§bex. §6<command> ItemB %10 cWeapon\",\n            \"§bTutorial Video:\",\n            \"§1§nNone yet, Submit yours!\"\n        },\n        permission = \"phatloots.manage\"\n    )\n    public boolean removeMythicMobsItem(CommandSender sender, String itemId, String[] args) {\n        setMythicMobsItem(sender, false, itemId, args);\n        return true;\n    }\n\n    /**\n     * Generates the MythicDrops Item and sets it on the PhatLoot(s)\n     *\n     * @param sender The CommandSender who is setting the MythicMobs Item\n     * @param add True if the MythicMobs Item should be added to the PhatLoot(s)\n     * @param itemId The ID of the MythicMobs Item\n     * @param args The arguments of the MythicMobs Item\n     */\n    private static void setMythicMobsItem(CommandSender sender, boolean add, String itemId, String[] args) {\n        String phatLoot = null; //The name of the PhatLoot\n        double percent = 100; //The chance of receiving the Loot (defaulted to 100)\n        String coll = null; //The Collection to add the Loot to\n        int amountLower = 1; //Least amount of loot items to possibly generate (defaulted to 1)\n        int amountUpper = 1; //Most amount of loot items to possibly generate(defaulted to 1)\n\n        //Check each parameter\n        int i = 0;\n        while (i < args.length) {\n            char c = args.charAt(0);\n            String s = args.substring(1);\n            switch (c) {\n            case 'p': //PhatLoot Name\n                phatLoot = s;\n                break;\n\n            case '%': //Probability\n                percent = LootCommandUtil.getPercent(sender, s);\n                if (percent == -1) {\n                    sender.sendMessage(\"§6\" + s + \"§4 is not a percent\");\n                    return;\n                }\n                break;\n\n            case 'c': //Collection Name\n                coll = s;\n                break;\n\n            case '#': //Amount\n                amountLower = LootCommandUtil.getLowerBound(s);\n                amountUpper = LootCommandUtil.getUpperBound(s);\n                if (amountLower == -1 || amountUpper == -1) {\n                    sender.sendMessage(\"§6\" + s + \"§4 is not a valid number or range\");\n                    return;\n                }\n                break;\n\n            default: //Invalid Parameter\n                sender.sendMessage(\"§6\" + c + \"§4 is not a valid parameter ID\");\n                return;\n            }\n\n            i++;\n        }\n\n        //Construct the Loot\n        MythicMobsItem loot = new MythicMobsItem(itemId, amountLower, amountUpper);\n        loot.setProbability(percent);\n\n        LootCommandUtil.setLoot(sender, phatLoot, add, coll, loot);\n    }\n}\n\n\n正则的话\n\n在\ncom.codisimus.plugins.phatloots.events;\n下面提供了方法\npublic String getCustomName() {\n        return mob.getCustomName();\n    }\n所以似乎可以自己写一下正则的判断(悲)\n\n\n"
        },
        {
            "author": "世界边境",
            "timestamp": 1582176960,
            "txt_content": "极光creeper 发表于 2020-2-20 12:15\n谢邀，一位萌新希望能帮到您\n我需要知道 你的怪物插件是什么\n我所用的怪物插件是LorinthsRpgMobs，一个怪物等级插件。"
        },
        {
            "author": "世界边境",
            "timestamp": 1582602000,
            "txt_content": "哦，我已经找到方法了，将战利品名命为怪物名字就好啦~"
        }
    ]
}