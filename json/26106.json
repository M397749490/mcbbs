{
    "title": "关于MOD的GUI调用",
    "author": "Zhuogu",
    "replyCount": 8,
    "timestamp": 1339320300,
    "txt_content": " 本帖最后由 Zhuogu 于 2012-6-10 20:43 编辑 \n\n因为感觉Residence领地插件设置权限很繁琐，我想给它写一个GUI管理权限，结果试了半天，连GUI都调不出来，很郁闷…\n\n求高人相助，感激不尽…\n＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝\n以下是代码\nmod_ResGui.java\n\n\n\n\n\n\n045KAQ0`)6~`GGNDQA62X{R.jpg (37.18 KB, 下载次数: 13)\n\n下载附件\n\nmod_ResGui\n2012-6-10 17:20 上传\n\n\n\n\n\npackage net.minecraft.src;\n\nimport org.lwjgl.input.Keyboard;\n\nimport net.minecraft.client.Minecraft;\n\npublic class mod_ResGui extends BaseMod\n{\n        \n        public boolean show = false;\n        \n        public mod_ResGui()\n        {\n                mc = ModLoader.getMinecraftInstance();\n                ModLoader.registerKey(this, this.key, false);\n                ModLoader.addLocalization(\"Residence GUI\", \"Residence GUI\");\n                ModLoader.setInGUIHook(this, true, false);\n                ModLoader.setInGameHook(this, true, false);\n        }\n        \n        public String getVersion()\n        {\n                return \"1.2.5\";\n        }\n        \n        public void load()\n        {\n                \n        }\n        \n        public void KeyboardEvent(KeyBinding keybinding)\n        {\n                if(keybinding == this.key)\n                {\n                        mc.displayGuiScreen(new GuiResidence(world, this, mc));\n                }\n        }\n        \n        public static World world;\n        protected Minecraft mc;\n        private KeyBinding key = new KeyBinding(\"Residence GUI\", Keyboard.KEY_R);\n}\n复制代码\n\n\n\nGuiResidence.java\n\n\n\n\n\n]DY3B{ST0)(XH9LX8]6MPCP.jpg (24.95 KB, 下载次数: 10)\n\n下载附件\n\nGuiResidence\n2012-6-10 17:19 上传\n\n\n\n\n\npackage net.minecraft.src;\n\nimport net.minecraft.client.Minecraft;\n\npublic class GuiResidence extends GuiScreen\n{\n        private World world;\n        private Minecraft mc;\n        \n        GuiButton applyBtn;\n        GuiButton okBtn = new GuiButton(1, width / 2 - 50, height / 2 - 10, 60, 20, \"OK\");\n        GuiButton cancelBtn;\n        \n        public GuiResidence(World world1, mod_ResGui mod_resgui, Minecraft minecraft)\n        {\n                mc = minecraft;\n                world = world1;\n        }\n        \n        public void initGui()\n        {\n                controlList.clear();\n                controlList.add(okBtn);\n        }\n        \n        public void drawScreen (int i, int j, float f)\n        {\n                drawDefaultBackground();\n                drawCenteredString(fontRenderer, \"GUI is Working!\", width / 2, height / 2 - 20, 0xffffff);\n        }\n        \n}复制代码\n\n\n",
    "replies": [
        {
            "author": "sjjklh",
            "timestamp": 1339321440,
            "txt_content": "java小白飘过"
        },
        {
            "author": "Dear_ICE",
            "timestamp": 1339323540,
            "txt_content": "代码没有太大问题，稍作修改：\n\nif (mc.currentScreen == null && keybinding == this.key)\n添加一个当前Gui的判断\n\n     public void initGui()\n     {\n             controlList.clear();\n             okBtn = new GuiButton(1, width / 2 - 50, height / 2 - 10, 60, 20, \"OK\");\n             controlList.add(okBtn);\n     }\nokBtn 的实例化写在 initGui方法里，因为 width height 这两个变量在这个方法里才有赋值。"
        },
        {
            "author": "Zhuogu",
            "timestamp": 1339323900,
            "txt_content": "Dear_ICE 发表于 2012-6-10 03:19 \n代码没有太大问题，稍作修改：\n\nif (mc.currentScreen == null && keybinding == this.key)\n谢谢，可是为什么现在我按设定好的键(我这里是R键)，GUI不显示呢？"
        },
        {
            "author": "Zhuogu",
            "timestamp": 1339400160,
            "txt_content": "Zhuogu 发表于 2012-6-10 03:25 \n谢谢，可是为什么现在我按设定好的键(我这里是R键)，GUI不显示呢？\n自己顶上去求解…\n"
        },
        {
            "author": "caohun1",
            "timestamp": 1340094720,
            "txt_content": "你要做RES的GUI,跟我想到一起去了。。。我想的也是绑定按键调出GUI，然后通过按钮切换权限的开关，你现在做的咋样了，成品出来了么，能用么"
        },
        {
            "author": "caohun1",
            "timestamp": 1340094960,
            "txt_content": "我还希望能让res选定区域的时候像world edit那样使用有颜色的框圈出选中的范围\n在自己建立的领地里按键显示的是权限管理的GUI，在别人的领地里按键显示的是INFO和设置为false的权限列表"
        },
        {
            "author": "caohun1",
            "timestamp": 1340101560,
            "txt_content": "我发布了一个悬赏帖子 http://www.mcbbs.net/forum.php?m ... mp;extra=#pid370985"
        },
        {
            "author": "zhouzhi0707",
            "timestamp": 1340116320,
            "txt_content": "{:10_523:}纯支持的路过~膜拜各位技术帝~"
        }
    ]
}