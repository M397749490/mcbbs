{
    "title": "过期资源，请删除",
    "author": "Ynglife",
    "replyCount": 2,
    "timestamp": 1499434800,
    "txt_content": " 本帖最后由 Ynglife 于 2018-5-8 21:26 编辑 \n\n客户端开发助手-第一节 鉴于有很多朋友想开发自己定制的客户端/服务端,所以我开启了本系列，以此经验分享减少入门者的苦恼\n首先让我们先了解一下minecraft的启动机制：\n\n\n\n\nps.image.105_721.jpg (26.27 KB, 下载次数: 0)\n\n下载附件\n\n2017-7-7 21:29 上传\n\n\n\n\n\n从这个表可以看到我们启动游戏所要控制的只有启动参数，只要我们处理了这个参数就能实现启动游戏。\n\n现在我们再看看示例版本为1.7.2带FORGE的JSON\n{         \"id\": \"1.7.2-Forge10.12.0.1024\",         \"time\": \"2014-02-05T04:18:52-0500\",         \"releaseTime\": \"1960-01-01T00:00:00-0700\",         \"type\": \"release\",         \"minecraftArguments\": \"--username ${auth_player_name} --version ${version_name} --gameDir ${game_directory} --assetsDir ${game_assets} --uuid ${auth_uuid} --accessToken ${auth_access_token} --tweakClass cpw.mods.fml.common.launcher.FMLTweaker\",         \"libraries\": [                 {                         \"name\": \"net.minecraftforge:forge:1.7.2-10.12.0.1024\",                         \"url\": \"http://files.minecraftforge.net/maven/\"                 },                 {                         \"name\": \"net.minecraft:launchwrapper:1.9\",                         \"serverreq\": true                 },                 {                         \"name\": \"org.ow2.asm:asm-all:4.1\",                         \"serverreq\": true                 },                 {                         \"name\": \"org.scala-lang:scala-library:2.10.2\",                         \"url\": \"http://files.minecraftforge.net/maven/\",                         \"checksums\": [                                 \"6ba65d12cd09d441083262d6f73d2257fec7c663\",                                 \"65de4339eaed1c3675485fb03a3532fecfd8e8cd\"                         ],                         \"comment\": \"Important for FML, we add this\",                         \"serverreq\": true,                         \"clientreq\": true                 },                 {                         \"name\": \"org.scala-lang:scala-compiler:2.10.2\",                         \"url\": \"http://files.minecraftforge.net/maven/\",                         \"checksums\": [                                 \"64c8b1380cc53d6850823d6e4e7ae984aa44ef9c\",                                 \"99fd0ffb66f3088b0cd1071315fd5eb2b2b070ff\"                         ],                         \"comment\": \"Important for FML, we add this\",                         \"serverreq\": true,                         \"clientreq\": true                 },                 {                         \"name\": \"java3d:vecmath:1.3.1\"                 },                 {                         \"name\": \"net.sf.trove4j:trove4j:3.0.3\"                 },                 {                         \"name\": \"com.ibm.icu:icu4j-core-mojang:51.2\"                 },                 {                         \"name\": \"net.sf.jopt-simple:jopt-simple:4.5\",                         \"serverreq\": true                 },                 {                         \"name\": \"lzma:lzma:0.0.1\",                         \"serverreq\": true                 },                 {                         \"name\": \"com.paulscode:codecjorbis:20101023\"                 },                 {                         \"name\": \"com.paulscode:codecwav:20101023\"                 },                 {                         \"name\": \"com.paulscode:libraryjavasound:20101123\"                 },                 {                         \"name\": \"com.paulscode:librarylwjglopenal:20100824\"                 },                 {                         \"name\": \"com.paulscode:soundsystem:20120107\"                 },                 {                         \"name\": \"io.netty:netty-all:4.0.10.Final\"                 },                 {                         \"name\": \"com.google.guava:guava:15.0\"                 },                 {                         \"name\": \"org.apache.commons:commons-lang3:3.1\"                 },                 {                         \"name\": \"commons-io:commons-io:2.4\"                 },                 {                         \"name\": \"net.java.jinput:jinput:2.0.5\"                 },                 {                         \"name\": \"net.java.jutils:jutils:1.0.0\"                 },                 {                         \"name\": \"com.google.code.gson:gson:2.2.4\"                 },                 {                         \"name\": \"com.mojang:authlib:1.3\"                 },                 {                         \"name\": \"org.apache.logging.log4j:log4j-api:2.0-beta9\"                 },                 {                         \"name\": \"org.apache.logging.log4j:log4j-core:2.0-beta9\"                 },                 {                         \"name\": \"org.lwjgl.lwjgl:lwjgl:2.9.0\",                         \"rules\": [                                 {                                         \"action\": \"allow\"                                 },                                 {                                         \"action\": \"disallow\",                                         \"os\": {                                                 \"name\": \"osx\"                                         }                                 }                         ]                 },                 {                         \"name\": \"org.lwjgl.lwjgl:lwjgl_util:2.9.0\",                         \"rules\": [                                 {                                         \"action\": \"allow\"                                 },                                 {                                         \"action\": \"disallow\",                                         \"os\": {                                                 \"name\": \"osx\"                                         }                                 }                         ]                 },                 {                         \"name\": \"org.lwjgl.lwjgl:lwjgl-platform:2.9.0\",                         \"rules\": [                                 {                                         \"action\": \"allow\"                                 },                                 {                                         \"action\": \"disallow\",                                         \"os\": {                                                 \"name\": \"osx\"                                         }                                 }                         ],                         \"natives\": {                                 \"linux\": \"natives-linux\",                                 \"windows\": \"natives-windows\"                         },                         \"extract\": {                                 \"exclude\": [                                         \"META-INF/\"                                 ]                         }                 },                 {                         \"name\": \"org.lwjgl.lwjgl:lwjgl:2.9.1-nightly-20131017\",                         \"rules\": [                                 {                                         \"action\": \"allow\",                                         \"os\": {                                                 \"name\": \"osx\"                                         }                                 }                         ]                 },                 {                         \"name\": \"org.lwjgl.lwjgl:lwjgl_util:2.9.1-nightly-20131017\",                         \"rules\": [                                 {                                         \"action\": \"allow\",                                         \"os\": {                                                 \"name\": \"osx\"                                         }                                 }                         ]                 },                  {                         \"name\": \"net.java.jinput:jinput-platform:2.0.5\",                         \"natives\": {                                 \"linux\": \"natives-linux\",                                 \"windows\": \"natives-windows\",                                 \"osx\": \"natives-osx\"                         },                         \"extract\": {                                 \"exclude\": [                                         \"META-INF/\"                                 ]                         }                 }         ],         \"mainClass\": \"net.minecraft.launchwrapper.Launch\",         \"minimumLauncherVersion\": 9 }\n\n从上面可以看见这个我们的启动参数都是从这个JSO上面获取，那么我们现在需要做的就是处理这些参数。\n仔细看我下面的示例代码可以很容易发现libraies里面的所有name属性是以（例：）xxx:xxx:xxx命名的，而对应一下我们在-cp所需要的参数是地址，**，觉得name属性和这个地址像就对了，所以我们可以从libraries里面读取到所有name的内容并进行处理。\n那具体要怎么处理呢？请看一下的地址和name属性：\ncom.mojang:authlib:1.3C:\\Users\\xxx\\xxx\\172F\\.minecraft\\libraries\\com\\mojang\\authlib\\1.3\\authlib-1.3.jar\n这时一对比，又发现了冒号“：”将name属性分成了三部分-> com.mojang 与 authlib 和 1.3\n好了，分割出来这三个部分我们在看看libraries后面部分的路径com\\mojang\\authlib\\1.3\\authlib-1.3.jar\n分析到这里，我们就要处理他的规律了，用对象语言的思想处理一下这俩\n定义一个数组为 nameSpilt[3]\n那么按照刚才分割出来的name属性作出以下处理\nnameSpilt[0] = com.mojang\nnameSpilt[1] = authlib\nnameSpilt[2] = 1.3\n这时你又发现com.mojang也要处理一下才能变成com\\mojang\n所以再次定义一个数组 为dirSpilt[2]并作出以下处理\ndirSpilt[0] = com \ndirSpilt[1] = mojang\n要把这两个数组的元素格式化成路径：com\\mojang\\authlib\\1.3\\authlib-1.3.jar\ndirSpilt[0] +@\"\\\"+ dirSpilt[1] +@\"\\\"+ nameSpilt[1] +@\"\\\"+ nameSpilt[2] +@\"\\\"+ ( nameSpilt[1] + namespilt[2] + \".jar\")\n如果继续仔细观察json,你又会发现有类似org.apache.logging.log4j:log4j-api:2.0-beta9这样的属性(第一个元素有很多点，代表文件夹有很多层)，不过由于本节不讲代码实现部分，仅作原理解析，所以不予讲解。\n启动原理：Process Setup -> Process Start(“..\\java’w’.jar”,”Comments”)（C#/JAVA可直接实现）Comments所需参数[JVMstarter,ReadName(natives),ReadmainClass,ReadminecraftArgunments]\n\n\n\n JVMstarter（虚拟机启动参数）参数名称语法示例备注-Xmx-Xmx 4096m启动内存（一共两个参数，一个是最大一个是最小，最小可忽略）-Djava.library.path-Djava.library.path=x:\\mc\\.minecrtaft\\version\\172-5.8f\\172-5.8f-natives版本目录[名称](不是JAR也不是JSON，只是相对应JSON和JAR的目录+名字)-Dfml. ignoreInvaidMinecraftCertificates-Dfml. ignoreInvaidMinecraftCertificates=true是否忽略无效的证书（forge版本必须启动）-Dfml. ignorePatchDiscrepancies-Dfml. ignorePatchDiscrepancies=true是否忽略文件差异（必启项）-cp-cp x:\\mc\\.minecraft\\libraries\\xx\\xxx.jar;......;x:\\mc\\.minecraft\\version\\xxx.jarNative路径，需要读取VERSION.JSON获取libraries的所有”name”属性(最后一项为version下对应json的jar核心文件，不需要加分号)mainClassForge:net.minecraft.launcherwrapper.LaunchPure:net.client.minecraft.Launch程序入口点，在VERSION.JSON下读取的”mainClass”属性minecraftArguments一般我们获取到的是这个 \"minecraftArguments\": \"--username ${auth_player_name} --version ${version_name} --gameDir ${game_directory} --assetsDir ${game_assets} --uuid ${auth_uuid} --accessToken ${auth_access_token} --tweakClass cpw.mods.fml.common.launcher.FMLTweaker\"启动传入的参数，需要从VERSION.JSON的”minecraftArguments”属性截取并处理，详情见下面表格[size=10.5000pt] \n一般处理传入参数的做法就是替换掉他本来的占位符，比如将${auth_player_name}替换成 TEST\n\n参数名称（MinecraftArguments）语法示例备注--username ${auth_player_name}\n--username TEST\n[size=13.3333px]用户ID--version ${version_name}\n--version “6.66”\n[td=290]版本号（这个传入的版本号我目前没发现更改之后有什么影响，如果有望告知！）\n\n[/td]--gameDir ${game_directory}\n--gameDir x:\\mc\\.minecraft\n.minecraft所在目录--assetsDir ${game_assets}\n--assetsDir x:\\mc\\.minecraft\\assets\n[size=13.3333px]资源文件所在目录--uuid ${auth_uuid} \n[size=10.5000pt] \n（UUID）正版启动参数，一般不需要正版启动就不用改--accessToken ${auth_access_token}\n[size=10.5000pt] \n[size=13.3333px]（账户凭证）正版启动参数，一般不需要正版启动就不用改--tweakClass cpw.mods.fml.common.launcher.FMLTweaker\"\n--tweakClass cpw.mods.fml.common.launcher.FMLTweaker\"\n这个不需要更改，这是tweakClass插件的mod的入口点 \n\ncomments参数示例:(这里的换行只是方便演示，最终要用空格代替)\n-Xmx 4096m \n-Djava.library.path=c:\\ynglife\\mc\\.minecraft\\version\\v6.66forge\\v6.66forge-natives\n-Dfml. ignoreInvaidMinecraftCertificates=true\n-Dfml. ignorePatchDiscrepancies=true\n-cp c:\\ynglife\\mc\\.minecraft\\libiaries\\com\\xxx.jar;c:\\ynglife\\mc\\.minecraft\\libiaries\\net\\xxx.jar;c:\\ynglife\\mc\\.minecraft\\version\\v6.66forge\\v6.66forge.jar \nnet.minecraft.launcherwrapper.Launch\n--username TEST\n--version “6.66”\n--gameDir x:\\mc\\.minecraft\n--assetsDir x:\\mc\\.minecraft\\assets\n--uuid ${auth_uuid} \n--accessToken ${auth_access_token}(可有可无)\n--tweakClass cpw.mods.fml.common.launcher.FMLTweaker\"\n\n文档下载地址：点此下载\n本章介绍了参数的格式化以及启动原理，下一节讲解如何用代码实现处理JSON。注：建议有少许编程基础的玩家食用，否则可以参考ufof兄弟JAVA高手训练营或者csdn和msdn寻找并学习c#基础。\n",
    "replies": [
        {
            "author": "Heer_Kaisair",
            "timestamp": 1499517300,
            "txt_content": "==libs不仅仅是获取一个json的==1.7.10-forge版本有的需要再次获取1.7.10作为基版本（迷之翻译）的libs启动==\n虽然1.7.2似乎不用233333\n看来forge真偷懒23333"
        },
        {
            "author": "Ynglife",
            "timestamp": 1499534940,
            "txt_content": "小黑的手臂 发表于 2017-7-8 20:35\n==libs不仅仅是获取一个json的==1.7.10-forge版本有的需要再次获取1.7.10作为基版本（迷之翻译）的libs启动 ...\n对的，后面会顺带讲如何获取"
        }
    ]
}