{
    "title": "【1.14】物品头部/背包/手持显示不同材质/模型",
    "author": "ruhuasiyu",
    "replyCount": 5,
    "timestamp": 1544084580,
    "txt_content": " 本帖最后由 ruhuasiyu 于 2018-12-6 16:46 编辑 \n\n在上一篇帖物品手持/背包显示不同材质中提到，通过在display中放缩不同轴至0可以实现手持物在背包和各种人称视角显示不同材质。但是实际上，在背包中我们无需放缩，只需要将方块旋转到合适的角度即可覆盖背面材质。另一方面，头盔或者帽子的模型材质至少有5个面，若要实现背包显示材质不同只能为底部，此时通过旋转即可实现背包和头部显示不同材质/模型。\n\n\n然而，如果我们将这个物品手持（已缩小y轴至0），我们会发现该物品的的顶部和底部材质重叠了。如要解决这个问题，我们可以编写两个不同的模型，通过CustomModelData来区分，然后在手部/头部时检测范围并修改CustomModelData。\n\n注意我们无法使用各种原有的头盔，因修改CustomModelData只能修改其物品材质模型而不能修改其在头部的显示材质模型。这里我们使用雕刻过的南瓜。\n\n资源包中：\nresources/assets/minecraft/model/item/carved_pumpkin\n{\n    \"parent\": \"block/orientable\",\n    \"textures\": {\n        \"top\": \"block/pumpkin_top\",\n        \"front\": \"block/carved_pumpkin\",\n        \"side\": \"block/pumpkin_side\"\n    },\n        \"overrides\": [\n                { \"predicate\": { \"custom_model_data\": 12 }, \"model\": \"craftingpp:decor/glass_helmet\"},\n                { \"predicate\": { \"custom_model_data\": 112 }, \"model\": \"craftingpp:decor/glass_helmet1\"}\n        ]\n}\nresources/assets/craftingpp/model/decor/glass_helmet\n{\n        \"parent\": \"block/block\",\n        \"display\": {\n                \"gui\": {\n                        \"rotation\": [ -90, 0, 0 ]\n                }\n        },\n        \"elements\": [\n                {\n                        \"from\": [ 0, 0, 0 ],\n                        \"to\": [ 16, 16, 16 ],\n                        \"faces\": {\n                                \"down\":  { \"uv\": [ 0, 0,16,16 ], \"texture\": \"#down\", \"cullface\": \"down\" },\n                                \"up\":         { \"uv\": [ 4, 0, 8, 4 ], \"texture\": \"#hat\" },\n                                \"north\": { \"uv\": [ 4, 4, 8, 8 ], \"texture\": \"#hat\", \"cullface\": \"north\" },\n                                \"south\": { \"uv\": [12, 4,16, 8 ], \"texture\": \"#hat\", \"cullface\": \"south\" },\n                                \"west\":  { \"uv\": [ 8, 4,12, 8 ], \"texture\": \"#hat\", \"cullface\": \"west\" },\n                                \"east\":  { \"uv\": [ 0, 4, 4, 8 ], \"texture\": \"#hat\", \"cullface\": \"east\" }\n                        }\n                }\n        ],\n        \"textures\": {\n                \"hat\": \"craftingpp:decor/glass_helmet\",\n                \"down\": \"craftingpp:decor/glass_helmet_down\"\n        }\n}\nresources/assets/craftingpp/model/decor/glass_helmet1\n{\n        \"parent\": \"item/generated\",\n        \"textures\": {\n                \"layer0\": \"craftingpp:decor/glass_helmet_down\"\n        }\n}\n\n然后我们画好\nglass_helmet.png \nglass_helmet_down \n\n\n接下来是数据包，这里只列出主要的几个指令\n主函数\nexecute as @a[nbt={Inventory:[{Slot:103b,id:\"minecraft:carved_pumpkin\"}]}] run function cpp:decor/hat\nexecute as @a[nbt={SelectedItem:{id:\"minecraft:carved_pumpkin\"}}] run function cpp:decor/hat1\nexecute as @a[nbt={Inventory:[{Slot:-106b,id:\"minecraft:carved_pumpkin\"}]}] run function cpp:decor/hat2\ncpp:decor/hat\nexecute store result score #temp value run data get entity @s Inventory[{Slot:103b}].tag.CustomModelData\nexecute if score #temp value matches 111..123 store result entity @s Inventory[{Slot:103b}].tag.CustomModelData int 1 run scoreboard players remove #temp value 100\ncpp:decor/hat1\nexecute store result score #temp value run data get entity @s SelectedItem.tag.CustomModelData\nexecute if score #temp value matches 11..23 store result entity @s SelectedItem.tag.CustomModelData int 1 run scoreboard players add #temp value 100\ncpp:decor/hat2\nexecute store result score #temp value run data get entity @s Inventory[{Slot:-106b}].tag.CustomModelData\nexecute if score #temp value matches 11..23 store result entity @s Inventory[{Slot:-106b}].tag.CustomModelData int 1 run scoreboard players add #temp value 100\n\n这样，当南瓜进入头部时，将其CustomModelData 减少100，使用其对应的方块材质，而底部仍然为对应的物品材质。当进入手部时，将其CustomModelData 增加100，使用其对应的物品材质，以保证各个视角材质一致。\n\n最后，从图中可以看出，旋转方块和直接使用物品材质有细微差别，亮度上有所差异。\n\n[groupid=1009]The Command's Power[/groupid]",
    "replies": [
        {
            "author": "世纪渣男",
            "timestamp": 1544085720,
            "txt_content": "6666666666"
        },
        {
            "author": "Reyshe",
            "timestamp": 1544188920,
            "txt_content": "神乎其技，不服不行！"
        },
        {
            "author": "失落◇卍◇卐◇",
            "timestamp": 1544878380,
            "txt_content": "受教受教了"
        },
        {
            "author": "qaz1357077767",
            "timestamp": 1557418440,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "墨仔",
            "timestamp": 1557471420,
            "txt_content": "\n希望大家多多支持嗷，新人虽说看不懂吧~"
        }
    ]
}