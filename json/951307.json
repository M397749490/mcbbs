{
    "title": "长篇幅贴子的编辑十分卡顿",
    "author": "GeForceLegend",
    "replyCount": 18,
    "timestamp": 1580736600,
    "txt_content": "主要情况：\n\n在编辑我自己的长篇幅贴子的时候，出现了极为严重的卡顿现象。无论是输入英文还是输入中文，均需要等好几秒才会在编辑栏内显示。若没有显示已输入的文字就继续输入，则新输入的文字会等老文字显示之后再延时显示。卡顿过程中CPU占用有明显升高，而且哪怕是在没有任何输入的情况下点一下以切换光标位置都会造成CPU占用飙升（但不会造成卡顿）。在截图之后的输入时甚至产生了短暂的单线程连续满占用的情况。卡顿与输入法无关，关闭输入法输入英文也会造成卡顿。大致情况如下图：（操作系统为Windows10 1909）\n\n\n\n\n\nTIM截图20200203205416.png (48.86 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-3 21:20 上传\n\n\n\n\n\n\n一些可能有用的信息：\n贴子链接：https://www.mcbbs.net/thread-914350-1-1.html\n编辑的段落：主包更新日志  部分\n其他信息：\n\n编辑时先从编辑框内复制了“Release 1.1.1 | 2020.01.24”，然后在这段文字之内/之后继续编辑；\n后来为了节约时间，在新建空Word文档内编辑再复制粘贴（Word内的内容从“添加了大量物品模型：”之后开始），发现从该段开始继续往下编辑并不会有任何卡顿（最开始粘贴Word的文字的时候貌似有卡顿）。但是重新回到从编辑框内复制过来接着编辑的文本部分继续编辑仍然会卡顿。\n\n\n\n\n\n",
    "replies": [
        {
            "author": "SHEEP_REALMS",
            "timestamp": 1580741820,
            "txt_content": "尽量使用纯文本编辑，熟悉代码后在本地编辑，可以有效解决问题。一些特殊操作可以留到最后替换帖子内容时进行操作。"
        },
        {
            "author": "GeForceLegend",
            "timestamp": 1580743860,
            "txt_content": "SHEEP_REALMS 发表于 2020-2-3 22:57\n尽量使用纯文本编辑，熟悉代码后在本地编辑，可以有效解决问题。一些特殊操作可以留到最后替换帖子内容时进 ...\n好像只有一段在编辑的时候会卡顿，具体我也不晓得为啥"
        },
        {
            "author": "SHEEP_REALMS",
            "timestamp": 1580743920,
            "txt_content": "GeForceLegend 发表于 2020-2-3 23:31\n好像只有一段在编辑的时候会卡顿，具体我也不晓得为啥\n卧槽那你赶紧打开纯文本模式看看，我之前就遇到过这种情况，一看代码卡死循环了"
        },
        {
            "author": "rooke_zb",
            "timestamp": 1580745540,
            "txt_content": "说起来我做1w2字的教程也没出现过这种情况（况且我还加了一堆表格），切换成纯文本看看哪里代码出错了？\n论坛的编辑功能一直都有点问题，建议复制到文本编辑器等地方进行编辑。\n嗯？这就是移动工作站吗？i了i了关注点清奇"
        },
        {
            "author": "海螺螺",
            "timestamp": 1580745660,
            "txt_content": " 本帖最后由 海螺螺 于 2020-2-4 00:05 编辑 \n\n根据本人测试，编辑约50w字节的帖子（https://www.mcbbs.net/thread-695938-1-1.html）时，帖子的自带自动保存会造成约30s的卡顿，而自动保存的间隔也是30s，基本就是卡死\n本人的测试cpu是i7 9700k\n编辑时延迟显示可能是浏览器本身限制，但是保存时的卡顿应该可以优化解决\n\n\n\n\n\nfile_1580745831000.jpg (203.69 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-4 00:03 上传\n\n\n\n\n\n\n\n\n\n图片.png (17.99 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-4 00:04 上传\n\n\n\n\n\n\n我现在用的笔记本点字数统计都要卡顿约20s（i5 8265u）\n\n\n"
        },
        {
            "author": "凛",
            "timestamp": 1580747040,
            "txt_content": " 本帖最后由 凛 于 2020-2-4 00:49 编辑 \n\n\n\n\n\n[K($RWU0_ID0FO(V5]TOKJG.png (237.83 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-4 00:08 上传\n\n\n\n\n\n\n\n\n_0IQ(}MZ}ZQCVB9Y1TUBAO3.png (313.31 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-4 00:07 上传\n\n\n\n\n我估计是从WORD粘贴过来的缘故 导致部分文字被套了多层的BBCODE\n所以编辑器渲染起来会特别卡\n\n文字总共的字节是一万左右\n加上套的BBCODE一共20W字节\n"
        },
        {
            "author": "凛",
            "timestamp": 1580748120,
            "txt_content": " 本帖最后由 凛 于 2020-2-4 00:48 编辑 \n海螺螺 发表于 2020-2-4 00:01\n根据本人测试，编辑约50w字节的帖子（https://www.mcbbs.net/thread-695938-1-1.html）时，帖子的自带自动 ...\n你的帖子的BBCODE套的太多了\ncolor=#000000(文字颜色,黑 你的帖子出现了5000+次\nalign=left(文字左对齐 你的帖子内出现了3800+\nfont=微软雅黑 出现了1K+次\n纯文字15k字节加上套的BBCODE硬是拖到45k字节"
        },
        {
            "author": "凛",
            "timestamp": 1580749200,
            "txt_content": "海螺螺 发表于 2020-2-4 00:01\n根据本人测试，编辑约50w字节的帖子（https://www.mcbbs.net/thread-695938-1-1.html）时，帖子的自带自动 ...\n重点是格式的BBCODE嵌套的太多了\n导致编辑器渲染起来很蛋痛\n如果优化了帖子的格式代码就不会这么蛋痛了\n而且你的帖子分了很多章节\n如果真的文字量大到无法优化BBCODE\n我的建议是分章节最好拉到回复里面\n然后用目录跳转过去\n【教程】Discuz目录代码的使用\nhttps://www.mcbbs.net/thread-775677-1-1.html"
        },
        {
            "author": "凛",
            "timestamp": 1580749680,
            "txt_content": " 本帖最后由 凛 于 2020-2-4 01:12 编辑 \n海螺螺 发表于 2020-2-4 00:01\n根据本人测试，编辑约50w字节的帖子（https://www.mcbbs.net/thread-695938-1-1.html）时，帖子的自带自动 ...\n如果是真的完全不想自己去优化\n想要论坛去操作让帖子编辑不卡的话\n\n我个人的想法是\n\n方案一\n宅魂去改编辑器 让它会自动略去多余的BBCODE\n不过DISCUZ的编辑器逻辑很垃圾,真要这么改要改到下辈子\n\n方案二\n把编辑器的所见即所得给去了\n所有人编辑都走纯文本这个代价是显而易见的\n\n就是会拉低所有人的体验\n增高一部分人的一部分体验\n"
        },
        {
            "author": "SHEEP_REALMS",
            "timestamp": 1580751180,
            "txt_content": "说真的，DZ的文本编辑器真的很令人蛋疼，我现在已经不敢用所见即所得模式了，这个模式只能用来预览，并且预览之前还要全文复制一遍防止自动修正笔误导致排版崩坏。\n之前在帖子中加了个邮箱地址，然后越写越卡，打开纯文本模式一看原来之前每编辑一次就套娃一次 \n这个编辑器已经可以用“恐怖”来形容了，我每次打开第一件事情就是切到纯文本模式。"
        },
        {
            "author": "海螺螺",
            "timestamp": 1580756760,
            "txt_content": " 本帖最后由 海螺螺 于 2020-2-4 03:20 编辑 \n凛 发表于 2020-2-4 01:08\n如果是真的完全不想自己去优化\n想要论坛去操作让帖子编辑不卡的话\n不不不，我在意的完全不是编辑卡顿的问题，你要看清我反馈的是啥，我编辑一点不卡\n我说的是自动保存造成的卡顿，这个和帖子内容应该是毫无关系的\n\n以及关于论坛这个编辑器，排版还是略微会一点，但是再会体验也很差\n我现在倾向于写纯本文和非纯文本完全一致的帖子，但是就算如此有时也会丢失一些换行\n正经的文本量大的帖子已经全部挂在站外了\n"
        },
        {
            "author": "GeForceLegend",
            "timestamp": 1580783100,
            "txt_content": "凛 发表于 2020-2-4 01:08\n如果是真的完全不想自己去优化\n想要论坛去操作让帖子编辑不卡的话\n我明白了，是我从dz的编辑器里复制粘贴的次数太多了（更新日志里面的日期基本上是从最开始的那个一路复制过来的），从Word那里复制粘贴过来的没套这么多层就没一点问题"
        },
        {
            "author": "a1294790523",
            "timestamp": 1580788680,
            "txt_content": "GeForceLegend 发表于 2020-2-4 10:25\n我明白了，是我从dz的编辑器里复制粘贴的次数太多了（更新日志里面的日期基本上是从最开始的那个一路复制 ...\n对于长帖子我一般都是编辑完之后纯文本优化BBCode的，因为dz编辑器的确太拉跨了\n现在看到这样的套娃情况，我更加觉得纯文本手动优化的必要性有多大"
        },
        {
            "author": "rooke_zb",
            "timestamp": 1580790540,
            "txt_content": "有一说一，我刚才进了你帖子编辑→字数检查，20w字节就NM离谱（我也卡了）！我教程才7w字节，手动优化真的挺重要。建议你把纯文本粘贴到vscode之类的软件把多余的[(防)size(解)=10.5pt(析)]删除掉（说白了就是禁止套娃）"
        },
        {
            "author": "GeForceLegend",
            "timestamp": 1580790600,
            "txt_content": "brooke_zb 发表于 2020-2-4 12:29\n有一说一，我刚才进了你帖子编辑→字数检查，20w字节就NM离谱（我也卡了）！我教程才7w字节，手动优化真的 ...\n我下次更新的时候试试"
        },
        {
            "author": "GeForceLegend",
            "timestamp": 1580791080,
            "txt_content": "有一说一这套娃真的离谱，右边的缩略图都显示不完全了\n\n\n\n\n20200204123433.png (251.8 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-4 12:37 上传\n\n\n\n\n\n"
        },
        {
            "author": "E.T.星落辰",
            "timestamp": 1580877960,
            "txt_content": " 本帖最后由 E.T.星落辰 于 2020-2-5 12:47 编辑 \n\n套娃很疯狂。\n我估计没多少人注意到现在加粗优秀的星系搬运帖其实是重新发帖过的，原因就是第一版帖子我是直接所见即所得套上去的，到后来开编辑页面都会卡（P.S.我常年用各种学校单位以及家里的破烂机器做编辑），几乎所有功能都会产生亢余代码（几十行的[/spoiler]我是真心看不懂它们是怎么冒出来的），貌似是因为系统会自动给一些没头没尾的内容追加代码补正（最诡异的是签名系统的代码之前会在所有http后面疯狂追加www.mcbbs.net，现在不知道怎么样，我好久没改过签名了），然后代码补正越追越多越追越多……就爆了炸了。\n所以说养成良好的帖子代码习惯很重要2333，也不知道宅叔有没有什么办法。\n（用海报这种低字节数的手段填进大量的文本内容，我真是太天才了哈哈哈哈哈哈哈哈）"
        },
        {
            "author": "混乱",
            "timestamp": 1580899560,
            "txt_content": "对于代码优化的功能涉及discuz核心改动，需等待discuz官方更新"
        }
    ]
}