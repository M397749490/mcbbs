{
    "title": "[分析] 关于MOD报错 java.util.zip.ZipException",
    "author": "Zhuogu",
    "replyCount": 24,
    "timestamp": 1348717920,
    "txt_content": " 本帖最后由 Zhuogu 于 2012-9-26 22:07 编辑 \n\n很多人安装MOD可能都曾遇到各种各样的问题，一般人们都将问题归结为MOD冲突。但是我在此想要提出一种可能不是MOD冲突的情况，即：java.util.zip.ZipException: invalid entry size (expected A but got B bytes)复制代码这个异常通常在安装完一个MOD，启动游戏的时候出现。之前也有人在安装我的皮肤MOD时出过这个问题，来询问我。实际上，只要Google搜索一下，我们便会发现这个报错并不是个例。很多人甚至只安装了ModLoader之后就出现了这个报错。这些异常的错误报告通常为这样的格式：java.util.zip.ZipException: invalid entry size (expected A but got B bytes)\n        at java.util.zip.ZipInputStream.readEnd(Unknown Source)\n        at java.util.zip.ZipInputStream.read(Unknown Source)\n        at java.util.zip.ZipInputStream.closeEntry(Unknown Source)\n        at java.util.zip.ZipInputStream.getNextEntry(Unknown Source)\n        at ModLoader.readFromClassPath(ModLoader.java:XXXX)\n        at ModLoader.init(ModLoader.java:XXX)\n        at ModLoader.addAllRenderers(ModLoader.java:XXX)\n        at xxx.<init>(ahu.java:XXX)\n        at xxx.<clinit>(ahu.java:X)\n        at net.minecraft.client.Minecraft.a(SourceFile:XXX)\n        at net.minecraft.client.Minecraft.run(SourceFile:XXX)\n        at java.lang.Thread.run(Unknown Source)复制代码举例：\nModLoader 1 ModLoader 2 \njava.util.zip.ZipException: invalid entry size (expected 2506293256 but got 782 bytes)\n        at java.util.zip.ZipInputStream.readEnd(Unknown Source)\n        at java.util.zip.ZipInputStream.read(Unknown Source)\n        at java.util.zip.ZipInputStream.closeEntry(Unknown Source)\n        at java.util.zip.ZipInputStream.getNextEntry(Unknown Source)\n        at ModLoader.readFromClassPath(ModLoader.java:1204)\n        at ModLoader.init(ModLoader.java:886)\n        at ModLoader.addAllRenderers(ModLoader.java:189)\n        at ahu.<init>(ahu.java:77)\n        at ahu.<clinit>(ahu.java:8)\n        at net.minecraft.client.Minecraft.a(SourceFile:273)\n        at net.minecraft.client.Minecraft.run(SourceFile:657)\n        at java.lang.Thread.run(Unknown Source)\n复制代码IC(工业)\njava.util.zip.ZipException: invalid entry size (expected 2373386248 but got 4592 bytes)\n        at java.util.zip.ZipInputStream.readEnd(Unknown Source)\n        at java.util.zip.ZipInputStream.read(Unknown Source)\n        at java.util.zip.ZipInputStream.closeEntry(Unknown Source)\n        at java.util.zip.ZipInputStream.getNextEntry(Unknown Source)\n        at ModLoader.readFromClassPath(ModLoader.java:1221)\n        at ModLoader.init(ModLoader.java:825)\n        at ModLoader.AddAllRenderers(ModLoader.java:186)\n        at wb.<init>(wb.java:76)\n        at wb.<clinit>(wb.java:9)\n        at net.minecraft.client.Minecraft.a(SourceFile:265)\n        at net.minecraft.client.Minecraft.run(SourceFile:644)\n        at java.lang.Thread.run(Unknown Source)复制代码SkinMe\njava.util.zip.ZipException: invalid entry size (expected 959119368 but got 153 bytes)\n        at java.util.zip.ZipInputStream.readEnd(Unknown Source)\n        at java.util.zip.ZipInputStream.read(Unknown Source)\n        at java.util.zip.ZipInputStream.closeEntry(Unknown Source)\n        at java.util.zip.ZipInputStream.getNextEntry(Unknown Source)\n        at ModLoader.readFromClassPath(ModLoader.java:1306)\n        at ModLoader.init(ModLoader.java:915)\n        at ModLoader.addAllRenderers(ModLoader.java:169)\n        at avx.<init>(RenderManager.java:86)\n        at avx.<clinit>(RenderManager.java:12)\n        at net.minecraft.client.Minecraft.a(SourceFile:260)\n        at net.minecraft.client.Minecraft.run(SourceFile:516)\n        at java.lang.Thread.run(Unknown Source)复制代码McMySkin\njava.util.zip.ZipException: invalid entry size (expected 67324752 but got 833 bytes)\n        at java.util.zip.ZipInputStream.readEnd(Unknown Source)\n        at java.util.zip.ZipInputStream.read(Unknown Source)\n        at java.util.zip.ZipInputStream.closeEntry(Unknown Source)\n        at java.util.zip.ZipInputStream.getNextEntry(Unknown Source)\n        at ModLoader.readFromClassPath(ModLoader.java:1204)\n        at ModLoader.init(ModLoader.java:886)\n        at ModLoader.addAllRenderers(ModLoader.java:189)\n        at ahu.<init>(ahu.java:77)\n        at ahu.<clinit>(ahu.java:8)\n        at net.minecraft.client.Minecraft.a(SourceFile:273)\n        at net.minecraft.client.Minecraft.run(SourceFile:657)\n        at java.lang.Thread.run(Unknown Source)复制代码\n从上述例子来看这个问题都与ModLoader有关，并且是Zip压缩包异常读取。ModLoader在加载第一步时会去读取整个压缩包，当压缩包不规范、ModLoader无法读取时，就会抛出异常，最终无法启动游戏。根据错误报告与上述几个帖子的最总处理结果来看，造成这个问题的主要原因是使用了有问题的压缩/解压缩软件。首先看，在第一个ModLoader的例子中，在5楼得到的解决方案：楼主使用了IZArc压缩工具，而该工具在处理相同文件覆盖的时候存在问题，不能很好地处理，导致压缩包不合法，ModLoader无法读取，抛出异常。最终楼主用7-ZIP重新压缩，问题就顺利解决了。相同的问题同样存在于部分国产免费压缩工具（好压、快压、360压缩之类）下，原因也是一样，问题都产生在处理相同文件覆盖时。在这个例子中，楼主也是从某国产压缩软件换用WINRAR解决了问题。我只是想大致分析、推测一下的这个问题的成因，也欢迎遇到或曾遇到这个java.util.zip.ZipException报错的人说明一下自己当时的情况与最终的解决方案。我建议大家以后在修改压缩包时尽量使用WinRAR和7-ZIP，避免不必要的麻烦。最后附： 7-ZIP官网 WinRAR官网",
    "replies": [
        {
            "author": "KYCN.卡神",
            "timestamp": 1348718760,
            "txt_content": "表示屌爆了  模模糊糊的懂了"
        },
        {
            "author": "zzcat770",
            "timestamp": 1348719120,
            "txt_content": "来膜拜下技术帝，要是能研究下其他报错信息和解决就好了，但还是要说一声，LZ碉堡了"
        },
        {
            "author": "LIVNDS",
            "timestamp": 1348719240,
            "txt_content": "好···············奇妙耶···························"
        },
        {
            "author": "Rapture",
            "timestamp": 1348719360,
            "txt_content": "7Zip神器无误。"
        },
        {
            "author": "oomanj",
            "timestamp": 1348719360,
            "txt_content": "= =厉害啊............."
        },
        {
            "author": "神ID",
            "timestamp": 1348719720,
            "txt_content": "虽不明，但觉历"
        },
        {
            "author": "dy2084",
            "timestamp": 1348721340,
            "txt_content": "我用好压，mod也不会出错= ="
        },
        {
            "author": "Timyang",
            "timestamp": 1348721940,
            "txt_content": "LIVNDS 发表于 2012-9-27 12:14 \n好···············奇妙耶···························\n基友出现！\n不过，mod出错这方面我不太懂。"
        },
        {
            "author": "sylqiuyifeng",
            "timestamp": 1348722180,
            "txt_content": "简单来说就是压缩器弄坏了呵呵……"
        },
        {
            "author": "1076742624",
            "timestamp": 1348723320,
            "txt_content": "呵♂呵，基友我来了~\n不过沙发没了 QAQ"
        },
        {
            "author": "我被盗号了",
            "timestamp": 1348723860,
            "txt_content": "我只是来拿金币的"
        },
        {
            "author": "LIVNDS",
            "timestamp": 1348739640,
            "txt_content": "Timyang 发表于 2012-9-27 12:59 \n基友出现！\n不过，mod出错这方面我不太懂。\n好基友好基友~~~"
        },
        {
            "author": "Timyang",
            "timestamp": 1348745220,
            "txt_content": "LIVNDS 发表于 2012-9-27 17:54 \n好基友好基友~~~\n好吧，谢了。"
        },
        {
            "author": "LIVNDS",
            "timestamp": 1348745280,
            "txt_content": "Timyang 发表于 2012-9-27 19:27 \n好吧，谢了。\n呵呵···········你写作业了没················（坑）"
        },
        {
            "author": "Timyang",
            "timestamp": 1348745760,
            "txt_content": "LIVNDS 发表于 2012-9-27 19:28 \n呵呵···········你写作业了没················（坑）\n没→那么→快→呢→呵→呵→O→(→∩→_→∩→)→O→~。\nw→a→t→e→r→。[water]"
        },
        {
            "author": "LIVNDS",
            "timestamp": 1348745820,
            "txt_content": "Timyang 发表于 2012-9-27 19:36 \n没→那么→快→呢→呵→呵→O→(→∩→_→∩→)→O→~。\nw→a→t→e→r→。\n·················我去写作业了····················你慢慢水····················不要不交作业啊·················"
        },
        {
            "author": "Timyang",
            "timestamp": 1348746000,
            "txt_content": "LIVNDS 发表于 2012-9-27 19:37 \n·················我去写作业了····················你慢慢水·· ...\n好吧，不过我也要写作业了，今天作业比较少，但国庆最多。 +10086 +10086"
        },
        {
            "author": "LIVNDS",
            "timestamp": 1348746180,
            "txt_content": "Timyang 发表于 2012-9-27 19:40 \n好吧，不过我也要写作业了，今天作业比较少，但国庆最多。 +10086 +10086\n··············国庆········老师说只要考的好国庆就没作业~~~~嘎嘎嘎··············"
        },
        {
            "author": "hsk001ufo",
            "timestamp": 1348747200,
            "txt_content": "看到这么多英文就晕"
        },
        {
            "author": "Timyang",
            "timestamp": 1348747980,
            "txt_content": "LIVNDS 发表于 2012-9-27 19:43 \n··············国庆········老师说只要考的好国庆就没作业~~~~嘎嘎嘎······ ...\n{:10_493:}额，我们作业肯定很多！"
        },
        {
            "author": "xcyx337",
            "timestamp": 1348748100,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "12345ssdlh",
            "timestamp": 1349192940,
            "txt_content": "我来收金币的"
        },
        {
            "author": "12345ssdlh",
            "timestamp": 1349192940,
            "txt_content": "我来收金币的"
        },
        {
            "author": "xixi",
            "timestamp": 1349257860,
            "txt_content": "拿完金币就撤"
        }
    ]
}