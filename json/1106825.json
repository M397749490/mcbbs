{
    "title": "Mixin注解处理器异常？",
    "author": "BreezyMain",
    "replyCount": 2,
    "timestamp": 1597924200,
    "txt_content": "如题，我的Mixin注解处理器出现了一些问题，我会将我的日志文件放在下面，连同build.gradle,mixin config。希望各位能帮我看一下是什么问题，感激不尽。\nmixin config:\n{\n  \"required\": true,\n  \"setSourceFile\": true,\n  \"package\": \"cn.breezymain.awaken.inject.mixin.mixins\",\n  \"refmap\": \"mixins.awaken.refmap.json\",\n  \"mixins\": [\n    \"MixinMinecraft\"\n  ]\n}复制代码build.gradle:\n\nbuildscript {\n    ext.kotlin_version = '1.3.72'\n    ext.eventbus_version = \"3.2.0\"\n\n    repositories {\n        maven { url = 'https://files.minecraftforge.net/maven' }\n        maven { url = 'https://repo.spongepowered.org/maven' }\n        jcenter()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath group: 'net.minecraftforge.gradle', name: 'ForgeGradle', version: '3.+', changing: true\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath 'org.spongepowered:mixingradle:0.7-SNAPSHOT'\n    }\n}\n\napply plugin: 'kotlin'\napply plugin: 'eclipse'\napply plugin: 'kotlin-kapt'\napply plugin: 'maven-publish'\napply plugin: 'net.minecraftforge.gradle'\napply plugin: 'org.spongepowered.mixin'\n\nversion = 'alpha'\ngroup = 'cn.breezymain.awaken' // http://maven.apache.org/guides/mini/guide-naming-conventions.html\narchivesBaseName = 'awaken'\n\nsourceCompatibility = targetCompatibility = compileJava.sourceCompatibility = compileJava.targetCompatibility = '1.8' // Need this here so eclipse task generates correctly.\n\nprintln('Java: ' + System.getProperty('java.version') + ' JVM: ' + System.getProperty('java.vm.version') + '(' + System.getProperty('java.vendor') + ') Arch: ' + System.getProperty('os.arch'))\n\nminecraft {\n    // The mappings can be changed at any time, and must be in the following format.\n    // snapshot_YYYYMMDD   Snapshot are built nightly.\n    // stable_#            Stables are built at the discretion of the MCP team.\n    // Use non-default mappings at your own risk. they may not always work.\n    // Simply re-run your setup task after changing the mappings to update your workspace.\n    mappings channel: 'snapshot', version: '20200514-1.16'\n    // makeObfSourceJar = false // an Srg named sources jar is made by default. uncomment this to disable.\n\n    // accessTransformer = file('src/main/resources/META-INF/accesstransformer.cfg')\n\n    // Default run configurations.\n    // These can be tweaked, removed, or duplicated as needed.\n    runs {\n        client {\n            workingDirectory project.file('run')\n\n            // Recommended logging data for a userdev environment\n            property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'\n\n            // Recommended logging level for the console\n            property 'forge.logging.console.level', 'debug'\n\n            mods {\n                awaken {\n                    source sourceSets.main\n                }\n            }\n        }\n\n        server {\n            workingDirectory project.file('run')\n\n            // Recommended logging data for a userdev environment\n            property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'\n\n            // Recommended logging level for the console\n            property 'forge.logging.console.level', 'debug'\n\n            mods {\n                awaken {\n                    source sourceSets.main\n                }\n            }\n        }\n\n        data {\n            workingDirectory project.file('run')\n\n            // Recommended logging data for a userdev environment\n            property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'\n\n            // Recommended logging level for the console\n            property 'forge.logging.console.level', 'debug'\n\n            args '--mod', 'examplemod', '--all', '--output', file('src/generated/resources/')\n\n            mods {\n                awaken {\n                    source sourceSets.main\n                }\n            }\n        }\n    }\n}\n\ndependencies {\n    // Specify the version of Minecraft to use, If this is any group other then 'net.minecraft' it is assumed\n    // that the dep is a ForgeGradle 'patcher' dependency. And it's patches will be applied.\n    // The userdev artifact is a special name and will get all sorts of transformations applied to it.\n    minecraft 'net.minecraftforge:forge:1.16.1-32.0.108'\n\n    // Kotlin standard library\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version\"\n\n    // EventBus dependency\n    implementation \"org.greenrobot:eventbus:$eventbus_version\"\n    kapt \"org.greenrobot:eventbus-annotation-processor:$eventbus_version\"\n\n    // You may put jars on which you depend on in ./libs or you may define them like so..\n    // compile \"some.group:artifact:version:classifier\"\n    // compile \"some.group:artifact:version\"\n\n    // Real examples\n    // compile 'com.mod-buildcraft:buildcraft:6.0.8:dev'  // adds buildcraft to the dev env\n    // compile 'com.googlecode.efficient-java-matrix-library:ejml:0.24' // adds ejml to the dev env\n\n    // The 'provided' configuration is for optional dependencies that exist at compile-time but might not at runtime.\n    // provided 'com.mod-buildcraft:buildcraft:6.0.8:dev'\n\n    // These dependencies get remapped to your current MCP mappings\n    // deobf 'com.mod-buildcraft:buildcraft:6.0.8:dev'\n\n    // For more info...\n    // http://www.gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html\n    // http://www.gradle.org/docs/current/userguide/dependency_management.html\n\n}\n\nkapt {\n    arguments {\n        arg('eventBusIndex', 'cn.breezymain.awaken.event.EventBusIndex')\n    }\n}\n\nmixin {\n    add sourceSets.main, \"mixins.awaken.refmap.json\"\n}\n\n// Example for how to get properties into the manifest for reading by the runtime..\njar {\n    manifest {\n        attributes([\n                \"Specification-Title\"     : \"Awaken\",\n                \"Specification-Vendor\"    : \"BreezyMain\",\n                \"Specification-Version\"   : \"Alpha\", // We are version 1 of ourselves\n                \"Implementation-Title\"    : project.name,\n                \"Implementation-Version\"  : \"${version}\",\n                \"Implementation-Vendor\"   : \"https://github.com/BreezyMain\",\n                \"Implementation-Timestamp\": new Date().format(\"yyyy-MM-dd'T'HH:mm:ssZ\"),\n                \"MixinConnector\"          : \"cn.breezymain.awaken.inject.mixin.MixinLoader\"\n        ])\n    }\n}\n\n// Example configuration to allow publishing using the maven-publish task\n// This is the preferred method to reobfuscate your jar file\njar.finalizedBy('reobfJar')\n// However if you are in a multi-project build, dev time needs unobfed jar files, so you can delay the obfuscation until publishing by doing\n//publish.dependsOn('reobfJar')\n\npublishing {\n    publications {\n        mavenJava(MavenPublication) {\n            artifact jar\n        }\n    }\n    repositories {\n        maven {\n            url \"file:///${project.projectDir}/mcmodsrepo\"\n        }\n    }\n}\nrepositories {\n    mavenCentral()\n}\ncompileKotlin {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\ncompileTestKotlin {\n    kotlinOptions {\n        jvmTarget = \"1.8\"\n    }\n}\n复制代码build log:\n19:39:41: Executing task 'build'...\n\n\n> Configure project :\nJava: 1.8.0_251 JVM: 25.251-b08(Oracle Corporation) Arch: amd64\nNew Dep: net.minecraftforge:forge:1.16.1-32.0.108_mapped_snapshot_20200514-1.16\n\n> Task :kaptGenerateStubsKotlin\n> Task :downloadMcpConfig\n> Task :extractSrg\n> Task :createMcpToSrg\n> Task :processResources\n> Task :processTestResources NO-SOURCE\n\n> Task :kaptKotlin FAILED\nAnnotation processors discovery from compile classpath is deprecated.\nSet 'kapt.includeCompileClasspath = false' to disable discovery.\nRun the build with '--info' for more details.\n注: SpongePowered MIXIN Annotation Processor Version=0.8注: ObfuscationServiceMCP supports type: \"searge\"注: ObfuscationServiceMCP supports type: \"notch\"D:\\Users\\luxun\\WorkSpace\\Code\\Minecraft Client\\Awaken-Forge\\src\\main\\java\\cn\\breezymain\\awaken\\inject\\mixin\\mixins\\MixinMinecraft.java:19: 错误: No obfuscation mapping for @Inject target shutdownMinecraftApplet\n    @Inject(method = \"shutdownMinecraftApplet\", at = @At(\"HEAD\"))\n    ^警告: 以下选项未被任何处理程序识别: '[eventBusIndex, kapt.kotlin.generated]'[WARN] Incremental annotation processing requested, but support is disabled because the following processors are not incremental: org.apache.logging.log4j.core.config.plugins.processor.PluginProcessor (NON_INCREMENTAL), org.spongepowered.tools.obfuscation.MixinObfuscationProcessorInjection (NON_INCREMENTAL), org.spongepowered.tools.obfuscation.MixinObfuscationProcessorTargets (NON_INCREMENTAL).\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':kaptKotlin'.\n> A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptExecution\n   > java.lang.reflect.InvocationTargetException (no error message)\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/4.10.3/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD FAILED in 11s\n6 actionable tasks: 6 executed\n19:39:53: Task execution finished 'build'.\n\n复制代码package cn.breezymain.awaken.inject.mixin.mixins;\n\nimport cn.breezymain.awaken.Awaken;\nimport net.minecraft.client.GameConfiguration;\nimport net.minecraft.client.Minecraft;\nimport org.spongepowered.asm.mixin.Mixin;\nimport org.spongepowered.asm.mixin.injection.At;\nimport org.spongepowered.asm.mixin.injection.Inject;\nimport org.spongepowered.asm.mixin.injection.callback.CallbackInfo;\n\n@Mixin(Minecraft.class)\npublic class MixinMinecraft {\n\n    @Inject(method = \"<init>\", at = @At(\"TAIL\"))\n    public void onInit(GameConfiguration gameConfig, CallbackInfo callbackInfo) {\n        Awaken.INSTANCE.onBootstrap();\n    }\n\n    @Inject(method = \"shutdownMinecraftApplet\", at = @At(\"HEAD\"))\n    public void onShutdownMinecraftApplet(CallbackInfo callbackInfo) {\n        Awaken.INSTANCE.onShutdown();\n    }\n\n}\n复制代码Minecraft 1.16.1\nForge MDK:32.0.108\n",
    "replies": [
        {
            "author": "BreezyMain",
            "timestamp": 1597925160,
            "txt_content": "貌似问题出在了这里：\n注: SpongePowered MIXIN Annotation Processor Version=0.8注: ObfuscationServiceMCP supports type: \"searge\"注: ObfuscationServiceMCP supports type: \"notch\"D:\\Users\\luxun\\WorkSpace\\Code\\Minecraft Client\\Awaken-Forge\\src\\main\\java\\cn\\breezymain\\awaken\\inject\\mixin\\mixins\\MixinMinecraft.java:19: 错误: No obfuscation mapping for @Inject target shutdownMinecraftApplet\n    @Inject(method = \"shutdownMinecraftApplet\", at = @At(\"HEAD\"))复制代码可是 No obfuscation mapping for @Inject target shutdownMinecraftApplet 怎么解决呢？"
        },
        {
            "author": "BreezyMain",
            "timestamp": 1597977840,
            "txt_content": "自顶。。。别沉了。。。看了半天也没解决。。"
        }
    ]
}