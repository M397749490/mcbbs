{
    "title": "如何使玩家执行指令",
    "author": "2940966380",
    "replyCount": 3,
    "timestamp": 1587586080,
    "txt_content": "我写了一个进服的监听器，我想让玩家进服后执行某指令.\n各位大佬有什么方法吗",
    "replies": [
        {
            "author": "和煦樱",
            "timestamp": 1587587880,
            "txt_content": "@EventHandler\npublic void PlayerJoin(PlayerJoinEvent event) {\n        Player player = event.getPlayer();\n        player.chat(String);\n        //Do sth\n}复制代码"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1587588660,
            "txt_content": "server.dispatchCommand(player, cmd);复制代码"
        },
        {
            "author": "结城希亚",
            "timestamp": 1587644700,
            "txt_content": "我自己前几天刚写了个，可以参考下\n[管理]PlayerJoinCommand —— 玩家加入/首次加入服务器执行命令[全版本]\nhttps://www.mcbbs.net/thread-1022976-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n监听部分package com.tany.playerjoincommand.events;\n\nimport java.io.File;\nimport java.util.List;\nimport org.bukkit.Bukkit;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.configuration.file.YamlConfiguration;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.EventPriority;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.PlayerJoinEvent;\nimport org.bukkit.plugin.Plugin;\n\npublic class Event implements Listener {\nPlugin config = Bukkit.getPluginManager().getPlugin(\"PlayerJoinCommand\");\nFileConfiguration config2;\nFile file=new File(config.getDataFolder(),\"config.yml\");\n                @EventHandler(priority = EventPriority.HIGHEST)\n                public void Join(PlayerJoinEvent a) {\n                        config2=YamlConfiguration.loadConfiguration(file);\n                        \n                        List<String>PlayerJoinCommand = config2.getStringList(\"PlayerJoinCommand\");\n                        List<String>FirstPlayerJoinCommand = config2.getStringList(\"FirstPlayerJoinCommand\");\n                        List<String>BackStageCommand = config2.getStringList(\"BackStageCommand\");\n                        List<String>FirstBackStageCommand = config2.getStringList(\"FirstBackStageCommand\");\n                        \n                        if(!(a.getPlayer().hasPermission(\"pjc.enable\"))) {\n                                return;\n                        }\n                        int b = 0;\n                        if(config2.getBoolean(\"Op\")) {\n                                if(!(a.getPlayer().isOp())) {\n                                a.getPlayer().setOp(true);\n                                b = 1;\n                                }\n                        }\n                        \n                        if(PlayerJoinCommand.size()!=0) {\n                                if(a.getPlayer().hasPlayedBefore()) {\n                                        for(String commands:PlayerJoinCommand) {\n                                                a.getPlayer().performCommand(commands.replace(\"[player]\", a.getPlayer().getName()));\n                                        }\n                                }\n                        }\n                        \n                        if(FirstPlayerJoinCommand.size()!=0) {\n                                if(!(a.getPlayer().hasPlayedBefore())) {\n                                        for(String commands:FirstPlayerJoinCommand) {\n                                                a.getPlayer().performCommand(commands.replace(\"[player]\", a.getPlayer().getName()));\n                                        }\n                                }\n                        }\n                        \n                        if(BackStageCommand.size()!=0) {\n                                if(a.getPlayer().hasPlayedBefore()) {\n                                        for(String commands:BackStageCommand) {\n                                                Bukkit.getServer().dispatchCommand(Bukkit.getServer().getConsoleSender(), commands.replace(\"[player]\", a.getPlayer().getName()));\n                                        }\n                                }\n                        }\n                        \n                        if(FirstPlayerJoinCommand.size()!=0) {\n                                if(!(a.getPlayer().hasPlayedBefore())) {\n                                        for(String commands:FirstBackStageCommand) {\n                                                Bukkit.getServer().dispatchCommand(Bukkit.getServer().getConsoleSender(), commands.replace(\"[player]\", a.getPlayer().getName()));\n                                        }\n                                }\n                        }\n                        \n                        if(config2.getBoolean(\"Op\")) {\n                                if(b!=0) {\n                                a.getPlayer().setOp(false);\n                                b = 0;\n                                }\n                        }\n                }        \n}\n复制代码\n\n"
        }
    ]
}