{
    "title": "[Macro/Keybind Mod]基础脚本教程",
    "author": "yhr",
    "replyCount": 10,
    "timestamp": 1518996540,
    "txt_content": " 本帖最后由 yhr 于 2018-6-5 09:55 编辑 \n\n本教程旨在帮助使用Macro/Keybind mod的玩家们更好的使用这个modhappy hacking~~到我的mod发布帖的链接：http://www.mcbbs.net/thread-775087-1-1.html\n\n第一节-在宏绑定中使用脚本\n在讲到脚本之前，首先讲讲基本的绑定，我们可以在按键绑定中设定一句话（在有玩家登陆时自动说Hi），或者是绑定一条命令（按下H键回家）。这些绑定可以简化我们的操作，节约一些时间。但是仅仅是按按钮或者是接受事件执行指令未免显得太过简单，我们希望可以做更多命令做不到的操作（比如挂机刷石头），或者是需要逻辑判断的操作（聊天过滤）。为了进行更多更复杂的操作，就需要使用脚本了。\n在绑定中如果直接写一条语句，只会相当于你在聊天栏发送的信息，那么怎样才能让mod知道我们想要执行一个脚本而不是把信息发出去呢？\n\n\n\n\nSnipaste_2018-01-19_16-45-59.png (3.84 KB, 下载次数: 3)\n\n下载附件\n\n2018-2-19 07:33 上传\n\n\n\n\n答案是只需要用$${}$$这样的一对括号把脚本包括起来就行了，各位读者可以试验一下，给一个按键分别绑定如下两条宏，结果如何：LOG(\"你好\")\n${LOG(\"你好\")}$复制代码\n\n第二节-基本语法\n那么下一步我们就可以开始写脚本了，事实上绝大多数脚本的具体语法和用途都可以在游戏内的“命令帮助”中找到，随意打开一个按键的绑定界面，在右边就可以找到,在命令帮助界面你可以打字查找命令。这里我举几个例子，作为示范：LOG(\"hello\")               //这条语句在本地输出一条hello\nECHO(\"hello\")             //这条语句向服务器发送一个hello\nFOV(40)                     //这条语句将你的视野角度改变为40°\nFOV(30,2)                  //这条语句将你的视野角度改变为30°，使用2秒进行变化。复制代码可以看到，前面的那几个字母，便是命令，标志了需要做什么操作。后面括号里的，就是参数，描述了要做什么样的操作。每个命令接受的参数都不一样，可以看命令帮助来确认要填些什么。尖括号“<>”括起来的是必须的参数，不填的话会发生错误；方括号“[]”括起来的是可选的参数，不填也没有关系，可以看下上面例子中的FOV，改变视角所需要的时间就是一个可选的参数。\n当然，一个按键当然可以绑定不止一条语句，当你需要多条语句的时候，可以使用分号“;”隔开每条语句，比如下面的这个脚本：ECHO(\"你\");ECHO(\"好\");ECHO(\"吗\");ECHO(\"？\");复制代码可以一键发出四条信息（刷屏新技能?）\n第三节-变量和数据类型对于一个正常的程序语言，变量是一个必不可少的概念，Macro Mod的变量系统比较类似于php的变量，无需声明就可以直接赋值，变量将会在第一次赋值时被创建。不过变量名不能随便取，因为Macro Mod的变量会根据名字决定变量的数据类型，数据类型一共有三种：counter：其实就是整数，取值范围是-2147483647~-2147483647，所有以“#”开头的变量都是counter类型，例如：#some_thingstring：喜闻乐见的字符串类型，其对应的变量以“&”开头，并且常量是用\"\"标记的，例如：&a_string=\"Hello\";flag：其实就是布尔类型，值只能为“True”或“False”，不加前缀(以字母开头)的变量就是flag类型，例如：triggerflag值得注意的是这里的变量类型里没有小数的处理办法，事实上Macro Mod不支持小数的处理，并且一切用到小数的运算都只会返回0(但是你可以拿一个字符串存小数)。如果遇到一定要用小数计算的情况只能办法操作字符串，拆分以后成为整数再运算，然后再拼装回去。\n变量名的规则：除了用来表示类别用的前缀以外，变量名只能包含小写字母，数字，和下划线。大写字母是不允许的，而且变量必须以一个小写字母开头，下划线和数字都是不合法的。\n全局变量：通常的变量在退出这个宏的时候就会被销毁，如果想要把一个变量保存起来供别的宏或是下次运行时启动，就需要用到全局变量。以“@”开头的变量都是全局变量，不过“&”和“#”前缀同样不可省略，他们需要跟在“@”后面，例如：@#global_number, @&a_string, @flag_global。全局变量将会保存在硬盘上的一个文件里面，所以即使是关闭游戏再开其内容还是会保存下来。\n给变量赋值：变量的赋值方法有两种，第一种是使用“=”赋值，第二种是使用SET语句进行赋值，语法是SET(变量,[值]);SET如果只填一个参数的话对于不同的类型就会有不同的效果，counter会被设置为0,flag的会被设置为True，string会被设置为空字符串。同时，和SET相对的还有一个UNSET，UNSET只接受一个参数，对于counter和string，UNSET和SET只带一个参数的效果一样，但是对于flag，UNSET会把它设置为False而不是True。同时，如果UNSET的参数是一个全局变量，这个全局变量将会被删除掉，这也是正常的删除全局变量的办法。\n数据类型转换：Macro Mod的类型转换都是自动的，也就是说你只需要直接赋值就行，Mod会知道该变成什么，不过需要注意的是有些特殊的类别转换。字符串转数字的时候字符串必须完全是数字，而且不能超过数字的取值范围，否则的话那个数字的值会被设置为0。数字转flag的时候，0或者超出范围都会被认定为False，而其它所有情况都为True。(想想道理也很简单，超出范围的整数都会被认为是0)而flag转回数字则会变成1和0。比较有趣的是flag和字符串的互转，flag转字符串会直接变成True和False。而对于字符串，除了\"True\"或者\"1\"以外所有情况都会转成False\n(未证实)对于类型转换的个人理解：其实所有变量都是当作字符串处理的，不过也许是出于优化原因而分出了两种被限制的字符串应对特别的用途。\n\n本教程持续更新中，敬请期待~~~\n",
    "replies": [
        {
            "author": "冥天233",
            "timestamp": 1519044480,
            "txt_content": "请问哪个是命令帮助 英语看不懂 不知道哪个是命令帮助 按出来也看不懂.."
        },
        {
            "author": "冥天233",
            "timestamp": 1519044780,
            "txt_content": "哦 楼主我找到了 不过看不懂.."
        },
        {
            "author": "yhr",
            "timestamp": 1519053660,
            "txt_content": "冥天233 发表于 2018-2-19 20:53\n哦 楼主我找到了 不过看不懂..\n去看看我的mod发布帖，里面有汉化文本的。"
        },
        {
            "author": "冥天233",
            "timestamp": 1519111200,
            "txt_content": "汉化不是1.8用不了嘛.."
        },
        {
            "author": "元路",
            "timestamp": 1529230920,
            "txt_content": "问一下\n为什么感觉命令帮助里面的命令不是很全啊？\n\n还有 好像还有一种列表的变量 但是这里却没有写出来"
        },
        {
            "author": "yhr",
            "timestamp": 1529590620,
            "txt_content": "lilanxiao 发表于 2018-6-17 18:22\n问一下\n为什么感觉命令帮助里面的命令不是很全啊？\n说对了，命令帮助确实不全=-=。所以我才建议有问题的话可以看看作者的更新日志。希望以后可以更全吧。\n\n至于 “一种列表的变量” 可以再详细说明一下吗"
        },
        {
            "author": "元路",
            "timestamp": 1529593860,
            "txt_content": "yhr 发表于 2018-6-21 22:17\n说对了，命令帮助确实不全=-=。所以我才建议有问题的话可以看看作者的更新日志。希望以后可以更全吧。\n\n ...\n\n\n\n\n5@B(FG0N3]JJJI4P5[D4DKG.png (18.87 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-21 23:11 上传\n\n\n\n\n\n\n\n\nX)8F)325]AB8AOK]UP65B8B.png (42.22 KB, 下载次数: 0)\n\n下载附件\n\n2018-6-21 23:11 上传\n\n\n\n\n\n\n就是这个 抱歉，我说错了，这个不是变量，只能用方法处理\n"
        },
        {
            "author": "yhr",
            "timestamp": 1529765820,
            "txt_content": "lilanxiao 发表于 2018-6-21 23:11\n就是这个 抱歉，我说错了，这个不是变量，只能用方法处理\n没关系的，感谢支持，多提问题吧～～"
        },
        {
            "author": "ZWLDD",
            "timestamp": 1534426140,
            "txt_content": "说了这么多，yhr怎么挂机刷石头？"
        },
        {
            "author": "yhr",
            "timestamp": 1534466940,
            "txt_content": "ZWLDD 发表于 2018-8-16 21:29\n说了这么多，yhr怎么挂机刷石头？\nuhmmm，我去稍微研究了一下，靠谱的挖方块的办法就是在循环里面反复呼叫KEY(attack)\n比如说：\nDO;\nKEY(attack);\nLOOP;复制代码\n这样子写的毛病就是直到退出世界，这个循环是停不下来的。\n具体要怎么做请你自行设计咯～～"
        }
    ]
}