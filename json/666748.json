{
    "title": "[已解决]如何在已知区域内进行随机传送",
    "author": "小烦",
    "replyCount": 7,
    "timestamp": 1485268260,
    "txt_content": " 本帖最后由 小烦 于 2017-1-25 18:27 编辑 \n\n向研究一下随机传送。。。\n\n随机传送除了目前论坛上的RandomLocation外，其他都没法在固定区域内随机传送。上面所说的RandomLocation我也反编译过。。无奈看不懂。。\n我想了解如何在体对角线两点的坐标所构造的立方体内进行随机传送。。（卧槽。。听起来好？？？高端）\n大概就是这样。\n尝试过先搞个公式计算另外两点坐标，然而数学不好。。度娘无果。\n\n其实就是向求个思路啦。。\n比如怎么通过体对角线两点获得另外两点坐标。\n随机传送应该就可以通过这几个点来卡准一个随机数的范围，再加几个判断了（陆地，海洋）……\n比如如何只通过体对角线两点就能卡准一个随机坐标，当然是在两点内的。。（应该也可以吧。。不过我没思路）\n\n----------------\n我研究大概3天了。。实在不行才笨的，，我笨或我不懂得研究的。。“艺术”吧。。。？？\n\n",
    "replies": [
        {
            "author": "小烦",
            "timestamp": 1485334320,
            "txt_content": "补充、、类似领地插件 ，选两点，圈地。\n我想在这个范围内随机传送\n好像我说的太乱？？上面。。"
        },
        {
            "author": "a8105",
            "timestamp": 1485335280,
            "txt_content": "假设选两点,变量类型为Location,名称为loc1,loc2:\nint maxx,maxy,maxz,minx,miny,minz;\nmaxx=Math.max(loc1.getBlockX(),loc2.getBlockX());\nmaxy=Math.max(loc1.getBlockY(),loc2.getBlockY());\nmaxz=Math.max(loc1.getBlockZ(),loc2.getBlockZ());\nminx=Math.min(loc1.getBlockX(),loc2.getBlockX());\nminy=Math.min(loc1.getBlockY(),loc2.getBlockY());\nminz=Math.min(loc1.getBlockZ(),loc2.getBlockZ());\n遍历该区域的代码:\n其他的自己想吧= =\nfor(int x=minx;x<=maxx;x++)\n{\n  for(int y=miny;y<=maxy;y++)\n  {\n    for(int z=minz;z<maxz;z++)\n    {\n      Location location=new Location(loc1.getWorld(),x,y,z);\n      if(location.getBlock()!=null && location.getBlock().getType()!=Material.AIR)\n      {\n        if(a.contains(location.getBlock().getTypeId()))\n        {\n          location.getBlock().setType(Material.AIR);\n        }\n      }\n    }\n  }\n}"
        },
        {
            "author": "InSkied",
            "timestamp": 1485335580,
            "txt_content": "这有什么好纠结的，既然是体对角线的两端，那么根据Y轴判断，在上面的那个和在下面的那个必定能获得这个区域X和Z分别的上限和下限。然后楼主分别产生两个在这个区间内的数作为传送后的XZ轴，然后从下面那个方块的Y往上遍历判断到一个固体方块就检查他的上面是否有两个空气方块，查找到这个坐标传送不就行了。\n当然忘了判断水面，否则无法传送到海上"
        },
        {
            "author": "zghh008",
            "timestamp": 1487050200,
            "txt_content": "810587921 发表于 2017-1-25 17:08\n假设选两点,变量类型为Location,名称为loc1,loc2:\nint maxx,maxy,maxz,minx,miny,minz;\nmaxx=Math.max(loc1 ...\n你这个全遍历理论上可以行。但是实际使用是完全不行的。如果两个loc1和loc2过于远。服务器可以直接卡死。\n其实只需两个随机获取x轴和z轴。再通过World.getHighestBlockAt(x,z)来直接获取最上面的方块。"
        },
        {
            "author": "a8105",
            "timestamp": 1487061780,
            "txt_content": "zghh008 发表于 2017-2-14 13:30\n你这个全遍历理论上可以行。但是实际使用是完全不行的。如果两个loc1和loc2过于远。服务器可以直接卡死。 ...\n当然得使用随机啊,谁说得遍历的\n我遍历是因为这只是我某个类某段代码,并不是对于他内容的建议,顺便贴上来给他涨姿势而已_(:з」∠)_"
        },
        {
            "author": "syn614211648",
            "timestamp": 1487483940,
            "txt_content": "810dalao打得代码就是6 顺便说一句： 你可以找个tpr插件jdgui拆开来看代码. 毕竟借鉴也是学习嘛"
        },
        {
            "author": "小烦",
            "timestamp": 1487604120,
            "txt_content": "syn614211648 发表于 2017-2-19 13:59\n810dalao打得代码就是6 顺便说一句： 你可以找个tpr插件jdgui拆开来看代码. 毕竟借鉴也是学习嘛 ...\n反编译看过，\n目前可见的有区域内传送的只有一个RandomLocation，然而，，你反编译后你就知道了"
        }
    ]
}