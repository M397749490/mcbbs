{
    "title": "制作子弹",
    "author": "t1546542",
    "replyCount": 38,
    "timestamp": 1583813040,
    "txt_content": "版本：1.14.4\n每个玩家在Health计分板上有20点分数\n当玩家右键Name为“手枪”的胡萝卜钓竿时\n朝他准心对着的方向发射一颗子弹（子弹速度不能太慢）\n钓竿发射间隔0.5秒且子弹无重力\n子弹打到玩家的身体，让玩家Health分数-(钓竿的攻击伤害数值*1)并清除该子弹\n子弹打到玩家的头部，让玩家的Health分数-(钓竿的攻击伤害数值*2)并清除该子弹\n子弹打到方块，清除该子弹\n若子弹没打到玩家或方块，子弹飞行8秒后消失\nHealth小于等于0时，kill此玩家并重新设置此玩家Health分数为20\n求大佬解答！\n@Chelove_C60 @Jokey_钥匙 @SPGoding @⊙u⊙ ",
    "replies": [
        {
            "author": "⊙u⊙",
            "timestamp": 1583813040,
            "txt_content": "execute as @a at @s anchored eyes可以使坐标移动到玩家眼部，不需要十分精确的话这里往后接个带distance=..n的选择器就能选择到靠近的实体了\n\n至于光标位置，如果是问光标和实体或方块的交点，函数递归，当子弹或marker检测到实体/方块时停止递归。\n现成的例子已经很多了\nhttps://www.mcbbs.net/thread-771638-1-1.html\nhttps://www.mcbbs.net/thread-820225-1-1.html"
        },
        {
            "author": "柠檬不卖萌w",
            "timestamp": 1583828700,
            "txt_content": "这是什么神奇判定。。\n建议用crackshot\n简单方便就完成了枪战服务器"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1583828820,
            "txt_content": " 本帖最后由 ⊙u⊙ 于 2020-3-9 22:35 编辑 \n\n作为一个成熟的码农，是时候自己思考了\n自己捏的轮子或许不圆，可这样才会更香\n是哪一个部分有疑问吗？总不可能请别人把整个系统给你做出来吧...\n或者给一个令人信服乐意造轮子的理由"
        },
        {
            "author": "t1546542",
            "timestamp": 1583844060,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-10 20:45 编辑 \n⊙u⊙ 发表于 2020-3-10 16:27\n作为一个成熟的码农，是时候自己思考了\n自己捏的轮子或许不圆，可这样才会更香\n是哪一个部分 ...\n怎么做头部判定\n怎么定位到玩家的准心位置\n"
        },
        {
            "author": "t1546542",
            "timestamp": 1583933040,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-12 07:52 编辑 \n⊙u⊙ 发表于 2020-3-11 17:14\nexecute as @a at @s anchored eyes可以使坐标移动到玩家眼部，不需要十分精确的话这里往后接个带distance= ...\n不需要十分精确是什么意思……\n为什么盔甲架的Pos和玩家的Pos相减就可以得到Motion\n顺便问一下，Motion怎么用\n\n怎么在打到玩家的时候让玩家击退\n子弹用箭行吗（箭能自定义伤害就再好不过了）\n\n如果在自己的远处生成一个盔甲架，得到他的Pos然后与箭的Pos相减，那么箭是不是就会往盔甲架的方向飞\n\n\n\n"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1583971020,
            "txt_content": "t1546542 发表于 2020-3-11 03:24\n不需要十分精确是什么意思……\n为什么盔甲架的Pos和玩家的Pos相减就可以得到Motion\n顺便问一下，Motion怎 ...\n意思是distance是一个球形的判断范围，dxdydz则是方形的。外加distance判断的是实体的一个点，而dxdydz判断的是实体的碰撞箱。换而言之，若仅仅是玩家的头部在判断范围内，使用distance找不到对象，而dxdydz可以。\n\nPos相减是为了获得坐标差。盔甲架永远会在玩家光标固定距离前面生成。\n比如玩家点为[x,y,z]。水平角度望向[x+5,y,z+5](既45°方向)并在玩家光标前^ ^ ^1格的位置生成盔甲架，\n那么盔甲架的坐标为[x+0.7,y+0,z+0.7]。\n玩家和盔甲架的Pos坐标相减[x-x+0.7,y-y+0,z-z+0.7]=[0.7,0,0.7]，得出坐标差。\n\n然后Motion记录的是实体往三个轴的运动速度，正值往轴的正向移动，负值则反向。前面获取到的坐标差丢进Motion里就刚刚好。\n\n击退的话你说行那就行吧。至于子弹建议是药水云盔甲架之类的，箭应该也是可以的，具体看个人需求\n\nPos相减得到的值在存入Motion的时候，要确保值的范围在-10~10的最低/高值以内。一般的话盔甲架在1格距离生成就可以了，太远的话得出的坐标差要缩小到最低/高值内。\n\n是"
        },
        {
            "author": "t1546542",
            "timestamp": 1583993280,
            "txt_content": "⊙u⊙ 发表于 2020-3-12 07:57\n意思是distance是一个球形的判断范围，dxdydz则是方形的。外加distance判断的是实体的一个点，而dxdydz判 ...\n我的坐标是 x y z\n我望向 x+5 y z+5\n然后在我的前方生成盔甲架\n为什么盔甲架坐标为 x+0.7 y z+0.7 呢\n这有什么算法吗"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1583995920,
            "txt_content": "t1546542 发表于 2020-3-11 20:08\n我的坐标是 x y z\n我望向 x+5 y z+5\n然后在我的前方生成盔甲架\n\n\n\n\nTIM截图20200311202449.png (20.03 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-12 14:52 上传\n\n\n\n\n\n*z=5\n"
        },
        {
            "author": "t1546542",
            "timestamp": 1584090780,
            "txt_content": "⊙u⊙ 发表于 2020-3-12 14:52\n*z=5\n能弄一下头部判定吗\n子弹tag为子弹"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584091200,
            "txt_content": "t1546542 发表于 2020-3-12 23:13\n能弄一下头部判定吗\n子弹tag为子弹execute as @a at @s anchored eyes可以使坐标移动到玩家眼部\n之后在这个位置检测一定范围内是否存在子弹就是了"
        },
        {
            "author": "t1546542",
            "timestamp": 1584115440,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-14 00:05 编辑 \n⊙u⊙ 发表于 2020-3-13 17:20\n之后在这个位置检测一定范围内是否存在子弹就是了\n不是，我想试试你之前说的dxdydz检测\n箭能不能自定义伤害\n"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584133440,
            "txt_content": "execute as @a at @s anchored eyes positioned ^ ^ ^ positioned ~-0.5 ~-0.5 ~-0.5 if entity @e[tag=marker,dx=0,dy=0,dz=0]\n\n箭能定义伤害，但是碰到玩家的时候就会消失"
        },
        {
            "author": "t1546542",
            "timestamp": 1584162540,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-14 13:10 编辑 \n⊙u⊙ 发表于 2020-3-14 05:04\nexecute as @a at @s anchored eyes positioned ^ ^ ^ positioned ~-0.5 ~-0.5 ~-0.5 if entity @e[tag=mar ...这里的dxdydz为什么填0呢\n\n怎么定义\n\n我突然想到用羊驼的口水可不可以充当子弹\n\n"
        },
        {
            "author": "1956507486",
            "timestamp": 1584169980,
            "txt_content": "一堆清华北大的大佬，果然我太年轻了\n"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584178200,
            "txt_content": "t1546542 发表于 2020-3-13 19:09\n这里的dxdydz为什么填0呢\n\n怎么定义\n因为mj，最低也是1格的范围，而最低值为0\n\n比如\nx=0,y=0,z=0\ndx=0,dy=0,dz=0\n检测x=0~1,y=0~1,z=0~1"
        },
        {
            "author": "jukuang",
            "timestamp": 1584178440,
            "txt_content": "作为一个成熟的码农，是时候自己思考了\n自己捏的轮子或许不圆，可这样才会更香"
        },
        {
            "author": "t1546542",
            "timestamp": 1584287580,
            "txt_content": "⊙u⊙ 发表于 2020-3-14 17:30\n因为mj，最低也是1格的范围，而最低值为0\n\n比如\n怎么自定义箭的伤害\n羊驼的口水能自定义伤害吗"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584314340,
            "txt_content": "t1546542 发表于 2020-3-15 05:53\n怎么自定义箭的伤害\n羊驼的口水能自定义伤害吗\narrow有damage标签\n\n而羊驼唾沫不能修改伤害"
        },
        {
            "author": "t1546542",
            "timestamp": 1584322200,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-16 09:34 编辑 \n⊙u⊙ 发表于 2020-3-16 07:19\narrow有damage标签\n\n而羊驼唾沫不能修改伤害\n我发现不能连击\n怎么让玩家变红后还能受到伤害"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584322980,
            "txt_content": "t1546542 发表于 2020-3-15 15:30\n我发现不能连击\n怎么让玩家变红后还能受到伤害\n现版本不可能的事情，除非你用虚拟血量"
        },
        {
            "author": "t1546542",
            "timestamp": 1584329700,
            "txt_content": "⊙u⊙ 发表于 2020-3-16 09:43\n现版本不可能的事情，除非你用虚拟血量\n用了虚拟血量怎么击退呢"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584333240,
            "txt_content": "t1546542 发表于 2020-3-15 17:35\n用了虚拟血量怎么击退呢\n击退方法不是很多吗？实体挤压，弹射物，tp..."
        },
        {
            "author": "t1546542",
            "timestamp": 1584411300,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-17 13:02 编辑 \n⊙u⊙ 发表于 2020-3-16 12:34\n击退方法不是很多吗？实体挤压，弹射物，tp...\n弄一个能击退的，让玩家被射中就后退\n用了AEC是不是就不能自定义伤害了\n在玩家位置生成自定义damage的箭？\n"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584432600,
            "txt_content": "t1546542 发表于 2020-3-16 16:15\n弄一个能击退的，让玩家被射中就后退\n用了AEC是不是就不能自定义伤害了\n在玩家位置生成自定义damage的箭？ ...\n得看你做什么，怎么做，需要什么效果，可以舍弃什么。这样才能清楚哪种方法更好，现在我也下不了定论。"
        },
        {
            "author": "t1546542",
            "timestamp": 1584459840,
            "txt_content": "⊙u⊙ 发表于 2020-3-17 16:10\n得看你做什么，怎么做，需要什么效果，可以舍弃什么。这样才能清楚哪种方法更好，现在我也下不了定论。 ...\n我实验的时候给AEC Motion\n结果AEC没有改变位置"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584485280,
            "txt_content": "t1546542 发表于 2020-3-17 05:44\n我实验的时候给AEC Motion\n结果AEC没有改变位置\naec记得是不适用motion的"
        },
        {
            "author": "t1546542",
            "timestamp": 1584543300,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-18 23:05 编辑 \n⊙u⊙ 发表于 2020-3-18 06:48\naec记得是不适用motion的\n把玩家的UUID存到箭的UUID上\n然后判断附近的玩家是不是跟这个UUID不相等，怎么判断呢\n知道了，用execute unless\n\n"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584544020,
            "txt_content": "t1546542 发表于 2020-3-18 04:55\n把玩家的UUID存到箭的UUID上\n然后判断附近的玩家是不是跟这个UUID相等，怎么判断呢 ...\n每一次箭要和玩家做对比时，把自己存着的uuid记录到一个物品的nbt内，把玩家的uuid记录到另一个物品的nbt内，然后对比两个物品的nbt是否一致，如果uuid不一样则不一致，既不是同一个玩家\nhttps://www.mcbbs.net/thread-959319-1-1.html\n\n\n感觉是有点麻烦，所以如果能忍的话可以等到1.16出来后（uuid拆分成4条数组），所有玩家记录自己4条uuid到各自记分板里。该丢箭玩家的uuid记录到箭的分数里。箭只要判断分数不一致的玩家就Ok"
        },
        {
            "author": "t1546542",
            "timestamp": 1584597360,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-19 14:00 编辑 \n⊙u⊙ 发表于 2020-3-18 23:07\n每一次箭要和玩家做对比时，把自己存着的uuid记录到一个物品的nbt内，把玩家的uuid记录到另一个物品的nbt ...\n用execute unless里的data判定不是更好吗\n好像是不行没有电脑\n给箭自定义一个NBT，然后让发射者的UUID存进去\n"
        },
        {
            "author": "t1546542",
            "timestamp": 1584678960,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-20 12:38 编辑 \n⊙u⊙ 发表于 2020-3-18 23:07\n每一次箭要和玩家做对比时，把自己存着的uuid记录到一个物品的nbt内，把玩家的uuid记录到另一个物品的nbt ...\n等等，我给每个玩家分配一个UID\n这样不就可以了\n让发射者的UID存到箭的UID分数上\n然后判断击中的目标是不是指定UID"
        },
        {
            "author": "t1546542",
            "timestamp": 1584684300,
            "txt_content": "⊙u⊙ 发表于 2020-3-14 05:04\nexecute as @a at @s anchored eyes positioned ^ ^ ^ positioned ~-0.5 ~-0.5 ~-0.5 if entity @e[tag=mar ...\n如果碰到玩家消失的话怎么用虚拟血量"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584686460,
            "txt_content": "t1546542 发表于 2020-3-19 20:05\n如果碰到玩家消失的话怎么用虚拟血量\n所以不只用箭"
        },
        {
            "author": "t1546542",
            "timestamp": 1584692520,
            "txt_content": " 本帖最后由 t1546542 于 2020-3-20 16:25 编辑 \n⊙u⊙ 发表于 2020-3-20 14:41\n所以不只用箭\n那用什么代替箭呢\n盔甲架会下落\nAEC不能改Motion\n\n"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584694440,
            "txt_content": "t1546542 发表于 2020-3-19 22:22\n那用什么代替箭呢\n盔甲架会下落\nAEC不能改Motion\n云玩家，完全没运行过，你自己可以试试。原理是截下玩家射出的箭并转换为掉落物。\n\n#preparation\ndummy board\n        uuid0,uuid1,uuid2,uuid3,owner0,owner1,owner2,owner3\ncriteria board\n        used_bow\n\n#load\nexecute as @a run function foo:0\n\n#tick\nexecute as @e[type=arrow,tag=!score_owner] run function foo:1\nexecute as @a if score @s used_bow matches 1.. run function foo:2\nexecute as @e[type=item,tag=flying_fish] at @s run function foo:6\nexecute as @e[tag=target] at @s run function foo:8\n\n\n\n#foo:0\n        execute store result score @s uuid0 run data get entity @s UUID[0]\n        execute store result score @s uuid1 run data get entity @s UUID[1]\n        execute store result score @s uuid2 run data get entity @s UUID[2]\n        execute store result score @s uuid3 run data get entity @s UUID[3]\n\n#foo:1\n        tag @s add score_owner\n        execute store result score @s owner0 run data get entity @s Owner[0]\n        execute store result score @s owner1 run data get entity @s Owner[1]\n        execute store result score @s owner2 run data get entity @s Owner[2]\n        execute store result score @s owner3 run data get entity @s Owner[3]\n\n#foo:2\n        tag @s add processing_player\n        execute at @s anchored eyes positioned ^ ^ ^ as @e[type=arrow,distance=..5,tag=!marked] run function foo:3\n        tag @s remove processing_player\n\n#foo:3\n        execute if score @s owner0 = @p[distance=..5,tag=processing_player] uuid0 if score @s owner1 = @p[distance=..5,tag=processing_player] uuid1 if score @s owner2 = @p[distance=..5,tag=processing_player] uuid2 if score @s owner3 = @p[distance=..5,tag=processing_player] uuid3 run tag @s add processing_arrow\n        tag @s[tag=!processing_arrow] add marked\n        execute as @s[tag=processing_arrow] at @s run function foo:4\n                \n#foo:4\n        summon item ~ ~ ~ {Age:-32767,PickupDelay:32767,Tags:[\"processing_item\",\"flying_fish\"],Item:{id:\"minecraft:pufferfish\",Count:1b}}\n        execute as @e[type=item,tag=processing_item,distance=..0.1] run function foo:5\n        kill @s[tag=processing_arrow]\n\n#foo:5\n        execute store result score @s owner0 run scoreboard players get @e[type=arrow,tag=processing_arrow,distance=..0.1,limit=1] owner0\n        execute store result score @s owner1 run scoreboard players get @e[type=arrow,tag=processing_arrow,distance=..0.1,limit=1] owner1\n        execute store result score @s owner2 run scoreboard players get @e[type=arrow,tag=processing_arrow,distance=..0.1,limit=1] owner2\n        execute store result score @s owner3 run scoreboard players get @e[type=arrow,tag=processing_arrow,distance=..0.1,limit=1] owner3\n        data modify entity @s Motion set from entity @e[type=arrow,tag=processing_arrow,distance=..0.1,limit=1] Motion\n        tag @s remove processing_item\n\n#foo:6\n        tag @s add fish_check\n        execute positioned ~-0.5 ~-0.5 ~-0.5 run tag @e[type=!arrow,type=!area_effect_cloud,type=!armor_stand,tag=!flying_fish,dx=0,dy=0,dz=0] add checking\n        execute as @e[tag=checking] run function foo:7\n        tag @s remove fish_check\n        execute if data entity @s {OnGround:1b} run kill @s\n\n#foo:7\n        execute if score @s uuid0 = @e[type=item,tag=flying_fish,tag=fish_check,limit=1] owner0 if score @s uuid1 = @e[type=item,tag=flying_fish,tag=fish_check,limit=1] owner1 if score @s uuid2 = @e[type=item,tag=flying_fish,tag=fish_check,limit=1] owner2 if score @s uuid3 = @e[type=item,tag=flying_fish,tag=fish_check,limit=1] owner3 run tag @s add target\n        tag @s remove checking\n\n#foo:8\n        say hi\n        tag @s remove target复制代码\n"
        },
        {
            "author": "t1546542",
            "timestamp": 1584708720,
            "txt_content": "⊙u⊙ 发表于 2020-3-20 16:54\n云玩家，完全没运行过，你自己可以试试。原理是截下玩家射出的箭并转换为掉落物。\n怎么截下"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584778140,
            "txt_content": "https://www.mcbbs.net/thread-991924-1-1.html"
        },
        {
            "author": "t1546542",
            "timestamp": 1584788580,
            "txt_content": "⊙u⊙ 发表于 2020-3-21 16:09\nhttps://www.mcbbs.net/thread-991924-1-1.html\n我想知道截下箭的那部分用的是什么原理\n求解读指令"
        },
        {
            "author": "⊙u⊙",
            "timestamp": 1584791700,
            "txt_content": "t1546542 发表于 2020-3-21 01:03\n我想知道截下箭的那部分用的是什么原理\n求解读指令\n玩家射出箭时，检测玩家附近哪支箭的owner4段uuid与玩家相等。"
        }
    ]
}