{
    "title": "冥想了一夜的服务器启动参数",
    "author": "ksqeib445",
    "replyCount": 99,
    "timestamp": 1548437820,
    "txt_content": " 本帖最后由 shangenbo 于 2020-3-1 21:33 编辑 \n\n你想让你的服务器多带一些人，更节省内存吗？想让你的客户端启动比别人快很多吗？来试试这段启动参数！(不分版本，无论是服务端还是客户端都可以使用)（该启动参数已在某服务器运行半年之久）\n\n\n\n使用效果(截图部分内容已经做过处理)\n客户端启动视频,启动bat等等资源可以访问：\nhttps://pan.baidu.com/s/1pAscz-T_-o7EfMNDFE3_1Q\n\n\n\n\n\n\n\n\n\n常规参数\n单位什么的相信大家都懂!64位jrejava -server -Xincgc -Xmx最大内存M -Xms最小内存M -Xss512K -XX:+AggressiveOpts -XX:+UseCompressedOops -XX:+UseCMSCompactAtFullCollection -XX:+UseFastAccessorMethods -XX:ParallelGCThreads=4 -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=2 -XX:CMSInitiatingOccupancyFraction=70 -XX:-DisableExplicitGC -XX:TargetSurvivorRatio=90 -jar 服务端核心.jar复制代码32位jre\njava -Xincgc -Xmx最大内存G -Xms最小内存M -Xss512K -XX:+AggressiveOpts -XX:+UseFastAccessorMethods -XX:ParallelGCThreads=4 -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=2 -XX:CMSInitiatingOccupancyFraction=70 -XX:-DisableExplicitGC -XX:TargetSurvivorRatio=90 -jar 服务端核心.jar\n复制代码\n\n\n\n\n\n\n讲解\n\n\n注意: JDK版本可以大约看作JAVA版本，但并不绝对\n        只是个人对这些参数的理解，并不一定专业\n-server\n这个是服务器运行模式，64位系统是默认开启的，32位系统是关闭的\n我们建议你开启此项\n\n-Xincgc \n启用Java增量式垃圾回收器。\n(没什么需要特别解释的就不会过多说明)\n\n-Xms\n初始堆大小\n(我一般会写成32M)\n建议是物理内存的1/64(<1GB)\n\n-Xmx\n最大堆大小\n建议是物理内存的1/4(<1GB)\n不过既然是开mc服务器，那么内存肯定是全用上\nwindows服务器建议在总内存上减去1GB，linux无所谓了\n群组服酌情决定把，另外，如果是Bungee端，不推荐超过256M（人特别多除外）\n\n-Xss\n每个线程的堆栈大小\nJDK5.0以后每个线程堆栈大小为1M,以前每个线程堆栈大小为256K,\n既然增多肯定是有原因的，但是经过大量实践，\n对于mc无论是客户端还是服务端 512K足矣\n\n-XX:+AggressiveOpts\n加快编译\n\n-XX:+UseCompressedOops \n通常64位JVM消耗的内存会比32位的大1.5倍，这是因为对象指针在64位架构下，长度会翻倍（更宽的寻址）。\n这个可以压缩指针，起到节约内存占用的新参数。\n（32位几乎不受此参数影响）\n (最低需要jdk1.6.0_14)\n\n-XX:+UseCMSCompactAtFullCollection\n使用并发收集器时,开启对旧数据的压缩.\n\n-XX:+UseFastAccessorMethods\n优化原始类型的getter方法性能\n\n-XX:ParallelGCThreads=4\n设置旧数据的线程回收数\n我在这里讲解并不针对任何 帖子 或 个人\n有的人说是服务器的使用的线程，实际不然，这只是对旧数据的回收线程数\n我们推荐设置成cpu总核心数的一半或更低\n\n-XX:+UseConcMarkSweepGC\n使用CMS内存收集（旧数据回收器）\n\n-XX:CMSFullGCsBeforeCompaction=2\nCMS收集多少次后进行内存压缩\n\n-XX:CMSInitiatingOccupancyFraction=70\n这个有专门的计算公式\n数值应当 小于或等于((Xmx-Xmn)-(Xmn-Xmn/(SurvivorRatior+2)))/(Xmx-Xmn)*100 \n但是我们并没有对xmn进行设置，所以使用通用参数 70%\n\n-XX:-DisableExplicitGC\n禁止代码中显示调用GC\n\n-XX:TargetSurvivorRatio=90\n一个计算期望存活大小Desired survivor size的参数.\n这个作用就是降低GC被触发的门槛\n\n\n\n\n\n\n\n客户端食用方法\n\n\n只要在高级启动设置中把参数掐头去尾填进去就可以吃了(注意:在最新的HMCL中需要关闭内置参数 否则会造成无法启动游戏)如下：\n\n\n\n-Xss512K -XX:+AggressiveOpts -XX:+UseCompressedOops -XX:+UseCMSCompactAtFullCollection -XX:+UseFastAccessorMethods -XX:ParallelGCThreads=4 -XX:+UseConcMarkSweepGC -XX:CMSFullGCsBeforeCompaction=2 -XX:CMSInitiatingOccupancyFraction=70 -XX:-DisableExplicitGC -XX:TargetSurvivorRatio=90\n复制代码\n\n\n\n\n其他\n\n感谢参与测试的所有人员！\n未来我们可能会推出更好的启动参数！记得关注！\n\n\n采纳472楼对于模组服的见解链接\n将xms和xmx设置相同的确可以节省cpu资源,但是咱针对的是内存优化，故没设置相同\n\n不做伸手党！\n\n",
    "replies": [
        {
            "author": "Sobo",
            "timestamp": 1548439260,
            "txt_content": "这个shell是真的太给力了....."
        },
        {
            "author": "葛洲坝吧",
            "timestamp": 1548441480,
            "txt_content": "已经用在sponge上"
        },
        {
            "author": "二哈大魔王",
            "timestamp": 1548464760,
            "txt_content": "这个情动参数还真没有研究过。。这个参数是所有版本都可以使用吗"
        },
        {
            "author": "贺兰兰",
            "timestamp": 1548464880,
            "txt_content": "某内存少一半的腐竹前来围观\n表示原来内存14g现在只占用7g\n超级给力"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548465960,
            "txt_content": "二哈大魔王 发表于 2019-1-26 09:06\n这个情动参数还真没有研究过。。这个参数是所有版本都可以使用吗\n是这样的"
        },
        {
            "author": "Desolation",
            "timestamp": 1548470280,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548470940,
            "txt_content": "Desolation 发表于 2019-1-26 10:38\n所有版本都可以用吗？\n是的呢2333"
        },
        {
            "author": "Freak°",
            "timestamp": 1548471660,
            "txt_content": "为什么一定要回复"
        },
        {
            "author": "he670004272",
            "timestamp": 1548471840,
            "txt_content": "？？仅限网易服吗？moj能用吗"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548472020,
            "txt_content": "he670004272 发表于 2019-1-26 11:04\n？？仅限网易服吗？moj能用吗\n通用的"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548472080,
            "txt_content": "Love_Myself 发表于 2019-1-26 11:01\n为什么一定要回复\n100查看0回复，我快疯了"
        },
        {
            "author": "kcass",
            "timestamp": 1548472440,
            "txt_content": "牛逼"
        },
        {
            "author": "Fram",
            "timestamp": 1548472800,
            "txt_content": "感谢分享"
        },
        {
            "author": "dog123",
            "timestamp": 1548472920,
            "txt_content": "2333333300"
        },
        {
            "author": "love12138",
            "timestamp": 1548472920,
            "txt_content": "试试看.......是否真的  "
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548473160,
            "txt_content": "dog123 发表于 2019-1-26 11:22\n2333333300\n你应该阅读一下版规"
        },
        {
            "author": "程超班主任",
            "timestamp": 1548473160,
            "txt_content": "被某群里的舔狗骗来的午夜路过"
        },
        {
            "author": "m63485322",
            "timestamp": 1548473280,
            "txt_content": "我试试看，"
        },
        {
            "author": "2212082263",
            "timestamp": 1548473340,
            "txt_content": "给力啊兄弟"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548473400,
            "txt_content": " 本帖最后由 shangenbo 于 2020-3-8 22:07 编辑 \n程超班主任 发表于 2019-1-26 11:26\n被某群里的舔狗骗来的午夜路过\n谁呃？我 id ,你不会是说shaokeyibb把"
        },
        {
            "author": "嘿嘿55",
            "timestamp": 1548473520,
            "txt_content": "感谢楼主分享"
        },
        {
            "author": "LittleHei",
            "timestamp": 1548473820,
            "txt_content": "我来尝试一下"
        },
        {
            "author": "Abraham511",
            "timestamp": 1548473820,
            "txt_content": "233\n\n截图看到了@shaokeyibb "
        },
        {
            "author": "LOVE丿冷曦",
            "timestamp": 1548474120,
            "txt_content": "wow  纯净服带走试试  感谢分享"
        },
        {
            "author": "贺兰兰",
            "timestamp": 1548474180,
            "txt_content": "Abraham511 发表于 2019-1-26 11:37\n233\n\n截图看到了@shaokeyibb\n2333333\n当时评论了一下"
        },
        {
            "author": "tony6074683",
            "timestamp": 1548474600,
            "txt_content": "我来尝试一下"
        },
        {
            "author": "344870115",
            "timestamp": 1548474780,
            "txt_content": "感谢楼主的共享"
        },
        {
            "author": "NGK3",
            "timestamp": 1548476880,
            "txt_content": "半夜某群看见安利信息XD\n（话说那时候来的看都没有要回帖查看！"
        },
        {
            "author": "呵呵1213866",
            "timestamp": 1548477060,
            "txt_content": "\n感谢楼主的共享"
        },
        {
            "author": "幻境雲達達",
            "timestamp": 1548477360,
            "txt_content": "怎么还得回复可见。。"
        },
        {
            "author": "Ye_Yang_Dada",
            "timestamp": 1548481020,
            "txt_content": "不错的参数,支持！"
        },
        {
            "author": "Pandaeen",
            "timestamp": 1548481260,
            "txt_content": "试试看，很期待"
        },
        {
            "author": "zhz894523",
            "timestamp": 1548482700,
            "txt_content": "QAQ很想试试QWQ"
        },
        {
            "author": "1a2s3d4f1",
            "timestamp": 1548483240,
            "txt_content": " 本帖最后由 1a2s3d4f1 于 2019-1-26 14:15 编辑 \n\n准备做服务端整合时候用给sponge试试效果(减少内存使用）"
        },
        {
            "author": "Freak°",
            "timestamp": 1548487140,
            "txt_content": "shangenbo 发表于 2019-1-26 10:49\n是的呢2333\n这是你家部落的启动代码?"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548487860,
            "txt_content": "Love_Myself 发表于 2019-1-26 15:19\n这是你家部落的启动代码?\n是的"
        },
        {
            "author": "Didiao0v0",
            "timestamp": 1548488280,
            "txt_content": "优化蛮大的"
        },
        {
            "author": "fyxrim",
            "timestamp": 1548491820,
            "txt_content": "支持不错 想看看启动参数"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548493320,
            "txt_content": "fyxrim 发表于 2019-1-26 16:37\n支持不错 想看看启动参数\n公益服 支持!!"
        },
        {
            "author": "Tommer",
            "timestamp": 1548493920,
            "txt_content": "来看看 这么牛逼的吗"
        },
        {
            "author": "瓜瓜.",
            "timestamp": 1548496740,
            "txt_content": "666666666666"
        },
        {
            "author": "LightiNike",
            "timestamp": 1548496860,
            "txt_content": "6666666666"
        },
        {
            "author": "飒爽师叔",
            "timestamp": 1548496860,
            "txt_content": "额这个参数看看吧"
        },
        {
            "author": "tsechikam",
            "timestamp": 1548497700,
            "txt_content": "什麽原理..........."
        },
        {
            "author": "wuc656",
            "timestamp": 1548504180,
            "txt_content": "讓我試試看"
        },
        {
            "author": "qwer925009155",
            "timestamp": 1548507240,
            "txt_content": "adfsfasdaf**fadfs"
        },
        {
            "author": "他之前几天",
            "timestamp": 1548508260,
            "txt_content": "感谢分享，辛苦了（话说怎么来的）"
        },
        {
            "author": "Duangzhu",
            "timestamp": 1548508320,
            "txt_content": "赶紧收藏"
        },
        {
            "author": "他之前几天",
            "timestamp": 1548508440,
            "txt_content": "shangenbo 发表于 2019-1-26 15:31\n是的\n用在模组服上有没有效果"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548508620,
            "txt_content": "他之前几天 发表于 2019-1-26 21:14\n用在模组服上有没有效果\n有的，甚至在客户端上也有效果"
        },
        {
            "author": "他之前几天",
            "timestamp": 1548509160,
            "txt_content": "shangenbo 发表于 2019-1-26 21:17\n有的，甚至在客户端上也有效果\n分版本么 比如1.7.10也可以使用么"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548510060,
            "txt_content": "他之前几天 发表于 2019-1-26 21:26\n分版本么 比如1.7.10也可以使用么\n不分版本"
        },
        {
            "author": "他之前几天",
            "timestamp": 1548510240,
            "txt_content": "shangenbo 发表于 2019-1-26 21:41\n不分版本\n感谢"
        },
        {
            "author": "651534200",
            "timestamp": 1548518340,
            "txt_content": "看看怎么回事"
        },
        {
            "author": "Soul-grazier",
            "timestamp": 1548519900,
            "txt_content": "666看起来很强！！！"
        },
        {
            "author": "稳定c",
            "timestamp": 1548523260,
            "txt_content": "看看，感谢楼主"
        },
        {
            "author": "Tommer",
            "timestamp": 1548523620,
            "txt_content": "Java HotSpot(TM) 64-Bit Server VM warning: Using incremental CMS is deprecated and will likely be removed in a future release\nJava HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.\nJava HotSpot(TM) 64-Bit Server VM warning: CMSFullGCsBeforeCompaction is deprecated and will likely be removed in a future release.\n\n这个意思是不是不会生效啊.."
        },
        {
            "author": "锅宝",
            "timestamp": 1548536400,
            "txt_content": "想看看是什么"
        },
        {
            "author": "小带",
            "timestamp": 1548554040,
            "txt_content": "感谢楼主分享"
        },
        {
            "author": "tallmoon",
            "timestamp": 1548557340,
            "txt_content": "看一下隐藏内容"
        },
        {
            "author": "十中八九.",
            "timestamp": 1548558060,
            "txt_content": "感谢楼主分享"
        },
        {
            "author": "Mr.阿冬",
            "timestamp": 1548560340,
            "txt_content": "666666～试着看看用一下，收下了????"
        },
        {
            "author": "wshycaa",
            "timestamp": 1548560700,
            "txt_content": "听起来很6的样子，看看是什么"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548563760,
            "txt_content": "Tommer 发表于 2019-1-27 01:27\nJava HotSpot(TM) 64-Bit Server VM warning: Using incremental CMS is deprecated and will likely be re ...\n意思是，在将来这些参数可能会被删除"
        },
        {
            "author": "ieofws",
            "timestamp": 1548565620,
            "txt_content": "我想看看是怎么回事"
        },
        {
            "author": "fyxrim",
            "timestamp": 1548567000,
            "txt_content": "请问没有客户端bat启动吗？\n\n下载了网盘只是只能服务器启动使用"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548568320,
            "txt_content": "fyxrim 发表于 2019-1-27 13:30\n请问没有客户端bat启动吗？\n\n下载了网盘只是只能服务器启动使用\n没有客户端的，客户端不提供相关教程，因为客户端的启动方式多种多样，不能保证客户端全部正常使用"
        },
        {
            "author": "1272307182",
            "timestamp": 1548568620,
            "txt_content": "意思是添加启动参数可以减少内存使用？"
        },
        {
            "author": "firnow123",
            "timestamp": 1548569340,
            "txt_content": ""
        },
        {
            "author": "2254767040",
            "timestamp": 1548571080,
            "txt_content": "感谢分享"
        },
        {
            "author": "PPTTDWJ",
            "timestamp": 1548574080,
            "txt_content": "这都可以！！！"
        },
        {
            "author": "41386148",
            "timestamp": 1548598920,
            "txt_content": "看看谢谢楼主"
        },
        {
            "author": "不是本地猫",
            "timestamp": 1548612120,
            "txt_content": "刚好用得到"
        },
        {
            "author": "王自如",
            "timestamp": 1548619200,
            "txt_content": "可以...这上哪儿弄的"
        },
        {
            "author": "DanDanisme",
            "timestamp": 1548619320,
            "txt_content": " 本帖最后由 DanDanisme 于 2019-1-28 04:42 编辑 \n\n尝试一下 希望对BC也能有用"
        },
        {
            "author": "zjxeee233",
            "timestamp": 1548647460,
            "txt_content": "这个是不是反编译（？）了盒子的代码获取到的？"
        },
        {
            "author": "浅笑醉红楼",
            "timestamp": 1548650580,
            "txt_content": "感谢楼主大佬分享！"
        },
        {
            "author": "nuyan",
            "timestamp": 1548661920,
            "txt_content": "很棒 我来学习一下"
        },
        {
            "author": "nbcw2009",
            "timestamp": 1548665700,
            "txt_content": "............."
        },
        {
            "author": "赐赐赐赐赐",
            "timestamp": 1548692040,
            "txt_content": "神乎其技，不服不行！"
        },
        {
            "author": "鬼畜畜",
            "timestamp": 1548696060,
            "txt_content": "这种东西我记得不能设置回复可见吧"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548737400,
            "txt_content": "zjxeee233 发表于 2019-1-28 11:51\n这个是不是反编译（？）了盒子的代码获取到的？\n并不是喔，是直接从运行着的服务端截取的，盒子中不存在这段启动参数的"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548737520,
            "txt_content": "Ghost_chu 发表于 2019-1-29 01:21\n这种东西我记得不能设置回复可见吧\n这也算不上太回复可见，毕竟好多参数在下面的讲解里都公开了，你完全可以自己拼，真正回复才能得到的，是云盘里的bat"
        },
        {
            "author": "742577106",
            "timestamp": 1548737880,
            "txt_content": "这种东西我记得不能设置回复可见吧"
        },
        {
            "author": "lidiwei",
            "timestamp": 1548742560,
            "txt_content": "..........瞧瞧"
        },
        {
            "author": "qty941956965",
            "timestamp": 1548743760,
            "txt_content": "66666666666"
        },
        {
            "author": "MC_apple",
            "timestamp": 1548749580,
            "txt_content": "牛逼~~~~"
        },
        {
            "author": "GreyElaina",
            "timestamp": 1548751740,
            "txt_content": "我看看...emmmm回复可见"
        },
        {
            "author": "晓夜Port",
            "timestamp": 1548752880,
            "txt_content": "听说很好用，来看一看"
        },
        {
            "author": "yuansor",
            "timestamp": 1548758040,
            "txt_content": " 厉害了，感谢楼主分享。"
        },
        {
            "author": "断弦∑",
            "timestamp": 1548758520,
            "txt_content": "感谢大佬分享教程"
        },
        {
            "author": "Peng_Lx",
            "timestamp": 1548762360,
            "txt_content": "这么厉害！！！！"
        },
        {
            "author": "蜡笔12344",
            "timestamp": 1548770460,
            "txt_content": "zhendejiade"
        },
        {
            "author": "星耀幻影",
            "timestamp": 1548772680,
            "txt_content": "看上去能让我的服务器喘口气了。。。"
        },
        {
            "author": "徐智栋",
            "timestamp": 1548776100,
            "txt_content": "世界和平"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1548819480,
            "txt_content": "星耀幻影 发表于 2019-1-29 22:38\n看上去能让我的服务器喘口气了。。。\n1G内存带40人不是梦"
        },
        {
            "author": "782963325",
            "timestamp": 1548820680,
            "txt_content": "牛逼啊兄弟"
        },
        {
            "author": "JimySpirits",
            "timestamp": 1548820740,
            "txt_content": "拿走了 23333"
        },
        {
            "author": "wszhenli145632",
            "timestamp": 1548822360,
            "txt_content": "试试效果"
        }
    ]
}