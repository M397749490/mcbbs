{
    "title": "[修正]SlimeFunFixer —— 粘液科技(远古工艺)部分bug修复[1.12.2]",
    "author": "Anju!!!",
    "replyCount": 12,
    "timestamp": 1585592700,
    "txt_content": " 本帖最后由 Anju!!! 于 2020-4-2 02:57 编辑 \n\nSlimeFunFixer\n粘液科技修复\n基于 远古工艺4.1.15版本修复\n\n\n修复内容\n1.远古祭坛刷物品 (这个我不敢保证100%修好,)\n2.坩埚破坏上方方块\n3.运输系统无限刷取经验\n另外，增加“全息投影仪”的“是否允许放置”开关\n\n\n配置文件<blockquote>\n复制代码服了，代码老被吞，直接放出来...HologramProjector_Enable: false\n# 禁止放置全息投影仪 true为禁止\nHologramProjectorMessage_Enable: false\nHologramProjectorMessage: \"§8§l[§c§l!§8§l] §4警告 §f§l> §c当前物品已被禁止放置!\"\n\nCrucibleFix_Enable: false\n# 禁止直接在方块下面放置坩埚 true为禁止\nCrucibleMessage_Enable: false\nCrucibleMessage: \"§8§l[§c§l!§8§l] §4警告 §f§l> §c若要在此处放置坩埚，请先移除上放方块!\"\n\nCargo_Enable: true\n# 修复运输系统刷经验bug true为开启\n\nAncient_Enable: true\n# 修复远古祭坛bug true为开启\nAncient_Message1_Title: \"§c§l?\"\nAncient_Message1_SubTitle: \"§e祭坛还没有反应过来呢...\"\nAncient_Message1_Message: \"§8§l[§a§l!§8§l] §b系统 §f§l> §7远古祭坛貌似还没反应过来...一会儿再试试吧\"\nAncient_Message2_Title: \"§c§l?\"\nAncient_Message2_SubTitle: \"§7拆除失败，请再试一次\"\nAncient_Message2_Message: \"§8§l[§a§l!§8§l] §b系统 §f§l> §7远古祭坛貌似还没反应过来...一会儿再试试吧\"\nAncient_Message3_Title: \"§c§l?\"\nAncient_Message3_SubTitle: \"§7远古祭坛留下的神秘的气息使你现在不能在这放置方块\"\nAncient_Message3_Message: \"§8§l[§a§l!§8§l] §b系统 §f§l> §7远古祭坛留下的神秘的气息使你现在不能在这放置方块\"\n\nVersion: 2\n# 这个不要动\n\n\n\n\n\n源码(插件赶制的,代码比较乱= =)\npackage com.q168;复制代码package com.q168;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.Location;\nimport org.bukkit.Material;\nimport org.bukkit.block.Block;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.Action;\nimport org.bukkit.event.block.BlockBreakEvent;\nimport org.bukkit.event.block.BlockPlaceEvent;\nimport org.bukkit.event.inventory.FurnaceExtractEvent;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.inventory.ItemStack;\nimport org.bukkit.plugin.java.JavaPlugin;\n\nimport com.connorlinfoot.titleapi.TitleAPI;\n\nimport me.mrCookieSlime.Slimefun.Lists.SlimefunItems;\nimport me.mrCookieSlime.Slimefun.Setup.SlimefunManager;\nimport me.mrCookieSlime.Slimefun.api.BlockStorage;\n\nimport java.util.HashMap;\nimport java.util.logging.Level;\n\n\npublic class Main extends JavaPlugin implements CommandExecutor, Listener {\n\n    public boolean HologramProjector_Enable;\n    public boolean HologramProjectorMessage_Enable;\n    public String HologramProjectorMessage;\n    public boolean CrucibleFix_Enable;\n    public boolean CrucibleMessage_Enable;\n    public String CrucibleMessage;\n    public boolean Cargo_Enable;    \n    public boolean Ancient_Enable; \n    public String Ancient_Message1_Title; \n    public String Ancient_Message1_SubTitle; \n    public String Ancient_Message1_Message; \n    public String Ancient_Message2_Title; \n    public String Ancient_Message2_SubTitle; \n    public String Ancient_Message2_Message; \n    public String Ancient_Message3_Title; \n    public String Ancient_Message3_SubTitle; \n    public String Ancient_Message3_Message; \n    // \n    //\n    @Override\n    public void onEnable() {\n            saveDefaultConfig();\n        if(getConfig().getInt(\"Version\")==1){\n            getConfig().set(\"HologramProjector_Enable\",\"false\");\n            getConfig().set(\"HologramProjectorMessage_Enable\",\"false\");\n            getConfig().set(\"HologramProjectorMessage\",\"§8§l[§c§l!§8§l] §4警告 §f§l> §c当前物品已被禁止放置!\");\n            getConfig().set(\"CrucibleFix_Enable\",\"false\");\n            getConfig().set(\"CrucibleMessage_Enable\",\"false\");\n            getConfig().set(\"CrucibleMessage\",\"§8§l[§c§l!§8§l] §4警告 §f§l> §c若要在此处放置坩埚，请先移除上放方块!\");\n            getConfig().set(\"Cargo_Enable\",\"true\");\n            getConfig().set(\"Ancient_Enable\", \"true\");\n            getConfig().set(\"Ancient_Message1_Title\", \"§c§l?\");\n            getConfig().set(\"Ancient_Message1_SubTitle\", \"§e祭坛还没有反应过来呢...\");\n            getConfig().set(\"Ancient_Message1_Message\", \"§8§l[§a§l!§8§l] §b系统 §f§l> §7远古祭坛貌似还没反应过来...一会儿再试试吧\");\n            getConfig().set(\"Ancient_Message2_Title\", \"§c§l?\");\n            getConfig().set(\"Ancient_Message2_SubTitle\", \"§7拆除失败，请再试一次\");\n            getConfig().set(\"Ancient_Message2_Message\", \"§8§l[§a§l!§8§l] §b系统 §f§l> §7远古祭坛貌似还没反应过来...一会儿再试试吧\");\n            getConfig().set(\"Ancient_Message3_Title\", \"§c§l?\");\n            getConfig().set(\"Ancient_Message3_SubTitle\", \"§7远古祭坛留下的神秘的气息使你现在不能在这放置方块\");\n            getConfig().set(\"Ancient_Message3_Message\", \"§8§l[§a§l!§8§l] §b系统 §f§l> §7远古祭坛留下的神秘的气息使你现在不能在这放置方块\");\n            getConfig().set(\"Version\",2);\n            saveConfig();\n        }       \n        HologramProjector_Enable = getConfig().getBoolean(\"HologramProjector_Enable\");\n        HologramProjectorMessage_Enable = getConfig().getBoolean(\"HologramProjectorMessage_Enable\");\n        HologramProjectorMessage = getConfig().getString(\"HologramProjectorMessage\").replace(\"&\", \"§\");\n        CrucibleFix_Enable = getConfig().getBoolean(\"CrucibleFix_Enable\");\n        CrucibleMessage_Enable = getConfig().getBoolean(\"CrucibleMessage_Enable\");\n        CrucibleMessage = getConfig().getString(\"CrucibleMessage\").replace(\"&\", \"§\");\n        Cargo_Enable = getConfig().getBoolean(\"Cargo_Enable\");\n        Ancient_Enable = getConfig().getBoolean(\"Ancient_Enable\");\n        Ancient_Message1_Title = getConfig().getString(\"Ancient_Message1_Title\").replace(\"&\", \"§\");\n        Ancient_Message1_SubTitle = getConfig().getString(\"Ancient_Message1_SubTitle\").replace(\"&\", \"§\");\n        Ancient_Message1_Message = getConfig().getString(\"Ancient_Message1_Message\").replace(\"&\", \"§\");\n        Ancient_Message2_Title = getConfig().getString(\"Ancient_Message2_Title\").replace(\"&\", \"§\");\n        Ancient_Message2_SubTitle = getConfig().getString(\"Ancient_Message2_SubTitle\").replace(\"&\", \"§\");\n        Ancient_Message2_Message = getConfig().getString(\"Ancient_Message2_Message\").replace(\"&\", \"§\");\n\n        Ancient_Message3_Title = getConfig().getString(\"Ancient_Message3_Title\").replace(\"&\", \"§\");\n        Ancient_Message3_SubTitle = getConfig().getString(\"Ancient_Message3_SubTitle\").replace(\"&\", \"§\");\n        Ancient_Message3_Message = getConfig().getString(\"Ancient_Message3_Message\").replace(\"&\", \"§\");\n\n        getLogger().log(Level.INFO,\"§aSlimeFunFixer —— 粘液科技bug修复插件已经开启!\");\n        Bukkit.getPluginManager().registerEvents(this, this);\n    }\n    \n    // 防止坩埚破坏上方方块\n        @EventHandler\n        public void onP1(BlockPlaceEvent e)\n                {\n                if (CrucibleFix_Enable != true)\n                        return;\n                        if (e.isCancelled()) {\n                                return;\n                        }\n                        ItemStack item = e.getItemInHand();\n                        if (!SlimefunManager.isItemSimiliar(item, SlimefunItems.CRUCIBLE, true)) {\n                                return;\n                        }\n                        Block b = e.getBlock();\n                        Location loc = b.getLocation();\n                        loc.setY(loc.getY() + 1.0D);\n                        Block upon = loc.getBlock();\n                if (upon.getType().equals(Material.AIR)) {\n                        return;\n                        }\n                e.setCancelled(true);\n                if (CrucibleMessage_Enable == true) {\n                        e.getPlayer().sendMessage(CrucibleMessage);}\n                        \n                }\n        @EventHandler\n          public void onOpen(PlayerInteractEvent e)\n          {\n                if (Ancient_Enable != true)\n                          return;\n                  if (e.getAction() == Action.RIGHT_CLICK_BLOCK) {\n                Location loc = e.getClickedBlock().getLocation();\n                Player p = e.getPlayer();\n                if (loc == null) {\n                        return;\n                }\n                if (p == null) {\n                        return;\n                }\n                if (e.getClickedBlock() == null){\n                        return;\n                }\n            if (e.isCancelled()) {\n                return;\n              }\n                if (BlockStorage.check(loc, \"ANCIENT_PEDESTAL\")) {\n                \n              if ((this.cooldownE.containsKey(loc)) && (((Long)this.cooldownE.get(loc)).longValue() > System.currentTimeMillis()))\n              {\n                long Long = ((Long)this.cooldownE.get(loc)).longValue() - System.currentTimeMillis();\n                int currentTime = (int)Long;\n                String time = Integer.toString(currentTime / 1000);\n                TitleAPI.sendTitle(e.getPlayer(),0,20,10,Ancient_Message1_Title,Ancient_Message1_SubTitle); \n                e.getPlayer().sendMessage(Ancient_Message1_Message);\n                e.getPlayer().playSound(e.getPlayer().getLocation(), \"block.anvil.land\", 1.0F, 1.0F);\n                e.setCancelled(true);\n                p.updateInventory();\n              }\n              else\n              {\n                this.cooldownE.put(loc, Long.valueOf(System.currentTimeMillis() + 2 * 1000));\n              }\n                }\n          }\n        }\n          @EventHandler\n          public void onBreak(BlockBreakEvent e)\n          {\n                  if (Ancient_Enable != true)\n                          return;\n                  Location loc = e.getBlock().getLocation();\n                  if (BlockStorage.check(loc, \"ANCIENT_PEDESTAL\")) {\n                      if ((this.cooldownE.containsKey(loc)) && (((Long)this.cooldownE.get(loc)).longValue() > System.currentTimeMillis()))\n                      {\n                        long Long = ((Long)this.cooldownE.get(loc)).longValue() - System.currentTimeMillis();\n                        int currentTime = (int)Long;\n                        String time = Integer.toString(currentTime / 1000);\n                        TitleAPI.sendTitle(e.getPlayer(),0,20,10,Ancient_Message2_Title,Ancient_Message2_SubTitle); \n                        e.getPlayer().sendMessage(Ancient_Message2_Message);\n                        e.getPlayer().playSound(e.getPlayer().getLocation(), \"block.anvil.land\", 1.0F, 1.0F);\n                        e.setCancelled(true);\n                        e.getPlayer().updateInventory();\n                      }\n                      else\n                      {\n                        this.cooldownE.put(loc, Long.valueOf(System.currentTimeMillis() + 2 * 1000));\n                      }\n                          \n                  }\n          }\n          private HashMap<Location, Long> cooldownE = new HashMap();\n\n          @EventHandler\n          public void onPlace(BlockPlaceEvent e)\n          {\n                  if (Ancient_Enable != true)\n                  return;\n                    if (e.isCancelled()) {\n                        return;\n                      }\n                  Location loc = e.getBlock().getLocation();\n                  if (BlockStorage.check(loc, \"ANCIENT_PEDESTAL\")) {\n                      if ((this.cooldownE.containsKey(loc)) && (((Long)this.cooldownE.get(loc)).longValue() > System.currentTimeMillis()))\n                      {\n                        long Long = ((Long)this.cooldownE.get(loc)).longValue() - System.currentTimeMillis();\n                        int currentTime = (int)Long;\n                        String time = Integer.toString(currentTime / 1000);\n                        TitleAPI.sendTitle(e.getPlayer(),0,20,10,Ancient_Message3_Title,Ancient_Message3_SubTitle);\n                        e.getPlayer().sendMessage(Ancient_Message3_Message);\n                        e.getPlayer().playSound(e.getPlayer().getLocation(), \"block.anvil.land\", 1.0F, 1.0F);\n                        e.setCancelled(true);\n                        e.getPlayer().updateInventory();\n                      }\n                      else\n                      {\n                        \n                      }\n                          \n                  }\n          }\n    @EventHandler\n    public void onPlace2(BlockPlaceEvent e)\n    {\n      if (HologramProjector_Enable != true)\n              return;  \n      if (e.isCancelled()) {\n              return;\n      }\n      ItemStack item = e.getItemInHand();\n      if (!SlimefunManager.isItemSimiliar(item, SlimefunItems.HOLOGRAM_PROJECTOR, true)) {\n          return;\n        }\n      e.setCancelled(true);\n      if (HologramProjectorMessage_Enable == true) {\n              e.getPlayer().sendMessage(HologramProjectorMessage);\n      }\n    }\n    \n    @Override\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n  \n            if(command.getName().equalsIgnoreCase(\"sff\")){\n                    sender.sendMessage(\"\");\n                    sender.sendMessage(\"§b§lSlimeFunFixer v1 §3§lby §f§nwww.mcbbbs.net§r§6§l@§a§lAnju!!!\");\n                    }\n               return true;\n            }\n    \n    // 修复运输系统刷经验\n    @EventHandler\n    public void onInteract(FurnaceExtractEvent e)\n    {\n            if (Cargo_Enable != true)\n                    return;\n            \n                  Block block = e.getBlock();\n                  Location loc1 = block.getLocation();\n                  Location loc2 = block.getLocation();\n                  Location loc3 = block.getLocation();\n                  Location loc4 = block.getLocation();\n                  loc1.setX(loc1.getX() + 1.0D);\n                  loc2.setX(loc2.getX() - 1.0D);\n                  loc3.setZ(loc3.getZ() + 1.0D);\n                  loc4.setZ(loc4.getZ() - 1.0D);\n                  if ((BlockStorage.check(loc1, \"CARGO_NODE_INPUT\"))\n                          ||(BlockStorage.check(loc2, \"CARGO_NODE_INPUT\"))\n                          ||(BlockStorage.check(loc3, \"CARGO_NODE_INPUT\"))\n                          ||(BlockStorage.check(loc4, \"CARGO_NODE_INPUT\"))\n                          ||(BlockStorage.check(loc1, \"CARGO_NODE_OUTPUT\"))\n                          ||(BlockStorage.check(loc2, \"CARGO_NODE_OUTPUT\"))\n                          ||(BlockStorage.check(loc3, \"CARGO_NODE_OUTPUT\"))\n                          ||(BlockStorage.check(loc4, \"CARGO_NODE_OUTPUT\"))\n                          ||(BlockStorage.check(loc1, \"CARGO_NODE\"))\n                          ||(BlockStorage.check(loc2, \"CARGO_NODE\"))\n                          ||(BlockStorage.check(loc3, \"CARGO_NODE\"))\n                          ||(BlockStorage.check(loc4, \"CARGO_NODE\"))\n                          ||(BlockStorage.check(loc1, \"CARGO_NODE_INPUT_ADVANCED\"))\n                          ||(BlockStorage.check(loc2, \"CARGO_NODE_INPUT_ADVANCED\"))\n                          ||(BlockStorage.check(loc3, \"CARGO_NODE_INPUT_ADVANCED\"))\n                          ||(BlockStorage.check(loc4, \"CARGO_NODE_INPUT_ADVANCED\"))) {\n                          \n                           e.setExpToDrop(0);\n                           return;\n                  }\n          }\n    @Override\n    public void onDisable() {\n            getLogger().log(Level.INFO,\"§cSlimeFunFixer —— 插件关闭，感谢您的使用!\");\n            }\n    }\n\n\n复制代码\n\n\n\n\n\n\n下载\n\n\n\n\nSlimeFunFixer.jar\n(6.55 KB, 下载次数: 509)\n\n\n\n2020-3-31 02:30 上传\n点击文件名下载附件\n\n\n\n\n\n\n前置 TitleAPI: 点击\n(其他bug修复请跳转至这个帖子)\n本插件所用代码部分来自其他开源或闭源(已授权)作品\n本插件为非盈利性插件，免费发布，严禁销售和转卖最后,给个金粒或者人气好不~\n",
    "replies": [
        {
            "author": "25454J",
            "timestamp": 1588136940,
            "txt_content": "就。自动附魔台打开变成普通附魔台是什么情况"
        },
        {
            "author": "飞皇之圣",
            "timestamp": 1588145040,
            "txt_content": "另外有两个粘液科技的bug不知道能否修复？\n1.粘液科技背包卡服的bug，如果玩家拥有多个大背包，而且背包内塞满各种物品，那么当这个玩家打开粘液科技书时会导致服务器卡顿，且当玩家背包内物品越多，这个卡服时间越长，主要原因是玩家背包内物品数据是储存在data-storage/Slimefun/Players下的玩家文档中，这个文档同时保存了玩家已经解锁科技的数据，每当玩家打开粘液科技书时，粘液科技插件都会读取一次玩家的这个文档，当这个文档越大，读取时间越长，所以为什么粘液科技背包里东西越多，越会在打开粘液科技书时卡服了\n2.电容器bug，当玩家放下一个粘液科技电容器后，过一段时间如果将其拆除，之后再放上其他粘液科技物品，那么有一定概率会导致新放上的物品在区块被重新加载（或者是重启服务器）后变成普通方块，个人推测是因为电容器通电后，根据所带的电量，会自动变化方块颜色导致的，总之很多玩家的粘液科技物品坏掉都是这个情况导致的\n\n最后感谢楼主的插件，非常强大"
        },
        {
            "author": "cesuo11",
            "timestamp": 1593494340,
            "txt_content": "支持一下支持一下"
        },
        {
            "author": "BLank826",
            "timestamp": 1593499260,
            "txt_content": "MCBBS有你更精彩~"
        },
        {
            "author": "shiyukai",
            "timestamp": 1599145380,
            "txt_content": "挺有用的，支持作者"
        },
        {
            "author": "zhengxinrui",
            "timestamp": 1601643000,
            "txt_content": "老哥厉害了"
        },
        {
            "author": "小张up",
            "timestamp": 1601728200,
            "txt_content": "飞皇之圣 发表于 2020-4-29 15:24\n另外有两个粘液科技的bug不知道能否修复？\n1.粘液科技背包卡服的bug，如果玩家拥有多个大背包，而且背包内 ...\n第一个已经有插件修复了\n叫safeback什么什么的，就在站内"
        },
        {
            "author": "任性oo",
            "timestamp": 1607268480,
            "txt_content": "话说可以用来做单机mod 吗"
        },
        {
            "author": "Emoji-W",
            "timestamp": 1607272200,
            "txt_content": "感谢大佬分享"
        },
        {
            "author": "Chinabc",
            "timestamp": 1611197400,
            "txt_content": "爆炸稿可以炸领地咋办"
        },
        {
            "author": "安夜生",
            "timestamp": 1612416600,
            "txt_content": "感谢分享感谢分享！！！！！"
        },
        {
            "author": "zhaomiaomiao",
            "timestamp": 1613152140,
            "txt_content": "我到现在不知道咋给金粒。。。"
        }
    ]
}