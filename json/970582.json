{
    "title": "[BCT][Skript]萌新0基础快速入门-如何短时间内编写属于自己的插件",
    "author": "x_xingchen",
    "replyCount": 5,
    "timestamp": 1582792020,
    "txt_content": " 本帖最后由 x_xingchen 于 2020-3-16 18:59 编辑 \n\n   莫名全部乱码了，别看了,不知道在哪删帖子，版主麻烦看见了帮忙删一下\nSkript这款插件可以让一个有着初中英语水平人来创建属于自己的轻量级插件\n而中小型服主掌握SK后再也不用去花钱找别人定制插件很多功能性插件依靠自己就可以实现.\n值于本人写下这篇教程的原因是因为站内实在是找不到易懂的Sk教程,许多问题也没有提到，所以在此写下这篇教程如果你有编程语言基础，你甚至可以在数小时内就掌握本篇文章的内容\n 那么Skript与java，区别在哪里?\n\n#Main.java\npublic class Main extends JavaPlugin{\n        @Override  \n    public void onEnable(){\n        Bukkit.getPluginCommand(\"diamond\").setExecutor(new diamond());\n    }\n    @Override      \n    public void onDisable(){  \n\n    }\n}\n#diamond.java\npublic class rd implements CommandExecutor {\n        public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\n                Player p = sender;\n                if (p.hasPermission(\"give.diamond\"){\n                        ItemStack diamond = new ItemStack(Material.DIAMOND, 1);\n                        p.getInventory().setItem(36,diamond);\n                        p.sendMessage(\"§b恭喜你得到了一颗钻石\");\n                        p.sendMessage(\"§b但是....代价是什么呢？\");\n                }\n                else{\n                        p.sendMessage(\"塞翁失马...焉知非福?\");\n                }\n        }\n}\n#diamond.sk\ncommand /diamond：\n        permission: give.diamond\n        permission message: \"&b塞翁失马...焉知非福?\"\n        trigger:\n                set slot 1 of player's inventory to a diamond\n                send \"&b恭喜你得到了一颗钻石\"\n                send \"&b但是....代价是什么呢\"复制代码\n前言[重要！！]:    虽然Sk看起来比Java简单了许多    但是无论Sk有多么的简单，他也是一门编程语言，想要熟练掌握，练习是必不可少的！    以下是官方的语法库，所有的sk语法包括附属的语法，都写在了里面，里面有你想要的一切    https://skripthub.net/docs/官方语法库，查询方便    https://skriptlang.github.io/Skript官方Doc    尽量避免看Skript中文文档，其中很多内容已经过时了    以下教程均来自官方语法库    推荐使用Notepad++来进行编写    特别注意，Sk对于脚本内容空格敏感，当换行或者”:“后需要加入4个空格或者一个tab（见下）一些准备工作    Skript下载地址    Skript附属插件下载只需要在skripthub中找到对应的附属，同时单击最左侧的名字即可跳转到附属下载链接    将Skript.jar扔进\\plugins,然后重启服务器    安装后进入plugins\\skript\\scripts这是存放脚本的地方    里面有一些官方预制的脚本\n\n\n六大语法类型\n \nSK官方给出的六大语法类型分别为：\nEvents 事件\n事件就是当一件事情发生的时候，例如玩家点击了一些东西，打出伤害，死亡，或一个怪物做了一些事情，甚至是环境自己改变。\n     举个例子当TNT、苦力怕甚至是末影龙发生爆炸的时候，这段小小的代码就可以使爆炸失效on explode:复制代码\nConditions 条件\n条件通常与If语句搭配使用，当这个条件是一个真命题的时候，代码才会继续往下运行这段代码可以在玩家拥有\"sk.boom\"权限时，在右键方块的时候产生一个爆炸！on rightclick:复制代码\n\n\n\n\n\n\n\nEffects 动作动作代码通常会产生某些影响，例如发生爆炸，删除一个方块之类的。例如下列代码就会破坏你右键的方块<font size=\"4\"><div style=\"text-align: left;\">on rightclick:</div><div style=\"text-align: left;\">        break event-block naturally</div><div style=\"text-align: left;\">当右键时：</div><div style=\"text-align: left;\">        破坏事件方块自然的</div></font>复制代码\n\n\n\n\n\n\n\n\nTypes 类型\n\n\n\n\n\n\nTypes也很好理解，就比如你是一个人，那么你就属于Human类型，而猴子属于Monkey类型，你们都属于Animal类型，建议前往https://skripthub.net/docs/查看会更加简单明了\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nExpressions 表达方式\n\n\n\n\n\n\n\n\n\n\n\n\n\n表达式通常代表某个东西，例如我想要获取玩家的背包，那么下面的代码就代表了玩家的背包[不过这是哪个玩家的呢？]on join:复制代码上方代码中：  \n    on join是一个Events事件，表示在有玩家加入时就会触发\n    player has 2 gold nuggets则是一个Conditions条件，当玩家有两个gold nuggets金粒时，才会继续if里的操作\n    remove 2 gold nuggets from player与give player 1 diamond都属于Effects行为，如果玩家真的有两个金粒    前者会把金粒移除，后者则会给玩家一个钻石   如果将整个逻辑改为中文呢？\n加入时:复制代码再翻译一下\n事件:复制代码\n事件-条件-行为，就是一个完整的sk语句，而类型与表达方式通常额外包含在条件与行为中\n\n变量\n\n\n\n\n什么是变量？\n[spoiler]变量用来在名字下储存数据的。它像一个盒子上的标签，如果你想要知道盒子里的信息，只要找到正确的标签就可以。与一般的编程语言不同，sk不需要变量不需要声明\n变量值（盒子里的信息）可以是一个数字、可以是一句话、也可以是一些其他的东西variables.csv 这一个 Skript 插件启动时默认生成的文件\n这个文件非常重要 它保存了你所有的全局变量 你在任何一个Sk任何事件都可以调用这些变量\n切记，虽然你可以用excel表格打开它，但是不要对其进行任何修改！！！\n可以对其进行加减乘除... 不受到关服/开服的影响 只要不删掉 它们就会被永久存在 variables.csv 文件内\n而临时变量则相反它只能留在你写当前事件内 它们不会被文件保存 随着开服/关服消失\n下面我会讲解全局变量与临时变量的区别\n\n\n\n可用的变量类型\n\nobject[数字、字符串、或布尔值]复制代码\n  全局变量与临时变量 【以下为示例代码，不可使用】\n全局变量通常格式为{xxxx}其中xxxx可以被替换为任何字符串\n临时变量通常格式为{_xxxx}其中xxxx可以被替换为任何字符串\n在Sk中，如若变量没有被赋值，就会显示<none>\non join:#加入时复制代码    在sk中，临时变量{_join}只能够在on join这个事件中使用，到了其他事件中便不存在了，而全局{join}可以在其他事件(on left)中使用\n\n那么接下来是变量的变种——变量列表（其他语言的数组）\n什么是变量列表？\n变量列表可以理解为多个变量的集合\n其标准格式为{_xxxx::*}或{xxxx::*}，可以看到，变量列表仍然分为临时与全局\n如上文提到的，如果把变量比作盒子，那么变量列表就是一个放多个盒子的仓库\nxxxx是仓库的名字，而*则是盒子上的标签\n    \n名称格式如下:\nadd one to {join::*}复制代码    那么在{join::*}这个变量列表中，变量是这么存的\n Index Value 1 one 2 two\nChange: set/add/remove/delete/reset复制代码%objects%中可以填写数字、字符串或布尔值（true|false），括号中的单词则可以根据个人喜好随意选择    \n以上行为除了用来更改变量，也可以用来修改一些表达式\nsend %string% to player#发送消息，只有执行此事件的玩家才能看见复制代码若想在string中使用变量，则用以下格式:\"%{test}%\",如:\nset {test} to \"hahaha\"复制代码\n在学会了以上知识后，我相信你已经可以看懂一些简单的代码了\n\non rightclick on grass, dirt or soil with any hoe:复制代码   当你看懂以上代码之后，你就可以进行下一步了\n\n\n\n   \nIF    \nIf实际上相当好理解，我们可以设置一个条件，如果这个条件是正确的就执行if下的内容\n如果是错误的就执行else中的内容\nelse可以不写\n<div style=\"text-align: left;\">if 条件:</div><div style=\"text-align: left;\">        动作</div><div style=\"text-align: left;\">else:</div><div style=\"text-align: left;\">        动作</div><div style=\"text-align: left;\">\n</div>复制代码举例:\n<div style=\"text-align: left;\">on Right click:</div><div style=\"text-align: left;\">        if block is stone:</div><div style=\"text-align: left;\">                send \"你右键了一块石头！\"</div><div style=\"text-align: left;\">        else:</div><div style=\"text-align: left;\">                send \"你没有右键一块石头！\"</div>复制代码\n直接写条件虽然效果上跟if一样，但是当你需要else的时候，你就必须写if了。【强烈推荐写if，不要为了省一点事情而不写if！可以让你的程序结构分明，在将来修改时更加易懂！对变量命名同理，一定避免使用{a}、{b}之类的作为变量名字，推荐使用英文或者拼音或者缩写】\n\n\n\n\n\nloop相比if要稍微复杂一点，以下是主要结构\n<div style=\"text-align: left;\">loop <expression to loop>:  #loop 表达式               </div><div style=\"text-align: left;\">    <code>      #代码       </div>复制代码     那么loop究竟都可以循环些什么呢？\n指定多个方块的表达式指定多个玩家的表达式指定多个实体的表达式变量列表其他多个对象的表达式（如循环玩家背包）\n变量除了我们自己定义的{test}变量外，还有系统给定的变量例如这一个事件是玩家触发的，那么%player%就可以代表这个玩家的id\nloop也是如此\n%loop-block%%loop-player%%loop-entity%%loop-index%-%loop-value%分别对应上面讲述变量列表的两个对应值，loop在循环变量列表时，是从1-n循环\n使用\n同时loop还可以循环指定次数：\n<div style=\"text-align: left;\">broadcast \"目前在线玩家:\"</div><div style=\"text-align: left;\">loop all player:</div><div style=\"text-align: left;\">        broadcast \"%loop-player%\"</div>复制代码这样就可以输出所有在线玩家\n\n循环方块\n<div style=\"text-align: left;\">loop blocks in radius 5 around the player: #将半径为5的球体内的方块全部替换为实体</div><div style=\"text-align: left;\">        set loop-block to air</div>复制代码\n\n循环列表\n<div style=\"text-align: left;\">loop {name::*}:</div><div style=\"text-align: left;\">        if {name::%loop-index%} is \"xingchen\":</div><div style=\"text-align: left;\">                send \"你的名字%{name::%loop-index%}%,序号是%loop-index%\"</div><div style=\"text-align: left;\">                exit loop</div><div style=\"text-align: left;\">loop {name::*}:</div><div style=\"text-align: left;\">        if loop-value is \"xingchen\":</div><div style=\"text-align: left;\">                send \"你的名字%loop-value%,序号是%loop-index%\"</div><div style=\"text-align: left;\">                exit loop        </div>复制代码楼主在写完了一个变量之后，突然忘记了自己的名字是第几个了，怎么办呢？\n\n次数循环\n<div style=\"text-align: left;\">set {test} to 0</div><div style=\"text-align: left;\">loop 5 times:</div><div style=\"text-align: left;\">        add 1 to {test}</div><div style=\"text-align: left;\">send \"%{test}%\" #输出5</div>复制代码\n\n\n\n\n      While\n\n依然先展示基本结构\n<div style=\"text-align: left;\">while <condition>:</div><div style=\"text-align: left;\">        <code></div>复制代码示例代码\n<div style=\"text-align: left;\">set {_test} to 0</div><div style=\"text-align: left;\">                while {_test} is not 1:</div><div style=\"text-align: left;\">                        if player is dead:</div><div style=\"text-align: left;\">                                send \"啊你死了\"</div><div style=\"text-align: left;\">                                set {_test} to 1</div><div style=\"text-align: left;\">                        wait 1 second</div><div style=\"text-align: left;\">                        send \"你还没死那！\"</div>复制代码请小心使用while，操作不当会造成服务器卡死,个人不是很常用while，因为实在是有些鸡肋\n\n\n\n\n\n\n   \n如何建造一条命令  \n      终于到了这一步了！\n       首先我们要先看看官方给出的格式\n<div style=\"text-align: left;\">command /<指令名称> <参数类型>:</div><div style=\"text-align: left;\">       description: #描述</div><div style=\"text-align: left;\">       usage: #使用格式，必填参数缺失会显示这个</div><div style=\"text-align: left;\">　　permission: #所需权限节点</div><div style=\"text-align: left;\">　　permission message: #缺失权限的消息</div><div style=\"text-align: left;\">　　executable by: #由谁执行?(player、console、player and console)</div><div style=\"text-align: left;\">       aliases: #简写（如/home可以/h）多个使用,分割</div><div style=\"text-align: left;\">　　cooldown: <冷却时间> #执行冷却时间</div><div style=\"text-align: left;\">　　cooldown message: #冷却时输入指令显示什么</div><div style=\"text-align: left;\">　　cooldown bypass: #无视冷却的权限节点</div><div style=\"text-align: left;\">　　cooldown storage: <变量> #存储冷却时间的全局变量</div><div style=\"text-align: left;\">　　trigger:</div><div style=\"text-align: left;\">　　　　#代码</div><div style=\"text-align: left;\">#除了trigger其余均非必须</div>复制代码\n\n<参数类型> ：如果里面是player，那么这里就只能填写在线玩家id，如果错误的话就会输出usage里的内容，以此类推\n[<参数类型>]：这个参数是选填的\n设置默认可选参数：\n<div style=\"text-align: left;\">command /say [<text = \"默认\">]:</div><div style=\"text-align: left;\">        trigger:</div><div style=\"text-align: left;\">                set {_arg} to arg-1</div><div style=\"text-align: left;\">                send \"%{_arg}%\"</div>复制代码如果你使用/say，则会输出默认而不会报错那么如果我们想要调用参数，arg-1是你的第一个参数如上图所示，arg-2是你设置的第二个参数，以此类推\n\n函数Function\n\n\nsk其实本身就自带了一些参数，如abs(number) 他会返回你输入数字的绝对值\n<div style=\"text-align: left;\">set (_test) to abs(-1)</div><div style=\"text-align: left;\">send \"%{_test}%\" #结果为1</div>复制代码\n但是我们所要讲的就是自己自定义函数，那么为什么要这么做呢？\n你的程序可能会重复的使用一个功能，比如你写了一段属于自己的加密代码，但是每次加密你都需要把这段代码复制一遍，这会使你的代码又臭又长且阅读困难。如果使用函数，我们不仅可以优化可读性，还可以优化运行速度，这对于一个大的插件是极其重要的\n首先，是官方格式：\n<div style=\"text-align: left;\">function 函数名(参数名: 参数类型,参数名2: 参数类型2) :: 返回值类型:</div><div style=\"text-align: left;\">        #代码</div><div style=\"text-align: left;\">#当然了返回值类型可以不写</div><div style=\"text-align: left;\">function 函数名(参数名: 参数类型,参数名2: 参数类型2):</div><div style=\"text-align: left;\">        #代码</div><div style=\"text-align: left;\">#参数类型见变量</div>复制代码这里的参数，默认是临时变量，例如\n<div style=\"text-align: left;\">function test(s:integer,ss:integer) :: integer:</div><div style=\"text-align: left;\">        add {_s} to {_num}</div><div style=\"text-align: left;\">        add {_ss} to {_num}</div><div style=\"text-align: left;\">        return {_num}</div><div style=\"text-align: left;\">command /js [<integer>] [<integer>]:</div><div style=\"text-align: left;\">        trigger:</div><div style=\"text-align: left;\">                set {_num} to test(arg-1,arg-2)</div><div style=\"text-align: left;\">                send \"%{_num}%\"</div>复制代码返回的变量类型与返回值类型必须一致，同时整个函数将直接终止\n当不填写类型的时候可以用return终止函数而非stop\n\n好啦！实际上整个教程到这里就结束了，如果你真的全部都掌握了，你已经可以开始写一些插件了\n接下来的内容是一些个人心得,有什么问题可以在帖子下回复，如果在教程帖子中发现什么问题也请及时回复，我好进行纠正，如果我可以解决的话我会及时回复\n\n\n\n\n\n\n\n如何读懂语法库  \n首先附上语法库的地址https://skripthub.net/docs/\n举例：\n我想分割字符串?但是我不知道split的语法，怎么办呢?\n进入网站\n\n\n\n\nQQ截图20200227224933.png (100.82 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-27 22:50 上传\n\n\n\n\n左侧分别是六大语法类型，下面的Addons则是Sk插件本体和一些附属插件，点击即可筛选内容，所以我们筛选Skript本体，并且搜索Split我们可以打开网页翻译，快速查看每一个语法下的介绍，很显然第一个就是我们要找的了，同时我们确定split是一个表达式\n\n\n\n\nQQ截图20200227225252.png (14.81 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-27 22:53 上传\n\n\n\n\n<div style=\"text-align: left;\">(concat[enate]|join) %strings% [(with|using|by) [[the] delimiter] %string%] </div><div style=\"text-align: left;\">split %string% (at|using|by) [[the] delimiter] %string% </div><div style=\"text-align: left;\">%string% split (at|using|by) [[the] delimiter] %string%</div>复制代码这就是split的语法格式啦，Sk是一门偏向语言的编程语言，所以如果你看不懂，不妨扔到翻译软件翻一下。\n这里的[1|2]是让你从1或者2中选一个适应自习惯的，并且所有”[]“的内容都是可选的。“%%”中的内容则对应变量是讲的类型，需要与其对应。例如%string%我们就必须填写一个字符串不能写数字，可以是“1”但不能是1。如果实在不行，那么我们可以点击查看范例，看看官方给的例子\n\n\n\n\nQQ截图20200227225545.png (2.5 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-27 22:55 上传\n\n\n\n\n通过第二个我们可以看出split的用法\n<div style=\"text-align: left;\">on join:</div><div style=\"text-align: left;\">        delete {login.%player%}</div><div style=\"text-align: left;\">        if {joined.%player%} is set:</div><div style=\"text-align: left;\">                send \"请输入/login <密码>登录\"</div><div style=\"text-align: left;\">                set player's walk speed to 0</div><div style=\"text-align: left;\">                while {login.%player%} is not set:</div><div style=\"text-align: left;\">                        add 1 to {_time.%player%}</div><div style=\"text-align: left;\">                        wait 1 second</div><div style=\"text-align: left;\">                        if {_time.%player%} is 10:</div><div style=\"text-align: left;\">                                exit loop</div><div style=\"text-align: left;\">                if {login.%player%} is not set:</div><div style=\"text-align: left;\">                        kick player because \"给你的登陆时间已经过了！\"</div><div style=\"text-align: left;\">        else:</div><div style=\"text-align: left;\">                send \"请输入/register <密码> <密码>注册\"</div><div style=\"text-align: left;\">                set player's walk speed to 0</div><div style=\"text-align: left;\">                set {_time.%player%} to 0</div><div style=\"text-align: left;\">                while {login.%player%} is not set:</div><div style=\"text-align: left;\">                        add 1 to {_time.%player%}</div><div style=\"text-align: left;\">                        wait 1 second</div><div style=\"text-align: left;\">                        if {_time.%player%} is 20:</div><div style=\"text-align: left;\">                                exit loop</div><div style=\"text-align: left;\">                if {login.%player%} is not set:</div><div style=\"text-align: left;\">                        kick player because \"给你的注册时间已经过了！\"</div><div style=\"text-align: left;\">on break:</div><div style=\"text-align: left;\">        if {login.%player%} is not set:</div><div style=\"text-align: left;\">                cancel event</div><div style=\"text-align: left;\">on right click:</div><div style=\"text-align: left;\">        if {login.%player%} is not set:</div><div style=\"text-align: left;\">                cancel event</div><div style=\"text-align: left;\">command /login <string>:</div><div style=\"text-align: left;\">        usage: \"使用/login <你的密码>来登录!\"</div><div style=\"text-align: left;\">        aliases: /l</div><div style=\"text-align: left;\">        trigger:</div><div style=\"text-align: left;\">                if {login.%player%} is set:</div><div style=\"text-align: left;\">                        send \"你已经登陆过了\"</div><div style=\"text-align: left;\">                        stop</div><div style=\"text-align: left;\">                if {joined.%player%} is not set:</div><div style=\"text-align: left;\">                        send \"你还没注册呢！\"</div><div style=\"text-align: left;\">                        stop</div><div style=\"text-align: left;\">                set {_password.%player%} to yaml value \"%player%\" from file \"plugins\\Skript\\scripts\\mima.yml\"</div><div style=\"text-align: left;\">                if {_password.%player%} is arg-1:</div><div style=\"text-align: left;\">                        set {login.%player%} to 1</div><div style=\"text-align: left;\">                        set player's walk speed to 0.1</div><div style=\"text-align: left;\">                        send \"登陆成功！\"</div><div style=\"text-align: left;\">                        stop</div><div style=\"text-align: left;\">                else:</div><div style=\"text-align: left;\">                        send \"密码错误!\"</div><div style=\"text-align: left;\">                        kick player because \"你输入了错误的密码！\"</div><div style=\"text-align: left;\">command /register <string> <string>:</div><div style=\"text-align: left;\">        usage: \"使用/register <密码> <密码>来登录\"</div><div style=\"text-align: left;\">        aliases: /reg</div><div style=\"text-align: left;\">        trigger:</div><div style=\"text-align: left;\">                if {joined.%player%} is set:</div><div style=\"text-align: left;\">                        send \"你已经注册过了！\"</div><div style=\"text-align: left;\">                        stop</div><div style=\"text-align: left;\">                if arg-1 is arg-2:</div><div style=\"text-align: left;\">                        set yaml value \"%player%\" from file \"plugins\\Skript\\scripts\\mima.yml\" to arg-1</div><div style=\"text-align: left;\">                        send \"**！\"</div><div style=\"text-align: left;\">                        set {joined.%player%} to 1</div><div style=\"text-align: left;\">                        set {login.%player%} to 1</div><div style=\"text-align: left;\">                        set player's walk speed to 0.1</div><div style=\"text-align: left;\">                else:</div><div style=\"text-align: left;\">                        send \"你输入的两次密码不一样！\"</div>复制代码\n[/spoiler]\n\n\n那么本贴教程到这里就全部结束了！基本上都是一些自己的理解，如有不足请指出,以后有时间的会针对sk附属出教程。\n在闲暇的时候不妨点个收藏给个人气\n-2020/2/27\n\n\n\n",
    "replies": [
        {
            "author": "耀星Yao_Xing",
            "timestamp": 1582810860,
            "txt_content": "有点东西"
        },
        {
            "author": "15950373156",
            "timestamp": 1582812060,
            "txt_content": "有点东西？？？"
        },
        {
            "author": "落卡",
            "timestamp": 1582863960,
            "txt_content": "有点东西"
        },
        {
            "author": "Melt、",
            "timestamp": 1582867920,
            "txt_content": "11111111111"
        },
        {
            "author": "25000.www",
            "timestamp": 1582889880,
            "txt_content": "6666666666666"
        }
    ]
}