{
    "title": "关于Residence如何实现权限管理的问题",
    "author": "912628490",
    "replyCount": 6,
    "timestamp": 1583735820,
    "txt_content": " 本帖最后由 912628490 于 2020-3-9 14:52 编辑 \n\n感谢点击进来\n想问一下类似Residence、GriefPrevention等领地插件内部是如何实现对领地权限的控制 以及如何给予单个玩家权限的呢\n不是问命令操作，想知道内部逻辑，或者各位是否有更好的实现办法呢\n谢谢！\n\n在Github上找到了源码 我先看一遍不懂再来问 本帖暂时关闭 谢谢大家",
    "replies": [
        {
            "author": "China丶星辰",
            "timestamp": 1583736780,
            "txt_content": "66666666666666666666666666666666666666"
        },
        {
            "author": "PercyDan",
            "timestamp": 1583739420,
            "txt_content": "加个权限插件，推荐LuckPerms或Permissionsex"
        },
        {
            "author": "Karlatemp",
            "timestamp": 1583811360,
            "txt_content": "Residence使用flag控制玩家的操作权限，具体逻辑代码你可以看任意一个Residence监听\n\nResidence的flag只有在领地里生效\n\nres set flag，这个是领地的全局权限，存在领地的信息里面\n\nres pset player  这个是领地内单独为玩家设置权限\n\nflag权限搜索先后\n玩家在领地内有单独的特权(pset)  返回这个特权状态\n领地修改了flag状态(set)  返回领地flag状态\n返回默认状态，不过这个默认状态似乎是写死在代码里面的"
        },
        {
            "author": "912628490",
            "timestamp": 1583813280,
            "txt_content": "Karlatemp 发表于 2020-3-10 11:36\nResidence使用flag控制玩家的操作权限，具体逻辑代码你可以看任意一个Residence监听\n\nResidence的flag只有 ...\n好的 谢谢你的回复\n昨天看了源代码之后发现res也是用YAML储存的 我想用MYSQL 一直在建表上没想好"
        },
        {
            "author": "Karlatemp",
            "timestamp": 1583813580,
            "txt_content": "912628490 发表于 2020-3-10 12:08\n好的 谢谢你的回复\n昨天看了源代码之后发现res也是用YAML储存的 我想用MYSQL 一直在建表上没想好 ...\n可以这样\n\n领地数据表:\n领地名   flag名    flag值\n领地和flag名都是主键(双主键)\n\n玩家领地数据\n领地名  flag名  玩家uuid  flag值\n领地，flag名，玩家uuid三个一起形成3主键"
        },
        {
            "author": "912628490",
            "timestamp": 1583829180,
            "txt_content": "Karlatemp 发表于 2020-3-10 12:13\n可以这样\n\n领地数据表:\n非常感谢！\n我打算插件启动的时候就缓存所有数据 感觉领地-Flag-玩家一条条记录的话 要重复操作HashMap 以及批量清除玩家权限的时候对数据库的压力 担心影响效率"
        }
    ]
}