{
    "title": "[开这么长时间服第一次遇到]重金！TPS太低了，达到60人基本TPS就变成5了",
    "author": "1252503331",
    "replyCount": 21,
    "timestamp": 1559875320,
    "txt_content": "服务器核心:spigot1.13.2纯净生存服\n服务器TPS很不稳定，人一多就降TPS\n到60人的时候基本5FPS了\n特别奇怪的是，玩家聊天，丢东西，输入指令，基本零延迟\n但是射箭，杀怪，吃东西，卡的要命\n还有一个: 一旦变成了OP 输入指令就会卡的 一批  比如/tpa 就要卡2-3秒   普通玩家不受影响\n特诡异。\n服务器配置如下\n**鲁南的机房  30MB的带宽，占用都不高\n\n\n各种优化插件  neverlag  lagremover  都试过\n基本没用处 \n\n\n\n\nBGSADRW5BC4C)F@EE924V(Y.png (89.29 KB, 下载次数: 0)\n\n下载附件\n\n2019-6-7 10:41 上传\n\n\n\n\n\n\n\n\n\nMBQRB)ZRZ3RDA~[6C{H6[9H.png (19.75 KB, 下载次数: 0)\n\n下载附件\n\n2019-6-7 10:41 上传\n\n\n\n\n\n\n\n\n\n7EZ5P0GKVBH@6I`J24_XV88.png (19.64 KB, 下载次数: 0)\n\n下载附件\n\n2019-6-7 10:41 上传\n\n\n\n\n\n我Q1252503331\n希望有人可以帮助我解决！谢谢了\n\n\n\n\n",
    "replies": [
        {
            "author": "恋",
            "timestamp": 1559875320,
            "txt_content": " 本帖最后由 HTL9257 于 2019-6-7 11:43 编辑 \n1252503331 发表于 2019-6-7 11:32\n唉 不行 killall后还会重新生成\n在bukkit.yml里面\nspawn-limits:\n  monsters: 70\n  animals: 15\n  water-animals: 5\n  ambient: 15\n\n找到这个 一般把怪物monsters 和动物 animals 减少  这是实体刷新率 对应一个玩家刷新多少个实体 \n你这个timings里面有5000多实体 当然扛不住的  另外如果有西瓜回收的话取消掉 并禁止掉西瓜片 不然西瓜机卡服可是卡到爆炸"
        },
        {
            "author": "恋",
            "timestamp": 1559875980,
            "txt_content": "更新下核心试试？ paper核心都不行么？\n然后看下timings  看看是什么在卡"
        },
        {
            "author": "Mr.阿冬",
            "timestamp": 1559876580,
            "txt_content": " 本帖最后由 mango2017 于 2019-6-9 16:04 编辑 \n\n看了一下您提供的信息，建议您清理下区块以及实体数量……\n这边建议您可以装一个【性能微调】插件，这个插件能有效并且智能地根据服务器来优化服务器的，在服务器Tps低于17的时候(可自定义在Tps低于多少时开始优化)主动优化主要是通过限制怪物生成数量、限制高频红石、卸载无意义的区块等等等，此插件可在论坛内搜索到\n"
        },
        {
            "author": "1252503331",
            "timestamp": 1559876640,
            "txt_content": "Mr.阿冬 发表于 2019-6-7 11:03\n看了一下您提供的信息，建议您清理下区块以及实体数量……\n这边建议您可以装一个【性能微调】插件，这个插 ...\ntimings 网址 https://timings.aikar.co/?id=c9bfab6160b74c21954368902b762ce2"
        },
        {
            "author": "Mr.阿冬",
            "timestamp": 1559876880,
            "txt_content": "新疆这里手机看不到外国网站，能不能截图"
        },
        {
            "author": "Mr.阿冬",
            "timestamp": 1559877000,
            "txt_content": "建议您在服务器输入/killall mobs 把所有实体清除以后看看，或者重启服务器(但是启动时间有点慢-不建议)"
        },
        {
            "author": "1252503331",
            "timestamp": 1559877000,
            "txt_content": "Mr.阿冬 发表于 2019-6-7 11:08\n新疆这里手机看不到外国网站，能不能截图\n"
        },
        {
            "author": "1252503331",
            "timestamp": 1559877120,
            "txt_content": ""
        },
        {
            "author": "1252503331",
            "timestamp": 1559877120,
            "txt_content": ""
        },
        {
            "author": "1252503331",
            "timestamp": 1559877180,
            "txt_content": ""
        },
        {
            "author": "1252503331",
            "timestamp": 1559877240,
            "txt_content": "Mr.阿冬 发表于 2019-6-7 11:10\n建议您在服务器输入/killall mobs 把所有实体清除以后看看，或者重启服务器(但是启动时间有点慢-不建议) ...\n服务器在线玩家较多，我怕会清理掉玩家的生物"
        },
        {
            "author": "Mr.阿冬",
            "timestamp": 1559877600,
            "txt_content": "……………… 那你告诉他们一下，然后清除掉后重新生成的，为了服务器流畅运行"
        },
        {
            "author": "1252503331",
            "timestamp": 1559878320,
            "txt_content": "唉 不行 killall后还会重新生成"
        },
        {
            "author": "Kinminy",
            "timestamp": 1559878980,
            "txt_content": "实体太多了，不清除生物的话就有点难受了\n另外可以根据下面这个贴里的优化，将实体的活跃范围减少以下贴内都有很多优化方法\nhttp://www.mcbbs.net/thread-478126-1-1.html"
        },
        {
            "author": "hua2hua",
            "timestamp": 1559879220,
            "txt_content": "neverlag不是有个限制实体的功能吗#限制实体总数量\nMobLimit:\n  Enable: true\n  #总实体数量超过设定则不再生成动物\n  Animal: 1500\n  #总实体数量超过设定则不再生成怪物\n  Monster: 2000\n  #区块怪物实体超过设定数量，刷怪笼不工作\n  SpawnerMobChunkNum: 6复制代码以及清道夫插件最后一行有一条可以限制实体，达到 1000 就清理\nlimit:\n  enabled: true\n  max: 1000\n  check-interval: 60\n  broadcast-message: '&6[&b清道夫&6] &a服务器超载, 共清理 &c+RemoveAmount &a实体!'\n  world-filter:\n  # - this_world <-This world 世界将不会清理\n  broadcast-removal: true\n  boat: true\n  falling-block: true\n  experience-orb: true\n  painting: false\n  projectile: true\n  item: true\n  itemframe: false\n  minecart: true\n  primed-tnt: true\n  item-filter:复制代码以及服务器有没有被压测的可能呢？"
        },
        {
            "author": "夜夜夜、",
            "timestamp": 1559881260,
            "txt_content": "其实上一个I7的CPU就好了"
        },
        {
            "author": "Mr.阿冬",
            "timestamp": 1559882340,
            "txt_content": " 本帖最后由 Tollainmear 于 2019-6-9 17:06 编辑 \n\n就用我给你说的【性能微调】插件吧！\n\n话说你贡献怎么是-3？？？腻害！"
        },
        {
            "author": "x_xingchen",
            "timestamp": 1559887440,
            "txt_content": "因为是纯净所以不存在什么好的优化方法，你目前u的性能完全没使用出来，建议换一下akarin的1.13.2多线程核心"
        },
        {
            "author": "520310",
            "timestamp": 1559903280,
            "txt_content": "6666666666666666"
        },
        {
            "author": "a1294790523",
            "timestamp": 1560008400,
            "txt_content": "服务器主线程是单线程运行，你这个情况是正常的\n从timing报告来看，是鲑鱼导致的问题。。。。\n试试换用paper核心？https://papermc.io/downloads"
        },
        {
            "author": "1252503331",
            "timestamp": 1560054540,
            "txt_content": "鲑鱼生物吗"
        }
    ]
}