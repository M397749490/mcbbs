{
    "title": "自定义Npc脚本X2",
    "author": "很咸的咸鱼",
    "replyCount": 2,
    "timestamp": 1594989420,
    "txt_content": " 本帖最后由 很咸的咸鱼 于 2020-7-18 07:38 编辑 \n\n1.12.2版本剩余百分之60血量释放 发title  XXXX释放 然后对最近几名玩家造成 失明 缓慢 持续造成伤害 持续5秒\n剩余百分之10血量释放 发title XXX释放 持续对4格内造成伤害  爆炸粒子 那种  持续3秒 ",
    "replies": [
        {
            "author": "Freeze_Dolphin",
            "timestamp": 1594989420,
            "txt_content": "var released = false;\nfunction damaged(e) {\n    var n = e.npc;\n    if (!released) {\n        if (n.getHealth() / n.getStats().getMaxHealth() <= 0.6) {\n            released = true;\n            let arr = n.getNearbyEntities​(event.npc.getPos(), 2, 1);\n            for (let i = 0, len = arr.length; i < len; i++){\n                var ety = arr[i];\n                n.executeCommand(\"/title \" + ety.getName() + \" reset\");\n                n.executeCommand(\"/title \" + ety.getName() +' title {\"text\":\"XXXX释放\"}');\n                ety.addPotionEffect(7, 5, 3, false);\n                ety.addPotionEffect(5, 5, 3, false);\n                ety.addPotionEffect(8, 5, 3, false); //这里使用凋零效果来持续造成伤害\n            }\n        }\n    } else {\n        if (n.getHealth() / n.getStats().getMaxHealth() <= 0.1) {\n            n.getWorld().spawnParticle(\"explosion\", n.getX(), n.getY(), n.getZ(), 0.5, 0.5, 0.5, 0.05, 2);\n            let arr = n.getNearbyEntities​(event.npc.getPos(), 4, 1);\n            for (let i = 0, len = arr.length; i < len; i++){\n                var ety = arr[i];\n                n.executeCommand(\"/title \" + ety.getName() + \" reset\");\n                n.executeCommand(\"/title \" + ety.getName() +' title {\"text\":\"XXXX释放\"}');\n                ety.addPotionEffect(8, 3, 8, false); //这里使用凋零效果来持续造成伤害\n            }\n        }\n    }\n}复制代码"
        },
        {
            "author": "很咸的咸鱼",
            "timestamp": 1595042700,
            "txt_content": "Freeze_Dolphin 发表于 2020-7-18 10:18\n谢谢哥！"
        }
    ]
}