{
    "title": "关于玩家打开自身背包的监听~大佬们，是时候展现技术了",
    "author": "诺凡克罗诺",
    "replyCount": 6,
    "timestamp": 1574845080,
    "txt_content": " 1.12.2版本的水龙头服务器，\n玩家打开自身背包(E键)不会触发监听器,不知道是它的bug还是开发者故意为之，\n这样就不能获得玩家打开自身背包的事件,\n好像没办法监听打开自身背包,\n各位大佬们有没有办法……\n\n// 能不能监听数据包……\n有大佬来给个办法吗\n\n[groupid=1511]Server CT[/groupid]",
    "replies": [
        {
            "author": "wolfonrhesky",
            "timestamp": 1574848380,
            "txt_content": "这个。。。背包是本地操作，解决方法只有写mod"
        },
        {
            "author": "1378495772",
            "timestamp": 1574848860,
            "txt_content": "应该可以监听这个，不确定\nhttps://wiki.vg/Protocol#Window_Items"
        },
        {
            "author": "逻网",
            "timestamp": 1575016800,
            "txt_content": "插个眼，等个大佬答案"
        },
        {
            "author": "1257375501",
            "timestamp": 1575608940,
            "txt_content": "根据MC界面的实现机制，无法做到监听。\n因为玩家背包的数据，是在玩家进入服务器就从服务端赋予到客户端的，并非像其他Inv一样是在打开的时候赋予数据。（可以通过quickbar一进服就可以看到物品充分说明这点）\n也就是说其实服务端在打开其他界面之前一直在开着每个玩家的背包，只是没有界面去显示它，楼主可以通过打印player.getOpenInventory().getType().toString()得到这个结果\n\n所以说玩家按了E键之后客户端并没有像服务端发送任何数据包（也就是说服务端根本不知道玩家打开了背包）\n玩家按了E键之后：客户端的操作是打开对应的GUI界面和对应的槽位响应位置\n服务端并没有任何操作，只是一直在实时的等待接收每一个槽位的数据包\n\n综上所述：要是想监听玩家打开背包，可以通过玩家点击了槽位之后得到的数据包(ClickEvent)，或者像二楼说的监听客户端E键，或者coremod暴力改MC源码自己发数据包"
        },
        {
            "author": "zyz_sunshine",
            "timestamp": 1576303680,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "RE_OVO",
            "timestamp": 1576333440,
            "txt_content": "楼上说的很有道理，确实不发包，但也不全对。\n在成就系统被更改前，有个叫\"打开背包\"的成就。当玩家打开背包时，会发送成就数据包，即使你已经达成这个成就还会发，所以可以监听那个数据包实现监听玩家打开背包。可惜的是，成就系统被更改了，忘记是哪个版本, 1.10/1.11? 改成了Advancement, 可惜啊, 1.8还能使用这个方法来监听。"
        }
    ]
}