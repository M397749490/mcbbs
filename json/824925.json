{
    "title": "玩家攻击判断",
    "author": "悠然学院",
    "replyCount": 9,
    "timestamp": 1540083120,
    "txt_content": "在玩家攻击时如何判断，玩家是否满足某种条件，如果不满足则无法攻击",
    "replies": [
        {
            "author": "2609848420",
            "timestamp": 1540086060,
            "txt_content": "语意不明\n请使用EntityDamageByEntityEvent监听器修改攻击事件\ne.getDamager()可以获取攻击实体用instanceof判断是否为玩家\ne.setCancelled(true);取消本次攻击"
        },
        {
            "author": "悠然学院",
            "timestamp": 1540087560,
            "txt_content": "2609848420 发表于 2018-10-21 09:41\n语意不明\n请使用EntityDamageByEntityEvent监听器修改攻击事件\ne.getDamager()可以获取攻击实体用instanceo ...\n如玩家攻击时判断该玩家是否满足条件，例如随便判断一行lore，如果不满足，则无法攻击，怎么搞"
        },
        {
            "author": "清华儒墨",
            "timestamp": 1540102380,
            "txt_content": "梦萍_云皓 发表于 2018-10-21 10:06\n如玩家攻击时判断该玩家是否满足条件，例如随便判断一行lore，如果不满足，则无法攻击，怎么搞 ...\nif(!(e.getDamager() instanceof Player)) return;\nif(condition) e.setCancelled(true);\n\n就是这样"
        },
        {
            "author": "耗子",
            "timestamp": 1540110180,
            "txt_content": "    @EventHandler\n    public void onPlayerAttack(EntityDamageByEntityEvent event) {\n        Entity entity = event.getDamager();\n        if(!(entity instanceof Player)) {\n            return;\n        }\n\n        Player player = (Player) entity;\n        for(ItemStack itemStack : player.getInventory()) {\n            if(!itemStack.hasItemMeta())\n                continue;\n\n            ItemMeta itemMeta = itemStack.getItemMeta();\n            if(!itemMeta.hasLore())\n                continue;\n\n            if(itemMeta.getLore().contains(\"可攻击\"))\n                return;\n        }\n\n        event.setCancelled(true);\n    }复制代码\n\n如果我的答案有帮助的话，请给我最高的评分或到爱发电支持我，让我为更多人回答编程问题，制作更多优秀作品。"
        },
        {
            "author": "悠然学院",
            "timestamp": 1540111500,
            "txt_content": "耗子 发表于 2018-10-21 16:23\n如果我的答案有帮助的话，请给我最高的评分或到爱发电支持我，让我为更多人回答编程问题，制作更多优秀作 ...\n小白看起来有点吃力，如果我打算被攻击的怪物名=“牛**”，则玩家无法攻击，那么这个代码应该怎样修改？"
        },
        {
            "author": "耗子",
            "timestamp": 1540114860,
            "txt_content": "梦萍_云皓 发表于 2018-10-21 16:45\n小白看起来有点吃力，如果我打算被攻击的怪物名=“牛**”，则玩家无法攻击，那么这个代码应该怎样修改？ ...    @EventHandler\n    public void onPlayerAttack(EntityDamageByEntityEvent event) {\n        Entity entity = event.getDamager();\n        if(!(entity instanceof Player)) {\n            return;\n        }\n\n        if(event.getEntity().getCustomName().equals(\"牛魔王\")) {\n            event.setCancelled(true);\n        }\n    }复制代码\n\n如果我的答案有帮助的话，请给我最高的评分或到爱发电支持我，让我为更多人回答编程问题，制作更多优秀作品。"
        },
        {
            "author": "悠然学院",
            "timestamp": 1540115160,
            "txt_content": "耗子 发表于 2018-10-21 17:41\n如果我的答案有帮助的话，请给我最高的评分或到爱发电支持我，让我为更多人回答编程问题，制作更多优秀 ...\n谢谢，搞明白了"
        },
        {
            "author": "2609848420",
            "timestamp": 1540119720,
            "txt_content": "梦萍_云皓 发表于 2018-10-21 10:06\n如玩家攻击时判断该玩家是否满足条件，例如随便判断一行lore，如果不满足，则无法攻击，怎么搞 ...\n语意不明\n写插件写了多长时间了 提这种问题...\nList<String> lore = player.getInventory().getItemInMainHand().getItemMeta.getLore(); //获取主手物品的Lore\ncontains()和equals()方**用吧 不多做详解"
        },
        {
            "author": "酷酷KuMc",
            "timestamp": 1547272740,
            "txt_content": "希望这能帮到你的忙\n\n@EventHandler\n public void onPlayerEntryBed(EntityDamageByEntityEvent e) {\n        if (e.getDamager() instanceof Player) {\n            // 玩家攻击\n        }\n}"
        }
    ]
}