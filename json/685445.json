{
    "title": "自己写的传送的插件的问题",
    "author": "ybw0014",
    "replyCount": 1,
    "timestamp": 1491638580,
    "txt_content": " 本帖最后由 FHC红石 于 2017-4-9 21:32 编辑 \n\n自己写了个传送的插件，在玩家使用传送指令后，有2秒的等待时间，然后才会传送。\n但是这样写的代码会报错。如下：\n[01:16:31] [Craft Scheduler Thread - 76/WARN]: Exception in thread \"Craft Scheduler Thread - 76\" \n[01:16:31] [Craft Scheduler Thread - 76/WARN]: org.apache.commons.lang.UnhandledException: Plugin Teleport v1.0 generated an exception while executing task 355\n        at org.bukkit.craftbukkit.v1_10_R1.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:56)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.IllegalStateException: Asynchronous player tracker clear!\n        at org.spigotmc.AsyncCatcher.catchOp(AsyncCatcher.java:14)\n        at net.minecraft.server.v1_10_R1.EntityTrackerEntry.clear(EntityTrackerEntry.java:555)\n        at net.minecraft.server.v1_10_R1.EntityTracker.untrackPlayer(EntityTracker.java:242)\n        at net.minecraft.server.v1_10_R1.PlayerList.moveToWorld(PlayerList.java:560)\n        at org.bukkit.craftbukkit.v1_10_R1.entity.CraftPlayer.teleport(CraftPlayer.java:486)\n        at org.bukkit.craftbukkit.v1_10_R1.entity.CraftEntity.teleport(CraftEntity.java:226)\n        at mygunclub.plugins.teleport.Utils.SpawnUtil.Spawn(SpawnUtil.java:21)\n        at mygunclub.plugins.teleport.Command.SpawnCommand$1.run(SpawnCommand.java:54)\n        at org.bukkit.craftbukkit.v1_10_R1.scheduler.CraftTask.run(CraftTask.java:71)\n        at org.bukkit.craftbukkit.v1_10_R1.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:53)\n        ... 3 more复制代码\n\n代码：\nint delay = Config.config.getInt(\"Teleport.delay\");\n        Location loc = p.getLocation(),locat=target.getLocation();\n        if(delay>0){\n            BukkitTask runTaskLaterAsynchronously = new BukkitRunnable(){\n                public void run() {\n                    if(TeleportUtil.cmpLocation(loc, p.getLocation())){\n                        tp(p,locat);\n                    }else\n                        p.sendMessage(BasicUtil.errorMsg(\"传送已取消.\"));\n                }\n            } .runTaskLaterAsynchronously(plugin, 20 * delay);\n        }else \n            tp(p,target.getLocation());复制代码\n延时2秒传送出了问题，但是直接传送没问题。\n求解决方案",
    "replies": [
        {
            "author": "ybw0014",
            "timestamp": 1491638640,
            "txt_content": "哇我标题填错了"
        }
    ]
}