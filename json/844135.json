{
    "title": "Bukkit | 扣Essentials的钱 成功返回true 失败返回false",
    "author": "虎水小骥",
    "replyCount": 5,
    "timestamp": 1549872540,
    "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽",
    "replies": [
        {
            "author": "1139365029",
            "timestamp": 1549875780,
            "txt_content": "这样：\nprivate Economy economy;复制代码RegisteredServiceProvider economyProvider = getServer().getServicesManager().getRegistration(Economy.class);\nthis.economy = ((Economy)economyProvider.getProvider());复制代码\ndouble money = this.economy.getBalance(player.getName());//获取钱数\nthis.economy.withdrawPlayer(player.getName(), money);//扣钱复制代码\n需要Vault作为前置"
        },
        {
            "author": "虎水小骥",
            "timestamp": 1549876560,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "虎水小骥",
            "timestamp": 1549877160,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "Lss233",
            "timestamp": 1549878360,
            "txt_content": " 本帖最后由 Lss233 于 2019-2-11 17:50 编辑 \n虎水小骥 发表于 2019-2-11 17:26\n这个返回的是EconomyResponse啊xxx\n我再补充一下@1139365029   dalao的回复吧，\n\n这位同学，\nBukkit#dispatchCommand方法是调用命令。如果命令执行成功，当然返回true啦。\n\n关于加钱和扣钱这样的经济操作，\n你可以认真了解一下VaultAPI。因为也许服务器不使用Essentials插件作为经济系统呢？\nVault集成了常见的经济系统插件，还有权限和聊天的集成，操作起来比较方便，说不定你将来的插件开发中也会用到。\n\n对于withdrawPlayer的返回值，可以参考一下下面的代码。\nEconomyResponse response = this.economy.withdrawPlayer(player.getName(), money);\nif(response.transactionSuccess()){\n  // 扣钱成功\n} else {\n // 扣钱失败\n}复制代码\n\nVaultAPI还有这么两个方法：\nthis.economy.depositPlayer(player, 数量); // 给玩家钱\nthis.economy.has(player, 数量); // 判断玩家是否有这么多钱复制代码\n\nMCBBS上关于VaultAPI的翻译：[[/]]Minecraft插件百科——VaultAPI 翻译\n\n---\n如果你仅仅是想从Essentials的经济系统里进行存钱和取钱操作，可以用下面的方法：\n* 记得先将Essentials插件作为依赖\nEconomy.add(玩家名, 数量); // 加钱\nEconomy.divide(玩家名, 数量); // 减钱\nEconomy.getMoney(玩家名); // 获取玩家的钱数复制代码值得注意的是，Essentials提供的加钱和减钱方法是没有返回值的。\n不过我们可以通过比较在加钱/减钱操作前后的玩家钱数来判断我们的操作是否成功。\n\n\n关于Essentials在经济系统上的API参考这里：Essentials Economy/API"
        },
        {
            "author": "虎水小骥",
            "timestamp": 1549878540,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        }
    ]
}