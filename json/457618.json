{
    "title": "浅谈选择器以及选择器参数",
    "author": "pca006132",
    "replyCount": 22,
    "timestamp": 1434776580,
    "txt_content": " 本帖最后由 pca006132 于 2016-11-12 16:06 编辑 \n\n目标选择器\n用途\n命令很多时候是需要针对实体去执行的，比如/tp。如果你使用玩家名来指定传送的玩家，比如/tp pca006132 0 5 0，你就需要针对每个玩家写一个命令，这方法在很多情况下是不可能使用的，因为我们不一定会知道被传送的玩家是谁，而且就算知道所有玩家，我们也需要举出所有的可能(穷举)，不然就有些玩家无法传送，这样做需要的命令数就会非常多。除此之外，如果我们这样做，我们就无法传送玩家以外的实体了，所以穷举玩家名的方法是接近不可能的。\n所以，在针对实体执行命令的情况下，我们通常会使用目标选择器。\n选择器的用途，就是根据某些条件(用选择器参数指定)来选择实体，所以选择到的数量可以是没有/一个/多个。\n\n格式\n  @选择器名称[参数=值]\n参数名称描述选择器名称决定选择器行为参数额外选择条件。不一定要存在，但如果存在一个或多个参数则必须用方括号括住，并且以逗号分隔开不同的参数(所有符号都是英文符号，如,和[])值参数所对应的数值，用来确定参数所对应的数据，与参数结合使用来选择实体。*注: 每个参数只能出现一次\n选择器名称\n名称描述p最近的玩家(type参数在此无效)a全部玩家(包括死去的玩家, type参数在此无效)r随机实体（默认为玩家）e所有实体（包括玩家）参数\n格式： 参数名=数值\n文字类的数值前加上!则代表选择所有非该数值的目标\n名称描述x,y,z以该坐标作为判定的起始点(默认为执行坐标)\n比如你填写x=1,y=1，而你执行命令的坐标是x=5,y=5,z=5，那么那个判定的起始点就是x=1,y=1,z=5\n如果只是填写其中一个/两个参数，剩下的就会默认为执行坐标(比如x=5，而执行坐标是100 5 200，那么那个判定的起始点就是 5 5 200)r,rm离判定的起始点的距离 (r就是判定区域的半径，rm就是不包括在判定区域内的圆形半径)\n比如r=5就是选择所有在5格范围内的实体，rm=5就是选择所有5格范围外的实体\n比如@p[r=10,rm=3]就是离判定的起始点的距离小于等于10米，大于3米的最近玩家m玩家的游戏模式\n0=生存，1=创造，2=冒险，3=旁观c数量\n这个是根据选择顺序来选择的\n正数的话就是选择最先选择到的n个实体，负数就是选择最后选择到的n个实体\n所以请参见下方的选择优先规则\n比如@e[c=5]就是最近的5个实体，@e[c=-5]就是最远的5个实体l,lm经验等级，l是小于等于，lm是大于等于score_目标该目标的分数范围（小于等于）score_目标_min该目标的分数范围（大于等于）team队伍名称(可以使用!表示不等于, 如team=!blue就是选择不在blue队伍里的)\nteam= 就是代表没有队伍的实体(比如@e[team=])\nteam=!就是代表有队伍的实体name实体的名称(可以使用!表示不等于, 如name=!pca就是选择名称不是pca的实体)dx,dy,dz长方体的范围\n由起始点延伸出去（dx就是沿着x轴延伸的格数，如此类推。正数就向正的方向，负数就向负的方向，范围必定是完整的格子，没有任何偏移，即使执行位置不是整数）的范围内的实体\n*注意: 只要实体的碰撞箱接触到这范围就会被选中，而不是看其坐标\nrx,rxm实体垂直朝向(看的方向)\n0：水平；-90：向上；90：向下\nrx：最大的角度；rxm：最小的角度ry,rym实体水平朝向(看的方向)\n0：+Z方向；90：-X方向；180（-180）：-Z方向；-90：+X方向\n(可以使用大于180的度数)\nry：最大的角度；rym：最小的角度(如ry=50, rym=0就是50度的范围；ry=0, rym=50就是310度的范围)\ntype实体种类(所有summon的实体种类+Player。可以使用!表示不等于，如type=!Player就是所有不是玩家的实体)\n type=!LightningBolt则代表所有类型的实体(对@r相当有用)tag选择拥有此标签的实体，\n在数值前添加\"!\"将只选择不拥有此标签的实体，\n提供空的标签名将选择所有没有标签的实体，\n只填写“!”将选择任何拥有标签的实体。\n注意: 只能检查一个tag接受字符\n选择器只接受某些字符，如果有不接受的字符则会当作玩家名\n部分接受字符(不包括空格)选择器参数, 0-9a-z A-Z = ! _ -选择器参数数值0-9 a-z A-Z _ -选择器参数名称0-9 a-z A-Z _注:\n如果选择器参数里出现了不接受的字符，游戏会把它视为玩家名称\n如果数值里出现其他符号，整个参数（参数名称=值）以及后方的所有参数都会被无视\n如果参数名称里出现其他符号，整个参数（参数名称=数值）以及后方的所有参数都会被无视\n如果那个数值是数字类的（如x/y/z等等）, 而你填了非数字的东西进去，它会把这个参数无视\n空间限制\n如果选择器里有任何关于坐标的参数（比如r/rm/dx），那个参数的作用范围就是执行的世界(其他世界的不会被选择到)\n如果那个选择器里同时有dx/dy/dz和r/rm，那么选择到的范围就是dx/dy/dz和r/rm重叠的范围\n如果那个选择器里有dx/dy/dz任何一个/两个，那么剩余的会默认为0\n\n选择顺序\n选择器会优先选择在执行的世界的实体/玩家(先选择最近的实体，当那些实体的距离一样时，它就会优先选择存在最久的)，然后就是别的世界距离你现在坐标最近的实体\n\n常见错误\n选择器中有不接受的字符，比如中文重复的选择器参数，比如两个type以为score_目标名称=数值代表选择分数=数值的实体，然而事实是选择分数小于等于数值的实体大小写/全型半型错误。实际上那些参数的名称都是小写，而且选择器只支持半型的少数字符，而那些数值也是大小写敏感的把实体NBT当作选择器参数一样写，然而选择器参数就那几个，NBT并不是选择器参数，选择器参数也不是NBT以为物品名称就是它扔出来之后的名称，然而并不是(原因:物品名称的NBT是{Item:{tag:{display:{Name:\"名称\"}}}}，而实体名称的NBT是{CustomName:\"名称\"))逻辑相关错误，比如在执行这个指令的时候分数不可能在指定范围内@a写成@e[type=Player]，或者是@p写成@a[c=1]。严格来说并不是错误，然而这个是不好的习惯\n因为这样子你的命令可读性就会减低，而且那个命令长度会增加，不好写开括号之后需要关括号，比如@e[type=ArmorStand.r=3就会判断为@e，相差会很远\n\n例子\n选择一个距离执行点5格以外，最近的实体\n@e[rm=5,c=1]复制代码选择所有目标(objective) X分数大于50、小于100，目标Y分数大于等于-200，小于等于0，目标Z分数等于200的实体\n@e[score_X_min=51,score_X=99,score_Y_min=-200,score_Y=0,score_Z_min=200,score_Z=200]复制代码[groupid=546]Command Block Logic[/groupid]",
    "replies": [
        {
            "author": "捌柒",
            "timestamp": 1434776820,
            "txt_content": "还真的是浅谈，有复杂点的应用吗"
        },
        {
            "author": "chyx",
            "timestamp": 1437047940,
            "txt_content": "r的球心会因为加x或y或z改 那么如果只加了其中的一个或两个球心会到哪里？"
        },
        {
            "author": "爱心魔王FHC",
            "timestamp": 1437048360,
            "txt_content": "如果@r可以用type，那么@r应该是：选择随机的一个实体"
        },
        {
            "author": "chyx",
            "timestamp": 1437048480,
            "txt_content": "FHC红石 发表于 2015-7-16 20:06\n如果@r可以用type，那么@r应该是：选择随机的一个实体\n是一种"
        },
        {
            "author": "pca006132",
            "timestamp": 1437050520,
            "txt_content": "chyx 发表于 2015-7-16 19:59\nr的球心会因为加x或y或z改 那么如果只加了其中的一个或两个球心会到哪里？ ...\n会因为x/y/z而改变\n如果只是写了1/2个x/y/z，那么那个执行坐标的x/y/z就会改变，而其他坐标这不会更改\n比如说你原本的坐标是1 2 3，选择器是@e[x=5,r=0]，那么就是选择距离5 2 3 不足一格距离的实体"
        },
        {
            "author": "chyx",
            "timestamp": 1437052320,
            "txt_content": "pca006132 发表于 2015-7-16 20:42\n会因为x/y/z而改变\n如果只是写了1/2个x/y/z，那么那个执行坐标的x/y/z就会改变，而其他坐标这不会更改\n比 ...\n你可以写下每个选择器的发起者是谁\n比如tp @ @ 第二个选择器是相对于第一个的 第一个是相对于cb/人的（记得好像是）\n而stats的计分板的主人却是暂时不用的 直接把那一段当做文本存在实体/牌子/cb上 有命令激活了再分析选择器（同记得好像是）\n把这个写下吧"
        },
        {
            "author": "chyx",
            "timestamp": 1437730860,
            "txt_content": "漫长的一天\n你写的怎么样了？"
        },
        {
            "author": "pca006132",
            "timestamp": 1437730980,
            "txt_content": "chyx 发表于 2015-7-24 17:41\n漫长的一天\n你写的怎么样了？\n改ing\n然而文笔和排版不好，没有什么人看QAQ"
        },
        {
            "author": "chyx",
            "timestamp": 1441953300,
            "txt_content": "如果那个选择器里同时有dx/dy/dz和r/rm，那么r/rm会被忽略\n我这里可以共存"
        },
        {
            "author": "chyx",
            "timestamp": 1467055320,
            "txt_content": "新出的tag可以多个\n\n\n\n话说@a能选中死后没来得及点respawn的人\n\n但@e不能"
        },
        {
            "author": "655433",
            "timestamp": 1467160500,
            "txt_content": "6666666666666666666"
        },
        {
            "author": "Sssss...",
            "timestamp": 1469679660,
            "txt_content": "这些Wiki上基本都有。"
        },
        {
            "author": "Halcyon_Suoh",
            "timestamp": 1469682960,
            "txt_content": "是啊是啊，基本都有，然而这只pcc搬过来加点细节科（shui普（tie下岂不美哉？"
        },
        {
            "author": "lrf8643",
            "timestamp": 1480318860,
            "txt_content": "很有用，收藏了。锁视角，安全屋什么的都可以实现了。"
        },
        {
            "author": "Green_stone",
            "timestamp": 1485229080,
            "txt_content": "有没有探测玩家剩余生命的选择器？"
        },
        {
            "author": "LingYouuu",
            "timestamp": 1485229380,
            "txt_content": "谁说不能两个type的，两个都是type=！XXX就行"
        },
        {
            "author": "pca006132",
            "timestamp": 1485265020,
            "txt_content": "Green_stone 发表于 2017-1-24 11:38\n有没有探测玩家剩余生命的选择器？\n记分板 Health判据"
        },
        {
            "author": "pca006132",
            "timestamp": 1485265920,
            "txt_content": "袁哥@神 发表于 2017-1-24 11:43\n谁说不能两个type的，两个都是type=！XXX就行\n那你就试试呗，不行的"
        },
        {
            "author": "LingYouuu",
            "timestamp": 1485308460,
            "txt_content": "pca006132 发表于 2017-1-24 21:52\n那你就试试呗，不行的\n早都试过了，你在CB里打/testfor @e[type=!cow,type=!bat]看看行不行"
        },
        {
            "author": "爱心魔王FHC",
            "timestamp": 1485344580,
            "txt_content": "常见错误最后一条选择器中的,写成了."
        },
        {
            "author": "fuckwezz",
            "timestamp": 1549024680,
            "txt_content": "能发下基础的指令码qwq"
        },
        {
            "author": "fuckwezz",
            "timestamp": 1549024680,
            "txt_content": "能发下基础的指令码"
        }
    ]
}