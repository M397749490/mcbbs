{
    "title": "为何Minecraft 服务端只能单线程？",
    "author": "亓憩",
    "replyCount": 8,
    "timestamp": 1429837680,
    "txt_content": "众所周知Mc的处理只是单线程的。\n是因为我们的服务端都是单线程的吗？\n官方的正版服务器是否也是单线程?\n欢迎大家讨论\n",
    "replies": [
        {
            "author": "咕噜and呼噜",
            "timestamp": 1429967820,
            "txt_content": "表示没人看得懂\n\n\n"
        },
        {
            "author": "jiongjionger",
            "timestamp": 1429968540,
            "txt_content": "主线程（Tick Loop）是单线程的，如实体的运算、方块的破坏、放置、作物的生长、红石事件、插件的各种Event。聊天和网络的通讯部分是异步多线程的，Spigot的区块加载是异步多线程的，Spigot的一些分支还实现了光照运算、流水运算、区块生成的异步多线程。\n\n为何只能单线程，是因为存在同步性，也就是线程安全。例如你放置方块后破坏这个方块，这是有次序之分的，如果放置和破坏方块是异步多线程的，如果存在延迟。很可能在服务器看来破坏方块在前，放置方块在后。那么结果就是方块放置了，你却捡到了这个方块的掉落物，相当于刷了一个方块。\n\n异步多线程也能保证线程安全，但是难度比单线程大不少，而且性能不一定就比单线程要高。目前Spigot这些服务端都是在官方服务端反编译的基础上打Patch来优化性能和增加功能、API。如果官方服务端没有实现全异步多线程，第三方要实现，是非常非常非常困难的，即便实现了，也很可能非常不稳定或者性能还不如单线程。"
        },
        {
            "author": "Minecraftian",
            "timestamp": 1429971300,
            "txt_content": "jiongjionger 发表于 2015-4-25 21:29\n主线程（Tick Loop）是单线程的，如实体的运算、方块的破坏、放置、作物的生长、红石事件、插件的各种Event ...\n好专业。"
        },
        {
            "author": "亓憩",
            "timestamp": 1429973760,
            "txt_content": "jiongjionger 发表于 2015-4-25 21:29\n主线程（Tick Loop）是单线程的，如实体的运算、方块的破坏、放置、作物的生长、红石事件、插件的各种Event ...\n很赞。"
        },
        {
            "author": "亓憩",
            "timestamp": 1429974180,
            "txt_content": "jiongjionger 发表于 2015-4-25 21:29\n主线程（Tick Loop）是单线程的，如实体的运算、方块的破坏、放置、作物的生长、红石事件、插件的各种Event ...\n那么cauldron是基于Spigot的吧？、\n他是多线程嘛？"
        },
        {
            "author": "mcjava",
            "timestamp": 1429978740,
            "txt_content": "不明觉厉，表示服务器方面了解少"
        },
        {
            "author": "西瓜DADA",
            "timestamp": 1430000340,
            "txt_content": "没看懂什么意思"
        },
        {
            "author": "jiongjionger",
            "timestamp": 1430011200,
            "txt_content": "亓憩 发表于 2015-4-25 23:03\n那么cauldron是基于Spigot的吧？、\n他是多线程嘛？\nMCPC+相当于是Spigot做了一些优化（不装MOD的话性能差不多）的基础上装了forge。\n所以MCPC+的主线程也是单线程的。"
        }
    ]
}