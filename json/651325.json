{
    "title": "[管理][开源]NBTConfig —— 指令增删改NBT，拔刀剑服务器福利[0.0.1beta]",
    "author": "qweyouke",
    "replyCount": 42,
    "timestamp": 1480406640,
    "txt_content": " 本帖最后由 1582952890 于 2017-9-17 11:23 编辑 \n\n一些没用的话\n啊，新人来露个面，一直看着各位大神发布各种牛逼的插件，一直心有向往，现在终于可以发布自己的插件了，虽然很小，不过很实用。 作为一个专攻拔刀剑的腐竹，一直很纠结一个问题，相信会玩拔刀剑的小伙伴都知道，拔刀剑放入铁毡改名后可以增加最大攻击力，但是在放入铁毡后突然服务器崩溃了(或各种需要放入一个临时box的时候崩溃)，再次进入游戏时放在铁毡里面的刀就没了(放其他任何东西也一样)，永远的没了。。。然后玩家就会来找腐竹赔偿。所以我就想找一个可修改NBT直接增加拔刀剑RepairCounter属性的插件，这样玩家可以直接点击牌子，扣除经验值，然后直接在当前RepairCounter值的基础上加1，期间试过PowerNBT，可是这个插件也只能直接设置固定的NBT，而不能做拔刀剑升级。所以最后找遍论坛都没有。  所以痛定思痛下，做出了这个插件，之前在mcbbs上拿了不少好插件，现在也来造福一下大众，哈哈。\n\n下载附件\n\n\n\nNBTConfig-0.0.1beta.jar\n(3.54 KB, 下载次数: 1022)\n\n\n\n2016-11-29 15:54 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n配置文件\n无\n\n\n权限\nNBTConfig.admin 可使用所有nc指令\n\n指令\n\n\n\n\n\nQQ图片20161129155350.png (42.41 KB, 下载次数: 87)\n\n下载附件\n\n2016-11-29 16:00 上传\n\n\n\n\n\n\n\n\n效果图\n\n\n\n\n\n\nQQ图片20161129160920.png (14.77 KB, 下载次数: 49)\n\n下载附件\n\n2016-11-29 16:11 上传\n\n\n\n\n\n\n\n\n\n\n\nQQ图片20161129160149.png (24.85 KB, 下载次数: 41)\n\n下载附件\n\n2016-11-29 15:59 上传\n\n\n\n\n\n\n\n\n\n\n\nQQ图片20161129160212.png (83.53 KB, 下载次数: 32)\n\n下载附件\n\n2016-11-29 16:10 上传\n\n\n\n\n\n\n\n\n\n\n\nQQ图片20161129160801.png (21.57 KB, 下载次数: 44)\n\n下载附件\n\n2016-11-29 16:10 上传\n\n\n\n\n\n\n\n\n\n\n\nQQ图片20161129160812.png (64.53 KB, 下载次数: 36)\n\n下载附件\n\n2016-11-29 16:10 上传\n\n\n\n\n\n\n\n\n\n最后开源：\npackage xxiong.plugin.main;\n\nimport net.minecraft.server.v1_7_R4.NBTBase;\nimport net.minecraft.server.v1_7_R4.NBTTagCompound;\n\nimport org.bukkit.ChatColor;\nimport org.bukkit.Material;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.command.ConsoleCommandSender;\nimport org.bukkit.craftbukkit.v1_7_R4.inventory.CraftItemStack;\nimport org.bukkit.entity.Player;\nimport org.bukkit.inventory.ItemStack;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Main extends JavaPlugin {\n\n        @Override\n        public boolean onCommand(CommandSender sender, Command command,\n                        String label, String[] args) {\n                if (label.equals(\"nbtconfig\") || label.equals(\"nc\")) {\n                        if (sender instanceof Player) {\n                                Player player = (Player) sender;\n                                if (player.hasPermission(\"NBTConfig.admin\") || player.isOp()) {\n                                        ItemStack item = player.getItemInHand();\n                                        if (item != null && item.getType() != Material.AIR) {\n                                                this.NBTHandle(player, item, args);\n                                        }\n                                } else {\n                                        this.sendMsg(player, \"&c你没有权限使用这个指令\");\n                                }\n                        } else {\n                                ConsoleCommandSender console = (ConsoleCommandSender)sender;\n                                console.sendMessage(\"无法在控制台使用这个指令\");\n                        }\n                        return true;\n                }\n                return false;\n        }\n\n        private void NBTHandle(Player player, ItemStack item, String[] args) {\n                if (args == null || args.length < 2 || args[0] == null\n                                || args[1] == null) {\n                        this.showHelp(player);\n                        return;\n                }\n                String cmd = args[0];\n                String key = args[1];\n                String value = null;\n                if (args.length > 2 && !args[2].equals(\"\")) {\n                        value = args[2];\n                }\n\n                net.minecraft.server.v1_7_R4.ItemStack NMSItem = CraftItemStack\n                                .asNMSCopy(item);\n                NBTTagCompound nbt = NMSItem.getTag();\n                \n                if (cmd.equals(\"remove\") || cmd.equals(\"add\") || cmd.equals(\"set\")\n                                || cmd.equals(\"mus\")) {\n                        if (cmd.equals(\"remove\")) {\n                                nbt.remove(key);\n                        } else if (cmd.equals(\"add\") || cmd.equals(\"set\")\n                                        || cmd.equals(\"mus\")) {\n                                NBTBase nBase = nbt.get(key);\n                                if (cmd.equals(\"add\")) {\n                                        int baseValue = 0;\n                                        if (nBase != null) {\n                                                baseValue = Integer.valueOf(nBase.toString());\n                                        }\n                                        value = String.valueOf(baseValue + Integer.valueOf(value));\n                                } else if (cmd.equals(\"mus\")) {\n                                        int baseValue = 0;\n                                        if (nBase != null) {\n                                                baseValue = Integer.valueOf(nBase.toString());\n                                        }\n                                        value = String.valueOf(baseValue - Integer.valueOf(value));\n                                }\n                                byte typeId = 1;\n                                if (nBase != null) {\n                                        typeId = nBase.getTypeId();\n                                }\n//                                this.sendMsg(player, \"typeId:\"+typeId);\n                                switch (typeId) {\n                                case 1:\n                                        nbt.setInt(key, Integer.valueOf(value));\n                                        break;\n                                case 2:\n                                        break;\n                                case 3:\n                                        nbt.setInt(key, Integer.valueOf(value));\n                                        break;\n                                case 4:\n                                        nbt.setInt(key, Integer.valueOf(value));\n                                        break;\n                                case 5:\n                                        break;\n                                case 6:\n                                        break;\n                                case 7:\n                                        break;\n                                case 8:\n                                        nbt.setString(key, value);\n                                        break;\n                                default:\n                                        break;\n                                }\n                        }\n                        NMSItem.setTag(nbt);\n                        player.setItemInHand(CraftItemStack.asBukkitCopy(NMSItem));\n                } else {\n                        this.showHelp(player);\n                }\n                this.sendMsg(player, \"&6&lNBT处理完成\");\n        }\n\n        private void showHelp(Player player) {\n                this.sendMsg(player, \"&2/nc set key value\"\n                                + \" &b&l设置手上物品NBT 名为key 值为value\");\n                this.sendMsg(player, \"&2/nc add key value\"\n                                + \" &b&l设置手上物品NBT 名为key 值为key的原有value + value\");\n                this.sendMsg(player, \"&2/nc mus key value\"\n                                + \" &b&l设置手上物品NBT 名为key 值为key的原有value - value\");\n                this.sendMsg(player, \"&2/nc remove key\" + \" &b&l移除NBT\");\n        }\n\n        private void sendMsg(Player player, String msg) {\n                player.sendMessage(ChatColor.translateAlternateColorCodes('&', msg));\n        }\n\n        @Override\n        public void onEnable() {\n                super.onEnable();\n        }\n\n        @Override\n        public void onDisable() {\n\n        }\n\n}\n复制代码\n\n\n新手上路，本人扣扣 597272622\n希望有大神可以一起交流。\n第一次写插件，有些地方并没有完善，欢迎指出BUG\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "栀栀太坏了",
            "timestamp": 1480407840,
            "txt_content": "支持原创，很不错"
        },
        {
            "author": "qweyouke",
            "timestamp": 1480409040,
            "txt_content": "LMC_沫尘 发表于 2016-11-29 16:24\n支持原创，很不错\n谢谢"
        },
        {
            "author": "qq837958025",
            "timestamp": 1480414920,
            "txt_content": "有个NBTmod 可以修改拔刀剑材质 从而在游戏中 一把刀模型 可以修改无上限的材质（理应是可以有无限多的拔刀剑虽然模型不变但是刀的材质足以了，SA的话是可以修改的 自主创造新刀是可以的）"
        },
        {
            "author": "huangff",
            "timestamp": 1480415220,
            "txt_content": "支持！！"
        },
        {
            "author": "qweyouke",
            "timestamp": 1480420500,
            "txt_content": "qq837958025 发表于 2016-11-29 18:22\n有个NBTmod 可以修改拔刀剑材质 从而在游戏中 一把刀模型 可以修改无上限的材质（理应是可以有无限多的拔刀 ...\nnbtedit我已经装了，但是你没懂这个插件的意思，这个插件是为了更灵活的让玩家自己升级拔刀剑，减少铁毡的使用，铁毡不保存物品是个致命的问题"
        },
        {
            "author": "幻境雲達達",
            "timestamp": 1480431780,
            "txt_content": "大佬们都进代码圈了。"
        },
        {
            "author": "qweyouke",
            "timestamp": 1480469040,
            "txt_content": "XJue_DaDa 发表于 2016-11-29 23:03\n大佬们都进代码圈了。\n我是菜比"
        },
        {
            "author": "qq837958025",
            "timestamp": 1480471080,
            "txt_content": "qweyouke 发表于 2016-11-29 19:55\nnbtedit我已经装了，但是你没懂这个插件的意思，这个插件是为了更灵活的让玩家自己升级拔刀剑，减少铁毡 ...\n铁毡不保存物品如果退出不会丢出来就是登录插件的问题，这个问题早前我找人定制过插件 让铁毡如箱子一样"
        },
        {
            "author": "qq837958025",
            "timestamp": 1480471140,
            "txt_content": "qweyouke 发表于 2016-11-29 19:55\nnbtedit我已经装了，但是你没懂这个插件的意思，这个插件是为了更灵活的让玩家自己升级拔刀剑，减少铁毡 ...\n\nnbtedit 他是一个强大的mod，  至于怎么弄你自己慢慢研究吧！！"
        },
        {
            "author": "qweyouke",
            "timestamp": 1480475040,
            "txt_content": "qq837958025 发表于 2016-11-30 09:59\nnbtedit 他是一个强大的mod，  至于怎么弄你自己慢慢研究吧！！\n亲，你还是没懂是什么意思哦。NBTEdit确实是强大，想怎么改就怎么改。但是不可能让玩家自行使用这个MOD，我的需求是，拔刀剑的某个值能在当前基础上加1。而不是用nbtedit修改一个固定的值。是为了做拔刀剑升级的。"
        },
        {
            "author": "qq837958025",
            "timestamp": 1480498320,
            "txt_content": "qweyouke 发表于 2016-11-30 11:04\n亲，你还是没懂是什么意思哦。NBTEdit确实是强大，想怎么改就怎么改。但是不可能让玩家自行使用这个MOD， ...\n腐竹来完成，管tm的玩家=。="
        },
        {
            "author": "Yu_Jie_Kong",
            "timestamp": 1480512900,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "力挽狂澜99v",
            "timestamp": 1480863540,
            "txt_content": "是时候修改个万修刀来装装逼了。也方便了修刀！"
        },
        {
            "author": "镜钥钥",
            "timestamp": 1482474420,
            "txt_content": "建议把插件英文化，然后发给拔刀MOD作者\n网站没被墙。"
        },
        {
            "author": "jin7568866",
            "timestamp": 1485143460,
            "txt_content": "好插件 拿走了~~~~"
        },
        {
            "author": "SR_踮脚",
            "timestamp": 1486195560,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "sunmer",
            "timestamp": 1492249380,
            "txt_content": "插件很不错，主要是没有教程，关于杀敌，荣誉不知道怎么改"
        },
        {
            "author": "Goblins",
            "timestamp": 1493974260,
            "txt_content": "你这个插件不止这些功能，我根据指令还可以更改拔刀模型和材质，拔刀剑气颜色，无限耐久，等等但是仅能直接修改tag里的nbt，单独文件夹比如那些无神的无限幻刃不能指令改，powernbt不会用，楼主插件太贵了"
        },
        {
            "author": "Chin_Qin",
            "timestamp": 1493989740,
            "txt_content": "求支持能修改其他的，比如妖魂，和附魔"
        },
        {
            "author": "X_Soda",
            "timestamp": 1493993100,
            "txt_content": "加油哦@"
        },
        {
            "author": "Ye_Yang_Dada",
            "timestamp": 1494038220,
            "txt_content": "这个没有解决实际的问题，\n问题正如你所说，\n放入铁毡后拔刀会消失\n而最主要的就是因为铁毡和拔刀的问题\n楼主你想想有没有什么办法可以实际性的解决，\n玩传统拔刀剑的玩家都是用铁毡，不能说服务器搞独特吧"
        },
        {
            "author": "Mccraft-pepsi",
            "timestamp": 1496563440,
            "txt_content": "楼主，请问您的这款插件如何自定义拔刀剑的耐久的、伤害值、以及杀人数量？"
        },
        {
            "author": "霸者@南哥",
            "timestamp": 1496577780,
            "txt_content": "厉害了"
        },
        {
            "author": "tes20",
            "timestamp": 1496580240,
            "txt_content": "文哥赞⑦你"
        },
        {
            "author": "320238614",
            "timestamp": 1496658840,
            "txt_content": "留名，好插件，感谢楼主"
        },
        {
            "author": "qq1016464513",
            "timestamp": 1497230880,
            "txt_content": "啥意思啊？"
        },
        {
            "author": "Bright_C",
            "timestamp": 1502964060,
            "txt_content": "如何增加拔刀的杀敌呢"
        },
        {
            "author": "呆萌的龙言",
            "timestamp": 1509140340,
            "txt_content": "Goblins 发表于 2017-5-5 16:51\n你这个插件不止这些功能，我根据指令还可以更改拔刀模型和材质，拔刀剑气颜色，无限耐久，等等但是仅能直接 ...\n怎么设置无限耐久？"
        },
        {
            "author": "1+1=？",
            "timestamp": 1517122080,
            "txt_content": "请问拔刀剑的名字怎么修改啊？"
        },
        {
            "author": "1+1=？",
            "timestamp": 1517232300,
            "txt_content": "挺好用的，氪金服务器 的福利，杀敌数killCount，荣耀ProudSoul，重铸RepairCounter~~\n就是不知道怎么改拔刀剑的名字"
        },
        {
            "author": "timecb7",
            "timestamp": 1520585700,
            "txt_content": "为什么我一用铁砧   它就老是自动损坏"
        },
        {
            "author": "821399289",
            "timestamp": 1521807120,
            "txt_content": "如何修改拔刀杀敌数"
        },
        {
            "author": "弱鸡绿毛怪",
            "timestamp": 1522407480,
            "txt_content": "这个标题不对啊"
        },
        {
            "author": "2044805966",
            "timestamp": 1530157140,
            "txt_content": "良心作品啊，这下我服务器可以氪拔刀剑了{滑稽}"
        },
        {
            "author": "彩狗dalao",
            "timestamp": 1530162240,
            "txt_content": "谢谢楼主的原创插件\n支持一下"
        },
        {
            "author": "夏逆大大",
            "timestamp": 1538699520,
            "txt_content": "只能改锻造吗"
        },
        {
            "author": "1813818490",
            "timestamp": 1546923360,
            "txt_content": "非常赞!好实用的说"
        },
        {
            "author": "1747484670",
            "timestamp": 1560604740,
            "txt_content": "只有1.7.10的吗，作者是否弃坑了\n表示1.12.2的用不了哇"
        },
        {
            "author": "q501155804",
            "timestamp": 1564043880,
            "txt_content": "请问支持什么版本"
        },
        {
            "author": "ketikai",
            "timestamp": 1584968100,
            "txt_content": "顶一下 感谢开源 不懂编程的我可以参考着学了 为以后不迷路"
        },
        {
            "author": "TZJ1031",
            "timestamp": 1587710880,
            "txt_content": "package xxiong.plugin.main;import net.minecraft.server.v1_7_R4.NBTBase;import net.minecraft.server.v1_7_R4.NBTTagCompound;import org.bukkit.ChatColor;import org.bukkit.Material;import org.bukkit.command.Command;import org.bukkit.command.CommandSender;import org.bukkit.command.ConsoleCommandSender;import org.bukkit.craftbukkit.v1_7_R4.inventory.CraftItemStack;import org.bukkit.entity.Player;import org.bukkit.inventory.ItemStack;import org.bukkit.plugin.java.JavaPlugin;public class Main extends JavaPlugin {        @Override        public boolean onCommand(CommandSender sender, Command command,                        String label, String[] args) {                if (label.equals(\"nbtconfig\") || label.equals(\"nc\")) {                        if (sender instanceof Player) {                                Player player = (Player) sender;                                if (player.hasPermission(\"NBTConfig.admin\") || player.isOp()) {                                        ItemStack item = player.getItemInHand();                                        if (item != null && item.getType() != Material.AIR) {                                                this.NBTHandle(player, item, args);                                        }                                } else {                                        this.sendMsg(player, \"&c你没有权限使用这个指令\");                                }                        } else {                                ConsoleCommandSender console = (ConsoleCommandSender)sender;                                console.sendMessage(\"无法在控制台使用这个指令\");                        }                        return true;                }                return false;        }        private void NBTHandle(Player player, ItemStack item, String[] args) {                if (args == null || args.length < 2 || args[0] == null                                || args[1] == null) {                        this.showHelp(player);                        return;                }                String cmd = args[0];                String key = args[1];                String value = null;                if (args.length > 2 && !args[2].equals(\"\")) {                        value = args[2];                }                net.minecraft.server.v1_7_R4.ItemStack NMSItem = CraftItemStack                                .asNMSCopy(item);                NBTTagCompound nbt = NMSItem.getTag();                                if (cmd.equals(\"remove\") || cmd.equals(\"add\") || cmd.equals(\"set\")                                || cmd.equals(\"mus\")) {                        if (cmd.equals(\"remove\")) {                                nbt.remove(key);                        } else if (cmd.equals(\"add\") || cmd.equals(\"set\")                                        || cmd.equals(\"mus\")) {                                NBTBase nBase = nbt.get(key);                                if (cmd.equals(\"add\")) {                                        int baseValue = 0;                                        if (nBase != null) {                                                baseValue = Integer.valueOf(nBase.toString());                                        }                                        value = String.valueOf(baseValue + Integer.valueOf(value));                                } else if (cmd.equals(\"mus\")) {                                        int baseValue = 0;                                        if (nBase != null) {                                                baseValue = Integer.valueOf(nBase.toString());                                        }                                        value = String.valueOf(baseValue - Integer.valueOf(value));                                }                                byte typeId = 1;                                if (nBase != null) {                                        typeId = nBase.getTypeId();                                }//                                this.sendMsg(player, \"typeId:\"+typeId);                                switch (typeId) {                                case 1:                                        nbt.setInt(key, Integer.valueOf(value));                                        break;                                case 2:                                        break;                                case 3:                                        nbt.setInt(key, Integer.valueOf(value));                                        break;                                case 4:                                        nbt.setInt(key, Integer.valueOf(value));                                        break;                                case 5:                                        break;                                case 6:                                        break;                                case 7:                                        break;                                case 8:                                        nbt.setString(key, value);                                        break;                                default:                                        break;                                }                        }                        NMSItem.setTag(nbt);                        player.setItemInHand(CraftItemStack.asBukkitCopy(NMSItem));                } else {                        this.showHelp(player);                }                this.sendMsg(player, \"&6&lNBT处理完成\");        }        private void showHelp(Player player) {                this.sendMsg(player, \"&2/nc set key value\"                                + \" &b&l设置手上物品NBT 名为key 值为value\");                this.sendMsg(player, \"&2/nc add key value\"                                + \" &b&l设置手上物品NBT 名为key 值为key的原有value + value\");                this.sendMsg(player, \"&2/nc mus key value\"                                + \" &b&l设置手上物品NBT 名为key 值为key的原有value - value\");                this.sendMsg(player, \"&2/nc remove key\" + \" &b&l移除NBT\");        }        private void sendMsg(Player player, String msg) {                player.sendMessage(ChatColor.translateAlternateColorCodes('&', msg));        }        @Override        public void onEnable() {                super.onEnable();        }        @Override        public void onDisable() {        }}"
        },
        {
            "author": "517190058",
            "timestamp": 1590120720,
            "txt_content": "谢谢大佬！！！我找了好久了qwq"
        }
    ]
}