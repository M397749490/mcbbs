{
    "title": "无法正确读取config.yml配置文件",
    "author": "Freeze_Dolphin",
    "replyCount": 3,
    "timestamp": 1568459940,
    "txt_content": "配置文件(config.yml):\n\n# \n# AutoStuffer 配置文件\nchest-name: GTA Treasure\ntime: 5\nmsg-mode: 1\ntitle1: §c§l无法打开箱子\ntitle2: §c这个箱子还在装填中\ntitle-fade-in: 10\ntitle-stay: 30\ntitle-fade-out: 20\nempty-chest-message: §c§l这个箱子还在装填中!\nmax-num: 26\nmin-num: 10\nitems:\n  ItemStackAIRx1:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: AIR\n    chance: 0\n  ItemStackAPPLEx2:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: APPLE\n      amount: 2\n    chance: 5000\n  ItemStackCOBBLESTONEx1:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: COBBLESTONE\n    chance: 10000\n  ItemStackDIRTx1:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: DIRT\n      amount: 24\n    chance: 2000\n  ItemStackHOPPERx1:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: HOPPER\n      amount: 2\n    chance: 2000\n  ItemStackIRON_BARDINGx1:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: IRON_BARDING\n    chance: 3000\n  ItemStackCHESTx1,TILE_ENTITY_META:meta-type=TILE_ENTITY,display-name=GTATreasure,blockMaterial=CHEST:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: CHEST\n      amount: 6\n      meta:\n        ==: ItemMeta\n        meta-type: TILE_ENTITY\n        display-name: GTA Treasure\n        blockMaterial: CHEST\n    chance: 3000\n  ItemStackINK_SACKx1:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: INK_SACK\n      damage: 15\n      amount: 64\n    chance: 10000\n  ItemStackPAPERx1:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: PAPER\n    chance: 10000\n  ItemStackINK_SACKx1UNSPECIFIC_META:meta-type=UNSPECIFIC:\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: INK_SACK\n      damage: 11\n    chance: 10000\n  ItemStackINK_SACKx1UNSPECIFIC_META:meta-type=UNSPECIFICPINKDYE(9):\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: INK_SACK\n      damage: 9\n    chance: 10000\n  ItemStackINK_SACKx1UNSPECIFIC_META:meta-type=UNSPECIFICLIMEDYE(10):\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: INK_SACK\n      damage: 10\n    chance: 10000\n  ItemStackRABBITx1UNSPECIFIC_META:meta-type=UNSPECIFICRABBIT(0):\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: RABBIT\n    chance: 10000\n  ItemStackRABBIT_STEWx1UNSPECIFIC_META:meta-type=UNSPECIFICRABBIT_STEW(0):\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: RABBIT_STEW\n    chance: 10000\n  ItemStackCOOKED_RABBITx1UNSPECIFIC_META:meta-type=UNSPECIFICCOOKED_RABBIT(0):\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: COOKED_RABBIT\n    chance: 10000\n  ItemStackCOOKED_MUTTONx1UNSPECIFIC_META:meta-type=UNSPECIFICCOOKED_MUTTON(0):\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: COOKED_MUTTON\n    chance: 10000\n  ItemStackMUTTONx1UNSPECIFIC_META:meta-type=UNSPECIFICMUTTON(0):\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: MUTTON\n    chance: 10000\n  ItemStackBEETROOTx1UNSPECIFIC_META:meta-type=UNSPECIFICBEETROOT(0):\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: BEETROOT\n    chance: 10000\n  ItemStackBEETROOT_SOUPx1UNSPECIFIC_META:meta-type=UNSPECIFICBEETROOT_SOUP(0):\n    item:\n      ==: org.bukkit.inventory.ItemStack\n      type: BEETROOT_SOUP\n    chance: 10000\ndebug: true复制代码\n\n\n读取配置的代码:\npublic static void refreshItems() {\n                ConfigSec = AutoStuffer.plug.getConfig().getConfigurationSection(\n                                \"items\");\n\n                Items = new HashMap<>();\n\n                for (String key : ConfigSec.getKeys(false)) {\n                        Items.put(ConfigSec.getInt(key + \".chance\"),\n                                        ConfigSec.getItemStack(key + \".item\"));\n                }\n        }复制代码\n\n然而debug发现Items这个HashMap里只有部分配置\n[ getLogger().info(\"DEBUG: \" + Items.toString()) ]:\n[17:28:23] [Server thread/INFO]: [AutoStuffer] DEBUG: {0=ItemStack{AIR x 1}, 10000=ItemStack{BEETROOT_SOUP x 1}, 2000=ItemStack{HOPPER x 2}, 5000=ItemStack{APPLE x 2}, 3000=ItemStack{CHEST x 6, TILE_ENTITY_META:{meta-type=TILE_ENTITY, display-name=GTA Treasure, blockMaterial=CHEST}}}复制代码\n\n应该怎么解决....\n\n\n\n\n\n\n\n\n选区_001.png\n(40.24 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-9-14 19:11 上传\n\n\n\n\n\n\n\n\n读取配置的代码\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "Karlatemp",
            "timestamp": 1568463000,
            "txt_content": "Items.put(ConfigSec.getInt(key + \".chance\"),\n                                        ConfigSec.getItemStack(key + \".item\"));\n\n根据你的配置这个key(指Map主键)全是 10000 不被覆盖才怪"
        },
        {
            "author": "Freeze_Dolphin",
            "timestamp": 1568511600,
            "txt_content": "99ww 发表于 2019-9-14 20:10\nItems.put(ConfigSec.getInt(key + \".chance\"),\n                                        ConfigSec.getIt ...\n那应该怎么改...."
        },
        {
            "author": "云闪",
            "timestamp": 1569924900,
            "txt_content": "你用chance做主键，后面的相同chance的自然会覆盖前面的\n考虑使用Map<Integer, List<ItemStack>>  相同chance的存到一个list里"
        }
    ]
}