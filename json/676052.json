{
    "title": "教你在Debian部署自己的minecraft服务器",
    "author": "923100020",
    "replyCount": 41,
    "timestamp": 1487747340,
    "txt_content": " 本帖最后由 923100020 于 2017-3-1 23:31 编辑 \n首先本人以前是在Windows系统下开服的，此系统我觉得有以下\n缺点：    \n    × 容易蓝屏\n    × 开机就占用了500M内存，系统有点庞大\n    × 远程桌面连接占用宽带（流量伤不起）\n    × 各种限制各种不方便。。。。。。\n然后我还是觉得Linux系统优势多多，其实Linux是一种信仰 !!!!!!  因为!!!  linux本来就是服务器系统！\n然后再来说一下它的优点吧\n    √ 非常稳定\n    √ 开机才150M内存，硬件利用好，系统体积小，效率高\n    √ ssh连接基本不耗流量\n    √ 强大的社区，开源的系统，比Windows更自由\n    √ 非常稳定，系统根本不会down机\n    √ 信仰代码，逼格max ↑ 无图形界面 =_=（一切都是代码，命令)(其实我喜欢称呼为：《黑色电影》 \"黑色背景白色代码\"，以后我们熬夜弄服务器我们可以说：我看了一晚上的黑色电影了！)\n放点毒\n\n此教程教你如何在Linux 的发行版：Debian下部署自己的服务器。。。。。开坑完毕。\n---------------------------------------------------------进入正文-----------------温馨提示：Ctrl+鼠标滚轮放大缩小网页\n  此教程追求简洁，一步到位，重点突出系统部署方面\n  其实开服的话你只需要一个Linux系统，无论这个系统在何方，连上去进行一些设置，方可部署服务器\n  学会本教程你们就会对Linux系统下开服有一定的感觉\n  我会教你们在虚拟机下部署自己的服务器（如果你们已经有云主机之类的就无需在自己电脑上弄虚拟机了，也不需要下载系统镜像）\n  你们跟着我的步骤一步一步来都会成功开服的（真的只需一步一步做就行了= =）\n  外网映射，电脑配置等等你们去参考其他地方，我在这里就不重复建设了\n  其实mcbbs里有很多高质量的教程的>联机教程<\n  我这篇教程主要教你如何在Debian系统下部署minecraft服务器\n  首先此教程需要你掌握在Windows下开服的经验，还有就是基本的装插件什么的，然后再涉足Linux开服就得心应手咯\n  如果你们碰到什么问题啊，疑问，都得回帖来问我，有什么问题憋在心里是永远得不到解决的！！\n\n多图预警！！！手机流量不足千万别(点一次65M！不是玩笑！实测！)\n                               ↓\n                               ↓\n\n\n-------------------教程开始------------------\n（推荐你们尽量下载64位的软件）\n\n下载虚拟机\n------------------虚拟机介绍-----------------\n首先你们要在Linux开服，所以你们得安装那个传说中的虚拟机软件，我比喜欢用VMware这个软件\n虚拟机这个东西就是等于在你电脑上再组装一台电脑，然后运行它自己的系统\n------------------下载VMware-----------------\n百度网盘：我的分享\nVMware-workstation-full-12.5.2-4638234.exe\n按道理这个虚拟机安装包支持32/64位的，如果你们想下载最新版你们可以到官网去下载，反正是个虚拟机都行。\n------------------（我有强迫症）从官网下载VMware-----------------\n首先你们得打开官网然后跟着我的图片一步一步做\n首先点下载\n然后选择这个\n选Windows版的就可以了\n\n\n下载Debian系统\n------------------Debian系统介绍-----------------\n首先你们要在Linux开服，你们得有一个Linux系统吧？比如你们的电脑，是不是要安装个Windows7 啊w8啊w10啊，才能玩游戏？这就是系统安装包。\n-------------我的分享-------------\n百度网盘：我的分享\n------------------从官网下载Debian-----------------\n首先访问Debian官网获取Debian\n\nDVD，64位\n\n下载DVD1即可，其他都是一些用不着的安装包\n\n你会获得一个BT种子\n\n用迅雷打开即可\n\n\n\n下载Linux版java\n------------------Linux版java有什么卵用？-----------------\n首先一句话：minecraft是基于java开发的，服务端自然也是一个java程序，自然就需要java运行环境了，我们是Linux系统，然后就下载Linux版java啦。\n-------------我的分享-------------\n百度网盘：我的分享\n------------------从官网下载LinuxJava-----------------\n打开 java官网：java.com: Java 与您所有java下载\n\n正在寻找JDK？\n\nJDK下载\n\nSERVER JRE下载（我比较喜欢服务器版的java运行环境）\n\n首先点同意，不然不给下\n\n选择这个\n\n然后就能下载了\n\n\n\n下载服务器jar包\n------------------服务器jar包什么卵用？-----------------\n首先在Windows下开过服的应该都知道吧，就是一个服务端程序，整个服务器的核心，它就是一个可执行的java程序，运行着minecraft服务器。\n-------------我的分享-------------\n百度网盘：我的分享\n------------------推荐来这里下载服务器jar-----------------\n[1.5.2-1.10.2]从这里,你可以找到全世界里关于服务端最全的一切！\nhttp://www.mcbbs.net/forum.php?mod=viewthread&tid=433216\n(出处: http://www.mcbbs.net/)\n感谢@953480384 为我们提供这么好的帖子，谢谢\n我这里是下载的spigot-1.8.8-R0.1-SNAPSHOT.jar其实你们下载什么版本的服务端都差不多，开服的方法都基本相同，其实服务端都是个java程序，你去参考那个程序的帮助，反正我的教程是重点说明系统部署方面，我这里就使用水龙头作为一个教程演示吧\n\n\n下载SSH客户端\n------------------SSH客户端什么鬼-----------------\n其实你们有些租用过vps什么云主机都知道，如果你们是Windows系统你们必须要开启远程桌面，然后ssh就是Linux的命令行远程连接，这个非常方便，堪称一大神器！！并且手机也能连接！（不管你们喜不喜欢这个功能，反正你拥有了手机控制后台的特殊能力，ssh连接基本上不浪费流量，不像远程桌面，一打开远程桌面，服务器宽带都没了一堆，手机流量就像在看电影一样耗）\n-----------------电脑版ssh客户端-----------------\n百度网盘：我的分享\n来这下载，这貌似不是官网\n32位64位你喜欢就好\n\n-----------------手机版ssh客户端-----------------\n百度网盘：我的分享\n你们如果追求新版你们自己去网上搜索找到他们的官网自己折腾去吧，我只分享一个我目前在用的稳定的apk给你们\n\n\n下载FTP客户端\n------------------FTP客户端什么鬼-----------------\n首先租云服务器，你们怎么拷贝资料到那台电脑上？电脑又不可能在你身边，你只能靠互联网传输，FTP就是专业的文件传输协议，专门用来传输文件用的。\n-----------------电脑版ssh客户端-----------------\n百度网盘：我的分享 (64位)\n百度一下，你就知道 （32位）\n上官网下载\n\n\n\n-----------------手机版ssh客户端-----------------\n大家不好意思，我没有手机版ssh客户端，你们自己去另外的地方寻找吧\n\n\n(可选) 下载MySQL客户端\n------------------MySQL客户端什么鬼-----------------\n由于minecraft服务器有一些插件需要使用到MySQL，所以需要一个连接MySQL的工具，方便我们进行生产\n-----------------电脑版ssh客户端-----------------\n32位客户端 百度网盘：我的分享\n64位客户端 百度网盘：我的分享\n最新版我就不推荐你们去下载了，很难破解的，我目前在用的稳定版给你们安装即可！\n别忘记下载破解补丁了 百度网盘：我的分享\n\n\n安装虚拟机\n------------------安装VMware-----------------\n首先打开安装包\n\n下一步\n\n同意，下一步\n\n不要打钩，下一步\n\n直接下一步\n\n还是下一步\n\n安装咯\n\n请稍后。。。。。\n\n在这里先不要完成，点许可证按钮\n\n输入许可证5A02H-AU243-TZJ49-GTC7K-3C61N\n\n然后点完成\n\n------------------------------------\n至此，你已经成功安装了VMware！！！\n\n\n组装电脑\n------------------组装电脑？-----------------\n首先想要装上操作系统，你必须要有一个硬件平台吧？\n所以虚拟机就是帮你在电脑里面“组装电脑”，这样你就能在\n这台“组装”出来的电脑，安装上我们所喜爱的Debian了！\n------------------开始！-----------------\n首先打开你们之前安装好的虚拟机\n创建虚拟机\n\n然后选自定义\n\n这里保持默认就好\n\n为了省略掉设置BIOS的麻烦，直接添加光盘映像吧\n\n就选择之前那个Debian系统镜像\n\n在这里选择你想要保存的路径（就是你系统盘存放在哪里，建议新建一个文件夹归纳管理）\n\n这里我选择存放在D:\\虚拟机系统\\Debian\n\n装Debian来个双核CPU就够了吧\n\n嘿呀，内存插2G\n\n桥接网络是使用你家里路由器DHCP服务器来分配自动获取IP进行上网，更加真实的模拟了我们家里的网络环境，如果你们是校园网或者其他网络环境....不好意思，我目前不懂设置（然而真正的vps 云主机 网络部分根本不需要你们动手。）\n\n这些都默认就行了，下一步\n\n下一步\n\n下一步\n\n硬盘上20G足够\n\n下一步\n\n确认无误，完成即可\n\n\n\n安装系统（Debian）\n------------------装系统咯-----------------\n等等！你们先别高兴的太早，请确认你打开了Intel虚拟化技术！\n百度一下 你就知道\n不出意外运行虚拟机应该会进入这个界面\n\n选中文\n\n是\n\n中国！\n\n我问你除了汉语你能看懂什么？\n\n骚等\n\n主机名默认即可\n记得使用tab键切换选项\n\n域名不需要，留空就好\n\n设置root用户名密码，到时候你连接上去要输入，得保管好你的密码哦亲\n\n再输一次root\n\n定义一个全新的用户名\n\n再输入一次用户名\n\n输入两次密码\n\n\n骚等\n\n使用整个磁盘\n\n选择你要安装的硬盘，这里默认是我们刚刚创建的20G硬盘\n\n我们把所有的东西都放在一个分区吧，这样不用管\n\n确认无误后写入磁盘\n\n建议你再喵一眼 选是\n\n骚等\n\n不要用其他DVD\n\n这里一定要用网络镜像，可以省略很多设置！\n\n中国\n\n用163软件源\n\n这里可以不理它\n\n骚等再骚等\n\n这里是和否都一样\n\n这里你们选择ssh server和标准系统工具就好了，用空格来选中or取消，然后用Tab键选择继续，然后回车\n\n骚等\n\n选是\n\n选这个什么Dev\n\n继续\n\n当系统重启的时候先关机，别开\n\n编辑光驱\n\n删除掉光驱（装好系统就不需要光驱了）\n\n删掉后点确定\n\n然后就可以放心进入系统了\n\n----到此，你已经装好了系统----\n\n\n安装FTP客户端\n\n\n\n\n\n\n\n\n\n\n安装&激活MySQL客户端\n首先双击你的安装包\n\n同意，下一步\n\n我喜欢安装到默认路径，下一步\n\n这里也默认就好了\n\n开始安装！\n\n等一下就装好了= =\n\n装好了之后先别急着运行，需要激活！先解压这个东西。\n\n得到这个\n\n复制\n\n找到你mysql客户端的根目录然后进入\n\n粘贴这个程序到你客户端根目录\n\n粘贴好后看起来是这样的\n\n然后运行一下，提示让你选择MySQL可执行文件，你就把根目录帖进去，然后选择\n\n激活成功应该提示这个\n\n\n\n初次连接Debian\n首先在本地登陆，请用你们之前设置的用户名和密码，比如我这里设置的是asdjkm，密码：123456 （备注：密码输入的时候不会显示出来，你们尽管打密码，然后回车）登陆了系统后看起来应该是这样的\n\n使用：su复制代码\n来获取root权限，他会提示你输入密码，（Debian系统本地登陆显示不出中文，会显示菱形乱码）\n输入了你的root密码之后看起来是这样的\n\n然后获取你Debian系统里的IP地址\n使用：ifconfig复制代码\n在这里我网卡eth0获得的IP是192.168.199.167\n\n--------------------------检查网络---------------------------------\n先别太着急，首先检查网络是否正常\n检查ARP表：\narp -a复制代码\n在这里我们可以看出网关是192.168.199.1 \n\n然后ping网关\n\n然后在本地ping网关，和Debian\n\n-----------------------------------------------------------------\n好！然后你们要打开之前下载的putty.exe\n\n然后会出现这个东西：\n\n在这输入你要远程连接的ip，然后open\n\n然后弹出一个什么密匙，然后你确定即可\n\n然后就是让你登陆系统了，和本地的登陆方法一样 asdjkm 123456\n\n连接成功\n\n--------------------如果你是vps or 云主机--------------------\n在你的putty可以直接输入你服务商给出的外网ip就可连接，无需查看IP什么的那么复杂\n因为网络部分你根本不用管，服务商帮你弄好了，你直接输入外网ip就ok\n\n\n你想用root身份登陆吗？\n\n你是否有注意到一些异常？\n就是你之前装系统的时候你设置了root密码，然后系统还让你设置一个用户\n所以，我们试试用root登陆ssh\n\n是否登陆不上？只能用你另外设置的用户和密码来登陆。\n好，首先登陆上ssh然后获取root权限，你们还记得吧？\n\n首先更改一个配置文件\nnano /etc/ssh/sshd_config复制代码\n\n找到 PermitRootLogin without-password 温馨提示：Ctrl + w 可以搜索字符串\n\n更改为PermitRootLogin yes\n\n然后用Ctrl + o写入文件\n\n回车\n\n文件已修改，使用Ctrl + x退出文本编辑器（这一步我就不演示了）\n然后重启ssh服务\nservice sshd restart复制代码\n\n再用root登陆一下，成功\n\n\n\n设置局域网内静态IP\n----------如果你是云主机请收起，关你屁事--------\n如果你不设置局域网内静态ip，你的IP是动态的，等你的IP租期一过，你又会变另外的ip，比如你今天是1.1明天是1.3后天又飞到了1.2去了，这样就会导致你的服务器down机\n好，我们马上来设置静态ip！\n用root登陆后输入\nnano /etc/network/interfaces复制代码\n\n把dhcp更改成static\n\n然后指定ip，子网掩码，网关：\n\n然后我就设置成了这样\n\nallow-hotplug eth0\niface eth0 inet static\naddress 192.168.199.167\nnetmask 255.255.255.0\ngateway 192.168.199.1\n复制代码\n然后 Ctrl + o 写入文件 Ctrl + x退出\n重启网络服务 \n/etc/init.d/networking restart 复制代码\n\nOK\n\n\n配置Debian软件源\n----------如果你是云主机请收起，关你屁事--------\n软件源是什么鬼？？？\n其实我喜欢称呼它为：“软件库”，其实就是Linux的软件一个集合库，这个软件源服务器在云上，你们只要使用一两条代码，即可安装上你喜欢的软件！这有点像应用商店。我觉得这个非常爽，免去了你下载安装的麻烦，一条命令搞定。\n好，我们来设置一下软件源\n首先修改这个配置文件\nnano /etc/apt/sources.list复制代码\n\n注释一下光驱，其实我们之前安装系统的时候它不是提示使用网络镜像吗？我记得还让你们选择哪个什么163源，如果你们这里是空的，只有几行的话，你们自己去百度找一些Debian源，或者我贴出我的源给你\ndeb http://mirrors.163.com/debian/ jessie main\ndeb-src http://mirrors.163.com/debian/ jessie main\ndeb http://security.debian.org/ jessie/updates main contrib\ndeb-src http://security.debian.org/ jessie/updates main contrib\ndeb http://mirrors.163.com/debian/ jessie-updates main contrib\ndeb-src http://mirrors.163.com/debian/ jessie-updates main contrib复制代码\n\n把光驱注释掉就可以了，保存退出回到命令行\n\n使用这条命令更新一下本地软件指向\napt-get update复制代码\n\n完成啦！！\n\n\n\n给你的Debian一键安装上开服常用软件\n------------------What？常用软件？？-----------------------\n常用软件就是\n      √ MySQL服务端\n      √ FTP服务端\n      √ zip压缩解压软件\n      √ screen会话管理软件\n好！我们来安装一下！\napt-get install mysql-server vsftpd zip screen复制代码\n\n输入Y 回车\n\n过程可能会有点久，请耐心等待安装\n装到一半会弹出让你输入MySQL的root密码（注意，这个root密码和ssh那些密码是分开的，是MySQL数据库独立的账号密码，你可以设置一个，我设置成456789吧）\n\n再输入一次密码\n\n到此，你应该可以掌握软件的安装了\n\n\n\n设置好FTP服务端\n------------如果你不进行一些设置，是无法使用的-----------\n如果我不设置我现在尝试连接一下：\n首先打开之前安装好的FTP软件\n文件>站点管理器\n然后按图片设置连接参数\n\n然后选择选项卡字符集，选择强制utf-8，如果不设置你上传东西会乱码GG\n\n是否连接不上服务器？\n\n从返回的消息看出，貌似不允许root什么的登陆，所以我们必须得设置FTP服务器的参数\n现在我们来配置一下FTP，这是我之前做的笔记\n1.修改FTP配置文件\nnano /etc/vsftpd.conf\nanonymous_enable=NO\nlocal_enable=YES\nwrite_enable=YES\n以上每行解释如下：\n1.禁止匿名用户访问ftp\n2.允许本地用户访问ftp\n3.允许写操作复制代码\n2.允许root登陆\nnano /etc/ftpusers\n注释掉root即可root登录了复制代码\n3.重新启动vsftpd\n/etc/init.d/vsftpd restart复制代码\n然后我们应该就能连接上FTP了！\n\n\n\n不能太依赖人工智能：徒手安装java\n---------------为什么要徒手安装？不是有软件源吗？-------------------\n其实软件源里面的java并不好，从官网下载的java性能才好一点。\n好，我们开始安装！！！\n还记得我们之前安装并且连接上的FTP吗？我们要用这个FTP上传java安装包到服务器里\n在这里我上传到/home文件夹\n\n然后我们在命令行下用\ncd /home\nls复制代码\n进入目录并显示目录下的内容\n\n然后解压缩\ntar zxvf server-jre-8u121-linux-x64.tar.gz复制代码\n\n解压缩好后然后再看看目录下，我们看见多出了一个目录\n\n嗯！这个目录就是javahome ！ 下面我们设置环境变量，在这里我之前做好了笔记\n用文本编辑器打开/etc/profile \n在profile文件末尾加入： \nexport JAVA_HOME=  <java根目录>\nexport PATH=$JAVA_HOME/bin:$PATH \nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar 复制代码\n\n然后我们重启一下Debian，应该就能使用java了\n我们重启一下\nreboot复制代码\n先连接上ssh\n然后使用java命令测试一下是否安装成功\njava\njavac复制代码\n\n成功\n然后我们写一个java程序，随便找一个目录新建一个\nnano test.java复制代码\n然后敲代码\n\n然后编译运行\njavac test.java\njava test复制代码\n\n\n\n设置MySQL服务端\n首先我们尝试一下用客户端连接一下我们的Debian\n首先新建连接\n\n按照我这样填写，名字随便填\n\n保存连接信息后打开连接\n\n然后就返回了一个报错！\n无法连接到server服务器上，2003\n\n所以我们要上Debian进行一些设置\n首先修改一个配置文件\nnano /etc/mysql/my.cnf复制代码\n修改 bind-address            = 127.0.0.1 为 0.0.0.0\n\n然后我们重启一下MySQL服务\nservice mysql restart复制代码\n试试能否连接上！\n\n在这里我们又出现了一个新的错误！\n我发现更改了那个0.0.0.0还是无法连接，这个问题曾经困扰了我很久很久很久\n还得更改一个数据表！下面是我之前折腾的笔记\n在用sqlyog连接非本地的Mysql服务器的数据库，居然无法连接很奇怪，报1130错误，\nERROR 1130: Host 192.168.3.100 is not allowed to connect to this MySQL server\n猜想是无法给远程连接的用户权限问题。结果这样子操作mysql库，即可解决。特贴出来。。在本机登入mysql后，更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改称'%'。。\nmysql -u root -p\nmysql>use mysql;\nmysql>select 'host' from user where user='root';\nmysql>update user set host = '%' where user ='root';\nmysql>flush privileges;\nmysql>select 'host'? from user where user='root';\n第一句是以权限用户root登录\n第二句：选择mysql库\n第三句：查看mysql库中的user表的host值（即可进行连接访问的主机/IP名称）\n第四句：修改host值（以通配符%的内容增加主机/IP地址），当然也可以直接增加IP地址\n第五句：刷新MySQL的系统权限相关表\n第六句：再重新查看user表时，有修改。。\n记得Mysql服务需要重新启动（确保修改有效），否则可能修改的结果无法体现。复制代码\n首先在shell(命令行界面)下输入mysql -u root -p复制代码然后它会提示你输入密码\n\n然后依次输入mysql语句\nuse mysql;\nselect 'host' from user where user='root';\nupdate user set host = '%' where user ='root';\nflush privileges;\nupdate user set host = '%' where user ='root';\nquit复制代码\n\n然后我们再重启一次MySQL\nservice mysql restart复制代码\n再连接试试看\n\n连接成功了！\n\n\n万事俱备，只欠东风：开服！！\n令人激动人心的时刻到了！！！！！！我要开服啦！开服啦！服务器开啦！\n别激动，别激动，先上传我们之前那个服务端核心上Debian\n首先在根目录下新建一个服务器集中存放的文件夹\nroot@debian:~# mkdir /serverhome\nroot@debian:~# cd /serverhome/\nroot@debian:/serverhome#复制代码\n然后在FTP下进入这个目录再新建一个子目录\n\n再这里我就新建为test吧\n然后上传我们的核心\n\n上传好了之后我们\n去shell下执行java命令\njava -jar spigot-1.8.8-R0.1-SNAPSHOT.jar复制代码\n\n在这里我们看见服务端需要去目录下同意那个什么协议EULA\n------小技巧：在线编辑配置文件-----\n首先选中那个文件，查看编辑\n\n更改false为true\n\n然后就像在本地写的一样，关掉保存，然后弹出这个窗口，删除然后上传回我们的FTP即可\n\n对于那种yml等文件，我们最好用notepad++来在线编辑，在这里我们编辑一下那个server.properties，使用自定义程序\n\n选择你的安装包根目录下的运行程序\n\n然后你就尽情的编辑吧\n\n----------------------\n同意了之后再开下服务器\njava -jar spigot-1.8.8-R0.1-SNAPSHOT.jar复制代码\n显示出done字样就表示开服成功了，我们在游戏里输入ip进去玩玩\n\n输入服务器IP。。。这个应该你们都会吧\n\n在这里我们要去服务器里关闭一下正版验证\n\n还是修改server.properties\nonline-mode=true 改为false\n然后关掉上传回去，再重启服务器\n\nstop\njava -jar spigot-1.8.8-R0.1-SNAPSHOT.jar复制代码\n\n不说了，沉迷我的世界去了\n\n\n得让服务端在“后台”运行\n你们是否有发现什么异常？\n如果你把那个ssh关掉，而你在Debian里运行着一个服务端，你们猜猜会发生什么事？\n我们来做个测试\n\n\n是否关掉那个ssh后，等一两秒服务器就被中断了？\n没错，这是因为服务器需要保持在后台里运行\n软件：screen 闪亮登场\n我们在开服命令前，附加一个screen参数\nscreen java -jar spigot-1.8.8-R0.1-SNAPSHOT.jar复制代码\n这样开服的话，你们会发现，关掉ssh服务器仍然在运行中，这里就不上图了\n------screen会话管理技巧（更多使用技巧请百度一下）-------\nscreen -ls 查看服务器有多少个会话\nscreen -r -d [名字] 杀掉其他人，你独享一个会话。\nscreen -r -x [名字] 和别人共享某个会话（允许多人同时连入服务端后台同一个会话）\nCtrl + a d 退出会话\nCtrl + a [ 进入拷贝模式，在拷贝模式里可以向上翻看内容复制代码\n有很多朋友不明白Ctrl + a d怎么按 你先按一下Ctrl + a然后放开这两个键，然后在按一下d\n\n\n我喜欢用一些简单的脚本运行服务器\n脚本的作用显而易见！就是一序列代码的集合，然后我们一条命令即可执行一大堆命令，听说Linux的脚本更为强大！虽然我不懂写脚本。。。\n在服务端目录下新建一个play.sh\nroot@debian:~# cd /serverhome/test/\nroot@debian:/serverhome/test#nano play.sh\n我们写入\n#!/bin/sh\nscreen -S \"life\" java -server -d64 -Xmx2048M -jar spigot-1.8.8-R0.1-SNAPSHOT.jar nogui复制代码\n在这里 life 是你列出screen会话里显示的名称 然后就是一些java代码\n\n我们来跑一下这个脚本吧！\nsh play.sh复制代码\n记得在目录下运行脚本！\n\n服务器正在运行了\n我们用Ctrl + a d退出一下\n然后用screen -ls复制代码查看一下我们服务端\n\n然后screen -r -x life复制代码来回到我们的会话\n这个life就是你在脚本下定义的名称\n\n\n安装一个插件\n这里我们用iConomy这款经济插件做演示吧\n此插件还需要一个前置插件才能运行\n百度网盘，我的分享\n我们解压出来然后把那两个jar包扔进 服务器目录下的plugins文件夹\n\n然后我们跑一下服务器，看看插件是否正常加载\n我们跑服务器的时候，是否加载插件的时候一闪而过？\n我们使用ctrl + a [来进入拷贝模式，然后用方向键或者翻页键就能调出之前的记录了\n在这里能看见我们的插件被正常加载\n\n然后进入服务器看看插件的功能吧\n在游戏里使用这指令查询你的余额\n/money复制代码\n\n插件默认金钱是0元\n\n我们在后台用一些指令给自己钱吧\n\nok！我们来汉化一下这个经济插件，替换我给你们汉化好的Template.yml 到插件的根目录\n\n然后重启服务器再开过，插件应该就汉化好了\n\n\n\n开启插件的潜能：支持数据库\n----为什么要数据库？-------\n一般有些插件可以支持数据库MySQL的，插件默认会用一个文件来储存：\n\n用文件储存的话，显而易见！就是容易数据丢失，数据丢失啊大佬，玩家的经济能开玩笑？\n我的服务器以前就经历过很多次经济清空的现象，信号有服务器快照，不然服务器吃枣药丸\n我这么一说你们应该能明白MySQL是干什么的吧？\n告诉你们哦：其实数据库也可以用来作为：跨服数据同步\n就是把两个服务器的经济插件指向同一个数据库，这样他们的玩家金钱就能互通了\nok！首先用MySQL客户端连接上服务器新建一个数据库\n\n按照我给出这张图填写，数据库名你们可以自定义，到时你插件也要写上这个名\n\n新建完成\n\n然后我们去设置插件开启MySQL支持\n编辑插件根目录下的config.yml配置文件\n\n修改如下东西\nType: 'minidb'  ---->  Type: 'mysql' \nTable: 'iConomy'   -----> Table: '你们之前设置的数据库名'\nUsername: '用户名'\nPassword: '用户密码'复制代码\n修改后的配置文件看起来应该是这样的\n\n然后保存上传服务器，我们去重启服务器\n在这里我们可以看见插件已经成功支持MySQL了\n\n我们打开minecraft数据库看一下\n\nWhat？ 什么鬼？？ 为什么没有新表出现？？\n回去后台看一下.\n\n哦！！！原来如此，我填错了密码，我记得我之前设置的密码是456789\n\n修改后重启就成功支持MySQL了！\n然后我重启后还是没有支持到数据库，还是没生成数据表，后台提示这个\n\n我这才明白，原来我填错了配置\n正确应该是这样填写的\n上面那个是数据表明，下面那个是数据库名\n\n随后就能正常生成数据表了\n\n\n\n用Linux下的防火墙ban ip，配置安全策略\nLinux的防火墙我个人感觉有点用处，所以我就分享出来了\n你是否遇到过熊孩子，你非常想踢出他？\n没错，虽然服务端本来就有这个功能，但是用防火墙来阻止某个IP的连接的话逼格更高一点\n其次这个防火墙还可以配置一些安全策略起到防御类似于CC攻击的服务端压测\n\niptables管理单个ip以及ip段\n\n在shell下执行\n#屏蔽单个IP的命令是?\niptables -I INPUT -s 123.45.6.7 -j DROP?\n#封整个段即从123.0.0.1到123.255.255.254的命令?\niptables -I INPUT -s 123.0.0.0/8 -j DROP?\n#封IP段即从123.45.0.1到123.45.255.254的命令?\niptables -I INPUT -s 124.45.0.0/16 -j DROP?\n#封IP段即从123.45.6.1到123.45.6.254的命令是?\niptables -I INPUT -s 123.45.6.0/24 -j DROP\n来自 <http://www.2cto.com/net/201307/227257.html>  复制代码\n\n删除之前添加的规则\n\n（iptables -A INPUT -s 192.168.1.5 -j DROP）：\n[root@test ~]# iptables -D INPUT -s 192.168.1.5 -j DROP有时候要删除的规则太长，删除时要写一大串，既浪费时间又容易写错，这时我们可以先使用–line-number找出该条规则的行号，再通过行号删除规则。\n[root@test ~]# iptables -nv --line-number\niptables v1.4.7: no command specified\nTry `iptables -h' or 'iptables --help' for more information.\n[root@test ~]# iptables -nL --line-number\nChain INPUT (policy ACCEPT)\nnum? target???? prot opt source?????????????? destination\n1??? DROP?????? all? --? 192.168.1.1????????? 0.0.0.0/0\n2??? DROP?????? all? --? 192.168.1.2????????? 0.0.0.0/0\n3??? DROP?????? all? --? 192.168.1.3????????? 0.0.0.0/0\n删除第二行规则\n来自 <http://www.111cn.net/sys/linux/53011.htm> 复制代码\n\n\n\n控制单个IP的最大并发连接数\niptables -I INPUT -p tcp --dport 服务器端口 -m connlimit --connlimit-above 最大连接数 -j REJECT \n复制代码\n\n在这里我就不上图演示了，你们自己研究吧，IP被阻止之后是连接不上服务器的，服务器显示红叉，连接超时\n\n\n\n尽可能快速的备份你的服务器！\n\n服务器备份，解压文件-----压缩与解压\n\nLinux下的压缩zip,解压缩unzip命令详解及实例\nhttp://www.cnblogs.com/zdz8207/p/3765604.html\n\n压缩服务器上当前目录的内容为xxx.zip文件\nzip -r 文件路径/文件名 你要添加入压缩包的文件\nzip -r xxx.zip ./*\n教大家一个简单快速的备份服务器办法\n首先去系统根目录下随便新建一个目录，比如我是/serverback\nroot@debian:~# mkdir /serverback复制代码\n\n然后我们来新建个备份到这个文件夹里\n使用如下命令\nzip -r /serverback/备份文件名.zip /serverhome/*复制代码\n这条命令你可以这样理解，新建压缩文件到某个地方，来自某某某目录\n\n等待压缩完成\n\n然后我们可以看到/serverback目录就多出了一个压缩文件\n\n我们下载到本地拆开看一下\n\nOK！正是我们需要的备份\n\n温馨提示：\n服务器必须要经常备份，如果你不备份好比如在裸奔，服务器一旦有什么文件丢失，你服务器就GG\n\n\n在Linux解压zip文件到当前目录\nunzip 文件名.zip复制代码\n\n\n\n性能监控软件\n\n你们自己去阅读吧\n\n\n起床！服务器down了！\n我今天一大清早我写教程的时候，我发现我连不上我的Debian，我在本地ping也pin不通顺\n\n我在Debian ping不通网关\n\n我然后到虚拟机登陆查看ip信息是这样的:\n\n重启一下虚拟机吧，南无阿弥陀佛，南无阿弥陀佛\nreboot复制代码\n重启过后应该会好吧\n\n卧槽，还是不行，我查看一下arp表\n\n在这里ARP表是空的，我觉得是网卡down了，我们尝试up一下\nifconfig eth0 up复制代码\n\n网卡up了之后虽然起来了，但是没有分配到ip\n我再重启一下reboot，可能会好吧\n\n重启无果故障依旧\n我现在怀疑是路由器分配到的ARP，实体机和虚拟机的Mac地址有冲突，我来验证一下\n\n实体机是08-D4-0C-01-C3-D1\n虚拟机是00:0c:29:09:9f:db\n\n这就奇了怪了啊！是否是我路由器的问题，我们在路由器里来做个Mac与IP绑定吧（静态ARP），然后在我Debian里也绑定路由器的Mac\n首先在本地查看的ARP表看到路由器的Mac地址:d4-ee-07-4d-28-50\n\n我们进路由器看看吧\n\n我有点蒙蔽，在路由器上是d4-ee-07-4d-28-51\n那我暂且就使用和我本地计算机绑定到我的Debian里吧，添加绑定命令到开机执行：\nnano /etc/rc.local复制代码\n\n然后我们添加这条编辑\narp -s 192.168.1.1 B8:F8:83:6F:CB:C3复制代码\n注意：Windows系统是-来分割Mac的 Linux是用:\n\n然后我们还得去路由器做静态ARP，参考你们的路由器型号不尽相同，所以你们去百度吧\n我这里路由器绑定一下我Debian网卡的mac\n\n然后重启路由器 or Debian！！南无阿弥陀佛南无阿弥陀佛南无阿弥陀佛南无阿弥陀佛\n\n\n我们再看一下Debian故障解决了没有\n\n= =还是没搞定......\n我来试试指定分配网卡ip\n\n然后能ping通网关了，但不能ping通百度\n我可能得尝试换个静态IP了\n还有我发现我的Debian怎么和我的实体机混淆了。。。。\n\n这很是个问题，我又陷入了懵逼之中\n\n在这里也超出了我技术理解范畴，我试试重新把我的Debian配置成为动态获取IP吧，看看我路由器能不能多出一个设备在线\n\n重启后故障依旧！！！！\n\n我试试先关掉Debian，然后关路由器，然后开路由器，开Debian能不能行\n重启后故障依旧！！！！\n\n好吧，我有点想放弃治疗了，我再新建一个虚拟机，装个系统看看什么情况吧。\n我装好了系统后还是发现路由器并没有出现多一个设备，所以我判定这个网络有问题\n--------------------经过我一段时间的研究得出结论（以上作废）-------------------------\n我又重装系统我又搞这个又搞那个，前前后后折腾了一天\n我尝试用动态指定网络的方法就莫名其妙好了：\n使用这两条命令\nifconfig eth0 IP地址\nroute add default gw 网关地址复制代码\n\n然后我把它添加到开机执行文件里面去\nnano /etc/rc.local复制代码\n\n\n保存重启，再看一下网络是否正常，reboot！南无阿弥陀佛\n\nping 网易，成功！\n-------------总结-----------------\n一个看似不起眼的小故障，我弄了一天，绕了一整天的弯路，最后用两个命令搞好了。这说明了.............\n这个网络故障不是ARP表的问题，也不是IP设置的问题，可能是虚拟机的网络不怎么稳定吧，我手动指定一下IP就好了\n这个网络故障超出了理解范畴,但到最后我还是折腾好了（有点滥竽充数）\n当你碰到一个棘手难题的时候，如果你用尽了所有招数，当你愁眉苦脸原地踏步的时候，这时你一定要思路清晰，不要放弃，反复怀疑，一直反复做测试，甚至登记一下，说不定你下一个测试就会有重大突破！！！\n哎不说了，睡觉！\n\n\n重配网络转移工作区\n由于我前几天都是在宿舍里写教程的，我今天突然要来教室里写教程了（其实我是技校狗）\n首先教室里是一个学校搭建的DHCP服务器给我们每台电脑分配的IP地址，所以我得让机器获取一下DHCP！\n首先注释掉我们昨天添加到开机执行的两条代码\n\n然后还得down一下我们的网卡，由于开机执行了之前那两条指令，注释以后开机就无需down网卡了\n\n然后在实体机上查看一下网关\n\n我们来Debian下执行指令\ndhclient eth0复制代码执行完了指令后ping一下本地网关\n\n然后ping一下百度也能通，运行一下ifconfig看见我虚拟机获取到的IP是10.32.134.191\n然后用putty连接！\n\n请登录！\n--------------注意-------------\n由于学校教室里太多电脑了，最好不要静态IP，反正你也不可能24小时把笔记本摆在教室里开服= =\n\n\n---------------------------------------后记----------------------------------------\n      用Linux系统开服仅仅入门水平足以，我也是只懂一点点Linux，我也只能用我有限的技术尽量教你们，其实Linux还有更多的功能，听说Linux开源，有庞大的社区，一大堆好玩的特色功能等着你！！用来开服只是使用到它冰山一角的功能。所以你们不能局限于我的教程，你们自己去挖掘Linux的特色，到最后你们会发现，Linux甩Windows几十条街............................（应该没人喷我吧= =）\n\n霍！坑已填完！\nby:  asdjkm\n填坑日期： 2017年2月22日15时09分 -  2017年3月1日21时50分",
    "replies": [
        {
            "author": "923100020",
            "timestamp": 1487904660,
            "txt_content": " 本帖最后由 923100020 于 2017-2-27 20:59 编辑 \n\n沉迷于写教程无法自拔，写教程使我快乐。"
        },
        {
            "author": "Aleks_Kavli",
            "timestamp": 1488539160,
            "txt_content": "我这边怎么提示。。。你提到了我。。。"
        },
        {
            "author": "923100020",
            "timestamp": 1488545580,
            "txt_content": "953480384 发表于 2017-3-3 19:06\n我这边怎么提示。。。你提到了我。。。\n醉了，嘿嘿嘿"
        },
        {
            "author": "Qilx1014",
            "timestamp": 1488557760,
            "txt_content": "有点厉害的......"
        },
        {
            "author": "dogeop",
            "timestamp": 1488825540,
            "txt_content": "sudo apt-get install openjdk-8-jdk\nwget https://hub.spigotmc.org/jenkins ... rget/BuildTools.jar\njava -jar BuildTools.jar\n构建完成后拷贝出Spigot-X.Y.Z.jar\n执行java -jar Spigot-X.Y.Z.jar\n开服完成\nsshkey导入：\n本机ssh-keygen -t rsa 一路next\nvim ~/.ssh/id_rsa.pub, 复制内容\n粘贴到云控制台的ssh导入或者加入到服务器的~/.ssh/authorized_keys 设置authorized_keys权限600\n即可免密码登录"
        },
        {
            "author": "923100020",
            "timestamp": 1488852060,
            "txt_content": "我最近在研究VM vSphere"
        },
        {
            "author": "5510670",
            "timestamp": 1488886080,
            "txt_content": "sudo rm /etc/udev/rule.d/70 -persistent-net.rules\nreboot\n解决网卡丢失问题"
        },
        {
            "author": "Tale丿神话",
            "timestamp": 1488921660,
            "txt_content": "为啥我163源获取不了？\n\n\n\n\n`3UF@P]JMSRX8CWC~9{6E.png (71.79 KB, 下载次数: 7)\n\n下载附件\n\n2017-3-8 05:05 上传\n\n\n\n\n"
        },
        {
            "author": "923100020",
            "timestamp": 1488955080,
            "txt_content": "ok1120137764 发表于 2017-3-8 05:21\n为啥我163源获取不了？\n网络不可达，说明你网络有点问题，你ping一下百度等网站的域名测试一下网络是不是通顺\n你检查一下虚拟机和你路由器的网路哦\n你贴出你的源配置文件给我看看，你是装的Debian8.x吗？"
        },
        {
            "author": "Tale丿神话",
            "timestamp": 1488974460,
            "txt_content": "前面那个网络的解决了  是设置局域网内静态IP的时候 网关填错了\n又发现问题了 我传输不了东西\n\n\n\n\n$PC)SGAJMA(FZ1[P0S)ZARE.png (10.73 KB, 下载次数: 9)\n\n下载附件\n\n2017-3-8 20:01 上传\n\n\n\n\n\n"
        },
        {
            "author": "923100020",
            "timestamp": 1488991320,
            "txt_content": "ok1120137764 发表于 2017-3-8 20:01\n前面那个网络的解决了  是设置局域网内静态IP的时候 网关填错了\n又发现问题了 我传输不了东西\n ...\n你看看有没有权限创建文件夹"
        },
        {
            "author": "gengyin",
            "timestamp": 1489068000,
            "txt_content": "搭建好服务器 在安装php环境 就不能再登录服务器了 反正提示端口被占用什么的 不会弄 郁闷"
        },
        {
            "author": "923100020",
            "timestamp": 1489077420,
            "txt_content": "gengyin 发表于 2017-3-9 22:00\n搭建好服务器 在安装php环境 就不能再登录服务器了 反正提示端口被占用什么的 不会弄 郁闷 ...\n你是ssh登陆不上吗？还是mc进不去你的服务器，或许你可以看一下端口占用，来个大神解释一下呗"
        },
        {
            "author": "Tale丿神话",
            "timestamp": 1489078140,
            "txt_content": " 本帖最后由 ok1120137764 于 2017-3-10 00:50 编辑 \n923100020 发表于 2017-3-9 00:42\n你看看有没有权限创建文件夹\n不能创建"
        },
        {
            "author": "kengshenxt",
            "timestamp": 1489146420,
            "txt_content": "923100020 发表于 2017-2-24 10:51\n沉迷于写教程无法自拔，写教程使我快乐。\n内个 输入ifconfig 并没有什么ip 怎么回事"
        },
        {
            "author": "kengshenxt",
            "timestamp": 1489146900,
            "txt_content": "923100020 发表于 2017-3-3 20:53\n醉了，嘿嘿嘿\n召唤空军！嘛咪嘛咪吼"
        },
        {
            "author": "kengshenxt",
            "timestamp": 1489146900,
            "txt_content": "923100020 发表于 2017-3-3 20:53\n醉了，嘿嘿嘿\n召唤空军！嘛咪嘛咪吼"
        },
        {
            "author": "923100020",
            "timestamp": 1489170540,
            "txt_content": "ok1120137764 发表于 2017-3-10 00:49\n不能创建\n你截个图，FTP的，你可能是没设置好FTP服务器，你再认证重做一次设置FTP服务器那个步骤"
        },
        {
            "author": "923100020",
            "timestamp": 1489170600,
            "txt_content": "kengshenxt 发表于 2017-3-10 19:47\n内个 输入ifconfig 并没有什么ip 怎么回事\n你的图呢！fuck！you！"
        },
        {
            "author": "kengshenxt",
            "timestamp": 1489205700,
            "txt_content": "923100020 发表于 2017-3-11 02:30\n你的图呢！fuck！you！\n看 图在这\n\n\n\n\n\nQQ截图20170311121034.png\n(43.17 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2017-3-11 12:15 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "923100020",
            "timestamp": 1489257000,
            "txt_content": "kengshenxt 发表于 2017-3-11 12:15\n看 图在这\n首先你要确保你的电脑连接上了路由器，你的实体机应该能获取到IP才能进行下一步，你在你cmd里输入ipconfig看看\n然后就是你可能编辑配置文件的时候手抖打错字了，你给我看看你的网卡配置文件\nnano /etc/network/interfaces\n如果实在不行你试试用这条命令看看成不成\ndhclient eth0"
        },
        {
            "author": "kengshenxt",
            "timestamp": 1489297980,
            "txt_content": "923100020 发表于 2017-3-12 02:30\n首先你要确保你的电脑连接上了路由器，你的实体机应该能获取到IP才能进行下一步，你在你cmd里输入ipconfi ...\n怎么看网卡配置文件？？？"
        },
        {
            "author": "923100020",
            "timestamp": 1489299780,
            "txt_content": "kengshenxt 发表于 2017-3-12 13:53\n怎么看网卡配置文件？？？\n我说你都是眼瞎的，我都说了命令了\nnano /etc/network/interfaces"
        },
        {
            "author": "gaoaijunjun",
            "timestamp": 1493372220,
            "txt_content": " 本帖最后由 gaoaijunjun 于 2017-4-28 22:34 编辑 \n\n求教  我的Navicat for MySQL链接服务器的时候提示如下\n求解"
        },
        {
            "author": "923100020",
            "timestamp": 1493485920,
            "txt_content": "gaoaijunjun 发表于 2017-4-28 17:37\n求教  我的Navicat for MySQL链接服务器的时候提示如下\n求解\n你图片看不到，提示网易云相册"
        },
        {
            "author": "pthultra",
            "timestamp": 1493766360,
            "txt_content": "linux超赞， debian超赞（我才不会说我是一只编程狗）"
        },
        {
            "author": "923100020",
            "timestamp": 1493960640,
            "txt_content": "pthultra 发表于 2017-5-3 07:06\nlinux超赞， debian超赞（我才不会说我是一只编程狗）\ndebian确实超赞，年轻人不要太飘"
        },
        {
            "author": "DreamMinecraft",
            "timestamp": 1494667680,
            "txt_content": "请问楼主用了什么版本的Debian？我的Debian8无桌面环境256MB内存带一个网站+SS"
        },
        {
            "author": "923100020",
            "timestamp": 1494858720,
            "txt_content": "DreamMinecraft 发表于 2017-5-13 17:28\n请问楼主用了什么版本的Debian？我的Debian8无桌面环境256MB内存带一个网站+SS\n可以的没毛病，我也是Debian8   听说最近9出来了，你网站内存占用多大？"
        },
        {
            "author": "635419450",
            "timestamp": 1498543260,
            "txt_content": "说的好，我选择部署centos\n\n\n\n\nQQ图片20170627135739.png (7.43 KB, 下载次数: 0)\n\n下载附件\n\n2017-6-27 13:57 上传\n\n\n\n\n"
        },
        {
            "author": "KK_MPO",
            "timestamp": 1498996200,
            "txt_content": "楼主幸苦了   支持下"
        },
        {
            "author": "ygf233",
            "timestamp": 1499005920,
            "txt_content": "debian开服的效率比Windows的高？"
        },
        {
            "author": "923100020",
            "timestamp": 1499576280,
            "txt_content": "ygf233 发表于 2017-7-2 22:32\ndebian开服的效率比Windows的高？\n只是少用点内存以外我觉得都差不多，性能上都差不多，还有就是操作系统上吧，“效率高”"
        },
        {
            "author": "27831501",
            "timestamp": 1509116880,
            "txt_content": "楼主，我完全没接触过linux系统。配置ftp的时候修改了该怎么保存？我百度的说按ESC可是我按了之后无效，Ctrl+[组合键也无效。该怎么弄？"
        },
        {
            "author": "923100020",
            "timestamp": 1511343000,
            "txt_content": "27831501 发表于 2017-10-27 23:08\n楼主，我完全没接触过linux系统。配置ftp的时候修改了该怎么保存？我百度的说按ESC可是我按了之后无效，Ctr ...\n去学习一下使用Linux下的文本编辑器"
        },
        {
            "author": "soud",
            "timestamp": 1516614540,
            "txt_content": "MCBBS有你更精彩~"
        },
        {
            "author": "华南。",
            "timestamp": 1530340980,
            "txt_content": "怎么写一个 每次点重启自动复制save里面的地图，还有自动重启 ……"
        },
        {
            "author": "MC天佑",
            "timestamp": 1532271240,
            "txt_content": "楼主写的复杂凌乱教程使我悲伤，不知从何下手，不知该不该买虚拟服务器了"
        },
        {
            "author": "1759749908",
            "timestamp": 1532308320,
            "txt_content": "何必要虚拟机这么麻烦，直接在WIN10商店中下载Debian就行了\n"
        },
        {
            "author": "狐狐狸狸",
            "timestamp": 1589789760,
            "txt_content": "谢谢大佬！！！！"
        },
        {
            "author": "dgscs276153251",
            "timestamp": 1610774400,
            "txt_content": "大佬看不到图片了"
        }
    ]
}