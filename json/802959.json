{
    "title": "[信息]ServerNick——修改DedicatedServer的Logger的名字[1.12]",
    "author": "GiNYAi",
    "replyCount": 13,
    "timestamp": 1530624960,
    "txt_content": " 本帖最后由 GiNYAi 于 2018-8-18 09:48 编辑 \nServerNick\n某人觉得[net.minecraft.server.dedicated.DedicatedServer]太长了,于是有了这个插件.\n适用于SpongeForge-1.12.2\n\n其实修改log4j2的配置文件也可以实现类似的效果，使用解压软件打开forge-1.12.2-14.23.4.2705-universal.jar、\n将其中的log4j2.xml复制到根目录，使用文本编辑器编辑 %logger -> %logger{1}\n那么输出的效果就由[net.minecraft.server.dedicated.DedicatedServer] -> [DedicatedServer]\n参考:http://logging.apache.org/log4j/2.x/manual/layouts.html\n\n命令\n无\n权限\n无\n效果\n使用前\n\n\n\n\nTIM图片20180703214410.png (16.23 KB, 下载次数: 3)\n\n下载附件\n\n2018-7-3 21:48 上传\n\n\n\n\n使用后\n\n\n\n\nTIM图片20180703214418.png (12.19 KB, 下载次数: 3)\n\n下载附件\n\n2018-7-3 21:48 上传\n\n\n\n\n\n配置文件\nServerNick.conf\nservernick:{\n        //修改后的名字 可以使用§为标记的样式代码\n        nick:\"§aServer§r\"\n}复制代码\n源代码\n@Plugin(id = \"servernick\")\npublic class ServerNickPlugin {\n    @Inject\n    private Logger logger;\n    @Inject@ConfigDir(sharedRoot = true)\n    private Path configDir;\n    @Listener(order = Order.PRE)\n    public void onPreInit(GamePreInitializationEvent event) throws IOException, NoSuchFieldException, IllegalAccessException {\n        Path configPath = configDir.resolve(\"ServerNick.conf\");\n        Sponge.getAssetManager().getAsset(this,\"default_config.conf\").get().copyToFile(configPath,false);\n        ConfigurationNode node = HoconConfigurationLoader.builder().setPath(configPath).build().load();\n        String nick = node.getNode(\"servernick\",\"nick\").getString(\"Server\");\n        Field loggerField = ReflectionHelper.findField(DedicatedServer.class,\"LOGGER\",\"field_155771_h\");\n        loggerField.setAccessible(true);\n        org.apache.logging.log4j.core.Logger origin = (org.apache.logging.log4j.core.Logger) loggerField.get(null);\n        Field nameField = org.apache.logging.log4j.spi.AbstractLogger.class.getDeclaredField(\"name\");\n        nameField.setAccessible(true);\n        nameField.set(origin,nick);\n    }\n}复制代码\n附件\n\n\n\nServerNick-1.12.2-0.1.0.jar\n(3.62 KB, 下载次数: 84)\n\n\n\n2018-7-3 21:35 上传\n点击文件名下载附件\n\n\n\n\n\n\n更新日志\n0.1.0            2018-07-03            第一版发布\n本插件所用所有代码均为原创,不存在借用/抄袭等行为\n\n",
    "replies": [
        {
            "author": "阴阳师元素祭祀",
            "timestamp": 1530625560,
            "txt_content": "加个reload功能比较好吧\n要不然重启来reload配置文件好麻烦"
        },
        {
            "author": "GiNYAi",
            "timestamp": 1530625860,
            "txt_content": "阴阳师元素祭祀 发表于 2018-7-3 21:46\n加个reload功能比较好吧\n要不然重启来reload配置文件好麻烦\n但是，我拒绝\n\n\n主要是 我认为，在运行过程中修改logger的名字并不合适。"
        },
        {
            "author": "粘兽",
            "timestamp": 1530651720,
            "txt_content": "这个插件可以，给你丶个赞⑧"
        },
        {
            "author": "2726932825",
            "timestamp": 1530670200,
            "txt_content": "逛sponge插件板块，全是大佬"
        },
        {
            "author": "幻想112",
            "timestamp": 1530693420,
            "txt_content": "这个确实给力 言简意赅"
        },
        {
            "author": "pakho",
            "timestamp": 1530772740,
            "txt_content": "极简主义的插件~~~"
        },
        {
            "author": "liusuizuishuai",
            "timestamp": 1530777600,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "zYue.",
            "timestamp": 1530778260,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "酒石酸菌",
            "timestamp": 1530780540,
            "txt_content": "哈哈，我正想吐槽这个呢，太棒了，强迫症福音"
        },
        {
            "author": "635419450",
            "timestamp": 1541776860,
            "txt_content": "的确长的不太舒服，玩家发信息总是换行，拿去用用"
        },
        {
            "author": "浮梦蜀黍",
            "timestamp": 1543074240,
            "txt_content": "\n的确长的不太舒服，玩家发信息总是换行，拿去用用"
        },
        {
            "author": "二哈大魔王",
            "timestamp": 1552515180,
            "txt_content": "可不可以加个一个屏蔽掉一些关键词的信息的功能啊。。"
        },
        {
            "author": "Not102",
            "timestamp": 1552651620,
            "txt_content": "使控制台又整洁了"
        }
    ]
}