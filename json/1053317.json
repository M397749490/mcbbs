{
    "title": "centos关于内存分配问题",
    "author": "aard_mo",
    "replyCount": 6,
    "timestamp": 1590789900,
    "txt_content": "请问启动服务端直接用java -jar 启动和分配内存启动有什么区别\n直接启动的话开启服务器的内存会明显减少，也不出现卡的状态，可是如果分配内存启动的话，由于我的服务器内存只有2g，转移虚拟内存时cpu占用就会居高不下 很久都打不开服务器\n直接java -jar启动会对性能有影响么\n\n",
    "replies": [
        {
            "author": "wjwrh",
            "timestamp": 1590789900,
            "txt_content": "我个人的建议是\n把Xms和Xmx分配的一样\n然后启用AlwaysPreTouch\n这样JVM会在创建的时候直接一次找系统分配所有的内存\n\n这样能够避免你说的转移内存时CPU占用过高的问题"
        },
        {
            "author": "もぺもぺ",
            "timestamp": 1590791880,
            "txt_content": "其实直接 java -jar 实际上也是设置了一个内存上限。\n\n缺内存的话建议换成 openj9"
        },
        {
            "author": "もぺもぺ",
            "timestamp": 1590793320,
            "txt_content": "你看\nJVM初始分配的堆内存由-Xms指定，默认是物理内存的1/64；JVM最大分配的堆内存由-Xmx指定，默认是物理内存的1/4。默认空余堆内存小于40%时，JVM就会增大堆直到-Xmx的最大限制；\nhttps://www.cnblogs.com/EasonJim/p/7490114.html"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1590793440,
            "txt_content": "不设置的话默认好像是256M\n\n当然256M的话正常是不会卡的(以前没设置Xmx，试过，很流畅)，只是跑图等占用大量内存的情况时会卡一点\n\n可以配合gc参数"
        },
        {
            "author": "aard_mo",
            "timestamp": 1590802860,
            "txt_content": "wjwrh 发表于 2020-5-30 06:05\n我个人的建议是\n把Xms和Xmx分配的一样\n然后启用AlwaysPreTouch\n谢谢啦 解决了困扰很久的问题"
        },
        {
            "author": "aard_mo",
            "timestamp": 1590802860,
            "txt_content": "wjwrh 发表于 2020-5-30 06:05\n我个人的建议是\n把Xms和Xmx分配的一样\n然后启用AlwaysPreTouch\n谢谢啦 解决了困扰很久的问题"
        }
    ]
}