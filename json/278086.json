{
    "title": "刚写完的一个实例,大家帮忙看看有没有不对的地方",
    "author": "ab8568571",
    "replyCount": 9,
    "timestamp": 1400654760,
    "txt_content": "昨天朋友叫我帮忙写MC插件,所以昨天下午开始就在论坛上面找资料学习,弄到晚上12点,今天早上开始写\n主要实现两个功能:\n/setlobby    记录发送者当前坐标,需要op权限\n/lobby   传送到已记录的坐标\nplugin.yml如下name: lobby\nmain: com.Winnie.Setlobby\nauthor: Winnie\nversion: 1.0\ncommands:\n    setlobby:\n        description: 设置坐标点\n        usage: /<command>\n    \n    lobby:\n        description: 传送到设置好的坐标点\n        usage: /<command>复制代码下面是主类package com.Winnie;\n\nimport java.io.File;\nimport org.bukkit.ChatColor;\nimport org.bukkit.Location;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.entity.Player;\nimport org.bukkit.plugin.java.JavaPlugin;\n\n/**\n *\n * @author Winnie\n */\npublic class Setlobby extends JavaPlugin {\n\n    @Override\n    public void onEnable() {\n        //注册命令行\n       getCommand(\"setlobby\").setExecutor(new MyCommands(this));\n       getCommand(\"lobby\").setExecutor(new MyCommands(this));\n    }\n\n    @Override\n    public void onDisable() {\n    }\n\n    class MyCommands implements CommandExecutor {\n        private Setlobby main;\n        public MyCommands(Setlobby lobby){\n            this.main=lobby;\n        }\n        @Override\n        public boolean onCommand(CommandSender cs, Command cmnd, String lable, String[] strings) {\n            Player player = (Player) cs;//获取发送者\n            if (lable.equalsIgnoreCase(\"setlobby\")) {//setlobby指令处理\n                //检查是否op\n                if (player.isOp()) {\n                    \n                    File configFile = new File(getDataFolder(), \"config.yml\");//config.yml定义\n                    if (!configFile.exists()) {//不存在的话建一个\n                        saveDefaultConfig();\n                    }\n                    \n                    //把发送者当前的坐标存在config.yml里面\n                    FileConfiguration config = getConfig();\n                    Location lcn = player.getLocation();\n                    config.set(\"x\", lcn.getX());\n                    config.set(\"y\", lcn.getY());\n                    config.set(\"z\", lcn.getZ());\n                    saveConfig();\n                    player.sendMessage(ChatColor.AQUA + \"记录坐标成功\");\n                    return true;\n                } else {\n                    player.sendMessage(ChatColor.AQUA + \"只有OP才能使用此指令\");\n                }\n            }\n\n            if (lable.equalsIgnoreCase(\"lobby\")) {//lobby指令处理\n                \n                //读取config.yml文件里面的坐标\n                File configFile = new File(getDataFolder(), \"config.yml\");\n                if (!configFile.exists()) {\n                    saveDefaultConfig();\n                }\n                FileConfiguration config = getConfig();\n                \n                //把坐标保存在Location里面\n                Location lcn = new Location(player.getWorld(),config.getDouble(\"x\"),config.getDouble(\"y\"),config.getDouble(\"z\"));\n                player.teleport(lcn);//把发送者传送到该坐标\n                player.sendMessage(ChatColor.AQUA + \"记录坐标成功\");\n            }\n            return false;\n        }\n\n    }\n}\n复制代码第一次写插件,请大家帮忙看看有没有不对的地方\n",
    "replies": [
        {
            "author": "simon3000",
            "timestamp": 1400655000,
            "txt_content": "只看得懂int什么的烂java技术路过"
        },
        {
            "author": "暗夜之猫",
            "timestamp": 1400656680,
            "txt_content": "写的很好，没有不正确的地方，只是我觉得把输出config.yml文件的这段代码放到onEnable函数中可能会比较好"
        },
        {
            "author": "hsk001ufo",
            "timestamp": 1400658900,
            "txt_content": "=。=虽然没接触过写Bukkit的插件但是看起来不错"
        },
        {
            "author": "22b",
            "timestamp": 1400665740,
            "txt_content": "小学生路过{:10_494:}"
        },
        {
            "author": "Lucky777777",
            "timestamp": 1400677560,
            "txt_content": " 73.                player.sendMessage(ChatColor.AQUA + \"记录坐标成功\");74.            }这里得提示信息应该是传送成功之后的信息吧？"
        },
        {
            "author": "ab8568571",
            "timestamp": 1400681160,
            "txt_content": "Lucky777777 发表于 2014-5-21 21:06\n这里得提示信息应该是传送成功之后的信息吧？\n嗯,已经改了,因为是拷贝,所以没注意"
        },
        {
            "author": "Lucky777777",
            "timestamp": 1400681880,
            "txt_content": "ab8568571 发表于 2014-5-21 22:06\n嗯,已经改了,因为是拷贝,所以没注意\n  嗯 看出来后面有几段是这样的了"
        },
        {
            "author": "hyb518",
            "timestamp": 1402315620,
            "txt_content": "不错，收藏学习了……"
        },
        {
            "author": "a8105",
            "timestamp": 1402319220,
            "txt_content": "File configFile = new File(getDataFolder(), \"config.yml\");\n这里的config.yml可以改为玩家名.yml,\n然后FileConfiguration config=YamlConfiguration.load(configFile);\n"
        }
    ]
}