{
    "title": "Darost's Mod1.8开发教程 第二章 - 添加一个无材质的方块与物品[InfStudio]",
    "author": "mcjava",
    "replyCount": 19,
    "timestamp": 1434256920,
    "txt_content": " 本帖最后由 mcjava 于 2015-8-28 21:15 编辑 \n第二章 - 添加一个无材质的方块与物品大家好，今天我给大家带来基于Forge 1.8.0的 Mod 开发教程。鉴于目前基础教程过多，本教程不会从Java基础讲起，也不会讲解Forge环境搭建。如果没有Java基础，请先看看别的大触的基础教程，再来学习这个。\n首先，我们打开上节课写的代码，还记得@EventHandler的方法参数的含义吗？FMLPreInitializationEvent 预初始化：       这个阶段用于进行创建方块、物品，注册等的初始化。FMLInitializationEvent 初始化：       这个阶段用于与其他Mod通信。FMLPostInitializationEvent 初始化以后：       这个时候因为所有的Mod都载入了，所以这个阶段可以用于对其他Mod的交互准备操作。\n我们可以看到，FMLPreInitializationEvent 预初始化 是用来创建方块、物品，信息注册等的操作，我们要制作第一个物品，就要从这里开始写代码。 先定义一个静态字段在RubyMain类里：public static Item ruby;复制代码\n需要import的类:net.minecraft.item.Item;复制代码Item：什么是Item？就是你手里拿的物品且不能右键放下。例如：钻石、绿宝石、怪物蛋、末影珍珠、骨头、烈焰棒等。（字段最好不要使用大写，允许使用下划线“_”，因为大写在mc的其他设置中可能会鬼畜，所以不建议使用，但是在JAVA的字段规范中，是很少使用下划线的，一般都是单词首字母大写，例如：这个字段表示燃烧时间，即为burnTime，食物是否可以给狗吃即为isWolfFood）接下来我们在FMLPreInitializationEvent处添加以下代码：ruby = new Item();//实例化一个Item\n              ruby.setCreativeTab(CreativeTabs.tabRedstone);//设置物品的Tab(创造标签)\n              ruby.setUnlocalizedName(\"ruby\");//设置物品的名字\n              GameRegistry.registerItem(ruby, \"ruby\");//注册物品复制代码需要import的类:net.minecraftforge.fml.common.registry.GameRegistry;复制代码\n好，你有可能已经不知道这是在干嘛了吧！我来讲解一下：第一行代码是实例化一个Item类，第二行是Item提供的方法setCreativeTab(CreativeTabstab); ，用于设置物品的Tab(创造标签)，CreativeTabs.tabRedstone是指红石tab的一个常量。第三行是Item提供的方法setUnlocalizedName(String name);，用于设置物品的名字。第四行的GameRegistry是Forge提供的一个物品/方块/TileEntity/熔炼/合成等的注册类，我在此先不介绍那么多，后面再介绍。registerItem(Item item, String name);，用于注册Item的一个方法，如果没有这一代码，其他操作都是白做。（强烈建议Item所有名字都与字段名相同否则以后寻找的时候非常麻烦）Item提供的常用方法：setCreativeTab(CreativeTabs tab); //设置物品的Tab(创造标签)setUnlocalizedName(String name); //设置物品的名字getCreativeTab(); //获取物品所在Tab(创造标签)getDamage(ItemStack stack);//获取一个ItemStack的损坏度 （ItemStack后面会讲到，读者不需要现在理解）setDamage(ItemStack stack, int damage); //设置一个ItemStack的损坏度setMaxDamage(int maxDamageIn);//设置物品的最大损坏度setMaxStackSize(int maxStackSize); //设置物品的最大堆叠值 你进了游戏，点开红石tab，你会发现为什么他是没有材质的？为什么他是方框形的？因为1.8对材质模型改动极大，我们现在制作的物品是没有写任何json模型的，所以导致了这样。我将分开写这一部分，将在后面为大家讲解。以上代码可以简化，我将在后文讲到。\n接着我们做一个方块，还是如物品一样，先创建一个静态字段：\npublic static Block ruby_ore;复制代码需要import的类:net.minecraft.block.Block;复制代码Block：什么是Block？就是你随处可见的，可以右键放置的东西。如：草方块、泥土、圆石、石头、沙子、玻璃版、熔炉、合成台、酿造台等，并不是所有方块都是方形的。（字段最好不要使用大写，允许使用下划线“_”，因为大写在mc的其他设置中可能会鬼畜，所以不建议使用，但是在JAVA的字段规范中，是很少使用下划线的，一般都是单词首字母大写，例如：这个字段表示燃烧时间，即为burnTime，食物是否可以给狗吃即为isWolfFood）下面我们新建一个类，名为RubyOre.java 复制以下代码到RubyOre.java：\npublic class RubyOre extends Block{\n \n       public RubyOre(Material materialIn) {\n              super(materialIn);\n       }\n}复制代码需要import的类：net.minecraft.block.Block;\nnet.minecraft.block.material.Material;复制代码讲解代码：extends Block是继承Block类，让他能被Forge识别是一个Block的类。public RubyOre(MaterialmaterialIn) 是Block的构造方法，Material为方块材质（此材质非彼材质，是一个方块声音等的类型），super(materialIn);  是调用超类的构造函数public Block (Material materialIn)，用于设置Material 。接下来我们在FMLPreInitializationEvent处添加以下代码：\n              ruby_ore = new RubyOre(Material.rock);//实例化一个RubyOre\n              ruby_ore.setCreativeTab(CreativeTabs.tabRedstone);//设置方块的Tab(创造标签)\n              ruby_ore.setUnlocalizedName(\"ruby_ore\");//设置方块的名字\n              GameRegistry.registerBlock(ruby_ore, \"ruby_ore\");//注册方块复制代码第一行：实例化我们刚刚创建的类，参数一的Material.rock是一个常量，代表石头；第二行：与物品的setCreativeTab相同；第三行：与物品的setUnlocalizedName相同；第四行：GameRegistry提供的方法registerBlock(Block b,String name)用于注册方块Block提供的常用方法：setBlockBounds(float minX, float minY, float minZ, floatmaxX, float maxY, float maxZ) //设置方块的大小setCreativeTab(CreativeTabs tab)//设置方块的TabsetLightLevel(float value)//设置方块亮度，1F为最亮，0F为不亮setHardness(float hardness)//设置方块的硬度setUnlocalizedName(name)//设置方块的名字你进了游戏，点开红石tab，你会发现为什么他是没有材质的？因为1.8对材质模型改动极大，我们现在制作的物品是没有写任何json模型的，所以导致了这样。我将分开写这一部分，将在后面为大家讲解。\n以上代码可以简化，我将在后文讲到。 化简代码：你是不是觉得这样写太繁琐了？是不是觉得这样维护量太大了？来吧！现在教你如何化简代码。物品简化：先把主类里这节课写的代码全部删去，然后我们创建一个类 --> Ruby.java复制以下代码进Ruby.java：\npublic class Ruby extends Item{\n       public Ruby(String name){//构造方法\n              setCreativeTab(CreativeTabs.tabRedstone);//设置物品的Tab(创造标签)\n              setUnlocalizedName(name);//设置物品的名字\n              GameRegistry.registerItem(this, name);//注册物品\n       }\n}复制代码解说：第一行extends Item指继承Item类 使他能被Forge识别是一个物品。第二行：是Ruby的构造方法。参数1是物品名字。第3~5行就是刚刚注册Item的代码，不过有所不同：直接使用setCreativeTab、setUnlocalizedName，因为这是在Item实例中，可以省去 this. 。registerItem的Item直接填写this，因为this就是这个Item实例。接下来我们在主类添加以下静态常量字段并赋值一个实例化的Ruby：public static final Item ruby = new Ruby(\"ruby\");复制代码这样一行就能代替原本许多的代码了。方块简化：我们打开RubyOre.java，复制以下代码进入RubyOre.java：\npublic class RubyOre extends Block{\n       public RubyOre(Material materialIn,String name) {\n              super(materialIn);\n              setCreativeTab(CreativeTabs.tabRedstone);//设置方块的Tab(创造标签)\n              setUnlocalizedName(name);//设置方块的名字\n              GameRegistry.registerBlock(this, name);//注册方块\n       }\n}复制代码第一行extends Block指继承Block类 使他能被Forge识别是一个方块。第二行：RubyOre.java的构造方法第三行：调用超类的构造方法第4~6行：就是刚刚注册Item的代码，不过有所不同：直接使用setCreativeTab、setUnlocalizedName，因为这是在Block实例中，可以省略 this. 。registerBlock的Item直接填写this，因为this就是这个个Block实例。接着，在主类添加以下静态常量字段并赋值一个实例化的RubyOre：public static final Block ruby_ore = new RubyOre(Material.rock,\"ruby_ore\");复制代码这样一行就能代替原本许多的代码了。 以上内容，你学会了吗？\n上一章            回到索引            下一章\n[groupid=534]InfinityStudio[/groupid]",
    "replies": [
        {
            "author": "ygujyh",
            "timestamp": 1434638220,
            "txt_content": "求更....."
        },
        {
            "author": "mcjava",
            "timestamp": 1434667440,
            "txt_content": "ygujyh 发表于 2015-6-18 22:37\n求更.....\n别着急~今天或者周末有空会更的"
        },
        {
            "author": "x1ongxiong",
            "timestamp": 1434849960,
            "txt_content": "Item的tab是随便输的吗？还是只能用你写的那个？还是有几个可选择"
        },
        {
            "author": "mcjava",
            "timestamp": 1434850440,
            "txt_content": "x1ongxiong 发表于 2015-6-21 09:26\nItem的tab是随便输的吗？还是只能用你写的那个？还是有几个可选择\nCreativeTabs里面的常量自己eclipse查一下，不止这个的\n\n这个只是红石的Tab，还有许多如方块、工具、运输什么的"
        },
        {
            "author": "x1ongxiong",
            "timestamp": 1434851040,
            "txt_content": "mcjava 发表于 2015-6-21 09:34\nCreativeTabs里面的常量自己eclipse查一下，不止这个的\n\n这个只是红石的Tab，还有许多如方块、工具、运输 ...\n谢了。对了怎么给你评分之类的，我是新手，点不来"
        },
        {
            "author": "x1ongxiong",
            "timestamp": 1434851400,
            "txt_content": "mcjava 发表于 2015-6-21 09:34\nCreativeTabs里面的常量自己eclipse查一下，不止这个的\n\n这个只是红石的Tab，还有许多如方块、工具、运输 ...\n可是文件里那些英文名看不懂怎么办？能翻译几个吗？"
        },
        {
            "author": "天蝎_心殇",
            "timestamp": 1436404800,
            "txt_content": "x1ongxiong 发表于 2015-6-21 09:50\n可是文件里那些英文名看不懂怎么办？能翻译几个吗？\n你可以进入MC，把MC调成英文，自己对照"
        },
        {
            "author": "x1ongxiong",
            "timestamp": 1437374400,
            "txt_content": "有人知道更多Item类和Block类的提供的方法函数吗？"
        },
        {
            "author": "x1ongxiong",
            "timestamp": 1437392220,
            "txt_content": "有个问题：简化Item时往主类写的public static final Item ruby = new Ruby(\"ruby\");在eclipse里提示有错，说应去掉无效修饰符只保留final，我改了后能正常运行，可以改吗？\n还有，这里只写在主类添加不太清楚，最好加上是在FMLPreInitializationEvent里还是FMLPreInitializationEvent前。我一开始写在FMLPreInitializationEvent里，结果后来第三章在FMLInitializationEvent添加代码时显示这个常量未定义，检查很久才想到应写到FMLPreInitializationEvent前。"
        },
        {
            "author": "mcjava",
            "timestamp": 1437397200,
            "txt_content": "x1ongxiong 发表于 2015-7-20 19:37\n有个问题：简化Item时往主类写的public static final Item ruby = new Ruby(\"ruby\");在eclipse里提示有错， ...\n你好：\n在方法内是不允许使用public关键字的，所以不需要声明，本教程需要一定的Java基础"
        },
        {
            "author": "x1ongxiong",
            "timestamp": 1437456480,
            "txt_content": "我制作了1个block，想让它和黑曜石的硬度一样、和石头亮度一样，使用\nsetLightLevel(float value)//设置方块亮度\nsetHardness(float hardness)//设置方块的硬度\n时，这两个函数的参数分别应填多少？"
        },
        {
            "author": "AFP",
            "timestamp": 1438674600,
            "txt_content": "\n求lz看看这个哪里错了"
        },
        {
            "author": "mcjava",
            "timestamp": 1438674660,
            "txt_content": "AFP 发表于 2015-8-4 15:50\n求lz看看这个哪里错了\n构造函数的问题，这是java基础\n\n检查Pigblock的构造函数的参数"
        },
        {
            "author": "AFP",
            "timestamp": 1438678320,
            "txt_content": "mcjava 发表于 2015-8-4 15:51\n构造函数的问题，这是java基础\n\n检查Pigblock的构造函数的参数\n感谢~原来是参数的P没有大写导致的"
        },
        {
            "author": "AFP",
            "timestamp": 1438763220,
            "txt_content": "帮lz补充一下，关于block的常用方法还有.setResistance（）爆炸抗性，因为lz没写我翻了好久的源代码才找到"
        },
        {
            "author": "党靖皓1234",
            "timestamp": 1439466420,
            "txt_content": "做个索引贴把,好收藏{:10_492:}"
        },
        {
            "author": "a11889",
            "timestamp": 1439789520,
            "txt_content": "← ←其实按照Google Java Style字段命名用lowerCamelCase而不是下划线...代码风格每个人都不一样的，这一点希望说明一下"
        },
        {
            "author": "mcjava",
            "timestamp": 1439790660,
            "txt_content": " 本帖最后由 mcjava 于 2015-8-17 13:56 编辑 \na11889 发表于 2015-8-17 13:32\n← ←其实按照Google Java Style字段命名用lowerCamelCase而不是下划线...代码风格每个人都不一样的，这一 ...\n其实这是说Forge里变量最好不用大写..因为我推荐把材质名称、物品名称、字段名称统一，方便查找更改，如果材质名称是大写加材质等地方的时候会出神奇的BUG\n这里我应该再说明一下"
        },
        {
            "author": "a11889",
            "timestamp": 1439793600,
            "txt_content": "mcjava 发表于 2015-8-17 13:51\n其实这是说Forge里变量最好不用大写..因为我推荐把材质名称、物品名称、字段名称统一，方便查找更改，如果 ...\n确实。不过我的习惯是lowerCamelCase和underline_name一起用233"
        }
    ]
}