{
    "title": "如何在主类外面使用getConfig()?",
    "author": "Gerryawa",
    "replyCount": 13,
    "timestamp": 1588936740,
    "txt_content": "RT\n在主类外面使用getConfig()报错\n\n\n\n\n@R29MZ2IL490@S8VK)E`}~E.png (14.45 KB, 下载次数: 0)\n\n下载附件\n\n2020-5-8 19:18 上传\n\n\n\n\n\n",
    "replies": [
        {
            "author": "结城希亚",
            "timestamp": 1588936980,
            "txt_content": "在主类加上public static Plugin plugin;\n\n在onEnable里加上\nplugin = this;\n\n然后其他类需要的时候，前面加上“主类名.plugin”就行了"
        },
        {
            "author": "Gerryawa",
            "timestamp": 1588937100,
            "txt_content": "结城希亚 发表于 2020-5-8 19:23\n在主类加上public static Plugin plugin;\n\n在onEnable里加上\n谢谢大佬"
        },
        {
            "author": "结城希亚",
            "timestamp": 1588937220,
            "txt_content": "jjjooo233 发表于 2020-5-8 19:25\n谢谢大佬\n我推荐另一种方法     Plugin config = Bukkit.getPluginManager().getPlugin(\"插件名\");\n            File file1=new File(config.getDataFolder(),\"config.yml\");\n            FileConfiguration config1=YamlConfiguration.loadConfiguration(file1);复制代码\n\n\n可以直接扔到其他类里\n\n直接用config1代替getConfig()，这样更方便，而且还支持其他文件\n"
        },
        {
            "author": "William_Shi",
            "timestamp": 1588941360,
            "txt_content": "主类继承javaplugin\ngetConfig这个方法是JavaPlugin的方法\n虽然你主类里没出现这个方法\n但是因为JavaPlugin里面有了这个方法，你没覆写也可以调用父类的方法\n\n\n从其他类获取主类的方法很多\n比如主类里通过向其他类构造函数传参this\n或者PluginManager#getPlugin\n或者主类写一个getInstance方法返回this等\n\n\n反正任何获取主类实例的方法\n其思路绝不应当是通过JavaPluginClassLoader强行新建主类实例就对了\n（顺便吐槽不遵守双亲委派啊啊啊）"
        },
        {
            "author": "stevexu",
            "timestamp": 1589091780,
            "txt_content": "我的方法是在主类中\npublic static FileConfiguration config;\n然后onEnable() 加载完插件后\nconfig = getConfig();\n这样用 主类.config 就能使用"
        },
        {
            "author": "新科",
            "timestamp": 1589164020,
            "txt_content": "stevexu 发表于 2020-5-10 14:23\n我的方法是在主类中\npublic static FileConfiguration config;\n然后onEnable() 加载完插件后\n这样的话 reloadConfig() 貌似就要自己写额外逻辑了，config变成了YamlConfiguation的copy，所以reload也没办法改变config里面的值"
        },
        {
            "author": "MC_longxi",
            "timestamp": 1589170500,
            "txt_content": "这个插件用这一直很舒服"
        },
        {
            "author": "MC_longxi",
            "timestamp": 1589170560,
            "txt_content": "这个插件用这一直很舒服"
        },
        {
            "author": "Gerryawa",
            "timestamp": 1589173860,
            "txt_content": "MC_longxi 发表于 2020-5-11 12:16\n这个插件用这一直很舒服\n哥你回复错帖了吧。。"
        },
        {
            "author": "黎子柒",
            "timestamp": 1589279820,
            "txt_content": "jjjooo233 发表于 2020-5-11 13:11\n哥你回复错帖了吧。。\n你可以在主类公开一个变量，类型是主类的名字，变量名自己定"
        },
        {
            "author": "AdvancedMical",
            "timestamp": 1589354460,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "天不生我阿瑾",
            "timestamp": 1592559900,
            "txt_content": "结城希亚 发表于 2020-5-8 19:23\n在主类加上public static Plugin plugin;\n\n在onEnable里加上\n感谢大佬，这种方法在开发中怎么叫？"
        },
        {
            "author": "William_Shi",
            "timestamp": 1592576580,
            "txt_content": "天不生我阿瑾 发表于 2020-6-19 17:45\n感谢大佬，这种方法在开发中怎么叫？\n静态变量\nhttps://www.runoob.com/java/java-variable-types.html\n\n说白了就是每个插件的主类是单例化的\n所以可以用一个静态变量代表主类的实例本身"
        }
    ]
}