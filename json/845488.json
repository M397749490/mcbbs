{
    "title": "关于Inventory求助",
    "author": "si_12",
    "replyCount": 9,
    "timestamp": 1550280360,
    "txt_content": " 本帖最后由 hahahawtf123 于 2019-2-16 11:24 编辑 \n\n          我在做Gui的时候发现一个问题\n        我设置了点击gui内物品 取消时间，防止玩家把物品拿下来 \n然后我在该Gui内设置了一个物品，点击就关闭背包\n然后我用数字键点击该物品，将其放入背包，然后那个Gui面板就关闭了\n我也把物品拿下来了\n怎么办？\n我已经setCancelled（true）了 \n（点击其他物品都会取消的）\n              \n\n\n坐等大佬\n\n\n\n\n\n捕获1.PNG (30.69 KB, 下载次数: 0)\n\n下载附件\n\n2019-2-16 11:23 上传\n\n\n\n\n\n\n\n\n\n\n捕获2.PNG (77.28 KB, 下载次数: 0)\n\n下载附件\n\n2019-2-16 11:23 上传\n\n\n\n\n\n                     我把物品卡下来后 放置在地面上后台就报错了\n\n\n\n\n捕获3.PNG (39.86 KB, 下载次数: 0)\n\n下载附件\n\n2019-2-16 11:23 上传\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1550284440,
            "txt_content": "一个小时了, 为什么还没有 dalao 来呢? 我来猜一下: 不贴代码问个屁问题"
        },
        {
            "author": "erry64",
            "timestamp": 1550286840,
            "txt_content": "evt.setCursor(null);"
        },
        {
            "author": "si_12",
            "timestamp": 1550287080,
            "txt_content": "凋灵兔子 发表于 2019-2-16 10:34\n一个小时了, 为什么还没有 dalao 来呢? 我来猜一下: 不贴代码问个屁问题\n这就上图"
        },
        {
            "author": "si_12",
            "timestamp": 1550287200,
            "txt_content": "berry64 发表于 2019-2-16 11:14\nevt.setCursor(null);\n大佬 还是不行，用数字键可以直接放进背包里"
        },
        {
            "author": "si_12",
            "timestamp": 1550290020,
            "txt_content": "Aemo 发表于 2019-2-16 12:02\n语句:event.setCanceled(true);应该放在语句:evevt.getWhoClicked().closeInventory();之前，能不能把代码 ...\n我就是写在这个前面的\n\n第一张图里有写的 在第二个if下面一行"
        },
        {
            "author": "海螺螺",
            "timestamp": 1550290920,
            "txt_content": "这玩意儿应该没有被拿下来，你的背包没有和服务器同步，可以用 player.updateInventory()\n\n另外，在写箱子gui时每个人可能都会犯的错误\nplayer.closeInventory()和player.updateInventory()不应该直接被调用，这个事件的javadocs描述如下，请自己翻译一遍，我觉得你能看懂\nBecause InventoryClickEvent occurs within a modification of the Inventory, not all Inventory related methods are safe to use.\n\nThe following should never be invoked by an EventHandler for InventoryClickEvent using the HumanEntity or InventoryView associated with this event:\n\nHumanEntity.closeInventory()\nHumanEntity.openInventory(Inventory)\nHumanEntity.openWorkbench(Location, boolean)\nHumanEntity.openEnchanting(Location, boolean)\nInventoryView.close()\nTo invoke one of these methods, schedule a task using BukkitScheduler.runTask(Plugin, Runnable), which will run the task on the next tick. Also be aware that this is not an exhaustive list, and other methods could potentially create issues as well.\nAssuming the EntityHuman associated with this event is an instance of a Player, manipulating the MaxStackSize or contents of an Inventory will require an Invocation of Player.updateInventory().\n\nModifications to slots that are modified by the results of this InventoryClickEvent can be overwritten. To change these slots, this event should be cancelled and all desired changes to the inventory applied. Alternatively, scheduling a task using BukkitScheduler.runTask( Plugin, Runnable), which would execute the task on the next tick, would work as well.\n\n还有你NPE了"
        },
        {
            "author": "si_12",
            "timestamp": 1550291760,
            "txt_content": "谢谢大佬们 我懂了qwq"
        },
        {
            "author": "langyo",
            "timestamp": 1550299260,
            "txt_content": "hahahawtf123 发表于 2019-2-16 12:36\n谢谢大佬们 我懂了qwq\n需要回复，请点击对应楼层左下角的回复按钮\n\n请尽量不要自己顶自己的帖子，这里的发帖习惯和百度贴吧不太一样"
        },
        {
            "author": "si_12",
            "timestamp": 1550316600,
            "txt_content": "langyo 发表于 2019-2-16 14:41\n需要回复，请点击对应楼层左下角的回复按钮\n\n请尽量不要自己顶自己的帖子，这里的发帖习惯和百度贴吧不太 ...\n哦哦 谢谢提醒"
        }
    ]
}