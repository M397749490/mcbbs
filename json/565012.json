{
    "title": "关于Set遍历  求帮助",
    "author": "q549365815",
    "replyCount": 8,
    "timestamp": 1457357580,
    "txt_content": " 本帖最后由 q549365815 于 2016-3-7 21:37 编辑 \n\n本人想做一个箱子随机物品\n\n遇到一个问题 本人连续几天都没解决 望大神帮助\n\nconfi文件</blockquote></div>\n</b><div class=\"blockcode\"><blockquote>随机物品:\n  自定义:\n    材质:1\n  自定义2:\n    材质:2复制代码\n\n本人代码:\nInventory inv = Bukkit.createInventory(player,27,\"§8箱子\");\nSet<String> list = config.getConfigurationSection(“随机物品\").getKeys(false);\nint invsize = inv.getSize();\n#for(String a : list)\n#System.out.print(a)\n#结果: 自定义  自定义2\nfor(int x = 0;x<invsize;x++)\n{\n    int y=(int)(Math.random()*5);\n    if(y==1)\n    {\n        if(list.iterator.hasNext())\n        {\n            for(String a:list)\n            {\n                int ItemPlay = config.getInt(\"随机物品.\"+a+\".材质\");\n               ItemStack item = new ItemStack(ItemPlay);\n               inv.setItem(x,item);\n            }\n        }\n    }\n}\n\n可是这样只会输出 自定义2的材质 求解决 谢谢\n\n",
    "replies": [
        {
            "author": "4one_R",
            "timestamp": 1457392740,
            "txt_content": "获取List的话一般用getStringList这个函数，不是getConfigurationSection"
        },
        {
            "author": "4one_R",
            "timestamp": 1457392860,
            "txt_content": "呃，没看到下面。都是list了为啥还要自定义1、自定义2呢"
        },
        {
            "author": "q549365815",
            "timestamp": 1457410140,
            "txt_content": "4one_R 发表于 2016-3-8 07:21\n呃，没看到下面。都是list了为啥还要自定义1、自定义2呢\n...........我这是自定义阿...\n就是可以自由添加/删减"
        },
        {
            "author": "云闪",
            "timestamp": 1457431920,
            "txt_content": "\n你的代码......双层for还夹带两个if......是要作死吗......\n唉_(:зゝ∠)_我帮你分析一下代码吧_(:зゝ∠)_你以后要记得\n千万不要轻易使用双层或以上的循环结构(除了部分排序算法)，更不要多层循环还要夹带多层判断结构，否则你的代码会很难理清楚的！！！_(:зゝ∠)_自己都看不懂的代码，有啥用呢_(:зゝ∠)_\n\n那么，分析如下：\n\nfor(int x = 0;x<invsize;x++)\n{\n}\n复制代码\n这是你的最外层结构，每次循环会使x增加1，在本次循环中x的值始终不变\n\nfor(String a:list)\n            {\n                int ItemPlay = config.getInt(\"随机物品.\"+a+\".材质\");\n               ItemStack item = new ItemStack(ItemPlay);\n               inv.setItem(x,item);\n            }\n复制代码\n这是你的最内层结构，上面的判断待会再说\n此处注意你最后的setItem方法：inv.setItem(x,item);，第一个参数(即Inventory的slot)，你使用的是x，那么x是从哪来的呢？看我的第一个分析可知，是最外层for来的，而且在最外层for循环一次之中，x的值始终不变\n\n也就是说你设置完“自定义”这个物品到Inventory中值为x的slot去以后，最内层for的第二次循环使用“自定义2”这个物品覆盖了“自定义”这个物品，这就是你“只输出自定义2的材质”的原因\n\n最后说说你那两个if：\n第一个：你是想要五分之一的几率？你为什么不用random.nextInt(5)==0呢(在类中加一个字段static Random random=new Random(System.currentTimeMillis()))？\n好，这个就当你不熟练，不知道这个更好的技巧......\n第二个：你那个if永远返回true你知道吗......好，有一种情况不返回true，就是你的配置一个材质都没有的时候，然而配置一个材质都没有的时候应该一开始就结束方法，你却还要循环27次，进行27次随机数计算，浪费大量资源= =\n\n\n\n啊，你要问我为什么会这样？你要问我怎么解决？\n对不起，对于Java基础都不熟的人，我从来不告诉他要怎么写，因为这样只会害了他，我只会说：请先去学习java基础，等你真正入门再来如插件坑，谢谢\n啊，你说有些东西不属于java的基础？你要知道有个→好东西←！你想说你不懂英文？我想说：你只需要初中甚至小学的基础，然后会用机翻就行了...\n\n\n=￣ω￣=此乃真心相劝"
        },
        {
            "author": "q549365815",
            "timestamp": 1457435700,
            "txt_content": "splt 发表于 2016-3-8 18:12\n你的代码......双层for还夹带两个if......是要作死吗......\n唉_(:зゝ∠)_我帮你分析一下代码吧_(:зゝ∠) ...\n哦\n昨天理通了下\n                                for(int x=0;x<invsize;x++)\n                                {\n                                        int y=(int) (Math.random()*5);\n                                        if(y==1)\n                                        {\n                                                final int ranom = (int) (Math.random()*listsize);\n                                                final String itemname = list.get(ranom);\n                                                final int itemplay = config.getInt(\"随机物品.\"+itemname+\".物品材质\");\n                                                final ItemStack item = new ItemStack(itemplay);\n                                            inv.setItem(x, item);\n\n                                        }\n                                }"
        },
        {
            "author": "云闪",
            "timestamp": 1457539560,
            "txt_content": "q549365815 发表于 2016-3-8 19:15\n哦\n昨天理通了下\n                                for(int x=0;x\n嗯，不错，虽然最后那几个变量完全没必要用final_(:_」∠)_\n对了，那个if，你可以直接\nif ( Math.random() > 0.8 ) {\n……\n}\n至于为啥_(:_」∠)_自己想，一定要去思考哦~~~"
        },
        {
            "author": "q549365815",
            "timestamp": 1457539860,
            "txt_content": "splt 发表于 2016-3-10 00:06\n嗯，不错，虽然最后那几个变量完全没必要用final_(:_」∠)_\n对了，那个if，你可以直接\nif ( Math.random( ...\n用static那么将不会被回收\n\n还有 随机数生成 我有我自己的想法"
        },
        {
            "author": "云闪",
            "timestamp": 1457541420,
            "txt_content": "q549365815 发表于 2016-3-10 00:11\n用static那么将不会被回收\n\n还有 随机数生成 我有我自己的想法\n嗯没问题，我只是建议，不过static虽然不会被回收，但是如果你需要频繁生成随机数，用static字段会减少大量的内存分配动作，而且就加一个static的Random也就多占用服务器几百字节的内存，毕竟这不是一个大对象更不是一个I/O对象嘛~\n不过一切主动权都是你的，毕竟这是你自己的项目，但还是建议你多了解一下java基础(真的掌握可难了)和java优化(这个更难qwq)相关的知识"
        }
    ]
}