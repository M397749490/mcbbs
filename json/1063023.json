{
    "title": "关于AttributePlus的属性问题",
    "author": "MZIMU",
    "replyCount": 2,
    "timestamp": 1592319720,
    "txt_content": "我想问问各位是怎么增加比如说\n物理攻击属性的数值的\n\n\n\n我用AttributeApi获取那个属性数据put到map里面没有用。。。难道是我想错了？\nAttributeAPI.getAttrData(p).getAttributeValue().put(key,value);复制代码\n",
    "replies": [
        {
            "author": "RE_OVO",
            "timestamp": 1592404800,
            "txt_content": "1. 请上你的具体代码啊, 不然咋知道错在哪\n2. 如果是1.9+版本Bukkit已自带了Attribute API，1.8/1.7当我没说"
        },
        {
            "author": "MZIMU",
            "timestamp": 1592452080,
            "txt_content": " 本帖最后由 MZIMU 于 2020-6-18 11:51 编辑 \njebme 发表于 2020-6-17 22:40\n1. 请上你的具体代码啊, 不然咋知道错在哪\n2. 如果是1.9+版本Bukkit已自带了Attribute API，1.8/1.7当我没 ...\n是1.12 \npublic static ZMAttributeData updataAttributeForWeapons(Player p){\n            ItemStack handItem = p.getInventory().getItemInMainHand();\n            Equipment.WeaponsType weaponsType = Equipment.WeaponsType.valueOf(handItem);\n            if(weaponsType!=null){\n                ZMAttributeData zmAttributeData = new ZMAttributeData();\n                Map<String,Double> aMap = zmAttributeData.updataWeaponsValueLv(handItem,weaponsType);\n                for(Map.Entry<String, Double> entry : weaponsType.getZmWeapons().getAttr().entrySet()){\n                    String key = entry.getKey();\n                    if(aMap.containsKey(key)){\n                        zmAttributeData.updataAttribute(key,entry.getValue() + aMap.get(key));\n                    }else{\n                        zmAttributeData.updataAttribute(key,entry.getValue());\n                    }\n                    AttributeAPI.getAttrData(p).getAttributeValue().put(key,AttributeAPI.getAttrData(p).getAttributeValue().get(key) + zmAttributeData.getAttributeMap().get(key));\n                }\n\n                for(Map.Entry<String,Double> entry : AttributeAPI.getAttrData(p).getAttributeValue().entrySet()){\n                    System.out.println(entry.getKey() + \"   \" + entry.getValue());\n                }\n                ZMWeaponsLevel.attrPlayData.putZMAttributeData(p,zmAttributeData);\n                return zmAttributeData;\n            }\n            return null;\n        }复制代码"
        }
    ]
}