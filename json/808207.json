{
    "title": "[Bukkit插件开发]载入服务器后玩家切换手持物品不检测",
    "author": "Jonjs_Dada",
    "replyCount": 2,
    "timestamp": 1532309280,
    "txt_content": "package com.jonjs.nolores;\n\nimport java.util.List;\n\nimport org.bukkit.ChatColor;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.PlayerItemHeldEvent;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class NoLores\n  extends JavaPlugin\n  implements Listener\n{\n  \n        List<String> enableworldlist = getConfig().getStringList(\"Enable-World-List\");\n    String m = \"Messages.\";\n        \n  public void onEnable()\n  {\n    getServer().getConsoleSender().sendMessage(ChatColor.GREEN + \"NoLores has been enabled! By:Jonjs\");\n    getServer().getPluginManager().registerEvents(this, this);\n    getConfig().options().copyDefaults(true);\n    saveConfig();\n    saveDefaultConfig();\n  }\n  \n  public void onDisable()\n  {\n    getServer().getConsoleSender().sendMessage(ChatColor.RED + \"NoLores has been disabled! By:Jonjs\");\n  }\n  \n  \n  @EventHandler\n  public void onPlayerItemHeldEvent(PlayerItemHeldEvent event)\n  {\n          Player p = event.getPlayer();\n          \n          if ((enableworldlist.contains(p.getWorld().getName())))\n          {\n          if (p.getItemInHand().getItemMeta().getLore() != null)\n          {\n                  p.sendMessage(getConfig().getString(m + \"No-Using-Lore-Item\").replace(\"&\", \"§\"));\n                  event.setCancelled(true);\n          }\n          }\n          \n  }\n  \n}\n复制代码\n\n",
    "replies": [
        {
            "author": "Gyzer",
            "timestamp": 1532323860,
            "txt_content": "你的配置文件格式是这样的？：\nEnable:\n  World:\n    List:\n      - ''\n如果是的话原来的改成:  List<String> enableworldlist = getConfig().getStringList(\"Enable.World.List\");\ngetConfig().getString(m + \"No.Using.Lore.Item\").replace(\"&\", \"§\")\n\n另外:\n 检测手中物品代码要改一下，先检测玩家手中有没有物品.\n\n  if ((enableworldlist.contains(p.getWorld().getName())))\n          {\n          if (p.getItemInHand()!=null&&p.getItemInHand().getTypeId !=0&& p.getItemInHand().getItemMeta().getLore() != null)\n          {\n                  p.sendMessage(getConfig().getString(m + \"No.Using.Lore.Item\").replace(\"&\", \"§\"));\n                  event.setCancelled(true);\n          }\n          }\n"
        },
        {
            "author": "Jonjs_Dada",
            "timestamp": 1532326080,
            "txt_content": "Gyzer 发表于 2018-7-23 13:31\n你的配置文件格式是这样的？：\nEnable:\n  World:\n不能用getItemInHand的这个是切换前的物品\n我已经自行解决了\n不过还是谢谢了"
        }
    ]
}