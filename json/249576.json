{
    "title": "如果把Minecraft服务器做成分布式的（P2P之类），有实现的前途么？",
    "author": "oyiadin",
    "replyCount": 29,
    "timestamp": 1394448480,
    "txt_content": "或者说，这个 idea 值不值得花费一大堆时间去做？\n\n我只是有想法而已，目前我是没技术做出来的（Python 转到 Java 实在不适应……）。所以就把这个 idea 抛出来，看看值不值得去做及寻找有能力的人去做。\n\n（我会说我在 install forge 的时候总莫名卡住么？连准备工作都做不好……）",
    "replies": [
        {
            "author": "q1786803468",
            "timestamp": 1394448540,
            "txt_content": "MC服务器如果宣传好的话，前途很大的，因为MC创新很大"
        },
        {
            "author": "a2455564728",
            "timestamp": 1394448540,
            "txt_content": "P2P。。那是什么。。能吃么。"
        },
        {
            "author": "oyiadin",
            "timestamp": 1394448660,
            "txt_content": " 本帖最后由 oyiadin 于 2014-3-10 18:53 编辑 \na2455564728 发表于 2014-3-10 18:49\nP2P。。那是什么。。能吃么。\n就好像每个玩家的客户端都会在本地储存一部分服务器地图的副本，然后其他玩家可以经过验证后直接向你请求某个区块的数据，从而减小服务器负担/资源需求。\n\nBT种子就可以算是P2P的一个实现。"
        },
        {
            "author": "龙耀",
            "timestamp": 1394448720,
            "txt_content": "楼主你技术宅"
        },
        {
            "author": "zjr_516635864",
            "timestamp": 1394448840,
            "txt_content": "技术触\n闪瞎我了\n\n我膜拜膜拜"
        },
        {
            "author": "syp970102",
            "timestamp": 1394449080,
            "txt_content": "不现实，如果有个人提供的区块除了问题，怎么办?时间同步很难解决?做集群还是可以的。貌似有这个插件"
        },
        {
            "author": "Milk_",
            "timestamp": 1394449260,
            "txt_content": "表示不懂 技术强大啊"
        },
        {
            "author": "。—。",
            "timestamp": 1394449440,
            "txt_content": "不过地图一般是不断变动的吧 0.0\n该怎样让全局地图保持一致呢 0.0"
        },
        {
            "author": "Greensky",
            "timestamp": 1394449920,
            "txt_content": "oyiadin 发表于 2014-3-10 18:51\n就好像每个玩家的客户端都会在本地储存一部分服务器地图的副本，然后其他玩家可以经过验证后直接向你请求 ...\n最大的问题还是安全性= =\n除非加密"
        },
        {
            "author": "oyiadin",
            "timestamp": 1394450100,
            "txt_content": "a6809936 发表于 2014-3-10 19:04\n不过地图一般是不断变动的吧 0.0\n该怎样让全局地图保持一致呢 0.0\n嗯，这个我没有多少好办法，对 P2P 的具体实现了解不多。不过我的第一直觉是可以建立一个 hash 表链比对，就像 git，然后拥有最新状态的多个客户端（验证变动的有效性）广播一个更新的通知，其他拥有这个区块的客户端就把自己的 hash 发送过去，并由对方返回一个 patch 以更新本地数据。\n\n不过看样子好像网络延迟要挺坑爹……还可以考虑限制 hash 表链的最大长度。"
        },
        {
            "author": "oyiadin",
            "timestamp": 1394450820,
            "txt_content": " 本帖最后由 oyiadin 于 2014-3-10 19:30 编辑 \nhenry5041 发表于 2014-3-10 19:12\n最大的问题还是安全性= =\n除非加密\n和加密有什么关系呢？区块的改动可以通过多个节点共同发出从而实现验证——弱点是如果攻击方控制了网络中的大部分节点的话，攻击会很容易。不过这是好多 P2P 的通病吧……就像 Bitcoin 都有这个毛病……"
        },
        {
            "author": "咸鱼气功王",
            "timestamp": 1395198480,
            "txt_content": "mc地图不同于其他游戏的地图基本都是固定，所以感觉实现起来有难度"
        },
        {
            "author": "marionette1998",
            "timestamp": 1395845760,
            "txt_content": "0.0我有个设想。。。在服务器端安装一个mod 专门负责侦测地图变动和通知客户端地图变动具体内容。每个客户端负责一定数量的区块。当客户端关闭时服务器取回区块。再次分配给其他客户端。。。。为了防止网速以及以外退出我觉得mod应该另外负责每个一定时间取回客户端的chunk。并且以特定形式储存下来。当失去与客户端的连接时，分配区块。\n==有点言不达意"
        },
        {
            "author": "oyiadin",
            "timestamp": 1396272180,
            "txt_content": "marionette1998 发表于 2014-3-26 22:56\n0.0我有个设想。。。在服务器端安装一个mod 专门负责侦测地图变动和通知客户端地图变动具体内容。每个客户 ...\n一个区块只分配给一个客户端的话，绝对不行啊……想想你刚刚在某个区块里建了个房子，然后负责它的客户端突然崩了，然后那家伙就永远不来了，然后你就得眼睁睁看着家没了……"
        },
        {
            "author": "799669332",
            "timestamp": 1396275060,
            "txt_content": "henry5041 发表于 2014-3-10 19:12\n最大的问题还是安全性= =\n除非加密\n一个很好的例子就是比特币\n就不多说了"
        },
        {
            "author": "marionette1998",
            "timestamp": 1396308420,
            "txt_content": "oyiadin 发表于 2014-3-31 21:23\n一个区块只分配给一个客户端的话，绝对不行啊……想想你刚刚在某个区块里建了个房子，然后负责它的客户端 ...\n定时取回。这样回档也不会回太长时间"
        },
        {
            "author": "航空兔子",
            "timestamp": 1399197900,
            "txt_content": "有很多问题，首先是安全，然后是速度（P2P的话，万一一台机器网络卡了，其他机器向它要地图。你懂的），如果真要搞，MC很多代码都要重写的"
        },
        {
            "author": "Csgbshgf",
            "timestamp": 1399285800,
            "txt_content": "marionette1998 发表于 2014-4-1 07:27\n定时取回。这样回档也不会回太长时间\n这样服务器负荷不又大了？"
        },
        {
            "author": "marionette1998",
            "timestamp": 1399443060,
            "txt_content": "Csgbshgf 发表于 2014-5-5 18:30\n这样服务器负荷不又大了？\n这就是为什么要在客户端安装特制mod的原因了。将地图信息转化为一串字符。发送一串字符和处理一串字符应该不会需要太多的运行资源吧。。"
        },
        {
            "author": "Csgbshgf",
            "timestamp": 1399457820,
            "txt_content": "marionette1998 发表于 2014-5-7 14:11\n这就是为什么要在客户端安装特制mod的原因了。将地图信息转化为一串字符。发送一串字符和处理一串字符应 ...\n纯净服就此变成了mod服？\n还是说在重写服务端？"
        },
        {
            "author": "eyz1993",
            "timestamp": 1399467420,
            "txt_content": "marionette1998 发表于 2014-5-7 14:11\n这就是为什么要在客户端安装特制mod的原因了。将地图信息转化为一串字符。发送一串字符和处理一串字符应 ...\n你的理论简直眩酷，你以为对计算机来讲，传输处理字符串和地图有本质区别吗?"
        },
        {
            "author": "yangzhen0021",
            "timestamp": 1399470600,
            "txt_content": "这样的话，要改很多东西，一个人的话我看要做个几十年~~"
        },
        {
            "author": "eyz1993",
            "timestamp": 1399476240,
            "txt_content": "yangzhen0021 发表于 2014-5-7 21:50\n这样的话，要改很多东西，一个人的话我看要做个几十年~~\n没有你想象的那么复杂，只要有现在MC的代码和注释，一个软件开发团队几周就能做好。但是，1.MC版权是mojang的，不可能有正规软件团队冒法律风险费力不讨好搞这个。2，最重要的，现阶段的网络速度，玩家电脑的性能，以及商业利益方面看不到这样做的任何前景，所以mojang自己也没有搞这种功能的意愿。3.高性能服务器其实不贵，缺的是专线接入（网速）和管理人才（人），分布式的服务器，网络延迟带来的性能损失过大，对于游戏这种要求低延迟的应用，分布式几乎没有任何用处。至于专线接入和人才，这不是分布式服务能解决的问题。"
        },
        {
            "author": "lizhaohan001",
            "timestamp": 1461379500,
            "txt_content": " 本帖最后由 lizhaohan001 于 2016-4-23 10:52 编辑 \n\n其实个人认为想法很好\n因为我自己也有类似的想法\n其实我觉得只要使用一台中央服务器\n其他的次服务器负责指定区块的服务\n然后定时向中央服务器更新地图就好了~~\n还有一个寻址的问题\n可以将中央服务器的IP地址静态化\n其他的次服务器向它登记自己的IP\n然后所有客户端先访问IP已静态化的中央服务器\n中央服务器再将请求转给相应区块的次服务器就可以了~吧。\n这是个人想法\n估计实现难度大的惊人\n不过要是实现了   把这个嵌合到客户端里\n就真的是P2P版的MC Server了。\n无限的服务器资源啊。。。。\n还有其实所有的客户端都向中央服务器登记IP\n如果一个区块的次服务器崩了~~\n中央服务器再把请求转给下一个可用的区块服务器就行了啊。。\n不然那些P2P崩溃比这个多得多的情况不照常运行......"
        },
        {
            "author": "云闪",
            "timestamp": 1461385980,
            "txt_content": "p2p…我倒是觉得如果能吧服务器做成分布式计算的就好了，把计算任务分摊到多个服务器能大幅提高tps，而如果你把服务器地图数据做p2p的话，像生存服这种需要及时更新地图数据的，我觉得没啥用"
        },
        {
            "author": "zyx2",
            "timestamp": 1461387600,
            "txt_content": "把依靠客户端存储感觉不太现实吧，可以考虑分布式节点，节点通过高速宽带向服务器取回数据并回传客户机（貌似和给你主机多插几条网线没什么区别，仅仅减少了因为距离的损耗）；如果要存储在客户机难度略大。\n\n\n\n\n\n\n\n\n\n\n以上废话\n\n\n\n\n\n\n\n\n\n\n\n\n\n只为留名，期待佳音"
        },
        {
            "author": "494308843",
            "timestamp": 1463581740,
            "txt_content": "splt 发表于 2016-4-23 12:33\np2p…我倒是觉得如果能吧服务器做成分布式计算的就好了，把计算任务分摊到多个服务器能大幅提高tps，而如果 ...\n做成网站cdn加速那种也不错啊\n\n弄成2个连接\n一个玩家交互  直接连接服务器\n一个地图缓存端\n服务器只需要给几台服务器发送区块信息\n只需要处理玩家交互就行了\n方块更新直接发送到  缓存服务端\n\n\n也能缓解不少网络流量问题\n\n不过需要服务端整体大改  \n\n还要有能力的公司  来运营\n\n提供分布服务    \n(萌新胡扯中)"
        },
        {
            "author": "494308843",
            "timestamp": 1463581860,
            "txt_content": "玩过一个手游\nMC题材\n多人在线游戏\n\n那个游戏有些情况\n\n延迟杀  (只要你在你这边打中别人了  必定造成伤害 无论多远)\n时间加速 (单独一个房间  可以加速房间的时间快速结束游戏 pve)\n\n这种就是计算几乎都放在客户端的\n\n出现了一些问题...."
        },
        {
            "author": "andylizi",
            "timestamp": 1463636640,
            "txt_content": "p2p的前提是其数据是不会改变的。\n如果区块被改变，那么每个玩家的副本就失效了。\n并且为了安全性还要验证区块文件的sha之类的\n\n关键是，不管是什么实现，只要是分布式的就必须把一个节点的变动广播到所有节点\n感觉对网速的需求会更高。因为原先是客户端，向服务端发送“我破坏了一个方块”，现在要客户端向所有节点广播“我破坏了一个方块”，服务器压力是小了，客户端会不会更卡"
        }
    ]
}