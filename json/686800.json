{
    "title": "[娱乐][其他][HAYO]OreGenrator —— 不一样的刷石机[1.7.X~1.8.X]",
    "author": "mangiare",
    "replyCount": 10,
    "timestamp": 1492245600,
    "txt_content": " 本帖最后由 1582952890 于 2017-9-16 13:12 编辑 \n                                OreGenerator                             \n\n\n\n介绍：这个插件能让你在空岛/海岛中刷石，注意：是矿石，不是圆石已发布源码下载量到达10W\n\n                                    特点                                     它可以使刷石机有时候刷出是矿石而不是圆石刷出的几率是可以设置的可以设置在哪个世界生效\n开源\n源代码已经放出戳右边的网址即可看到源代码 →→→ 源码如果您不想在网址里看到源码，你也可以点击下面的折叠按钮：plugin.yml\n\nname: OreGenerator\nmain: me.pkt77.oregenerator.OreGenerator\nversion: 2.0\nauthor: pkt77\n\ncommands:\n    og:\n        description: Shows list of commands.\n\npermissions:\n    og.reload:\n        description: Reloads the config file.\n        default: false\n\nconfig.yml\n\nChances:\n  Coal: 15\n  Iron: 25\n  Gold: 32\n  Redstone: 38\n  Lapis: 43\n  Emerald: 47\n  Diamond: 50\nWorlds:\n\nCommand.java\n\npackage me.pkt77.oregenerator;\n\nimport org.bukkit.ChatColor;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\n\npublic class Commands implements CommandExecutor {\n        private OreGenerator _og;\n\n        public Commands(OreGenerator og) {\n                _og = og;\n        }\n\n        @Override\n        public boolean onCommand(CommandSender sender, Command command, String commandLabel, String[] args) {\n                if (commandLabel.equalsIgnoreCase(\"og\")) {\n                        if (args.length == 0) {\n                                if (sender.hasPermission(\"og.reload\")) {\n                                        sender.sendMessage(ChatColor.GREEN + \"===== OreGenerator Commands ===== \\n\" + \"/og reload   Reloads the config file.\");\n                                } else {\n                                        sender.sendMessage(ChatColor.RED + \"You do not have permission to use this command\");\n                                }\n                                return true;\n                        } else {\n                                if (args[0].equalsIgnoreCase(\"reload\")) {\n                                        Player player = null;\n                                        if (sender instanceof Player) {\n                                                player = (Player) sender;\n                                                if (player.hasPermission(\"og.reload\")) {\n                                                        _og.reloadConfig();\n                                                        sender.sendMessage(ChatColor.GREEN + \"OreGenerator config file reloaded.\");\n                                                } else {\n                                                        sender.sendMessage(ChatColor.RED + \"You do not have permission to use this command\");\n                                                }\n                                        } else {\n                                                _og.reloadConfig();\n                                                _og.log.info(\"OreGenerator config file reloaded.\");\n                                        }\n                                }\n                        }\n                }\n                return true;\n        }\n}\n\nLisieners.java\n\npackage me.pkt77.oregenerator;\n\nimport java.util.List;\nimport java.util.Random;\nimport org.bukkit.Material;\nimport org.bukkit.block.Block;\nimport org.bukkit.block.BlockFace;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.BlockFromToEvent;\n\npublic class Listeners implements Listener {\n        private OreGenerator _og;\n\n        public Listeners(OreGenerator og) {\n                _og = og;\n                _og.getServer().getPluginManager().registerEvents(this, og);\n        }\n\n        @EventHandler\n        public void onFromTo(BlockFromToEvent event) {\n                int id = event.getBlock().getTypeId();\n                if (id >= 8 && id <= 11) {\n                        Block b = event.getToBlock();\n                        int toid = b.getTypeId();\n                        if (toid == 0) {\n                                if (generatesCobble(id, b)) {\n                                        List<String> worlds = _og.getConfig().getStringList(\"Worlds\");\n                                        if (worlds.contains(event.getBlock().getLocation().getWorld().getName())) {\n                                                Random pick = new Random();\n                                                int chance = 0;\n                                                for (int counter = 1; counter <= 1; counter++) {\n                                                        chance = 1 + pick.nextInt(100);\n                                                }\n\n                                                double coal = _og.getConfig().getDouble(\"Chances.Coal\");\n                                                double iron = _og.getConfig().getDouble(\"Chances.Iron\");\n                                                double gold = _og.getConfig().getDouble(\"Chances.Gold\");\n                                                double redstone = _og.getConfig().getDouble(\"Chances.Redstone\");\n                                                double lapis = _og.getConfig().getDouble(\"Chances.Lapis\");\n                                                double emerald = _og.getConfig().getDouble(\"Chances.Emerald\");\n                                                double diamond = _og.getConfig().getDouble(\"Chances.Diamond\");\n\n                                                if (chance > 0 && chance <= coal) {\n                                                        b.setType(Material.COAL_ORE);\n                                                }\n                                                if (chance > coal && chance <= iron) {\n                                                        b.setType(Material.IRON_ORE);\n                                                }\n                                                if (chance > iron && chance <= gold) {\n                                                        b.setType(Material.GOLD_ORE);\n                                                }\n                                                if (chance > gold && chance <= redstone) {\n                                                        b.setType(Material.REDSTONE_ORE);\n                                                }\n                                                if (chance > redstone && chance <= lapis) {\n                                                        b.setType(Material.LAPIS_ORE);\n                                                }\n                                                if (chance > lapis && chance <= emerald) {\n                                                        b.setType(Material.EMERALD_ORE);\n                                                }\n                                                if (chance > emerald && chance <= diamond) {\n                                                        b.setType(Material.DIAMOND_ORE);\n                                                }\n                                                if (chance > diamond && chance <= 100) {\n                                                        b.setType(Material.COBBLESTONE);\n                                                }\n                                        }\n                                }\n                        }\n                }\n        }\n\n        private final BlockFace[] faces = new BlockFace[] { BlockFace.SELF, BlockFace.UP, BlockFace.DOWN, BlockFace.NORTH, BlockFace.EAST, BlockFace.SOUTH, BlockFace.WEST };\n\n        public boolean generatesCobble(int id, Block b) {\n                int mirrorID1 = (id == 8 || id == 9 ? 10 : 8);\n                int mirrorID2 = (id == 8 || id == 9 ? 11 : 9);\n                for (BlockFace face : faces) {\n                        Block r = b.getRelative(face, 1);\n                        if (r.getTypeId() == mirrorID1 || r.getTypeId() == mirrorID2) {\n                                return true;\n                        }\n                }\n                return false;\n        }\n}\n\nOreGenrator.java\n\npackage me.pkt77.oregenerator;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.logging.Logger;\nimport org.bukkit.World;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class OreGenerator extends JavaPlugin {\n        public final Logger log = Logger.getLogger(\"Minecraft\");\n\n        /*CHANGELOG :\n         * V1.0 :\n         * First Release - ores had a random chance to spawn (all the same chance)\n         * V2.0 :\n         * Added /og reload command with - og.reload permission\n         * Added World configuration\n         * Added Percentage calculation for each ore (configurable)\n         */\n\n        @Override\n        public void onEnable() {\n                new Listeners(this);\n                getCommand(\"og\").setExecutor(new Commands(this));\n                if (!getDataFolder().exists()) {\n                        getConfig().options().copyDefaults(true);\n                        getConfig().set(\"Worlds\", addWorlds());\n                        saveConfig();\n                }\n        }\n\n        public List<String> addWorlds() {\n                List<String> worldList = new ArrayList<String>();\n                for (World w : getServer().getWorlds()) {\n                        worldList.add(w.getName());\n                }\n                return worldList;\n        }\n}\n\n\n                                         配置文件                                      Config.yml：\n\n#————————————————————————#\n#   汉化by 商萌丿芒果    #\n#   所属小组：PCD        #\n#   感谢 秋风残叶 的支持 #\n#   以下几率单位为：%    #\n#   原作者：pkt77        #\n#   作者2：Marc5054      #\n#————————————————————————#\nChances:\n# 刷出煤矿的几率\n  Coal: 15\n# 刷出铁矿的几率  \n  Iron: 25\n# 刷出金矿的几率\n  Gold: 32\n# 刷出红石矿的几率\n  Redstone: 38\n# 刷出青金石矿的几率  \n  Lapis: 43\n# 刷出绿宝石矿的几率\n  Emerald: 47\n# 刷出钻石矿的几率\n  Diamond: 50\n# 开启<OreGenrator>的世界\nWorlds:复制代码\n\n命令or权限：命令：\n/og reload         ——重载插件就这么多，没了\n权限：\nog.gen    ——刷出矿物的权限og.reload     ——重载插件的权限\n\n                            下载与支持                           原贴下载：原贴汉化版本下载：\n\n\n\nOreGenerator.jar\n(6.82 KB, 下载次数: 405)\n\n\n\n2017-4-15 16:39 上传\n点击文件名下载附件\n汉化100%\n\n\n\n\n有图有真相：\n\n\n\n\n真相.jpg (55.01 KB, 下载次数: 1)\n\n下载附件\n\n2017-4-15 16:40 上传\n\n\n\n\n                           \n\n                                已知BUG                             感谢 @442274153 @446472250 提供的BUGBUG介绍：如果你修改了配置文件中的矿石几率，矿石刷出几率将会特别低如果你修改了配置文件中的矿石几率，除了你修改的文件以外，其他全部无用BUG解决：暂无，正在与原作者取得联系\n\n\n\n\n\n\n\n\nPCDR.png\n(8.48 KB, 下载次数: 11)\n\n\n\n\n下载附件\n\n\n2017-4-15 16:40 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "七秒鱼丶",
            "timestamp": 1492246320,
            "txt_content": "怎么设置来刷MOD的矿物，比如工业！"
        },
        {
            "author": "mangiare",
            "timestamp": 1492249920,
            "txt_content": "七秒鱼丶 发表于 2017-4-15 16:52\n怎么设置来刷MOD的矿物，比如工业！\n作者还没有更新，期待进一步的更新吧"
        },
        {
            "author": "442274153",
            "timestamp": 1492435860,
            "txt_content": "我发现，你弄的那个配置文件，刷出矿物的几率，一旦修改后，所有矿物的刷出几率都变得超级低，10个圆石可能都没一个矿物刷出来，麻烦修复一下。"
        },
        {
            "author": "446472250",
            "timestamp": 1492490580,
            "txt_content": "同意楼上的说法，只有修改了其中一个矿石的几率，就只能刷出煤矿了，其他矿全部失效，而且，标题没有版本号"
        },
        {
            "author": "Korea",
            "timestamp": 1492506300,
            "txt_content": "标题麻烦注明一下版本"
        },
        {
            "author": "Mark1314",
            "timestamp": 1497892620,
            "txt_content": "这自带的几率高炸天啊，改一下就废了"
        },
        {
            "author": "Mark1314",
            "timestamp": 1498005060,
            "txt_content": "很吊，我改一下配置就废了！"
        },
        {
            "author": "Marston",
            "timestamp": 1498275900,
            "txt_content": "不错，正好需要"
        },
        {
            "author": "qwe459223217",
            "timestamp": 1498277580,
            "txt_content": "不错的插件"
        },
        {
            "author": "Lostloser丶",
            "timestamp": 1498967940,
            "txt_content": "http://www.mcbbs.net/forum.php?m ... p;extra=&page=1\nLZ我想你可以看看这个.."
        }
    ]
}