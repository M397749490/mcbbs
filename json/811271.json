{
    "title": "【百金悬赏】关于MangoQuest插件的问题",
    "author": "26790top",
    "replyCount": 6,
    "timestamp": 1533223500,
    "txt_content": "*内容较多，请耐心读完*注：前置插件版本均已核对\n\n第一次使用：\n- 服务器版本：PaperSpigot-1.12.2-b1316\n- 插件版本：MangoQuest_v1.7.8v5\n使用情况：只编写了一个任务，内容为一般对话，奖励为物品奖励，运行正常\n第二次使用：\n- 服务器版本：PaperSpigot-1.12.2-b1481\n- 插件版本：MangoQuest_20180705_v1.7.9\n使用情况：在编写第二个任务时，发现无法添加物品奖励，报错如下\n（加载地图时↓）\n[17:44:11] [Server thread/INFO]: Custom Map Seeds:  Village: 10387312 Feature: 14357617 Monument: 10387313 Slime: 987234911\n[17:44:11] [Server thread/ERROR]: Couldn't load advancement mangoquest:story%253achoice1: Task Advancement{parentId=mangoquest:story:choicebase, display=net.minecraft.server.v1_12_R1.AdvancementDisplay@7f525384, rewards=AdvancementRewards{experience=0, loot=[], recipes=[], function=null}, criteria={mangoquest=net.minecraft.server.v1_12_R1.Criterion@6cadc59b}, requirements=[[mangoquest]]}\n[17:44:11] [Server thread/ERROR]: Couldn't load advancement mangoquest:story%253achoice4: Task Advancement{parentId=mangoquest:story:choicebase, display=net.minecraft.server.v1_12_R1.AdvancementDisplay@732531a2, rewards=AdvancementRewards{experience=0, loot=[], recipes=[], function=null}, criteria={mangoquest=net.minecraft.server.v1_12_R1.Criterion@7126b340}, requirements=[[mangoquest]]}\n[17:44:11] [Server thread/ERROR]: Couldn't load advancement mangoquest:story%253achoice3: Task Advancement{parentId=mangoquest:story:choicebase, display=net.minecraft.server.v1_12_R1.AdvancementDisplay@2f8e9ae2, rewards=AdvancementRewards{experience=0, loot=[], recipes=[], function=null}, criteria={mangoquest=net.minecraft.server.v1_12_R1.Criterion@6b7680e0}, requirements=[[mangoquest]]}\n[17:44:11] [Server thread/ERROR]: Couldn't load advancement mangoquest:story%253achoice2: Task Advancement{parentId=mangoquest:story:choicebase, display=net.minecraft.server.v1_12_R1.AdvancementDisplay@1cbe54ef, rewards=AdvancementRewards{experience=0, loot=[], recipes=[], function=null}, criteria={mangoquest=net.minecraft.server.v1_12_R1.Criterion@4390a618}, requirements=[[mangoquest]]}\n[17:44:11] [Server thread/INFO]: -------- World Settings For [world_nether] --------\n复制代码（添加物品奖励时↓）\n[17:45:59] [Server thread/INFO]: TOP_Y issued server command: /mq e edit reward item\n[17:46:03] [Server thread/ERROR]: Could not pass event InventoryCloseEvent to MangoQuest v1.7.9\norg.bukkit.event.EventException: null\n        at org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:72) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at co.aikar.timings.TimedEventExecutor.execute(TimedEventExecutor.java:78) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:527) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:512) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at org.bukkit.craftbukkit.v1_12_R1.event.CraftEventFactory.handleInventoryCloseEvent(CraftEventFactory.java:934) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at net.minecraft.server.v1_12_R1.PlayerConnection.a(PlayerConnection.java:1761) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at net.minecraft.server.v1_12_R1.PacketPlayInCloseWindow.a(PacketPlayInCloseWindow.java:18) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at net.minecraft.server.v1_12_R1.PacketPlayInCloseWindow.a(PacketPlayInCloseWindow.java:5) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at net.minecraft.server.v1_12_R1.PlayerConnectionUtils.lambda$ensureMainThread$0(PlayerConnectionUtils.java:14) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_181]\n        at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_181]\n        at net.minecraft.server.v1_12_R1.SystemUtils.a(SourceFile:46) [PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.D(MinecraftServer.java:849) [PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at net.minecraft.server.v1_12_R1.DedicatedServer.D(DedicatedServer.java:427) [PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.C(MinecraftServer.java:773) [PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.run(MinecraftServer.java:665) [PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_181]\nCaused by: java.lang.NumberFormatException: For input string: \"§c齐小晓的请求\"\n        at java.lang.NumberFormatException.forInputString(Unknown Source) ~[?:1.8.0_181]\n        at java.lang.Integer.parseInt(Unknown Source) ~[?:1.8.0_181]\n        at java.lang.Integer.parseInt(Unknown Source) ~[?:1.8.0_181]\n        at me.Cutiemango.MangoQuest.listeners.RewardGUIListener.onInventoryClose(RewardGUIListener.java:122) ~[?:?]\n        at me.Cutiemango.MangoQuest.listeners.MainListener.onInventoryClose(MainListener.java:132) ~[?:?]\n        at com.destroystokyo.paper.event.executor.asm.generated.GeneratedEventExecutor586.execute(Unknown Source) ~[?:?]\n        at org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:70) ~[PaperSpigot-1.12.2-b1481.jar:git-Paper-1481]\n        ... 17 more复制代码#之后我怀疑是核心的问题，故进行了几个核心的测试\n（插件版本均为MangoQuest_20180705_v1.7.9；配置文件均使用“第二个任务无法添加物品奖励”）\n- 测试用服务器版本【1】：PaperSpigot-1.12.1-b1204\n测试结果：输入/mq e和/mq ce指令出现\nAn internal error occurred while attempting to perform this command复制代码后台信息为：\n[21:20:23] [Server thread/INFO]: TOP_Y issued server command: /mq e\n[21:20:23] [Server thread/ERROR]: null\norg.bukkit.command.CommandException: Unhandled exception executing command 'mq' in plugin MangoQuest v1.7.9\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:46) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:151) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at org.bukkit.craftbukkit.v1_12_R1.CraftServer.dispatchCommand(CraftServer.java:676) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PlayerConnection.handleCommand(PlayerConnection.java:1425) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PlayerConnection.a(PlayerConnection.java:1230) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PacketPlayInChat.a(PacketPlayInChat.java:45) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PacketPlayInChat.a(PacketPlayInChat.java:5) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PlayerConnectionUtils.lambda$ensureMainThread$0(PlayerConnectionUtils.java:14) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_181]\n        at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_181]\n        at net.minecraft.server.v1_12_R1.SystemUtils.a(SourceFile:46) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.D(MinecraftServer.java:843) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.DedicatedServer.D(DedicatedServer.java:424) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.C(MinecraftServer.java:767) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.run(MinecraftServer.java:665) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_181]\nCaused by: java.lang.NoSuchMethodError: org.bukkit.craftbukkit.v1_12_R1.inventory.CraftMetaBook.spigot()Lorg/bukkit/inventory/meta/BookMeta$Spigot;\n        at me.Cutiemango.MangoQuest.versions.Version_v1_12_R1.openBook(Version_v1_12_R1.java:61) ~[?:?]\n        at me.Cutiemango.MangoQuest.manager.QuestBookGUIManager.openBook(QuestBookGUIManager.java:265) ~[?:?]\n        at me.Cutiemango.MangoQuest.manager.QuestBookGUIManager.openBook(QuestBookGUIManager.java:142) ~[?:?]\n        at me.Cutiemango.MangoQuest.editor.QuestEditorManager.mainGUI(QuestEditorManager.java:82) ~[?:?]\n        at me.Cutiemango.MangoQuest.commands.QuestEditorCommand.execute(QuestEditorCommand.java:32) ~[?:?]\n        at me.Cutiemango.MangoQuest.commands.CommandReceiver.onCommand(CommandReceiver.java:36) ~[?:?]\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:44) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        ... 15 more复制代码[21:21:12] [Server thread/INFO]: TOP_Y issued server command: /mq ce\n[21:21:12] [Server thread/ERROR]: null\norg.bukkit.command.CommandException: Unhandled exception executing command 'mq' in plugin MangoQuest v1.7.9\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:46) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:151) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at org.bukkit.craftbukkit.v1_12_R1.CraftServer.dispatchCommand(CraftServer.java:676) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PlayerConnection.handleCommand(PlayerConnection.java:1425) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PlayerConnection.a(PlayerConnection.java:1230) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PacketPlayInChat.a(PacketPlayInChat.java:45) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PacketPlayInChat.a(PacketPlayInChat.java:5) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.PlayerConnectionUtils.lambda$ensureMainThread$0(PlayerConnectionUtils.java:14) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_181]\n        at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_181]\n        at net.minecraft.server.v1_12_R1.SystemUtils.a(SourceFile:46) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.D(MinecraftServer.java:843) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.DedicatedServer.D(DedicatedServer.java:424) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.C(MinecraftServer.java:767) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.run(MinecraftServer.java:665) [PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_181]\nCaused by: java.lang.NoSuchMethodError: org.bukkit.craftbukkit.v1_12_R1.inventory.CraftMetaBook.spigot()Lorg/bukkit/inventory/meta/BookMeta$Spigot;\n        at me.Cutiemango.MangoQuest.versions.Version_v1_12_R1.openBook(Version_v1_12_R1.java:61) ~[?:?]\n        at me.Cutiemango.MangoQuest.manager.QuestBookGUIManager.openBook(QuestBookGUIManager.java:265) ~[?:?]\n        at me.Cutiemango.MangoQuest.manager.QuestBookGUIManager.openBook(QuestBookGUIManager.java:142) ~[?:?]\n        at me.Cutiemango.MangoQuest.editor.ConversationEditorManager.mainGUI(ConversationEditorManager.java:71) ~[?:?]\n        at me.Cutiemango.MangoQuest.commands.ConversationEditorCommand.execute(ConversationEditorCommand.java:31) ~[?:?]\n        at me.Cutiemango.MangoQuest.commands.CommandReceiver.onCommand(CommandReceiver.java:40) ~[?:?]\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:44) ~[PaperSpigot-1.12.1-b1204.jar:git-Paper-1204]\n        ... 15 more复制代码\n\n- 测试用服务器版本【2】：PaperSpigot-1.12-b1169\n测试结果：同【1】\n- 测试用服务器版本【3】：spigot-1.12.2-R0.1-SNAPSHOT-b1648\n测试结果：/mq e和/mq ce指令正常使用，但仍然无法添加物品奖励，报错与第二次使用的报错大同小异\n信息如下\n[21:39:11] [Server thread/INFO]: TOP_Y issued server command: /mq e edit reward item\n[21:39:16] [Server thread/ERROR]: Could not pass event InventoryCloseEvent to MangoQuest v1.7.9\norg.bukkit.event.EventException: null\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:306) ~[spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:500) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:485) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at org.bukkit.craftbukkit.v1_12_R1.event.CraftEventFactory.handleInventoryCloseEvent(CraftEventFactory.java:895) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at net.minecraft.server.v1_12_R1.PlayerConnection.a(PlayerConnection.java:1669) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at net.minecraft.server.v1_12_R1.PacketPlayInCloseWindow.a(PacketPlayInCloseWindow.java:18) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at net.minecraft.server.v1_12_R1.PacketPlayInCloseWindow.a(PacketPlayInCloseWindow.java:1) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at net.minecraft.server.v1_12_R1.PlayerConnectionUtils$1.run(SourceFile:13) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_181]\n        at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_181]\n        at net.minecraft.server.v1_12_R1.SystemUtils.a(SourceFile:46) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.D(MinecraftServer.java:748) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at net.minecraft.server.v1_12_R1.DedicatedServer.D(DedicatedServer.java:406) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.C(MinecraftServer.java:679) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at net.minecraft.server.v1_12_R1.MinecraftServer.run(MinecraftServer.java:577) [spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_181]\nCaused by: java.lang.NumberFormatException: For input string: \"§c齐小晓的请求\"\n        at java.lang.NumberFormatException.forInputString(Unknown Source) ~[?:1.8.0_181]\n        at java.lang.Integer.parseInt(Unknown Source) ~[?:1.8.0_181]\n        at java.lang.Integer.parseInt(Unknown Source) ~[?:1.8.0_181]\n        at me.Cutiemango.MangoQuest.listeners.RewardGUIListener.onInventoryClose(RewardGUIListener.java:122) ~[?:?]\n        at me.Cutiemango.MangoQuest.listeners.MainListener.onInventoryClose(MainListener.java:132) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_181]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_181]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_181]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:302) ~[spigot-1.12.2-R0.1-SNAPSHOT-b1648.jar:git-Spigot-642f6d2-57ab4cf]\n        ... 16 more复制代码\n\n求指点如何修复",
    "replies": [
        {
            "author": "langan9591",
            "timestamp": 1533223500,
            "txt_content": " 本帖最后由 langan9591 于 2018-8-3 07:41 编辑 \n\n还有就是报错里面有一行Caused by: java.lang.NumberFormatException: For input string: \"§c齐小晓的请求\"查看配置文件里的这一行，看看是不是有什么排版错误，看看是不是颜色符号错了或者是没打'这些"
        },
        {
            "author": "26790top",
            "timestamp": 1533223560,
            "txt_content": "排版全乱了_(:з」∠)_"
        },
        {
            "author": "langan9591",
            "timestamp": 1533252540,
            "txt_content": "恕我直言，mq插件bug很多。可能并不支持paperspigot端，因为我也是paperspigot端，然后用的时候不是点不了提交npc就是报错。建议换spigot端重试，或者请更换一个任务插件，推荐quests或bq"
        },
        {
            "author": "城雨",
            "timestamp": 1533264480,
            "txt_content": "原贴说v1.7.9插件版本支持的游戏版本是1.8.x-1.12.1，而不能点击NPC这个情况在教程帖里说了，在原贴没有说，应该是有些版本可以点击。"
        },
        {
            "author": "26790top",
            "timestamp": 1533266640,
            "txt_content": "langan9591 发表于 2018-8-3 07:29\n恕我直言，mq插件bug很多。可能并不支持paperspigot端，因为我也是paperspigot端，然后用的时候不是点不了 ...\n仔细看贴 我试过spigot  仍然无法添加背包奖励"
        },
        {
            "author": "26790top",
            "timestamp": 1533271740,
            "txt_content": "langan9591 发表于 2018-8-3 07:31\n还有就是报错里面有一行Caused by: java.lang.NumberFormatException: For input string: \"§c齐小晓的请求 ...\n老哥一语惊醒梦中人，我去配置文件看了下，具体这样：\n我写的第一个任务是“第一章：XXX”\n而第二个任务用的冒号是英文格式的“:”\n我把第二个任务改成“：”后，就正常能用了！\npaperspigot和spigot全都正常使用！\n最佳非你莫属，谢谢指点\nps：太迷了，原帖也没说不能用英文冒号啊，而且我完全是在游戏中写的任务没动配置文件，我觉得是作者的锅（小声bb）"
        }
    ]
}