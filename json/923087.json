{
    "title": "[已解决]附魔的逻辑判定问题",
    "author": "negation",
    "replyCount": 5,
    "timestamp": 1572348960,
    "txt_content": " 本帖最后由 negation 于 2019-10-29 20:28 编辑 \n\n蠢新又来了，而且还是上次的挖掘矿石得到金属锭的附魔代码问题。代码（如下）在大佬们的指点下可以运行了，但当时的测试不彻底，现在在进行其他测试的时候发现这段代码还是有问题。\n @SubscribeEvent\n        public void onBlockHarvesDrops(BlockEvent.HarvestDropsEvent event)\n        {\n                if(!event.getWorld().isRemote && event.getHarvester() != null)\n                {\n                        ItemStack itemStack=event.getHarvester().getHeldItemMainhand();\n                        if(EnchantmentHelper.getEnchantmentLevel(EnchantmentLoader.fireBurn, itemStack)>0\n                                        &&itemStack.getItem()!=Items.SHEARS);\n                        {\n                                for(int i=0;i<event.getDrops().size();++i)\n                                {\n                                        ItemStack stack=event.getDrops().get(i);\n                                        ItemStack newStack=FurnaceRecipes.instance().getSmeltingResult(stack);\n                                        if(newStack!=ItemStack.EMPTY)\n                                        {\n                                                newStack=newStack.copy();\n                                                newStack.setCount(stack.getCount());\n                                                event.getDrops().set(i, newStack);\n                                        }\n                                        else if (stack != ItemStack.EMPTY)\n                    {\n                        Block block = Block.getBlockFromItem(stack.getItem());\n                        boolean b = (block == null);\n                        if (!b && (block.isFlammable(event.getWorld(), event.getPos(), EnumFacing.DOWN)\n                                || block.isFlammable(event.getWorld(), event.getPos(), EnumFacing.EAST)\n                                || block.isFlammable(event.getWorld(), event.getPos(), EnumFacing.NORTH)\n                                || block.isFlammable(event.getWorld(), event.getPos(), EnumFacing.SOUTH)\n                                || block.isFlammable(event.getWorld(), event.getPos(), EnumFacing.UP)\n                                || block.isFlammable(event.getWorld(), event.getPos(), EnumFacing.WEST)))\n                        {\n                            event.getDrops().remove(i);\n                        }\n                    }\n                                }\n                        }\n                }\n        }复制代码\n具体表现为此附魔在任何条件下都会生效，如：空手撸木头会得到木炭，用没有附魔的稿子矿也会得到冶炼后的产物。似乎这段判定\nif(!event.getWorld().isRemote && event.getHarvester() != null)\n                {\n                        ItemStack itemStack=event.getHarvester().getHeldItemMainhand();\n                        if(EnchantmentHelper.getEnchantmentLevel(EnchantmentLoader.fireBurn, itemStack)>0\n                                        &&itemStack.getItem()!=Items.SHEARS);复制代码没有起作用，不知道该怎么解决，恳请各位大佬赐教。",
    "replies": [
        {
            "author": "森林蝙蝠",
            "timestamp": 1572350280,
            "txt_content": "if(EnchantmentHelper.getEnchantmentLevel(EnchantmentLoader.fireBurn, itemStack)>0\n                                        &&itemStack.getItem()!=Items.SHEARS);\n你if后面为什么会有个分号？那就是空语句，当然不会生效。"
        },
        {
            "author": "negation",
            "timestamp": 1572351120,
            "txt_content": "森林蝙蝠 发表于 2019-10-29 19:58\nif(EnchantmentHelper.getEnchantmentLevel(EnchantmentLoader.fireBurn, itemStack)>0\n                   ...\n好吧，我星际了（个屁，明明是菜），一直没看到分号。"
        },
        {
            "author": "negation",
            "timestamp": 1572351240,
            "txt_content": "森林蝙蝠 发表于 2019-10-29 19:58\nif(EnchantmentHelper.getEnchantmentLevel(EnchantmentLoader.fireBurn, itemStack)>0\n                   ...\n感谢大佬指点，蠢问题给您添麻烦了。"
        },
        {
            "author": "本少有点猛",
            "timestamp": 1572363000,
            "txt_content": "66666666666666666666666666666666"
        },
        {
            "author": "本少有点猛",
            "timestamp": 1572363000,
            "txt_content": "是个神仙，原谅我啥也看不懂"
        }
    ]
}