{
    "title": "希望一切会越来越好",
    "author": "南歌_未央_",
    "replyCount": 3,
    "timestamp": 1499571960,
    "txt_content": "",
    "replies": [
        {
            "author": "nkawxs4",
            "timestamp": 1499572080,
            "txt_content": "标题: 希望一切会越来越好昨天周六没课，我彻夜研究了缓冲区溢出的使用方式，特意先声明一个整型变量，紧接着声明一个string[44]的变量，这样在运行时栈中的数据就会有漏洞可以利用，昨天成功用52个字节的输入成功淹没入口地址，使自己写的简单小程序达到了破解的效果，以下是图片示例。工具用到了visual studio2015，eltraedit，ollydbg，有的前辈用了dependcy walker查找messageboxA的地址，但我的系统是win10的用不了，所以我干脆就把该函数写在程序里了，直接查看。#include <stdio.h>\n#include <string.h>\n#include <stdlib.h>\n#include <windows.h>\n#define PASSWORD \"1234567\"\nint verify_password(char *password)\n{\nint authenticated;\nchar buffer[44];\nauthenticated = strcmp(password, PASSWORD);\nstrcpy(buffer, password);\nreturn authenticated;\n}\nmain()\n{\nint valid_flag = 0;\nchar password[1024];\nFILE * fp;\nLoadLibrary(\"user32.dll\");\n//MessageBoxA(0, \"a\", \"s\", 0);\nif (!(fp = fopen(\"password.txt\", \"r+\"))) {\nexit(0);\n}\nfscanf(fp, \"%s\", password);\nvalid_flag = verify_password(password);\nif (valid_flag)\n{\nprintf(\"incorrect password!\\n\");\n}\nelse\n{\nprintf(\"Congratulation! You have passed the verification!\\n\");\n}\nfclose(fp);\n}复制代码然后用ollydbg打开查看\n\n\n\n\nZ8N4)YT2B8S5O0]TAWXHZB5.png (242.59 KB, 下载次数: 3)\n\n下载附件\n\nOLLYDBG图片\n2017-7-9 11:42 上传\n\n\n\n\n\n跳转进verify_password函数，并在strcpy的下一条指令处下断点\n\n\n\n\n\n\nSCM@MP7%GDTM{BHUAR%M{3V.png (153.88 KB, 下载次数: 3)\n\n下载附件\n\n2017-7-9 11:43 上传\n\n\n\n\n\n\n放开进程继续执行，我们看到函数的返回地址被淹没了\n\n\n\n\n`GX4MNV6DEBJG5}_)B0KGX8.png (295.81 KB, 下载次数: 0)\n\n下载附件\n\n2017-7-9 11:45 上传\n\n\n\n\n\n\n而我的程序读取的password.txt里的内容是这样的，显示乱码，因为我写入了shellcode，转成机器码，所以不是正常文字\n\n\n\n\nK{IN[6CKF}1CGWRU`[K~{3B.png (93.31 KB, 下载次数: 0)\n\n下载附件\n\n2017-7-9 11:41 上传\n\n\n\n\n\n\n转换成十六进制是这样的\n\n\n\n\nLD7ZISDGAT08HK{PRNMZ4UJ.png (152.24 KB, 下载次数: 0)\n\n下载附件\n\n2017-7-9 11:46 上传\n\n\n\n\n\n\n破解后最后会看到程序通过JE SHORT 008419C4指令的判断，成功输出Congratulation! You have passed the verification!\\n。\n\n目前为止我只是学完了书中的前两章，关于如何用shellcode使自己要改变的跳转地址变成相对的通用的，还要继续学习。\n革命尚未成功，同志还需努力\n"
        },
        {
            "author": "Mr_Des",
            "timestamp": 1499572500,
            "txt_content": "仰望高端玩家，我学的是FPC"
        },
        {
            "author": "LRual",
            "timestamp": 1499573520,
            "txt_content": "讲真\n我还以为我进错版块了\n话说楼主你确定你没错版么= =\n\n好吧\n个人白哦是真心看不懂"
        }
    ]
}