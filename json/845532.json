{
    "title": "插件开吧onCommand函数报错问题！求大神 很急！！相关图和代码都奉上了",
    "author": "guo1060924736",
    "replyCount": 16,
    "timestamp": 1550294220,
    "txt_content": "我编插件的时候发现一个问题 只要用到public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {}\n方法的args参数的值时他总会抛异常，但是做if判断时他就不会。代码和异常看下图。我的时1.7.10版本的，cauldron服务端核心。\n  public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\n  //未分配权限 \n  //也就表示任何人都能用\n    if(cmd.getName().equalsIgnoreCase(\"luck\")) {\n      if(args.length!=1) {\n      sender.sendMessage(ChatColor.RED+\"请使用/luck+[玩家名]\");\n      }\n      else {\n      RandomInfo(args[1]);\n      return true;\n             }\n    }\n                \n  return false;\n  }复制代码\n这是插件导出时的操作\n\n\n\n\n5_0~ATJ_~~MPX)G_MM%UMVN.png (40.22 KB, 下载次数: 0)\n\n下载附件\n\n2019-2-16 13:10 上传\n\n\n\n\n\n\n\n\n\n\n$KXB05HL%KG]1S$J`7ZTSWP.png (36.78 KB, 下载次数: 1)\n\n下载附件\n\n2019-2-16 13:10 上传\n\n\n\n\n\n\n\n下面是报错信息 我说如了两个指令 if判断语句是通过了 但else后面的语句就报错！并且我试了很多次，每次用到args[1]就报错!求大神指教！！！感谢\n\n\n\n\n\nZXBS{{BNEPFLG1}3~BG{E0X.png (104.15 KB, 下载次数: 0)\n\n下载附件\n\n2019-2-16 13:15 上传\n\n\n\n\n\n",
    "replies": [
        {
            "author": "guo1060924736",
            "timestamp": 1550294340,
            "txt_content": "    public void Say(String str) { //不让玩家跟别的东西交互，约等于屏蔽左右键\n            ConsoleCommandSender sender=Bukkit.getConsoleSender();\n            sender.sendMessage(str);\n            //RandomInfo(player);\n    }\n    \n    public void RandomInfo(String p) {\n            \n            if((new Random().nextInt(100)+1) <= 66){\n                    Say(ChatColor.GREEN+\"恭喜玩家 \"+p+\" 获得精良物品\");\n            }\n            \n            else if((new Random().nextInt(100)+1) > 66 && (new Random().nextInt(100)+1) <= 96){\n                    Say(ChatColor.BLUE+\"恭喜玩家 \"+p+\" 获得优秀物品\");\n            }\n            \n            else if((new Random().nextInt(100)+1) >96 && (new Random().nextInt(100)+1) <= 99){\n                    Say(ChatColor.RED+\"恭喜玩家 \"+p+\" 获得史诗物品\");\n            }\n            \n            else if( (new Random().nextInt(100)+1) == 100){\n                    Say(ChatColor.DARK_RED+\"恭喜玩家 \"+p+\" 获得传说物品\");\n            }\n            else {\n                    Say(ChatColor.GREEN+\"恭喜玩家 \"+p+\" 获得精良物品\");\n                }\n        }\n}\n复制代码\n这个是其他套用方法的代码 ！！"
        },
        {
            "author": "lliiooll",
            "timestamp": 1550295120,
            "txt_content": " 本帖最后由 lliiooll 于 2019-2-16 13:36 编辑 \n\n49行的代码发下，哪里出错了"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1550295900,
            "txt_content": "lliiooll 发表于 2019-2-16 13:32\n49行的代码发下，哪里出错了\n抛异常是因为if语句写的不合适造成的吗"
        },
        {
            "author": "lliiooll",
            "timestamp": 1550296020,
            "txt_content": "guo1060924736 发表于 2019-2-16 13:45\n抛异常是因为if语句写的不合适造成的吗\n发一下49行代码,是那行报错"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1550296080,
            "txt_content": "lliiooll 发表于 2019-2-16 13:32\n49行的代码发下，哪里出错了public void RandomInfo(String p) {\n            \n            if((new Random().nextInt(100)+1) <= 66){\n                    Say(ChatColor.GREEN+\"恭喜玩家 \"+p+\" 获得精良物品\");\n            }\n            \n            else if((new Random().nextInt(100)+1) > 66 && (new Random().nextInt(100)+1) <= 96){\n                    Say(ChatColor.BLUE+\"恭喜玩家 \"+p+\" 获得优秀物品\");\n            }\n            \n            else if((new Random().nextInt(100)+1) >96 && (new Random().nextInt(100)+1) <= 99){\n                    Say(ChatColor.RED+\"恭喜玩家 \"+p+\" 获得史诗物品\");\n            }\n            \n            else if( (new Random().nextInt(100)+1) == 100){\n                    Say(ChatColor.DARK_RED+\"恭喜玩家 \"+p+\" 获得传说物品\");\n            }\n            else {\n                    Say(ChatColor.GREEN+\"恭喜玩家 \"+p+\" 获得精良物品\");\n                }\n        }\n}复制代码"
        },
        {
            "author": "lliiooll",
            "timestamp": 1550296140,
            "txt_content": "guo1060924736 发表于 2019-2-16 13:48\n兄弟，49行发出来就行，不需要发这么多"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1550296200,
            "txt_content": "lliiooll 发表于 2019-2-16 13:32\n49行的代码发下，哪里出错了    public void Say(String str) { //不让玩家跟别的东西交互，约等于屏蔽左右键\n            ConsoleCommandSender sender=Bukkit.getConsoleSender();\n            sender.sendMessage(str);\n            //RandomInfo(player);\n    }复制代码\n这是say（）函数代码。"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1550296260,
            "txt_content": "lliiooll 发表于 2019-2-16 13:49\n兄弟，49行发出来就行，不需要发这么多\n                        RandomInfo(args[1]);"
        },
        {
            "author": "lliiooll",
            "timestamp": 1550296380,
            "txt_content": "那你试试这个\nif(!(args.length > 0)){\n sender.sendMessage(ChatColor.RED+\"请使用/luck+[玩家名]\");\nreturn true;\n}else{\nRandomInfo(args[1]);\n return true;\n}"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1550296380,
            "txt_content": "lliiooll 发表于 2019-2-16 13:47\n发一下49行代码,是那行报错\nRandomInfo(args[1]);这个就是 这行代码是我写的函数。。"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1550297280,
            "txt_content": "lliiooll 发表于 2019-2-16 13:53\n那你试试这个\nif(!(args.length > 0)){\n sender.sendMessage(ChatColor.RED+\"请使用/luck+[玩家名]\");luck 123\n[14:07:18 WARN]: Unexpected exception while parsing console command \"luck 123\"\norg.bukkit.command.CommandException: Unhandled exception executing command 'luck' in plugin LuckStone v0.1\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:46) ~[PluginCommand.class:git-Cauldron-Reloaded-1.7.10-1.1343.01.0]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:181) ~[SimpleCommandMap.class:git-Cauldron-Reloaded-1.7.10-1.1343.01.0]\n        at org.bukkit.craftbukkit.v1_7_R4.CraftServer.dispatchCommand(CraftServer.java:717) ~[CraftServer.class:git-Cauldron-Reloaded-1.7.10-1.1343.01.0]\n        at org.bukkit.craftbukkit.v1_7_R4.CraftServer.dispatchServerCommand(CraftServer.java:697) [CraftServer.class:git-Cauldron-Reloaded-1.7.10-1.1343.01.0]\n        at net.minecraft.server.dedicated.DedicatedServer.func_71333_ah(DedicatedServer.java:472) [lt.class:?]\n        at net.minecraft.server.dedicated.DedicatedServer.func_71190_q(DedicatedServer.java:431) [lt.class:?]\n        at net.minecraft.server.MinecraftServer.func_71217_p(MinecraftServer.java:798) [MinecraftServer.class:?]\n        at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:658) [MinecraftServer.class:?]\n        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_91]\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 1\n        at com.goalsetting.LuckStone.onCommand(LuckStone.java:49) ~[?:?]\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:44) ~[PluginCommand.class:git-Cauldron-Reloaded-1.7.10-1.1343.01.0]\n        ... 8 more复制代码\n改了 应该还是49行代码。。。"
        },
        {
            "author": "lliiooll",
            "timestamp": 1550297400,
            "txt_content": "我知道了2333\nargs[1]换成args[0]"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1550297820,
            "txt_content": "lliiooll 发表于 2019-2-16 14:10\n我知道了2333\nargs[1]换成args[0]\n谢谢大佬，爱你！！"
        },
        {
            "author": "lliiooll",
            "timestamp": 1550298360,
            "txt_content": " 本帖最后由 lliiooll 于 2019-2-16 14:38 编辑 \n\n2333加个qq一起学习丫"
        },
        {
            "author": "反清复明",
            "timestamp": 1550317560,
            "txt_content": "楼主 if(args.length!=1)  这段代码什么意思  args代表什么"
        },
        {
            "author": "tallmoon",
            "timestamp": 1550320200,
            "txt_content": "数组是从0开始排序的不是从1"
        }
    ]
}