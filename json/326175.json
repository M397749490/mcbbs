{
    "title": "实在找不到原因了= =进贴细看",
    "author": "shukui06",
    "replyCount": 2,
    "timestamp": 1408605600,
    "txt_content": " 本帖最后由 shukui06 于 2014-8-21 15:27 编辑 \n\n关于bukkit创建的inventory的啦，我想要在点击倒数第二个附件，也就是下界之星的时候，对第一个物品做判断。检测他的lore和修改lore（这段貌似有问题，添加不了）。我不会的地方是让他加一行IntensifyLevel:等级。然后关闭inventory然后把修改完的加到背包里。还有就是点击铁门啦~~我想在点铁门的时候把所有前面没有拿走的东西放进背包。关闭inventory然后e.setcancelled(true)。求好心人。弄了10天，自己也没修改好",
    "replies": [
        {
            "author": "shukui06",
            "timestamp": 1408605900,
            "txt_content": "详细情况，沙发是我的啦        @SuppressWarnings(\"deprecation\")\n        @EventHandler()\n        public void onClickIcon(InventoryClickEvent e){\n                Player player = (Player) e.getWhoClicked();\n                if (e.getInventory().getName() == \"IntensifyTable\"){\n                        if (e.getCurrentItem().equals(ArmsMaster.plugin.data.Intensify())){\n                                if ((e.getInventory().getItem(0).getType() != Material.AIR) && (e.getInventory().getItem(2).getType() != Material.AIR)){\n                                        int id = e.getInventory().getItem(0).getTypeId();\n                                        List<Integer> ItemAllowIntensify = ArmsMaster.plugin.config.getIntegerList(\"Intensify.ItemAllowIntensify\");\n                                        if ((e.getInventory().getItem(0).getAmount() == 1) && (ItemAllowIntensify.contains(id))){\n                                                if (e.getInventory().getItem(2).equals(ArmsMaster.plugin.data.IntensifyRock())){\n                                                        ItemStack item = e.getInventory().getItem(0);\n                                                        ItemMeta im = item.getItemMeta();\n                                                        List<String> Lore = im.getLore();\n                                                        int index = -1;\n                                                        for (String s: Lore){\n                                                                if (s.startsWith(\"IntensifyLevel: \")){\n                                                                        index = Lore.indexOf(s);\n                                                                        String[] Level = s.split(\":\");\n                                                                        int level = Integer.parseInt(Level[2]);\n                                                                        int num = ArmsMaster.plugin.data.Intensify(level);\n                                                                        if (num == 1){\n                                                                                level = level + 1;\n                                                                                if (ArmsMaster.plugin.config.getBoolean(\"Intensify.PrefixReward\") == true){\n                                                                                        if (level > ArmsMaster.plugin.config.getInt(\"Intensify.PrefixReward.Level\")){\n                                                                                                String prefix = ArmsMaster.chat.getPlayerPrefix(player.getWorld(), player.getName());\n                                                                                                ArmsMaster.chat.setPlayerPrefix(player.getName(), player.getName(), prefix + ChatColor.GOLD + \"[Idensify Master]\");\n                                                                                        }\n                                                                                }\n                                                                                s = \"IntensifyLevel:\" + level;\n                                                                                Lore.set(index, s);\n                                                                                im.setLore(Lore);\n                                                                                item.setItemMeta(im);\n                                                                                player.getInventory().addItem(item);\n                                                                        }else if (num == 3){\n                                                                                item.setDurability((short) 1);\n                                                                                \n                                                                                player.getInventory().addItem(item);\n                                                                        }else if (num == 2){\n                                                                                player.getInventory().addItem(item);\n                                                                        }\n                                                                        break;\n                                                                }\n                                                        }\n                                                        if (index == -1){\n                                                                Lore.add(\"IntensifyLevel:1\");\n                                                        }\n                                                        player.getInventory().addItem(item);\n                                                        e.setCancelled(true);\n                                                        player.closeInventory();\n                                                }else{\n                                                        for (ItemStack item: e.getInventory()){\n                                                                if (item.isSimilar(ArmsMaster.plugin.data.Exit()) || (item.isSimilar(ArmsMaster.plugin.data.Intensify()))){\n                                                                        break;\n                                                                }else{\n                                                                        player.getInventory().addItem(item);\n                                                                        player.updateInventory();\n                                                                }\n                                                        }\n                                                        player.updateInventory();\n                                                        player.closeInventory();\n                                                        e.setCancelled(true);\n                                                }\n                                        }\n                                }\n                        }\n                }\n        }\n        \n        @SuppressWarnings(\"deprecation\")\n        @EventHandler()\n        public void onCloseInventory(InventoryClickEvent e){\n                if ((e.getInventory().getName() == \"IntensifyTable\")){\n                        if (e.getCurrentItem().equals(ArmsMaster.plugin.data.Exit())){\n                                Player player = (Player) e.getWhoClicked();\n                                for (ItemStack item: e.getInventory()){\n                                        if (item.equals(ArmsMaster.plugin.data.Exit()) || (item.equals(ArmsMaster.plugin.data.Intensify()))){\n                                                player.closeInventory();\n                                                e.setCancelled(true);\n                                                break;\n                                        }else{\n                                                player.getInventory().addItem(item);\n                                                player.updateInventory();\n                                        }\n                                }\n                                player.closeInventory();\n                                e.setCancelled(true);\n                        }\n                }\n        }复制代码"
        },
        {
            "author": "a8105",
            "timestamp": 1408608600,
            "txt_content": "加我Q:810587921\n我不理解你说的意思= ="
        }
    ]
}