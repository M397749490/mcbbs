{
    "title": "[修正]BlessingSkinSync —— 加载自建皮肤站的皮肤[1.8-1.16]",
    "author": "Molean",
    "replyCount": 43,
    "timestamp": 1591670100,
    "txt_content": " 本帖最后由 Molean 于 2021-1-19 05:41 编辑 \n\n# 简介\n\n自己搭建了一个 Blessing Skin 站点, 但要想加载皮肤就要用启动器的外置登录或使用皮肤模组. 于是就有了这个插件.\n\n**即在服务器不用 `authlib-injector` 正版验证且客户端不安装皮肤模组的情况下, 服务器也能加载皮肤站的皮肤.**\n注意, 披风无法加载, 在不修改客户端的情况下不可能加载第三方披风.\n# 配置\n\n\nprofileUrl: \"https://skin.prinzeugen.net/%playername%.json\"\ntextureUrl: \"https://skin.prinzeugen.net/textures/%texture%\"复制代码\n\n在`config.yml`里把`skin.prinzeugen.net`换成你的域名, 部分站点需要`https`换成`http`.\n\n默认这个是 Blessing Skin 的官方演示站点.\n# BungeeCord\n插件已更新支持BungeeCord, 此插件只需要在BungeeCord安装即可, 无需安装到子服. 但SkinsRestorer必须在BungeeCord和所有子服安装.\n\n# 下载\n\n\n前置: SkinsRestorer https://www.spigotmc.org/resources/skinsrestorer.2124/\n本体: BlessingSkinSync https://www.spigotmc.org/resources/blessing-skin-sync.81414/\n此插件只是调用 SkinsRestorer 插件提供的功能去加载皮肤站的皮肤。所支持的版本和SkinsRestorer一样。1.8~1.16\n如果因MC版本升级而用不了, 请更新SkinsRestorer的版本, 而不是来催更此插件, 此插件无需更新.\n如果有人正在使用这个插件的话, 请在评论区告诉我, 我会继续维护. 如果有任何疑问也可以直接在评论区直接提出.\n\n\n# 补充\n插件对网络有一定要求, 这是之前我没有意识到的问题, 需要保证:\n  1.你的MC服务器能够正常访问 mineskin.org\n  2.你的皮肤站所在服务器能够被 mineskin.org 访问\n\n\n简述一下皮肤加载原理, 以及为什么需要用到MineSkin服务. 希望有所帮助.\n\nMC客户端在加载服务器某个玩家的皮肤时, 会向服务器索取两项数据: 1.其皮肤hash(texture) 2.签名或者说是校验码(signature)\n\n获取到texture和signature后, 客户端会根据texture向minecraft.net下的某个服务器下载对应皮肤, 并比对生成的signature是否相等.\n\n如果texture不存在或者signature不匹配, 则不会加载皮肤. 目前texture和signature的生成算法未知, 但并不是完全不可获取.\n\n至于客户端具体实现不必关心, 因为我们就是想要在不修改原版客户端的情况下加载皮肤.\n\n根据上面所说, 如果在服务端想要自定义皮肤, 就必须想办法获取其texture和signature. \n\n所幸, 虽然我们不知道texture和signature具体算法, 但我们能够通过Mojang给出的API获取到某个正版玩家的皮肤texture及其signature.(怎么获取详见 https://wiki.vg/Mojang_API). 这样通过修改服务端就可以实现切换到任意正版账号的皮肤, 这也是SkinsRestore加载正版皮肤的原理之一.\n\n因此, 对于任意一个皮肤文件, 我们可以让一个正版账号使用这个皮肤, 然后获取它的texture和signature. 这就是自定义任意皮肤的原理.\n\n而这个过程, mineskin.org 已经为我们准备好了, 他们提供了一组非常方便的API, 并且有着几百个志愿者提供的正版账号(显然一个账号不能并发), 你可以免费使用. 至于怎么用就不用多说了.\n\nmineskin.org 的服务器在国外, 并且由于账号数量限制可能需要等待十多秒才能完成texture和signature的获取. 但它完全开源, 如果你不满意mineskin.org的速度, 那么也可以自己准备几个正版账号搭建.\n\n上面只解决了皮肤上传到mojang、获取textrue和signature， 但没有解决如何修改服务端，而这个问题很好解决，直接用SkinsRestorer写好的就行, 如果你想自己写, 建议放弃.\n\n至于披风, 这个只和玩家uuid有关, 客户端根据玩家uuid去加载披风. 但服务端可以通过伪造玩家uuid来获得一些披风, 但具体比较麻烦, 且无法自定义, 没有太多价值. 如果有自定义披风的需求, 建议还是使用模组吧.\n\n\n",
    "replies": [
        {
            "author": "深夜与鬼",
            "timestamp": 1591673100,
            "txt_content": "支持原创 感谢大佬的插件"
        },
        {
            "author": "梦之境",
            "timestamp": 1591673220,
            "txt_content": "排版在好看点就好了，支持原创"
        },
        {
            "author": "dong呵呵",
            "timestamp": 1591701540,
            "txt_content": "球球 了，我服务器为了不被海外攻击，断掉了海外ip，但是没皮肤了，继续一个这种插件，但是我是1.15服务器，球1.15插件，如果大大搭建好皮肤站就更好了，我就不用自己搭建了，嘿嘿"
        },
        {
            "author": "Molean",
            "timestamp": 1591712280,
            "txt_content": "dong呵呵 发表于 2020-6-9 19:19\n球球 了，我服务器为了不被海外攻击，断掉了海外ip，但是没皮肤了，继续一个这种插件，但是我是1.15服务器 ...\n我这插件是要访问国外IP的，因为Mojang的皮肤有加密，所以不可能避免。你这种情况建议在客户端装CustomSkinLoader模组去加载LittleSkin皮肤站的皮肤。\n当然用authlib-injector也可以，只不过稍微麻烦点。"
        },
        {
            "author": "深夜与鬼",
            "timestamp": 1591737780,
            "txt_content": "支持原创插件 希望有更多好的作品"
        },
        {
            "author": "Joeycui",
            "timestamp": 1594545660,
            "txt_content": "1.16可以用吗 老哥"
        },
        {
            "author": "mc小森",
            "timestamp": 1595809020,
            "txt_content": "感谢大佬，1.16.1水龙头服测试完美运行"
        },
        {
            "author": "aa3271157839",
            "timestamp": 1595824800,
            "txt_content": "怎么安装呀"
        },
        {
            "author": "1Qzaisi1",
            "timestamp": 1597667520,
            "txt_content": "[BlessingSkinSync] Enabling BlessingSkinSync v1.0-SNAPSHOT\n[20:21:08] [Server thread/ERROR]: [BlessingSkinSync] Plugin BlessingSkinSync v1.0-SNAPSHOT has failed to register events for class com.molean.blessingskinsync.BlessingSkinSync because ru/csm/api/services/SkinsAPI does not exist.\n[20:21:08] [Server thread/ERROR]: Error occurred while enabling BlessingSkinSync v1.0-SNAPSHOT (Is it up to date?)\njava.lang.NoClassDefFoundError: ru/csm/api/services/SkinsAPI"
        },
        {
            "author": "Molean",
            "timestamp": 1597668480,
            "txt_content": "1Qzaisi1 发表于 2020-8-17 20:32\nEnabling BlessingSkinSync v1.0-SNAPSHOT\n[20:21:08] [Server thread/ERROR]:  Plugin BlessingSkinSync  ...\n先安装Custom Skin Manager前置"
        },
        {
            "author": "duan2001",
            "timestamp": 1597672380,
            "txt_content": "谢谢楼主，昨天刚把SkinsRestorer删了今天您又改依赖了，不过SkinsRestorer确实比较好用，感谢楼主开发维护"
        },
        {
            "author": "kuboy",
            "timestamp": 1597680660,
            "txt_content": "ummmm 有点难下载 不过很喜欢"
        },
        {
            "author": "whnpm",
            "timestamp": 1597771560,
            "txt_content": "好像只支持Bukkit的SkinsRestorer?\n我SkinsRestorer跑在BungeeCord模式，楼主的插件放在子服里不生效...放在群组插件好像也不支持。"
        },
        {
            "author": "Molean",
            "timestamp": 1597821840,
            "txt_content": "whnpm 发表于 2020-8-19 01:26\n好像只支持Bukkit的SkinsRestorer?\n我SkinsRestorer跑在BungeeCord模式，楼主的插件放在子服里不生效...放 ...\n好了, 现在支持BungeeCord了."
        },
        {
            "author": "whnpm",
            "timestamp": 1597924320,
            "txt_content": " 本帖最后由 whnpm 于 2020-8-20 19:55 编辑 \n\n测了2天，从服务端版本到CDN和网页证书，终于测出来问题在哪了。\n\n1、这个插件不支持SkinsRestorer的SQL模式，好像插件的原理是生成个文件塞在SkinsRestorer插件的目录里让SkinsRestorer读取，启动SQL模式就绕过这个文件了。（这个问题不大，关了SQL模式就行，就是查水表起来有点麻烦，小问题可以忽略）\n\n2、不支持高版本的BlessingSkin，插件默认的展示站版本为3.5 已经是上古版本了。我自己装的是5.0.0，还有LittleSkin也是5.0.0试了一下都不行（3个域名都试了），仔细对比了一下高版本的.json和低版本格式不一样。还有就是高版本还有个https://域名/csl/%playername%.json的地址 也试过了不行。然后发现展示站是3.5，又装了个3.5行了。\n\n还有就是就算是3.5版本的BlessingSkin，TSL证书和域名不匹配也是会无效插件的https写法。\nCDN的话这个插件我没试，不过开了CDN的话CSLMOD就抓不到皮肤了\n\n\n我在同样的域名同样证书关了CDN的环境测试的。BlessingSkin 版本3.5行 版本5.0.0不行 。今天刚出了5.1.0升级了下也是不行的\n"
        },
        {
            "author": "Molean",
            "timestamp": 1597933320,
            "txt_content": "whnpm 发表于 2020-8-20 19:52\n测了2天，从服务端版本到CDN和网页证书，终于测出来问题在哪了。\n\n1、这个插件不支持SkinsRestorer的SQL模 ...\n两个问题都修了, 记得删除 config.yml 重新生成."
        },
        {
            "author": "291895997",
            "timestamp": 1597990680,
            "txt_content": "前置变了吗"
        },
        {
            "author": "Molean",
            "timestamp": 1597994700,
            "txt_content": "291895997 发表于 2020-8-21 14:18\n前置变了吗\n从CustomSkinManager改成了SkinsRestorer. 注意更新的时候删除config.yml重新生成."
        },
        {
            "author": "个电话叫我",
            "timestamp": 1598086320,
            "txt_content": "这个插件能加载皮肤站中的披风吗"
        },
        {
            "author": "sxwx043800zym",
            "timestamp": 1605780060,
            "txt_content": "如果一个正版玩家加入服务器，同时皮肤站也有人注册了相同的ID角色，那么正版玩家登陆时是优先选择正版皮肤还是皮肤站皮肤呢？"
        },
        {
            "author": "来一杯苦凉茶",
            "timestamp": 1606001940,
            "txt_content": "不错，挺不错的"
        },
        {
            "author": "来一杯苦凉茶",
            "timestamp": 1606002180,
            "txt_content": "来一杯苦凉茶 发表于 2020-11-22 07:39\n不错，挺不错的\n已经在用了，挺好用的"
        },
        {
            "author": "Asitelacher",
            "timestamp": 1609329840,
            "txt_content": "mc小森 发表于 2020-7-27 08:17\n感谢大佬，1.16.1水龙头服测试完美运行\n老哥我能加你个QQ好友咨询一点问题吗"
        },
        {
            "author": "a45674512",
            "timestamp": 1609517040,
            "txt_content": " 本帖最后由 a45674512 于 2021-1-2 00:48 编辑 \n\n請問一下 server端已經安裝 SkinsRestorer 跟 BlessingSkinSync-mcbbs skin是直接上傳到演示站點 進服之後還是顯示正版skin 是為什麼?用的是paper服"
        },
        {
            "author": "Molean",
            "timestamp": 1609558860,
            "txt_content": "a45674512 发表于 2021-1-2 00:04\n請問一下 server端已經安裝 SkinsRestorer 跟 BlessingSkinSync-mcbbs skin是直接上傳到演示站點 進服之後 ...\n检查插件是否加载成功, 后台是否有报错. 进服后大约15秒才会显示皮肤. 另外确保你的服务器能够连接到mineskin.org"
        },
        {
            "author": "a45674512",
            "timestamp": 1609566480,
            "txt_content": " 本帖最后由 a45674512 于 2021-1-2 14:38 编辑 \nMolean 发表于 2021-1-2 11:41\n检查插件是否加载成功, 后台是否有报错. 进服后大约15秒才会显示皮肤. 另外确保你的服务器能够连接到mine ...\n[13:47:07 INFO]: [SkinsRestorer] Enabling SkinsRestorer v13.8.6\n[13:47:07 INFO]: [SkinsRestorer] Using PaperSkinRefresher\n[13:47:07 INFO]: [SkinsRestorer] Detected Minecraft v1_16_R3, using UniversalSkinFactory.\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value PREFIX to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SKIN_CLEAR to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SKIN_CLEAR_OTHER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SKIN_UPDATE to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SKIN_UPDATE_OTHER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SKIN_SET to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SKIN_SET_OTHER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SKIN_SET_OTHER_URL to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SR_RELOAD to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SR_STATUS to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SR_DROP to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_SR_PROPS to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SYNTAX_DEFAULTCOMMAND to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SYNTAX_SKINSET to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SYNTAX_SKINSET_OTHER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SYNTAX_SKINURL to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SYNTAX_SKINUPDATE_OTHER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SYNTAX_SKINCLEAR_OTHER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value PLAYER_HAS_NO_PERMISSION_SKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value PLAYER_HAS_NO_PERMISSION_URL to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKIN_DISABLED to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value NOT_PREMIUM to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value INVALID_PLAYER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKIN_COOLDOWN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKIN_CHANGE_SUCCESS to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKIN_CLEAR_SUCCESS to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKIN_CLEAR_ISSUER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value MS_UPDATING_SKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SUCCESS_UPDATING_SKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SUCCESS_UPDATING_SKIN_OTHER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value ERROR_UPDATING_SKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value ERROR_UPDATING_URL to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value ERROR_UPDATING_CUSTOMSKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value ERROR_INVALID_URLSKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value ERROR_MS_FULL to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value ERROR_MS_GENERIC to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value GENERIC_ERROR to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value WAIT_A_MINUTE to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value ERROR_NO_SKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKINSMENU_OPEN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKINSMENU_TITLE_NEW to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKINSMENU_NEXT_PAGE to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKINSMENU_PREVIOUS_PAGE to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKINSMENU_REMOVE_SKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SKINSMENU_SELECT_SKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value ADMIN_SET_SKIN to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value DATA_DROPPED to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value STATUS_OK to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value ALT_API_FAILED to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value MS_API_FAILED to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value NO_SKIN_DATA to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value RELOAD to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value OUTDATED to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value SR_LINE to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] Saving new config value HELP_PLAYER to messages.yml\n[13:47:07 INFO]: [SkinsRestorer] [ACF] Enabled Asynchronous Tab Completion Support!\n[13:47:11 INFO]: [BlessingSkinSync] Enabling BlessingSkinSync v1.3-SNAPSHOT*\n都有加載成功 怎麼確認可不可以連接到mineskin.org ?\n\n剛剛試了一下 mineskin.org 這個網站提供的轉換功能似乎不支援我的皮膚 (檔案太大) 是因為這樣嗎?"
        },
        {
            "author": "任天ya",
            "timestamp": 1609589640,
            "txt_content": "1.16.4用不了了啊，调用不了API，再更新一下吧"
        },
        {
            "author": "Wox日常",
            "timestamp": 1609681740,
            "txt_content": "谢谢，插件拿走了"
        },
        {
            "author": "叶青3366",
            "timestamp": 1609682400,
            "txt_content": "目前1.12.2感觉很好用，支持作者"
        },
        {
            "author": "1957826224",
            "timestamp": 1610946840,
            "txt_content": "支持原创 继续加油"
        },
        {
            "author": "Astronomer",
            "timestamp": 1613132940,
            "txt_content": " 本帖最后由 Astronomer 于 2021-2-12 21:05 编辑 \n\n很不错的插件，感谢"
        },
        {
            "author": "辣辣的稽",
            "timestamp": 1613214120,
            "txt_content": "可以的awa"
        },
        {
            "author": "4lzz_bigger",
            "timestamp": 1613590620,
            "txt_content": "为什么bc进入子服不显示，单独子服可以显示"
        },
        {
            "author": "TF小洛le",
            "timestamp": 1613598000,
            "txt_content": "1.16.5只加载正版皮肤不加载自定义皮肤站皮肤"
        },
        {
            "author": "Jun_Shen",
            "timestamp": 1613618100,
            "txt_content": "\n\n\n\n\nfile_1613618021000.jpg (15.6 KB, 下载次数: 0)\n\n下载附件\n\n5 天前 上传\n\n\n\n\n\n\n\n\nQQ截图20210218111313.bmp (125.09 KB, 下载次数: 0)\n\n下载附件\n\n5 天前 上传\n\n\n\n\n\n你的皮肤站和我自建的皮肤站两个生成的json格式不一样，然后能从你的皮肤站上读取到皮肤，但是我自建的皮肤站不能读取，跟格式有关系吗，但我使用了很多个版本他生成的json都还是这样\n"
        },
        {
            "author": "虎牙游舒锴",
            "timestamp": 1613618160,
            "txt_content": "非常好 作者加油"
        },
        {
            "author": "Molean",
            "timestamp": 1613635140,
            "txt_content": "Jun_Shen 发表于 2021-2-18 11:15\n你的皮肤站和我自建的皮肤站两个生成的json格式不一样，然后能从你的皮肤站上读取到皮肤，但是我自建的皮 ...\n这两个格式是一样的, 换行不影响."
        },
        {
            "author": "4lzz_bigger",
            "timestamp": 1613870700,
            "txt_content": "为什么BC不显示皮肤"
        },
        {
            "author": "Molean",
            "timestamp": 1613894760,
            "txt_content": "4lzz_bigger 发表于 2021-2-21 09:25\n为什么BC不显示皮肤\nbc以及子服都需要安装SkinsRestorer"
        },
        {
            "author": "4lzz_bigger",
            "timestamp": 1613903160,
            "txt_content": "Molean 发表于 2021-2-21 16:06\nbc以及子服都需要安装SkinsRestorer\n都安装了，而且每个子服bc打开了，但是输入指令没反应，"
        },
        {
            "author": "15359631619",
            "timestamp": 1613905560,
            "txt_content": "6666666666666MCBBS有你更精彩~"
        },
        {
            "author": "Shura_Boy",
            "timestamp": 1613920680,
            "txt_content": "这个会导致大量加载皮肤导致服务器崩溃吗？我被崩溃吓哭了"
        },
        {
            "author": "Molean",
            "timestamp": 1613973300,
            "txt_content": "Shura_Boy 发表于 2021-2-21 23:18\n这个会导致大量加载皮肤导致服务器崩溃吗？我被崩溃吓哭了\n不会, 对服务器几乎无影响."
        }
    ]
}