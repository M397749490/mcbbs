{
    "title": "【已放弃】关于1.15.2的Mapping问题",
    "author": "PicoNasha",
    "replyCount": 3,
    "timestamp": 1585196760,
    "txt_content": " 本帖最后由 PicoNasha 于 2020-3-28 00:10 编辑 \n\n我在Forge官网上下载了1.15.2-31.1.0的Forge_installer，进游戏能顺利运行，包含了两个基础MOD。\n\n\n\n\nCapture.JPG (82.84 KB, 下载次数: 0)\n\n下载附件\n\n两个基础MOD\n2020-3-26 12:09 上传\n\n\n\n\n\n\n然后在网上搜寻1.15.2的环境搭建教程，结果发现JDK版本太高不给用，就手动改成了JDK1.8.0_241。\n执行./gradlew setupDecompWorkspace的时候提示没有这个Task，上Forge论坛查了一下发现这个task被淘汰了，直接build就行。\n然后我修改了一下version、group和archivesBaseName后就尝试执行./gradlew build命令，等了一会发现报错：\n> :compileJava > Resolve dependencies of :compileClasspath复制代码\n\n我看了一下build.gradle中的设置，与之相关的是minecraft里的mappings项，版本为20190719-1.14.3。\n我比较好奇：\n1.15.2的MDK中的配置文件为什么会加载1.14.3的Mapping？游戏中的MCP为什么版本是1.15.2，而我在MCPBot上找到的最新版也只是1.15.1的？报错找不到对应的文件，但我在下面它给出的路径中找到了同名、但扩展名分别为“.pom”“.jar”的两个文件。它要找的到底是什么文件？\n\n\n若能赐教，不胜感激。\n\n【2020年3月28日-00点09分 更新】\n使用已事先编译好的“整合包”在IDEA中开发。\n",
    "replies": [
        {
            "author": "3TUSK",
            "timestamp": 1585207860,
            "txt_content": "1. 因为 build.gradle 里指定的是 20190719-1.14.3。这是 2019 年 7 月 19 日生成的 MCP 快照版本。\n你指定的哪一个版本，开发环境就会用哪一个版本。\n有鉴于 Srg 的存在，你的确可以在 1.15.2 或者更高版本上使用旧版的 MCP mapping——这同时也意味着会有更多的缺漏。\n你自己可以手动升级。或者你应该使用 latest 而不是 recommended。\n2. 没有 1.15.2 的 MCP。适用于 1.15.1 的 MCP 也适用于 1.15.2。\n相似的情况也出现在了 1.12.2、1.10.2 等版本上。\n3. 你日志没贴完整。\n不过笔者猜测是你网络不好导致文件下载一半连接就断了。建议删了你找到的文件重来。"
        },
        {
            "author": "PicoNasha",
            "timestamp": 1585239180,
            "txt_content": " 本帖最后由 PicoNasha 于 2020-3-27 16:02 编辑 \n3TUSK 发表于 2020-3-26 15:31\n1. 因为 build.gradle 里指定的是 20190719-1.14.3。这是 2019 年 7 月 19 日生成的 MCP 快照版本。\n你指定 ...\n【2020年3月26日-23点15分 更新】\n我又回去看了一下我的工程，发现了几点：在Build刚刚开始时，gradle提醒我：Deprecated MinecraftExtension.setMappings called. Use mappings(channel, version)复制代码而默认的mappings设置包含了channel和version，但MCPBot的指引告诉我直接给mappings赋值就行。在我把minecraft.mappings改成MCPBot上的最新版本后，再次Build时本地出现的文件应该是当场创建的，文件、文件夹的创建时间符合build操作执行时间。但整个build到failed的时间也就是1分钟多一点，应该不存在Timeout的问题。[info] > Resolve dependencies of :compileClasspath\n[info] > Task :compileJava FAILED\n[info] FAILURE: Build failed with an exception.\n[info] * What went wrong:\n[info] Could not resolve all files for configuration ':compileClasspath'.\n[info] > Could not find net.minecraftforge:forge:1.15.2-31.1.0_mapped_snapshot_20200326.复制代码而gradle查找的文件是将dependencies.minecraft的值与minecraft.mapping的值拼在一起的。那MCP和Forge既然不是同一家的东西为什么还要混着用呢？（我听说Forge有自己的一套映射）Gradle的版本对整个工程的构建有什么影响？我在上述错误后发现了一串警告：[info] Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\n[info] Use '--warning-mode all' to show the individual deprecation warnings.\n[info] See https://docs.gradle.org/4.9/userguide/command_line_interface.html#sec:command_line_warnings\n[info] BUILD FAILED in 1m 47s\n[info] 1 actionable task: 1 executed\n[error] Could not execute build using Gradle distribution 'https://services.gradle.org/distributions/gradle-4.9-bin.zip'.复制代码而我尝试手动下载时发现能顺利下载Gradle。\n\n\n我对Forge官网的MDK共有以下几处更改：\nbuild.gradle - version, group, archivesBaseName - Minecraft.mappings = 'snapshot_20200326'gradle.properties - 新增:org.gradle.java.home=C:/Program Files/Java/jdk1.8.0_241\n\n【2020年3月27日-01点27分 更新】\n将Minecraft.mappings中两项拆开，修改为mappings channel: 'snapshot', version: '20200326'后再次Build发现新的提示信息：Could not download MCP Mappings: net.minecraft:mappings_snapshot:20200326@zip\n\nError getting artifact: net.minecraftforge:forge:1.15.2-31.1.0_mapped_snapshot_20200326:null@jar from  MinecraftUserRepo\n> :compileJava > Resolve dependencies of :compileClasspath\njava.lang.IllegalStateException: Could not download MCP Mappings: net.minecraft:mappings_snapshot:20200326@zip复制代码我在想，它提示无法下载MCP映射，那么这个\".zip\"映射文件里面是什么内容，如果我用MCPBot上的最新Mappings能不能实现手动提前下载然后让Gradle直接读取？\n\n【2020年3月27日-15点45分 更新】\n重新下载了Forge官网上的1.15.2最新版本的MDK，在指定JDK1.8.0_241为编译环境后直接上手build，在等待了15分钟后报错：\nTo honour the JVM settings for this build a new JVM will be forked. Please consider using the daemon: https://docs.gradle.org/4.10.3/userguide/gradle_daemon.html.\nDaemon will be stopped at the end of the build stopping after processing\n\n> Configure project :\nNew Dep: net.minecraftforge:forge:1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring root project 'ModTest - 1.15.2'.\n> Could not resolve all files for configuration ':_compileJava_1'.\n   > Could not resolve com.electronwill.night-config:core:3.6.2.\n     Required by:\n         project :\n         project : > net.minecraftforge:forgespi:2.0.0-milestone.1\n         project : > com.electronwill.night-config:toml:3.6.2\n      > Could not resolve com.electronwill.night-config:core:3.6.2.\n         > Could not get resource 'https://libraries.minecraft.net/com/electronwill/night-config/core/3.6.2/core-3.6.2.jar'.\n            > Could not HEAD 'https://libraries.minecraft.net/com/electronwill/night-config/core/3.6.2/core-3.6.2.jar'.\n               > Connect to libraries.minecraft.net:443 [libraries.minecraft.net/13.249.58.147] failed: Read timed out\n   > Could not resolve net.sf.jopt-simple:jopt-simple:5.0.4.\n     Required by:\n         project :\n         project : > net.minecraftforge:mergetool:1.0.9\n         project : > cpw.mods:modlauncher:5.0.0-milestone.4\n         project : > net.minecraftforge:accesstransformers:2.0.4\n      > Could not resolve net.sf.jopt-simple:jopt-simple:5.0.4.\n         > Could not get resource 'https://libraries.minecraft.net/net/sf/jopt-simple/jopt-simple/5.0.4/jopt-simple-5.0.4.jar'.\n            > Could not HEAD 'https://libraries.minecraft.net/net/sf/jopt-simple/jopt-simple/5.0.4/jopt-simple-5.0.4.jar'.\n               > Read timed out\n   > Could not resolve com.mojang:patchy:1.1.\n     Required by:\n         project : > net.minecraft:client:1.15.2\n      > Skipped due to earlier error\n   > Could not resolve oshi-project:oshi-core:1.1.\n     Required by:\n         project : > net.minecraft:client:1.15.2\n      > Skipped due to earlier error\n   > Could not resolve com.ibm.icu:icu4j-core-mojang:51.2.\n     Required by:\n         project : > net.minecraft:client:1.15.2\n      > Skipped due to earlier error\n   > Could not resolve com.mojang:javabridge:1.0.22.\n     Required by:\n         project : > net.minecraft:client:1.15.2\n      > Skipped due to earlier error\n   > Could not resolve net.sf.jopt-simple:jopt-simple:5.0.4.\n     Required by:\n         project : > net.minecraft:client:1.15.2\n      > Could not resolve net.sf.jopt-simple:jopt-simple:5.0.4.\n         > Could not get resource 'https://libraries.minecraft.net/net/sf/jopt-simple/jopt-simple/5.0.4/jopt-simple-5.0.4.jar'.\n            > Could not HEAD 'https://libraries.minecraft.net/net/sf/jopt-simple/jopt-simple/5.0.4/jopt-simple-5.0.4.jar'.\n               > Read timed out\n   > Could not resolve com.mojang:brigadier:1.0.17.\n     Required by:\n         project : > net.minecraft:client:1.15.2\n      > Skipped due to earlier error\n   > Could not resolve com.mojang:datafixerupper:2.0.24.\n     Required by:\n         project : > net.minecraft:client:1.15.2\n      > Skipped due to earlier error\n   > Could not resolve com.mojang:authlib:1.5.25.\n     Required by:\n         project : > net.minecraft:client:1.15.2\n      > Skipped due to earlier error\n   > Could not resolve com.mojang:text2speech:1.11.3.\n     Required by:\n         project : > net.minecraft:client:1.15.2\n      > Skipped due to earlier error\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/4.10.3/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD FAILED in 15m 21s复制代码这次应该是由超时问题引起的编译失败。再次执行Build命令，得到以下结果：\nat...（多行省略）\nSetting up MCP environment\nInitializing steps\nExecuting steps\n > Running 'downloadManifest'\n > Running 'downloadJson'\n > Running 'downloadClient'\n > Running 'downloadServer'\n > Running 'stripClient'\n > Running 'stripServer'\n > Running 'merge'\n > Running 'rename'\nError getting artifact: net.minecraft:joined:1.15.2-20200307.202953:srg@jar from  MCPRepo\njava.util.zip.ZipException: error in opening zip file\n        at...（多行省略）\n\n> Task :compileJava FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nCould not resolve all files for configuration ':compileClasspath'.\n> Could not find net.minecraftforge:forge:1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1.\n  Searched in the following locations:\n    - file:/C:/Users/13674/.gradle/caches/forge_gradle/bundeled_repo/net/minecraftforge/forge/1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1/forge-1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1.pom\n    - file:/C:/Users/13674/.gradle/caches/forge_gradle/bundeled_repo/net/minecraftforge/forge/1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1/forge-1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1.jar\n    - https://files.minecraftforge.net/maven/net/minecraftforge/forge/1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1/forge-1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1.pom\n    - https://files.minecraftforge.net/maven/net/minecraftforge/forge/1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1/forge-1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1.jar\n    - https://libraries.minecraft.net/net/minecraftforge/forge/1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1/forge-1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1.jar    - https://repo.maven.apache.org/maven2/net/minecraftforge/forge/1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1/forge-1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1.pom\n    - https://repo.maven.apache.org/maven2/net/minecraftforge/forge/1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1/forge-1.15.2-31.1.27_mapped_snapshot_20200225-1.15.1.jar\n  Required by:\n      project :\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/4.10.3/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD FAILED in 2m 39s\n1 actionable task: 1 executed复制代码\n"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1585572540,
            "txt_content": "不要放弃呀 \n耗子的离线安装包"
        }
    ]
}