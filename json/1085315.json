{
    "title": "服务器经常主线程卡死造成卡顿",
    "author": "天空Craft",
    "replyCount": 3,
    "timestamp": 1595579280,
    "txt_content": " 本帖最后由 梦想与未来 于 2020-7-24 16:29 编辑 \n\nhttps://timings.aikar.co/?id=a62e7b8ec2f9445686f727eb7d7644d0\n服务器玩家经常卡顿\n服务器也经常忽然主线程卡死\n\n\n<div class=\"blockcode\"><blockquote>[12:02:05] [Paper Watchdog Thread/ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH ---\n[12:02:05] [Paper Watchdog Thread/ERROR]: The server has not responded for 10 seconds! Creating thread dump\n[12:02:05] [Paper Watchdog Thread/ERROR]: ------------------------------\n[12:02:05] [Paper Watchdog Thread/ERROR]: Server thread dump (Look for plugins here before reporting to Paper!):\n[12:02:05] [Paper Watchdog Thread/ERROR]: ------------------------------\n[12:02:05] [Paper Watchdog Thread/ERROR]: Current Thread: Server thread\n[12:02:05] [Paper Watchdog Thread/ERROR]:         PID: 19 | Suspended: false | Native: true | State: RUNNABLE\n[12:02:05] [Paper Watchdog Thread/ERROR]:         Stack:\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.net.Inet6AddressImpl.getHostByAddr(Native Method)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.net.InetAddress$2.getHostByAddr(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.net.InetAddress.getHostFromNameService(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.net.InetAddress.getHostName(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.net.InetAddress.getHostName(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.net.InetSocketAddress$InetSocketAddressHolder.getHostName(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.net.InetSocketAddress$InetSocketAddressHolder.access$600(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.net.InetSocketAddress.getHostName(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 com.ksptooi.FL.security.PlayerFilter.isRealPlayer(PlayerFilter.java:40)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 com.ksptooi.FL.Event.PlayerEvent.PlayerEventHandler.onPlayerMove(PlayerEventHandler.java:96)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 com.destroystokyo.paper.event.executor.asm.generated.GeneratedEventExecutor96.execute(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:70)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 co.aikar.timings.TimedEventExecutor.execute(TimedEventExecutor.java:78)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:513)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PlayerConnection.a(PlayerConnection.java:698)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PacketPlayInFlying.a(SourceFile:126)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PacketPlayInFlying$PacketPlayInPositionLook.a(SourceFile:18)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PlayerConnectionUtils.lambda$ensureMainThread$0(PlayerConnectionUtils.java:14)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PlayerConnectionUtils$Lambda$1808/287138589.run(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.util.concurrent.FutureTask.run(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.SystemUtils.a(SourceFile:46)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.MinecraftServer.D(MinecraftServer.java:850)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.DedicatedServer.D(DedicatedServer.java:423)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.MinecraftServer.C(MinecraftServer.java:774)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.MinecraftServer.run(MinecraftServer.java:666)\n[12:02:05] [Paper Watchdog Thread/ERROR]:                 java.lang.Thread.run(Unknown Source)\n[12:02:05] [Paper Watchdog Thread/ERROR]: ------------------------------\n[12:02:05] [Paper Watchdog Thread/ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH ---\n[12:02:05] [Paper Watchdog Thread/ERROR]: ------------------------------复制代码[12:05:54] [Paper Watchdog Thread/ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH ---\n[12:05:54] [Paper Watchdog Thread/ERROR]: The server has not responded for 10 seconds! Creating thread dump\n[12:05:54] [Paper Watchdog Thread/ERROR]: ------------------------------\n[12:05:54] [Paper Watchdog Thread/ERROR]: Server thread dump (Look for plugins here before reporting to Paper!):\n[12:05:54] [Paper Watchdog Thread/ERROR]: ------------------------------\n[12:05:54] [Paper Watchdog Thread/ERROR]: Current Thread: Server thread\n[12:05:54] [Paper Watchdog Thread/ERROR]:         PID: 19 | Suspended: false | Native: true | State: RUNNABLE\n[12:05:54] [Paper Watchdog Thread/ERROR]:         Stack:\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.net.Inet6AddressImpl.getHostByAddr(Native Method)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.net.InetAddress$2.getHostByAddr(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.net.InetAddress.getHostFromNameService(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.net.InetAddress.getHostName(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.net.InetAddress.getHostName(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.net.InetSocketAddress$InetSocketAddressHolder.getHostName(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.net.InetSocketAddress$InetSocketAddressHolder.access$600(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.net.InetSocketAddress.getHostName(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 com.ksptooi.FL.security.PlayerFilter.isRealPlayer(PlayerFilter.java:40)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 com.ksptooi.FL.Event.PlayerEvent.PlayerEventHandler.onPlayerMove(PlayerEventHandler.java:96)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 com.destroystokyo.paper.event.executor.asm.generated.GeneratedEventExecutor96.execute(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 org.bukkit.plugin.EventExecutor$2.execute(EventExecutor.java:70)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 co.aikar.timings.TimedEventExecutor.execute(TimedEventExecutor.java:78)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:513)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PlayerConnection.a(PlayerConnection.java:698)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PacketPlayInFlying.a(SourceFile:126)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PacketPlayInFlying$PacketPlayInLook.a(SourceFile:88)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PlayerConnectionUtils.lambda$ensureMainThread$0(PlayerConnectionUtils.java:14)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.PlayerConnectionUtils$Lambda$1808/287138589.run(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.util.concurrent.FutureTask.run(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.SystemUtils.a(SourceFile:46)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.MinecraftServer.D(MinecraftServer.java:850)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.DedicatedServer.D(DedicatedServer.java:423)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.MinecraftServer.C(MinecraftServer.java:774)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 net.minecraft.server.v1_12_R1.MinecraftServer.run(MinecraftServer.java:666)\n[12:05:54] [Paper Watchdog Thread/ERROR]:                 java.lang.Thread.run(Unknown Source)\n[12:05:54] [Paper Watchdog Thread/ERROR]: ------------------------------\n[12:05:54] [Paper Watchdog Thread/ERROR]: --- DO NOT REPORT THIS TO PAPER - THIS IS NOT A BUG OR A CRASH ---\n[12:05:54] [Paper Watchdog Thread/ERROR]: ------------------------------复制代码\n",
    "replies": [
        {
            "author": "落星雨",
            "timestamp": 1595579280,
            "txt_content": "FastLogin::Event: c.k.F.E.P.PlayerEventHandler\nFastLogin 对玩家移动的监听占用达到了每随机刻~400%，看一下FastLogin是不是出了点问题：是不是无法连接正版验证服务器；是不是 MySQL 服务器速度有问题等等。\nMinecraft::Packet - PacketPlayInArmAnimation (SELF)\n服务器对玩家手臂摆动事件封包处理占用了每随机刻200%，这个很少见，服务器玩家很多吗？如果不是，那么考虑是有人恶意为之，例如歪瓜中的卡服功能，或者连点器开的频率太大了。\n\n另外就是玩家在执行空岛插件的 /island 的时候会短暂卡服，占用了 50% 左右，不过相比上面几个就是小巫见大巫了"
        },
        {
            "author": "Iw3nJ1n",
            "timestamp": 1595579640,
            "txt_content": "可以看看这个帖子，对timings的分析后可以找出究竟是哪个模块对服务器造成较大的压力\nhttps://www.mcbbs.net/thread-971665-1-1.html"
        },
        {
            "author": "Iw3nJ1n",
            "timestamp": 1595579880,
            "txt_content": "可以看到插件里面有一个叫ASkyBlock的插件对服务器的过载有很大功劳，我没见过这个插件，你可以试着对这个插件进行一些优化\n"
        }
    ]
}