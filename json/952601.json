{
    "title": "服务器突然进来了op",
    "author": "mcKaiFuxia",
    "replyCount": 34,
    "timestamp": 1580890800,
    "txt_content": " 本帖最后由 mcKaiFuxia 于 2020-2-7 19:54 编辑 \n\n求一个服务器 我要帝王 有端的发给我",
    "replies": [
        {
            "author": "Kastoo",
            "timestamp": 1580890800,
            "txt_content": "卡后门了\n\n检查一下有没有不是本站下载的插件"
        },
        {
            "author": "xmdhs",
            "timestamp": 1580890980,
            "txt_content": "上传下 bc 的配置文件"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580891040,
            "txt_content": "我是服务器唯一的op 突然有一个人没有从我设置的中转站 输入密码进来 而是直接进入了子服 ip是1.1.1.1   而且我的子服开了bun true"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580891040,
            "txt_content": "xmdhs 发表于 2020-2-5 16:23\n上传下 bc 的配置文件\n大佬这个问题比较严重可以加我qq处理吗"
        },
        {
            "author": "颅内开灯",
            "timestamp": 1580891340,
            "txt_content": "你这个8成是服务器被卡后门了\n建议你赶紧安装一个防后门插件和配置插件来进行防御\n我个人用的插件是PerDisable站内就有，把他配置好然后在开服"
        },
        {
            "author": "颅内开灯",
            "timestamp": 1580891340,
            "txt_content": "XieLaoDD 发表于 2020-2-5 16:29\n你这个8成是服务器被卡后门了\n建议你赶紧安装一个防后门插件和配置插件来进行防御\n我个人用的插件是PerDisa ...\n记到每一个子服都要安装和配置是最保险的"
        },
        {
            "author": "颅内开灯",
            "timestamp": 1580891400,
            "txt_content": "还要一个方法就是你把服务器里面有一个ops文件鼠标右键属性设置成只读，服务器就无法有op了。可以零时解决一下燃眉之急"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580891460,
            "txt_content": "XieLaoDD 发表于 2020-2-5 16:30\n还要一个方法就是你把服务器里面有一个ops文件鼠标右键属性设置成只读，服务器就无法有op了。可以零时解决 ...\n他直接就登陆我的号了 不是卡的op"
        },
        {
            "author": "颅内开灯",
            "timestamp": 1580891580,
            "txt_content": "mcKaiFuxia 发表于 2020-2-5 16:31\n他直接就登陆我的号了 不是卡的op\n那你就把你的号给ban了把op权限给下了，用cmd窗口修改账号密码"
        },
        {
            "author": "颅内开灯",
            "timestamp": 1580891580,
            "txt_content": "mcKaiFuxia 发表于 2020-2-5 16:31\n他直接就登陆我的号了 不是卡的op\n你用的什么登陆插件"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580891640,
            "txt_content": "XieLaoDD 发表于 2020-2-5 16:33\n你用的什么登陆插件\n他没有出现在我的需要密码的服务器 直接就进子服了"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580891640,
            "txt_content": "XieLaoDD 发表于 2020-2-5 16:33\n你用的什么登陆插件\n根本就没输入密码这个步骤 也没有出现第二个op 他直接用我号 迷之穿梭服务器"
        },
        {
            "author": "kuangshijs",
            "timestamp": 1580891700,
            "txt_content": "上传一下 bungeecord 配置"
        },
        {
            "author": "颅内开灯",
            "timestamp": 1580891700,
            "txt_content": "mcKaiFuxia 发表于 2020-2-5 16:34\n他没有出现在我的需要密码的服务器 直接就进子服了\nemmmmmm你没有设置强制登陆服吗"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580891760,
            "txt_content": "XieLaoDD 发表于 2020-2-5 16:35\nemmmmmm你没有设置强制登陆服吗\n强制登录？ 怎么设置 我每次进都是进入的中转站啊"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580891760,
            "txt_content": "kuangshijs 发表于 2020-2-5 16:35\n上传一下 bungeecord 配置\n上传完了请大佬过目一下"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580891820,
            "txt_content": "xmdhs 发表于 2020-2-5 16:23\n上传下 bc 的配置文件\n上传完了大佬看看"
        },
        {
            "author": "kuangshijs",
            "timestamp": 1580891820,
            "txt_content": "http://www.mcbbs.net/thread-399234-1-1.html"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580892060,
            "txt_content": "kuangshijs 发表于 2020-2-5 16:37\nhttp://www.mcbbs.net/thread-399234-1-1.html\n大佬加个qq2249614325"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580895240,
            "txt_content": "xmdhs 发表于 2020-2-5 16:23\n上传下 bc 的配置文件\n给你的服务器防火墙规则上面加几条，也就是把指向你的子服务器端口的连入请求一律拒绝  这个怎么弄啊"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580895240,
            "txt_content": "kuangshijs 发表于 2020-2-5 16:35\n上传一下 bungeecord 配置\n给你的服务器防火墙规则上面加几条，也就是把指向你的子服务器端口的连入请求一律拒绝  这个怎么弄啊awa"
        },
        {
            "author": "xmdhs",
            "timestamp": 1580895360,
            "txt_content": "mcKaiFuxia 发表于 2020-2-5 17:34\n给你的服务器防火墙规则上面加几条，也就是把指向你的子服务器端口的连入请求一律拒绝  这个怎么弄啊 ...\n子服的 server.properties 文件中设置 server-ip=127.0.0.1\n\n可产生类似的效果"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580895480,
            "txt_content": "xmdhs 发表于 2020-2-5 17:36\n子服的 server.properties 文件中设置 server-ip=127.0.0.1\n\n可产生类似的效果\n这样不是更保险吗"
        },
        {
            "author": "xmdhs",
            "timestamp": 1580896800,
            "txt_content": "mcKaiFuxia 发表于 2020-2-5 17:38\n这样不是更保险吗\n这样效果一样，不会有人绕过 bc 进来的了"
        },
        {
            "author": "炫宙菌",
            "timestamp": 1580905020,
            "txt_content": "首先打开BC服的config.yml 找到权限管理 把BC的管理员和玩家权限设置成一样的\n\npermissions:\n  default:\n  - bungeecord.command.list\n  admin:\n  - bungeecord.command.list\n复制代码\n之后在你的各个子服务器spigot.yml里找到late-bind 改成true\n\nlate-bind: true\n复制代码"
        },
        {
            "author": "cc7w",
            "timestamp": 1580905260,
            "txt_content": "2.BC权限设置得当，管理员也删除了，但是仍然发现有人绕过了登陆插件到了子服务器取得OP权限\n这种问题比较隐蔽，也是最近才发现的。有的群组服务器设置了登陆服务器，并且强制玩家只能先从登陆服务器进入群组，其他子服务器的spigot.yml里面设置了 bungeecord: true ，也就是不能直接用IP+端口访问到子服务器，而是需要通过BC端。\n然后，这些服务器在登陆服务器设置了authme等登陆插件，其他子服务器没设置，并且也关闭了/server等命令权限而使用牌子或星门等传送方式。但是，却发现有人竟然能神不知鬼不觉的绕过了登录服务器直接进入了子服务器，并用OP账号做了乱七八糟的事情。\n这个问题是为什么呢？\n其实，bungeecord: true 只是限制了想登入此服务器必须通过bungeecord端，但是他并没说这个BC端是在哪里的！\n也就是说，其实这些人是在自己电脑本地部署了BungeeCord端，然后直接指向了子服务器，从而能直接不验证密码登入进去。\n事实上，我记得在1.6的时代spigot.yml里面bungeecord: true这附近还有个设置源IP的选项，但是1.7的时候不见了，可能是为了一些多BC指向同子服务器方便吧，但是这给了一些熊孩子可乘之机，让他们不是用密码便登录了OP的账号。\n解决方案：\n1.【网页面板需要看服务商的设置】将每个子服务器根目录下的server.properties文件中的“server-ip=”填为“server-ip=127.0.0.1”，这样子服务器就只接受来自本地的连接了（不影响子服务器里面获取玩家真实源IP），其他地方的连入请求都会被拒绝。如果你是跨IP的跨服群组，自行修改对应IP即可。\n2.【此方案对网页面板/软件后台服务器无效】据说因为MC协议的漏洞，甚至可以伪造连入的IP（我没证实过，我觉得TCP这种需要握手的通讯应该是无法伪造IP的），为了以防万一，建议在上面的基础上，给你的服务器防火墙规则上面加几条，也就是把指向你的子服务器端口的连入请求一律拒绝。这种行为不影响你的内网BC端的分发请求。或者你把你的服务器放到虚拟机中，然后主机到虚拟机只开放一个BC端的端口，其他端口不开放。这样子也能实现对子服务器的保护\n\nhttps://www.mcbbs.net/thread-399234-1-1.html\n有帮助请您在本回复右下角点击设置最佳答案。\n您的认可是对回答者最大的支持！"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580936880,
            "txt_content": "炫宙菌 发表于 2020-2-5 20:17\n首先打开BC服的config.yml 找到权限管理 把BC的管理员和玩家权限设置成一样的\n\n之后在你的各个子服务器spig ...\n目的是什么呢"
        },
        {
            "author": "炫宙菌",
            "timestamp": 1580951100,
            "txt_content": "mcKaiFuxia 发表于 2020-2-6 05:08\n目的是什么呢\n目的是取消可能用特殊ID进入而导致分配BC管理员权限，并且禁止玩家在 插件没有完全载入的情况下修改服务器以导致卡出权限，还问我目的是什么？"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1580977380,
            "txt_content": "炫宙菌 发表于 2020-2-6 09:05\n目的是取消可能用特殊ID进入而导致分配BC管理员权限，并且禁止玩家在 插件没有完全载入的情况下修改服务 ...\n服务端开启了bc才开启 bc没有管理员"
        },
        {
            "author": "炫宙菌",
            "timestamp": 1580979900,
            "txt_content": "mcKaiFuxia 发表于 2020-2-6 16:23\n服务端开启了bc才开启 bc没有管理员\n第二项late-bind跟BC没有任何关系"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1581012540,
            "txt_content": "炫宙菌 发表于 2020-2-6 17:05\n第二项late-bind跟BC没有任何关系\n在哪里可以找到"
        },
        {
            "author": "炫宙菌",
            "timestamp": 1581036060,
            "txt_content": "mcKaiFuxia 发表于 2020-2-7 02:09\n在哪里可以找到\n各个子服的spigot.yml\n作用是防止玩家在插件载入个人数据之前就影响服务器"
        },
        {
            "author": "mcKaiFuxia",
            "timestamp": 1581066660,
            "txt_content": "炫宙菌 发表于 2020-2-7 08:41\n各个子服的spigot.yml\n作用是防止玩家在插件载入个人数据之前就影响服务器 ...\nqwq你怎么知道的"
        },
        {
            "author": "炫宙菌",
            "timestamp": 1581067020,
            "txt_content": "mcKaiFuxia 发表于 2020-2-7 17:11\nqwq你怎么知道的\n被熊过就知道了"
        }
    ]
}