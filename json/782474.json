{
    "title": "[1.13] execute unless block ~ ~ ~ air不受同刻内执行的teleport影响",
    "author": "sjx",
    "replyCount": 6,
    "timestamp": 1518837180,
    "txt_content": "目标\n在1.13用函数检测一个实体上方是否都是空气方块（比如实体在 4 8 4，就检测 4 9 4 到 4 255 4 是否为空气方块）\n实现\n由被检测的实体执行 function can_see_sky，结果作为0/1储存在i1 result中\n# function can_see_sky\nsummon area_effect_cloud ~ ~1 ~ {Tags:[\"_can_see_sky_marker\"]}\nexecute as @e[tag=_can_see_sky_marker] store result score i1 variable run data get entity @s Pos[1]\nscoreboard players set i1 result 1\nexecute as @e[tag=_can_see_sky_marker] at @s if score i1 variable matches -2147483648..255 run function _can_see_sky_loop\nkill @e[tag=_can_see_sky_marker]复制代码# function _can_see_sky_loop\nexecute unless block ~ ~ ~ air run scoreboard players set i1 result 0\nexecute if score i1 result matches 1..1 run function _can_see_sky_loop_1复制代码# function _can_see_sky_loop_1\nteleport ~ ~1 ~\nscoreboard players add i1 variable 1\nexecute if score i1 variable matches -2147483648..255 run function _can_see_sky_loop复制代码\n问题\n_can_see_sky_loop_1 第 1 行的 teleport ~ ~1 ~ 为什么对第 3 行的 _can_see_sky_loop 中第 1 行的execute unless block ~ ~ ~ air没有影响？",
    "replies": [
        {
            "author": "pineapple_",
            "timestamp": 1518837180,
            "txt_content": "你这functiin我看不懂你需要干什么，绕来绕去的\n\n\n检测一个实体上方全是空气方块早在1.8就能做到了，\n\n\n在1.13应该是更简单而不是这么复杂。\n\n\n1条命令\n\n\nexecute as @s at @s success result score @s 记分板 run clone ~ ~ ~ ~ 255 ~ ~ ~ ~ masked force\n\n\n全是空气，记分板0分，不全是空气，记分板1分\n"
        },
        {
            "author": "Y制杖杖",
            "timestamp": 1518839700,
            "txt_content": "你可以参考一下这个http://mcbbs.tvt.im/forum.php?mo ... peid%26typeid%3D125"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1518841920,
            "txt_content": "Loop说的是如果当前位置不是空气，设0分，不继续循环。\n如果当前位置为空气，分数保持1分，进入Loop_1\n\nLoop_1，把marker升一格，记录坐标。如果坐标还在-分~255范围内，跳回Loop...\n所以在没碰到非空气方块之前，就会不断把marker升一格，检测，升一格，检测...也就是说在Loop和Loop_1之间不断执行。\n\n至于你说为什么没冲突，因为执行要按顺序进行。\n简单来讲\n#function a\nrun function b\n\n#function b\nrun function a\n\n这样就是循环，一但执行就会abababab...不断的执行。直到其中一个停止\n不知道有没有解释好...大概就是这样\n\n题外话，这函数貌似做复杂了..."
        },
        {
            "author": "sjx",
            "timestamp": 1518844680,
            "txt_content": "⊙v⊙ 发表于 2018-2-17 12:32\nLoop说的是如果当前位置不是空气，设0分，不继续循环。\n如果当前位置为空气，分数保持1分，进入Loop_1\n追问：\n1. 用问题中的例子，为什么问题给出的实现只能检测到 4 9 4，而不再检测 4 10 4，4 11 4 等方块？\n    或者说为什么 TP 之后 execute unless block ~ ~ ~ air 检测的还是 TP 之前的坐标的方块？\n2. 如何简化函数？"
        },
        {
            "author": "pineapple_",
            "timestamp": 1518846780,
            "txt_content": "teleport ~ ~1 ~teleport @s ~ ~1 ~复制代码"
        },
        {
            "author": "sjx",
            "timestamp": 1518851340,
            "txt_content": "pineapple_ 发表于 2018-2-17 11:13\n你这functiin我看不懂你需要干什么，绕来绕去的\nok, thanks\n"
        }
    ]
}