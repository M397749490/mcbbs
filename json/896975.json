{
    "title": "【1.13 - 1.14】用法跟原理一样简单的随机数生成器",
    "author": "565658323",
    "replyCount": 2,
    "timestamp": 1564960860,
    "txt_content": " 本帖最后由 565658323 于 2019-8-6 03:26 编辑 \n\n突发奇想用了一天的时间做出来的一个随机数生成器。\n\n用法：\n\n 导入完数据包后当然得用个命令来使用。\n summon minecraft:area_effect_cloud ~ ~ ~ {Tags:[数据],Duration:数据}\n#如果在function里执行上方命令，请务必再跟随此条命令: function random:main  复制代码Tags内可填入(请勿填两个，楼主都不知道会发生什么):      \n   set_random_number（生成随机数）\n     生成一个名字和标签为random_system的效果云，并携带着0~n(可在Duration里自定义n)之间\n     分数的random_number（计分榜）。若已存在random_system，则会清除旧的random_system。\n   clear_random_number（清除随机数）\n     清除场上的random_system跟random_number。这条基本没有太大用处 ，可无视(=v=)\n\nDuration内可填入:\n   0~2147483647（最大随机数生成范围）\n     也就是随机数最大会生成到哪，比如写Duration:100那么生成的random_system的random_number\n     就会是0~100以内的某个数字。\n\n使用上面的指令生成出一个random_system后，它的random_number计分榜分数就是一个随机数,\n可以将这个计分榜放进需要随机数的系统当中。\n\n\n例子：\n如果循环下面的命令就会一直给全体玩家一块铁锭或金锭或是钻石，并且获得钻石的几率最小。summon minecraft:area_effect_cloud ~ ~ ~ {Tags:[set_random_number],Duration:10}\n#function random:main  在function里执行请写入这条命令复制代码生成一个随机数。execute if entity @e[name=random_system,scores={random_number=0..5}] run give @a minecraft:iron_ingot 1\nexecute if entity @e[name=random_system,scores={random_number=6..9}] run give @a minecraft:gold_ingot 1\nexecute if entity @e[name=random_system,scores={random_number=10}] run give @a minecraft:diamond 1复制代码侦测random_system的random_number随机分数,并执行对应的命令。\n\n\n原理：\n这里就说点核心命令\n在获取到最大随机数后计算此数字以二进制方式需要多少位数\nexecute if score @e[name=random_system,limit=1] system_number matches 2.. run scoreboard players add @e[name=random_system] time_random 1\n#（system_number是最大随机数 ，time_random是二进制位数，初始为1）如果可以除2加一个位数\nexecute if score @e[name=random_system,limit=1] system_number matches 2.. run scoreboard players operation @e[name=random_system] system_number /= @e[name=random_system] 2_random\n#2_random是2用来当除数 ，将system_number数除2 \nexecute if score @e[name=random_system,limit=1] system_number matches ..1 run scoreboard players set @e[name=random_system] system_number 0 \n#如果system_number不可以除2,则将system_nomber设为0\nexecute if score @e[name=random_system,limit=1] system_number matches 2.. run function random:times\n#如果system_number还可以除2则递归，也就是会除到不能除以2位置复制代码\n\n求完位数后将给随机分配给每个位数1或0 （得使用计分板模拟一串二进制数字，不知道有没有更好方法）\nscoreboard players operation @e[name=random_system] random_number += @e[tag=random_system,sort=random,limit=1] system_number\n#（random_number就是要生成的随机数，system_number在这边初始分数是1跟0）给random_number的位数\"1\"或是\"0\"\nscoreboard players operation @e[name=one] system_number *= @e[name=random_system] 2_random\n#（@e[name=one]的system_number代表“1”，而@e[name=random_system]的代表“0”）为了要进位所以\"1\"得乘2\nexecute if score @e[name=random_system,limit=1] time_random matches 1.. run scoreboard players remove @e[name=random_system] time_random 1\n#time_random（位数）要减1\nexecute if score @e[name=random_system,limit=1] time_random matches 1.. run function random:random_number\n#如果还可以进一位则递归复制代码最后如果生成的随机数不在最大随机数以内则重新生成随机数\n\n有兴趣的话可以下载数据包看一看\n感觉我越说越抽象了...\n\n问题：\n根据楼主测试后发现只有命令方块生成Duration小于2的效果云无法被探测到，\n所以不要使用命令方块生成Duration小于2的效果云。\n\n\n最后不管是论坛已经有大佬做出差不多的效果，发现什么BUG还是觉得楼主技术lj 都\n欢迎指教和吐槽！\n\n下载数据包：\n\n\n\n随机数生成器.zip\n(5.01 KB, 下载次数: 21)\n\n\n\n2019-8-4 22:05 上传\n点击文件名下载附件\n\n\n\n\n\n  \n下载指令包（可将指令包放入其他的数据包内，记得循环random:main即可）：\n\n\n\n随机数生成器指令包.zip\n(2.09 KB, 下载次数: 6)\n\n\n\n2019-8-5 02:19 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "ruhuasiyu",
            "timestamp": 1565454480,
            "txt_content": "版内已有较多的随机数研究帖子，你可以直接在右上角搜索本版。这种二进制的做法也有多个帖子提及，我建议可以看看这个 https://www.mcbbs.net/thread-706030-1-1.html 实现得比较完整，也便于调用。\n\n另一种常用（也可能不那么常用）做法是使用战利品表，可以看下这个 https://www.mcbbs.net/thread-855790-1-1.html 以及我在6L的回复。"
        },
        {
            "author": "aa0307bb",
            "timestamp": 1565466600,
            "txt_content": "不知道为什么这几天掀起了一阵随机数的热潮……虽然原理上是与其它贴子重复了，但是这里的讲解更加明朗，不用看指令看文字就能懂"
        }
    ]
}