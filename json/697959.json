{
    "title": "如何把一个ItemStack对象从onCommand传入监听器方法中？",
    "author": "110000",
    "replyCount": 8,
    "timestamp": 1497360420,
    "txt_content": " 本帖最后由 110000 于 2017-6-14 18:11 编辑 \n\n我想让玩家输入指令后记录下玩家手上的物品（ItemStack），然后把这个对象传入监听器方法中。这是指令的类：import org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\n\n\npublic class DemoCommand implements CommandExecutor{\n        \n        \n        \n        @Override\n        public boolean onCommand(CommandSender sender, Command cmd, String label,String[] args) {\n                \n        //输入指令\"/demo\"后会获取玩家手上的物品\n                \n        if (cmd.getName().equalsIgnoreCase(\"demo\")) {\n             if (sender instanceof Player) {\n             DemoEventListener del = new DemoEventListener();\n             Player player = ((Player) sender).getPlayer();\n                                \n             //调用监听器类中的方法\n             del.setItemStack(player.getItemInHand());\n            return true;\n             }\n        }\n     return true;\n    }\n\n      //执行完onCommand方法时，获取对象也就没了\n  }\n复制代码\n\n这是监听器的类：\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.Action;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.inventory.ItemStack;\n\n\npublic final class DemoEventListener implements Listener{\n        \n     public ItemStack itemStack;\n        \n      //想通过此方法获取ItemStack,好像没什么卵用.....\n     public void setItemStack(ItemStack is){\n         this.itemStack = is;\n      }\n        \n        \n     @EventHandler\n      public void onInteract(PlayerInteractEvent e) {\n                \n        //触发该监听器方法后，只有玩家手持的物品是输入指令时所记录下的物品，并且是右键点击方块时，才会进入if语句中\n        if(e.getPlayer().getItemInHand().getType().equals(this.itemStack) && e.getAction().equals(Action.RIGHT_CLICK_BLOCK)){\n              System.out.println(\"通过！\");\n         }\n     }复制代码\n\n其实在onCommand所在类中直接创建一个ItemStack类型的静态的对象（类对象），onCommand调用的时候赋值进去就行，然后onInteract方法直接通过类名调用的方式获取就行，不过我觉得这样子不好，可能会有问题，请问还有什么别的方法么？？\n\n",
    "replies": [
        {
            "author": "110000",
            "timestamp": 1497408960,
            "txt_content": "指令类漏了点代码，我加上去了，在等审核"
        },
        {
            "author": "110000",
            "timestamp": 1497435180,
            "txt_content": "110000 发表于 2017-6-14 10:56\n指令类漏了点代码，我加上去了，在等审核\n已经加上去了"
        },
        {
            "author": "GiNYAi",
            "timestamp": 1497484560,
            "txt_content": "110000 发表于 2017-6-14 18:13\n已经加上去了\n在插件的主类里 设置一个变量存储这个ItemStack\n在命令解析的时候赋值？"
        },
        {
            "author": "l89669",
            "timestamp": 1497624600,
            "txt_content": "你的监听器没做registerevents？"
        },
        {
            "author": "110000",
            "timestamp": 1497846900,
            "txt_content": "l89669 发表于 2017-6-16 22:50\n你的监听器没做registerevents？\n有的，没放出来..."
        },
        {
            "author": "弱鸡绿毛怪",
            "timestamp": 1498553220,
            "txt_content": "import org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\n\n\npublic class DemoCommand implements CommandExecutor{\n        \n        \n        public static ItemStack i;\n        @Override\n        public boolean onCommand(CommandSender sender, Command cmd, String label,String[] args) {\n                \n        //输入指令\"/demo\"后会获取玩家手上的物品\n                \n        if (cmd.getName().equalsIgnoreCase(\"demo\")) {\n             if (sender instanceof Player) {\n             DemoEventListener del = new DemoEventListener();\n             Player player = ((Player) sender).getPlayer();\n                                \n             //调用监听器类中的方法\n             del.setItemStack(player.getItemInHand());\n             this.i = player.getItemInHand();\n            return true;\n             }\n        }\n     return true;\n    }\n  }\n\n\n\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.Action;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.inventory.ItemStack;\n\n\npublic final class DemoEventListener implements Listener{\n        \n     public ItemStack itemStack;\n        \n      //想通过此方法获取ItemStack,好像没什么卵用.....\n     public void setItemStack(ItemStack is){\n         this.itemStack = is;\n      }\n        \n        \n     @EventHandler\n      public void onInteract(PlayerInteractEvent e) {\n            this.is =   DemoCommand.i;\n        //触发该监听器方法后，只有玩家手持的物品是输入指令时所记录下的物品，并且是右键点击方块时，才会进入if语句中\n        if(e.getPlayer().getItemInHand().getType().equals(this.itemStack) && e.getAction().equals(Action.RIGHT_CLICK_BLOCK)){\n              System.out.println(\"通过！\");\n         }\n     }\n\n\n这样子吗"
        },
        {
            "author": "110000",
            "timestamp": 1498747680,
            "txt_content": "MagicLocyDragon 发表于 2017-6-27 16:47\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandExecutor;\nimport org.bukkit.comm ...\n用Static不太好吧……"
        },
        {
            "author": "110000",
            "timestamp": 1498747740,
            "txt_content": "其实我要的只是itemstack里面的物品名字而已，我已经用json文件储存的方式解决这个问题了，虽然麻烦点....."
        }
    ]
}