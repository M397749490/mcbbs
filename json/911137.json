{
    "title": "NPCmod 如何检测被攻击的npc实体",
    "author": "guo1060924736",
    "replyCount": 12,
    "timestamp": 1567490520,
    "txt_content": "我感觉是要用到反射机制，但不知如何使用。我想做个能检测正在被玩家的击打的实体是否为 此npc。求大佬指教",
    "replies": [
        {
            "author": "森林蝙蝠",
            "timestamp": 1567491660,
            "txt_content": "监听LivingAttackEvent并获取其target，判断是否为npc。"
        },
        {
            "author": "xueyu001",
            "timestamp": 1567492200,
            "txt_content": "原版api只能通过名字确认npc\n\n其他方式的确认\n这个插件是实现不了的\n原版mod也无法检测具体是哪个npc\n\n如果你有很多个同名npc，就需要给mod开发环境导入npcmod\n然后就能直接获取npc实体了，npc的各种参数也一目了然\n除了部分乱码"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1567492320,
            "txt_content": "森林蝙蝠 发表于 2019-9-3 14:21\n监听LivingAttackEvent并获取其target，判断是否为npc。\n能举例演示一下代码吗？谢谢了"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1567492440,
            "txt_content": "xueyu001 发表于 2019-9-3 14:30\n原版api只能通过名字确认npc\n\n其他方式的确认\n\nNPCmod根本就没有提供检测NPC实体的接口，只能通过反射机制。但我不知道具体用那个方法，还有我的是1.7.10版本的"
        },
        {
            "author": "不动要塞",
            "timestamp": 1567492800,
            "txt_content": "npcmod有点数机制，击杀后变动点数用于反应，你可以这个来迂回实现。"
        },
        {
            "author": "森林蝙蝠",
            "timestamp": 1567493880,
            "txt_content": "guo1060924736 发表于 2019-9-3 14:32\n能举例演示一下代码吗？谢谢了\n@SubscribeEvent\npublic void onNpcAttack(LivingAttackEvent event){\n          Entity entity=event.getTarget();\n           if(entity instanceof YourNPC) // if(entity.getUniqueID().equals(uuid)) //if(entity.getClass().getName().equals(\"NPCName\")\n               doSth();\n}"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1567495320,
            "txt_content": "森林蝙蝠 发表于 2019-9-3 14:58\n@SubscribeEvent\npublic void onNpcAttack(LivingAttackEvent event){\n          Entity entity=event.ge ...\n再请教一下if(entity instanceof yournpc)这个YourNPC实体怎么获取？还有getClass（）方法获取的名字不是npc的名字"
        },
        {
            "author": "森林蝙蝠",
            "timestamp": 1567495440,
            "txt_content": "guo1060924736 发表于 2019-9-3 15:22\n再请教一下if(entity instanceof yournpc)这个YourNPC实体怎么获取？还有getClass（）方法获取的名字不是 ...\n从世界中获取，world.getEntities()之类，至于getClass()，那是在给你没有依赖的情况下反射用的，多个写法多条路。"
        },
        {
            "author": "guo1060924736",
            "timestamp": 1567495980,
            "txt_content": "森林蝙蝠 发表于 2019-9-3 15:24\n从世界中获取，world.getEntities()之类，至于getClass()，那是在给你没有依赖的情况下反射用的，多个写 ...\nworld.getEntities获取的不是所有实体吗？如何检测他是我想要的那个npc呢？"
        },
        {
            "author": "森林蝙蝠",
            "timestamp": 1567496820,
            "txt_content": "guo1060924736 发表于 2019-9-3 15:33\nworld.getEntities获取的不是所有实体吗？如何检测他是我想要的那个npc呢？\n我说您是要我从头到尾地教您写下来？\nworld.getEntities(Class.forName(\"npcname\"),entity->entity.getDistanceTo(player)<64);\n除此之外，还有些别的获取一片区域内实体的方法，不再赘述（因为我也想不起来），请自行在IDE中搜索。"
        },
        {
            "author": "wshycaa",
            "timestamp": 1567614300,
            "txt_content": "只需要在插件前置里导入CustomNPC mod 然后 利用(Object)Entity instanceof Customnpc即可"
        },
        {
            "author": "和煦樱",
            "timestamp": 1571794980,
            "txt_content": "用NPC脚本功能很容易就实现了.\nNPC正在攻击的目标: npc.getAttackTarget()\n攻击NPC的目标: event.getSource()"
        }
    ]
}