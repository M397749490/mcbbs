{
    "title": "【已解决】如何在铁砧gui界面中禁止使用数字键盘",
    "author": "Arobcher",
    "replyCount": 4,
    "timestamp": 1490513580,
    "txt_content": " 本帖最后由 Arobcher 于 2017-3-27 21:25 编辑 \n\n如题，我想写一个禁止铁砧修复一些物品的插件,但是有一个bug无法解决，导致玩家依然可以用 数字键盘(123456789 之内的)来直接移动放置到铁砧修复物品内.\n代码        @EventHandler\n        public void onClick(InventoryClickEvent e){\n                ItemStack stack = new ItemStack(Material.DIAMOND_PICKAXE);\n                InventoryType type = e.getInventory().getType();\n                if (type == InventoryType.ANVIL) {\n                        if (e.getCurrentItem().isSimilar(stack)) {\n                                if (e.getClick().isKeyboardClick() || e.getClick() == ClickType.NUMBER_KEY) {\n                                        e.setCancelled(true);\n                                }\n                                e.setCancelled(true);\n                        }\n                }\n        }复制代码\n\n这里拿 钻石镐为列子,一些基本的点击事件(左键 右键 Shift点击 之内的)都可以禁止,但是唯一的就是 数字键盘无法禁止.\n用 getClick() 判断是否是 数字键盘 也不行! 求解决方法 谢谢!\n\n",
    "replies": [
        {
            "author": "602723113",
            "timestamp": 1490522160,
            "txt_content": "嘛...其实呢有个事件是可以预览的\n\nPrepareAnvilEvent.getResult()  //返回铁砧修复东西后得到的ItemStack\nPrepareAnvilEvent.getInventory() //返回这个铁砧的Inventory,是个叫AnvilInventory的类好像是继承还是实现了Inventory类(还是接口)\n\n相关网址: https://hub.spigotmc.org/javadoc ... pareAnvilEvent.html"
        },
        {
            "author": "Arobcher",
            "timestamp": 1490530560,
            "txt_content": "602723113 发表于 2017-3-26 17:56\n嘛...其实呢有个事件是可以预览的\n\nPrepareAnvilEvent.getResult()  //返回铁砧修复东西后得到的ItemStack\n我没有找到这个 Event 要换什么版本的服务端？"
        },
        {
            "author": "jiongjionger",
            "timestamp": 1490594640,
            "txt_content": "监听InventoryClickEvent事件\n通过e.getInventory().getType() == InventoryType.ANVIL判断是不是铁砧\n通过InventoryAction.HOTBAR_MOVE_AND_READD.equals(e.getAction())判断是不是用数字键把快捷栏物品弄上去，是的话取消事件即可（e.setCancelled(true)）"
        },
        {
            "author": "Arobcher",
            "timestamp": 1490621100,
            "txt_content": "问题已解决!!!请勿再回复"
        }
    ]
}