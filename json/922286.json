{
    "title": "【随机签名档】教你如何制作一个随机签名档",
    "author": "SHEEP_REALMS",
    "replyCount": 12,
    "timestamp": 1572050400,
    "txt_content": " 本帖最后由 SHEEP_REALMS 于 2019-10-26 09:05 编辑 \n\n注\n意注意！没有服务器的可以走了！想要完成这个作品，您手边必须有一个服务器或者各类托管等等注\n意\n\n理论部分\n众所周知，签名档常常都是引用网络上的一张图片实现的，但如果想要做成随机的图片那该怎么做呢？首先我们知道，图片地址是固定的，例如：\nhttps://www.mcbbs.net/template/mcbbs/image/logo_sc.png\n这就是一张图片的地址，可以看到最后面是一个文件名。\n那如果需要做到随机应该怎么做呢？首先我们肯定要建立一个“中转站”，然后通过随机算法进行重定向。\n重定向(Redirect)就是通过各种方法将各种网络请求重新定个方向转到其它位置（如：网页重定向、域名的重定向、路由选择的变化也是对数据报文经由路径的一种重定向）。\n能做到这一点的，据我所知只有PHP，所以接下来我们要用PHP来写代码。\n\n可能有人会问，为什么其他类型的文档也能重定向但却不使用呢？关于这个问题，你自己试试不就知道了是什么鸟样了\n\n不过，我觉得PHP的代码看着更舒服，反正逻辑已经给你们了，你们想用什么语言照着抄就行了  \n\n开始敲代码\n首先创建一个PHP文档\n<?php\n\n?>复制代码\n\n接下来，我们肯定要存储很多图片的地址对吧？这里我们用变量数组，如果你没有更好的方法的话。\n$sg[1]=\"https://i.loli.net/2019/10/05/iacJwFx2ZIBU4s3.png\"; \n$sg[2]=\"https://i.loli.net/2019/10/05/fUFbwViMankLpjr.png\"; \n$sg[3]=\"https://i.loli.net/2019/10/05/25tzawgDA6lkURy.png\"; 复制代码\n\n这个时候，上面的三张图片就已经存储到sg变量中了。\n接下来就只是一个很简单的随机加重定向就OK了 \n$out=rand(1, 3);        //随机范围1~3\nheader(\"location:$sg[$out]\"); 复制代码\n\n不过细心或者闲着没事干的童鞋可能已经发现了，我的签名档有报时功能，这个是怎么做的呢？道理也很简单，加个检查时间的判断就对了。\n在这里，我将报时图片存放在了数组sg中的 1 + 时(有前导零) + 00，例如8点对应的是10800。\nif (date(\"i\")==\"00\") {                                        //报时，检测：分为0，即整点\n         $out=\"1\".date(\"H\").\"00\";                //注意这里必须是大写H，表示有前导零\n        header(\"location:$sg[$out]\"); \n} else {                                                                //无条件\n        $out=rand(1, 3);\n        header(\"location:$sg[$out]\"); \n}复制代码\n\n[ruby=林肯死大头]Link Start![/ruby]\n保存PHP文档，上传到你的服务器，就可以调用它啦！直接把这个文件地址放入img标签中，作品就完成了！ \n哦对了，使用Windows资源管理器上传FTP文件的童鞋记得多上传几次以检测文件完整性 \n\n不过，不管怎么做，“图片”地址打开F12一看都是balabala.php，如果你想自定义一个地址该怎么办呢？可以使用.htaccess编写规则（注意这可能会因主机的操作系统而异）：\nRewriteCond %{QUERY_STRING} ^(.*)$\nRewriteRule ^自定义地址$ 源文件地址复制代码\n\n我就说个大概，具体内容我已经放在GitHub上了，点击我的签名档即可访问 \n\n之后我打算再做几个检测节日的功能 \n\n哦对了，之前有沙雕网友直接把代码塞进了签名档，这是不行的！ \n\n最重要的一点，语句末尾别忘了加分号（;）！\n\n↑不过这个问题可以用专门的编辑器帮你纠正",
    "replies": [
        {
            "author": "xmdhs",
            "timestamp": 1572051240,
            "txt_content": "能做到这一点的，据我所知只有PHP，所以接下来我们要用PHP来写代码。\n听说任何一个语言都能做到（\n\n我的是部署在 heroku 上，一个月有 550 个小时的免费份额，然后现在\n\n"
        },
        {
            "author": "不负韶华",
            "timestamp": 1572051420,
            "txt_content": "我真想把你的头发剃下来！\n五叶牌绿色生织羊毛袜，让五叶永远开心(∩_∩)。"
        },
        {
            "author": "SHEEP_REALMS",
            "timestamp": 1572051600,
            "txt_content": "xmdhs 发表于 2019-10-26 08:54\n听说任何一个语言都能做到（\n\n我的是部署在 heroku 上，一个月有 550 个小时的免费份额，然后现在\n不过我觉得还是PHP的代码看着舒服，没有复杂的嵌套，没有两头加标签新手还经常忘记结尾的操作，不过就是字符串拼接方式震撼我全家"
        },
        {
            "author": "White_i",
            "timestamp": 1572051780,
            "txt_content": "散了吧，要洋垃圾的"
        },
        {
            "author": "坑触可",
            "timestamp": 1572051960,
            "txt_content": "这让我想到了沙发那位最后一个图片（最近应该删去了）"
        },
        {
            "author": "Zapic",
            "timestamp": 1572079320,
            "txt_content": " 本帖最后由 Zapic 于 2019-10-26 16:46 编辑 \n\nExcuse me?\n为什么你的数组从1开始?\n\nHeroku是个好东西+1\n自制带缓存的Hitokoto签名档是好的(\n\n\n\n再说了:\n<?php\n$sg = Array(\"https://i.loli.net/2019/10/05/iacJwFx2ZIBU4s3.png\",\"https://i.loli.net/2019/10/05/fUFbwViMankLpjr.png\",\"https://i.loli.net/2019/10/05/25tzawgDA6lkURy.png\");\n$rand = mt_rand(0,count($sg)-1);\nheader(\"Location: {$sg[$rand]}\");\n复制代码\n\n会好些,随加随用."
        },
        {
            "author": "快乐小方",
            "timestamp": 1572079980,
            "txt_content": "我昨天还在想这一个这样的教程"
        },
        {
            "author": "SHEEP_REALMS",
            "timestamp": 1572082080,
            "txt_content": "Zapic 发表于 2019-10-26 16:42\nExcuse me?\n为什么你的数组从1开始?\n因为我明确规划了存储空间，并且实际上我存储了很多数据，全放在一行不容易阅读，之后如果文件大小超过了能够快速访问的标准我会对文件进行拆分"
        },
        {
            "author": "Zapic",
            "timestamp": 1572082500,
            "txt_content": " 本帖最后由 Zapic 于 2019-10-26 17:37 编辑 \nSHEEP_REALMS 发表于 2019-10-26 17:28\n因为我明确规划了存储空间，并且实际上我存储了很多数据，全放在一行不容易阅读，之后如果文件大小超过了 ...$sg = Array(\n    \"https://i.loli.net/2019/10/05/iacJwFx2ZIBU4s3.png\",\n    \"https://i.loli.net/2019/10/05/fUFbwViMankLpjr.png\",\n    \"https://i.loli.net/2019/10/05/25tzawgDA6lkURy.png\"\n);\n复制代码\n对于你的整点报时:\n$timealert = Array(\n    \"00.png\",\n    \"01.png\",\n    \"02.png\",\n    \"03.png\",\n    ...\n);\nif (date(\"i\") == \"00\") {\n    $out=intval(date(\"H\"));\n    header(\"Location: {$timealert[$out]}\"); \n} \n复制代码"
        },
        {
            "author": "SHEEP_REALMS",
            "timestamp": 1572090120,
            "txt_content": "Zapic 发表于 2019-10-26 17:35\n对于你的整点报时:\n这样应该挺不错的，但是我有我自己的文件归档方式，目前这个版本反而会让我头疼，所以帮你置顶一下给其他人作为参考吧"
        },
        {
            "author": "南派董卓",
            "timestamp": 1572091920,
            "txt_content": "亏我之前还这么搞:\n一个图片地址，放到签名档\n换个图片地址不变，来产生变化呢。\n(当初是自娱自乐用的服，单独开出来的一个地方这么做的，想起来之前还发帖测试过，笑)"
        },
        {
            "author": "CatSeed",
            "timestamp": 1572093720,
            "txt_content": "曾经我也想过这么玩"
        }
    ]
}