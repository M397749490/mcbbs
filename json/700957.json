{
    "title": "[信息]BungeePing——查看BC服务器延迟吧![全版本]",
    "author": "Arobcher",
    "replyCount": 9,
    "timestamp": 1498532400,
    "txt_content": " 本帖最后由 1582952890 于 2017-9-16 10:02 编辑 \n\nBungeePing\n一、插件用途\n主要用来查看你的延迟和其他玩家的延迟\n\n二、指令权限\n\n/ping | 无权限 | 查看自己的延迟\n/ping <玩家> | 无权限 | 查看该玩家的延迟\n/ping reload | bungeeping.reload | 重载配置文件\n\n\n三、插件截图\n\n\n\n\n\n5E[I~}R0Y`Z%NKYVUG6B0@D.png (307.85 KB, 下载次数: 1)\n\n下载附件\n\n2017-6-27 10:55 上传\n\n\n\n\n\n\n四、配置文件\n#重置配置文件指令 ping reload \n#权限 bungeeping.reload\nPrefix: \"&bEJIAMC &7| \"\nMessage:\n  Player: \"&f你的延迟是 &a%ping%ms\"\n  None: \" &c无法找到该玩家!\"\n  PingPlayer: \"&a%pingplayer% &f的延迟是 &a%ping%ms\"复制代码\n\n\n五、下载地址\n\n\n\n\nBungeePing.jar\n(5.39 KB, 下载次数: 151)\n\n\n\n2017-6-27 10:56 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n六、开源\n\nMain类\npackage com.ejiamc.ayou.BungeePing;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.file.CopyOption;\nimport java.nio.file.Files;\nimport java.util.ArrayList;\n\nimport net.md_5.bungee.api.ChatColor;\nimport net.md_5.bungee.api.plugin.Plugin;\nimport net.md_5.bungee.config.Configuration;\nimport net.md_5.bungee.config.ConfigurationProvider;\nimport net.md_5.bungee.config.YamlConfiguration;\n\npublic class Main extends Plugin\n{\n        public static Plugin plugin;\n        public static Configuration config;\n        public static String prefix;\n        \n        public void onEnable(){\n                plugin = this;\n                loadConfig();\n                getProxy().getPluginManager().registerCommand(this, new PingCommands(this));\n                getLogger().info(\"延迟查询已加载 By:Ayou QQ:2298946728\");\n        }\n        \n        public  static Plugin getInstance(){\n                return plugin; \n        }\n        \n        public static String replaceMsg(String msg){\n                return ChatColor.translateAlternateColorCodes('&', msg);\n        }\n        public static String Msg(String msg){\n                return ChatColor.translateAlternateColorCodes('&', prefix+msg);\n        }\n        \n          public void loadConfig() {\n                    if (!getDataFolder().exists()) getDataFolder().mkdir();\n                    File file = new File(getDataFolder(), \"config.yml\");\n                    try\n                    {\n                      if (!file.exists()) Files.copy(getResourceAsStream(\"config.yml\"), file.toPath(), new CopyOption[0]);\n                      config = ConfigurationProvider.getProvider(YamlConfiguration.class).load(new File(getDataFolder(), \"config.yml\"));\n                    }\n                    catch (IOException e)\n                    {\n                      e.printStackTrace();\n                    }\n                    prefix = replaceMsg(config.getString(\"Prefix\"));\n                  }\n}复制代码\nPingCommand类:\npackage com.ejiamc.ayou.BungeePing;\n\nimport java.util.ArrayList;\n\nimport com.google.common.base.Function;\nimport com.google.common.base.Predicate;\nimport com.google.common.collect.Iterables;\n\nimport net.md_5.bungee.BungeeCord;\nimport net.md_5.bungee.api.CommandSender;\nimport net.md_5.bungee.api.ProxyServer;\nimport net.md_5.bungee.api.chat.TextComponent;\nimport net.md_5.bungee.api.connection.ProxiedPlayer;\nimport net.md_5.bungee.api.plugin.Command\nimport net.md_5.bungee.command.ConsoleCommandSender;\n\npublic class PingCommands extends Command\n{\n        private Main plugin;\n        public PingCommands(Main plugin) {\n                super(\"ping\", null, new String[0]);\n                this.setPlugin(plugin);\n        }\n    \n        @Override\n        public void execute(CommandSender sender, String[] args) {\n                if (args.length == 1) {\n                        if (args[0].equalsIgnoreCase(\"reload\")) {\n                                if (sender.hasPermission(\"bungeeping.reload\") || sender instanceof ConsoleCommandSender) {\n                                        this.plugin.loadConfig();\n                                        sender.sendMessage(new TextComponent(Main.Msg(\"&b配置文件已重载!\")));\n                                        return;\n                                }\n                        }\n                }\n                int ping;\n                if (args.length == 0 ) {\n                        if (sender instanceof ProxiedPlayer) {\n                                ProxiedPlayer player = (ProxiedPlayer)sender;\n                                ping = player.getPing();\n                                player.sendMessage(new TextComponent(Main.Msg(Main.config.getString(\"Message.Player\").replace(\"%ping%\", String.valueOf(ping).replace(\"%player%\", player.getName())))));\n                                return;\n                        }\n                }\n                if (args.length == 1) {\n                        ProxiedPlayer pingplayer = BungeeCord.getInstance().getPlayer(args[0]);\n                        if (pingplayer == null) {\n                                sender.sendMessage(new TextComponent(Main.Msg(Main.config.getString(\"Message.None\"))));\n                                return;\n                        }\n                        ping = pingplayer.getPing();\n                        sender.sendMessage(new TextComponent(Main.Msg(Main.config.getString(\"Message.PingPlayer\").replace(\"%pingplayer%\", pingplayer.getName()).replace(\"%ping%\", String.valueOf(ping)))));\n                        return;\n                }\n        }\n        public Main getPlugin() {\n                return plugin;\n        }\n        public void setPlugin(Main plugin) {\n                this.plugin = plugin;\n        }\n}复制代码\n\n\n七、更新记录\n2017-06-27 发布插件\n八、声明 本插件所用所有代码均为原创,不存在借用/抄袭/违反协议等行为\n本插件为非盈利性插件，免费发布，严禁销售和转卖复制代码\n\n\n",
    "replies": [
        {
            "author": "888fffgjklok",
            "timestamp": 1498537500,
            "txt_content": "好啊啊啊啊啊啊啊啊啊啊啊啊啊啊"
        },
        {
            "author": "alvinloh520",
            "timestamp": 1498539300,
            "txt_content": "感谢~~~~~~~~"
        },
        {
            "author": "TNT8",
            "timestamp": 1498540140,
            "txt_content": "我记得，插件板块是不允许隐藏回复的吧？\n还是说需要达到优秀以上的才可以？\n尽快修改吧。"
        },
        {
            "author": "kangok741",
            "timestamp": 1498540560,
            "txt_content": "挺好的一个插件，希望可以加上不同权限的指令冷却时间\n赶上前排了啊。很喜欢这样的字体"
        },
        {
            "author": "SpZz",
            "timestamp": 1498753500,
            "txt_content": "怎么不能下载"
        },
        {
            "author": "2759369186",
            "timestamp": 1498754340,
            "txt_content": "感谢楼主"
        },
        {
            "author": "橐驼",
            "timestamp": 1510342560,
            "txt_content": "KC端，装上了还是啪！，没用"
        },
        {
            "author": "MCGO1",
            "timestamp": 1510367940,
            "txt_content": "支持原创插件谢谢楼主"
        },
        {
            "author": "火焰彬彬",
            "timestamp": 1584070500,
            "txt_content": "很棒！！"
        }
    ]
}