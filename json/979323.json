{
    "title": "[1.14.X-1.16.X]高版本服务端各个方面的优化",
    "author": "Lonely丶独独",
    "replyCount": 25,
    "timestamp": 1583579940,
    "txt_content": " 本帖最后由 Lonely丶独独 于 2021-2-18 10:57 编辑 \n\n=——————————————————————————————————————=\n 高版本服务端各个方面的优化\n\n =——————————————————————————————=\n\n介绍我开1.15.2服务器也有段时间了，来分享我优化的一些策略。首先，核心的选择，推荐使用paper，其他的可以选择Yatopia  Tuinity  Purpur。要找服务端或者自己弄都是可以的，但是你要隔段时间去看paper的官网进行更新核心，链接在这。个人的服务端整合[1.16.X-21w03a][Paper]简洁优化服务端+客户端-纯净生存玩法-详细-常更新V..\n优化由于配置优化的教程实在是太多。防止教程的重复性，我在这列出实用推荐的教程。[配置优化]服务器配置文件优化 —— 让测试数据来说话吧！TPS最高提升100% (CPS)[配置优化][CPS]让喵来分析MOD服卡顿原因,手把手教你优化TPS!|BC管道并不会大量影响服务器卡顿\n\n关于生物优化的插件[生物优化插件]DisableAI —— 禁用某些生物AI，某种程度上减少一些服务器卡顿吧[生物优化插件]Villager Optimiser —— 优化1.14.2以上的村民寻路以减少卡顿[生物优化插件]LimitPillagers —— 修复1.14+的掠夺者卡顿[生物优化插件]Simple Anti-Mob Lag —— 冻结生物以缓解卡服[生物优化插件]NoSpawn——禁止生物生成/支持Mod生物!禁止生物生成，比如守卫者，以下是远古守卫者和守卫者的英文ID。ELDER_GUARDIAN: trueGUARDIAN: true\n\n\n其他优化插件[优化插件]Dupe Fixes|Illegal Stack Remover——修复高版本漏洞[这个不推荐paper端使用.][优化插件]EntityTrackerFixer —— 修复entityTick导致的卡顿[作用不大,还是得看自己的实际情况.][优化插件]Yasui —— 让你的服务器更加流畅吧![优化插件]LaggRemover —— 智能降低延迟★优化TPS&内存【汉化】\n\n比较影响玩家的优化策略首先就是大部分人都知道的对红石的限制 这边建议使用自动清理高频红石的你可以把限制调松 但是我个人认为一定要限制一下让玩家心里有个数 但是并不能限制到全部 有些是限制不到的但是大部分都是可以控制住的 我这边推荐些插件[优化插件]JulySafe —— 红石限制|实体清理|掉落物清理|高版本优化方案[优化插件] Aegis Clear —— 高版本优化 | 清理 | 管理插件这个我用下来 只有Yum开启的时候 会显示报错 具体的原因就是守卫者的限制功能[可自行关闭]带了自动清理 限制命令 一些很实用的功能实体限制看自己情况进行限制\n\n\n使用占用较少反作弊或者不使用反作弊插件。[根据自己的实际情况来推断，最好还是是加上反作弊]关于假矿，我非常推荐直接使用paper自带的anti-xray。在paper.yml调整，假矿模式调成2更佳。示范    anti-xray:\n      lava-obscures: false\n      use-permission: false\n      enabled: true   #是否开启\n      engine-mode: 2  #分别有2个模式，1为矿物替换模式，2为全方块替换模式。\n      max-chunk-section-index: 3\n      update-radius: 2\n      hidden-blocks:   #我加上了下界矿 残骸 下界块等等\n      - gold_ore\n      - iron_ore\n      - coal_ore\n      - lapis_ore\n      - mossy_cobblestone\n      - obsidian\n      - diamond_ore\n      - redstone_ore\n      - emerald_ore\n      - ender_chest\n      - nether_quartz_ore\n      - nether_gold_ore\n      - ancient_debris\n      replacement-blocks:\n      - netherrack\n      - stone\n反作弊插件推荐。[反作弊插件]Matrix —— 超五万下载/两千个服务器正在使用的高性能反作弊[建议使用Wu_dian的优化配置][添加插件以后，建议在配置文件的 min_tps，此项默认已改。][将-1改为17左右，这个意思是在最低TPS 反作弊执行检查之前，如果服务器TPS低于此值，则将禁用检查][虽然这是为了防止误报，但当服务器tps较低时，也可以使用它来节省性能][反作弊插件]CheatCaptcha——将作弊玩家扼杀在摇篮能防止一些作弊端，但还是建议配合其他反作弊。[反作弊插件]GK·AntiCheat——简单的反作弊插件和上面的差不多[反作弊插件]HackedServer——作弊MOD的克星!虽然付费，但是非常好用，可惜无法检测Fabric使用的模组[反作弊插件]AdvancedAntiCheat5 —— 知名的付费反作弊插件\n\n群组服方案\n群组服组建的教程和上面的配置教程一样很多，推荐以下教程。[群组服组建]我的世界BungeeCord群组服制作教程[群组服组建]BungeeCord群组服搭建教程（简直是傻瓜式的）简单来说就是把生存，资源，末地，地皮等等分别使用一个端运行。由于服务器吃单核的原因，分开端运行，让你的cpu能够跑满，可以让你的服务器塞更多人。记住，要视自己情况进行分端，不要盲目分端，比如你cpu核心少，内存少，就不适合群组。数据同步肯定是需要的，要不然每个你的服务器数据都不同，还怎么让玩家玩。\n\n多种方案方案一：[数据同步]MySQLPlayerDataBridge——强大的跨服数据同步插件[有能力还是用付费的吧]\n\n方案二：能同步玩家背包、玩家经验以及末影箱。[同步背包]MySQL InventoryBridge——跨服背包就是群组服的福音[同步经验]MySQL ExperienceBridge——跨服同步经验[同步末影箱]Custom EnderChes——跨服同步末影箱\n\n方案三：[数据同步]PlayerDataSQL —— 模组数据跨服同步插件 [1.7.10-1.15.2]\n\n方案四：[数据同步]KnapsackToGo2 —— 全能的跨服数据同步插件\n\n\n\n\n下面是跨服传送类插件[亲测1.15.2可使用 这个是我机翻的配置语言文件 简单的修改了下 谅解]放入群组端的BungeeSuite文件夹里面\n\n\n\nMessages.yml\n(5.48 KB, 下载次数: 8)\n\n\n\n2020-3-7 20:56 上传\n点击文件名下载附件\n\n\n\n\n\n[跨服核心插件]BungeeSuite[Warp设置插件]BungeeSuite-Warp[Tp插件]BungeeSuite-teleporter[设置家插件]BungeeSuite-Homes\n\n群组服时会遇到的一些问题群组服个人建议使用外置登录。方便弄的，就是统一通行证了，但是你必须知道以下事项。用了统一通行证之后，比如你想在手机上玩，或者是互通服，暂时是没有办法弄的。而且会有很多玩家会嫌注册麻烦，导致丢失很多玩家。最好是弄个自动回复机器人之类。然后就要看你服务器的管理人员，能不能积极的给玩家提供帮助，减少丢失玩家。\n\n但是统一通行证好处也有不少，方便你管理服务器，比如你开了好几个服，都是单独的ip，你用离线的话，就会出现不少问题。但你用了统一通行证，你ban一个玩家，你其他的服，他都不能进。还有好处就是自带皮肤站，也不会像是登录插件那样，登录需要/login。基本登录成功过一次之后，以后只需要启动即可，也完全不用再输入密码。\n\n这样也可以节省一些资源和提高玩家体验。在群组服的配置文件 这样设置 force_default_server: false也就是你下线是在哪个服务器退出，上线就是哪个服务器。因为如果你开的是群组服，肯定是要弄个大厅服的[导致玩家每次进大厅之后都要传送]。你不使用大厅服，用登录插件，也就意味着你玩家每换一个服务器就需要登录一次。\n\n预加载地图 开启边边界 \n很有效的提高游戏性能！你在没有预加载地图的情况玩家跑图时 是非常占用服务器资源的但是你预加载了地图 玩家跑图时 服务器的压力就少了很多                                                                                                                     这时候就不需要服务器计算地图 服务器只需要加载本地的地图以下是简单的教程首先去官网下载worldborder[边界插件][服务端整合自带]https://www.spigotmc.org/resources/worldborder.60905/然后直接安装 不需要前置\n\n我建议直接输入/worldborder:wb world set 5000 0 0  好分辨边界中心在哪world 是世界名字 5000的半径 然后就是X和Z的坐标/worldborder:wb shape square 建议设置为方形边界我这样设置也就是1w X 1w的边界 正负5000坐标直接/worldborder:wb world fill   然后/worldborder:wb fill confirm 确认 就开始预加载了预加载期间会导致服务器严重卡顿 并且需要较长时间如果你是加载资源世界等 推荐先拿到自己电脑上预加载\n\n这个插件可以提高预加载速度 详情进帖子查看https://www.mcbbs.net/thread-910338-1-1.html\n\n预加载完的世界 边界插件可以自行考虑是否删除可以使用服务端自带的边界设置[没想到吧]我也是最近才发现的怎么设置就去下面这个链接看https://minecraft-zh.gamepedia.com/世界边界\n\n\n\n视距方面的优化\n1.16和1.15Paper 自带 no-tick-view-distance功能。                                                                                                                              能提供较好的视距，此插件提供的视野是未加载的区块至于调多少，根据自己服务器情况来，我调的是3实6虚。直接在paper.yml更改即可。    viewdistances:   #比如你在server文件里填的是view-distance=3      no-tick-view-distance: 6  #在这里你填的是6，除了3视距内的是实际加载的方块，其他都是未实际加载的。下方是旧方案，作者已弃坑，1.14和1.15版本可考虑用。如果你需要延迟加载区块等其他功能，可以考虑使用[视距插件]ViewDistanceCat——异步增加视野距离插件 看超远这个也是我从mcbbs里面找到的一个插件千万不要热加载 [配置文件里面有个防透视强行替换区块]热加载会导致显示的区块错误，当时可吓惨我了，立马使用coi回滚方块，发现没用，好几个人的家直接显示没了，然后重启就好了，2333。之前的视距插件在最新的paper已经用不了\n\n\n\n\n\n\n养成使用mysql的习惯 mysql是什么 我个人认为 简单来说 就是一种储存数据的一种方法mysql很高效 能一定的减少服务器的负担关键我是群组服 必须得用上查熊直接使用mysql 大大节省硬盘空间对于新手 我这边建议直接使用宝塔面板https://www.bt.cn/有兴趣的话还可以开个网站 岂不是美哉具体怎么使用 这里写个简单的教程 因为本来弄起来就很简单首先你去宝塔官网下载相应的版本进行安装打开之后点完 应该是这样子的\n\n\n\n\nQQ截图20200317220004.png (120.92 KB, 下载次数: 1)\n\n下载附件\n\n2020-3-17 22:00 上传\n\n\n\n\n然后开始先把端口改了[不改可能进不去链接] 设置下密码和用户名 然后重启下面板复制链接输入用户名登录和密码然后点到这 搜索mysql 然后点击安装 我这里是已经安装好了\n\n\n\n\nQQ截图20200317220354.png (60.85 KB, 下载次数: 15)\n\n下载附件\n\n2020-3-17 22:04 上传\n\n\n\n\n安装以后 点击数据库 然后点击添加数据库我一般是把数据库名用户名 密码 都设置成一样\n\n\n\n\nQQ截图20200317220545.png (87.97 KB, 下载次数: 5)\n\n下载附件\n\n2020-3-17 22:05 上传\n\n\n\n\n这里的root密码 最好是记下来 或者自己设置一个 以后搬运数据会用到的！\n\n\n\n\nQQ截图20200317220739.png (45.32 KB, 下载次数: 9)\n\n下载附件\n\n2020-3-17 22:07 上传\n\n\n\n\n关于插件里面怎么设置host后面的是IP和端口[有些插件是分开来的]localhost是本地端口 3306是数据库的默认端口user后面是用户名 pass后面是密码 database后面是数据库名\n\n\n\n\n\n\nQQ截图20200317220914.png (4.14 KB, 下载次数: 20)\n\n下载附件\n\n2020-3-17 22:09 上传\n\n\n\n\n\n有什么不懂的可以联系我[可能没时间回复]自动重启重启大法好！[重启了也不卡了=-=]再卡再重启 我目前是每天晚上自动重启毕竟服务器一直开着会越来越卡我用的这个，感谢作者带的插件。需要配合bat使用，在启动参数加上关服后自动启动。示范，需要将文件后缀改为bat。\n\n\n\n启动参数.需要将格式改为bat.txt\n(445 Bytes, 下载次数: 11)\n\n\n\n2021-2-3 14:05 上传\n点击文件名下载附件\n\n\n\n\n\n[重启插件]HaLo_RT——自定义每日重启时间,每次重启运行指定指令 其他的一些话spigot.yml 服务端配置文件  max-tick-time:      tile: 1000      entity: 1000这里建议这样设置 不然会导致玩家看起来卡卡的最近更新\n2.3完全重置排版增加了部分新内容反作弊推荐，以及介绍。优化了链接的展现方式。\n旧日志2020.8更新了边界的介绍增加其他的优化介绍2020.6.7更新了视距方面的介绍修改了一些不恰当的介绍和一些小细节2020.4.22更新了边界的介绍[后面]更新了视距插件的使用因为旧的视距插件无法在最新的paper使用增加了更新日志增加了自动重启[重启大法好]\n\n\n\n\n=——————————————————————————=待续...                                                 =————————————————————————=\n如果你觉得还不错的 能评个分嘛T.T温馨提示：收藏本帖，我更新时会通知~~\n\n\n\n\n\n",
    "replies": [
        {
            "author": "玄锐暮",
            "timestamp": 1585790640,
            "txt_content": "确实帮到我了，这么实用的帖子怎么没人？"
        },
        {
            "author": "Lonely丶独独",
            "timestamp": 1585793040,
            "txt_content": "玄锐暮 发表于 2020-4-2 09:24\n确实帮到我了，这么实用的帖子怎么没人？\n谢谢支持"
        },
        {
            "author": "22743932",
            "timestamp": 1585987740,
            "txt_content": "谢谢楼主 学会了"
        },
        {
            "author": "Dream1ng",
            "timestamp": 1586486400,
            "txt_content": "楼主你好。1.15.2paper 是不是用不了0t活塞啊  而且为什么刷铁机一开始能刷铁傀儡后来就罢工了 原来用spigot没这些问题"
        },
        {
            "author": "Lonely丶独独",
            "timestamp": 1586569680,
            "txt_content": "Dream1ng 发表于 2020-4-10 10:40\n楼主你好。1.15.2paper 是不是用不了0t活塞啊  而且为什么刷铁机一开始能刷铁傀儡后来就罢工了 原来用spigo ...\n和1.15.2paper没关系哦"
        },
        {
            "author": "Dream1ng",
            "timestamp": 1586689020,
            "txt_content": "Lonely丶独独 发表于 2020-4-11 09:48\n和1.15.2paper没关系哦\n我现在换回spigot 刷铁机不会再罢工了。我观察了一下 paper端一段时间后个别村民不会动不会睡觉，所以不刷铁傀儡。但是玩家飞到村民边上后，他又能睡觉了。但是我是建在出生地的  不应该这样啊 。spigot是能一直刷，服务器没人也在刷。"
        },
        {
            "author": "Lonely丶独独",
            "timestamp": 1586742480,
            "txt_content": "Dream1ng 发表于 2020-4-12 18:57\n我现在换回spigot 刷铁机不会再罢工了。我观察了一下 paper端一段时间后个别村民不会动不会睡觉，所以不 ...\n多半是区块加载的原因  你用设置下配置 让区块常驻"
        },
        {
            "author": "HSP~~~",
            "timestamp": 1586749020,
            "txt_content": "dalao，PaperMC核心服务器TPS稳定20，但是有人传送（TP，出入下届）就卡？这应该怎么优化鸭，view-distance: 10，还没安装worldborder"
        },
        {
            "author": "Lonely丶独独",
            "timestamp": 1586750280,
            "txt_content": " 本帖最后由 Lonely丶独独 于 2020-4-13 12:02 编辑 \nHSP~~~ 发表于 2020-4-13 11:37\ndalao，PaperMC核心服务器TPS稳定20，但是有人传送（TP，出入下届）就卡？这应该怎么优化鸭，view-d ...\n可以弄传送的冷却时间  你这视距也太多了[加载区块的时候是非常吃性能的]。。建议你按上面的视距插件设置下"
        },
        {
            "author": "Dream1ng",
            "timestamp": 1587305340,
            "txt_content": " 本帖最后由 Dream1ng 于 2020-4-22 00:21 编辑 \nLonely丶独独 发表于 2020-4-13 09:48\n多半是区块加载的原因  你用设置下配置 让区块常驻\n我已经发现了是paper服务端版本的原因，我用以前版本的服务端文件，刷铁机就不会停了"
        },
        {
            "author": "Daleynf",
            "timestamp": 1587454140,
            "txt_content": "太棒了，1.15.2优化貌似本来就不怎么样，试着你的办法，优化了不少呢"
        },
        {
            "author": "Kujouamedaku",
            "timestamp": 1587547560,
            "txt_content": "我觉得很不错，想问问楼主服务器配置怎么样，能带多少人流畅不卡？"
        },
        {
            "author": "Lonely丶独独",
            "timestamp": 1587551700,
            "txt_content": " 本帖最后由 Lonely丶独独 于 2020-4-22 19:04 编辑 \nKujouamedaku 发表于 2020-4-22 17:26\n我觉得很不错，想问问楼主服务器配置怎么样，能带多少人流畅不卡？\n评分错了。。 是e5 2667 v2 6H 12G 乐观的话 人数在不同的子服要平均点 能带40 50个人但是的话 \n我还没测试过 现在paper优化在我看来好了很多 也有可能是我服务器人员越来越少的原因吧\n现在都开学了 没啥人玩了 我也测试不了\n然后还有有些东西需要补充补充 找个时间我再改改帖子\n\n\n\n"
        },
        {
            "author": "Lonely丶独独",
            "timestamp": 1587571320,
            "txt_content": " 本帖最后由 Lonely丶独独 于 2021-2-3 13:31 编辑 \n\n\n\n\n\nimage.png (24.91 KB, 下载次数: 3)\n\n下载附件\n\n2020-5-5 19:57 上传\n\n\n\n\n\n"
        },
        {
            "author": "Kawaaki_Rina",
            "timestamp": 1603030380,
            "txt_content": "感谢。。。。。。。。。。。"
        },
        {
            "author": "windproton",
            "timestamp": 1606280700,
            "txt_content": "感谢楼主的分享~"
        },
        {
            "author": "Yanhan233",
            "timestamp": 1608830040,
            "txt_content": "Lonely丶独独 发表于 2020-4-23 00:02\n这个玩意对我打击挺大的 但是我有好的办法我会尽快更新的\n优秀太夸张了呀，毕竟你这只是引索帖。申请个比普通好点高亮没问题"
        },
        {
            "author": "qingshan12138",
            "timestamp": 1608915900,
            "txt_content": "想问一下楼主，我最近用原版的1.16.4版本开了一个服务器，但发现服务器在没人的时候不能暂停，几年前前建过服务器时用的是1.12.2，在所有人退出后，服务器会自动暂停。现在比较纠结这个，因为没人的时候照常刷怪，而且我的出生点就在村子里，村民一下就变成僵尸村民了。"
        },
        {
            "author": "Lonely丶独独",
            "timestamp": 1608949140,
            "txt_content": "qingshan12138 发表于 2020-12-26 01:05\n想问一下楼主，我最近用原版的1.16.4版本开了一个服务器，但发现服务器在没人的时候不能暂停，几年前前建过 ...\n关闭服务器就好"
        },
        {
            "author": "1522952496",
            "timestamp": 1612349760,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "454564啊",
            "timestamp": 1612411800,
            "txt_content": "写得不错，感谢分享"
        },
        {
            "author": "Zinllen",
            "timestamp": 1612412040,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "1563755598",
            "timestamp": 1612440420,
            "txt_content": " 本帖最后由 1563755598 于 2021-2-4 20:12 编辑 \n\n龙利永远的神~厉害啊"
        },
        {
            "author": "popsugar",
            "timestamp": 1612440540,
            "txt_content": "我优化看看"
        },
        {
            "author": "giaosang666",
            "timestamp": 1612679700,
            "txt_content": " 本帖最后由 giaosang666 于 2021-2-7 14:47 编辑 \n\n看了前面的整合和服务端，再康康优化我感觉我心动的想去优化了呢，非常不错的技巧。\n扣波 6666666666666 加支持。\n"
        }
    ]
}