{
    "title": "关于台阶（半砖）方块的问题",
    "author": "CCxia",
    "replyCount": 1,
    "timestamp": 1563052380,
    "txt_content": " 本帖最后由 CCxia 于 2019-7-14 11:46 编辑 \n\nforge1.12.2，在做台阶类方块的时候遇到了问题，仿照原版紫泊台阶的写法，台阶的模型和贴图没问题，但发现当拿着台阶物品并对着一块下半砖台阶上表面右键时，直接在下半砖上方生成了一块新的下半砖，而不是按预期的那样生成一块上半砖跟下半砖合在一起。代码贴在下面了，想问一问是哪边出了问题？\n\n\npublic abstract class BlockDarkChocolateSlab extends BlockSlab {\n        public static final PropertyEnum<BlockDarkChocolateSlab.Variant> VARIANT = PropertyEnum.<BlockDarkChocolateSlab.Variant>create(\n                        \"variant\", BlockDarkChocolateSlab.Variant.class);\n\n        public BlockDarkChocolateSlab() {\n                super(Material.ROCK, MapColor.MAGENTA);\n                IBlockState iblockstate = this.blockState.getBaseState();\n\n                if (!this.isDouble()) {\n                        iblockstate = iblockstate.withProperty(HALF, BlockSlab.EnumBlockHalf.BOTTOM);\n                }\n\n                this.setDefaultState(iblockstate.withProperty(VARIANT, BlockDarkChocolateSlab.Variant.DEFAULT));\n                this.setHardness(1.0F);\n                this.setSoundType(SoundType.STONE);\n                this.useNeighborBrightness = !this.isDouble();\n                // this.setCreativeTab(CreativeTabsCbCraft.tabCbCraft);\n        }\n\n        public Item getItemDropped(IBlockState state, Random rand, int fortune) {\n                return Item.getItemFromBlock(ModBlocks.DARK_CHOCOLATE_SLAB);\n        }\n\n        public ItemStack getItem(World worldIn, BlockPos pos, IBlockState state) {\n                return new ItemStack(ModBlocks.DARK_CHOCOLATE_SLAB);\n        }\n\n        public IBlockState getStateFromMeta(int meta) {\n                IBlockState iblockstate = this.getDefaultState().withProperty(VARIANT, BlockDarkChocolateSlab.Variant.DEFAULT);\n\n                if (!this.isDouble()) {\n                        iblockstate = iblockstate.withProperty(HALF,\n                                        (meta & 8) == 0 ? BlockSlab.EnumBlockHalf.BOTTOM : BlockSlab.EnumBlockHalf.TOP);\n                }\n\n                return iblockstate;\n        }\n\n        public int getMetaFromState(IBlockState state) {\n                int i = 0;\n\n                if (!this.isDouble() && state.getValue(HALF) == BlockSlab.EnumBlockHalf.TOP) {\n                        i |= 8;\n                }\n\n                return i;\n        }\n\n        protected BlockStateContainer createBlockState() {\n                return this.isDouble() ? new BlockStateContainer(this, new IProperty[] { VARIANT })\n                                : new BlockStateContainer(this, new IProperty[] { HALF, VARIANT });\n        }\n\n        public String getUnlocalizedName(int meta) {\n                return super.getUnlocalizedName();\n        }\n\n        public IProperty<?> getVariantProperty() {\n                return VARIANT;\n        }\n\n        public Comparable<?> getTypeForItem(ItemStack stack) {\n                return BlockDarkChocolateSlab.Variant.DEFAULT;\n        }\n\n        public static class Double extends BlockDarkChocolateSlab {\n\n                public boolean isDouble() {\n                        return true;\n                }\n        }\n\n        public static class Half extends BlockDarkChocolateSlab {\n\n                public boolean isDouble() {\n                        return false;\n                }\n        }\n\n        public static enum Variant implements IStringSerializable {\n                DEFAULT;\n\n                public String getName() {\n                        return \"default\";\n                }\n        }\n}\n\n已解决，使用半砖的时候注册方块物品的时候要使用ItemBlock的子类ItemSlab，传入三个方块参数。\n\n",
    "replies": [
        {
            "author": "3TUSK",
            "timestamp": 1563066120,
            "txt_content": " 本帖最后由 u.s.knowledge 于 2019-7-15 03:10 编辑 \n\n方块对应的物品是不是用的 ItemSlab？不是的话换成它试试。\n\n一天后加上解释：\n很简单，放置台阶的逻辑是物品的而不是方块的，玩家手里不可能拿着方块，一定是拿着一个物品（ItemStack），所以如果方块放置的逻辑有问题，那就是 Item 有问题咯。\n"
        }
    ]
}