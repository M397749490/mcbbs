{
    "title": "[插件]把命令执行器单独分离为一个类",
    "author": "syx330679663",
    "replyCount": 6,
    "timestamp": 1406007540,
    "txt_content": "     才学做插件，现在终于会了在主类里面注册命令执行器，但是如果把他分离出来在一个其他的类里面注册命令执行器的话，接口应该怎么弄？\n还有，怎样让他能够使用主类里面定义好的方法？\n\n\n\n\n\n\n\nQQ图片20140722133450.jpg\n(113.41 KB, 下载次数: 2)\n\n\n\n\n下载附件\n\n\n2014-7-22 13:39 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nQQ图片20140722133459.jpg\n(10.52 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2014-7-22 13:39 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nQQ图片20140722133503.jpg\n(12.92 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2014-7-22 13:39 上传\n\n\n\n\n\n\n\n\n主类里面定义好的方法，这里面显示没定义。。。\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "1277832129",
            "timestamp": 1406008320,
            "txt_content": " 本帖最后由 1277832129 于 2014-7-22 18:09 编辑 \n\n{:10_523:}希望楼主早日解决"
        },
        {
            "author": "syx330679663",
            "timestamp": 1406015040,
            "txt_content": "1277832129 发表于 2014-7-22 13:52\n主类外定义命令 实现listener接口 具体方法反编译ess看看吧 我手机   \n使用主类里面定义好的方法 改方法权 ...\n{:10_523:}能不能具体点，我是java小白，才看java核心技术到第六章，不太懂\n能不能给点代码出来。谢谢了"
        },
        {
            "author": "syx330679663",
            "timestamp": 1406015220,
            "txt_content": "package com.Chaos;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.Location;\nimport org.bukkit.command.*;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.configuration.file.YamlConfiguration;\nimport org.bukkit.entity.Player;\n\nimport java.io.*;\n\npublic class HomeCommand implements CommandExecutor \n{\n        private Main plugin;\n        public HomeCommand(Main plugin)\n        {\n                this.plugin=plugin;\n        }\n        public boolean onCommand(CommandSender sender,Command cmd,String \n                        label,String[] args)\n        {\n                if(label.equalsIgnoreCase(\"chaos\"))\n                {\n                        if(args.length==0)\n                        {\n                                sender.sendMessage(\"§a/chaos sethome [名字] §b设置家\");\n                                sender.sendMessage(\"§a/chaos remove [名字] §b删除家\");\n                                sender.sendMessage(\"§a/chaos home [名字] §b回家\");\n                                return true;\n                        }\n                        if(args[1].equalsIgnoreCase(\"sethome\"))\n                        {\n                                if(sender instanceof Player)\n                                {\n                                        if(args.length>2)\n                                        {\n                                                sender.sendMessage(\"§c参数过长\");\n                                                return true;\n                                        }\n                                        if(args.length<2)\n                                        {\n                                                sender.sendMessage(\"§c参数过短\");\n                                                return true;\n                                        }\n                                        Player player=(Player) sender;\n                                        createHome(player,args[1]);\n                                        player.sendMessage(\"§a设置家成功\");\n                                        return true;\n                                }\n                                sender.sendMessage(\"该命令只能由玩家执行\");\n                                return true;\n                        }\n                        if(args[1].equalsIgnoreCase(\"remove\"))\n                        {\n                                if(sender instanceof Player)\n                                {\n                                        if(args.length>2)\n                                        {\n                                                sender.sendMessage(\"§c参数过长\");\n                                                return true;\n                                        }\n                                        if(args.length<2)\n                                        {\n                                                sender.sendMessage(\"§c参数过短\");\n                                                return true;\n                                        }\n                                        Player player=(Player) sender;\n                                        removeHome(player,args[1]);\n                                        player.sendMessage(\"§a删除家成功\");\n                                        return true;\n                                }\n                        }\n                        if(args[1].equalsIgnoreCase(\"home\"))\n                        {\n                                if(sender instanceof Player)\n                                {\n                                        if(args.length>2)\n                                        {\n                                                sender.sendMessage(\"§c参数过长\");\n                                                return true;\n                                        }\n                                        if(args.length<2)\n                                        {\n                                                sender.sendMessage(\"§c参数过短\");\n                                                return true;\n                                        }\n                                        Player player=(Player) sender;\n                                        Location l=getHome(player,args[1]);\n                                        if(l!=null)\n                                        {\n                                                player.teleport(l);\n                                                return true;\n                                        }\n                                        player.sendMessage(\"§c家不存在\");\n                                        return true;\n                                }\n                                sender.sendMessage(\"该命令只能由玩家执行\");\n                                return true;\n                        }\n                }\n                return false;\n        }\n\n}"
        },
        {
            "author": "syx330679663",
            "timestamp": 1406015280,
            "txt_content": "package com.Chaos;\n\nimport java.io.File;\nimport java.io.IOException;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.Location;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.configuration.file.YamlConfiguration;\nimport org.bukkit.entity.Player;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Main extends JavaPlugin\n{\n        public void onEnable()\n        {\n                getLogger().info(\"插件已成功加载\");\n                getCommand(\"chaos\").setExecutor(new HomeCommand(this));\n                if(!getDataFolder().exists())\n                {\n                        getDataFolder().mkdir();\n                }\n        }\n        public void onDisable()\n        {\n                getLogger().info(\"插件已成功卸载\");\n        }\n        public FileConfiguration load(File file)\n        {\n                if(!file.exists())\n                {\n                        try\n                        {\n                                file.createNewFile();\n                        }\n                        catch(IOException e)\n                        {\n                                e.printStackTrace();\n                        }\n                }\n                return YamlConfiguration.loadConfiguration(file);\n        } \n        public FileConfiguration load(String path)\n        {\n                File file=new File(path);\n                if(!file.exists())\n                {\n                        try\n                        {\n                                file.createNewFile();\n                        }\n                        catch(IOException e)\n                        {\n                                e.printStackTrace();\n                        }\n                }\n                return YamlConfiguration.loadConfiguration(new File(path));\n        }\n        public void createHome(Player player,String name)\n        {\n                Location l=player.getLocation();\n                String path=\"homes/\"+player.getName()+\".yml\";\n                File file=new File(getDataFolder(),path);\n                FileConfiguration config=load(file);\n                config.set(\"Homes.\"+name+\".world\",l.getWorld().getName());\n                config.set(\"Homes.\"+name+\".x\",l.getBlockX());\n                config.set(\"Homes.\"+name+\".y\",l.getBlockY());\n                config.set(\"Homes.\"+name+\".z\",l.getBlockZ());\n                try\n                {\n                        config.save(file);\n                }\n                catch(IOException e)\n                {\n                        e.printStackTrace();\n                }\n        }\n        public Location getHome(Player player,String name)\n        {\n                String path=\"homes/\"+player.getName()+\".yml\";\n                File file=new File(getDataFolder(),path);\n                FileConfiguration config=load(file);\n                if(config.contains(\"Homes.\"+name))\n                {\n                        String world=config.getString(\"Homes.\"+name+\".world\");\n                        int x=config.getInt(\"Homes.\"+name+\".x\");\n                        int y=config.getInt(\"Homes.\"+name+\".y\");\n                        int z=config.getInt(\"Homes.\"+name+\".z\");\n                        Location l=new Location(Bukkit.getWorld(world),x,y,z);\n                        return l;\n                }\n                return null;\n        }\n        public boolean removeHome(Player player,String name)\n        {\n                String path=\"homes/\"+player.getName()+\".yml\";\n                File file=new File(getDataFolder(),path);\n                FileConfiguration config=load(file);\n                if(config.contains(\"Homes.\"+name))\n                {\n                        config.set(\"Homes.\"+name,null);\n                        try\n                        {\n                                config.save(file);\n                        }\n                        catch(IOException e)\n                        {\n                                e.printStackTrace();\n                        }\n                        return true;\n                }\n            return false;\n        }\n}"
        },
        {
            "author": "q513902026",
            "timestamp": 1406029080,
            "txt_content": "调用其他类的方法 请使用他的实例进行调用。\n比如我看你在HomeCommand的构造传入了Main plugin参数\n那么你要调用Main类中的方法 必须要这样\n比如Main类有公共方法a(String other)\nMain类的实例化是plugin\n那么调用a方法\nString other = new String(\"error\");\nplugin.a(other);\n请保证plugin不是为null\n不知道这样解释 楼主是否懂了"
        },
        {
            "author": "syx330679663",
            "timestamp": 1406037000,
            "txt_content": "q513902026 发表于 2014-7-22 19:38\n调用其他类的方法 请使用他的实例进行调用。\n比如我看你在HomeCommand的构造传入了Main plugin参数\n那么你 ...\n明白了。谢谢"
        }
    ]
}