{
    "title": "很奇怪的问题",
    "author": "roj234",
    "replyCount": 5,
    "timestamp": 1553518440,
    "txt_content": " 本帖最后由 roj234 于 2019-3-25 21:00 编辑 \n        BlockPos pos = tile.getPos();\n        tile.getWorld().setBlockToAir(pos);\n        tile.getWorld().removeTileEntity(pos);\n        System.out.println(\"Boom!\");\n        //tile.getWorld().newExplosion(null, pos.getX() + 0.5D, pos.getY() + 0.5D, pos.getZ() + 0.5D, getTierByVoltage(((IMEnergy)tile).volRequired()), true, true);复制代码上面的代码如果不注释掉立即崩溃，注释了之后右键pos已经消失得方块会再出来，再右键同样崩溃\njava.util.ConcurrentModificationException\n        at java.util.HashMap$HashIterator.nextNode(HashMap.java:1445)\n        at java.util.HashMap$KeyIterator.next(HashMap.java:1469)\n        at net.minecraft.client.renderer.RenderGlobal.updateClouds(RenderGlobal.java:1204)\n        at net.minecraft.client.Minecraft.runTick(Minecraft.java:1833)\n        at net.minecraft.client.Minecraft.runGameLoop(Minecraft.java:1096)\n        at net.minecraft.client.Minecraft.run(Minecraft.java:397)\n        at net.minecraft.client.main.Main.main(SourceFile:123)复制代码\n而且不打开云居然还没有这个问题。。。",
    "replies": [
        {
            "author": "RaycusMX",
            "timestamp": 1553522460,
            "txt_content": "上面的代码写在什么地方？或者说从哪里触发？"
        },
        {
            "author": "roj234",
            "timestamp": 1553604360,
            "txt_content": "RaycusMX 发表于 2019-3-25 22:01\n上面的代码写在什么地方？或者说从哪里触发？<span id=\"kM0.795474453211081\">@SubscribeEvent</span>\npublic void onServerTick(TickEvent.ServerTickEvent e){\n   for(TileEntity te : ...){\n        if(.....){\n             代码\n        }\n    }\n}复制代码"
        },
        {
            "author": "liach",
            "timestamp": 1553606700,
            "txt_content": "getTierByVoltage(((IMEnergy)tile).volRequired())复制代码\n这段是问题。你应该在移除tile之前先计算这个东西，然后再移除tile和制造爆炸。不然你再移除后计算mod就会找不到tile或者发现tile被移除而报错。"
        },
        {
            "author": "roj234",
            "timestamp": 1553683440,
            "txt_content": "liach 发表于 2019-3-26 21:25\n这段是问题。你应该在移除tile之前先计算这个东西，然后再移除tile和制造爆炸。不然你再移除后计算mod就会 ...\n仔细看:注释了还是有问题"
        },
        {
            "author": "liach",
            "timestamp": 1553700120,
            "txt_content": "啊，忘了说了，你应该在服务器线程上呼叫这段代码。在客户端线程上的修改是假修改，并没有真正改变服务器上或者世界中的东西。"
        }
    ]
}