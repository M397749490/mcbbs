{
    "title": "[转载][前置][NPS] PiApi —— π接口 [开源][1.0.0]",
    "author": "Actahedral",
    "replyCount": 0,
    "timestamp": 1535450640,
    "txt_content": " 本帖最后由 wode490390 于 2019-12-7 19:02 编辑 \n\n介绍：\n本插件是个前置，可用于在Java插件的注释中注册命令和事件、加载Groovy脚本、动态加载库和插件。没有任何命令与权限，仅是一个依赖库\n\n使用：\n将本插件丢进服务端plugins文件夹内，然后把其它使用本插件作为前置的插件也扔进去，重新启动服务器即可。\n\n开发：在注释中注册命令：\n创建一个命令classimport cn.nukkit.command.CommandSender;\nimport tech.teslex.pi.annotations.PiCommand;\n\nclass Commands {\n    @PiCommand(command = \"test\", description = \"test command\", usage = \"usage test\", aliases = {\"text\"}, permissions = {\"testplugin.test.use\"})\n    public void test(CommandSender commandSender, String s, String[] args) {\n        commandSender.sendMessage(\"test response\");\n    }\n}复制代码然后注册这个classimport tech.teslex.pi.PiApi;\n\nCommands c = new Commands();\n\nPiApi.registerCommands(c);\n复制代码注册事件import cn.nukkit.event.player.PlayerJoinEvent\nimport cn.nukkit.event.player.PlayerMoveEvent\nimport tech.teslex.pi.PiApi\nimport tech.teslex.pi.annotations.PiOn\n\n@PiOn\nvoid onJoin(PlayerJoinEvent e) {\n    e.player.sendMessage \"§eHey, bro!\"\n}\n\n@PiOn\nvoid onMove(PlayerMoveEvent e) {\n    def x = e.player.x as int\n    def y = e.player.y as int\n    def z = e.player.z as int\n\n    e.player.sendPopup \"§e${x} : §a${y} : §c${z}\"\n}\n\nPiApi.registerEvents(this)\n复制代码从网络上动态加载库或插件import tech.teslex.pi.PiApi;\nimport tech.teslex.pi.dependencies.PiDependency;\nimport tech.teslex.pi.dependencies.PiDType;\n\nPiDependency jwt = new PiDependency(\"JWT\", \"java-jwt-{VERSION}.jar\", PiDType.LIBRARY, \"3.3.0\", \"http://central.maven.org/maven2/com/auth0/java-jwt/{VERSION}/java-jwt-{VERSION}.jar\"); \n\nPiApi.requireDependency(jwt);\n复制代码加载Groovy脚本\n在配置文件夹的“script”文件夹里面新建一个后缀为“.groovy”的文件import cn.nukkit.Server\nimport groovy.transform.Field\n\n@Field\nautostart = true // optional, default true\n\nsomeVar = \"i'm a string\"\n\nserver = Server.instance\n\nserver.logger.info(someVar)\nserver.logger.info(\"Server motd: ${server.motd}\")\n\n// ... etc.复制代码脚本例子\n下载：\nv0.0.5(2018.5.23)：\n\n\n\nPiAPI-0.0.5.jar\n(21.94 KB, 下载次数: 23)\n\n\n\n2018-8-28 18:03 上传\n点击文件名下载附件\n0.0.5\n\n\n\n\n\n源代码：GitLab\n\n[groupid=1572]Nukkit Plugin Studio[/groupid]\n",
    "replies": []
}