{
    "title": "[Wiki][PCD] DeluxeMenus 翻译",
    "author": "秋风残叶",
    "replyCount": 2,
    "timestamp": 1494739260,
    "txt_content": " 本帖最后由 秋风残叶 于 2017-9-1 22:19 编辑 \n\n\n\n 前言 [查看Wiki原文] DeluxeMenus是一种多合一的GUI菜单，你可以创建可以用特定指令打开的GUI菜单，玩家打开后可以看到一系列可设置的属性\n玩家的菜单是完全可编辑的，你可以设置让不同的玩家看到特定的物品，或者在菜单里执行已经设置好脚本的特定的指令，所有的这些都是可设置的，你可以按照你想要的把这些功能设置的相对复杂，或者相对简单\n作者很活跃，正努力给插件添加更多特性来让其变得更高效易用，本Wiki包含了本插件的介绍，以及菜单及各物品属性的介绍，同样也包含了几个菜单的例子\n 创建更多yml菜单 [查看Wiki原文]  第一次加载插件，会自动生成一个DeluxeMenus文件夹，在这个文件夹里你可以找到一个文件 config.yml，你可以把所有菜单都放进这个文件，或者你可以新建一个文件来创建新的菜单（在另一个文件夹里）\n\n如果你想这么做的话，请在config.yml的“gui_menus:”下面添加\nmain:\n    file: main.yml复制代码在文件名后面添加.yml是必不可少的\n\n你可以添加很多菜单，当你完成以后请务必重载插件，然后请查看DeluxeMenus文件夹，你会发现里面新生成了一个名叫“gui_menus”的文件夹，该文件夹内包含了所有新建的GUI菜单，你可以直接打开并编辑它们\n\n编辑这些菜单文件和编辑主文件config格式相同，只是配置开头不是“gui_menus:”而是“menu_title:”，新建的文件包含了几行可用物品属性的介绍，同时也有菜单属性的介绍，不妨查看下面的Wiki来获得更多帮助\n DeluxeMenus示例 - 菜单商店 [查看Wiki原文]  DeluxeMenus可以让你创建一个多功能的GUI菜单，你可以用这个菜单做一个子服/世界选择传送，或者做一个商店（就像下面我要展示给你看的一样），你可能需要一些别的插件，除了DeluxeMenus以外，你还需要安装PlaceholderAPI，当你安装好这两个插件之后，重启服务器以确保他们工作正常，当一切都完成后，请在游戏内输入\n/papi ecloud download Player\n/papi ecloud download Vault复制代码然后请稍等一会，然后重载插件\n/papi reload复制代码这样就下载好了Player玩家信息和Vault经济两个papi拓展包，做好这一切以后就可以开始制作商店了，我会给你展示一个例子，然后解释每部分的功能\nmenu_title: '&6商店'\nopen_command: shop\nopen_requirement:\n  expression: 'BukkitPlayer.hasPermission(\"inventory.shop\");'\n  deny_commands:\n  - '&f未知指令. 请使用 \"/help\" 获得帮助'\nsize: 54\nitems:\n  '1':\n    material: STONE\n    data: 1\n    slot: 0\n    display_name: '&7花岗岩'\n    lore:\n    - '&7购买价格: &a$80'\n    - '&7出售价格: &c$40'\n    left_click_commands:\n    - '[console] eco take %player_name% 80'\n    - '[console] give %player_name% stone:1 64'\n    - '[message] &3菜单系统 &a?&7 你成功购买了64个花岗岩.'\n    left_click_requirement:\n      expression: '%vault_eco_balance% >= 80'\n      deny_commands:\n      - '[close]'\n      - '[message] &3菜单系统 &a?&7 你的钱不够哦.'\n    right_click_commands:\n    - '[console] eco give %player_name% 40'\n    - '[console] clear %player_name% stone:1 64'\n    - '[message] &3菜单系统 &a?&7 你成功出售了64个花岗岩'\n    right_click_requirement:\n      expression: '\"%player_hasitem-mat:STONE-amt:64-data:1%\".equals(\"yes\");'\n      deny_commands:\n      - '[close]'\n      - '[message] &3菜单系统 &a?&7 你的花岗岩数量不够'复制代码menu_title 箱子GUI界面的标题\nopen_command 玩家可以使用这个指令打开菜单\nopen_requirement 玩家打开这个菜单需要满足的条件，在此设置下：\ndeny_commands 当玩家不满足条件时显示的内容，在范例中我把条件设置为了权限，你可以将其设置为任何东西\nsize 菜单的大小，最大是 54.\nitems 菜单内物品的各种属性，在此标题下你还需要设置物品的名称，种类等等\n'1' 这个数字代表加载菜单时第一个被加载的物品\nmaterial 物品的种类，你可以使用物品的ID或者 物品的英文名\ndata i物品的子ID，需要注意的是你不能把物品的种类设置成例如“1:1”之类的，你必须设置为种类1+子ID1\nslot 物品在菜单的哪个格子，第一格请输入0，第二格请输入1，以此类推\ndisplay_name 物品的名称，你可以使用彩色代码\nlore 物品的lore，你可以创建多行\nleft_click_commands 设置左键点击物品触发的指令 在范例中，我们扣除了点击者80金钱， 这个地方就是placeholderapi发挥作用的地方. %player_name% 变量代表点击者的名字. 点击者被扣除80金钱，然后获得64个花岗岩. 然后看到一条消息提示购买成功\nleft_click_requirement 玩家左键点击物品需要的前提 首先设置一个 expression. 它使用的是 javascript 脚本. 我们用Vault的papi变量来检查点击者的金钱是否大于或等于80 ，如果不满足条件，我们将关闭GUI并提示玩家金钱不够\nright_click_commands 设置右键点击物品触发的指令 与之前扣除80金钱不同的是, 我们支付给点击者40金钱并从他的背包里扣除64个花岗岩，并使用消息提示他\nright_click_requirement 与左键点击前提稍有不同. 并不是检查他们有没有40金钱, 而是检测他们有没有足够的物品来出售. 我们用另一个papi变量, %player_hasitem-mat:MATERIALNAME-amt:AMOUNT-dataATA%. 如果满足这个条件 \"yes\" 则成功交易反之则关闭菜单并提示背包内的花岗岩不够\n\n建议：我建议你在重载插件之前先把编辑好的菜单保存，因为如果你编辑出了偏差，你的文件可能会被重置，当编辑出现偏差的时候，物品序号便派上用场，控制台上会显示是哪个序号的物品出现问题，来提示你修复\n\n希望这个例子对您有帮助\n DeluxeMenus示例 - 礼包菜单 [查看Wiki原文] 今天来教大家做一个礼包菜单，可以让玩家看到礼包冷却时间（使用Essentials作为前置）\n\n在开始之前，请务必注意placeholderapi默认使用“yes/no”来做逻辑判断(而不是“true/false”,除非你自己做了更改)，如果你不知道我在说什么，你就不用担心这些\n\n我只会用一个物品做范例，ess的礼包名字为starter并且有24小时的冷却时间，让我们先从菜单名和开启指令开始\nmenu_title: '&c&l礼包 &7[&8点击选择&7]'\nopen_command: kits\nsize: 9\nupdate_interval: 1复制代码让我们继续编辑菜单内物品，大家可以看到菜单内已经设置了两个物品\nmenu_title: '&c&l礼包 &7[&8点击选择&7]'\nopen_command: kits\nsize: 9\nupdate_interval: 1\nitems:\n  'starteron':\n    material: iron_sword\n    slot: 0\n    priority: 1\n    update: true\n    hide_attributes: true\n    view_requirement: '\"%essentials_kit_is_available_starter%\".equalsIgnoreCase(\"yes\")'\n    display_name: '&c&lStarter礼包'\n    lore:\n    - '&8+---------------------+'\n    - '&7这是一个礼包.'\n    left_click_commands:\n    - '[player] kit starter'\n    - '[console] playsound mob.horse.armor %player_name% ~ ~ ~ 1 1.2 1'\n    - '[close]'\n    right_click_commands:\n    - '[player] kit starter'\n    - '[console] playsound mob.horse.armor %player_name% ~ ~ ~ 1 1.2 1'\n    - '[close]'\n  'starteroff':\n    material: barrier\n    slot: 0\n    priority: 2\n    update: true\n    hide_enchantments: true\n    enchantments:\n    - 'DURABILITY;1'\n    display_name: '&8[&7当前不可用&8] &c&lStarter礼包'\n    lore:\n    - '&8+---------------------+'\n    - '&7尚未过冷却时间！'\n    - '&7请再等待 &c%essentials_kit_time_until_available_starter%'\n    left_click_commands:\n    - '[console] playsound mob.bat.takeoff %player_name% ~ ~ ~ 1 1.5 1'\n    - '[console] playsound mob.horse.armor %player_name% ~ ~ ~ 1 1.5 1'\n    right_click_commands:\n    - '[console] playsound mob.bat.takeoff %player_name% ~ ~ ~ 1 1.5 1'\n    - '[console] playsound mob.horse.armor %player_name% ~ ~ ~ 1 1.5 1'复制代码我们已经设置好了两个物品，starton和startoff，我绝不会用简单的更换物品种类或者附魔来达到效果，请注意这两个变量优先级priority和浏览前提view_requirement, Startoff这个物品代表礼包正在冷却中，它的优先级priority是2而且它和另一个物品在同一个格子\nStarton这个物品的优先级priority是1，所以他会“覆盖”startoff这个物品，这个物品有一个浏览前提，如果不满足这个前提的话，这个物品starton就会被隐藏，同时显示下面的startoff，startoff这个物品有一个placeholderapi变量%essentials_kit_time_until_available_starter%，会显示这个ess礼包剩下的冷却时间\n\n让我们看一下starton的浏览前提view_requirement\nview_requirement: '\"%essentials_kit_is_available_starter%\".equalsIgnoreCase(\"yes\")'复制代码这个前提以及变量会检测这个礼包当前是否是可领取状态，如果可以领取，会返回结果“yes”...所以前提就是检测这个变量是否返回“yes”，如果是，starton这个物品就会显示给打开菜单的玩家\n\n至此我们就做好了一个礼包菜单，礼包可领取时可以点击，礼包正在冷却时会显示一个屏障，方便地告诉玩家什么时候可以领取礼包\n GUI/物品属性&配置 [查看Wiki原文] 本部分包含了有关GUI菜单及物品的各项属性，每项都提供有正确的格式，并有关于它的用途进行的描述\n本部分由两部分组成，GUI的相关属性和物品相关属性，GUI的相关属性排在config前面，物品相关属性是每个“items:”下面的各项设置\n\n相关链接\nPlaceholderAPI变量大全https://www.spigotmc.org/wiki/placeholderapi-placeholders/物品名称列表https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/Material.html附魔列表https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/enchantments/Enchantment.html染色列表https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/DyeColor.html旗帜图案列表https://hub.spigotmc.org/javadocs/bukkit/org/bukkit/block/banner/PatternType.html\n需要注意的是，某些附魔不能被加到不适合该附魔的物品上\n\n注意事项\nTEXT = 使用任意文字，你可以使用彩色代码BOOLEAN = 逻辑值，使用true/false（如果你使用的是PlaceholderAPI变量，则应该用默认yes/no来替换true/false，这是papi的默认设置）EXPRESSION = Java/papi变量名称 请参考这里获得帮助# = 使用任意数字\n\n\nGUI菜单配置\n\n配置文件的格式非常重要，下面这些是你使用了所有GUI属性时所展示的配置文件\ngui_menus:\n  menuname:\n    menu_title: 'TEXT'\n    open_command: TEXT\n    size: #\n    update_interval: #\n    items:复制代码注意：如果你使用的是外部的gui.yml文件，配置文件将以menu_title开头\nmenu_title: 'TEXT'复制代码这个就是GUI菜单的标题，你可以使用彩色变量，同样，你也可以使用PAPI变量（比如%player_name%）\ncommand: TEXT复制代码这里设置的是用来打开GUI菜单的指令，注意，只能是一个英语单词！而且不能使用彩色代码！\nsize: #复制代码这里设置的是GUI菜单的格子大小，你只能填入9,18,27,36,45,54这几个数字\nupdate_interval: #复制代码这个设置是针对带有update:属性的物品准备的（具体请参物品属性），这个数字代表了每过多少秒会刷新菜单内各物品的名称和lore\nitems:复制代码这里是物品设置的开头\n\n\nGUI物品配置\n\n物品属性应该按照下面这个格式来设置\ngui_menus:\n  menuname:\n    menu_title: 'TEXT'\n    open_command: TEXT\n    size: #\n    update_interval: #\n    items:\n      'ItemName':\n        material: TEXT\n        slot: 0复制代码如果你使用的是外部的gui.yml文件，你的配置文件将以menu_title开头，你可以把“ItemName”设置成任何东西，无论设置成什么都不会影响config的运作，因为它只起到一个标识作用，你可以把它设置成数字，或者任意字符\nmaterial: TEXT复制代码这个属性代表菜单内物品的种类（物品名称列表参本帖上方），这个属性直接对应子ID“data”这个属性（当你需要设置药水或者木头等等带有子ID的物品时发挥作用），本属性与旗帜图案属性“banner-meta”也有关，同样，你也可以使用“head:玩家名”来把物品设置成正版玩家的头颅（玩家名使用PAPI变量%player_name%）\ndata: #复制代码这个属性代表物品的子ID，本属性与物品种类属性有关，你可以利用子ID来设置多种彩色的羊毛等等\namount: #复制代码这个属性代表一个格子内会显示多少个物品\nslot: #复制代码这个属性代表该物品在菜单内的第几个格子，多个物品可以被放入同一个格子，但是你可能要设置优先级属性priority和浏览前提view_requirement来让它工作正常，需要注意的是一个菜单最多只有54个格子，从左上角开始是第一个格子（序号为0），也就是说第九个格子序号是8，这个是没法改变的，用一张图来帮助你理解：\n\n\npriority: #复制代码当多个物品存在于同一个格子时，这个属性代表物品的优先级（本属性与格子slot和浏览前提view_requirement有关），数字越大，优先级越低，举个例子，当存在一个优先级为2的物品时，优先级为5的物品将不会显示，如果同时存在优先级为1的物品，那么之前两个物品都不会显示\nview_requirement: 'EXPRESSION'复制代码这个属性是浏览前提，与格子slot和优先级priority属性有关，你可以在这里设置基础的逻辑判断，或者利用papi做数字判断（papi判断例如：'%vaulteco_balance% > 100'只有你的金钱大于100金币时，你才能看见这个物品，需要Vault作为前置，Java判断例如： 'BukkitPlayer.hasPermission (\"some.permissions\")'玩家只有拥有这个权限才能看到这个物品）请查看下一部分Wiki来了解更多\nupdate: BOOLEAN复制代码如果这个属性设置为true，这个物品名称和lore中的papi变量会被自动刷新，刷新的频率和GUI菜单设置中的\"update_interval\"属性有关，这个属性可用于显示冷却时间和实时统计\n\n下面这个是一个papi变量刷新的例子\n\n\n\n\nhide_attributes: BOOLEAN复制代码这个属性将会隐藏原版物品的各种属性，设置成true以后，原版物品例如剑，镐，斧上的“+5 攻击伤害”将被隐藏\nhide_effects: BOOLEAN复制代码这个属性与上面那个hide_attributes属性很相似，将会隐藏原版物品的各种效果，设置成true以后，原版药水等物品上的药水效果将会被隐藏\nbanner_meta:\n       - <dyecolor>;<patterntype>\n       - <dyecolor>;<patterntype>复制代码只有物品种类为旗帜，这个属性才会生效，这个属性可以设置旗帜的颜色和图案，创造出漂亮而独特的旗帜，染色和旗帜图案列表请参考本部分开头链接，要注意的一点是你必须要用英文分号来分隔颜色和图案，而不是通常的英文逗号\ndisplay_name: 'TEXT'复制代码物品的名称，可以使用彩色代码，也可以使用papi变量\nlore:\n       - 'TEXT'\n       - 'TEXT'复制代码物品的lore，可以使用彩色代码，也可以使用papi变量，只要原版Minecraft允许，你加多少行都可以enchantments:\n       - enchantmentid;level\n       - enchantmentid;level复制代码物品的附魔，附魔名称列表请参考本部分开头列出的链接，请务必注意某些物品/方块不能被打上附魔，某些附魔只对特定的物品生效，如果你不想显示附魔，只想显示附魔的闪光效果，可以使用hide_enchantments这个属性left_click_commands:\n        - '[player] command'\n        - '[console] command'\n        - '[commandevent] command'\n        - '[message] TEXT'\n        - '[openguimenu] MenuName'\n        - '[connect] ServerName'\n        - '[close]'\n\nright_click_commands:\n        - '[player] command'\n        - '[console] command'\n        - '[commandevent] command'\n        - '[message] TEXT'\n        - '[openguimenu] MenuName'\n        - '[connect] ServerName'\n        - '[close]'复制代码这些属性相当于对功能的解释，Left_click_commands 设置的是玩家左键点击物品发生的事件,  right_click_commands 控制的是玩家右键点击物品发生的事件，你想添加多少行都可以，指令会按照从上到下依次执行，指令分为很多种，会在下面列出 (请注意所有指令和内容前面都要留一个空格):\n[player] - 以玩家身份执行指令\n[console] - 以控制台身份执行指令\n[commandevent] - 执行一个特殊的指令世界，类似插件 MyCommand Aliases 或者 DeluxeCommands 里的那样\n[message] - 给玩家发送一条消息，可以添加papi变量或者彩色代码\n[openguimenu] - 打开另一个菜单，只要输入正确的菜单标题就可以了\n[connect] - 传送玩家至一个bungee子服，只要输入正确的子服名称就可以了\n[close] - 关闭菜单\n<delay=(延迟的tick数)> - 给执行指令添加延迟- '[close]'- '[message] 距离这个菜单关闭已经过去 5 秒了 <delay=100>'- '[message] 已经过去 10 秒了<delay=200>'20 ticks i= 1秒. 我们建议不要给打开菜单添加延迟，因为不知情的玩家可能会不停地尝试打开，造成服务器卡顿\nleft_click_requirement:\n          expression: 'EXPRESSION'\n          deny_commands:\n          - '[player] 指令'\n          - '[console] 指令'\n          - '[commandevent] 指令'\n          - '[message] TEXT'\n          - '[openguimenu] 菜单名'\n          - '[connect] 子服名'\n          - '[close]'\n\nright_click_requirement:\n          expression: 'EXPRESSION'\n          deny_commands:\n          - '[player] 指令'\n          - '[console] 指令'\n          - '[commandevent] 指令'\n          - '[message] TEXT'\n          - '[openguimenu] 菜单名'\n          - '[connect] 子服名'\n          - '[close]'复制代码使用Java/papi来检测使用限制，格式和浏览限制view_requirement相同（只是玩家一直能看的见这个物品罢了），这个限制检测的是玩家能否左键/右键点击这个物品。deny_commands部分可选，如果你设置了这个，它们会和 left_click_commands 属性和 right_click_commands 属性同步工作 当玩家左键/右键触发指令的时候，本限制也会开始工作，若玩家不满足前提，指令将不会生效，同时开始执行deny_commands里的内容（若是你没有设置，将什么都不会执行）\n 使用/浏览前提限制 [查看Wiki原文] DeluxeMenus可以提供检查该按钮对特定玩家是否可以使用的限制功能，我们可以给按钮添加无数种类的限制，本功能可以用于view_requirement浏览限制和click_requirement点击限制\n\n点击限制按照字面意思很好理解，我们不会去过多叙述它，本部分我们着重介绍浏览限制view_requirement，所有浏览限制的内容同样可用于点击限制\n\n限制的种类有两种，变量限制（使用PlaceholderAPI变量）和Java限制（也可以使用PlaceholderAPI变量，但不是必要的）以下是一个例子\nview_requirement: '%vaulteco_balance% > 100'复制代码这个限制检测的是玩家的金钱是否大于100，如果大于100，玩家就可以看到这个物品，反之，这个物品将会被隐藏，你可以在这个格子里显示其它物品（首先需要把两个物品放在同一格子中，然后给有浏览限制view_requirement的物品更高的优先级，请参考“GUI物品配置”Wiki部分）或者直接让这个格子留空\n\n这种限制可以用于显示数字的papi变量，我们不止可以设置这种简单的限制，下面这个是检测玩家有无权限的Java限制\nview_requirement: 'BukkitPlayer.hasPermission(\"some.permission\");'复制代码这种限制可以让VIP玩家在菜单里看到不同于普通玩家的物品，比如VIP每日礼包或者VIP奖励，你还可以制作更多，同样，你还可以把papi变量放入Java限制中来看它返回什么结果，例如：\nview_requirement: '\"%player_world%\".equalsIgnoreCase(\"world_nether\");'复制代码请注意一下括在papi变量周围的引号，这比较特殊，这个限制会检测玩家的所在世界 %player_world% 是什么. 如果检测到不是 \"world_nether\" 的值，该物品将不会显示 你可以通过启用\"chat\"附属来检测一个papi变量的值 在聊天栏里输入带大括号的papi变量 (例如: {player_world}). 会显示这个变量的值\n\n那么，上面那个例子中，该怎么设置才能让玩家只有不在world_nether世界才能看到物品呢（也就是正好反过来）请看这个例子：\nview_requirement: '!\"%player_world%\".equalsIgnoreCase(\"world_nether\");'复制代码看起来很复杂吧？让我来解释一下这个限制是如何发挥作用的，要知道，浏览限制view_requirement只接受true和false两种返回结果，也就是说，浏览限制只会检测事件的返回结果是true还是false，在这个前提下，如果一个位于世界“world”的玩家打开了菜单，本限制会检测玩家所在世界，当检测到玩家所处世界是“world_nether”以外的世界时会返回结果true，这就是为什么要在前面加一个英文感叹号，如果你移除了那个感叹号，只有玩家处于世界“world_nether”的时候才会返回结果true\n\n如果你了解了这些，你就应该知道了，当浏览限制返回结果true时会显示物品，反之，返回结果false时会隐藏物品\n\n现在，让我们谈谈papi变量返回值是true/false的限制，例如礼包是否可用变量%essentials_kit_is_available_<礼包名>%\nview_requirement: '\"%essentials_kit_is_available_<kitname>%\".equalsIgnoreCase(\"yes\")'复制代码这个限制会检测ess礼包是否可用，如果可用，这个物品就会在菜单里显示，你应该注意到了，我在指令中使用的是“yes”而不是“true”，这是因为检测是通过PlaceholderAPI进行的，在默认的papi配置中，逻辑值结果返回的是yes/no而不是true/false(如果你在papi配置里修改了这个，那么同样在这里的指令里也要修改)\n\n再说一遍，如果你发现papi限制用不了，请在聊天里检测一下相应变量的返回值是什么\n\n注意：指令里使用的 \".equalsIgnoreCase\", 你可以将其替换为 \".equals\" 本替换将会严格区分大小写. 比如说你有一个世界名叫 \"WoRLd_TeSt\" 你需要使用 \".equals\" 严格大小写来保证返回值正确\n\n\n[groupid=1330]PluginsCDTribe[/groupid]",
    "replies": [
        {
            "author": "幻境雲達達",
            "timestamp": 1494743040,
            "txt_content": "你速度怎么这么快，那怎么办？\n当然是选择原谅你啊！"
        },
        {
            "author": "水煮清娃",
            "timestamp": 1528669680,
            "txt_content": "最新的菜单，每日礼包复制楼主的配置，是无效的，而且有不少配置代码已经跟楼主的不同，希望楼主可以更新一下配置每日礼包的方案，自己折腾了很久也没有眉目，主要的问题应该在可视权限那里。\n\n改变的配置例子：如楼主的“menu_title: '&c&l礼包 &7[&8点击选择&7]'” 新版本已经不叫menu_title而是 display_name\n"
        }
    ]
}