{
    "title": "[CBL∫2b]指令方块进阶教程——模块 §6 : stats用法",
    "author": "⭐✔️",
    "replyCount": 7,
    "timestamp": 1437731580,
    "txt_content": " 本帖最后由 贰逼 于 2015-7-26 10:14 编辑 \n\n获取执行值下一页为 stats用法本章将引进新的概念：执行值。\n执行值便是一个指令除了输出外执行的结果，通常返回执行的次数，输出值或者条件真假。获取执行值就能够随机应变，根据判断来调整下一步输出；执行值也可以用作debug；执行值也可以变相获取游戏参数。\n在指令中，返回值的指令是stats。使用这条指令可以对指令影响的实体、方块、物品进行值的返回，结合条件语句进行下一步输出；或者产生对应参数。\n\n获取执行值将会涉及到\n\nstats用法\n所有执行类型相对执行概念计分板调用实体储存\nstats与条件语句\n一般执行!非且&&或||结合表达式\nstats与时钟\n\n全索引链接\n上一篇（循环嵌套）--下一篇（stats与条件语句）\n§6.1 stats用法\n下一页为 所有执行类别\nstats指令的原理就是将实体或者方块中添加两个关联计分板的NBT，这个NBT是什么后面会讲到。\n\n除了通过entitydata修改这两个NBT外，其实可以直接使用快捷的指令/stats更改，让对实体、方块的操作关联计分板：\n对于实体：\n/stats entity <相对执行的对象> <set/add> <stat类型> <计分板对象/假名> <计分板>复制代码\n对方快：\n/stats block <相对执行方块的坐标> <set/add> <stat类型> <计分板对象/假名> <计分板>复制代码\n        6.1.1 所有执行类别\n下一页为 相对执行概念\nSuccessCountObjective：计分板名称SuccessCountName：计分板赋值实体选择器\n表示上次执行的命令是否成功。\n返回值为真或假。（真为1，假为0）\n\nAffectedBlocksObjective：计分板名称AffectedBlocksName：计分板赋值实体选择器\n表示上次执行成功的命令修改的方块数量。\n返回值为整数。\n\nAffectedEntitiesObjective：计分板名称AffectedEntitiesName：计分板赋值实体选择器\n表示被上次执行成功命令修改的实体数量。\n返回值为整数。\n\nAffectedItemsObjective: 计分板名称AffectedItemsName：计分板赋值实体选择器\n表示被上次执行成功命令修改的物品数量。（主要是物品栏，非实体物品）\n返回值为整数。\n\nQueryResultObjective: 计分板名称QueryResultName: 计分板赋值实体选择器\n表示上次命令的查询结果。\n返回值为整数。\n\n\n        6.1.2 所有执行类别\n下一页为 计分板调用/实体储存\n既然说到了stats后有两个参数：block 和 entity，\nblock可以对接指令方块获取执行值毋庸置疑，那么实体如何对接：\n使用相对执行。\n\n以下面为例：\n我需要相对物品替换周围九格内白色羊毛为橙色羊毛，获取白色羊毛的数量。\n显然可以利用方块完成，相对fill获取fill的值。但是此处不必绕一次，直接利用实体的相对操作完成。\n使用以下指令：\n\n\n\n按照顺序执行：\n/scoreboard players set 1 a 0复制代码\n*记住凡是stats的计分板对象必须设定初始值，否则无法获取执行值（此处的对象是假名'1'）\n/stats entity @e[type=Item] set AffectedBlocks 1 a复制代码\n*给物品添加stats标签（影响方块），返回值对象为计分板a中的'1'假名\n/execute @e[type=Item] ~ ~ ~ fill ~1 ~ ~1 ~-1 ~ ~-1 minecraft:wool 1 replace minecraft:wool 0 复制代码\n*相对实体操作方块\n\n效果：\n\n\n\n在周围九格放置两个白色羊毛\n\n\n激活后，羊毛被替换，获取了2的执行值\n\n\n如果放上4个激活，同样替换后返回4。\n\n\n本节展示stats除了对接指令方块直接获取参数，也可以找实体作为中介，来相对实体执行，其结果一样。\n\n\n        6.1.3 计分板调用/实体储存\n由于execute和scoreboard进一步调用计分板的指令使用实体选择器，所以选择假名兼容性有些差（当然可以通过scoreboard players test再次连接stats达到检测，但是太慢了）\n\n此外，实体还有要求：\n1.必须能够设定初始值的；\n2.必须在指令执行时存在的；\n3.多种执行不冲突。\n否则执行值赋值失败。\n\n我们将上一节的例子中计分板对象转为实体，并在有执行值时输出say 1：\n\n\n\n按照顺序执行：\n/scoreboard players set @e[name=f] a 0复制代码\n*给实体f设定初始值\n/stats entity @e[name=f] set AffectedBlocks @e[name=f] a复制代码\n*给实体f添加stats标签，获取影响方块的次数\n/execute @e[name=f] ~ ~ ~ fill ~1 ~ ~1 ~-1 ~ ~-1 minecraft:wool 1 replace minecraft:wool 0复制代码\n*相对实体f操作方块\n/execute @e[name=f,score_a_min=1] ~ ~ ~ say 1复制代码\n*判断输出\n\n（相对上一节多了一条条件语句，作为计分板调用的演示）\n效果：\n\n\n\n替换白色羊毛为橙色羊毛，且执行返回的值是周围9格白色羊毛的次数，由于符合条件（也就是有执行值），输出1。\n\n\n反之，虽然设定了初始值，但是影响的方块为0，不符合条件（无执行值），无输出。\n\n在stats中，通常使用实体储存来作为计分板调用的工具，希望能尽快掌握。\n\n附加部分\n练习：用stats判断一条指令：/testfor @e[type=EnderDragon]是否输出，返回值储存在名为ed积分版内；制作一个计分板显示游戏时间的小模块，可参考资料。\n[groupid=546]Command Block Logic[/groupid]",
    "replies": [
        {
            "author": "Danger_S.M",
            "timestamp": 1437732420,
            "txt_content": "建议使用一些接地气或简单的语言，不然很难理解"
        },
        {
            "author": "hhttll",
            "timestamp": 1437732540,
            "txt_content": "难              "
        },
        {
            "author": "hhttll",
            "timestamp": 1437732540,
            "txt_content": "hhttll 发表于 2015-7-24 18:09\n难\n不是水回复。。我本来想用一个字强调的，但是感觉有点像水"
        },
        {
            "author": "凋零娘",
            "timestamp": 1437733680,
            "txt_content": "打开游戏技巧板块，全是命令方块教程，没有其他在生存模式里面实用的教程吗"
        },
        {
            "author": "海牛的麻烦",
            "timestamp": 1437735660,
            "txt_content": "我还是不要接触指令方块了"
        },
        {
            "author": "chyx",
            "timestamp": 1437735720,
            "txt_content": "凋零娘 发表于 2015-7-24 18:28\n打开游戏技巧板块，全是命令方块教程，没有其他在生存模式里面实用的教程吗 ...\n你想知道什么 我看看我知道不知道"
        },
        {
            "author": "爱心魔王FHC",
            "timestamp": 1468657440,
            "txt_content": "\n\n\n\n\n00000000000000000000000000000000.jpg (65.63 KB, 下载次数: 0)\n\n下载附件\n\n2016-7-16 16:23 上传\n\n\n\n\n\n\n为什么不行？1.9的原因？\n\n"
        }
    ]
}