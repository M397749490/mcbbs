{
    "title": "关于玩家死亡事件",
    "author": "fenghaolin1",
    "replyCount": 12,
    "timestamp": 1523019120,
    "txt_content": "一个困扰了我很久的问题，怎么判断一个玩家死亡后地点是否是在地面上，如果不是又怎么获取死亡地点到地面的距离往dalao解答",
    "replies": [
        {
            "author": "tallmoon",
            "timestamp": 1523028660,
            "txt_content": "PlayerDeathEvent然后getplayer然后getlocation"
        },
        {
            "author": "fenghaolin1",
            "timestamp": 1523061180,
            "txt_content": "tallmoon 发表于 2018-4-6 23:31\nPlayerDeathEvent然后getplayer然后getlocation\ngetlocation好像只能get到玩家的位置而已吧？现在需要的是玩家到地面的距离"
        },
        {
            "author": "liuyipeng001",
            "timestamp": 1523099460,
            "txt_content": "fenghaolin1 发表于 2018-4-7 08:33\ngetlocation好像只能get到玩家的位置而已吧？现在需要的是玩家到地面的距离 ...\n看看这个Location往上加多少Y是地呗"
        },
        {
            "author": "fenghaolin1",
            "timestamp": 1523106120,
            "txt_content": "liuyipeng001 发表于 2018-4-7 19:11\n看看这个Location往上加多少Y是地呗\n问题是怎么看"
        },
        {
            "author": "壹陽峙",
            "timestamp": 1523107320,
            "txt_content": "@EventHandler\n        public void onDead(EntityDamageEvent evt){\n                \n                if (evt.getEntity() instanceof Player){\n                        \n                        if (evt.getDamage() > ((Damageable) evt.getEntity()).getMaxHealth()){\n                                Location tragerLoc = evt.getEntity().getLocation();\n                                World tragerWorld = evt.getEntity().getWorld();\n                                \n                                while(tragerWorld.getBlockAt(tragerLoc).getType().equals(Material.AIR)){\n                                        \n                                        tragerLoc.setY(tragerLoc.getY()-1);\n                                }\n                                \n                                System.out.println(\"地面坐标：\"+tragerLoc.toString());\n                        }\n                }\n        }复制代码\n\n以上代码手打未测试  (逃"
        },
        {
            "author": "@@Leo",
            "timestamp": 1523108700,
            "txt_content": " 本帖最后由 @@Leo 于 2018-4-8 08:26 编辑 \npublic int getHigh(Location l){\n        int i=0;\n        World w = l.getWorld();\n        for(;w.getBlockAt(l.subtract(0,1,0)).getType().equals(Material.AIR);i++)if(l.getY()<=0)return -1;\n        return i;\n}复制代码\n参数 玩家位置(脚的位置)\n返回 离地面的高度，指中间的空挡，即脚以下地面以上的距离。如果站在站在地面上或者几乎站在地面上返回0，如果站在虚空之上返回-1。\n\nLocation的subtract我也不知道是不是这样子用，我猜是的233\n刚刚自查一下有些不对，已经修正，顺便缩短了代码(特别喜欢缩减到一行的我)"
        },
        {
            "author": "fenghaolin1",
            "timestamp": 1523109660,
            "txt_content": "壹陽峙 发表于 2018-4-7 21:22\n以上代码手打未测试  (逃\n谢了"
        },
        {
            "author": "fenghaolin1",
            "timestamp": 1523109780,
            "txt_content": "壹陽峙 发表于 2018-4-7 21:22\n以上代码手打未测试  (逃\n代码能正常运行并且达到了预期效果:D"
        },
        {
            "author": "fenghaolin1",
            "timestamp": 1523110020,
            "txt_content": "@@Leo 发表于 2018-4-7 21:45\n参数 玩家位置(脚的位置)\n返回 离地面的高度，指中间的空挡，即脚以下地面以上的距离。如果站在站在地面上 ...\n所以w.getBlockAt(l.subtract(0,1,0))是中间的空挡？"
        },
        {
            "author": "@@Leo",
            "timestamp": 1523146860,
            "txt_content": "fenghaolin1 发表于 2018-4-7 22:07\n所以w.getBlockAt(l.subtract(0,1,0))是中间的空挡？\n这行代码是获取脚下方块是不是空气，如果是空气就执行下面的东西\nemm，我似乎多打了个&&上去，已经订正"
        },
        {
            "author": "fenghaolin1",
            "timestamp": 1523674200,
            "txt_content": "@@Leo 发表于 2018-4-8 08:21\n这行代码是获取脚下方块是不是空气，如果是空气就执行下面的东西\nemm，我似乎多打了个&&上去，已经订正 ...\n那有什么方法得到中间空档的距离吗"
        },
        {
            "author": "fenghaolin1",
            "timestamp": 1523699160,
            "txt_content": "fenghaolin1 发表于 2018-4-14 10:50\n那有什么方法得到中间空档的距离吗\n你看下私聊"
        }
    ]
}