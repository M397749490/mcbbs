{
    "title": "关于反射的一些问题",
    "author": "1252251361",
    "replyCount": 14,
    "timestamp": 1597125420,
    "txt_content": " 本帖最后由 1252251361 于 2020-8-11 13:59 编辑 \n\n想要通过反射获取PlayerInventory里面的inventory变量\n错误代码：java.lang.NoSuchFieldException: inventory\n            Class<?> craftPlayerClass = Class.forname(***);\n            Object craftPlayer = craftPlayerClass.cast(player);\n            Method getHandle = craftPlayerClass.getMethod(\"getHandle\");\n            Object entityPlayer = getHandle.invoke(craftPlayer);            Field f = entityPlayer.getClass().getDeclaredField(\"inventory\");            Object inv = f.get(entityPlayer);\n\n但是实际上是有的\n\n\n\n\nTIM截图20200811135540.png (29.56 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-11 13:55 上传\n\n\n\n\n\n\n\n求解答 谢谢大佬们\n\n",
    "replies": [
        {
            "author": "天辉胡萝卜",
            "timestamp": 1597125600,
            "txt_content": "你的entityPlayer是object类，需要先cast到正确的类"
        },
        {
            "author": "1252251361",
            "timestamp": 1597125900,
            "txt_content": "疾风暗影 发表于 2020-8-11 14:00\n你的entityPlayer是object类，需要先cast到正确的类\n我是参照https://www.mcbbs.net/thread-780690-1-1.html这里面的方法做的\n怎么cast到正确的类.."
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1597126800,
            "txt_content": "1252251361 发表于 2020-8-11 14:05\n我是参照https://www.mcbbs.net/thread-780690-1-1.html这里面的方法做的\n怎么cast到正确的类.. ...\nentityPlayer.getClass()\n\n既然你上一步都把entityPlayer转成Object了，Object肯定不存在那个field\n\n把entityPlayer.getClass()替换成Class.forname(\"xxxx\")，手动指定类（跟你第一步一样）"
        },
        {
            "author": "1252251361",
            "timestamp": 1597127520,
            "txt_content": "疾风暗影 发表于 2020-8-11 14:20\nentityPlayer.getClass()\n\n既然你上一步都把entityPlayer转成Object了，Object肯定不存在那个field\nObject inventory = Class.forName(\"net.minecraft.server.v1_16_R1.EntityPlayer\").getDeclaredField(\"inventory\").get(entityPlayer);\n这样写了还是会报错"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1597127880,
            "txt_content": "1252251361 发表于 2020-8-11 14:32\nObject inventory = Class.forName(\"net.minecraft.server.v1_16_R1.EntityPlayer\").getDeclaredField(\"i ...\n你应该用的是\nClass.forName(\"net.minecraft.server.v1_16_R1.EntityHuman\")"
        },
        {
            "author": "1252251361",
            "timestamp": 1597128000,
            "txt_content": "疾风暗影 发表于 2020-8-11 14:38\n你应该用的是\nClass.forName(\"net.minecraft.server.v1_16_R1.EntityHuman\")\n为什么不是EntityPlayer呢？"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1597128240,
            "txt_content": "1252251361 发表于 2020-8-11 14:40\n为什么不是EntityPlayer呢？\n反射定义：\n\npublic Field[] getDeclaredField(Stringname):获取当前Class所表示类中该fieldName名字的字段,不包括继承的字段"
        },
        {
            "author": "1252251361",
            "timestamp": 1597128240,
            "txt_content": "疾风暗影 发表于 2020-8-11 14:38\n你应该用的是\nClass.forName(\"net.minecraft.server.v1_16_R1.EntityHuman\")\n我知道了谢谢"
        },
        {
            "author": "1252251361",
            "timestamp": 1597129140,
            "txt_content": "疾风暗影 发表于 2020-8-11 14:38\n你应该用的是\nClass.forName(\"net.minecraft.server.v1_16_R1.EntityHuman\")\n java.lang.NoSuchMethodException: net.minecraft.server.v1_16_R1.IInventory.getItem(java.lang.Integer)\n java.lang.NoSuchMethodException: net.minecraft.server.v1_16_R1.PlayerInventory.getItem(java.lang.Integer)\n用了PlayerInventory和IInventory都会报错\nClass.forname(\"net.minecraft.server.v1_16_R1.IInventory\").getMethod(\"getItem\", Integer.class).invoke(playerInvenroty,position);\nClass.forname(\"net.minecraft.server.v1_16_R1.PlayerInventory\").getMethod(\"getItem\", Integer.class).invoke(playerInvenroty,position);\n再次求大佬解答 谢谢"
        },
        {
            "author": "轻光233",
            "timestamp": 1597129920,
            "txt_content": "1252251361 发表于 2020-8-11 14:59\njava.lang.NoSuchMethodException: net.minecraft.server.v1_16_R1.IInventory.getItem(java.lang.Integ ...\n如果参数中带有基础数据类型的，请直接使用基础类型名.class而不是封装类型.class"
        },
        {
            "author": "天辉胡萝卜",
            "timestamp": 1597130100,
            "txt_content": "1252251361 发表于 2020-8-11 14:59\njava.lang.NoSuchMethodException: net.minecraft.server.v1_16_R1.IInventory.getItem(java.lang.Integ ...\n1. IInventory是接口所以不能forName\n2. getItem传入参数是int param，不是Integer"
        },
        {
            "author": "1252251361",
            "timestamp": 1597130100,
            "txt_content": "轻光233 发表于 2020-8-11 15:12\n如果参数中带有基础数据类型的，请直接使用基础类型名.class而不是封装类型.class ...\n谢谢大佬 解决啦"
        },
        {
            "author": "1252251361",
            "timestamp": 1597130340,
            "txt_content": "疾风暗影 发表于 2020-8-11 15:15\n1. IInventory是接口所以不能forName\n2. getItem传入参数是int param，不是Integer\n感谢大佬 解决了"
        },
        {
            "author": "轻光233",
            "timestamp": 1597130340,
            "txt_content": "疾风暗影 发表于 2020-8-11 15:15\n1. IInventory是接口所以不能forName\n2. getItem传入参数是int param，不是Integer\n接口可以forName\n\n\n\n\n[4I07{IYT1CX(BF@M_422ZF.png (90.89 KB, 下载次数: 0)\n\n下载附件\n\n2020-8-11 15:19 上传\n\n\n\n\n\n\n\n"
        }
    ]
}