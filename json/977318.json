{
    "title": "用指定物品来向宝藏树换取奖励吧",
    "author": "BR★S",
    "replyCount": 8,
    "timestamp": 1583557440,
    "txt_content": " 本帖最后由 BR★S 于 2020-3-11 15:52 编辑 \n用指定物品来向宝藏树换取奖励吧感谢由 @baoziEOVE  提供的想法以下教程都来自我在20w10a的测试，其他版本的话可以自行考虑测试本教程转载来自：Meriginal云仓库1.前言\n    如果在开始之前您阅读过我的另一篇关于《在你的存档中实现自定义结构并让其随机生成》的教程，那么接下来的内容您将很容易理解，因为这只是一个小小的能扩展您服务器玩家玩法的功能，废话不多说，我们继续往下看。\n\n2.效果(图片来自我自己的腾讯云对象存储桶)接下来我们用小学语文学过的漫画描述来解释一下：    当我们丢出一颗钻石，且该钻石掉落在錾制石砖上时，就会在该钻石3格以上的地方掉落一次随机奖励。\n   那为什么我们这里掉了两次呢：我们仔细看图，我一共丢出了3次钻石，其中两次没有落在石砖上，第三次落在了石砖上并且成功掉落了奖励，这时我们仔细地看奖励，很明显随机奖励里面也包含了一颗钻石，而这个钻石正好又掉在了石砖上，从而再次触发了奖励掉落。\n 3.原理\n利用/execute blocks我们可以很容易判断到钻石所处的环境位置，这时我们只要不断检测钻石周围的环境是否与我们所希望的宝藏树所处在的环境是否一致就行了，是则通过/loop来获取我们自定义的战利品表，否则啥也不执行。\n\n4.环境判断\n先来解释一下/execute blocks <A> <B> <C> <masked/all> 这里的AB是选取宝藏树所处空间的对角线的端点的坐标如下图的两个方块，C为对照空间中8个角内坐标最小的一个坐标，masked为原空间内的空气在对照空间中可以用其他方块替换，all则为必须一模一样，在这里提醒一下：请不要在原空间内放置杂草等会随区块变化而变化的方块!!!\n\n\n\n\n\nBXYC_5130AMZ@T)HAAGMY.png (41.7 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-7 13:09 上传\n\n\n\n\n\n\n5.自定义战利品表\n   我们在<命名空间>内新建一个loot_tables文件夹，在loot_tables中新建一个gift_tree文件夹并在其中新建一个gift_tree.json文件并按如下格式输入代码：\n{\n    \"pools\": [\n        {\n            \"rolls\": {\n                \"min\": 3,\n                \"max\": 6\n            },\n            \"entries\": [\n                {\n                    \"type\": \"item\",\n                    \"name\": \"minecraft:diamond\",\n                    \"weight\": 15,\n                    \"functions\": [\n                        {\n                            \"function\": \"set_count\",\n                            \"count\": {\n                                \"min\": 1,\n                                \"max\": 2\n                            }\n                        }\n                    ]\n                },\n                {\n                    \"type\": \"item\",\n                    \"name\": \"minecraft:stick\",\n                    \"weight\": 90,\n                    \"functions\": [\n                        {\n                            \"function\": \"set_count\",\n                            \"count\": {\n                                \"min\": 1,\n                                \"max\": 2\n                            }\n                        }\n                    ]\n                },\n            ]\n        }\n    ]\n}复制代码\n我们用学前班教过的英语水平来解释一下这个json文件(如果你不会写json文件这边建议你可以转到工地搬砖)(为了方便展示我就不换行了,并且只讲一些基础的)：\n\"rolls\": {\"min\": 3,\"max\": 6}：控制战利品最少和最多出现的物品个数\n\"weight\"：权重,如果你幼儿园数学过关了的话就知道这是什么了(不需要叠加起来是100%)\n\"count\": {\"min\": 1,\"max\": 2}：控制该物品的最少和最多的可获得数量\n\"name\": \"minecraft:stick\"：我也不知道这个什么意思诶\n\n6.兼并整合\n我们在<命名空间>的functions文件夹中新建main.mcfunction和change.mcfunction并按如下格式输入代码：\n#main.mcfunction\nexecute as @e[type=item,nbt={Item:{id:\"minecraft:diamond\"}}] at @s if blocks -8 15 -45 -14 3 -37 ~-3 ~-1 ~-4 masked run function gift_tree:change复制代码#change.mcfunction\nparticle minecraft:witch ~ ~ ~ 0.1 0.1 0.1 1 25\nplaysound minecraft:block.enchantment_table.use block @a ~ ~ ~ 1.2 0.8\ndata merge entity @s {Item:{id:\"minecraft:air\"}}\nloot spawn ~ ~3 ~ loot gift_tree:gift_tree/gift_tree复制代码\n我们继续用学前班教过的英语水平和你在3岁是玩的minecraft只是来解释一下：\nmain.mcfunction：检测钻石所处的环境位置是否满足条件\nchange.mcfunction：显示粒子特效,播放附魔成功的音效,将丢出去的钻石删除,在上方3格处掉落你事先设置好的loot奖励\n\n7.一些后话\n    通过这个功能你可以轻松做出通过判断扔出物品来获取奖励的效果，你甚至可以用自定义的物品来作为获取条件，也可以同时丢出n多种物品来获取不同的品质的奖励，您也可以用来作为类似于暮色传送门开启的那种条件，总之能用的效果很多我就不再提供思路了。\n    如果你有更精彩的想法您可以通过我们的博客告诉我：传送门\n\n",
    "replies": [
        {
            "author": "小六子鸭.",
            "timestamp": 1583557560,
            "txt_content": "开着1.6.4服务器的我飘过~"
        },
        {
            "author": "aoziEOVE",
            "timestamp": 1583557860,
            "txt_content": "感谢测试我的想法"
        },
        {
            "author": "SPGoding",
            "timestamp": 1583616300,
            "txt_content": "使用 execute if blocks 判定的局限性其实还是很大的，例如你所说的草等因素很可能会影响到相关判定。\n\n更加通行的一种做法是在錾制石砖的位置生成一个带有特定标签的隐形盔甲架（armor_stand）或药水云（area_effect_cloud），称其为 marker，然后以该 marker 为执行位置并判定一定范围内是否有物品即可。"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1583631120,
            "txt_content": " 本帖最后由 ruhuasiyu 于 2020-3-8 09:34 编辑 \nSPGoding 发表于 2020-3-8 05:25\n使用 execute if blocks 判定的局限性其实还是很大的，例如你所说的草等因素很可能会影响到相关判定。\n\n更 ...\n那不如判断特定物品附近的方块是否满足相应结构，你这种做法还需要高频检测该结构是否被破坏，被破坏还需要删除marker\n\n不过我是不会去用if blocks的……除非是做冒险地图"
        },
        {
            "author": "BR★S",
            "timestamp": 1583635800,
            "txt_content": "ruhuasiyu 发表于 2020-3-8 09:32\n那不如判断特定物品附近的方块是否满足相应结构，你这种做法还需要高频检测该结构是否被破坏，被破坏还需 ...\n我弄得就是冒险地图。。"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1583641140,
            "txt_content": "BR★S 发表于 2020-3-8 10:50\n我弄得就是冒险地图。。\n如果是不可破坏的冒险地图，那还是按照spg的做法生成一个marker最简单"
        },
        {
            "author": "m172253613",
            "timestamp": 1583725380,
            "txt_content": "。。。。。。。。。。"
        },
        {
            "author": "lzl1lzl",
            "timestamp": 1583886240,
            "txt_content": "掉出的奖品包含钻石并再次触发了奖励hhhh\n运气好不就可以循环下去了吗"
        }
    ]
}