{
    "title": "[安全|管理]ResAddon-LimitBuild —— 限制玩家在非自己领地内的权限 [1.8.X-1.12.X]",
    "author": "Karmun_",
    "replyCount": 33,
    "timestamp": 1530725280,
    "txt_content": " 本帖最后由 Karmun_ 于 2018-7-5 01:34 编辑 \n各位好，本人是国内一个正版服务器的腐竹。服务器内目前开发了不少插件，由于已经不再需要或并不重要，经过团队商议决定发布于MCBBS / SpigotMC。\n本文按照Markdown格式直接编写并复制。\n简介\n\n\n\n\n\nQQ截图20180705011127.png (94.97 KB, 下载次数: 5)\n\n下载附件\n\n2018-7-5 01:20 上传\n\n\n\n\n\n这是一个领地插件的附件，鉴于某些腐竹懒得去找Wiki设置领地插件，在某个腐竹的要求下，我写了这个简单的插件。\n\n(羞耻的聊天记录)\n\n\n\n\n\nQQ图片20180705012507.png (6.87 KB, 下载次数: 9)\n\n下载附件\n\n2018-7-5 01:26 上传\n\n\n\n\n\n\n\n配置文件\n可以使用/limitbuild reload 重载配置文件！\n\n#启用的世界名\nworlds:\n        - world\n\npermission: \n        #有这个权限的玩家可以无视领地权限来建造 建议给建筑师等\n        pass: moci.limit.pass  \n        #使用/limitbuild reload 的权限 无权限不会有任何提示！\n        command: moci.admin\n\n#需要屏蔽的事件\nSettings:\n        #下面两个分别是方块破坏和放置\n        BlockBreakEvent: true\n        BlockPlaceEvent: true\n        \n        EntityDamageByEntityEvent:\n                #这个设置为false指允许玩家在领地内打怪物\n                Monsters: false \n                #除了怪物还剩啥不需要我说了吧？\n                Others: true\n        #玩家交互事件是指的踩田 \n        PlayerInteractEvent: true\n        #实体交互事件是指的踩田 \n        EntityInteractEvent: true\n        #下面两个是收水放水\n        PlayerBucketFillEvent: true\n        PlayerBucketEmptyEvent: true\n\n#提示的消息\nmsg: \"&7您只能在自己的领地内破坏！\"\n复制代码\n源代码本插件开源。 \n您可以访问我们的Git(/Share/ResAddon-LimitBuild) 来查看本插件源码。 \n这里也直接放出关于判断权限的代码，方便您使用。\nprivate boolean hasPerm(Location loc, String name) {\n   ClaimedResidence res = Residence.getInstance().getResidenceManager().getByLoc(loc);\n   return res != null ? res.getPermissions().playerHas(name, \"build\", true) || res.getPermissions().playerHas(name, \"trusted\", true) : false;\n                }\n复制代码\n\n条款\n① 您不允许 转载/发布再次或重新声明作者为他人。[我们将会追究责任] \n② 本人有权利拒绝任何无理由的栽赃。且不对任何本插件造成的损害负责。（会造成损害？） \n③ 本人不可以完全保证本插件与其他的兼容性。但目前暂未发现。 \n④ 本人随时可以发布本插件到其他网站。 \n⑤ 本插件为非盈利性插件，免费发布，严禁销售和转卖。另： 本插件主要用于给新手学习，可能不是最优化的代码。如果代码有雷同的，是巧合。\n下载帖子最后别忘记留下金粒和人气哦。人气免费！\n\n\n\nResAddon-LimitBuild.jar\n(13.32 KB, 下载次数: 354)\n\n\n\n2018-7-5 01:23 上传\n点击文件名下载附件\n1.0 SNAPSHOT\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "asd19970925",
            "timestamp": 1530870000,
            "txt_content": "請問這個插件不能使用在多重世界嗎?\n我有兩個世界 一個是Outdoor 一個是world \n我在檔案裏面僅設置world開啟保護\nOutdoor世界玩家卻也無法破壞方塊"
        },
        {
            "author": "Forever_jiumeng",
            "timestamp": 1540199820,
            "txt_content": "MCBBS有你更精彩~"
        },
        {
            "author": "烟雨郎君",
            "timestamp": 1540722360,
            "txt_content": "这个聊天记录太羞耻了"
        },
        {
            "author": "白色的麋鹿",
            "timestamp": 1541246640,
            "txt_content": "这个对话是作者故意让我们腐竹发这条消息的，字都是复制粘贴的。\n而且我们腐竹根本就不是懒 是根本就不知道，后来腐竹发现插件有内置的就直接没用这个bug超级多 的插件了"
        },
        {
            "author": "白色的麋鹿",
            "timestamp": 1541247720,
            "txt_content": "最主要是作者收了钱却不负责，bug修不好不说，连回复都懒得回了，也懒得告诉res插件的内置功能配置文件该去哪改\n后来全都是腐竹自己在站内找到教程慢慢摸索出来的"
        },
        {
            "author": "1723624171",
            "timestamp": 1543138680,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "193645",
            "timestamp": 1543145280,
            "txt_content": "感谢分享"
        },
        {
            "author": "qq1136428600",
            "timestamp": 1556684880,
            "txt_content": "这个好像对单独开放的世界没用，比如\n#启用的世界名\nworlds:\n        - juzhu2\n\n单独开启这一个世界，这然这个世界需要圈地才能破坏，但是其他世界也需要圈地才能破坏了"
        },
        {
            "author": "ww1373047322",
            "timestamp": 1558026540,
            "txt_content": "qq1136428600 发表于 2019-5-1 12:28\n这个好像对单独开放的世界没用，比如\n#启用的世界名\nworlds:\n我也是这个情况"
        },
        {
            "author": "ww1373047322",
            "timestamp": 1558026660,
            "txt_content": " 这个好像对单独开放的世界没用，比如 #启用的世界名 worlds:         - jiayuan  单独开启这一个世界，这然这个世界需要圈地才能破坏，但是其他世界也需要圈地才能破坏了    就算是不设置他还是启用所有世界！"
        },
        {
            "author": "yuen27787231",
            "timestamp": 1558120620,
            "txt_content": "這個很合適在生存/空島伺服中使用"
        },
        {
            "author": "Sansango",
            "timestamp": 1559102400,
            "txt_content": "感觉不错，一直想找个只能在领地内破坏的插件"
        },
        {
            "author": "only_leaf",
            "timestamp": 1559129580,
            "txt_content": "怎么开门啊，开门也显示没权限破坏"
        },
        {
            "author": "2799976197",
            "timestamp": 1559397060,
            "txt_content": "神插件-很适合我用！！！"
        },
        {
            "author": "Worf丶Horo",
            "timestamp": 1562045640,
            "txt_content": "兼容1.7.10吗？"
        },
        {
            "author": "FTCpear",
            "timestamp": 1562581320,
            "txt_content": "！哇，我就是想要找这个，感谢大佬！！"
        },
        {
            "author": "mc3124076548",
            "timestamp": 1565583000,
            "txt_content": "有消息提示很烦，有时候不小心点到东西就触发消息，希望能出个单独的选项关闭消息提示"
        },
        {
            "author": "神奇镜子君",
            "timestamp": 1566312780,
            "txt_content": "为什么放到catserver端后台会疯狂报错.."
        },
        {
            "author": "moline",
            "timestamp": 1571240700,
            "txt_content": "该插件和Resassist4.0.0有冲突，服务器启动后报错开始\n领地插件是2.6.8.3的喵呜重置，resaddon是1.0.0\n\n附上报错\n[23:35:16] [Server thread/ERROR]: Could not pass event PlayerInteractEvent to ResAddon-LimitBuild v1.0.0 - SNAPSHOT\norg.bukkit.event.EventException\n        at cc.uraniummc.eventexecutor.EventExecutorImp.execute(EventExecutorImp.java:25) ~[EventExecutorImp.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[RegisteredListener.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:508) [SimplePluginManager.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:493) [SimplePluginManager.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.craftbukkit.v1_7_R4.event.CraftEventFactory.callPlayerInteractEvent(CraftEventFactory.java:224) [CraftEventFactory.class:1.7.10-R0.1-SNAPSHOT]\n        at net.minecraft.server.management.ItemInWorldManager.func_73078_a(ItemInWorldManager.java:428) [mx.class:?]\n        at net.minecraft.network.NetHandlerPlayServer.func_147346_a(NetHandlerPlayServer.java:771) [nh.class:?]\n        at net.minecraft.network.play.client.C08PacketPlayerBlockPlacement.func_148833_a(SourceFile:60) [jo.class:?]\n        at net.minecraft.network.play.client.C08PacketPlayerBlockPlacement.func_148833_a(SourceFile:9) [jo.class:?]\n        at net.minecraft.network.NetworkManager.func_74428_b(NetworkManager.java:245) [ej.class:?]\n        at net.minecraft.network.NetworkSystem.func_151269_c(NetworkSystem.java:176) [nc.class:?]\n        at net.minecraft.server.MinecraftServer.func_71190_q(MinecraftServer.java:989) [MinecraftServer.class:?]\n        at net.minecraft.server.dedicated.DedicatedServer.func_71190_q(DedicatedServer.java:458) [lt.class:?]\n        at net.minecraft.server.MinecraftServer.func_71217_p(MinecraftServer.java:806) [MinecraftServer.class:?]\n        at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:665) [MinecraftServer.class:?]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_231]\nCaused by: java.lang.NoSuchMethodError: com.bekvon.bukkit.residence.Residence.getInstance()Lcom/bekvon/bukkit/residence/Residence;\n        at cn.moci.share.limitbuild.Listeners.hasPerm(Listeners.java:26) ~[?:?]\n        at cn.moci.share.limitbuild.Listeners.soilChangePlayer(Listeners.java:113) ~[?:?]\n        at cn.moci.share.limitbuild.Listeners_299_soilChangePlayer_PlayerInteractEvent.invoke(Uranium) ~[?:?]\n        at cc.uraniummc.eventexecutor.EventExecutorImp.execute(EventExecutorImp.java:23) ~[EventExecutorImp.class:1.7.10-R0.1-SNAPSHOT]\n        ... 15 more\n[23:35:17] [Server thread/ERROR]: Could not pass event RABlockPlaceEvent to ResAddon-LimitBuild v1.0.0 - SNAPSHOT\norg.bukkit.event.EventException\n        at cc.uraniummc.eventexecutor.EventExecutorImp.execute(EventExecutorImp.java:25) ~[EventExecutorImp.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[RegisteredListener.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:508) [SimplePluginManager.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:493) [SimplePluginManager.class:1.7.10-R0.1-SNAPSHOT]\n        at net.saralab.residenceassist.ResidenceAssist.onPlayerInteract(ResidenceAssist.java:108) [%5B领地协助%5DResAssist4.0.0.jar:?]\n        at net.saralab.residenceassist.ResidenceAssist_180_onPlayerInteract_PlayerInteractEvent.invoke(Uranium) [?:?]\n        at cc.uraniummc.eventexecutor.EventExecutorImp.execute(EventExecutorImp.java:23) [EventExecutorImp.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) [RegisteredListener.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:508) [SimplePluginManager.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:493) [SimplePluginManager.class:1.7.10-R0.1-SNAPSHOT]\n        at org.bukkit.craftbukkit.v1_7_R4.event.CraftEventFactory.callPlayerInteractEvent(CraftEventFactory.java:224) [CraftEventFactory.class:1.7.10-R0.1-SNAPSHOT]\n        at net.minecraft.server.management.ItemInWorldManager.func_73078_a(ItemInWorldManager.java:428) [mx.class:?]\n        at net.minecraft.network.NetHandlerPlayServer.func_147346_a(NetHandlerPlayServer.java:771) [nh.class:?]\n        at net.minecraft.network.play.client.C08PacketPlayerBlockPlacement.func_148833_a(SourceFile:60) [jo.class:?]\n        at net.minecraft.network.play.client.C08PacketPlayerBlockPlacement.func_148833_a(SourceFile:9) [jo.class:?]\n        at net.minecraft.network.NetworkManager.func_74428_b(NetworkManager.java:245) [ej.class:?]\n        at net.minecraft.network.NetworkSystem.func_151269_c(NetworkSystem.java:176) [nc.class:?]\n        at net.minecraft.server.MinecraftServer.func_71190_q(MinecraftServer.java:989) [MinecraftServer.class:?]\n        at net.minecraft.server.dedicated.DedicatedServer.func_71190_q(DedicatedServer.java:458) [lt.class:?]\n        at net.minecraft.server.MinecraftServer.func_71217_p(MinecraftServer.java:806) [MinecraftServer.class:?]\n        at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:665) [MinecraftServer.class:?]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_231]\nCaused by: java.lang.NoSuchMethodError: com.bekvon.bukkit.residence.Residence.getInstance()Lcom/bekvon/bukkit/residence/Residence;\n        at cn.moci.share.limitbuild.Listeners.hasPerm(Listeners.java:26) ~[?:?]\n        at cn.moci.share.limitbuild.Listeners.onBlockPlace(Listeners.java:47) ~[?:?]\n        at cn.moci.share.limitbuild.Listeners_300_onBlockPlace_BlockPlaceEvent.invoke(Uranium) ~[?:?]\n        at cc.uraniummc.eventexecutor.EventExecutorImp.execute(EventExecutorImp.java:23) ~[EventExecutorImp.class:1.7.10-R0.1-SNAPSHOT]\n        ... 21 more复制代码\n\n\n"
        },
        {
            "author": "Karmun_",
            "timestamp": 1571331300,
            "txt_content": "moline 发表于 2019-10-16 23:45\n该插件和Resassist4.0.0有冲突，服务器启动后报错开始\n领地插件是2.6.8.3的喵呜重置，resaddon是1.0.0\n我一直都在忙着做自己的服务器... 原创六余年，至今0在线，已经逐渐对MC失去希望了。 \n\nResAddon这个插件我应该是不会再维护了，报错显示的是Res中我使用的用来判断权限的方法被作者弃用了。\nRes插件自带对这方面的管理，详见其Wiki。\n\n我最近想找几位策划与监管，不知您有没有相关经验，能否指点一下？\nemail carm@carmwork.com，欢迎邮件(或q1259900264）。"
        },
        {
            "author": "Nicekill",
            "timestamp": 1571369040,
            "txt_content": "很棒的插件"
        },
        {
            "author": "moline",
            "timestamp": 1571496660,
            "txt_content": "Karmun_ 发表于 2019-10-17 15:55\n我一直都在忙着做自己的服务器... 原创六余年，至今0在线，已经逐渐对MC失去希望了。 \n\nResAddon这个插件 ...\n抱歉，我可能无法胜任这个职位，能力差很多"
        },
        {
            "author": "1260755449",
            "timestamp": 1581765540,
            "txt_content": "谢谢楼主分享，正在用。"
        },
        {
            "author": "3448737105",
            "timestamp": 1581943140,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "496828324",
            "timestamp": 1583814540,
            "txt_content": "很不错的插件 顶一下"
        },
        {
            "author": "3472320255",
            "timestamp": 1596365520,
            "txt_content": "加油！！！！！！"
        },
        {
            "author": "JNX",
            "timestamp": 1597414920,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "泠鸢一寒",
            "timestamp": 1597838160,
            "txt_content": "请问一下这个领地插件能保护模组方块么"
        },
        {
            "author": "黎旭羽场",
            "timestamp": 1597840140,
            "txt_content": "MCBBS有你更精彩"
        },
        {
            "author": "一个人的牢",
            "timestamp": 1599108480,
            "txt_content": "这个挺不错啊"
        },
        {
            "author": "一个人的牢",
            "timestamp": 1599454800,
            "txt_content": "楼主快回来把，这个插件真的很好用啊"
        },
        {
            "author": "白化哦",
            "timestamp": 1599456300,
            "txt_content": "还行吧，但是还是有BUG的"
        },
        {
            "author": "Meload",
            "timestamp": 1613018280,
            "txt_content": "非常有用的插件,支持一下"
        }
    ]
}