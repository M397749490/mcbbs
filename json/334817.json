{
    "title": "插件编程实战，公开代码！物品信息测试插件，学Java的人有福了！",
    "author": "修改器很好玩",
    "replyCount": 9,
    "timestamp": 1409823420,
    "txt_content": " 本帖最后由 修改器很好玩 于 2014-9-6 00:00 编辑 \n\n前言：\n  本人最近编写了一个很小的插件，叫做“物品信息”插件，是通过指令/itemtest获取手持物品的信息，例如物品的数量、最大堆叠限度、以及物品ID和名字。这个插件非常容易编写，当然是在你会Java的情况下。\n\n\n开始编写：\n①创建项目和包  首先，在Eclipse中创建一个新的项目，命名为itemInfo。然后在src中创建一个包，包的名字一般用邮件或网址（自己拥有的网址）的倒序来命名。比如说邮箱，假如我的邮箱是jiaocheng@qq.com，那么我的包的名字可以为com.qq.jiaocheng。网址的话，比如说www.mcbbs.net（你不拥有这个网站，所以不要用这个网址），那么就是net.mcbbs.com，这应该很简单吧！\n②导入craftBukkit外部包\n  本身，eclipse和Bukkit是没有任何关系的，如果想让他们产生接口，就得导入外部包。右键项目>属性>构造路径>导入外部包，浏览到你的CraftBukkit包，并点击确定，就可以了。\n\n③创建主类（开始写代码了！）\n\n  右键包，新建类。在名字里面输入“itemInfo”（主类的名字一般和插件名字一样），点击确定。此时，我们看到的是：\npackage xxx.xxx.xxx                 //你的包\npublic class iteminfo{                //类开始复制代码 我们都知道，主类是一个插件的开始，入口点，所以我们需要将主类作为JavaPlugin的子级。\n package com.outlook.vincenthan2009;\n\npublic class Test2 extends JavaPlugin{\n\n}\n复制代码extends关键字指的是“加入某类的子级”，JavaPlugin是CraftBukkit的类。但是这个时候，报错了。这是因为我们没有导入合适的包。左键左侧的灯泡，选择第一个“导入JavaPlugin”就发现报错消失了。现在代码如下：\n\npackage xxx.xxx.xxx;\n\nimport org.bukkit.plugin.java.JavaPlugin\n\npublic class Test2 extends JavaPlugin{\n\n}复制代码现在开始编写方法。主类用于加载和卸载插件，我们希望插件在加载时在命令台里显示“您的插件已被加载！”，卸载时显示“您的插件已被卸载”。代码如下：\n\npackage xxx.xxx.xxx;                                                        //声明包</font>\n\nimport org.bukkit.plugin.java.JavaPlugin;                            //导入包</font>\n\npublic class Test2 extends JavaPlugin{                                //声明类</font>\npublic void onEnable(){                                                //onEnable方法，插件被加载时执行的方法。\n        getLogger().info(\"您的插件已被加载！\");                   //getLogger是向控制台发送信息\n    }\npublic void onDisable(){\n        getLogger().info(\"您的插件已被卸载！\");\n    }\n\n复制代码主类很简单，到此结束。\n\n④命令执行器（这个是核心）\n    \n主类写完了，这个插件虽然被加载了但是没有什么用，我们需要使用命令执行器来添加命令，主要是onCommand方法。\n    右键包，新建类，名字为Executor（什么名字都可以，但是避免使用CommandExecutor和Command)。\n    我们需要让Executor类与Bukkit的CommandExecutor类产生接口，所以使用implements关键字：\npackage xxx.xxx.xxx;\n\npublic class Executor implements CommandExecutor{\n\n}\n复制代码   报错。左键灯泡，选择第一个解决方法，代码如下：\n\npackage xxx.xxx.xxx\n\nimport org.bukkit.\n\npublic class Executor implements CommandExecutor{\n\n}\n复制代码\n  但是这个时候Executor又报错了，这个不能自动修复，要自己修复。  为什么报错？是因为Executor implement了CommandExecutor,而所有与CommandExecutor的类都必须有：onCommand方法，所以我们继续添加：\n<blockquote>package com.outlook.vincenthan2009;复制代码\n这里不细讲了，因为能够看到这里的人都是有点基础的。\n\n开始写命令：\n<blockquote>package xxx.xxx.xxx;复制代码\n命令执行器这个时候写完了，但是没有注册这个执行器，我们回到主类，并添加：\n<blockquote>package com.outlook.vincenthan2009;复制代码其中，itemtest为命令名称，Executor为命令执行器的名称。但是报错，我们在命令执行器里面添加：\n<blockquote>package com.outlook.vincenthan2009;复制代码\n这样命令执行器到此完毕。\n⑤plugin.yml\n\n右键项目，新建文件，命名为plugin.yml（注意大小写），写上：\nname: itemInfo\nmain: com.outlook.vincenthan2009.itemInfo\nversion: 1.0\ncommands:\n  itemtest:\n    description: You can get your item's info by using this command.\n    usage: /itemtest\n    permission: itemInfo.itemtest\n\n 代码用途  name: 插件的名字 main: 主类的路径，填   包.主类 version: 版本 commands 以下为命令 itemtest 命令的名字  description: 描述 usage: 用法 permission: 插件名.命令名\n\n⑥输出and最终测试\n\n右键项目，选择“导出”，选择Java内的jar file，选择路径，然后确定。\n然后把jar丢到plugins文件夹中。\n运行服务器，结果如下图所示：\n\n\n⑦全部代码\n命令执行器：[/size]\n[size=1]package com.outlook.vincenthan2009;[/size][size=1]\n[/size]\n[size=1]import org.bukkit.Material;[/size]\n[size=1]import org.bukkit.command.CommandExecutor;[/size]\n[size=1]import org.bukkit.command.CommandSender;[/size]\n[size=1]import org.bukkit.command.Command;[/size]\n[size=1]import org.bukkit.entity.Player;[/size]\n[size=1]\n[/size]\n[size=1]public class Executor implements CommandExecutor {[/size]\n[size=1]    private itemInfo plugin;[/size]\n[size=1]    public Executor(itemInfo plugin){[/size]\n[size=1]            this.plugin=plugin;[/size]\n[size=1]    }[/size]\n[size=1]    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args){[/size]\n[size=1]            if(label.equalsIgnoreCase(\"itemTest\")){[/size]\n[size=1]                if(sender instanceof Player){                       [/size]\n[size=1]                int code =((Player) sender).getItemInHand().getTypeId();[/size]\n[size=1]                        if(code!=0){                           [/size]\n[size=1]                                int amount = ((Player) sender).getItemInHand().getAmount();                    [/size]\n[size=1]                            int maxStack=((Player) sender).getItemInHand().getMaxStackSize();                        [/size]\n[size=1]                            Material name = ((Player) sender).getItemInHand().getType();                          [/size]\n[size=1]                            [/size]\n[size=1]                            sender.sendMessage(\"§4----------------------------------------------------\");[/size]\n[size=1]                            sender.sendMessage(\"§2您手持的物品为\"+name+\"。\");[/size]\n[size=1]                            sender.sendMessage(\"§2您手持的物品数量为\"+amount+\"个。\");[/size]\n[size=1]                            sender.sendMessage(\"§2您手持的物品的ID为\"+code+\"。\");[/size]\n[size=1]                            sender.sendMessage(\"§2您手持的物品最多能叠加\"+maxStack+\"个。\");   [/size]\n[size=1]                            sender.sendMessage(\"§4----------------------------------------------------\");[/size]\n[size=1]                            return true;                           [/size]\n[size=1]                        }[/size]\n[size=1]                        sender.sendMessage(\"§4您不能测试空气！\");[/size]\n[size=1]                        return true;[/size]\n[size=1]                }[/size]\n[size=1]                sender.sendMessage(\"§4只有玩家才能执行该命令!\");[/size]\n[size=1]                return true;[/size]\n[size=1]            }[/size]\n[size=1]            return false;[/size]\n[size=1]    }[/size]\n[size=1]}[/size]\n[size=1]复制代码\n主类：\n[/size]\n[size=1]package com.outlook.vincenthan2009;[/size]\n[size=1]\n[/size]\n[size=1]import org.bukkit.command.CommandExecutor;[/size]\n[size=1]import org.bukkit.plugin.java.JavaPlugin;[/size]\n[size=1]\n[/size]\n[size=1]public class itemInfo extends JavaPlugin{[/size]\n[size=1]        [/size]\n[size=1]        public void onEnable(){[/size]\n[size=1]                getLogger().info(\"您的插件已被加载！\");[/size]\n[size=1]                getCommand(\"itemtest\").setExecutor(new Executor(this));[/size]\n[size=1]        }[/size]\n[size=1]        public void onDisable(){[/size]\n[size=1]                getLogger().info(\"您的插件已被卸载！\");[/size]\n[size=1]        }[/size]\n[size=1]\n[/size]\n[size=1]}[/size]\n复制代码\n\n教程到此结束，谢谢大家！\n\n\n@810587921 \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "52Dora",
            "timestamp": 1409823780,
            "txt_content": "好像这包的名字可以改得很有特色吧233\n例如：mod.dorajdj.xxxmod之类的"
        },
        {
            "author": "a8105",
            "timestamp": 1409830140,
            "txt_content": "补充:\n当命令少的时候继承了JavaPlugin的类也可以用\npublic boolean onCommand(CommandSender sender,Command cmd,String label,String[] args)\n{}"
        },
        {
            "author": "修改器很好玩",
            "timestamp": 1409830140,
            "txt_content": "810587921 发表于 2014-9-4 19:29\n补充:\n当命令少的时候继承了JavaPlugin的类也可以用\npublic boolean onCommand(CommandSender sender,Comma ...\n对，没有错"
        },
        {
            "author": "a8105",
            "timestamp": 1409830200,
            "txt_content": "并且你下面的代码都只剩下package XXX.XXX.XXX,其他的都没了"
        },
        {
            "author": "修改器很好玩",
            "timestamp": 1409830260,
            "txt_content": "810587921 发表于 2014-9-4 19:30\n并且你下面的代码都只剩下package XXX.XXX.XXX,其他的都没了\n我知道，是论坛的问题，而且我也懒得改了"
        },
        {
            "author": "a8105",
            "timestamp": 1409830320,
            "txt_content": "修改器很好玩 发表于 2014-9-4 19:31\n我知道，是论坛的问题，而且我也懒得改了\n那你发教程还有何意义?"
        },
        {
            "author": "修改器很好玩",
            "timestamp": 1409830800,
            "txt_content": "810587921 发表于 2014-9-4 19:32\n那你发教程还有何意义?\n只有最后的“全部代码”有用了"
        },
        {
            "author": "Angelia777",
            "timestamp": 1409843280,
            "txt_content": "嗯.不错.楼主继续啊~~ 多讲一些{:10_509:} 加油"
        },
        {
            "author": "我不叫杨浩",
            "timestamp": 1410129600,
            "txt_content": "呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵呵"
        }
    ]
}