{
    "title": "spigot1.14.4 如何在FallingBlock着地的时候执行代码",
    "author": "Freeze_Dolphin",
    "replyCount": 7,
    "timestamp": 1584765720,
    "txt_content": "RT              ",
    "replies": [
        {
            "author": "William_Shi",
            "timestamp": 1584785640,
            "txt_content": "https://bukkit.windit.net/javado ... ckPhysicsEvent.html\n\n监听BlockPhysicsEvent\nAPI是这么写的\n方块物理事件(例如是沙子掉落、流水). \n这是一个高频率事件, 在一个繁忙的服务器上, 一秒内本事件可能会触发上千次. 建议插件小心监听此事件, 当使用本事件时仅执行一些轻量级的检查. \n另外, 取消此事件可能会使事件陷入一个不合常理的状态(看起来就像世界末日). 例如, 如果你使用此事件在当该方块需要附着到某个东西上时其使悬浮在半空中, 那么无法保证在服务器重启后或地图更新后 此悬浮的方块能保持不变 (就是当方块发生物理变化时尝试改变它们会出现一些未知后果的意思, 具体自己测一下啦). \n插件也应当注意, 在可能的情况下, 该事件可能只会因\"根源\"方块的物理(状态)更新而被调用以限制事件的频繁调用. 导致其它方块状态改变的物理更新可能不会引起其它方块(通常是相邻的方块)的事件. 如果你担忧监听这些改变(可能会产生较大开销), 那么你应该自己检查相邻的方块."
        },
        {
            "author": "Freeze_Dolphin",
            "timestamp": 1584793320,
            "txt_content": "William_Shi 发表于 2020-3-21 18:14\nhttps://bukkit.windit.net/javadoc/org/bukkit/event/block/BlockPhysicsEvent.html\n\n监听BlockPhysicsEve ...\nlbwnb，感谢dalao指点qwq"
        },
        {
            "author": "Freeze_Dolphin",
            "timestamp": 1584793500,
            "txt_content": "William_Shi 发表于 2020-3-21 18:14\nhttps://bukkit.windit.net/javadoc/org/bukkit/event/block/BlockPhysicsEvent.html\n\n监听BlockPhysicsEve ...\n那么FallingBlock着地时到底算SourceBlock还是ChangedBlock呢？"
        },
        {
            "author": "William_Shi",
            "timestamp": 1584793740,
            "txt_content": "Freeze_Dolphin 发表于 2020-3-21 20:25\n那么FallingBlock着地时到底算SourceBlock还是ChangedBlock呢？\n这个事件没有ChangedBlock\n只有getChangedType\n返回的是Material，也就是方块材质"
        },
        {
            "author": "William_Shi",
            "timestamp": 1584793860,
            "txt_content": "Freeze_Dolphin 发表于 2020-3-21 20:25\n那么FallingBlock着地时到底算SourceBlock还是ChangedBlock呢？\n你的意思是这个事件继承于BlockEvent\n然后你想要区分getBlock和getSourceBlock么\n这个我无力解答\n你可以试试写一个测试代码\n思路是输出这两个方块的坐标"
        },
        {
            "author": "Freeze_Dolphin",
            "timestamp": 1584794160,
            "txt_content": "William_Shi 发表于 2020-3-21 20:31\n你的意思是这个事件继承于BlockEvent\n然后你想要区分getBlock和getSourceBlock么\n这个我无力解答\n我刚刚翻了spigot源码。。。发现EntityFallingBlock里调用了EntityChangeBlockEvent，没有你说的BlockPhysicEvent\n\nProblem Solved；自己动手，丰衣足食"
        },
        {
            "author": "William_Shi",
            "timestamp": 1584794460,
            "txt_content": "Freeze_Dolphin 发表于 2020-3-21 20:36\n我刚刚翻了spigot源码。。。发现EntityFallingBlock里调用了EntityChangeBlockEvent，没有你说的BlockPhy ...\n那看来是中文Bukkit文档的翻译有误\n因为英语文档原文的确没有提到沙子落下\n这是中文文档翻译者自己加上去的一个“例如”\n"
        }
    ]
}