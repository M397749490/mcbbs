{
    "title": "关于TileEntity里的insertItem方法",
    "author": "CCxia",
    "replyCount": 1,
    "timestamp": 1560167700,
    "txt_content": "forge1.12.2，在使用TileEntity里的insertItem方法时，发现直接传入一个itemstack的话，执行之后这个itemstack会发生变化，所以得把itemstack copy一份再传入，想问一下具体是哪一个环节执行的时候改变了这个itemstack的值？",
    "replies": [
        {
            "author": "liach",
            "timestamp": 1560219240,
            "txt_content": "TileEntity 里面我记得没有 insertItem 方法，楼主说的应该是 forge 添加的 capability 里面的方法吧。\n这个方法接受一个 ItemStack 然后返回没有被塞进去的部分。\n\njavadoc 要求实现不能改动传入的物品。但是鉴于 capability 可以由任何方实现，有可能是某个 mod 没有遵守 forge 规定导致了问题。推荐你自己比对下呼叫前后是否相同然后再输出有问题的 capability 的信息（比如类信息）\n\n泛泛而谈的话，Minecraft 里面 ItemStack 是可变类（非常量），一般是随用随造。它没有覆写 hashcode equals 不能直接放 map 里面检索，使用时要小心。"
        }
    ]
}