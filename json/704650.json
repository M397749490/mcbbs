{
    "title": "用Thread.sleep()和循环每隔一段时间放置方块时为什么循环结束后才放置？",
    "author": "IMENDERDRAGON",
    "replyCount": 12,
    "timestamp": 1499576700,
    "txt_content": " 本帖最后由 IMENDERDRAGON 于 2017-7-9 13:07 编辑 \n\n比如说我要在X:50至X:100之间从X:50开始每1秒放置一个方块，然后就是如下代码：worldIn, y, z变量是在上面的事件里定义的\nint i = 50;\nwhile(i <= 100){\ni++;\n    try{\n    Thread.sleep(1000);\n    worldIn.setBlockStste(new BlockPos(i, y, z), 那一个方块.getDefaultState(), 3);\n    }\n    catch(Exception e){\n    System.out.println(e);\n}\n\n}\n可是为什么必须得循环结束后放置？\n求解答。。\n\n\n",
    "replies": [
        {
            "author": "弱鸡绿毛怪",
            "timestamp": 1499680440,
            "txt_content": "Thread.sleep()是卡服\n请使用BukkitRunnable"
        },
        {
            "author": "鸭蛋只吃黄",
            "timestamp": 1499700960,
            "txt_content": "强行sleep最为致命。\n建议楼主使用简单易用的BukkitRunnable，另外除非是整个服务器的定时任务（比如开一个监视线程）这类的最好别自己对主线程操作，反正你这么写服务器肯定是要卡1秒的。"
        },
        {
            "author": "sjx",
            "timestamp": 1499724060,
            "txt_content": "还好只卡了50秒（卡60秒服务器就崩溃了）"
        },
        {
            "author": "IMENDERDRAGON",
            "timestamp": 1499991300,
            "txt_content": "凋灵兔子 发表于 2017-7-10 23:36\n强行sleep最为致命。\n建议楼主使用简单易用的BukkitRunnable，另外除非是整个服务器的定时任务（比如开一个 ...\n有没有是使用forge的？"
        },
        {
            "author": "csj3120",
            "timestamp": 1499993160,
            "txt_content": "IMENDERDRAGON 发表于 2017-7-14 08:15\n有没有是使用forge的？\n是不是原理都一样，卡线程了，单独schedule就好了，这样异步操作主线程我记得forge有方法提供的，不然无法操作"
        },
        {
            "author": "Snake1999",
            "timestamp": 1500007200,
            "txt_content": "直接sleep会堵住主线程\n\n这种情况最好使用内置的线程池。bukkit是BukkitRunnable。"
        },
        {
            "author": "IMENDERDRAGON",
            "timestamp": 1500283860,
            "txt_content": "csj3120 发表于 2017-7-14 08:46\n是不是原理都一样，卡线程了，单独schedule就好了，这样异步操作主线程我记得forge有方法提供的，不然无 ...\n好吧，谢谢"
        },
        {
            "author": "x00494",
            "timestamp": 1500335040,
            "txt_content": "很棒的作品！"
        },
        {
            "author": "IMENDERDRAGON",
            "timestamp": 1502266080,
            "txt_content": " 本帖最后由 IMENDERDRAGON 于 2017-8-9 22:44 编辑 \nx00494 发表于 2017-7-18 07:44\n很棒的作品！\n我现在遇到一个问题，不知道你能不能解决\n用循环批量生成自己做的实体时，会报java.util.ConcurrentModificationException错                                    错误报告：\njava.util.ConcurrentModificationException\n        at java.util.ArrayList$Itr.checkForComodification(Unknown Source)\n        at java.util.ArrayList$Itr.next(Unknown Source)\n        at com.google.common.collect.Iterators$3.next(Iterators.java:163)\n        at net.minecraft.world.chunk.Chunk.getEntitiesWithinAABBForEntity(Chunk.java:951)\n        at net.minecraft.world.World.getEntitiesInAABBexcluding(World.java:3200)\n        at net.minecraft.world.World.getEntitiesWithinAABBExcludingEntity(World.java:3180)\n        at net.minecraft.world.World.getCollisionBoxes(World.java:1465)\n        at net.minecraft.entity.Entity.move(Entity.java:812)\n        at 那个实体的类.onUpdate(EntityBlockEntity.java:94)\n        at net.minecraft.world.World.updateEntityWithOptionalForce(World.java:2115)\n        at net.minecraft.world.WorldServer.updateEntityWithOptionalForce(WorldServer.java:876)\n        at net.minecraft.world.World.updateEntity(World.java:2082)\n        at net.minecraft.world.World.updateEntities(World.java:1895)\n        at net.minecraft.world.WorldServer.updateEntities(WorldServer.java:648)\n        at net.minecraft.server.MinecraftServer.updateTimeLightAndEntities(MinecraftServer.java:795)\n        at net.minecraft.server.MinecraftServer.tick(MinecraftServer.java:699)\n        at net.minecraft.server.integrated.IntegratedServer.tick(IntegratedServer.java:156)\n        at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:548)\n        at java.lang.Thread.run(Unknown Source)\n\n\n\n"
        },
        {
            "author": "liuyipeng001",
            "timestamp": 1518502680,
            "txt_content": "IMENDERDRAGON 发表于 2017-8-9 16:08\n我现在遇到一个问题，不知道你能不能解决\n用循环批量生成自己做的实体时，会报java.util.ConcurrentModifi ...\n自行百度这个Exception"
        },
        {
            "author": "dogeop",
            "timestamp": 1524070320,
            "txt_content": "因为你阻塞了主线程啊，你的客户端当然只能在循环结束才能看到\n显然你应该是用后台线程，每1秒钟通知主线程一次更新"
        },
        {
            "author": "4one_R",
            "timestamp": 1524392580,
            "txt_content": "BukkitRunnable已经过时了，请使用Runnable"
        }
    ]
}