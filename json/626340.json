{
    "title": "[bukkit]如何ban玩家？",
    "author": "天马司空",
    "replyCount": 13,
    "timestamp": 1472030760,
    "txt_content": "一天发了两个帖子...Bukkit.getPlayer(\"玩家名字\").getAddress()复制代码\n这样获得了玩家的ip，但是输出的是InetSocketAddress啊\n然后在api上找到的方法如图\n\n\n\n\nQQ截图20160824174155.png (7.81 KB, 下载次数: 5)\n\n下载附件\n\n2016-8-24 17:15 上传\n\n\n\n\n\n尝试了一下发现不行void banIP(Bukkit.getPlayer(\"target\").getAddress());复制代码\n看不懂api，不知道怎么用这个方法，请帮助我！\n\n",
    "replies": [
        {
            "author": "寂",
            "timestamp": 1472045280,
            "txt_content": " 本帖最后由 1582952890 于 2016-8-24 21:37 编辑 \n\nPlayer类的getAddress()实际上是返回一个InetSocketAddress\nbanIP(String address)需要传入的是一个String作为IP地址（就是IP地址换成字符串的形式）\nInetSocketAddress提供了一个方法叫getAddress()就是获取IP地址的，你只需要toString()一下便可以得到x.x.x.x的String然后传入即可。实在无法理解再看下面的已经写好的（最好自己写出来）Bukkit.banIP(Bukkit.getPlayer(\"target\").getAddress().getAddress().toString())\n\n"
        },
        {
            "author": "天马司空",
            "timestamp": 1472083980,
            "txt_content": "1582952890 发表于 2016-8-24 21:28\nPlayer类的getAddress()实际上是返回一个InetSocketAddress\nbanIP(String address)需要传入的是一个String ...\n谢谢{:10_512:}无意中在getAddress()后面加了一个.发现能打出一串，但是没在意，没想到真的有用"
        },
        {
            "author": "天马司空",
            "timestamp": 1472264940,
            "txt_content": "1582952890 发表于 2016-8-24 21:28\nPlayer类的getAddress()实际上是返回一个InetSocketAddress\nbanIP(String address)需要传入的是一个String ...\n但是这样写的话eclipse里面没问题但是执行的时候就会报错！，求解Bukkit.banIP(Bukkit.getPlayer(\"target\").getAddress().getAddress().toString());                                   \n                                              sender.sendMessage(ChatColor.YELLOW + \"完成，该玩家已被封禁\");                                   复制代码"
        },
        {
            "author": "寂",
            "timestamp": 1472266500,
            "txt_content": "天马司空 发表于 2016-8-27 10:29\n但是这样写的话eclipse里面没问题但是执行的时候就会报错！，求解\n执行时候什么报错。"
        },
        {
            "author": "天马司空",
            "timestamp": 1472284620,
            "txt_content": "1582952890 发表于 2016-8-27 10:55\n执行时候什么报错。\n就是用这个指令后台就会弹出一堆报错信息，执行不了"
        },
        {
            "author": "天马司空",
            "timestamp": 1472287080,
            "txt_content": "1582952890 发表于 2016-8-27 10:55\n执行时候什么报错。\n[16:55:56 WARN]: Unexpected exception while parsing console command \"warning L\"\norg.bukkit.command.CommandException: Unhandled exception executing command 'warn\ning' in plugin warning v1.0\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:46) ~[cra\nftbukkit-1.8.jar:git-Bukkit-501372f]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:14\n0) ~[craftbukkit-1.8.jar:git-Bukkit-501372f]\n        at org.bukkit.craftbukkit.v1_8_R2.CraftServer.dispatchCommand(CraftServe\nr.java:625) ~[craftbukkit-1.8.jar:git-Bukkit-501372f]\n        at org.bukkit.craftbukkit.v1_8_R2.CraftServer.dispatchServerCommand(Craf\ntServer.java:611) [craftbukkit-1.8.jar:git-Bukkit-501372f]\n        at net.minecraft.server.v1_8_R2.DedicatedServer.aN(DedicatedServer.java:\n372) [craftbukkit-1.8.jar:git-Bukkit-501372f]\n        at net.minecraft.server.v1_8_R2.DedicatedServer.A(DedicatedServer.java:3\n37) [craftbukkit-1.8.jar:git-Bukkit-501372f]\n        at net.minecraft.server.v1_8_R2.MinecraftServer.z(MinecraftServer.java:6\n26) [craftbukkit-1.8.jar:git-Bukkit-501372f]\n        at net.minecraft.server.v1_8_R2.MinecraftServer.run(MinecraftServer.java\n:534) [craftbukkit-1.8.jar:git-Bukkit-501372f]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_31]\nCaused by: java.lang.NullPointerException\n        at tianma.tianma.Warn.onCommand(Warn.java:53) ~[?:?]\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:44) ~[cra\nftbukkit-1.8.jar:git-Bukkit-501372f]\n        ... 8 more"
        },
        {
            "author": "寂",
            "timestamp": 1472288640,
            "txt_content": " 本帖最后由 1582952890 于 2016-8-27 17:08 编辑 \n\n请确定target玩家是否在线。当玩家不在线时候获取的Player是null。所以只需要加个判断即可。\nif(Bukkit.getPlayer(\"target\")!=null){\n  Bukkit.banIP(Bukkit.getPlayer(\"target\").getAddress().getAddress().toString());\n  //封禁成功\n}else{\n  //玩家未在线，封禁失败。\n}\n\n\n\n\n\n"
        },
        {
            "author": "天马司空",
            "timestamp": 1472289540,
            "txt_content": "1582952890 发表于 2016-8-27 17:04\n请确定target玩家是否在线。当玩家不在线时候获取的Player是null。所以只需要加个判断即可。\n这个方法必须要加判断玩家是否在线不然就会报错吗？"
        },
        {
            "author": "寂",
            "timestamp": 1472290380,
            "txt_content": " 本帖最后由 1582952890 于 2016-8-27 17:42 编辑 \n天马司空 发表于 2016-8-27 17:19\n这个方法必须要加判断玩家是否在线不然就会报错吗？\n当Bukkit的getPlayer的玩家未在线，返回一个null。\n当你试图操作null，会抛出NullPointerException，这个现象仅仅出现在玩家未在线的时候。而且要注意大小写问题\n"
        },
        {
            "author": "天马司空",
            "timestamp": 1472290440,
            "txt_content": "1582952890 发表于 2016-8-27 17:04\n请确定target玩家是否在线。当玩家不在线时候获取的Player是null。所以只需要加个判断即可。\n我已经确定玩家是在线的，但还是会报错"
        },
        {
            "author": "寂",
            "timestamp": 1472290500,
            "txt_content": "天马司空 发表于 2016-8-27 17:34\n我已经确定玩家是在线的，但还是会报错\n或者直接调用命令的方式\nBukkit.dispatchCommand(Bukkit.getConsoleSender(), \"ban \"+PlayerName);\nBukkit.dispatchCommand(Bukkit.getConsoleSender(), \"banip \"+PlayerName);"
        },
        {
            "author": "天马司空",
            "timestamp": 1472291220,
            "txt_content": "1582952890 发表于 2016-8-27 17:35\n或者直接调用命令的方式\nBukkit.dispatchCommand(Bukkit.getConsoleSender(), \"ban \"+PlayerName);\nBukki ...\n因为在前面判断过玩家是否在线了所以应该不会返回null...我用这个方法试试吧，谢谢"
        },
        {
            "author": "q513902026",
            "timestamp": 1472296200,
            "txt_content": " 本帖最后由 q513902026 于 2016-8-27 19:19 编辑 \n\ngetServer().getBanList(BanList.Type.Name).addBan(player.getName(),\"原因\",null,\"\");\ngetServer().getBanList(BanList.Type.IP).addBan(player.getAddress().getAddress().toString(),\"原因\",null,\"\");\n\nOfflinePlayer offPlayer = getOfflinePlayer(\"targer\");\nif(offPlayer.isOnline()){\ngetServer().banIP(offPlayer.getPlayer().getAddress().getAddress().toString());\n}else{getLogger().info(String.format(\"%s玩家不在线，请确保在线才能banIP。\",offPlayer.getName()));}"
        }
    ]
}