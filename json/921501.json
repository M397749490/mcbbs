{
    "title": "【CBL|SPG】[1.15+] JSON 文本中的 interpret",
    "author": "SPGoding",
    "replyCount": 8,
    "timestamp": 1571589360,
    "txt_content": "起\n\nJSON 文本中有一个属性叫做 interpret，翻译一下可以知道它的意思是「解析」。该属性必须和 nbt 同时使用，否则没有效果。\n\n简单来讲，当 interpret 被设置为 true 时，实际显示出来的文本会是原先文本被按照 JSON 文本的格式解析后的文本。\n\n举个例子吧。我们往 data storage 里先写这么一个标签：\n\n/data merge storage test {spg: '[\"测试\", \"啊啊\"]'}复制代码\n然后写这样的一个 JSON 文本：\n\n{\"nbt\": \"spg\", \"storage\": \"test\"}复制代码\n把它放到 tellraw 或者什么地方里，稍有常识的人都可以预测出它的结果：\n\n[\"测试\", \"啊啊\"]复制代码\n那么，如果在 JSON 文本中加上 interpret：\n\n{\"nbt\": \"spg\", \"storage\": \"test\", \"interpret\": true}复制代码\n结果变为了：\n\n测试啊啊复制代码\n可以看出，原先的 [\"测试\", \"啊啊\"] 被按照 JSON 文本的格式解析为了 测试啊啊。\n\n承\n\n这个特性确实有用武之地。例如：\n\n/execute as @a run tellraw @s {\"nbt\": \"SelectedItem.tag.display.Name\", \"entity\": \"@s\", \"interpret\": true}复制代码\n这条命令就可以在聊天栏输出玩家手中握着的武器的自定义名称了（如果有的话）\n\n转\n\n没错，没什么用。\n\n合\n\n然而，并不只有 NBT 字符串里能储存像 JSON 文本一样的东西。\n\n我们往 data storage 里再写这么一个标签：\n\n/data merge storage test {spg: [\"测试\", \"啊啊\"]}复制代码\n如果你没发现的话，这条命令的 spg 和刚才唯一的区别是删掉了最外层的单引号，使它从一个字符串标签变为了一个装有字符串的列表。\n\n然后写这样的一个 JSON 文本：\n\n{\"nbt\": \"spg\", \"storage\": \"test\"}复制代码\n它的结果和刚刚一模一样：\n\n[\"测试\", \"啊啊\"]复制代码\n聪明的人已经能够想到，如果加上 interpret 的话：\n\n{\"nbt\": \"spg\", \"storage\": \"test\", \"interpret\": true}复制代码\n结果仍然是：\n\n测试啊啊复制代码\n哇！\n\n这成功实现了将多个字符串拼接到一起。事实上，不止字符串能够被拼接，NBT 中的 Int 标签也能够被视作为合法的 JSON 格式。因此，我们还可以将由 Int 标签组成的列表标签拼接为一个字符串，这在原版模组大数运算中有所体现。\n\n相信你已经发现了，这一技巧仍然没有什么用处。\n\nTAG_End\n\n[groupid=546]Command Block Logic[/groupid]",
    "replies": [
        {
            "author": "雪颜の顾",
            "timestamp": 1571593380,
            "txt_content": "沙发QWQ\n就是说原来输出SelectedItem.tag.display.Name这个NBT，是完整的把json文本输出出来了，如果加上interpret之后，就只会输出它的名字？\n没用过json文本中的nbt"
        },
        {
            "author": "rygtx",
            "timestamp": 1571600940,
            "txt_content": "66666666666666666666"
        },
        {
            "author": "不负韶华",
            "timestamp": 1571607600,
            "txt_content": "现在还没有1.15正式版，现在发是不是为时过早？"
        },
        {
            "author": "Jokey_钥匙",
            "timestamp": 1571610360,
            "txt_content": "十分有用 比方说你要输出一堆动态文本时 可以不用反向空格了（\n（然而如果能够读取json为list……）"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1571617620,
            "txt_content": "讲一讲告示牌技巧"
        },
        {
            "author": "liach",
            "timestamp": 1571624520,
            "txt_content": "Mojang真应该在指令中添加内置nbt转json，这样如果能用data指令改text大家不还笑死\n真心这就一行代码解决的事情（因为有datafixerupper）\nnew Dynamic<>(NbtOps.INSTANCE, input).convert(JsonOps.INSTANCE).getValue()复制代码"
        },
        {
            "author": "凌空的猫",
            "timestamp": 1571660340,
            "txt_content": "应该可以组织一些简单的句子吧，比如搞出个 “狂暴的喵刀”[tr乱入]，还可以做一些简单的字符编辑"
        },
        {
            "author": "chyx",
            "timestamp": 1574919120,
            "txt_content": "如果[\"测试\", \"啊啊\"]里的两个字符串里有双引号的话，就不行了。。。\n除非这个字符串里的第一个引号是单的。。。\n\n似乎是因为如果里面的第一个引号是双引号的话，这个字符串在显示的时候会用单引号包裹，which 不被json认。。。。。\n"
        }
    ]
}