{
    "title": "用数据包给部分玩家假装生成实体",
    "author": "Lucky_fish0w0",
    "replyCount": 4,
    "timestamp": 1478846040,
    "txt_content": "就是嘛...想假装给玩家生成带名字的实体来实现类似浮空字体的效果。。。后来三下五除二把代码写出来了，然后报错跟疯子一样\n[20:23:02] [Server thread/WARN]: [Agar.io] Task #4 for Agar.io v1.0.0 generated an exceptionjava.lang.IllegalArgumentException: You cannot register objects without a watcher object!\n        at com.comphenix.protocol.wrappers.WrappedDataWatcher.setObject(WrappedDataWatcher.java:405) ~[?:?]\n        at com.comphenix.protocol.wrappers.WrappedDataWatcher.setObject(WrappedDataWatcher.java:415) ~[?:?]\n        at net.Death_fish.plugins.agar.network.PlayerController.showNameTag(PlayerController.java:66) ~[?:?]\n        at net.Death_fish.plugins.agar.cells.PlayerControlCell.onDrew(PlayerControlCell.java:93) ~[?:?]\n        at net.Death_fish.plugins.agar.cells.Cell.callDrew(Cell.java:114) ~[?:?]\n        at net.Death_fish.plugins.agar.game.Game.executeGame(Game.java:119) ~[?:?]\n        at net.Death_fish.plugins.agar.runnable.UpdateGames.run(UpdateGames.java:15) ~[?:?]\n        at org.bukkit.craftbukkit.v1_10_R1.scheduler.CraftTask.run(CraftTask.java:71) ~[spigot-1.10.jar:git-Spigot-6016ac7-7964365]\n        at org.bukkit.craftbukkit.v1_10_R1.scheduler.CraftScheduler.mainThreadHeartbeat(CraftScheduler.java:350) [spigot-1.10.jar:git-Spigot-6016ac7-7964365]\n        at net.minecraft.server.v1_10_R1.MinecraftServer.D(MinecraftServer.java:741) [spigot-1.10.jar:git-Spigot-6016ac7-7964365]\n        at net.minecraft.server.v1_10_R1.DedicatedServer.D(DedicatedServer.java:399) [spigot-1.10.jar:git-Spigot-6016ac7-7964365]\n        at net.minecraft.server.v1_10_R1.MinecraftServer.C(MinecraftServer.java:672) [spigot-1.10.jar:git-Spigot-6016ac7-7964365]\n        at net.minecraft.server.v1_10_R1.MinecraftServer.run(MinecraftServer.java:571) [spigot-1.10.jar:git-Spigot-6016ac7-7964365]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_102]复制代码\n看起来还是不会玩protocollib这玩意→ →\n相关代码如下\n                // ...\n                int retn = random.nextInt() % 65536;\n                // 数据包准备\n                PacketContainer tagPacket = new PacketContainer(PacketType.Play.Server.SPAWN_ENTITY_LIVING);\n                // 写入主要的实体信息\n                tagPacket.getIntegers().write(0, retn % 65536);\n                tagPacket.getUUIDs().write(0, UUID.randomUUID());\n                tagPacket.getIntegers().write(0, 65);\n                \n                Location loc = p.getLocation();\n                tagPacket.getDoubles().write(0, loc.getX());\n                tagPacket.getDoubles().write(1, loc.getY());\n                tagPacket.getDoubles().write(2, loc.getZ());\n                tagPacket.getIntegers().write(0, 0);\n                tagPacket.getIntegers().write(0, 0);\n                tagPacket.getIntegers().write(0, 0);\n                tagPacket.getBytes().write(0, (byte)0);\n                tagPacket.getBytes().write(1, (byte)0);\n                tagPacket.getBytes().write(2, (byte)0);\n                // 生物信息\n                WrappedDataWatcher data = new WrappedDataWatcher();\n                data.setObject(0, (byte)0x20);\n                data.setObject(1, 300);\n                data.setObject(2, p.getName());\n                data.setObject(3, true);\n                data.setObject(4, true);\n                data.setObject(5, false);\n                data.setObject(6, (byte)0x0);\n                data.setObject(7, 20.0F);\n                data.setObject(8, 0);\n                data.setObject(9, false);\n                data.setObject(10, 0);\n                data.setObject(11, (byte)0x0);\n                data.setObject(12, (byte)0x0);\n                \n                tagPacket.getDataWatcherModifier().write(0, data);\n                \n                // 发送数据包，没什么好看的\n                // ...复制代码\n那么问题来了...究竟怎么整这个东西..\n\n没错，就是这个，怎么弄=-=照着wiki.vg上弄了就那样报错...\n",
    "replies": [
        {
            "author": "RE_OVO",
            "timestamp": 1478937000,
            "txt_content": "我很好奇\n为什么WIKI上很多解释和NMS里的不一样。。。。\nNMS里是这么写的\n"
        },
        {
            "author": "TimmyOVO",
            "timestamp": 1479010680,
            "txt_content": "- -怎么都在问这个问题。。。\npl对这个entity metadata有一个包装类WrappedDataWatcher watcher = new WrappedDataWatcher();\n            watcher.setObject(0, (byte) 0);\n            watcher.setObject(1, (short) 300);\n            watcher.setObject(8, (int) 0); 复制代码再把这个datawatcher写入到数据包的那个entitymetadata里，具体写入格式。我就不说了自己看wiki"
        },
        {
            "author": "Lucky_fish0w0",
            "timestamp": 1479020820,
            "txt_content": "星燚 发表于 2016-11-13 12:18\n- -怎么都在问这个问题。。。\npl对这个entity metadata有一个包装类再把这个datawatcher写入到数据包的那个 ...\n没什么卵用啊= =就算全部做了强制类型转换还是报错，说什么“不能在观察者对象里注册对象...”就是按照wiki上写的..."
        },
        {
            "author": "TimmyOVO",
            "timestamp": 1479039660,
            "txt_content": "cx62d 发表于 2016-11-13 15:07\n没什么卵用啊= =就算全部做了强制类型转换还是报错，说什么“不能在观察者对象里注册对象...”就是按照wi ...\n= =没卵用？\n你自己写错了吧。\n报错自己研究研究啊"
        }
    ]
}