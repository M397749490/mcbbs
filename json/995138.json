{
    "title": "玩家数据文件损坏问题",
    "author": "wudongkui",
    "replyCount": 3,
    "timestamp": 1584981000,
    "txt_content": "\n\n\n\n\nimage.png (105.51 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-24 00:27 上传\n\n\n\n\n\n\n大图、日志文件、玩家数据文件见附件\n\n\n\nplayerdata.zip\n(401.24 KB, 下载次数: 2)\n\n\n\n2020-3-24 00:28 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "wudongkui",
            "timestamp": 1584981180,
            "txt_content": "\n    @EventHandler\n    public void onPlayerInteract(PlayerInteractEvent event) {\n        Player player = event.getPlayer();\n        if (event.getClickedBlock() != null) {\n            Block block = event.getClickedBlock();\n            if (event.getAction() == Action.RIGHT_CLICK_BLOCK && !player.isInsideVehicle() && player.getInventory().getItemInMainHand().getType() == Material.ARROW) {\n                //范围\n                double range = 1.0;\n                if (player.getLocation().distance(block.getLocation()) - 1.0 > range) {\n                    return;\n                }\n                World world = player.getWorld();\n                Entity chair = world.spawnEntity(player.getLocation(), EntityType.ARROW);\n                chair.setGravity(true);\n                chair.teleport(block.getLocation().add(0.5, 0.5, 0.5));\n                player.setFlying(true);\n                chair.addPassenger(player);\n                player.sendMessage(player.getName() + \"小鸟坐\");\n                event.setCancelled(true);\n                return;\n            }\n        }\n    }\n\n    @EventHandler\n    public void onPlayerInteractEntity(PlayerInteractEntityEvent event) {\n        if (event.getPlayer() != null) {\n            Player player = event.getPlayer();\n            Entity entity = event.getRightClicked();\n            if (!player.isInsideVehicle() && player.getInventory().getItemInMainHand().getType() == Material.ARROW) {\n                //范围\n                double range = 1.0;\n                if (player.getLocation().distance(entity.getLocation()) - 1.0 > range) {\n                    return;\n                }\n                entity.addPassenger(player);\n                player.sendMessage(player.getName() + \"小鸟坐\");\n                event.setCancelled(true);\n                return;\n            }\n        }\n    }\n复制代码"
        },
        {
            "author": "wudongkui",
            "timestamp": 1584981420,
            "txt_content": "服务器：1.15.2-Spigot\nPlugins (6): WorldEdit, CS-CoreLib, OP-Arbiter, Slimefun, ZxbSkyWorld, CoreProtect"
        },
        {
            "author": "破产",
            "timestamp": 1584984060,
            "txt_content": "1、你需要在setFly(true)之前设置player.getPlayer().setAllowFlight(true)才不会被踢出。\n2、数据损坏原因未知，无法复现，绝对不是2楼的代码导致的。"
        }
    ]
}