{
    "title": "对于许多小白困扰已久的端口映射问题的分析说明",
    "author": "BadTomato",
    "replyCount": 28,
    "timestamp": 1474939020,
    "txt_content": " 本帖最后由 BadTomato 于 2020-1-21 16:33 编辑 \n    端口映射问题是许多小白开服时会碰到的问题，并且上百度查也找不到针对性解决方法，或者方法试过之后也一点用没有。\n    我是一个个人博客博主，前些天有人向我发问：“请问你知道内网主机端口映射的方式吗？”经过一系列的问答，我明白了他是想搭建MC服务器却卡在了端口映射上，百度到的教程基本都是一模一样，而且没有什么用。·我以前搭建网站的时候也碰到过端口映射的问题，又经过了昨日的一番测试，现在将解决问题的经过整理了一份教程，如果有什么看不懂的，可以在下方留言。\n首先：使用花生壳等内网转发程序的请不要有优越感，因为用脚趾头想想都知道：转发的延迟是标准延迟的四倍以上。\n\n一、前提：\n1.你的网络环境是在内网（经过路由器与广域网连接）\n2.你需要一个在内网搭建完成并可以进入的服务器\n3.你不想使用第三方软件完成网络转发\n\n二、查看网络状况：\n1.在浏览器输入路由器管理页面网址并登录，网址和默认登录密码通常标识在路由器下方的产品标签上。例如TP-Link管理页面地址 http://192.168.1.1 默认账号密码均为“admin”。\n2.在 上网设置>默认设置（WAN状态）>IP地址 处查看路由器IP地址，并记录。\n\n\n\n\n\n2.png (21.34 KB, 下载次数: 1)\n\n下载附件\n\n2016-9-27 08:46 上传\n\n\n\n\n点击查看图片\n3.百度搜索：IP ，并比对第一栏下的IP地址和刚才记录的路由器IP地址是否相等\n\n\n\n\n\n1.png (12.05 KB, 下载次数: 0)\n\n下载附件\n\n2016-9-27 08:46 上传\n\n\n\n\n点击查看图片\n如若相等，请跳至 四、设置IP与MAC绑定 ，不相等请继续往下查看。\n\n三、解决IP地址分配问题：\n1.拨打你的网络运营商的客服电话，并转接人工客服。\n2.接通后和她说两句话：“宽带账户0558XXX，户主XXX”；“请给我一个公网IP”。等客服回复你之后，就可以挂电话了。\n3.客服打电话告诉你开通成功之后，重启路由器，并返回 二、查看网络状况 按过程操作，看IP是否相等，相等则继续，不等则致电客服，态度“恶劣”地再试一次。\n\n四、设置IP与MAC绑定：\n1.在路由器管理界面找到IP与MAC绑定的设置界面。\n2.找到本机主机名的一栏，点击绑定。\n具体绑定方法直接查阅：点击跳转\n\n五、一劳永逸的DMZ主机设置：\n1.在路由器管理界面找到DMZ主机的设置界面。\n2.开启DMZ主机，并将本机的内网IP填入DMZ主机IP地址中。\n\n\n\n\n\n3.png (57.38 KB, 下载次数: 0)\n\n下载附件\n\n2016-9-27 09:09 上传\n\n\n\n\n点击查看图片\n本机的内网IP查看方法：使用键盘快捷键Win+R打开运行，输入cmd并运行，在跳出的命令行中输入ipconfig /all查看本机IP数据，其中的IPv4地址即为本机的内网IP。\n\n\n\n\n\n4.png (39.64 KB, 下载次数: 0)\n\n下载附件\n\n2016-9-27 09:11 上传\n\n\n\n\n\n\n\n\n5.png (114.9 KB, 下载次数: 0)\n\n下载附件\n\n2016-9-27 09:12 上传\n\n\n\n\n点击查看图片\n\n六、防火墙设置：\n1.在 控制面板>系统和安全>Windows防火墙>高级设置>入站规则 中，点击右侧新建规则，并按下图步骤操作。\n\n\n\n\n\n6.png (16.3 KB, 下载次数: 1)\n\n下载附件\n\n2016-9-27 09:23 上传\n\n\n\n\n\n\n\n\n7.png (16.29 KB, 下载次数: 5)\n\n下载附件\n\n2016-9-27 09:23 上传\n\n\n\n\n\n\n\n\n8.png (18.21 KB, 下载次数: 5)\n\n下载附件\n\n2016-9-27 09:23 上传\n\n\n\n\n\n\n\n\n9.png (14.8 KB, 下载次数: 3)\n\n下载附件\n\n2016-9-27 09:13 上传\n\n\n\n\n\n\n\n\n10.png (11.19 KB, 下载次数: 3)\n\n下载附件\n\n2016-9-27 09:23 上传\n\n\n\n\n点击查看图片\n如果你不想这么麻烦的设置，可以直接禁用防火墙，但是这样安全系数低，不推荐。\n\n至此，你只需要将搜索到的IP地址告诉朋友，就可以一起愉快的玩耍了。\n\n关于域名作为服务器地址：\n将域名的A记录解析到你服务器的IP地址，即可通过域名访问。\n关于IP地址变动：\n可以使用花生壳动态域名解析，这个教程不在本文的范畴。\n\n以上完全为本人的个人见解，经过谨慎的测试和回源得出的结果，如果还有什么疑问，可以直接在帖子下方留言(回复时间不确定)，或者通过其他方式向我提问。",
    "replies": [
        {
            "author": "Regiment_Red",
            "timestamp": 1519915020,
            "txt_content": "第三部...他一直说没有公网ip了怎么办..."
        },
        {
            "author": "BadTomato",
            "timestamp": 1525442340,
            "txt_content": "Regiment_Red 发表于 2018-3-1 22:37\n第三部...他一直说没有公网ip了怎么办...\n你可以看一下你的网络协议 就是开网络服务的时候签名的协议，如果有说提供公网IP地址或者没有明确说明不提供公网IP地址，可以直接打工信部电话投诉，第二天你的运营商会有专人联系你并帮助你开通公网IP地址。\n希望可以帮到你~"
        },
        {
            "author": "华凯野",
            "timestamp": 1563974100,
            "txt_content": "网络协议在哪里看"
        },
        {
            "author": "BadTomato",
            "timestamp": 1566975120,
            "txt_content": "华凯野 发表于 2019-7-24 21:15\n网络协议在哪里看\n开通网络的时候签的协议 是几张纸质副本 一般是红色的"
        },
        {
            "author": "阿痴先森丶",
            "timestamp": 1576290840,
            "txt_content": "大佬，问一下，这个方法限宽带限流吗？现在这个方法还有效吗？"
        },
        {
            "author": "BadTomato",
            "timestamp": 1579595220,
            "txt_content": "阿痴先森丶 发表于 2019-12-14 10:34\n大佬，问一下，这个方法限宽带限流吗？现在这个方法还有效吗？\n这个方法是完全使用你自己的宽带，它的速度主要取决于你自己开通的宽带套餐的上行速率。\n\n当前三大运营商对家庭用户皆采用上下不对等的宽带速率限制，以电信举例：\n电信100M套餐 下行速率100mb/s 上行速率8mb/s\n电信50M套餐 下行速率50mb/s 上行速率4mb/s\n具体的上行速率需要查阅与运营商签订的合同\n\n经过测试，该方法如今(2020/01/21)依然有效。"
        },
        {
            "author": "荣辱观",
            "timestamp": 1580957220,
            "txt_content": "BadTomato 发表于 2020-1-21 16:27\n这个方法是完全使用你自己的宽带，它的速度主要取决于你自己开通的宽带套餐的上行速率。\n\n当前三大运营商 ...\n100m指mpbs，实际下载速率为100/8 大概是12mb/s"
        },
        {
            "author": "Cutter_",
            "timestamp": 1583578260,
            "txt_content": "很不错的，我看了这个后会开服"
        },
        {
            "author": "QUABS",
            "timestamp": 1583646840,
            "txt_content": " 本帖最后由 QUABS 于 2020-3-8 16:38 编辑 \n\n已经和电信要了公网IP，还是连不上，用的是电信光猫自带的dmz主机设置和虚拟服务器。服务器可以在本机用localhost:25565连上"
        },
        {
            "author": "Cutter_",
            "timestamp": 1583652900,
            "txt_content": "学到啦！！！！！！！！"
        },
        {
            "author": "594650752",
            "timestamp": 1583705280,
            "txt_content": "也就是说内网IP不通过工具是无法映射到外网，只能用公网IP才可以是这样么，这也太坑了吧"
        },
        {
            "author": "BadTomato",
            "timestamp": 1586772120,
            "txt_content": "QUABS 发表于 2020-3-8 13:54\n已经和电信要了公网IP，还是连不上，用的是电信光猫自带的dmz主机设置和虚拟服务器。服务器可以在本机用loc ...\n电信自带光猫可以设置，但是它的设置没有效果，请联系电信客服将电信光猫设置为仅转换模式，让你使用自己的路由器拨号上网，用自己的路由器设置DMZ主机即可"
        },
        {
            "author": "BadTomato",
            "timestamp": 1586772180,
            "txt_content": "594650752 发表于 2020-3-9 06:08\n也就是说内网IP不通过工具是无法映射到外网，只能用公网IP才可以是这样么，这也太坑了吧 ...\n这是网络拓补决定的，因为国内公网IP地址不足，所以三大运营商默认分配的都是内网地址"
        },
        {
            "author": "提百万在此",
            "timestamp": 1586892600,
            "txt_content": "已经有公网IP ，通过路由器拨号上网，在路由器界面也将DHCP开启，端口映射和DMZ也都有弄，防火墙也关闭了，朋友也ping得通我的公网IP，但是朋友用公网IP＋端口(25565)无法进入服务器，这该怎么解决。。"
        },
        {
            "author": "QUABS",
            "timestamp": 1587183420,
            "txt_content": "BadTomato 发表于 2020-4-13 18:02\n电信自带光猫可以设置，但是它的设置没有效果，请联系电信客服将电信光猫设置为仅转换模式，让你使用自己 ...\n谢谢楼主"
        },
        {
            "author": "36043239",
            "timestamp": 1587225840,
            "txt_content": "支持一下"
        },
        {
            "author": "QUABS",
            "timestamp": 1587813360,
            "txt_content": "大佬还有个问题。电信宽带，现在已有公网ip，搬家后ip会变吗，会变的话是会换成另一个公网IP还是变回共享ip"
        },
        {
            "author": "starkiller2k",
            "timestamp": 1587813720,
            "txt_content": "挺简单易懂的 对小白很有用"
        },
        {
            "author": "小军最帅",
            "timestamp": 1588217880,
            "txt_content": "感谢楼主分享"
        },
        {
            "author": "梦幻dir星辰",
            "timestamp": 1588305840,
            "txt_content": "提百万在此 发表于 2020-4-15 03:30\n已经有公网IP ，通过路由器拨号上网，在路由器界面也将DHCP开启，端口映射和DMZ也都有弄，防火墙也关闭了， ...\n必须有都正版账号才能联机"
        },
        {
            "author": "牛奶2",
            "timestamp": 1589609880,
            "txt_content": "支持！非常不错，至少对我们这些萌新服主的友好的哈哈哈c"
        },
        {
            "author": "BadTomato",
            "timestamp": 1589803380,
            "txt_content": "QUABS 发表于 2020-4-25 19:16\n大佬还有个问题。电信宽带，现在已有公网ip，搬家后ip会变吗，会变的话是会换成另一个公网IP还是变回共享ip ...\n如果是使用自己相同的账号**宽带转移的话  搬家后还是公网IP（没有重新签署协议的话）\n\n我们能申请到的公网IP始终是动态的"
        },
        {
            "author": "BadTomato",
            "timestamp": 1589803560,
            "txt_content": "提百万在此 发表于 2020-4-15 03:30\n已经有公网IP ，通过路由器拨号上网，在路由器界面也将DHCP开启，端口映射和DMZ也都有弄，防火墙也关闭了， ...\n路由器DHCP开启和本例没有关系 需要做的是将内网IP与你的主机进行绑定\n\n最后实现的效果是：你的主机MAC地址与内网IP地址绑定 DMZ主机设置为你的主机已绑定的内网IP地址"
        },
        {
            "author": "emie",
            "timestamp": 1589940240,
            "txt_content": "啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊"
        },
        {
            "author": "mcheheyixiao",
            "timestamp": 1590744360,
            "txt_content": "其实没必要这么麻烦，直接去下个映射工具，把它映射出去就行了"
        },
        {
            "author": "BadTomato",
            "timestamp": 1592145660,
            "txt_content": "mcheheyixiao 发表于 2020-5-29 17:26\n其实没必要这么麻烦，直接去下个映射工具，把它映射出去就行了\n当然，一般人数很少的联机你们使用花生壳等端口映射工具没有任何问题，确实简单。\n\n但是，你要知道，端口映射工具的原理是网络数据包转发，需要消耗服务提供商的服务器带宽，所以这个服务基本不可能免费。当然，花生壳有提供免费服务，但是只提供最高1Mbps的带宽，对于MC服务器来说，就是地图加载缓慢，多几个玩家就经常断开连接。\n\n这个教程是针对愿意捣鼓一点的用户来说的，通过这种方法，能够使用到你当前带宽的理论上限，希望不要胸无点墨。"
        },
        {
            "author": "赵同学",
            "timestamp": 1596533280,
            "txt_content": "大佬，我服务器设置好了，可以内网连入，但是外网连接会卡在登陆中，然后跳远程主机强行关闭。\n是什么原因啊"
        },
        {
            "author": "BadTomato",
            "timestamp": 1596702240,
            "txt_content": "赵同学 发表于 2020-8-4 17:28\n大佬，我服务器设置好了，可以内网连入，但是外网连接会卡在登陆中，然后跳远程主机强行关闭。\n是什么原因 ...\n开防火墙的过程中 记得TCP开一次 UDP还要开一次，如果检查两条防火墙规则都没有问题，则有非常大的可能你安装了某些杀毒软件（例如某60或火绒），开启了其中的网络攻击防护功能，尝试关闭后再尝试"
        }
    ]
}