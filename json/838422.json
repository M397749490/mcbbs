{
    "title": "[Tutorial][Bone Studio]从零开始的MC特效 (四 | Sin与Cos函数在Y轴上的体现)",
    "author": "602723113",
    "replyCount": 1,
    "timestamp": 1547905560,
    "txt_content": " 本帖最后由 602723113 于 2019-1-19 21:55 编辑 \n\n目录:\n\n导读龙卷风环绕在玩家身旁的粒子DNA双螺旋结构导读\n\n导读\n本教程需要读者有一定的空间想象能力(因为我也懒得画图了233)\n本教程使用的 Spigot1.10.2-R0.1-SNAPSHOT 核心\n在阅读之前请确保你具有高中数学必修4和和Java基础的知识\n\n<To初中生>: 如果你是初中的话，别慌，你有趋向的概念就可以读懂本教程(应该吧...)\n<To高中生>: 如果你还未学到关于上面的那本书，别慌学到了再来看也行233 (雾\n<To大学生>: 没什么好说的...\n引子\n\n首先我们来看一张图\n\n\n在上图我们可以看到，Sin和Cos的图像，在Y轴上的体现就是一个螺旋，那么我们如果放到MC里要如何实现呢？\n\n我们来看下方的代码\n\n        double radius = 1D;\n        double y = 0D;\n        for (double degree = 0; degree < 360 * 2; degree++) {\n            double radians = Math.toRadians(degree);\n            double x = radius * Math.cos(radians);\n            double z = radius * Math.sin(radians);\n            location.add(x, y, z);\n            // 这里播放粒子使用了类库 ParticleEffect\n            ParticleEffect.REDSTONE.display(new ParticleEffect.OrdinaryColor(Color.RED), location, 50);\n            location.subtract(x, y, z);\n\n            y += 0.005;\n        }复制代码\n看过MC特效第一章的都可以发现这其实就是一个利用参数方程绘制圆的代码，那么不同与第一章的，我在Y轴上额外加了个参数，也就是代码中的y，这个y我让其在每次循环中增加0.005个单位，那么就可以将每次粒子绘制时比之前多一个y的单位，进而形成螺旋的效果\n\n龙卷风\n\n有了前面的基础，我们可以来思考，龙卷风要怎么弄？ 首先我们来看圆的参数方程 x = r * cosθ y = r * sinθ 上方的r其实就是圆的半径，那么我们可以这么分析，如果将r变成一个可变参数，并且让它逐渐发散的话，那么不就是一个龙卷风的效果么？我们来看下方的代码\n\n        for (double radius = 0, y = 0, degree = 0; degree < 360 * 4; degree++, y += 0.01, radius += 0.01) {\n            double radians = Math.toRadians(degree);\n            double x = radius * Math.cos(radians);\n            double z = radius * Math.sin(radians);\n            loc.add(x, y, z);\n            ParticleEffect.REDSTONE.display(new ParticleEffect.OrdinaryColor(Color.RED), loc, 50);\n            loc.subtract(x, y, z);\n        }复制代码\n首先我们定义了三个变量radius y degree这三个变量分别是 半径  y轴 角度其实根据代码，不难看出，每次y单位都是自加0.01，半径也是0.01，角度就是自加1，最终的效果就会是这样的 \n\n\n环绕在玩家身旁的粒子\n\n那么在上方的龙卷风例子中，我们将y轴所加的数值设置为一个定值0.01那么我们如果将y轴所加的数值用个函数来表示会怎样呢？我们来看下方的代码\n\ndouble radius = 1D;\nfor (int degree = 0; degree < 360; degree++) {\n        double radians = Math.toRadians(degree);\n        double x = radius * Math.cos(radians);\n        double z = radius * Math.sin(radians);\n        double y = Math.sin(radians);\n        loc.add(x, y, z);\n        ParticleEffect.REDSTONE.display(new ParticleEffect.OrdinaryColor(Color.RED), loc, 50);\n        loc.subtract(x, y, z);\n}\n\nfor (int degree = 0; degree < 360; degree++) {\n    double radians = Math.toRadians(degree);\n    double x = radius * Math.cos(radians);\n    double z = radius * Math.sin(radians);\n    double y = Math.sin(radians);\n    loc.add(-x, y, -z);\n    ParticleEffect.REDSTONE.display(new ParticleEffect.OrdinaryColor(Color.BLUE), loc, 50);\n    loc.subtract(-x, y, -z);\n}复制代码\n\n\n因为sin函数的特殊性，我们的y就被限制在1~-1之间移动了，所以就可以出现这么好看的一次特效了，那么蓝色的那条我们在x和z参数乘以个-1就可以达到目的\n\nDNA双螺旋结构\n\n这个其实非常的简单，我直接给出代码吧\n\n\npublic static void buildDNA(Location location) {\n    double radius = 1D;\n    double y = 0D;\n    for (double degree = 0, angle = 180; degree < 720; degree++, angle++) {\n        // 第一条\n        double radians = Math.toRadians(degree);\n        double x = radius * Math.cos(radians);\n        double z = radius * Math.sin(radians);\n        location.add(x, y, z);\n        ParticleEffect.REDSTONE.display(new ParticleEffect.OrdinaryColor(Color.RED), location, 50);\n        location.subtract(x, y, z);\n\n        // 第二条\n        double radians2 = Math.toRadians(angle);\n        double x2 = radius * Math.cos(radians2);\n        double z2 = radius * Math.sin(radians2);\n        location.add(x2, y, z2);\n        ParticleEffect.REDSTONE.display(new ParticleEffect.OrdinaryColor(Color.RED), location, 50);\n        location.subtract(x2, y, z2);\n\n        // 中间连线，这里我打算是在可以被30整除时就进行画线\n        if (degree % 30 == 0) {\n            Location pointA = location.clone().add(x, y, z);\n            Location pointB = location.clone().add(x2, y, z2);\n            buildLine(pointA, pointB);\n        }\n\n        y += 0.02;\n   }\n}\npublic static void buildLine(Location locA, Location locB) {\n    Vector vectorAB = locB.clone().subtract(locA).toVector();\n    buildLine(locA, vectorAB);\n}\npublic static void buildLine(Location locA, Vector vector) {\n    Vector temp = vector.clone();\n    double vectorLength = temp.length();\n    temp.normalize();\n    for (double i = 0; i < vectorLength; i += 0.1) {\n        Vector vectorX = temp.clone().multiply(i);\n        locA.add(vectorX);\n        ParticleEffect.REDSTONE.display(new ParticleEffect.OrdinaryColor(Color.BLUE), locA, 50);\n        locA.subtract(vectorX);\n    }\n}复制代码\n那么出来的效果就是这样的\n\n\n\n结语\n\n高三不易，望读者谅解! —— 撰写: 一个来自普高文科的学生 2019/1/19\n\n\n\n[groupid=1306]Bone Studio[/groupid]",
    "replies": [
        {
            "author": "Оil",
            "timestamp": 1547907540,
            "txt_content": "哦，这不是二维弦振动合成表征出来个力螺旋么……\n啊，满满的熟悉感……\nM.D我理力考砸了熟悉个屁……"
        }
    ]
}