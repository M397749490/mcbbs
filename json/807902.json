{
    "title": "[深夜水]1.13的离线模式服务器可以直接加载皮肤啦~",
    "author": "gooding300",
    "replyCount": 14,
    "timestamp": 1532202960,
    "txt_content": " 本帖最后由 gooding300 于 2018-7-22 03:58 编辑 \n\n总所周知，从1.7.6引入authlib开始，我们无法在离线模式服务器（关闭正版验证的服务器）中看到其他人的正版皮肤。\n也因此诞生了诸如SkinsRestorer和OfflineSkins等为了修复在离线模式服务器中正版皮肤加载的插件和mod。\n然而，这个“特性”，应该可以止步于1.13了。\n\n在1.13，如果服务器未能提供其他用户的皮肤信息（离线模式服务器不访问Mojang获取用户皮肤信息），客户端将会尝试自行访问Mojang获取皮肤（将会有6小时的缓存时间），而不是不加载任何皮肤。\n\n抽象流程\nBeta-1.7.5\n客户端：视野中出现了一个玩家->使用玩家用户名获得皮肤材质文件->渲染\n1.7.6-1.12.2\n服务端：有用户进入了服务器->获得用户登录信息->向Mojang请求用户的皮肤地址（离线模式服务器无法进行这一步）->分发给所有客户端\n客户端：视野中出现了一个玩家->使用缓存里的皮肤地址加载皮肤文件->渲染\n1.13\n服务端：有用户进入了服务器->获得用户登录信息->向Mojang请求用户的皮肤地址（离线模式服务器无法进行这一步）->分发给所有客户端\n客户端：视野中出现了一个玩家->使用缓存里的皮肤地址加载皮肤文件->如果未能找到缓存，则自行请求Mojang->渲染\n\n相关代码\nnet.minecraft.client.resources.SkinManager 1.13 func_152790_a srg\n         try {\n            map.putAll(this.field_152797_e.getTextures(var1, var3));\n         } catch (InsecureTextureException var7) {\n         }\n\n         if (map.isEmpty()) {\n            var1.getProperties().clear();\n            if (var1.getId().equals(Minecraft.func_71410_x().func_110432_I().func_148256_e().getId())) {\n               var1.getProperties().putAll(Minecraft.func_71410_x().func_181037_M());\n               map.putAll(this.field_152797_e.getTextures(var1, false));\n            } else {\n               this.field_152797_e.fillProfileProperties(var1, var3);\n\n               try {\n                  map.putAll(this.field_152797_e.getTextures(var1, var3));\n               } catch (InsecureTextureException var6) {\n               }\n            }\n         }复制代码\n\n",
    "replies": [
        {
            "author": "ItIsEnderman",
            "timestamp": 1532216760,
            "txt_content": "也就是说会再次出现盗用皮肤咯?\n反正我皮肤换的频繁，谁也不知道下一个是啥。"
        },
        {
            "author": "BlackCB.",
            "timestamp": 1532218800,
            "txt_content": "ItIsEnderman 发表于 2018-7-22 07:46\n也就是说会再次出现盗用皮肤咯?\n反正我皮肤换的频繁，谁也不知道下一个是啥。 ...\n皮肤本来就有盗用现象"
        },
        {
            "author": "星",
            "timestamp": 1532219220,
            "txt_content": "这样就不需要mod插件辅助获取了233"
        },
        {
            "author": "恋",
            "timestamp": 1532225580,
            "txt_content": "我还在我1.13的服务器上装了皮肤显示插件  看来可以删了"
        },
        {
            "author": "SciUniv_Moring",
            "timestamp": 1532227320,
            "txt_content": "ItIsEnderman 发表于 2018-7-22 07:46\n也就是说会再次出现盗用皮肤咯?\n反正我皮肤换的频繁，谁也不知道下一个是啥。 ...\n膜江的皮肤API本来就是可以随便调用的，只不过以前版本的客户端里不会自动调用而是靠服务端分发皮肤地址而已"
        },
        {
            "author": "zdlzhm",
            "timestamp": 1532227980,
            "txt_content": "表示正版验证比较不会出现盗皮肤行为"
        },
        {
            "author": "2759159258",
            "timestamp": 1532228820,
            "txt_content": "mojang终于良心了一次..."
        },
        {
            "author": "578296515",
            "timestamp": 1532233380,
            "txt_content": "学到了，第一次了解到获取皮肤的机制"
        },
        {
            "author": "XTxiaodada",
            "timestamp": 1532237700,
            "txt_content": "表示有正版，但是还是不知道如何获得正版皮肤"
        },
        {
            "author": "SciUniv_Moring",
            "timestamp": 1532238420,
            "txt_content": " 本帖最后由 SciUniv_Moring 于 2018-7-22 13:52 编辑 \nzdlzhm 发表于 2018-7-22 10:53\n表示正版验证比较不会出现盗皮肤行为\n然而膜江的皮肤API本身可以随便调用（只不过旧版客户端的加载机制并不会主动去调用而是靠服务端分发，新版改成了主动调用），正版皮肤只要知道ID就可以盗"
        },
        {
            "author": "安梦梦",
            "timestamp": 1532250180,
            "txt_content": "所以1.13吞并了那些插件和mod"
        },
        {
            "author": "风扇滑翔翼",
            "timestamp": 1532250420,
            "txt_content": "逼死mod系列\n如果是这样 以后也能在盗版服务器里看到花花绿绿的皮肤了"
        },
        {
            "author": "112006652",
            "timestamp": 1532250600,
            "txt_content": "我觉得海星1.那么.1.3的Java版有啥服务器，我想玩玩"
        },
        {
            "author": "一窍不开",
            "timestamp": 1532255820,
            "txt_content": "看来不需要皮肤插件了"
        }
    ]
}