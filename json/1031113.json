{
    "title": "如何使用Skript制作一个全世界独一无二的服务端",
    "author": "592764254",
    "replyCount": 1,
    "timestamp": 1587983760,
    "txt_content": " 本帖最后由 592764254 于 2020-10-23 23:17 编辑 \n\n\n前言\n\n此教程面向的人群：\n1. 对Skript有一定基础的人，如果没有接触过skript，建议先参考Skript 脚本编程教程，在本篇教程中，不对Skript作基本语法的解释。2. 一位决心制作精品服务端的服主（建议纯净服，Spigot与PaperSpigot最佳）。3. 想通过Skript编写一些有创新的独特插件的人。\n我在自己制作服务端的时候发现了Skript这个宝藏工具，因此我自己的服务器内除了ESS这一类工程量巨大的插件之外全部自己通过Skript编写，甚至是自己编写一个媲美DeluxeMenus的菜单，从而占用更少的资源，除此之外，高大上的更多附魔，满特效抽奖箱，银行，PVP体系，挖矿体系，任务体系，物品升级强化体系等等都会出现在此教程中，这些换为Java编写的插件每个都需要10USD以上，但是更多的是一个体系，方便服主自行修理BUG，更新以及完全适用自己的服务端，不浪费一分一毫资源。\n注意！本教程会带大家一起还原一些经典类型的服务端以及从中的创新，然后会在最后罗列出一些在编写服务端插件时的重要选项，比如GUI的应用，声音，粒子效果，物品的name,lore的注意事项以及盔甲架的应用特效等。\n\n\n准备工作：\n\n1. 本教程所使用的服务端核心为Spigot 1.8.8 （如果不对原版材料有高版本要求，强烈推荐1.8或1.12.2，跨版本可直接使用ViaVersion）\n\n\n2. Skript系列的Addon插件有很多，有时候缺失就会导致代码失效，所以划重点，这里有常用的Addon：https://forums.skunity.com/resources/categories/addons.1/?order=download_count\n（并非全部都需要安装，看服务端需求）\n\n3. Skript本体下载\n1.7.10 2.1.2 https://dev.bukkit.org/projects/skript/files/779542/download\n1.8.8-1.12.2 2.2dev37c https://github.com/SkriptLang/Skript/releases/download/dev37c/Skript.jar\n1.13.2+ 最新版 https://github.com/SkriptLang/Skript/releases\n\n4. 谷歌浏览器（搜索引擎）\n谷歌是学习Skript最快的途径，没有之一，当你遇到任何问题时，比如对于NPC的设置，在百度是找不到答案的，此时你只需要在谷歌搜索 \"skript npc\" 就会出来NPC相关的很多问题（大都来自于skunity论坛和Spigotmc论坛），然后你就会发现很多人早在2015年就遇到了和你一样的问题，而下方也已有大佬作出正确解答，你的问题自然也就解决了。是的，百度不行！\n\n\n\n好啦，有了上述的准备，我们就可以开始制作属于自己的服务端了！\n\n\n（对本教程内容有任何问题请在评论区指出，我会第一时间回复，或者联系QQ1214090013）\n\n\n\n登录事件\n\n首次登录事件：\n\n熟悉java插件的同学们都知道，首次登录对新玩家会有很多操作，比如说首次登录的地点，首次登录的新手礼包，重置玩家的数据，欢迎标语等等，而这用Java插件需要至少4个插件（CMI不算），比如CustomJoinItems，TPLogin，TitleManger之类的插件，但是如果用Skript，我们只需要几行代码就能搞定全部，一起来看看!\n\n\n固定新玩家登录地点：\ncommand /setfirstspawn:\n        permission: server.admin\n        trigger:\n                message \"&e(!)首次登录地点在 %player's location%\"\n                set {firstspawn.location} to player's location 复制代码这5行代码就是注册了一个指令“/setfirstspawn”，把首次登录地点设置在了指令执行者脚下。\n\n\non first join:\n        teleport player to {firstspawn.location}复制代码这个想必都能看懂，就是在玩家首次登录时将其传送到{firstspawn.location}，也就是之前设置的首次登录地点。\n\n\n新玩家礼包：on first join:\n        set slot 4 of player to compass of power 1 named \"&a帮助菜单&7(右键)\" with lore \"&7右键使用\"\n        set helmet of player to glass of power 1 named \"&b太空头盔\" with lore \" \"\n        set boots of player to leather boots dyed white named \"&b太空靴\" with lore \" \"\n        set chestplate of player to leather chestplate dyed white named \"&b太空防护服\" with lore \" \"\n        set leggings of player to leather leggings dyed white named \"&b太空防护服\" with lore \" \"复制代码这个例子中很详细地说明了新手礼包，你可以设置装备直接穿在玩家身上，可以设置物品在背包内的位置，效果如下图，所有的lore效果，皮革颜色，附魔都可以自定义。\n\n\n\n\nQQ浏览器截图20200428113126.png (13.45 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-28 11:31 上传\n\n\n\n\n\n\n新玩家进服通知，Title欢迎标语：on first join:\n        set join message to \"&7玩家 &c&l%player% &7第一次进入了服务器!\"\n        send player title \"&c&l(!)\" with subtitle \"&a&l欢迎来到XXX服务器！\"复制代码3行代码完成TitleManger的功能！效果如下：\n\n\n\n\n2.png (87.23 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-28 11:45 上传\n\n\n\n\n\n新玩家进服打开书本(大大增加逼格的东西)：command /book:\n    trigger:\n        set {_book} to a new book复制代码效果如下：\n\n\n\n\nimage.png (46.29 KB, 下载次数: 0)\n\n下载附件\n\n2020-5-17 11:47 上传\n\n\n\n\n\n至此，新玩家首次登录的东西就差不多啦，还有什么我没想到的可以在评论区补充，下面是整合的代码:\n\ncommand /setfirstspawn:\n        permission: server.admin\n        trigger:\n                message \"&e(!)首次登录地点在 %player's location%\"\n                set {firstspawn.location} to player's location\non first join:\n        teleport player to {firstspawn.location}\n        set slot 4 of player to compass of power 1 named \"&a帮助菜单&7(右键)\" with lore \"&7右键使用\"\n        set helmet of player to glass of power 1 named \"&b太空头盔\" with lore \" \"      \n        set boots of player to leather boots dyed white named \"&b太空靴\" with lore \" \"\n        set chestplate of player to leather chestplate dyed white named \"&b太空防护服\" with lore \" \"\n        set leggings of player to leather leggings dyed white named \"&b太空防护服\" with lore \" \"\n        set join message to \"&7玩家 &c&l%player% &7第一次进入了服务器!\"\n        send player title \"&c&l(!)\" with subtitle \"&a&l欢迎来到XXX服务器！\"\n        stop 复制代码\n\n登录事件：\n固定上线地点：\n与首次登录如出一辙，大家只需要修改指令与变量即可，比如把{firstspawn.location}改为{spawn.location}。\n\n\n进服标语与消息：\n还是与首次登录相同。\n\n\n玩家进服效果：\n此选项多用于登录服，小游戏服等等需要给玩家永久药水效果的服务器。\non join:\n        apply night vision 256 to player for 1 days\n        apply jump 3 to player for 1 days\n        apply speed 2 to player for 1 days复制代码效果如下\n\n\n\n\n\n3.png (5.59 KB, 下载次数: 0)\n\n下载附件\n\n2020-4-28 12:02 上传\n\n\n\n\n\n\n好啦，以上基本就是玩家登录涉及到的内容啦，大家可以试着吧这些代码整合到一个sk文件中，取名为login.sk，你的第一个登录相关体系的插件就写好啦，然后你就会开心地发现只有1-2kb，比装几个Java插件节省了不少资源！\n\n传送/多世界相关\n通常我们所使用的传送插件多整合于ESS,CMI一类的大型插件当中，而且有许多不可自定义的功能，比如传送当中的冷却时间，在某个世界不能使用传送，在某个WorldGuard的区域内不能使用传送，达不到某些等级不能传送等等，今天我们就用skript来实现！\n\n简单的设置传送点与传送系统：此传送系统仅包含设置传送点与定义指令传送到传送点。\n\n\n首先是首次登录时玩家的登录点，我们在第一章中讲过：\ncommand /setfirstspawn:\n        permission: server.admin\n        trigger:\n                message \"&e(!)首次登录地点在 %player's location%\"\n                set {firstspawn.location} to player's location\non first join:\n        teleport player to {firstspawn.location}\n复制代码在skript中，我们所使用的将玩家传送到某一点的代码就是：\n teleport player to {你设置的点}\n复制代码\n主城传送点的设置：与首次登录点的相同，此处主要讲讲消息的设置与传送延迟和传送条件的限制。\n我们以一段代码来讲解（此处省略了trigger）：\n<blockquote>on command \"/spawn\":复制代码在上述代码中，\nif \"%region at player%\" contains \"spawn\":\n表示的是如果玩家所处的区域名字包含“spawn”，此处的区域指的是WorldGuard插件的区域，对于所有的区域都可以使用%region at player%来表示和获取。\n\n\n所以，这段代码所要表示的就是：\n当玩家使用/spawn这个指令时，如果玩家位于spawn区域内，则直接将玩家传送到spawn点，如果玩家位于mine区域内，则需要使用冷却时间（这一点对于PVP服务器非常适用）\n\n\n下面我们来说一说冷却时间，首先是对玩家的冷却时间是否已经为45秒做一个判断，如果是，则继续执行，如果否，则返回一条消息给玩家“传送还在冷却中”。如下：\nif {lastsp.%player%} is set:                        set {_dangle1} to difference between {lastsp.%player%} and now最后执行10秒的传送冷却，同时使用actionbar提示玩家时间，最后重置玩家的冷却时间。\n大功告成\n\n\n\n\n\nimage.png (28.87 KB, 下载次数: 0)\n\n下载附件\n\n2020-10-23 23:17 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "梅子酒呀",
            "timestamp": 1590926880,
            "txt_content": "期待更新! 非常详细的sk教学"
        }
    ]
}