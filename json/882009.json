{
    "title": "请问一下Java怎么获取玩家在线时间呢？",
    "author": "醉倾梦",
    "replyCount": 5,
    "timestamp": 1562422020,
    "txt_content": "请问一下Java怎么获取玩家在线时间呢？\n我想写一个那种玩家满在线时间之后发送提示\n我貌似没有从JavaDoc里面找到获取方式\n\n大佬们能不能帮帮我，给一下具体的代码，谢谢~~",
    "replies": [
        {
            "author": "licrafter",
            "timestamp": 1562423220,
            "txt_content": " 本帖最后由 licrafter 于 2019-7-6 22:30 编辑 \n\n//虽然kotlin和java写法有点不一样，但是流程一样的，runTask(plugin ,Runnable,delay,period)//在线时间变量\nvar onlineTime = 0\n//异步定时器计时，每20tick(1秒)增加时间加1\nval timer = Bukkit.getScheduler().runTaskTimerAsynchronously(EndDayPlugin.instance(), Runnable {\nonlineTime++\n    if (onlineTime > 3600) {\n        Bukkit.getScheduler().runTask(EndDayPlugin.instance(), Runnable {\n//执行主线程通知玩家在线时间\n            System.out.println(onlineTime)\n        })\n    }\n}, 0, 20)\n//关闭服务器的时候记得取消定时器\ntimer.cancel()"
        },
        {
            "author": "醉倾梦",
            "timestamp": 1562454600,
            "txt_content": "licrafter 发表于 2019-7-6 22:27\n//虽然kotlin和java写法有点不一样，但是流程一样的，runTask(plugin ,Runnable,delay,period)//在线时间变 ...\n嗯，谢谢~我有点看不懂诶"
        },
        {
            "author": "licrafter",
            "timestamp": 1562457060,
            "txt_content": " 本帖最后由 licrafter 于 2019-7-7 07:57 编辑 \nxiao_sgyg 发表于 2019-7-7 07:10\n嗯，谢谢~我有点看不懂诶\nspigot没有系统方法来获取玩家在线时间并在特定时间内提示玩家。所以你要可以开一个子线程来记录所有玩家的在线时间，并在达到某个值的时候在主线程提醒玩家。spigot里在子线程里轮询计时的方法很多,异步计时器就是其中一个runTaskTimerAsynchronously\nBukkit.getScheduler().runTaskTimerAsynchronously(plugin, new Runnable() {\n    int onlineTime = 0;\n\n    @Override\n    public void run() {\n        onlineTime++;\n        Bukkit.getScheduler().runTask(plugin, new Runnable() {\n            @Override\n            public void run() {\n                System.out.println(onlineTime);\n            }\n        });\n    }\n}, 0, 20);"
        },
        {
            "author": "醉倾梦",
            "timestamp": 1562460000,
            "txt_content": "licrafter 发表于 2019-7-7 07:51\nspigot没有系统方法来获取玩家在线时间并在特定时间内提示玩家。所以你要可以开一个子线程来记录所有玩家 ...\n嗯好，懂了谢谢你"
        },
        {
            "author": "Smile_Sun",
            "timestamp": 1562514120,
            "txt_content": " 本帖最后由 Smile_Sun 于 2019-7-7 23:54 编辑 \nlicrafter 发表于 2019-7-7 07:51\nspigot没有系统方法来获取玩家在线时间并在特定时间内提示玩家。所以你要可以开一个子线程来记录所有玩家 ...\n\nemmm，如果在满24小时后取消之后如何再次启动 "
        }
    ]
}