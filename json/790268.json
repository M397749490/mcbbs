{
    "title": "怎么添加一个玩家变量?",
    "author": "千雪佳奈",
    "replyCount": 1,
    "timestamp": 1523274540,
    "txt_content": "在config.yml里添加一个Command\n例子:\nCommand: 'points give %player% 1'\n给玩家1点券\n那么%player%就是玩家姓名\n变量该怎么写？？？\n\n代码\n\npackage com.level.Main;\n\nimport java.io.File;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.logging.Logger;\nimport org.bukkit.Bukkit;\nimport org.bukkit.Server;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.PlayerLevelChangeEvent;\nimport org.bukkit.plugin.PluginManager;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class LevelCommand\n  extends JavaPlugin\n  implements Listener\n{\n  public String getPrefix()\n  {\n    String prefix = getConfig().getString(\"Prefix\").replaceAll(\"&\", \"§\");\n    return prefix;\n  }\n  public void ConfigFile()\n  {\n    if (!new File(getDataFolder() + File.separator + \"config.yml\").exists())\n    {\n      saveDefaultConfig();\n      getLogger().info(\"已创建config.yml\");\n    }\n    try\n    {\n      reloadConfig();\n      getLogger().info(\"成功载入config.yml配置文件\");\n    }\n    catch (Exception e)\n    {\n      e.printStackTrace();\n      getServer().getPluginManager().disablePlugin(this);\n      getLogger().info(\"无法加载config.yml,请检查\");\n    }\n  }\n  \n  public void onEnable()\n  {\n    Bukkit.getPluginManager().registerEvents(this, this);\n        getLogger().info(\"已成功开启插件\");\n    ConfigFile();\n  }\n  \n  public void onDisable()\n  {\n        getLogger().info(\"插件已关闭\");\n  }\n  \n  public void CofigReload()\n  {\n    reloadConfig();\n  }\n  \n  public boolean onCommand(CommandSender sender, Command command, String label, String[] args)\n  {\n    if (((sender instanceof Player)) && (command.getName().equalsIgnoreCase(\"LevelCommand\")))\n    {\n      Player player = (Player)sender;\n      if (args.length <= 0)\n      {\n        player.sendMessage(\"§a§l插件帮助:\");\n        player.sendMessage(\"§f/lc reload §d- §e重新载入配置文件\");\n      }\n      else if (args[0].equalsIgnoreCase(\"reload\"))\n      {\n        CofigReload();\n        player.sendMessage(getPrefix() + \"§a配置文件重新载入成功\");\n      }\n      return true;\n    }\n    sender.sendMessage(\"控制台禁止输入\");\n    return true;\n  }\n  \n  @EventHandler\n  public void PlayerLevelChangeEvent(PlayerLevelChangeEvent plce)\n  {\n    Player player = plce.getPlayer();\n    List<String> command = getConfig().getStringList(\"Command\"); \n    List<Integer> levels = getConfig().getIntegerList(\"Level\");\n    for (Iterator localIterator1 = levels.iterator(); localIterator1.hasNext();)\n    {\n      int level = ((Integer)localIterator1.next()).intValue();\n      if (player.getLevel() == level)\n      {\n        for (String cmd : command) {\n          if (player.isOp())\n          {\n            player.performCommand(cmd);\n          }\n          else\n          {\n            player.setOp(getConfig().getBoolean(\"CommandPermissions\"));\n            player.performCommand(cmd);\n          }\n        }\n        player.getPlayer().sendMessage(getPrefix() + getConfig().getString(\"LevelMessage\").replaceAll(\"%player%\", plce.getPlayer().getName()));\n      }\n    }\n  }\n}\n复制代码\n\n\n",
    "replies": [
        {
            "author": "隔壁老吕",
            "timestamp": 1523279700,
            "txt_content": "Command: points\ngive在onCommand里判断"
        }
    ]
}