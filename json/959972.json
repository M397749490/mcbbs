{
    "title": "服务器TPS低,希望有好的解决办法",
    "author": "安不生",
    "replyCount": 25,
    "timestamp": 1581667740,
    "txt_content": "https://timings.aikar.co/?id=ef7bac20b9d941689ebb3ebbe4447133\n以上是Timings地址\n请不要回答添加Laggremover NoSpawnChunk等添加优化插件等无用回复\n只需要告诉我，为什么会卡顿，如何解决\n目前服务器已有的优化插件\nEntityTrackerFixer\nLagAssist\nLimitPillagers\nSimple Anti-Mob Lag\nVillagerOptimiser\n核心为Paper 1.14.4，粘液科技公益生存服务器",
    "replies": [
        {
            "author": "EmptyLava",
            "timestamp": 1581667740,
            "txt_content": "主要是因为蜘蛛和村民这两个实体占用高，考虑到粘液服而且有相关村民管制插件，可以考虑降低村民智商到很低水平，蜘蛛占用高可能是玩家正在刷经验，另外如楼上所说，1.14运行效率低，所以还可以选择降低服务器刷怪上限"
        },
        {
            "author": "啊大",
            "timestamp": 1581668400,
            "txt_content": "1.14.4的服务器运行效率本身就低，你可以在lagassist里启动paper端专用的区块优化"
        },
        {
            "author": "安不生",
            "timestamp": 1581669600,
            "txt_content": "EmptyLava 发表于 2020-2-14 16:28\n主要是因为蜘蛛和村民这两个实体占用高，考虑到粘液服而且有相关村民管制插件，可以考虑降低村民智商到很低 ...\n村民有高占用我能理解，因为有很多玩家都会刷村民\n但是服务器没有任何刷蜘蛛的建筑，而且我killall 蜘蛛也只有12个蜘蛛实体\n但是为什么蜘蛛的占用那么高，我很不能理解"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1581669840,
            "txt_content": "安不生 发表于 2020-2-14 16:40\n村民有高占用我能理解，因为有很多玩家都会刷村民\n但是服务器没有任何刷蜘蛛的建筑，而且我killall 蜘蛛 ...\n仅从一个timings上我的确看不出为何蜘蛛占用那么高\n你试试用命令方块循环kill蜘蛛,然后发一次timings报告"
        },
        {
            "author": "爱℃",
            "timestamp": 1581670500,
            "txt_content": "https://www.mcbbs.net/thread-916822-1-1.html?cp=8\n可以参考一下这个帖子对实体的优化，希望能对您有帮助OuO"
        },
        {
            "author": "安不生",
            "timestamp": 1581671340,
            "txt_content": "EmptyLava 发表于 2020-2-14 16:44\n仅从一个timings上我的确看不出为何蜘蛛占用那么高\n你试试用命令方块循环kill蜘蛛,然后发一次timings报告 ...\n我是用NoSpawn插件禁止了蜘蛛的生成，并且重启了Timings，的确蜘蛛没有任何占用了，但是服务器TPS没有任何好转，占用总体也没有变化只是少了蜘蛛\nhttps://timings.aikar.co/?id=a4596a4ab02342f8bb34829d8a05377f"
        },
        {
            "author": "C5bb",
            "timestamp": 1581672000,
            "txt_content": "安不生 发表于 2020-2-14 17:09\n我是用NoSpawn插件禁止了蜘蛛的生成，并且重启了Timings，的确蜘蛛没有任何占用了，但是服务器TPS没有任 ...\nMCMMO插件是否最新版本， 如果实体过多又有用Lagg\n打开lagg的配置文件  thinAt:    设置成30 或者20\n\n各优化插件版本是否最新  插件功能是否冲突。\n有时候卡是因为 优化插件过多导致。\n还有你的服务器配置 处理器以及内存有关。\n"
        },
        {
            "author": "安不生",
            "timestamp": 1581672120,
            "txt_content": "C5bb 发表于 2020-2-14 17:20\nMCMMO插件是否最新版本， 如果实体过多又有用Lagg\n打开lagg的配置文件  thinAt:    设置成30 或者20\n请认真看Timings和我的说明"
        },
        {
            "author": "C5bb",
            "timestamp": 1581672300,
            "txt_content": " 本帖最后由 C5bb 于 2020-2-14 17:26 编辑 \n安不生 发表于 2020-2-14 17:22\n请认真看Timings和我的说明\n我并没有让你添加插件， \n你也没有说明你的插件配置有无配置完好。\n优化方式很多种 但不是每一种都在每个服务器适用。\n你这样只会适得其反。\n\n除了限制区块生物， 减少实体生成量.\n卡顿是 实体造成的就尝试进行实体方面的优化。\n减少碰撞体积， 具体问题楼上已经是说了，无需额外补充。\n"
        },
        {
            "author": "安不生",
            "timestamp": 1581672600,
            "txt_content": "C5bb 发表于 2020-2-14 17:25\n我并没有让你添加插件， \n你也没有说明你的插件配置有无配置完好。\n优化方式很多种 但不是每一种都在每个 ...\n第一我已经说明了我服务器所有的优化插件，并没有lagg，mcmmo的版本也与卡顿毫无关系，timings里占用高的蜘蛛禁止生成之后毫无作用"
        },
        {
            "author": "C5bb",
            "timestamp": 1581672780,
            "txt_content": " 本帖最后由 C5bb 于 2020-2-14 17:35 编辑 \n安不生 发表于 2020-2-14 17:30\n第一我已经说明了我服务器所有的优化插件，并没有lagg，mcmmo的版本也与卡顿毫无关系，timings里占用高的 ...\n我以为你添加了Lagg 所以让回答者别说lagg解决问题.\n这个插件本身功能是卸载区块，但是你或许可以尝试一下使用它限制区块生物。\n禁止生成并不是办法。 我也不清楚你尝试了多少优化方式\n\n\n"
        },
        {
            "author": "安不生",
            "timestamp": 1581672900,
            "txt_content": "C5bb 发表于 2020-2-14 17:33\n我以为你添加了Lagg 所以让回答者别说lagg解决问题.\n这个插件本身功能是卸载区块，但是你或许可以尝试一 ...\nlagg这个插件到底有没有实质性作用我暂时不提\n但是对我服务器有巨大的副作用是真的\n比如卸载世界，严重的滞后，以及毫无作用的垃圾清理(目前我在使用核心自带的gc，性能又好效果又好)"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1581673020,
            "txt_content": "安不生 发表于 2020-2-14 17:09\n我是用NoSpawn插件禁止了蜘蛛的生成，并且重启了Timings，的确蜘蛛没有任何占用了，但是服务器TPS没有任 ...\ntimings找不到什么严重影响服务器tps的....\n目前只有降低村民智商和刷怪上限这两个方案应该还可以\n另外coreprotect插件有个entity listener的事件有一定占用 如果想不产生这个事件的话好像可以在co的配置文件中关闭对实体的记录(慎重,以后就不会记录实体信息了)\n另外服务器的cpu是什么型号?主频多高?"
        },
        {
            "author": "C5bb",
            "timestamp": 1581673080,
            "txt_content": "安不生 发表于 2020-2-14 17:35\nlagg这个插件到底有没有实质性作用我暂时不提\n但是对我服务器有巨大的副作用是真的\n比如卸载世界，严重的 ...\n请问是否尝试优化过服务端配置文件\n\n如果你能把 spigot.yml    bukkit.yml  paper.yml  发出来那真的是感激不尽"
        },
        {
            "author": "极光creeper",
            "timestamp": 1581673260,
            "txt_content": " 本帖最后由 极光creeper 于 2020-2-14 17:43 编辑 \n\n1.15可以视作1.14的优化版本\n事实也基本的确如此，1.14充当了过渡，我认为其定位已经可以确定与1.11相同了\n1.16的更新较大，我不排除1.15后续也会成为过渡版本的可能\n\n目前的服务器没有理由在1.14上弥留\n从效率上讲: 1.7.x与1.8.x效率最高，占用也非常低；其次是1.12.2；随后是1.13.2；随后是1.15.2；随后是1.14.4\n虽然现在的1.15.2效率远不及1.13.2，但也比1.14.4高\n\n1.15.2的paper做的非常好，虽然大家目前都在着手修复一些糟糕的bug，而非完全投入优化\n但在性能方面 paper 1.15.2 远比1.14.4好的多\n\n国内外论坛抱怨1.14的非常多\n我想，换到1.15会是比较好的选择\n\n当然这个和你的timings一点关系都没有，我只是给一点糟糕的建议\n但是我猜你的插件可能有些使用了NMS，所以可能很难换到1.15\n\n这几乎是一个无解的问题，国内外开发者都没有给出什么好的1.14的优化方案\n由于一些特殊的原因，导致entity和tiles在每ticks上的检测尽可能需要同步，且应该保持尽可能的少使用ticks limit机制跳过检测\n所以Timings余下几个红色的在开发者不动手之前，就不能再优化了\n这个涉及到服务器安全问题，不只是线程安全\n\n以上\n\n我不建议你选择最佳，建议退款(笑 这个问题太无解了"
        },
        {
            "author": "gfjhf",
            "timestamp": 1581673440,
            "txt_content": "不知道你的CPU是什么\n单看这份timings报告，村民占用非常大，估计刷铁机挺多的，这个也是没什么解决办法的，只能让玩家减少村民使用或在人少的时候再去有大量村民的地方。\n蜘蛛那个不用管，切换一下时间发现后段已经没什么蜘蛛的占用了，具体也不知道是因为什么\n优化插件，根据paper官方的说法是不建议使用，我个人用过LagAssist，感觉不好用，现在在用react插件，配置过后能有效减轻卡顿。\n1.14嘛，人多的话TPS15基本不用在意了。15以下再去找问题。"
        },
        {
            "author": "安不生",
            "timestamp": 1581674160,
            "txt_content": "bgfjhf 发表于 2020-2-14 17:44\n不知道你的CPU是什么\n单看这份timings报告，村民占用非常大，估计刷铁机挺多的，这个也是没什么解决办法的 ...\n我使用LagAssist效果很好，目前正在使用排除法测试是什么导致服务器卡顿"
        },
        {
            "author": "安不生",
            "timestamp": 1581674280,
            "txt_content": "极光creeper 发表于 2020-2-14 17:41\n1.15可以视作1.14的优化版本\n事实也基本的确如此，1.14充当了过渡，我认为其定位已经可以确定与1.11相同了\n ...\n虽然我很想将服务器升级到1.15+版本，但是这样会导致服务器核心玩法插件无法兼容，并且部分功能报废"
        },
        {
            "author": "安不生",
            "timestamp": 1581674520,
            "txt_content": "EmptyLava 发表于 2020-2-14 17:37\ntimings找不到什么严重影响服务器tps的....\n目前只有降低村民智商和刷怪上限这两个方案应该还可以\n另外co ...\n请问有什么插件可以降低村民的智商，如果没有，那就只能冻结了"
        },
        {
            "author": "安不生",
            "timestamp": 1581674520,
            "txt_content": "EmptyLava 发表于 2020-2-14 17:37\ntimings找不到什么严重影响服务器tps的....\n目前只有降低村民智商和刷怪上限这两个方案应该还可以\n另外co ...\n但是我不想让服务器的村民完全变成无AI的**"
        },
        {
            "author": "sunjianjun",
            "timestamp": 1581674940,
            "txt_content": "楼主大大请把所有优化插件给删除！只加一个这个即可NeverLag！加多了优化他们会冲突！不会得到优化  而且还会冲突卡服的！"
        },
        {
            "author": "安不生",
            "timestamp": 1581675540,
            "txt_content": "sunjianjun 发表于 2020-2-14 18:09\n楼主大大请把所有优化插件给删除！只加一个这个即可NeverLag！加多了优化他们会冲突！不会得到优化  而且还 ...\n不好意思，服务器的优化插件都是我测试有实际用处才会安装的，而NeverLag对于我服来说，并没有太大的作用，非常感谢提出建议，目前我已经知道该怎么解决卡顿问题了，必须降低村民的AI"
        },
        {
            "author": "gfjhf",
            "timestamp": 1581675660,
            "txt_content": "安不生 发表于 2020-2-14 17:56\n我使用LagAssist效果很好，目前正在使用排除法测试是什么导致服务器卡顿\n从这份报告看出村民导致的卡顿最严重，timings报告本来就是动态的，做不到看一份就解决问题，一般是tps低——看报告——解决一个问题——tps又低了——再看报告——再解决下一个问题这样循环"
        },
        {
            "author": "安不生",
            "timestamp": 1581676080,
            "txt_content": "解决方案为: 降低村民AI,或者冻结"
        },
        {
            "author": "17511",
            "timestamp": 1581676320,
            "txt_content": "TPS全称为 Ticks Per Second ，是影响服务器卡顿的主要因素，不会因为玩家的地理位置而影响。\nMinecraft服务器性能基于每秒20个tick，这就是因为为什么一个完美的服务器的TPS为20.0，每个tick都会使服务器计算一些东西，TPS低于20的服务器表明服务器无法跟上一定的任务，那么只能保证重要任务的的进行，被迫跳过一些任务，这个跳过任务的过程就被称为 “服务器延迟滞后”，如果服务器延迟平均在19.95-20之间，那么你不用担心服务器延迟问题。\n在服务器人数少的情况下不要添加优化插件，没有什么用而且还会增加运行内存，tps低主要是因为配置问题 建议找服务商换机子"
        }
    ]
}