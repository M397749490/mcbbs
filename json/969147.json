{
    "title": "[已解决]关于容器方面的问题",
    "author": "EdgeGold",
    "replyCount": 6,
    "timestamp": 1582641300,
    "txt_content": " 本帖最后由 EdgeGold 于 2020-2-26 11:47 编辑 \n\n求助,我想判断玩家点击着的一个物品,放到我容器的某个位置上面,\n然后判断那个物品是否有指定的lore来决定是否Cancle\n我使用 getCurrentItem().getItemMeta().getLore().contains() 的时候,代码报错了\n我看了下API,发现有 getCurrentItem().isSimilar()   \n但是只能判断ItemStack,有没有办法获取光标持有物品的ItemStack对象\n求大佬解答报错图\n\n\n\n\n(G]6[5WH_RNPYTVXG{(Y~Y0.png (41.81 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-25 22:52 上传\n\n\n\n\n\n\n\n\n\nWYRZ1HXH}GBEM]Q4E$VCT.png (18.34 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-25 22:52 上传\n\n\n\n\n\n\n\n\n\nfile_1582642352000.jpg (116.03 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-25 22:52 上传\n\n\n\n\n\n",
    "replies": [
        {
            "author": "土球球",
            "timestamp": 1582641900,
            "txt_content": "我使用 getCurrentItem().getItemMeta().getLore().contains() 的时候，代码报错了\n你可能需要先提供一下报错是什么"
        },
        {
            "author": "EdgeGold",
            "timestamp": 1582642080,
            "txt_content": "土球球 发表于 2020-2-25 22:45\n你可能需要先提供一下报错是什么\n稍等一下,我去弄"
        },
        {
            "author": "EdgeGold",
            "timestamp": 1582642380,
            "txt_content": "土球球 发表于 2020-2-25 22:45\n你可能需要先提供一下报错是什么\n图已补\n\n\n\n\nfile_1582642400000.jpg (116.03 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-25 22:53 上传\n\n\n\n\n\n\n\n\n(G]6[5WH_RNPYTVXG{(Y~Y0.png (41.81 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-25 22:53 上传\n\n\n\n\n\n\n\n\nWYRZ1HXH}GBEM]Q4E$VCT.png (18.34 KB, 下载次数: 0)\n\n下载附件\n\n2020-2-25 22:53 上传\n\n\n\n\n\n"
        },
        {
            "author": "Ir.Nep",
            "timestamp": 1582676220,
            "txt_content": " 本帖最后由 Ir.Nep 于 2020-2-26 08:26 编辑 \n\n写的挺好看的\n\ngetCurrentItem()获取的是玩家所点击的槽位上的物品\ngetCursor()才是获取玩家光标上拿着的物品\n\n写方法长链遇到NPE时就把的每一节都输出一遍，哪里是null就一清二楚了\n比如event.getCurrentItem().getItemMeta().getLore()\nSystem.out.println(e.getCurrentItem().toString());\nSystem.out.println(e.getCurrentItem().getItemMeta().toString());\nSystem.out.println(e.getCurrentItem().getItemMeta().getLore());复制代码根据null出现的情况我们可以写成\n\n@EventHandler\npublic void onItemClick(InventoryClickEvent e) {\n        ItemStack cursorItem = e.getCursor();  // 玩家光标上拿着的物品\n        if(cursorItem.hasItemMeta()) {  // 判断物品是否有ItemMeta\n                ItemMeta im = cursorItem.getItemMeta();\n                if(im.hasLore()) {  // 判断物品ItemMeta是否有Lore\n                        if(im.getLore().contains(\"戒指\")) {\n                                return;\n                        }\n                }\n        }\n        e.setCancelled(true);\n}复制代码另外物品栏点击事件还要注意判断getAction()和getClick()，防止玩家手持指定物品同时用数字键或shift键移动非指定物品\n"
        },
        {
            "author": "EdgeGold",
            "timestamp": 1582679340,
            "txt_content": "Ir.Nep 发表于 2020-2-26 08:17\n写的挺好看的\n\ngetCurrentItem()获取的是玩家所点击的槽位上的物品\n感谢大佬解答"
        },
        {
            "author": "阳木木",
            "timestamp": 1582686360,
            "txt_content": "666666666666666666666666666666"
        }
    ]
}