{
    "title": "【sjjklh红石第三弹】触发器（满足触发条件才反应） Build 20120610",
    "author": "sjjklh",
    "replyCount": 52,
    "timestamp": 1327208400,
    "txt_content": " 本帖最后由 sjjklh 于 2012-6-10 18:25 编辑 \n\n【sjjklh红石第三弹】触发器（满足触发条件才反应） Build 20120610\n\n本教程在CC-By-NC-Sa 3.0协议下发布。\n\n【【【【【【sjjklh红石系列连接，请看http://www.mcbbs.net/thread-25775-1-1.html】】】】】】\n\n如果你不懂逻辑门知识的话是比较难以看懂（实际上我认为肯定看不懂）本文的。请参考《【sjjklh红石第一弹】逻辑门与常用电路符号 http://www.mcbbs.net/thread-16778-1-1.html》。里面也有电路符号讲解。看懂那篇是看懂这篇的基础。\n\n如果您看不懂《【sjjklh红石第二弹】RS锁存器 http://www.mcbbs.net/thread-16933-1-1.html》，尽管RS基本锁存器是触发器的核心，但关系也不太大——您能够掌握触发器整体功能的话，内部原理也可以先放一放。\n\n因为红石电路的设计不仅仅是一层方块，常常会出现两层三层的情况。因此为了把两三层方块表达在一张平面图上，本文章中的图例皆使用MCRedstoneSim格式以追求简洁表述：（请注意：所有的符号都是相对于一个您自己定义的“地面”而言的）\n\n\n实际上“锁存器”（Latch）与“触发器”（Flip-Flop）是同一类器件的两种称呼。唯一不同：“锁存器”一般是以存储为目的时的称呼（通常为电平触发），“触发器”一般是以随时间特定变化的信号为目的的称呼（大多边沿触发）。本文中大部分情况下都会用“触发器”一词。\n\n所谓“触发器”，它是一个整体，特征为：\n一个时钟输入；若干（有时也可能没有）普通输入；输出端；可有可无的反相输出端。\n当时钟输入满足某种条件时（称之为“满足触发条件”），输出会依据输入而进行相应变化。满足这个“触发条件”是触发器进行反应的前提。如果没有这个前提，触发器不会对输出进行任何操作。\n\n触发条件一般分“电平触发”与“边沿触发”两种。某一个触发器只会有一个触发条件，而不可能身兼数个！\n“电平触发”可能是低电平触发或高电平触发。顾名思义，一旦时钟输入保持为0（低电平触发）或1（高电平触发），则触发器作出反应。电平触发的优点是一般此类触发器建造起来较为简单，缺点也显而易见——如果满足其触发条件的电平持续时间稍长，那么触发器就有可能作出多次难以计数的抽风式的反应。\n“边沿触发”的触发器侦测时钟输入的上边沿信号（从0变到1的那个瞬间）或下边沿信号（从1变到0的那个瞬间）。优点是因为触发条件是“那个瞬间”，所以触发器不会多次抽风式地反应；缺点……就是建造起来略复杂。\n一般触发器最好采用边沿触发，除非某些特定情况，比如您要把其当锁存器用。\n\n以下各触发器的设计方案均为最常用的。欲知晓更多的方案请参考：英文WIKIhttp://www.minecraftwiki.net/wiki/Redstone_circuit与中文WIKIhttp://zh.minecraftwiki.net/%E7%BA%A2%E7%9F%B3%E7%94%B5%E8%B7%AF\n\n\n\n1、D触发器\n在Minecraft中，D触发器属于次常见部件，只有在红石大作中才见得比较多。如果没有耐心可以跳过。\n电路符号如下\n其中：\nD为输入>为时钟输入S为强制Q为1，R为强制Q为0（S与R有时可以没有）Q为输出“Q非”为反相输出（有时可以没有）\n\n“D”意为“Data”，“数据”之意。当触发条件满足时，输出端Q会变成与D相同。触发条件不满足时，D端对Q端无任何影响。电平触发的D触发器又被称为门控D锁存器。\n常用设计方案（C为时钟输入）：方案A为低电平触发（即门控D锁存器），方案B为边沿触发。\n\n\n\n\n\n2012-01-22_12.54.57.jpg (42.6 KB, 下载次数: 77)\n\n下载附件\n\n2012-1-22 12:57 上传\n\n\n\n\n（此为方案B）\n\n单独应用时，输出端可以被控制只对输入端特定时刻的信号起反应。这样你可以将我的4位输入集成化可编程密码门http://www.mcbbs.net/thread-16853-1-4.html在输入端每一位加一个D触发器，改造为可以用按钮代替的拉杆。\n当然，D锁存器可以当做一个1位可控存储单元。密码门里用了4个。\n\n多个D触发器可以应用到移位寄存器当中（串行转并行）。例如你要把8位数据按顺序以一个固定的频率从一根红石线输入，想让它们依次在不同的线路中体现出来，可以这样接线：\n\n\n\n\n2、JK触发器\nJK触发器说来其输出相对于两个输入端J与K的关系式略显复杂。但正因为其复杂，所以能改造为很多功能。\nJK触发器在Minecraft中极其罕见，学习时也需要掌握一定的数电知识。如果不是很愿意学习，建议跳过。\n\n当满足触发条件时，JK触发器的Q满足：\n\n这个式子的Qnext表示触发后的输出，Q表示触发前的输出。用中文表示就是（里面的“或”“与”“非”都是逻辑运算。参见《sjjklh红石第一弹》）：\n下一刻的输出Q=（“K非”与“前一刻的Q”）或（“J”与“前一刻的Q非”）\n列成表就是这样（称为“真值表”）：\n 输入J 输入J 前一刻Q 后一刻Qnext 0 0 0 0 0 0 1 1 0 1 任意 0 1 0 任意 1 1 1 0 1 1 1 1 0也有时序图，T代表其实质为状态翻转。此时序图为上边沿触发\n\n设计方案有：其中A为上边沿触发，B为下边沿触发，E为边沿触发的纵向版本。C为电平触发，而且占了4层，不推荐。\n\n\n\n应用方面，JK触发器能够被改造为其它触发器，实际上JK触发器在现实电路设计里是最灵活的，但在Minecraft里实现起来篇幅太大了……不推荐不熟悉数字电路的新手应用JK触发器。\n\n\n\n\n\n3、T触发器\n满足触发条件时，输出取反。这样T触发器只有一个T输入——时钟输入。\n\n\n在版本Beta 1.7.3的更新中粘性活塞被改进，得到了一个十分有用的特性：如果一个粘性活塞被宽度只有1刻的脉冲激活，它会一次性地推/拉一个方块，但不会再把方块拉/推回来。粘性活塞的这个特性使得其非常适合建造压缩的T触发器。设计方案Z1是最常见的T触发器方案（粘性活塞与可移动方块在位于第一层的火把之上的第二层）；设计方案Z2是高度最矮的——只有一格高；设计方案Z3为纵向设计；设计方案Z4由于其半埋藏的特点成为占地面积最小的方案（3x2x2）。Z4的教程如果您想使用按钮或者压力板连接设计方案Z4，第一个中继器与其右侧的方块可以被省略——只要您在那方块右侧的方块（第二层）上附着按钮或者压力板即可。\n\n还有一些采用普通活塞的方案：\n\n\n\n\n作用：T触发器输入端每改变两次，输出才会改变一次，因此可以用于时钟二分频（即频率除2）。也可以用于用按钮控制门：按一次开，再按一次关，而不是按一次按钮只能让门保持1秒的开启。\n\n\n\n\n以上就是3种触发器。一时半会儿还想不出更多应用，但基本上有时大家能想到的抓耳挠腮也实现不了的电路功能往往用触发器都能解决。触发器也是时序数字电路的基础部分之一。\n\n\n\n\n愿意解答任何问题\n",
    "replies": [
        {
            "author": "Abugv5",
            "timestamp": 1327210680,
            "txt_content": "= =不懂啊- -粘性活塞V5"
        },
        {
            "author": "牛弱弱",
            "timestamp": 1327326120,
            "txt_content": "虽然看不懂。。但是感觉碉堡了..."
        },
        {
            "author": "guodong",
            "timestamp": 1327331880,
            "txt_content": "果断前排啊，有时间慢慢研究"
        },
        {
            "author": "geludan",
            "timestamp": 1327335360,
            "txt_content": "LZ又来了。。。凭你的图我已经向同学们证明了MC是很高级的游戏。。。"
        },
        {
            "author": "geludan",
            "timestamp": 1327335360,
            "txt_content": "LZ又来了。。。凭你的图我已经向同学们证明了MC是很高级的游戏。。。"
        },
        {
            "author": "jacky1440",
            "timestamp": 1327355580,
            "txt_content": "我对红石什么都不会。。。\n还是支持一下·~"
        },
        {
            "author": "tbj",
            "timestamp": 1327383600,
            "txt_content": "红石小白密切关注中"
        },
        {
            "author": "renanyan",
            "timestamp": 1327461360,
            "txt_content": "LZV5,果断收藏~\n顺便问下“本教程在CC-By-NC-Sa 3.0协议下发布。”那协议是啥，和ISO9001神马的是一个性质不？。。。"
        },
        {
            "author": "renanyan",
            "timestamp": 1327479780,
            "txt_content": "renanyan 发表于 2012-1-25 11:16 \nLZV5,果断收藏~\n顺便问下“本教程在CC-By-NC-Sa 3.0协议下发布。”那协议是啥，和ISO9001神马的是一个性质 ...\n好吧，lz真热心，把ISO9001都一并给解释了。。。"
        },
        {
            "author": "黄凯航",
            "timestamp": 1327653960,
            "txt_content": "好乱啊啊啊。。。"
        },
        {
            "author": "马克思·贱人",
            "timestamp": 1327656000,
            "txt_content": "兰州V5。。虽然依旧看不懂。。。我还是从基础学起吧。。。"
        },
        {
            "author": "woaiqz",
            "timestamp": 1327662720,
            "txt_content": "继续学习，继续顶楼主"
        },
        {
            "author": "green丶bastard",
            "timestamp": 1327716000,
            "txt_content": "虽然看不懂中文写的那些（鸟语惯了）但是dfftff还是懂 jkff的话我从来没用过\n需要压缩图 也就是我认为最简化的叫一声 没人感兴趣我也不感兴趣\n2*6超小tff\n活塞压缩dff"
        },
        {
            "author": "s49284972",
            "timestamp": 1327720560,
            "txt_content": "虽然不是很明白不过好像很厉害的样子"
        },
        {
            "author": "sjjklh",
            "timestamp": 1334320920,
            "txt_content": "教程修订 —— 20120413"
        },
        {
            "author": "z12603",
            "timestamp": 1338042900,
            "txt_content": "看起来好复杂哦"
        },
        {
            "author": "sjjklh",
            "timestamp": 1339323960,
            "txt_content": "修订 20120610\n\n增加喜闻乐见的T触发器方案\n\n并将罕见的JK触发器内容折叠，添加阅读建议"
        },
        {
            "author": "jianghr",
            "timestamp": 1339692060,
            "txt_content": "红石理论小白前来拜读补课完毕。表示除jk触发器外基本都看懂了。D触发器算是学习到了。其实wiki上也有，但是比教程生硬。方案B的D触发器低电平上边沿部分感觉有点罕见。\n那么，我做的那个显示器的移位电路可以说是很类似上边沿D触发器，已经算雏形了吧，不过驱动的是任意输入信号而不是时钟信号，而且RS部分是直接引出并分两条线路移位的，每条都\n和控制信号做了与门/非与门，其实用一条线取个反就行了。自己撸的野生产品的确和制式装备的有差距。\n那么感觉D触发器的时钟控制输出感觉可以用于时钟控制的多位计算器的数据存储读取工作。感觉可以用1～2条串行总线结构做读取。"
        },
        {
            "author": "jianghr",
            "timestamp": 1339699500,
            "txt_content": "嗯嗯，不过如果是手动门控触发器组，边沿触发貌似解决不了控制进位同向时的连续进位的问题。\n案例还是简单的触发器组单亮状态。预定只有一个处于1，余下皆0，比如我那个密码门(无非加了条件(译码正确)进位)，或者显示器光标，移位方向与控制信号传递同向(反向就不存在下列问题)。\n1、考虑到前一个0把1干掉了咋办，那么通过与门只进位1。\n2、原来的1怎么灭掉(控制信号已经走远了)。对于这一点我目前办法是移位控制信号后紧跟一清零信号(这对密码门有额外的好处，误码进位失败=自动清零)。\n3、但清零存在早灭现象(清零直接灭进位前的1或刚进位后的1)，我先给刚进位1加了清零保护延时，然后终于暴露了连续进位的问题，(其实控制信号已经边沿处理，单个触发器的确都只反应了一次)。\n4、最后iailum摆出的结构去掉RS刚点亮后的保护延时，加快清零信号是有早灭，但通过满档中继器的延迟熄灭延长了上个RS的对与门进位电路的作用时间，进到下一位后控制信号清零信号都走了，这样才搞定。那时序卡得叫一个犀利的，前后时间窗容错<2ticks……\n我的小结:可以把控制信号与上一个触发器取与的结果延时写入下一个触发器(同样是等控制/清零信号都走远了)，躲开连续进位和清零而不用非常严苛地卡时序。\n回头看你的回帖说用公共时钟感觉也不太像，因为是手动门控(控制、进位同向)，而且边沿信号对单个触发器抽风有用，触发器组还是会连续进位。假如用时钟决定每次允许进位的时长的方法，对于长距离重复结构，时钟本身同步与引线也是问题，更重要的是假如控制信号从头走到尾很长比如要1秒，这到达每个触发器的时间不同可不是都能卡到公共时钟合适的点上的。求解释。\n这只是单亮的，假如是二进制数据处理(如11001001)，进位+无条件清零明显不适合。D触发器组的同向移位(操作方向与移位相同)好像从逻辑上就不合理，如果没有后一位值的暂存，所有的存储位都会给刷成第一位一样的。不过延时写入貌似可以，进位电路的本身通过延时可以充当暂存器的角色，不过感觉这个时序要卡好，不然磨蹭太久，前一组触发器状态更新会干扰进位电路的暂存态的。\n最后要三连，求回复T T。"
        },
        {
            "author": "sjjklh",
            "timestamp": 1339740000,
            "txt_content": "jianghr 发表于 2012-6-15 02:45 \n嗯嗯，不过如果是手动门控触发器组，边沿触发貌似解决不了控制进位同向时的连续进位的问题。\n案例还是简单 ...\n= =果然我是理论型的啊\n\n现实中D触发器级联对时钟同步有很严格的要求\n\n触发一旦不同步就可能连续移位  或许把级与级之间加一个中继器可以适当避免……那么时钟周期（2倍宽度）必须大于中继器延迟了"
        },
        {
            "author": "jianghr",
            "timestamp": 1339741320,
            "txt_content": "sjjklh 发表于 2012-6-15 14:00 \n= =果然我是理论型的啊\n\n现实中D触发器级联对时钟同步有很严格的要求\n确实，现实中的导线或类似元件可没MC里红石15格这么疲软，我YY一下估计也就是一个时钟可以无延时管很多触发器，只要把另外的控制信号和时钟同步取与即可，不过脑补信号宽度要短于D触发器翻转时间，加中继器估计也就为了延长这个翻转，否则连续进位，对吧？"
        },
        {
            "author": "onepiece12",
            "timestamp": 1339757580,
            "txt_content": "进来看看呢~~~话说这好麻烦的感觉"
        },
        {
            "author": "kite1234",
            "timestamp": 1339800480,
            "txt_content": "lz下次别用火球照明了。。。"
        },
        {
            "author": "shejuly",
            "timestamp": 1346035380,
            "txt_content": "这个就真心没看懂了，T触发器的Z1和Z4中的1和2是两个都行还是两个组合到一起是一个？看蒙了。还有那个三角的符号是中继器么？另外，1.2.5的粘性活塞能做T触发器么？"
        },
        {
            "author": "smskck",
            "timestamp": 1357564200,
            "txt_content": "图挂了不少，sjjklh弄下拉"
        },
        {
            "author": "zheung14",
            "timestamp": 1362212100,
            "txt_content": "我说大大在发这章教程之前是不是应该告诉小白我什么是时钟输入呢?前两章都能理解,到这里就不明所以了...还有如果是不常用的触发器是不是应该放在后面再讲呢?还有呢,能不能把触发器的输入输出用表格的形式归纳一下啊,这样会直观很多诶...(原谅我智力有限..."
        },
        {
            "author": "sjjklh",
            "timestamp": 1362223200,
            "txt_content": "zheung14 发表于 2013-3-2 16:15 \n我说大大在发这章教程之前是不是应该告诉小白我什么是时钟输入呢?前两章都能理解,到这里就不明所以了...还有 ...\n建议去弄一本数字电路的书，比我这讲的要科学很多"
        },
        {
            "author": "zheung14",
            "timestamp": 1362226260,
            "txt_content": "sjjklh 发表于 2013-3-2 19:20 \n建议去弄一本数字电路的书，比我这讲的要科学很多\n好麻烦的样子- -(算了,慢慢来吧,感谢大大的教程..."
        },
        {
            "author": "kaluoik",
            "timestamp": 1363855080,
            "txt_content": "renanyan 发表于 2012-1-25 11:16\nLZV5,果断收藏~\n顺便问下“本教程在CC-By-NC-Sa 3.0协议下发布。”那协议是啥，和ISO9001神马的是一个性质 ...\n那是分享协议……如果你要转载就必须遵守那个"
        },
        {
            "author": "Yihc",
            "timestamp": 1363910520,
            "txt_content": "果断收藏                   不解释.太好了。我喜欢."
        },
        {
            "author": "13Moen",
            "timestamp": 1364701020,
            "txt_content": "1.5.1更新了之后感觉T触发器还有压缩的可能？试试比较器吧ww"
        },
        {
            "author": "13Moen",
            "timestamp": 1364701560,
            "txt_content": "普通活塞T触发器第一张图那个红石火把有没有办法隐藏呢？"
        },
        {
            "author": "sgf8899",
            "timestamp": 1366894920,
            "txt_content": "平面图完全看不懂。\nhttps://upload.wikimedia.org/wik ... K_Flip-flop.svg.png\n这样的图就更看不懂了"
        },
        {
            "author": "菊花惭",
            "timestamp": 1366973940,
            "txt_content": "好吧上次就是读到这篇开始头大的。。。"
        },
        {
            "author": "至尊の翔哥",
            "timestamp": 1369831620,
            "txt_content": "图裂了......看不到了......"
        },
        {
            "author": "无名氏",
            "timestamp": 1372411080,
            "txt_content": "T触发器里那个Z1和Z4怎么看呐，是分上下两层看的吗？"
        },
        {
            "author": "你的小黑■",
            "timestamp": 1376902560,
            "txt_content": "脑子都看乱了"
        },
        {
            "author": "超级苦力怕",
            "timestamp": 1382330220,
            "txt_content": "Good!  顶啊"
        },
        {
            "author": "goodsuccessful",
            "timestamp": 1389183420,
            "txt_content": "D触发器的满足条件是指什么"
        },
        {
            "author": "我的世界sun123",
            "timestamp": 1391429640,
            "txt_content": "高级的红石教程。。。我的天啊=，=!"
        },
        {
            "author": "pangdundun",
            "timestamp": 1395531900,
            "txt_content": "喵喵 咩咩 请问是我的电脑问题吗? = = 看不到图的说\n\n我是白菜"
        },
        {
            "author": "litttle",
            "timestamp": 1411811400,
            "txt_content": "时钟信号是干什么用的"
        },
        {
            "author": "408010350",
            "timestamp": 1411853760,
            "txt_content": "哈哈哈哈完全看不懂{:10_499:}"
        },
        {
            "author": "nsezz123",
            "timestamp": 1439559360,
            "txt_content": "第三章看不懂了\n回来回复一下\n小学生还是小学生啊。。。"
        },
        {
            "author": "whwhwhqwe",
            "timestamp": 1440378360,
            "txt_content": "这个这个…… 呃~~ -______-我已经完全看不懂了"
        },
        {
            "author": "银琵琶树",
            "timestamp": 1440386220,
            "txt_content": "楼主坑定数学学霸...\n学渣路过"
        },
        {
            "author": "minecraft至上",
            "timestamp": 1440813960,
            "txt_content": "我是红石渣，看不懂。"
        },
        {
            "author": "陋室铭",
            "timestamp": 1440817560,
            "txt_content": "好厉害，继续  赞一个"
        },
        {
            "author": "13862428795",
            "timestamp": 1447078320,
            "txt_content": "现在我学电子，希望可以学会，将来成为一名红石大师"
        },
        {
            "author": "1677343686",
            "timestamp": 1556699340,
            "txt_content": "大佬牛逼，一直搞不懂逻辑电路原理"
        },
        {
            "author": "heroberine",
            "timestamp": 1579579920,
            "txt_content": "T触发器图都挂了"
        },
        {
            "author": "游戏小号",
            "timestamp": 1582903980,
            "txt_content": "很好比较实用"
        }
    ]
}