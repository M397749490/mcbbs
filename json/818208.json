{
    "title": "好像是很高级的菜单 函数实现for1.13.1 （似乎支持多人）",
    "author": "qaz1-qaz1-",
    "replyCount": 11,
    "timestamp": 1535548920,
    "txt_content": " 本帖最后由 qaz1-qaz1- 于 2018-8-30 22:27 编辑 \n效果图\n\ngif 画质有限\n\n\n引言\n突发奇想，做了一个高级菜单，然后就开始讲解原理啦啦啦啦 ~\n灵感来自hypixel的抽奖界面。\n\n\n我决定好好排版\n正文开始\n\n\n\n\n自定义指令\n步骤：\n定位到...\\functions\\actions找到 function1 ,  function2 , function3打开内容如下#功能\nkill @s\ntellraw @s [\"你真的认为我会认真的读取data然后在帮你回到重生点吗？\"]\n#通用退出函数\nfunction menu:actions/exit复制代码\n   4.更改注释 #功能 到 #通用退出函数中间的部分即可，100%不会出事的\n\n\n自定义物品\n\n感谢（还是别@了，不然可能会跪）SPGoding，下面贴出帖子地址，希望对大家有用http://www.mcbbs.net/thread-785724-1-1.html步骤如下：\n定位到 ...\\functions\\show\\open_menu.mcfunction打开，看到如下所示\n\n#加上tag以便持续执行\ntag @s add menu_hasopened\n\n#调用通用开头\n\nfunction menu:show/start\n\n#实体操作\n\n#还没有，则生成实体\n\n#按钮2 - 回到出生点\nexecute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_2\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"minecraft:player_head\",Count:1b,tag:{menu_btn_2:1b,menu_btn:1b}}],CustomName:\"[\"回到出生点\"]\",CustomNameVisible:1b}\n#按钮3 - 回满血\nexecute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_3\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"minecraft:cooked_beef\",Count:1b,tag:{menu_btn_3:1b,menu_btn:1b}}],CustomName:\"[\"回复\"]\",CustomNameVisible:1b}\n#按钮4 - 关闭\nexecute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_4\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"minecraft:lava_bucket\",Count:1b,tag:{menu_btn_4:1b,menu_btn:1b}}],CustomName:\"[\"取消\"]\",CustomNameVisible:1b}\n#按钮5 - 自发光\nexecute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_5\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"minecraft:spectral_arrow\",Count:1b,tag:{menu_btn_5:1b,menu_btn:1b}}],CustomName:\"[\"发光\"]\",CustomNameVisible:1b}\n#设置标签，代表实体已经生成\ntag @s add menu_hassummoned\n#给刚刚生成的实体设置分数\nscoreboard players operation @e[tag=menu_new] menu_list = @s menu_list\n#移除标签\ntag @e[tag=menu_new] remove menu_new\n\n#调用通用判定函数\n\nfunction menu:show/test\n\n#生成过了，则tp实体2\n\n#2\nexecute if entity @s[tag=menu_hassummoned] at @e[limit=1,tag=menu_belong,tag=menu_positioned] run tp @e[tag=menu_belong,tag=menu_btn_2] ^ ^-2 ^1 ~ ~\n#3\nexecute if entity @s[tag=menu_hassummoned] at @e[limit=1,tag=menu_belong,tag=menu_positioned] run tp @e[tag=menu_belong,tag=menu_btn_3] ^1 ^-2 ^0.3 ~ ~\n#4\nexecute if entity @s[tag=menu_hassummoned] at @e[limit=1,tag=menu_belong,tag=menu_positioned] run tp @e[tag=menu_belong,tag=menu_btn_4] ^-1 ^-2 ^0.3 ~ ~\n#5\nexecute if entity @s[tag=menu_hassummoned] at @e[limit=1,tag=menu_belong,tag=menu_positioned] run tp @e[tag=menu_belong,tag=menu_btn_5] ^1 ^-2 ^-0.4 ~ ~\n\n#调用通用结尾\n\nfunction menu:show/end复制代码\n  3. 在注释 \"#还没有，则生成实体\" 处，进行编辑，具体如下\n  4. 随便找一个实体，例如execute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_2\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"minecraft:player_head\",Count:1b,tag:{menu_btn_2:1b,menu_btn:1b}}],CustomName:\"[\"回到出生点\"]\",CustomNameVisible:1b}复制代码  5.找到 $.ArmorItems[3] ArmorItems数组中的第四个元素，进行更改，注意，只要不要动 \"menu_btn_2:1b,menu_btn:1b\" 这两个东西就可以了，其他随意\n\n\n自定义实体\n步骤如下：\n定位到 ...\\functions\\show\\open_menu.mcfunction打开，看到如下所示\n\n#加上tag以便持续执行\ntag @s add menu_hasopened\n\n#调用通用开头\n\nfunction menu:show/start\n\n#实体操作\n\n#还没有，则生成实体\n\n#按钮2 - 回到出生点\nexecute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_2\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"minecraft:player_head\",Count:1b,tag:{menu_btn_2:1b,menu_btn:1b}}],CustomName:\"[\"回到出生点\"]\",CustomNameVisible:1b}\n#按钮3 - 回满血\nexecute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_3\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"minecraft:cooked_beef\",Count:1b,tag:{menu_btn_3:1b,menu_btn:1b}}],CustomName:\"[\"回复\"]\",CustomNameVisible:1b}\n#按钮4 - 关闭\nexecute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_4\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"minecraft:lava_bucket\",Count:1b,tag:{menu_btn_4:1b,menu_btn:1b}}],CustomName:\"[\"取消\"]\",CustomNameVisible:1b}\n#按钮5 - 自发光\nexecute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_5\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"minecraft:spectral_arrow\",Count:1b,tag:{menu_btn_5:1b,menu_btn:1b}}],CustomName:\"[\"发光\"]\",CustomNameVisible:1b}\n#设置标签，代表实体已经生成\ntag @s add menu_hassummoned\n#给刚刚生成的实体设置分数\nscoreboard players operation @e[tag=menu_new] menu_list = @s menu_list\n#移除标签\ntag @e[tag=menu_new] remove menu_new\n\n#调用通用判定函数\n\nfunction menu:show/test\n\n#生成过了，则tp实体2\n\n#2\nexecute if entity @s[tag=menu_hassummoned] at @e[limit=1,tag=menu_belong,tag=menu_positioned] run tp @e[tag=menu_belong,tag=menu_btn_2] ^ ^-2 ^1 ~ ~\n#3\nexecute if entity @s[tag=menu_hassummoned] at @e[limit=1,tag=menu_belong,tag=menu_positioned] run tp @e[tag=menu_belong,tag=menu_btn_3] ^1 ^-2 ^0.3 ~ ~\n#4\nexecute if entity @s[tag=menu_hassummoned] at @e[limit=1,tag=menu_belong,tag=menu_positioned] run tp @e[tag=menu_belong,tag=menu_btn_4] ^-1 ^-2 ^0.3 ~ ~\n#5\nexecute if entity @s[tag=menu_hassummoned] at @e[limit=1,tag=menu_belong,tag=menu_positioned] run tp @e[tag=menu_belong,tag=menu_btn_5] ^1 ^-2 ^-0.4 ~ ~\n\n#调用通用结尾\n\nfunction menu:show/end复制代码\n  3.找到 \"#还没有，则生成实体\" 注释，在下方仿照格式生成实体\n#按钮 <数目> - <功能> \nexecute if entity @s[tag=!menu_hassummoned] at @s run summon armor_stand ^ ^ ^1 {Tags:[\"menu_new\",\"menu_armor_stand\",\"menu_btn_<数字，代表按钮的编号，已有1-5了>\"],Invisible:1b,Invulnerable:1b,NoGravity:1b,ArmorItems:[{},{},{},{id:\"<物品id>\",Count:1b,tag:{menu_btn_5:1b,menu_btn:1b}<其他的tag>}],CustomName:\"<json格式的名字>\",CustomNameVisible:1b}复制代码  4.在下方 \"#生成过了，则tp实体\" 注释处模仿添加\n#<按钮编号>\nexecute if entity @s[tag=menu_hassummoned] at @e[limit=1,tag=menu_belong,tag=menu_positioned] run tp @e[tag=menu_belong,tag=menu_btn_<按钮编号>] <局部坐标-左> ^-2 ^<局部坐标-前> ~ ~复制代码 5.定位到 ...\\functions\\show\\action.mcfunction，看到如下\nexecute as @a[nbt={SelectedItem:{tag:{menu_btn_1:1b,menu_btn:1b}}}] run function menu:show/open_menu\nexecute as @a[nbt={SelectedItem:{tag:{menu_btn_2:1b,menu_btn:1b}}}] run function menu:actions/function1\nexecute as @a[nbt={SelectedItem:{tag:{menu_btn_3:1b,menu_btn:1b}}}] run function menu:actions/function2\nexecute as @a[nbt={SelectedItem:{tag:{menu_btn_5:1b,menu_btn:1b}}}] run function menu:actions/function3\nexecute as @a[nbt={SelectedItem:{tag:{menu_btn_4:1b,menu_btn:1b}}}] run function menu:actions/exit\n复制代码 6.仿照添加\nexecute as @a[nbt={SelectedItem:{tag:{menu_btn_<按钮编号>:1b,menu_btn:1b}}}] run function menu:actions/<执行函数>复制代码 7.定位到 ...\\functions\\actions\\<你刚刚写的函数>.mcfunction，模仿输入\n#功能\n\n<你所需要的命令>\n\n#通用退出函数\n\nfunction menu:actions/exit复制代码注意，这里的@s是调用命令的玩家\n  8.进服测试，如有问题请留言\n\n\n原理&思路简单的来说就是扣帽子，流程如下\n若玩家手中拿着要扣的帽子，则生成实体若玩家把帽子扣到了实体上，则打开菜单若玩家把帽子扣到了对应的实体（按钮）上，则触发动作\n\n附录：文件结构\ndata数据包根目录\nminecraftminecraft命名空间\ntags标签\nfunctions函数标签\nload.json加载执行/初始化\ntick.json每一tick执行\nmenumenu命名空间/主命名空间\ntags标签\nitems物品标签\nall.json所有物品/用于清除函数物品，防止刷物品\nfunctions函数\nload.json初始化函数\ntick.json每一tick执行/内容综合，复杂，不一一说明\nactions用于存放点击后动作的文件夹\nexit.mcfunction通用退出函数\nfunction1.mcfunction自定义动作1\nfunction2.mcfunction自定义动作2\nfunction3.mcfunction自定义动作3\nshow展示函数\naction.mcfunction检测玩家是否点击/换下盔甲架上物品\nend.mcfunction通用结束函数\nopen_menu.mcfunction显示玩家的主菜单/不是esc的那个\nselecteditem.mcfunction显示玩家的打开前确认菜单\nstart.mcfunction通用开始函数\ntest.mcfunction通用检测函数/检测那个盔甲架属于该玩家\nunselecteditem.mcfunction取消打开菜单前确认菜单\n因为命令风格较差，并且面向过程，请轻喷\n\n\n\nmenu.zip\n(14.31 KB, 下载次数: 6)\n\n\n\n2018-8-30 21:35 上传\n点击文件名下载附件\n\n\n\n\n\n\n参考\n\nhttps://minecraft-zh.gamepedia.com/%E5%8C%BA%E5%9D%97%E6%A0%BC%E5%BC%8F#Entity_Format 区块格式\nhttps://minecraft-zh.gamepedia.com/Player.dat%E6%A0%BC%E5%BC%8F Player.dat 格式\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "夕颜初夏",
            "timestamp": 1535549100,
            "txt_content": "根本看不懂2333"
        },
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1535549220,
            "txt_content": "夕颜初夏 发表于 2018-8-29 21:25\n根本看不懂2333\n这个似乎没码完的说（格式不对，还得改，论坛格式好像命令的高亮显示不对）"
        },
        {
            "author": "Belanga",
            "timestamp": 1535550000,
            "txt_content": "gif好像加载不出来"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1535571540,
            "txt_content": "两个人同时开菜单，别人能不能扣你帽子？\n等等...这帽子是要扣给谁，菜单使用者还是按钮实体？"
        },
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1535598300,
            "txt_content": "⊙v⊙ 发表于 2018-8-30 03:39\n两个人同时开菜单，别人能不能扣你帽子？\n等等...这帽子是要扣给谁，菜单使用者还是按钮实体？ ...\n扣给按钮实体，第一个好像解决不了，想个办法"
        },
        {
            "author": "丢人素学姐",
            "timestamp": 1535674080,
            "txt_content": "天哪这不是罗永浩的无限屏功能么！\n哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈"
        },
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1535684340,
            "txt_content": "Vinogradov 发表于 2018-8-31 08:08\n天哪这不是罗永浩的无限屏功能么！\n哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈 ...\n好像是的，哈哈哈哈哈哈哈"
        },
        {
            "author": "qq614028150",
            "timestamp": 1535692080,
            "txt_content": "好厉害啊啊插件挺好"
        },
        {
            "author": "asd1214043871",
            "timestamp": 1536650760,
            "txt_content": "1.12可以用么~"
        },
        {
            "author": "君子兰",
            "timestamp": 1536719220,
            "txt_content": "完全不懂作者的意思"
        },
        {
            "author": "北街",
            "timestamp": 1562046300,
            "txt_content": "学渣表示看不懂\n"
        }
    ]
}