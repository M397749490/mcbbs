{
    "title": "[前置API|编程]JavaScriptLibrary——使用JavaScript快速进行插件开发[1.8-1.11.2]",
    "author": "2280761425",
    "replyCount": 11,
    "timestamp": 1542378960,
    "txt_content": " 本帖最后由 2280761425 于 2020-3-11 08:17 编辑 \n\n\n\n\n\nJavaScript支持库\n使Java中JavaScript的使用更方便\n注意：由于本插件中的js代码使用了java8的特性，请务必使用java8或以上版本\n\n\n简介：相信大家都有过这样的经历，偶然间得到一个灵感，却苦于编写插件太麻烦或者不会java而最终放弃。确实，打开ide再经过一堆步骤后再编写插件显得很麻烦【记事本大佬当我没说233】。那有没有办法简化这步骤呢？于是，这个插件就诞生了。这个插件最初的灵感还是来自于pvpin，那种即写即用的感觉和用java写插件完全就是两个样。之后，由于我的一个插件需要调用到js，我便开始尝试写这个插件，其中最大的困难还是时间不够【高中党是真的没什么时间】，因此，我只能利用空闲时间一点点的写代码，于是就从8月写到了现在。本插件不仅提供可以加载文件中的js代码，也可以在游戏中直接运行代码（可以通过书本或者聊天栏写代码）。\n\n效果截图：\n\nrun子命令：\n\n\n\n\nVL~%R8{TC79T[KKW]92]TDT.png (93.84 KB, 下载次数: 0)\n\n下载附件\n\n2018-11-16 22:09 上传\n\n\n\n\n\n在书本中写代码：\n\n\n\n\n652LDEO({65YZ5Z_7H[T9FO.png (83.9 KB, 下载次数: 0)\n\n下载附件\n\n2018-11-16 22:08 上传\n\n\n\n\n\n\n\n\n\nTSC5G$M6CS927JI41}Z6(IN.png (82.07 KB, 下载次数: 0)\n\n下载附件\n\n2018-11-16 22:08 上传\n\n\n\n\n\njs代码文件&事件示例：\n\n\n\n\n1}ZJ}R[)~]S`$KWTN_K3~JU.png (41.56 KB, 下载次数: 0)\n\n下载附件\n\n2018-11-16 22:09 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n配置文件：\nlinkage: false\n#是否为其他插件提供API并加载其js代码\ncommand:\n  run: true\n  #是否启用run子命令(/js run)\n  book: true\n  #是否启用book子命令(/js book)复制代码\n\n\n插件命令和权限：/js help - 查看插件命令帮助权限:jslib.command.help/js run <js代码> - 运行一段js代码（可以有空格，不可以分行），如：js run me.sendMessage(\"js测试\");权限:jslib.command.run/js book - 运行手中所持书中的代码（由于一些原因，在书中代码的§符号会被删除掉）权限:jslib.command.book\n使用run和book子命令执行代码时代码中的me变量指向命令使用者run和book子命令作用域被限制，如果想添加全局方法请使用global全局引用\n\n\n使用方法：用法就不发mcbbs了，直接在github的Wiki里写https://github.com/Miraclexc/JavaScriptLibraryPlugin/wiki\n\n示例JavaScript代码：\n生成一个球：\n//生成一个空心球\nfunction round_param(r/*球的半径*/, location/*球心坐标*/) {\n        //y轴\n        for(var angle=0;angle<360;angle++) {\n                var radian = Math.PI * angle / 180;\n                var offsetY = r * Math.sin(radian);\n                //平面半径计算\n                var offsetR = r * Math.cos(radian);\n                //在xz平面上生成圆\n                for(var angle2=0;angle2<360;angle2++) {\n                        var radian2 = Math.PI * angle2 / 180;\n                        var offsetX = offsetR * Math.sin(radian2);\n                        var offsetZ = offsetR * Math.cos(radian2);\n                        //弧上的点\n                        var pointLocaiton = location.clone().add(offsetX, offsetY, offsetZ);\n                        //放置方块\n                        pointLocaiton.getWorld().getBlockAt(pointLocaiton).setType(Packages.org.bukkit.Material.QUARTZ_BLOCK);\n                }\n        }\n}复制代码\n\n\n更新记录：2020-3-11时隔一年多，版本更新至1.0.2（1.0.1未发布）为1.15.2提供了支持内置库增加Javatype函数与getClassloader函数以支持对其他插件进行操作2018-12-22正式版（1.0.0）发布本次更新为info.json增加了多层文件夹支持限制了 js run 命令执行代码的作用域（发送给玩家的测试值为return返回的值）2018-11-16初始版本发布\n\n开源协议：本插件开源协议使用LGPL3源码：https://github.com/Miraclexc/JavaScriptLibraryPlugin\n\n关于一些问题：本插件的java部分较少使用新版本特性，所以大部分时候出现兼容问题，应该是在JavaScript代码部分。javascript教程部分的话已经开始写了（说实话我也不知道什么时候会发布）对于开发者，也欢迎进行联动开发，本插件的目的也是为了对不同插件的js脚本间进行联动最后，如果使用本插件时发现BUG，欢迎指出。附上中文BukkitDoc方便开发\n注：进行JavaScript代码编写需一定的编程基础（至少也要明白类、对象、变量等这些基础的概念）\n\n\n\n\n本插件所用所有代码均为原创,不存在借用/抄袭等行为\n[groupid=1330]PluginsCDTribe[/groupid]",
    "replies": [
        {
            "author": "hemp",
            "timestamp": 1542381600,
            "txt_content": "看起来不错，支持楼主！！"
        },
        {
            "author": "Farewell_Q",
            "timestamp": 1542382680,
            "txt_content": "等一个精华！大佬！"
        },
        {
            "author": "117779284",
            "timestamp": 1542384060,
            "txt_content": "如果精华可以开设一个衍生资源。达到学习脚本的目的·"
        },
        {
            "author": "NoName德里奇",
            "timestamp": 1542410640,
            "txt_content": "当场写脚本，我觉得还行。\n这大概就是dalao吧。"
        },
        {
            "author": "2280761425",
            "timestamp": 1542424800,
            "txt_content": "117779284 发表于 2018-11-17 00:01\n如果精华可以开设一个衍生资源。达到学习脚本的目的·\n感谢建议，不过这坑可能要填几年233"
        },
        {
            "author": "835937766",
            "timestamp": 1542540300,
            "txt_content": "期待积木工具"
        },
        {
            "author": "BlackGsp",
            "timestamp": 1542917040,
            "txt_content": "感谢！！！但是感觉更复杂了"
        },
        {
            "author": "mo_chener",
            "timestamp": 1584423900,
            "txt_content": "我忽然想到了某PVPIN\n是不是可以配合使用？嘿嘿嘿"
        },
        {
            "author": "2280761425",
            "timestamp": 1584441480,
            "txt_content": "mo_chener 发表于 2020-3-17 13:45\n我忽然想到了某PVPIN\n是不是可以配合使用？嘿嘿嘿\n可以的，关于支持pvpin的插件已经完成，但是目前只上传到了pvpin的群文件"
        },
        {
            "author": "akegarasu",
            "timestamp": 1608309900,
            "txt_content": "用了一阵子 真的很棒 有个什么想做的小东西写几下就好了 不用开个工程真的太爽了\n给服务器增添了很多新的各种小功能很爽"
        },
        {
            "author": "丛林意志",
            "timestamp": 1612095840,
            "txt_content": "可以通过什么办法禁用在游戏中使用指令吗，感觉这个就像 eval 一样，自己用到的可能性不大，可能在游戏中留漏洞"
        }
    ]
}