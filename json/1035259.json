{
    "title": "如何使用crt事件来使玩家进入下一阶段",
    "author": "谐振丿Fly",
    "replyCount": 2,
    "timestamp": 1588334340,
    "txt_content": "我想要用一个Cot自定物品通过Crt事件来使玩家进入下一阶段\n请大佬解决一下\n#priority 20000\n#loader contenttweaker\n//导包\n    import mods.contenttweaker.VanillaFactory;\n    import mods.contenttweaker.Item;\n    import mods.contenttweaker.IItemRightClick;\n    import mods.contenttweaker.Commands;\n    import mods.contenttweaker.MutableItemStack;\n\n    global stageItems as string[string] = {\n        earth_magic_origin : \"one\",\n        root_seed : \"two\",\n        //ancient_scroll : \"three\",\n        //divine_inspiration : \"four\",\n        //brain_chip : \"five\",\n        //star_rune : \"six\",\n        //orders_truth : \"alpha\",\n        //ascenders_proof : \"default\",\n        //life_insight : \"beta\"\n    };\n\n    function createStageItem(name as string, stage as string, enabled as bool){\n        var item = VanillaFactory.createItem(name);\n        item.maxStackSize = 1;\n        item.rarity = \"rare\";\n        if(enabled){\n            item.itemRightClick = function(stack, world, player, hand) {\n                print(stack.name);\n                Commands.call(\"gamestage add \"+player.name+\" \"+stageItems[stack.name.substring(20)], player, world, false, true);\n                Commands.call(\"title \"+player.name+\" title {\\\"text\\\":\\\"您已解锁新阶段！\\\"}\", player, world, false, true);\n                Commands.call(\"summon minecraft:fireworks_rocket \"+player.x+\" \"+(player.y+2)+\" \"+player.z+\" {LifeTime:30,FireworksItem:{id:fireworks,Count:1,tag:{Fireworks:{Flight:1,Explosions:[{Type:1,Flicker:1,Trail:1,Colors:[I;11743532,3887386,2437522,8073150,4408131,14188952,4312372,14602026,15435844,15790320],FadeColors:[I;2437522,14188952,4312372,14602026]}]}}}}\", player, world, false, true);\n                Commands.call(\"playsound minecraft:ui.toast.challenge_complete player \"+player.name, player, world, false, true);\n                stack.shrink(1);\n                return \"Success\";\n            };\n        }\n        item.register();\n    }\n\n//注册物品\n    for key in stageItems{\n        createStageItem(key, stageItems[key], key != \"ascenders_proof\");\n    }\n\n",
    "replies": [
        {
            "author": "youyihj",
            "timestamp": 1588337100,
            "txt_content": "该脚本在我这里能完美运行，你那边有啥问题？建议更新CrT。\n\n顺便建议去掉root_seed : \"two\",后面的逗号"
        },
        {
            "author": "谐振丿Fly",
            "timestamp": 1589105460,
            "txt_content": "友 发表于 2020-5-1 20:45\n该脚本在我这里能完美运行，你那边有啥问题？建议更新CrT。\n\n顺便建议去掉后面的逗号 ...\n好的谢谢大佬，已经解决了"
        }
    ]
}