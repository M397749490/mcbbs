{
    "title": "死亡扣钱",
    "author": "唯爱她°",
    "replyCount": 21,
    "timestamp": 1588842660,
    "txt_content": " 本帖最后由 唯爱她° 于 2020-5-7 17:24 编辑 \npublic void Playerdeadlosemoney(PlayerDeathEvent e){\n            autorespawnlistener.lose(e.getEntity().getPlayer(),money);\n    }复制代码public static void lose(Player p,double money){\n\n            economy.withdrawPlayer(p, money);\n\n    }复制代码\n\n\n\n这个vault前置，怎么才能设置死亡扣钱呢！\n\n<div><pre style='font-family: \"Consolas\", courier; background: #ffffff'><span style=\"color: #000000;&#10;\">MoneyCmd</span><span style=\"color: #000000;&#10;\">.</span><span style=\"color: #000000;&#10;\">take</span><span style=\"color: #000000;&#10;\">(</span><span style=\"color: #000000;&#10;\">e</span><span style=\"color: #000000;&#10;\">.</span><span style=\"color: #000000;&#10;\">getEntity</span><span style=\"color: #000000;&#10;\">(</span><span style=\"color: #000000;&#10;\">)</span><span style=\"color: #000000;&#10;\">.</span><span style=\"color: #000000;&#10;\">getName</span><span style=\"color: #000000;&#10;\">(</span><span style=\"color: #000000;&#10;\">)</span><span style=\"color: #000000;&#10;\">,</span><span style=\"color: #000000;&#10;\"> </span><span style=\"font-weight: bold;&#10;color: #7f0055;&#10;\">this</span><span style=\"color: #000000;&#10;\">.</span><span style=\"color: #000000;&#10;\">money</span><span style=\"color: #000000;&#10;\">)</span><span style=\"color: #000000;&#10;\">;</span></pre><b></b><i></i><u></u><sub></sub><sup></sup><strike></strike>\n</div><div><b></b><i></i><u></u><sub></sub><sup></sup><strike></strike>\n</div><div>public static void take(String player, double money)</div><div><pre style='font-family: \"Consolas\", courier; background: #ffffff'><span style=\"color: #000000;&#10;\">economy</span><span style=\"color: #000000;&#10;\">.</span><span style=\"color: #000000;&#10;\">withdrawPlayer</span><span style=\"color: #000000;&#10;\">(</span><span style=\"color: #000000;&#10;\">player</span><span style=\"color: #000000;&#10;\">,</span><span style=\"color: #000000;&#10;\"> </span><span style=\"color: #000000;&#10;\">money</span><span style=\"color: #000000;&#10;\">)</span><span style=\"color: #000000;&#10;\">;</span></pre><b></b><i></i><u></u><sub></sub><sup></sup><strike></strike>\n</div>复制代码\n\n\n\n\n\n为啥我之前测试页视这样定义的player，但是他withdraPlayer是有横杠的，另外怎么再bbs里发那种有横杠的文字\n\n\n\n\n\nimage.png (5.78 KB, 下载次数: 0)\n\n下载附件\n\n2020-5-7 17:11 上传\n\n\n\n\n\n\n\n\n出现了一个神奇的地方：我百度查为啥有横线，然后查到了一个@Deprecated 这个\n加上后不出现横线了，这个是啥呢！\n\n\n\n\n\nimage.png (16.08 KB, 下载次数: 0)\n\n下载附件\n\n2020-5-7 17:23 上传\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "南柯郡守",
            "timestamp": 1588844640,
            "txt_content": "https://www.mcbbs.net/thread-1037730-1-2.html\n看这篇贴子"
        },
        {
            "author": "William_Shi",
            "timestamp": 1588850400,
            "txt_content": "@Deprecated 是过时或废弃的注解\n\nIDE贴心的提示你，为你加上了横线\n你在方法前面加上这个注解\n意思是你自己写的方法也是过时或废弃的\n治标不治本\n我建议看一下楼上的教程并使用不过时的方法\n\n"
        },
        {
            "author": "唯爱她°",
            "timestamp": 1588850520,
            "txt_content": "南柯郡守 发表于 2020-5-7 17:44\nhttps://www.mcbbs.net/thread-1037730-1-2.html\n看这篇贴子Alove_ issued server command: /kill Alove_\n[19:21:26] [Server thread/ERROR]: Could not pass event PlayerDeathEvent to Losemoney v1.0-SNAPSHOT\norg.bukkit.event.EventException: null\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:320) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:70) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:529) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:514) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at org.bukkit.craftbukkit.v1_14_R1.event.CraftEventFactory.callPlayerDeathEvent(CraftEventFactory.java:726) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.EntityPlayer.die(EntityPlayer.java:519) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.EntityLiving.damageEntity(EntityLiving.java:1169) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.EntityHuman.damageEntity(EntityHuman.java:769) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.EntityPlayer.damageEntity(EntityPlayer.java:674) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at org.bukkit.craftbukkit.v1_14_R1.entity.CraftLivingEntity.damage(CraftLivingEntity.java:245) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at org.bukkit.craftbukkit.v1_14_R1.entity.CraftLivingEntity.damage(CraftLivingEntity.java:232) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at com.earth2me.essentials.commands.Commandkill.updatePlayer(Commandkill.java:41) ~[?:?]\n        at com.earth2me.essentials.commands.EssentialsLoopCommand.loopOnlinePlayers(EssentialsLoopCommand.java:98) ~[?:?]\n        at com.earth2me.essentials.commands.Commandkill.run(Commandkill.java:26) ~[?:?]\n        at com.earth2me.essentials.commands.EssentialsCommand.run(EssentialsCommand.java:162) ~[?:?]\n        at com.earth2me.essentials.commands.EssentialsCommand.run(EssentialsCommand.java:157) ~[?:?]\n        at com.earth2me.essentials.Essentials.onCommandEssentials(Essentials.java:545) ~[?:?]\n        at com.earth2me.essentials.Essentials.onCommand(Essentials.java:458) ~[?:?]\n        at org.bukkit.command.PluginCommand.execute(PluginCommand.java:45) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:149) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.dispatchCommand(CraftServer.java:710) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.PlayerConnection.handleCommand(PlayerConnection.java:1641) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.PlayerConnection.a(PlayerConnection.java:1481) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.PacketPlayInChat.a(PacketPlayInChat.java:47) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.PacketPlayInChat.a(PacketPlayInChat.java:1) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.PlayerConnectionUtils.lambda$0(PlayerConnectionUtils.java:19) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.TickTask.run(SourceFile:18) [Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.IAsyncTaskHandler.executeTask(SourceFile:144) [Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.IAsyncTaskHandlerReentrant.executeTask(SourceFile:23) [Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.IAsyncTaskHandler.executeNext(SourceFile:118) [Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.aX(MinecraftServer.java:908) [Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.executeNext(MinecraftServer.java:901) [Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.IAsyncTaskHandler.executeAll(SourceFile:103) [Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.sleepForTick(MinecraftServer.java:884) [Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:818) [Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_251]\nCaused by: java.lang.NullPointerException\n        at top.zjzdmc.datehoer.losemoney.event.LoseMoneyListener.onPlayerdeath(LoseMoneyListener.java:17) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_251]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_251]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_251]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_251]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:316) ~[Spigot1.14.4.jar:git-Spigot-1981d55-3e7b386]\n        ... 35 more复制代码\n大佬，报错了。。。"
        },
        {
            "author": "唯爱她°",
            "timestamp": 1588850760,
            "txt_content": "William_Shi 发表于 2020-5-7 19:20\n@Deprecated 是过时或废弃的注解\n\nIDE贴心的提示你，为你加上了横线\n他那个方法，我把上面换成string就是划掉的\n换成Player不是划掉的\n这样的是啥意思呢"
        },
        {
            "author": "William_Shi",
            "timestamp": 1588851180,
            "txt_content": "唯爱她° 发表于 2020-5-7 19:26\n他那个方法，我把上面换成string就是划掉的\n换成Player不是划掉的\n这样的是啥意思呢 ...\n我求你了，先学Java同一个方法名可以有不同的参数形式\n然后根据传入的参数形式决定使用哪种方法\n可能其中一个方法过时，但另外一个不过时\n尽管方法名一样，但是其参数不一样（Player类型、String类型不一样）\n\n\n"
        },
        {
            "author": "William_Shi",
            "timestamp": 1588851240,
            "txt_content": "唯爱她° 发表于 2020-5-7 19:22\n大佬，报错了。。。\n请补上你的代码请截图代码，并且带上行号\n只有报错没代码，我怎么看？？？？？？"
        },
        {
            "author": "唯爱她°",
            "timestamp": 1588851300,
            "txt_content": "William_Shi 发表于 2020-5-7 19:33\n我求你了，先学Java同一个方法名可以有不同的参数形式\n然后根据传入的参数形式决定使用哪种方法\n可能其中 ...\n行，明白了。能麻烦看下报错吗"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1588851480,
            "txt_content": "唯爱她° 发表于 2020-5-7 19:35\n行，明白了。能麻烦看下报错吗\n你给的报错都看不到你行号和代码\n"
        },
        {
            "author": "William_Shi",
            "timestamp": 1588851600,
            "txt_content": "唯爱她° 发表于 2020-5-7 19:35\n行，明白了。能麻烦看下报错吗\n我刚刚回复了，请给代码行号以及完整代码\n除非你认为你代码是商业机密不可以给任何人看到"
        },
        {
            "author": "唯爱她°",
            "timestamp": 1588852020,
            "txt_content": "William_Shi 发表于 2020-5-7 19:40\n我刚刚回复了，请给代码行号以及完整代码\n除非你认为你代码是商业机密不可以给任何人看到 ...package top.zjzdmc.datehoer.losemoney.event;\n\nimport net.milkbowl.vault.economy.Economy;\nimport net.milkbowl.vault.economy.EconomyResponse;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.entity.PlayerDeathEvent;\nimport top.zjzdmc.datehoer.losemoney.Losemoney;\n\npublic class LoseMoneyListener implements Listener {\n    private static Economy econ = null;\n\n    @EventHandler\n    public void onPlayerdeath(PlayerDeathEvent e){\n        Player player = e.getEntity().getPlayer();\n        double money = Losemoney.instance.getConfig().getDouble(\"LoseMoney\");\n        EconomyResponse take = econ.withdrawPlayer(player,money);\n        if(take.transactionSuccess()){\n            player.sendMessage(\"扣除\"+money);\n        }\n        else{\n            System.out.println(take.errorMessage);\n        }\n    }\n}\n\n[code]package top.zjzdmc.datehoer.losemoney;\n\nimport net.milkbowl.vault.economy.Economy;\nimport net.milkbowl.vault.economy.EconomyResponse;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.entity.PlayerDeathEvent;\nimport org.bukkit.plugin.RegisteredServiceProvider;\nimport org.bukkit.plugin.java.JavaPlugin;\nimport top.zjzdmc.datehoer.losemoney.event.LoseMoneyListener;\n\npublic final class Losemoney extends JavaPlugin {\n    private static Economy econ = null;\n    public static Losemoney instance;\n    @Override\n    public void onEnable() {\n\n        // Plugin startup logic\n        getLogger().info(\"[LoseMoney]§6插件以加载\");\n        if (!setupEconomy() ) {                                 //判断是否有vault！\n            getLogger().info(\"没有找到经济插件！！请安装vault\");\n            getServer().getPluginManager().disablePlugin(this);\n            return;\n        }\n        getConfig().options().copyDefaults();\n        saveDefaultConfig();\n        getServer().getPluginManager().registerEvents(new LoseMoneyListener(),this);\n    }\n    private boolean setupEconomy() {\n        if (getServer().getPluginManager().getPlugin(\"Vault\") == null) {\n            return false;\n        }\n        RegisteredServiceProvider<Economy> rsp = getServer().getServicesManager().getRegistration(Economy.class);\n        if (rsp == null) {\n            return false;\n        }\n        econ = rsp.getProvider();\n        return econ != null;\n    }\n\n\n    @Override\n    public void onDisable() {\n        // Plugin shutdown logic\n    }\n}\n复制代码\n[/code]\n"
        },
        {
            "author": "唯爱她°",
            "timestamp": 1588852140,
            "txt_content": "南柯郡守 发表于 2020-5-7 19:38\n你给的报错都看不到你行号和代码\n在下面的回复里了"
        },
        {
            "author": "William_Shi",
            "timestamp": 1588852260,
            "txt_content": "唯爱她° 发表于 2020-5-7 19:47\n[/code]\n截图！\n你把一堆类的代码混在一起了！\n我怎么看的了行号？？？？？？"
        },
        {
            "author": "唯爱她°",
            "timestamp": 1588852320,
            "txt_content": "William_Shi 发表于 2020-5-7 19:51\n截图！\n你把一堆类的代码混在一起了！\n我怎么看的了行号？？？？？？package top.zjzdmc.datehoer.losemoney;\n\nimport net.milkbowl.vault.economy.Economy;\nimport net.milkbowl.vault.economy.EconomyResponse;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.entity.PlayerDeathEvent;\nimport org.bukkit.plugin.RegisteredServiceProvider;\nimport org.bukkit.plugin.java.JavaPlugin;\nimport top.zjzdmc.datehoer.losemoney.event.LoseMoneyListener;\n\npublic final class Losemoney extends JavaPlugin {\n    private static Economy econ = null;\n    public static Losemoney instance;\n    @Override\n    public void onEnable() {\n\n        // Plugin startup logic\n        getLogger().info(\"[LoseMoney]§6插件以加载\");\n        if (!setupEconomy() ) {                                 //判断是否有vault！\n            getLogger().info(\"没有找到经济插件！！请安装vault\");\n            getServer().getPluginManager().disablePlugin(this);\n            return;\n        }\n        getConfig().options().copyDefaults();\n        saveDefaultConfig();\n        getServer().getPluginManager().registerEvents(new LoseMoneyListener(),this);\n    }\n    private boolean setupEconomy() {\n        if (getServer().getPluginManager().getPlugin(\"Vault\") == null) {\n            return false;\n        }\n        RegisteredServiceProvider<Economy> rsp = getServer().getServicesManager().getRegistration(Economy.class);\n        if (rsp == null) {\n            return false;\n        }\n        econ = rsp.getProvider();\n        return econ != null;\n    }\n\n\n    @Override\n    public void onDisable() {\n        // Plugin shutdown logic\n    }\n}\n复制代码"
        },
        {
            "author": "唯爱她°",
            "timestamp": 1588852380,
            "txt_content": "唯爱她° 发表于 2020-5-7 19:52package top.zjzdmc.datehoer.losemoney.event;\n\nimport net.milkbowl.vault.economy.Economy;\nimport net.milkbowl.vault.economy.EconomyResponse;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.entity.PlayerDeathEvent;\nimport top.zjzdmc.datehoer.losemoney.Losemoney;\n\npublic class LoseMoneyListener implements Listener {\n    private static Economy econ = null;\n\n    @EventHandler\n    public void onPlayerdeath(PlayerDeathEvent e){\n        Player player = e.getEntity().getPlayer();\n        double money = Losemoney.instance.getConfig().getDouble(\"LoseMoney\");\n        EconomyResponse take = econ.withdrawPlayer(player,money);\n        if(take.transactionSuccess()){\n            player.sendMessage(\"扣除\"+money);\n        }\n        else{\n            System.out.println(take.errorMessage);\n        }\n    }\n}\n复制代码"
        },
        {
            "author": "William_Shi",
            "timestamp": 1588852380,
            "txt_content": "唯爱她° 发表于 2020-5-7 19:49\n在下面的回复里了\n反正就是这个栈帧\n\nCaused by: java.lang.NullPointerException\n        at top.zjzdmc.datehoer.losemoney.event.LoseMoneyListener.onPlayerdeath(LoseMoneyListener.java:17) ~[?:?]\n\n出现了NPE"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1588852800,
            "txt_content": "扣钱的逻辑应该是Losemoney.econ而不是第二个类里面的econ\n建议巩固下基础逻辑知识"
        },
        {
            "author": "William_Shi",
            "timestamp": 1588853100,
            "txt_content": "\nCaused by: java.lang.NullPointerException\n        at top.zjzdmc.datehoer.losemoney.event.LoseMoneyListener.onPlayerdeath(LoseMoneyListener.java:17) ~[?:?]\n\n出现了NPE\n\n\n    private static Economy econ = null;\n\n咱先学java行不？你直接对着null操作钱？\n\n你要获取你主类的econ\n然后比如说赋值给这个econ\n再进行操作"
        },
        {
            "author": "唯爱她°",
            "timestamp": 1588853580,
            "txt_content": "William_Shi 发表于 2020-5-7 20:05\nCaused by: java.lang.NullPointerException\n        at top.zjzdmc.datehoer.losemoney.event.LoseMoneyL ...public class ExamplePlugin extends JavaPlugin {\n    \n    private static final Logger log = Logger.getLogger(\"Minecraft\");\n    private static Economy econ = null;\n    private static Permission perms = null;\n    private static Chat chat = null;复制代码\n\nhttps://github.com/MilkBowl/VaultAPI\n这个示例不就是给的null吗"
        },
        {
            "author": "飞翔之歌",
            "timestamp": 1588855440,
            "txt_content": " 本帖最后由 飞翔之歌 于 2020-5-7 20:53 编辑 \n唯爱她° 发表于 2020-5-7 20:13\nhttps://github.com/MilkBowl/VaultAPI\n这个示例不就是给的null吗\nGo to learn java\n出门左拐java教程欢迎您\n而且下面还有代码这里面的perms、chat、econ都已经赋过值了\n"
        },
        {
            "author": "唯爱她°",
            "timestamp": 1588855800,
            "txt_content": "飞翔之歌 发表于 2020-5-7 20:44\nGo to learn java\n出门左拐java教程欢迎您\n而且下面还有\nokok"
        },
        {
            "author": "William_Shi",
            "timestamp": 1588858500,
            "txt_content": "唯爱她° 发表于 2020-5-7 20:13\nhttps://github.com/MilkBowl/VaultAPI\n这个示例不就是给的null吗\n实例先声明了成员变量\n然后在onEnable里面对变量进行了赋值\n其他类调用的时候变量就不是null了\n你不能纯粹CV代码，应该多思考\n"
        }
    ]
}