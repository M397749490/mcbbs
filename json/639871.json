{
    "title": "skript教程之自定义数据库——sk系列教程<2>",
    "author": "yyeerai",
    "replyCount": 17,
    "timestamp": 1475737260,
    "txt_content": " 本帖最后由 yyeerai 于 2016-10-10 13:52 编辑 \n\nsk系列教程目录\n一、skript教程之基础教程\n二、skript教程之自定义数据库（本篇）\n三、skript教程之变量列表\n四、skript教程之函数\n五、skript教程之GUI界面\n六、skript教程之文件系统\n七、skript教程之title与action bar\n八、skript教程之boss血条\n九、skript教程之计分板\n十、skript教程之发包与收包\n十一、skriptAPI简述\n\n\n\n\n图片1.png (120.01 KB, 下载次数: 0)\n\n下载附件\n\n2016-10-6 16:13 上传\n\n\n\n\n声明：此API来自skunity，作者：KenDerGuru; 本人仅做教程翻译与多版本支持（已完成1.9，1.8支持），如有问题请回复.\n原帖地址：请点击需求插件下载（包括1.8,1.9,1.10）: 请点击\n本教程适合skript基本知识已经掌握的人\n如果没有基本知识请到这里学习：http://www.mcbbs.net/forum.php?mod=viewthread&tid=492211\n前言:\n   大概一年多前，我发现了skript，惊讶于他的简单明了，不需要java编程知识就可以让自己的服务器实现无限可能，开始我从最简单的命令开时。随着时间的推移，编辑的脚步越来越复杂，数据量也越来越大，sk原版的数据存储已经不适合了，经常发生数据错误或者丢失的情况，我开始在skunity寻找可以实现高速安全的存储方法，我发现了这个(https://forums.skunity.com/t/myskq-mysql-simplified/3624) 在测试中他工作的非常好, 但是他缺少一些必要的功能比如，多表支持等等。\n所以我决定基于自己开发一套API，其中也借鉴不少别人的代码。\n支持:\n● 简单直观的数据库访问\n● 多数据表支持\n● 可以在mysql存储多个变量列表\n● 存储一个SQL变量/ SQL表变量的值\n● 得到的值从SQL变量/ SQL表变量\n● 如果检查SQL变量/ SQL表变量设置\n● 检查如果一个SQL表变量包含一个值\n● 添加一个值到一个SQL表变量\n● 从列表中删除SQL变量值\n● 删除SQL变量/ SQL表变量\n● 许多例子和解释变量存储不同种类的skript\n● 不同种类的变量分类存储\n● 可以随时通过数据库管理软件查看变量\n要求:\n● Spigot 版本 “1.10.2” (在1.10.2上面测试的也可能支持1.8和1.9)\n● Skript 版本 “dev-20b” by bensku or higher\n● SkQuery1 版本 “May-2016” by gatt\n● 可选: skUtilities 版本 ”0.7.4” 或更高版本\n● 可选 SkRayFall v版本 “1.9.5” 或更高版本\n● 一个数据库，包括数据库名字，密码\n安装:\n警告: 请按照步骤一点一点来，否则会导致错误!\n1)下载安装Spigot, Skript, SkQuery 和 skUtilities. (重启服务器)\n2) 前往 /plugins/Skript/config.sk. 设置 “player variable fix” 为 true 设置 “use player UUIDs in variable names”为 false. \n3)设置“case sensitive” 在config.sk为 false\n4) 将databases设置为下面这样子\n# ==== Variables ====\ndatabases:\n        default:\n                type: CSV\n                pattern: .*\n                file: ./plugins/Skript/variables.csv\n                backup interval: 2 hours复制代码5) 重启服务器\n6)下载SQLSuite.rar file, 解压以后所有文件放入: /plugins/Skript/scripts/\n7) 创建一个数据库\n8) 打开 SQLSuiteDB.sk, 在80行处设置数据库信息.\n9) 重新启动服务器，如果你没有任何错误，说明安装成功，可以用sql语法测试连接是否正常。\nSQLSuite的语法:\n 存储和操作变量（前提是你懂sk基本知识）set sqlvar \"examplevariable\" stored at \"Testtable\" to \"example value\"\nadd \"example value\" to sql list var \"ExampleList\" stored at \"Testtable\"\nremove \"example value\" from sql list var \"ExampleList\" stored at \"Testtable\"复制代码 读取变量（前提是你懂sk基本知识）\nset {_singlevalue} to value of sql var \"ExampleVariable\" stored at \"Testtable\"\nset {_listvalues::*} to value of sql list var \"ExampleList\" stored at \"Testtable\"\nif sql list var \"ExampleList\" stored at \"Testtable\" contains \"example value\"\nif sql list var \"ExampleList\" stored at \"Testtable\" does not contain \"example value\"复制代码 检查变量是否存在（前提是你懂sk基本知识）\nif sql var \"ExampleVariable\" stored at \"Testtable\" exists\nif sql var \"ExampleVariable\" stored at \"Testtable\" is set\nif sql var \"ExampleVariable\" stored at \"Testtable\" does not exist\nif sql var \"ExampleVariable\" stored at \"Testtable\" is not set复制代码删除变量（前提是你懂sk基本知识）\ndelete sql var \"ExampleVariable\" stored at \"Testtable\"复制代码转换数据类型到MySQL: \nNumbers:\n  保存numbers类型:\nset {_testnumber} to 4set sql var \"savednumber\" stored at \"Testtable\" to \"%{_testnumber}%\"复制代码  使保存的number再次使用:\nset {_stringnumber} to value of sql var \"savednumber\" stored at \"Testtable\"复制代码 Time/Date 变量 (需要skUtilities):\n  保存当前时间和日期到SQL数据库:\nset {_currenttime} to convert date now to unixset sql var \"ExampleVariable\" stored at \"Testtable\" to \"%{_currenttime}%\"复制代码  读取 time / date 到变量:\nset {_stringtime} to value of sql var \"ExampleVariable\" stored at \"Testtable\"\nset {_stringtimenumber} to {_stringtime} parsed as number\nset {_RestoredDate} to convert unix {_stringtimenumber} to datemessage \"&aSaved time / date: &e%{_RestoredDate}%\"复制代码 坐标 (传送等需要用):\n  设置变量为当前的位置:\nset {_temppoint} to sqllocation of player \"%player%\"\nset sql var \"ExampleTpPoint\" stored at \"Testtable\" to \"%{_temppoint}%\"复制代码  传送到保存的坐标:\nteleport player to sqllocation \"ExampleTpPoint\" stored at \"Testtable\"复制代码  获取传送点的详情:\nset {_x} to sqllocation-x of \"ExampleTpPoint\" stored at \"Testtable\"\nset {_y} to sqllocation-y of \"ExampleTpPoint\" stored at \"Testtable\"\nset {_z} to sqllocation-z of \"ExampleTpPoint\" stored at \"Testtable\"\nset {_yaw} to sqllocation-yaw of \"ExampleTpPoint\" stored at \"Testtable\"\nset {_pitch} to sqllocation-pitch of \"ExampleTpPoint\" stored at \"Testtable\"\nset {_world} to sqllocation-world of \"ExampleTpPoint\" stored at \"Testtable\"复制代码\n\n\n",
    "replies": [
        {
            "author": "yyeerai",
            "timestamp": 1475741220,
            "txt_content": " 本帖最后由 yyeerai 于 2016-10-6 17:24 编辑 \n\n重要信息:\n 1) 因为SkQuery’s SQL f函数只保存字符串其他类型的都会强制转换为字符串，这个API没有这个问题，但是除了number，time/date,loction以外的数据类型     还是需要转换。\n 2) 请不要使用 \"< none >\" 和\",||-|-||,\" 在变量名字中，他会破坏一些已有的功能。\n下载 SQL-Suite:\n\n\n\n\nSQLSuite 1.0 by KenDerGuru.rar\n(6.56 KB, 下载次数: 20)\n\n\n\n2016-10-6 15:57 上传\n点击文件名下载附件\n\n\n\n\n\n\n使用和许可证信息：\n\n●  此API由 KenDerGuru (Constarible@gmail.com)创建\n●  不要修改任何代码，否则无法提供技术支持\n●  再次发布这个API时请联系原作者\n●  不可出售此API不可用作商业用"
        },
        {
            "author": "qq245271830",
            "timestamp": 1475836740,
            "txt_content": "留名   sk大神出来"
        },
        {
            "author": "yyeerai",
            "timestamp": 1475841180,
            "txt_content": "qq245271830 发表于 2016-10-7 18:39\n留名   sk大神出来\n怎么跑到我帖子上面了"
        },
        {
            "author": "qq245271830",
            "timestamp": 1475915340,
            "txt_content": "yyeerai 发表于 2016-10-7 19:53\n怎么跑到我帖子上面了\n留个名,    还不了解数据库这个东西"
        },
        {
            "author": "qq666666",
            "timestamp": 1475928240,
            "txt_content": "免费送二级域名~\nqwq"
        },
        {
            "author": "xbxy",
            "timestamp": 1476377040,
            "txt_content": "酷,写的很不错"
        },
        {
            "author": "BenLi豪",
            "timestamp": 1476511740,
            "txt_content": "SK确实很好的插件，谢谢楼主写教程加油"
        },
        {
            "author": "qq307198081",
            "timestamp": 1477139520,
            "txt_content": "请问如果数据量不大的脚本 有必要用数据库吗？"
        },
        {
            "author": "yyeerai",
            "timestamp": 1477140480,
            "txt_content": "qq307198081 发表于 2016-10-22 20:32\n请问如果数据量不大的脚本 有必要用数据库吗？\n用自带的sqllite"
        },
        {
            "author": "qq307198081",
            "timestamp": 1477380360,
            "txt_content": "yyeerai 发表于 2016-10-22 20:48\n用自带的sqllite\n大神您好，我试着使用了自带的MySQL，写了一个击杀计数的脚本，显示如下图，使用起来一切正常，但是数据库里面显示的具体数字要怎么看？用SQLite记录时，红框中的内容显示的是数据，MySQL记录时显示的是BLOB，请问怎么才能直观的看到这些存储的局数呢？\n\n\n\n\n\n\n01.png (12.69 KB, 下载次数: 0)\n\n下载附件\n\n2016-10-25 15:25 上传\n\n\n\n\n\n\n\n"
        },
        {
            "author": "qq307198081",
            "timestamp": 1477380480,
            "txt_content": "yyeerai 发表于 2016-10-22 20:48\n用自带的sqllite\n附上一张SQLite存储的数据对比一下\n\n\n\n\n\n02.png (11.18 KB, 下载次数: 0)\n\n下载附件\n\n2016-10-25 15:28 上传\n\n\n\n\n\n\n"
        },
        {
            "author": "yyeerai",
            "timestamp": 1477385520,
            "txt_content": " 本帖最后由 yyeerai 于 2016-10-25 17:05 编辑 \n\n保存的时候记得按照number保存：\n##代码\nset {_testnumber} to 4set sql var \"savednumber\" stored at \"Testtable\" to \"%{_testnumber}%\"复制代码"
        },
        {
            "author": "qq307198081",
            "timestamp": 1477395300,
            "txt_content": "yyeerai 发表于 2016-10-25 16:52\n保存的时候记得按照number保存：\n##代码\n您这个教程我看过，但是我现在用的是自带的MySQL，能麻烦您写一下自带MySQL 变量定义成number的代码吗？"
        },
        {
            "author": "yyeerai",
            "timestamp": 1477395660,
            "txt_content": "qq307198081 发表于 2016-10-25 19:35\n您这个教程我看过，但是我现在用的是自带的MySQL，能麻烦您写一下自带MySQL 变量定义成number的代码吗？ ...\n自带的不能，它自动存储为一个十六进制数据，无法看"
        },
        {
            "author": "qq307198081",
            "timestamp": 1477395720,
            "txt_content": "yyeerai 发表于 2016-10-25 16:52\n保存的时候记得按照number保存：\n##代码\n附上我使用的脚本\n\n\n\n\n001.png (10.1 KB, 下载次数: 0)\n\n下载附件\n\n2016-10-25 19:42 上传\n\n\n\n\n\n\n"
        },
        {
            "author": "qq307198081",
            "timestamp": 1477395780,
            "txt_content": "yyeerai 发表于 2016-10-25 19:41\n自带的不能，它自动存储为一个十六进制数据，无法看\n好的知道了，非常感谢您~！"
        },
        {
            "author": "富贵·李",
            "timestamp": 1554629760,
            "txt_content": "楼主要能给Sponge写出一个skript就好了~  支持你。"
        }
    ]
}