{
    "title": "关于检测玩家是否结束潜行",
    "author": "305822437",
    "replyCount": 24,
    "timestamp": 1519633200,
    "txt_content": " 本帖最后由 305822437 于 2018-2-26 17:49 编辑 \n\n关于检测玩家是否结束潜行\n作为萌新可能写的不太好，请见谅.请问还有没有更好的解决方法？创建计分板\nscoreboard objectives add Ram dummy\nscoreboard objectives add M dummy\nscoreboard objectives add sneakT stat.sneakTime复制代码fill高频\n<font color=\"#ff0000\">fill ~ ~-1 ~ ~ ~-1 ~-2 redstone_block\nfill ~ ~1 ~ ~ ~1 ~-2 air</font>复制代码\n\n进行检测\nscoreboard players add @a[score_sneakT_min=1] M 1\nscoreboard players operation @a[score_Ram_min=0] Ram = @a[score_Ram_min=0] sneakT\nscoreboard players operation @a Ram -= @a M\nscoreboard players set @a[score_Ram=-1] M -1复制代码\n解析：scoreboard players add @a[score_sneakT_min=1] M 1复制代码用于模拟潜行加分\n\nscoreboard players operation @a[score_Ram_min=0] Ram = @a[score_Ram_min=0] sneakT\n复制代码Ram作为临时存储器\n\nscoreboard players operation @a Ram -= @a M复制代码\n\n不停地比较Ram[sneakT]与模拟潜行的大小，判断潜行是否结束\n<font color=\"black\">scoreboard players set @a[score_Ram=-1] M -1</font>复制代码\n\n[增强容错]\n\n\ntestfor @a[score_Ram=-1]\nscoreboard players test ……复制代码\n输出\n\nscoreboard players set @a sneakT 0复制代码\n\n归零\n\n\n\n\n\n\n\n\n\n2018-02-26_15.56.41.png\n(150.26 KB, 下载次数: 1)\n\n\n\n\n下载附件\n\n\n2018-2-26 16:01 上传\n\n\n\n\n\n\n\n\n3x3\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "305822437",
            "timestamp": 1519633320,
            "txt_content": " 本帖最后由 305822437 于 2018-2-26 17:54 编辑 \n\n输出那段好像乱码了\n想了一天，脑袋疼\n\n乱码修复好了，不过这排版简直不忍直视"
        },
        {
            "author": "305822437",
            "timestamp": 1519633440,
            "txt_content": "305822437 发表于 2018-2-26 16:22\n输出那段好像乱码了\n想了一天，脑袋疼\n见谅后面的？请无视，不知道哪来的"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1519634820,
            "txt_content": " 本帖最后由 ⊙v⊙ 于 2018-2-26 17:19 编辑 \n\nM(dummy)=stat.sneakTime\nRam(dummy)=stat.sneakTime\nM(dummy)-Ram(dummy)=0\n\n转了一圈，不是很清楚你在写什么...\n好像还缺了个stat.sneakTime重置的命令...\n\n而且这\"潜行是否结束\"和\"是否没有潜行\"不是差不多吗...\n直接检测stat.sneakTime什么时候归零不就好了...好像看懂了...\n/scoreboard objectives add ifsneak stat.sneakTime\n/scoreboard objectives setdisplay sidebar ifsneak\n\n下面这条紫cb高频\n/scoreboard players set @a[score_ifsneak_min=1] ifsneak 0刚才没写完...\n紫色cb后面接个绿cb，条件约束，用于给玩家+Tag\n\n\n放另一个紫cb，检测ifsneak=0且有Tag的玩家，使其执行去Tag。后接一个条件绿。\n只用到一个stat.sneakTime板，和一个Tag\n3个cb和一个输出用的绿cb...\n\n反正无论怎么想，你用dummy检测sneakTime还模拟，基本是多余的。\n\n看后面的楼层..."
        },
        {
            "author": "305822437",
            "timestamp": 1519635180,
            "txt_content": "⊙v⊙ 发表于 2018-2-26 16:47\nM(dummy)=stat.sneakTime\nRam(dummy)=stat.sneakTime\nM(dummy)-Ram(dummy)=0\n嗯，归〇忘写了。\n\n但是stat.sneakTime不会主动归0呀，必须主动归0为下一次检测做准备\n但是主动归0就必须知道你有没有退出潜行\n这几条命令的作用就在这"
        },
        {
            "author": "305822437",
            "timestamp": 1519635960,
            "txt_content": " 本帖最后由 305822437 于 2018-2-26 17:33 编辑 \n⊙v⊙ 发表于 2018-2-26 16:47\n好像看懂了...\n/scoreboard objectives add ifsneak stat.sneakTime\n/scoreboard objectives setdisplay si ...好像不行，试了下绿CB会不停的触发 \n\n\n\n\n\n\n2018-02-26_17.02.51.png\n(194.18 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2018-2-26 17:18 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "305822437",
            "timestamp": 1519637640,
            "txt_content": "⊙v⊙ 发表于 2018-2-26 16:47\n好像看懂了...\n/scoreboard objectives add ifsneak stat.sneakTime\n/scoreboard objectives setdisplay si ...\n但是这样不还是潜行中就有输出了吗，\n/scoreboard players set @a[score_ifsneak_min=1] ifsneak 0\n只要ifsneak≥1【在潜行中】。ifsneak就会在0、1不停的波动\n给玩家+Tag还是相当与把未结束潜行的玩家涵括进去了呀\n后面再检测几乎就无意义了呀"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1519641060,
            "txt_content": "305822437 发表于 2018-2-25 23:34\n但是这样不还是潜行中就有输出了吗，\n/scoreboard players set @a[score_ifsneak_min=1] ifsneak 0\n只要if ...\n是吗...那就这样\nif sneak>=1, tag add s\nif sneak=0 tag=s, say 输出\nif sneak=0 tag=s, tag remove s\nset sneak 0\n这个顺序...\n写在function里吧，已经不会用cb了...\n这次应没错了\n\n"
        },
        {
            "author": "305822437",
            "timestamp": 1519644000,
            "txt_content": "⊙v⊙ 发表于 2018-2-26 18:31\n是吗...那就这样\nif sneak>=1, tag add s\nif sneak=0 tag=s, say 输出\nsneak不会主动归零是最大的问题，这个问题不解决\nif sneak=0这个条件就行不通了\n\n顺便问下为啥会显示函数错误，格式已经是UTF-8无BOM了，函数也用/reload更新了"
        },
        {
            "author": "305822437",
            "timestamp": 1519645500,
            "txt_content": " 本帖最后由 305822437 于 2018-2-26 19:46 编辑 \n⊙v⊙ 发表于 2018-2-26 18:31\n是吗...那就这样\nif sneak>=1, tag add s\nif sneak=0 tag=s, say 输出\nfunction能用if...else...吗，能用的话好像有个很简单的方法"
        },
        {
            "author": "SPGoding",
            "timestamp": 1519645740,
            "txt_content": "305822437 发表于 2018-2-26 19:45\nfunction能用if...else...吗，能用的话好像有个很简单的方法\n可以\nhttp://www.mcbbs.net/thread-733505-1-1.html\n虽说那个帖子是为程序写的，但也能理解…"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1519645740,
            "txt_content": "305822437 发表于 2018-2-26 01:20\nsneak不会主动归零是最大的问题，这个问题不解决\nif sneak=0这个条件就行不通了\n你自己开后台看，估计是哪条命令写错，整个mcfunction就当了...\n\n此t不潜行，没有标签。\n潜行时获得标签，此t末尾分数归0。\n\n下一t\n依然潜行时sneak依然大于0，跳过输出，分数归0。但如果停止潜行了，由于上t被设0，这t也是0，\n输出，去tag。\n\n应该是这样...具体行不行得通，我明天试完告诉你...\n\n\n\n其实除了tag我想到了个更省脑的办法...sneak时设玩家dummy记分板3分。持续高频此dummy减1分。没有sneak时此dummy减至0分，0分输出...。要只执行一次的就减至-1分，0分输出...\n\n说到底只是想告诉你...用dummy仿stat.sneakTime，相减，复杂了"
        },
        {
            "author": "kongbaiyo",
            "timestamp": 1519645800,
            "txt_content": "这个版本里已经不用fill高频了\n紫色命令方块就是高频了"
        },
        {
            "author": "305822437",
            "timestamp": 1519648260,
            "txt_content": "⊙v⊙ 发表于 2018-2-26 19:49\n你自己开后台看，估计是哪条命令写错，整个mcfunction就当了...\n\n此t不潜行，没有标签。\n我也知道复杂了，想的我脑袋疼\n但我昨天只想出来这个思路，就着手试了下。\nfunction今天才接触到"
        },
        {
            "author": "305822437",
            "timestamp": 1519649940,
            "txt_content": "kongbaiyo 发表于 2018-2-26 19:50\n这个版本里已经不用fill高频了\n紫色命令方块就是高频了\n可能我看的教程比较老旧了"
        },
        {
            "author": "305822437",
            "timestamp": 1519651200,
            "txt_content": "⊙v⊙ 发表于 2018-2-26 19:49\n你自己开后台看，估计是哪条命令写错，整个mcfunction就当了...\n\n此t不潜行，没有标签。\nexecute @a[score_sneakT_min=1] ~ ~ ~ scoreboard players set @s sneakT 0 \nexecute @a[score_sneakT_min=1] ~ ~ ~ scoreboard players tag @s add s\nexecute @a[score_sneakT=0,tag=s] ~ ~ ~ say 输出\nexecute @a[score_sneakT=0,tag=s] ~ ~ ~ scoreboard players tag @s remove s\n\n是这么书写吗"
        },
        {
            "author": "Sssss...",
            "timestamp": 1519657920,
            "txt_content": "现在1.9以上可以不需要fill高频了\n有更快的高频"
        },
        {
            "author": "305822437",
            "timestamp": 1519659360,
            "txt_content": "Sssss... 发表于 2018-2-26 23:12\n现在1.9以上可以不需要fill高频了\n有更快的高频\n更快的高频是什么？"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1519701180,
            "txt_content": " 本帖最后由 ⊙v⊙ 于 2018-2-26 17:37 编辑 \n\n运行一次\nscoreboard objectives add ifsneak minecraft.custom:minecraft.sneak_time复制代码\n让玩家执行，高频以下function内容...\nexecute if entity @s[scores={ifsneak=1..}] run tag @s add s\nexecute if entity @s[scores={ifsneak=0},tag=s] run say 输出\nexecute if entity @s[scores={ifsneak=0},tag=s] run tag @s remove s\nscoreboard players set @s ifsneak 0复制代码原谅我太懒直接用1.13命令格式...\n1.12的...\nscoreboard objectives add ifsneak stat.sneakTime复制代码\n左到右分别是\nexecute @p[score_ifsneak_min=1] ~ ~ ~ scoreboard players tag @s add s\nexecute @p[score_ifsneak_min=0,score_ifsneak=0,tag=s] ~ ~ ~ say 输出\nexecute @p[score_ifsneak_min=0,score_ifsneak=0,tag=s] ~ ~ ~ scoreboard players tag @s remove s\nscoreboard players set @p ifsneak 0复制代码\n"
        },
        {
            "author": "305822437",
            "timestamp": 1519704000,
            "txt_content": "⊙v⊙ 发表于 2018-2-27 11:13\n运行一次\n\n让玩家执行，高频以下function内容...\n可行，谢谢"
        },
        {
            "author": "305822437",
            "timestamp": 1519715220,
            "txt_content": " 本帖最后由 305822437 于 2018-2-27 15:18 编辑 \n305822437 发表于 2018-2-27 12:00\n可行，谢谢继续做我的地图去"
        },
        {
            "author": "305822437",
            "timestamp": 1519715940,
            "txt_content": "⊙v⊙ 发表于 2018-2-27 11:13\n运行一次\n\n让玩家执行，高频以下function内容...\n用其他函数调用它的时候好像有些bug\n和16楼的bug类似"
        },
        {
            "author": "☆娜娜★",
            "timestamp": 1552902660,
            "txt_content": "赞                              赞"
        },
        {
            "author": "夏君竹",
            "timestamp": 1552919940,
            "txt_content": "刚刚需要用到这个，就在论坛看到了，谢谢"
        },
        {
            "author": "305822437",
            "timestamp": 1555894440,
            "txt_content": "夏君竹 发表于 2019-3-18 22:39\n刚刚需要用到这个，就在论坛看到了，谢谢\n不用谢呐，我也是找了好久找不到，然后自己想。想出来就发出来了，顺便交流下有没有更好的思路。"
        }
    ]
}