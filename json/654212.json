{
    "title": "能不能设置NPCmod里的任务为击杀几个玩家即可完成？",
    "author": "453299227",
    "replyCount": 5,
    "timestamp": 1481711100,
    "txt_content": "能不能设置NPCmod里的任务为击杀几个玩家即可完成？\n我战争服想制作那种猎杀玩家完成任务的机制，如果用别的插件实现就算了，\n只使用NPCmod 可以完成的方法求一个",
    "replies": [
        {
            "author": "平凡的行者",
            "timestamp": 1481711100,
            "txt_content": "453299227 发表于 2016-12-20 22:25\n就是1.7.10的 求一步一步指导\n恩好，刚刚稍微做出了个雏形\n有考虑到将整个过程做的比较像是在解任务的样子，所以用到了一些会话控制技巧\n\n首先我们需要知道，制作击杀任务最基本的要求有2个：有方法记录玩家击杀玩家的次数、NPC能获取这些信息(因为要制作成和NPC互动)\n前者我们使用计分板来记录：设置一个计分的判据为playerKillCount，这样当玩家击杀了任何一名玩家后，这个分数会自动加一\n后者我们用NPCmod的脚本控制，读取计分板上的纪录来决定要不要完成任务\n\n好那么开始：\n我们先给NPC设置对话选项，用来触发接下来要设置的击杀任务\n\n\n\n\n2016-12-20_23.53.59.png (29.19 KB, 下载次数: 1)\n\n下载附件\n\n2016-12-21 00:49 上传\n\n\n\n\n\n\n然后我们建立一个击杀任务，让对话使用\n\n\n\n\n2016-12-20_23.55.19.png (26.55 KB, 下载次数: 1)\n\n下载附件\n\n2016-12-21 00:37 上传\n\n\n\n\n\n\n\n接下来是设置会话和任务的控制流程(这边会比较难，因为用到了不常用的技巧)：\n首先，当前玩家的击杀数会影响玩家和NPC的对话(击杀未达到指定数量，NPC会跟你讲不同的话)\n所以我们应该尝试在击杀数(也就是计分板上的分数)和NPC对话的可用上建立关系\n但由于击杀数纪录在计分板上，常规下NPC无法获取计分板上的信息，而且会话的可用选项里也没有能和计分板的分数连上关系的选项。\n因此，我们要尝试使用脚本，在计分分数和会话的是否可用上建立关系。\n\n而我选择了用这个方法建立关系：\n\n\n\n\n2016-12-21_00.04.16.png (27.03 KB, 下载次数: 3)\n\n下载附件\n\n2016-12-21 00:50 上传\n\n\n\n\n\n\n因为NPC对话的可用可受到阵营点数控制，而脚本可以操控阵营点数。所以我设置了一个判断用的阵营专门给脚本使用。\n※注：图中的Hidden表示下图中，玩家的这栏里是否出现玩家对该阵营的资讯。若设置为Yes，则阵营资讯不会出现在这里。这边这个阵营的情况是给脚本做内部判断用的，不应该让玩家知道它的存在，因此Hidden的设置为Yes\n\n\n\n\n2016-12-21_00.07.35.png (50.77 KB, 下载次数: 0)\n\n下载附件\n\n2016-12-21 00:51 上传\n\n\n\n\n\n\n\n接着我们开始设置对话的可用性。\n我范例中NPC只会给玩家任务，问你做完了没。仅此而已，所以我给NPC这样设置对话：\n\n\n\n\n2016-12-21_00.11.59.png (33.43 KB, 下载次数: 3)\n\n下载附件\n\n2016-12-21 00:51 上传\n\n\n\n\n\n\n左边编号越小的对话，NPC会越优先使用。所以我将任务完成的对话摆在最优先其余两者的部分。\n然后三个对话的可用性这样设置：\n\n任务开始：不用设置，摆在最后面\n任务未完成：当击杀任务进行中时，其应该优先比任务开始的对话出现\n\n\n\n\n2016-12-21_00.15.08.png (37.8 KB, 下载次数: 0)\n\n下载附件\n\n2016-12-21 00:51 上传\n\n\n\n\n\n\n任务完成：当击杀达指定数量时应该出现，需优先于任务未完成，因此摆在最前面，并且这样设置：\n\n\n\n\n2016-12-21_00.16.25.png (38.76 KB, 下载次数: 0)\n\n下载附件\n\n2016-12-21 00:52 上传\n\n\n\n\n\n\n判断用的阵营对玩家为友善时，表示任务完成(然后对话就可用)。否则任务还未完成，对话不可用。\n\n接着回到任务设定那边。任务的类型设定为对话完成(Type设定为Dialog)，并且任务本身的完成条件这样设定：\n\n\n\n\n2016-12-21_00.18.39.png (32.3 KB, 下载次数: 0)\n\n下载附件\n\n2016-12-21 00:52 上传\n\n\n\n\n\n\n当看到「任务完成」的对话时，任务将可完成，玩家可接收任务设定的奖励。\n\n最后是编写脚本，将我们刚刚整理好的逻辑使用脚本实现\n这边我使用javascript示范：\n\n\n\n\n2016-12-21_00.40.28.png (26.01 KB, 下载次数: 0)\n\n下载附件\n\n2016-12-21 00:53 上传\n\n\n\n\n\n\n在和NPC互动时(右击NPC，因此脚本写在Interact内)，判断任务是否完成，以修改阵营点数(控制可完成任务的会话是否可用)\n其中的killedCount即是纪录杀敌数的计分项目。计分板会根据这个分数判断任务是否可完成。\n這樣就設定好了\n\n另外说明一下这个方法的缺点：\n1.无法看见自己已杀了几个人，除非你想把计分数直接显示。不过可以设定和NPC互动时，显示还有多少个人要杀\n2.自己用喷溅伤害药水杀死自己也算击杀...设计任务时请尽量避免这种情况。\n\n附上我做的范例存档好了\n\n\n\n杀敌任务示范.zip\n(441.14 KB, 下载次数: 9)\n\n\n\n2016-12-21 00:55 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "。—。",
            "timestamp": 1481727900,
            "txt_content": "http://tieba.baidu.com/p/4775291472\n能，看7楼的脚本魔杖，支持用ecmascript拓展NPC的执行逻辑，复制一下原帖给的ecmascript教程：http://www.w3school.com.cn/js/\n顺带玩家被击杀的hook是PlayerEvent.KilledEntityEvent()，每调用一次符合条件就给计数器+1，然后完整的hook列表在作者的网站上http://www.kodevelopment.nl/minecraft/customnpcs/scripting"
        },
        {
            "author": "453299227",
            "timestamp": 1481758980,
            "txt_content": "有没有操作的教程，这样说听不懂啊"
        },
        {
            "author": "平凡的行者",
            "timestamp": 1482227460,
            "txt_content": "是哪一版的NPCmod?\n\n由于任务设定的击杀条件无法判断玩家(顶多判断特定名子的玩家)，所以必须用NPC的脚本实现\n但我看下来似乎只有1.7.10的NP??Cmod可实现(利用脚本配合计分板实现)\n后面比较新的版本，因为NPCmod的脚本引擎重写过，所以1.7.10之前的脚本不能拿到比较新的版本直接执行\n但1.8以上的NPCmod的脚本还有蛮多地方有问题...\n就算是12月才刚出的1.11beta版，貌似也无法操作玩家引发的事件(为了判断玩家击杀需要这个事件)\n另外目前比较新的NPCmod似乎也无法调用计分板上的数据，使得想透过计分板实作也没办法....\n\nNPCmod不是1.7.10版的话就请用记分板配合命令方块做吧..."
        },
        {
            "author": "453299227",
            "timestamp": 1482243900,
            "txt_content": "平凡的行者 发表于 2016-12-20 17:51\n是哪一版的NPCmod?\n\n由于任务设定的击杀条件无法判断玩家(顶多判断特定名子的玩家)，所以必须用NPC的脚本实 ...\n就是1.7.10的 求一步一步指导"
        }
    ]
}