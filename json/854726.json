{
    "title": "【1.13.2】掉落物id的存取能以怎样的方法实现？",
    "author": "Delamer",
    "replyCount": 9,
    "timestamp": 1554225780,
    "txt_content": " 本帖最后由 Delamer 于 2019-4-3 13:03 编辑 \n\n\n啊没错又是我，我又来问一些稀奇古怪的事了。\n最近试图用盔甲架搞各种花样，已经有各种各样的大佬教我使用各种各样的命令了但是问题还是源源不断的往外跳啊。。\n情况是这样，我的目的是在各种各样的掉落物上召唤手持对应道具的盔甲架，然而我发现在使用原版命令修改盔甲架的手持道具的过程中，无论是使用store result还是scoreboard，都只能存储数字信息，不能存储字符串，而即便使用tag或者name存储了字符串，也无法正常套到命令中使用，这导致一套命令只能对应一种道具，指令无法根据掉落物的不同动态调整手持物，这样一来代码量和执行量过大，势必对游戏过程造成影响。\n\n象下面这些情况，就是现在的症结所在。\n\ndata merge entity @e[type=armor_stand,limit=1,sort=nearest] <nbt>\n这个末尾的nbt部分，里面包含了我想要修改的HandItems的id与Count属性，写出来是这样的\n{HandItems:[{id:\"dirt\",Count:1b}]}\n试图在summon armor_stand的过程中填写nbt也是这个格式，指令套指令确实是不现实啊。。\n\n然后另外一种改法\nreplaceitem entity @e[type=armor_stand,limit=1,sort=nearest] weapon.mainhand <item> [count]\n在这个指令里面的item部分，只能直接填方块id，填其他的任何东西指令都不成立。于是抛掉它。\n\n我不知道该如何把\ndata get entity @e[type=item,limit=1,sort=nearest] Item.id和data get entity @e[type=item,limit=1,sort=nearest] Item.Count\n这两条指令获得的数据塞进去，加引号会变成字符串，不加命令根本不成立，有没有一种方法，就是把这得到的数据存储到一个变量里，再把这个变量塞到上面的nbt信息中？\n\n或者是有没有一种手段能实现我这种设想？\n跪求大佬。\n\n好吧大佬也救不了我。看起来1.13.2就只能针对特定情况写指令了。\n\n\n\n\n2019-04-02 15-05-48 (2).gif (903.08 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-3 12:53 上传\n\n\n\n\n\n\n\n\n2019-04-03 12-47-36.gif (603.36 KB, 下载次数: 0)\n\n下载附件\n\n2019-4-3 12:53 上传\n\n\n\n\n\n不能塞变量的指令忒不灵活了。我换个问题好了。\n在第一张图的效果里，我拿走剑后留下了隐形的盔甲架，尽管这个盔甲架具有标签，但我无法在拿剑的同时让他的标签产生变化，从而无法区分有剑和无剑的盔甲架，这导致没法清理掉空手的隐形盔甲架。所以。。有莫有选中所有空手的盔甲架的方法。。恕我愚钝，现在只能是硬性选择手里没拿着木剑的盔甲架清理，但是这样的话模拟掉落就只能实装在一个物品上了。。\n\n顺便一提，使用data get entity @e[tag=take]我发现空手的盔甲架手持数据是这样的{HantItems:[{},{}]}\n但是，我使用data get entity @e[tag=take,nbt={HantItems:[{},{}]}]却能选择到所有的盔甲架，无论是否空手。。\n\n\n重新跪求大佬。\n",
    "replies": [
        {
            "author": "⊙v⊙",
            "timestamp": 1554225780,
            "txt_content": " 本帖最后由 ⊙v⊙ 于 2019-4-3 04:05 编辑 \n\nHandItems\n\n可能是{},{}会检测到至少带有这个框的木架吧，而且是否空手都会有这个nbt，所以嘛...\n\n\n之前的贴子记得吗？\n类似的办法，这次你用(中间那条)scoreboard players set @e[type=armor_stand,tag=take] countcheck0 0\nexecute as @e[tag=take,type=armor_stand] store success score @s countcheck0 run data get entity @s HandItems[0].Count\nexecute as @e[type=armor_stand,tag=take,scores=[countcheck0=1..] run say helloworld复制代码\n能成功获取到Count就代表手上有至少一件物品。(爪机码字可能有错...)"
        },
        {
            "author": "Delamer",
            "timestamp": 1554225840,
            "txt_content": "@⊙v⊙ @CHElover_C60 大佬救我！"
        },
        {
            "author": "⊙v⊙",
            "timestamp": 1554229440,
            "txt_content": "版本升到1.14。直接data modify。命令前一贴就有"
        },
        {
            "author": "Delamer",
            "timestamp": 1554234960,
            "txt_content": "⊙v⊙ 发表于 2019-4-3 02:24\n版本升到1.14。直接data modify。命令前一贴就有\n看起来我得升1.14了。我跳版本玩1.13才没多久呢。。话说1.14正式版有了嘛。因为正版登陆器一直白屏我都用hmcl开的游戏没注意。。"
        },
        {
            "author": "roothu",
            "timestamp": 1554265020,
            "txt_content": "Delamer 发表于 2019-4-3 03:56\n看起来我得升1.14了。我跳版本玩1.13才没多久呢。。话说1.14正式版有了嘛。因为正版登陆器一直白 ...\n没有 还在快照版跳 各种bug"
        },
        {
            "author": "Delamer",
            "timestamp": 1554267840,
            "txt_content": " 本帖最后由 Delamer 于 2019-4-3 13:07 编辑 \n\n大佬！我改问题了！这种能搞定嘛！\n@⊙v⊙ @CHElover_C60 诶为啥@失效了。。\n好吧只能随缘等大佬往这看了。。\n"
        },
        {
            "author": "Delamer",
            "timestamp": 1554297600,
            "txt_content": "⊙v⊙ 发表于 2019-4-3 14:59\nHandItems\n\n可能是{},{}会检测到至少带有这个框的木架吧，而是否空手都会有这个nbt，所以嘛...\n谢谢指点！我去试试！"
        },
        {
            "author": "SPGoding",
            "timestamp": 1554298800,
            "txt_content": "list 和 compound 都是检测它里面有没有你写的东西\n所以 {} 能够匹配所有 compound"
        },
        {
            "author": "Delamer",
            "timestamp": 1554299280,
            "txt_content": "SPGoding 发表于 2019-4-3 21:40\nlist 和 compound 都是检测它里面有没有你写的东西\n所以 {} 能够匹配所有 compound ...\n指令好难。只啃wiki啃不动。。我还需要更多的尝试来累积经验。。谢谢大佬提醒。。"
        }
    ]
}