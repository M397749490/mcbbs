{
    "title": "[跨平台|开源]RAM_Monitor——服务器内存监控,超出触发警告邮件",
    "author": "innc",
    "replyCount": 0,
    "timestamp": 1583170080,
    "txt_content": " 本帖最后由 innc 于 2020-3-3 01:36 编辑 \n\n本软件可以持续监控服务器内存，当内存超出指定的阈值后发出报警邮件，当服务器的内存临近用完时可能会导致服务器崩溃(没错说的就是Nukkitx,因为没有自动GC机制,只能靠重启释放内存)可能对服主比较有用，使用本软件(准确来说是脚本)需要一定的计算机基础和对Python有一定了解(会用pip就行)，另外使用了f-string特性，要求Python版本大于3.6\n\n先上图\n\n\n\n\nQQ截图20200303010708.png (164.39 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-3 01:11 上传\n\n\n\n\n\n\n配置:\n由于是PY便携，自带跨平台特效，兼容Windows、Linux\nmemoryThreshold = 5200; # 内存报警阈值,单位M，如果需要GB请使用8*1024这种格式\nminutes = 0; #每次检查内存占用率的时间间隔：秒  建议设置成1分0秒左右，性能消耗极低\nseconds = 3; #每次检查内存占用率的时间间隔：分  建议设置成1分0秒左右，性能消耗极低\n\nsmtpHost = \"smtp.qq.com\" #smtp 服务器地址这里使用的是QQ邮箱的地址\nsmtpPort = 465; #smtp 的端口（仅支持TCP(通常是25)和SLL(通常是465)）\nsmtpWithSSL = True; # 如果使用SSl请设置成True反之设置成False\nusername = \"username\"; # smtp的账号(QQ邮箱通常是邮箱账号)\npassword = \"password\"; # smtp的密码(QQ邮箱通常授权码,QQ邮箱->设置->账户->POP3/IMAP...服务可以找到)\n\nfromMail = \"fromMail@mcbbs.com\"; # 发送者的邮箱，和smtp账号一样就行，没有其它需求不建议修改\ntoMail = \"toMail@mcbbs.com\"; # 接受者的邮箱，这里可以和发送者一样，也就是自己跟自己发，也能收到邮件，或者填写其它邮箱\n\n\n\n\n\n\nR[4ZEF(SA)BK477BJUKKJWE.png (55.17 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-3 01:15 上传\n\n\n\n\n\n配置完成后保存退出，使用pip3安装apscheduler和psutil库，在命令行下执行pip3 install apscheduler和pip3 install psutil即可\n之后执行python3 monitor.py就可以运行起来了，如果Linux系统需要挂到后台运行可以使用screen命令，当内存超出阈值以后会发送一次邮件，直到内存降到阈值一下才会重置，下次再次超出内存时会再次发送邮件\n\n\n下载:扫描报告: http://r.virscan.org/language/zh-cn/report/10ced296666c05071639dfcfcae5309e\n\n\n\n\nmonitor.zip\n(1.77 KB, 下载次数: 6)\n\n\n\n2020-3-3 01:28 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n",
    "replies": []
}