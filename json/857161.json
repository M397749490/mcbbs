{
    "title": "[AdvancedAntiCheat(AAC)][PCD] 优化指南",
    "author": "蓝色的羽月",
    "replyCount": 5,
    "timestamp": 1555119960,
    "txt_content": " 本帖最后由 蓝色的羽月 于 2019-4-13 12:55 编辑 \n\nAAC优化指南本指南适用于任何人正在使用由konsolas制作的，蓝色的羽月在MCBBS中搬运的AdvancedAntiCheat3插件本指南将会详细向您介绍AAC,并且为你提供工具来让您抓作弊者的几率提高75%!注意，本优化指南可适用于AdvancedAntiCheat3或之前的版本\n行嘞那让我们开始吧！\n\n介绍\\简介>使用Konsolas的命令条件资源(ConditionalCommands插件 暂未搬运)，当AAC检测到了异常的玩家活动时，我们可以来创建一个尽量严厉点的AAC配置，因为不用担心网络延迟(即 \"Ping\")和服务器的TPS~这个设置实际上应该考虑到周围的条件以便来帮助您快速，准确的逮到作弊者！\nPing\\TPS\\FPS的定义Ping: Ping反映了电子数据在客户端和服务器主机之间处理和所需要的时间（以毫秒为单位）。如果您的地理位置与服务器主机分离的越远，所用的时间的越长。Ping的另外一个影响可能是您目前正在使用的宽带问题，这对于客户端或者服务器来说是典型的访问缓慢、有限的原因。\n根据信息，1-90毫秒(ms)的ping是我的世界服务器的完美连接速度，超过200毫秒（以下毫秒将统称\"ms\"）的延迟可能会导致较小的滞后，因为你正在游戏当中并且信息没有足够快时间来发送到服务器上来追踪您的操作。AAC非常聪明，如果服务器由于延迟原因很难追踪你的动作，它将会在您的身上多耗一些时间检测你。\nTPS: TPS代表的是Ticks Per Second每秒的等待时间限制，也就是俗称的Time Out(后面统称为TO)。我的世界每秒最多可以处理20个Ticks，这就是为什么一个在7天24小时允许的非常流畅的服务器显示的TPS为20。每一个Ticks会使服务器计算很多事情，比如怪物的方向，农作物的生长和追踪玩家与方块和实体的交互。TPS小于20代表着服务器无法跟上并且被滞后，被迫跳过需要计算的东西以便来保存重要的服务器任务。被跳过的数据通常被称为“服务器滞后”。除了TPS掉到18以下的**情况外，玩家的滞后其实并不是很麻烦甚至不会引起注意。由于AAC需要精确的测试，预判玩家的移动，因此对于某些需要AAC检查的项目(比如说Badpackets),低于19TPS的服务器可能就会比较棘手了。\nFPS: 嘿！不要把这个跟TPS和FPS搞混了(Frames Per Second 每秒帧数)。FPS必定在客户端中体现，是迄今为止最为常见的滞后表现形式。它也与追踪您的移动或者操作的服务器无关。FPS直接反映了您的计算机的处理和显示服务器和游戏正在发送的数据的能力。因此！FPS滞后也只是客户端方滞后，跟服务器无关！所以内，如果你有一个玩家在开挂然后被检测到了，然后这个玩家说他的帧数(FPS)只有13帧，那是他胡扯！(此时，服主应该站出来大声喊出\"我有异议！\")因为此时你已经知道了FPS和AAC无关。\n>这个定义指南的目的是为了服务器的所有者在使用AAC的同时保持最佳的服务器性能，这是一种又先进而常识的方法，可以在服务器性能不下降的情况下抓到作弊者！如果您还不知道您服务器的性能，请运行服务端自带的评估工具来进行评估。如果您懒得费时间去搞什么评估，那么在运行我的世界服务器的TPS应该超过19.5TPS关于有关减少延迟的技巧请在MCBBS中自行搜索方法。\n怎么运行评估工具？1-在后台服务端中输入指令/timings on2-至少等待5分钟，推荐15分钟。3-运行命令/timings paste4-将输出的url复制并粘贴到浏览器中。5-在评估页面的上方找到平均TPS(Average TPS):##.#如果您的平均TPS显示19.5或者更低，我建议您考虑花一些时间在实施本指南之前先去调查一下TPS下降的原因，优化的方法可以在论坛中找到！\n\n我应该怎么做>对于可能因为Ping/TPS而导致错误或者意外的让AAC检测每个玩家，我们可以制作基于性能方面的违规等级。玩家在被检测阶梯的时候只有在达到阈值时并且条件有效时才会触发惩罚命令。\n>下面例子是在玩家被检测阶梯时显示的违规等级3(默认踢出是12)，但是玩家在小于91ms的ping和服务器性能为19.95TPS(完美的环境)就被踢出了。如果不满足任何一个条件的话则会跳过惩罚命令，而玩家将会保持自身的违规级别，并且没有人（除了AAC日志）知道这期间发生了什么事情。这个违规等级主要用来检测那些没有那么多违规行为的玩家们，还忽略掉了那些由于高Ping战士或者服务器性能下降被其他人认作使用外挂的人。thresholds（阈值）:\n3: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} FastBow Hack! Turn off hacks to avoid ban!\"\n7: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} FastBow Hack! Turn off hacks to avoid ban!\"\n12: \"aackick {player} FastBow Hack! Turn off hacks to avoid ban!\"\n复制代码概念证明:Typical AAC Verbose Log\n[07-01-2016 17:21:20.145] PlayerX failed Knockback: didn't move away from his attacker when hit [ping:470 tps:20.0] VL:6\n[07-01-2016 17:25:21.785] PlayerX failed Knockback: didn't move away from his attacker when hit [ping:694 tps:19.9] VL:7\n[07-01-2016 17:25:46.339] PlayerX failed Knockback: didn't move away from his attacker when hit [ping:720 tps:20.0] VL:9\n[07-01-2016 17:25:53.140] PlayerX failed Knockback: didn't move away from his attacker when hit [ping:735 tps:20.0] VL:10\n[07-01-2016 17:25:53.640] (Punisher) ->combat.Knockback: Dispatching command ccmd PlayerX if -ping-<91&-tps->19.5 do aackick PlayerX KnockBack Hack! Turn off hacks before ban!复制代码由于条件命令看到了玩家的高Ping值因此定义为不满足条件，所以kick指令并没有被应用在这个玩家的身上！\n\n为什么检查条件？>我在中国有一台服务器，理论上来讲中国的非作弊者玩家几乎没有任何的借口来引发超过一次的侥幸检测(参考上述证明)[可能是异常宽带问题]。这些玩家不需要过多的缓冲区来达到惩罚的阈值！\n>相反，荷兰，美洲，澳大利亚（等）玩家们通常会在200ms+的情况下玩，这些玩家需要更多的缓冲区(由AAC默认配置值表示)。\n栗子:我有个在玩家在美国(不就是我玩我的服务器的情况吗...)，在任何情况下玩都会有400-800的延迟！因此这些人每隔几分钟就会对我的AAC日志进行5-10次的随机检测，并且当他们达到600以上的延迟可以达到60%的踢出率。但是如果我们只是放弃了阈值，在不检查的条件下，AAC基本上会拒绝任何除了中国以外或者是那些延迟高的内地玩家们的服务器访问(长城宽带:2333看我干什么)\n默认的AAC配置>AAC的默认配置被设置为一个服务器假设有最差的游戏环境(外挂满天飞)，并且适应这种可怕的游戏环境的检测条件。比如这服人均500ms+的延迟和服务器长期维持13TPS(AIPC开服？)。默认的惩罚阈值被人为提高，以避免意外的把不是挂的玩家封禁。\n\n默认配置的优点 - (1)可以防止意外T出(\"实验性\"检查例外)默认配置的缺点 - (1)作弊者在被T出之前可能会有更多的时间搞你的服务器                            (2)AAC可能无法检测到他们，除非他们演都不演，极其奔放一段时间。                            (3)作弊者可能会轻易的使用一些作弊来控制在AAC的阈值内（虽然不太可能，但是还真不好说...）\n优化设置指南阈值阶梯:>阈值阶梯可以由TPS下降或者客户端延迟来引起的作弊者检测。阈值将会根据每个检测对性能相关的问题和容忍度或者计算错误检测的可能性而变化。您应该来慢慢的降低这些检测容差度，直到调整到每个检测的最佳值。不要只是把每个检测的值设置为默认的四分之一，别这么懒嘛.....\n-第一踢出阈值，但是要求玩家有大于91ms的延迟和服务器至少有19.5的TPS值-第二踢出阈值，但是要求玩家拥有大于250ms的延迟(或者200ms)和服务器至少有19.5的TPS值-最终踢出阈值是AAC默认的启动阈值，它没有条件，并且是把高ping战士和开了延迟欺骗的作弊者“全部抓获”。考虑对此阈值提出的15TPS要求和略微提高的踢出阈值，来增加对那些高ping战士的进一步容忍度。\n>请参考此指南中的下一个标题，阈值阶梯的设置。\n>如果您对较低的踢出阈值过于怀疑，请使用\"aacstaffnotify\"指令来代替\"aackick\"指令几天，直到你对每个踢出阈值都感觉合理后再换回来。8: \"ccmd {player} if -ping-<91&-tps->19.5 do aacstaffnotify {player} tripped first conditional threshold and would have been kicked! Maybe a hacker.\"复制代码\n\n其他检测:>由于之后而不会意外踢出的检测直到阶梯值消失\n-Headroll | Critical | Nucker\n    -通过设计可以在技术上安全地进行1-2次检测，但是只需要保持默认就行了。\n         -作者说:过大的滞后会导致单一的警报\n\n\nCelebrimbor的建议:-假如你的服务器可以很长时间保持在20TPS，那么你就可以把限制条件的19.5TPS往上增加。反正99%的判定条件都在客户端上，为何不增加呢？反正我把这东西设置成了19.7TPS。\n注意:不要因为您的服务器配置低就降低或者删除TPS的检测要求。否则你将会放弃本指南的全部目的然后开始在你的服务器里使用AAC踢出一个个无辜可怜的玩家们。\n-节省你的CPU使用率！关闭任何你认为不需要的AAC检测，栗子:如果你的服务器是100%PVP服务器则不需要使用AAC来检测FastBreak,FastPlace,Nuker,Jesus等..\n-与Orebfuscator和AAC搭配！因为AAC并不能检测到X-ray作弊，Orebfuscator是目前比较好的，免费的防x-ray插件！\n-购买AACaddition Pro （暂未搬运）!这种经济实惠且独立支持的AAC添加了更多的检测，包括那些更改背包物品的作弊者。\n-这是大多数服务器类型的通用信息指南。有关更高程度的自定义设置或者当前建议的设置阈值或者定制的AAC配置请参阅AAC定制服务。\n\n\n阈值阶梯的设置下面是一些示例的阈值梯形图。使用这些作为默认复制到每一个AAC作弊者检测中的\"violations to command\"部分，并根据您的经验进行设置。下面的是通用示例\\未经测试的阈值设置，这些设置可能随着AAC的更新而过期，使用风险自负！提前备份！\n如果需要为您的服务器优化\\定制AAC的配置文件，AAC定制服务了解一下（不知道作者管不管国内的服务器233）\nANGLE\n      7: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} Impossible angles in attacks\"\n      9: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} Impossible angles in attacks\"\n      12: \"aackick {player} Impossible angles in attacks\"\n\nFASTBOW\n      6: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} Shooting arrows too quickly\"\n      9: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} Shooting arrows too quickly\"\n      12: \"aackick {player} Shooting arrows too quickly\"\n\nFLY\n      14: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} Moved unexpectedly\"\n      24: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} Moved unexpectedly\"\n      30: \"aackick {player} Moved unexpectedly\"\n\nSPEED\n      30: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} Moved too quickly\"\n      40: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} Moved too quickly\"\n      55: \"aackick {player} Moved too quickly\"\n\nFORCEFIELD\n      8: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} Forcefield detected\"\n      11: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} Forcefield detected\"\n      14: \"aackick {player} Forcefield detected\"\n\nKNOCKBACK\n      8: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} Not taking knockback\"\n      10: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} Not taking knockback\"\n      16: \"aackick {player} Not taking knockback\"\n\nREACH\n      12: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} Hitting too far away\"\n      19: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} Hitting too far away\"\n      28: \"aackick {player} Hitting too far away\"\n\nNOSWING\n      10: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} Not swinging arm\"\n      16: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} Not swinging arm\"\n      22: \"aackick {player} Not swinging arm\"\n\nFASTUSE\n      4: \"ccmd {player} if -ping-<91&-tps->19.5 do aackick {player} Using items too quickly\"\n      7: \"ccmd {player} if -ping-<250&-tps->19.5 do aackick {player} Using items too quickly\"\n      9: \"aackick {player} Using items too quickly\"复制代码\n常见问题这是常见的问题与解答，常见问题解答将包括95%的问题。问:为什么一直出现误踢！？\n答:及时了解每个AAC的更新，并确保在每个AAC版本中检查配置更新！如果你只更新插件不更新配置就会出现报错！答2：如果你是用的是最新的AAC,你应该去看一下AAC日志为什么他们被踢。你是否在AAC默认值下修改了踢出阈值？并不是所有的检测都应该通过延迟来降低几率。由于特定检测的敏感性问题，一些AAC检测值会很高，试着将AAC重置至默认配置并在问题跟踪器上报告您的问题。答3:如果你觉得反复试验数值实在是太无聊了来试试AAC配置服务吧2333\n问:你能把你的配置文件发给我直接用吗...答:我并没有发布过完整配置，因为我的AAC非常适合我自己的服务器，因为我已经专门对我的服务器特别配置了，AAC的配置文件每周更改2-3次。如果你想要一个为你服务器定制的AAC配置文件请了解AAC配置服务(x4)\n问:AAC拦不住开挂的啊！你是不是发了个烂的AAC!???答:1)检查你的AAC日志文件来查看阈值和作弊行为2)检查后台是不是有AAC报错3)那些作弊者是否还不满足你所设置的惩罚条件？4)你是不是压根没安装条件命令资源(ConditionalCommands插件)？？？\n\n帮助指南到这里就结束了，如果帮到了你就给个人气和金粒吧！这东西很累的！QWQ如果其中有翻译错误请在下方评论提出，我会尽快做出修改！Thanks!\n\n\n[groupid=1330]PluginsCDTribe[/groupid]",
    "replies": [
        {
            "author": "absc123",
            "timestamp": 1555123140,
            "txt_content": "Celebrimbor的建议第一行的FTP写错了，应为TPS。而且第一段读起来有点不通顺，我重新修改了一下。\n以下为修改内容：\n假如你的服务器可以保持很长时间的20tps，那么你就可以把限制条件的19.5tps往上增加。反正99%的判定条件都在客户端上，为何不增加呢？反正我把这东西设置成了19.7tps。"
        },
        {
            "author": "蓝色的羽月",
            "timestamp": 1555178040,
            "txt_content": "absc123 发表于 2019-4-12 21:39\nCelebrimbor的建议第一行的FTP写错了，应为TPS。而且第一段读起来有点不通顺，我重新修改了一下。\n以下为修 ...\n老用FTP传东西所以一不小心又写成FTP了2333第一段已修改~"
        },
        {
            "author": "PiのPiのliang",
            "timestamp": 1555997100,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "卓小通",
            "timestamp": 1556976000,
            "txt_content": "AAC日志里面  tps最低的是19.97   我是不是可以直接设置成20"
        },
        {
            "author": "OUTPUT",
            "timestamp": 1609734900,
            "txt_content": "我只是一个普通的玩家看到这个东西我突然发现解决作弊玩家还是有点难度呢啊"
        }
    ]
}