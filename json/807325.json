{
    "title": "急救！服务端崩溃 一天崩个二十次",
    "author": "3222577979",
    "replyCount": 13,
    "timestamp": 1532001960,
    "txt_content": " 本帖最后由 3222577979 于 2018-7-19 23:47 编辑 \n\n服务器一共10个子服\n每个子服一天崩个10次\n我拿一台2695V3 128G DDR4的独立机开\n服务端崩溃的情况有三种\n第一种直接未响应，控制台看到的情况是直接卡住三分钟前不输出任何信息了，也无法输入任何指令 CPU直接跑满100%\n第二种一直在刷hashmap什么的，然后刷了一分钟服务器就崩了 CPU照样跑100%\n第三种直接蹦的明明白白，然后自动重启，生成cashreport 崩的时候CPU照样100%\n\n\n下图是其中一个端用jvisualvm监测的信息\n\n附件是抽取一个蹦服比较严重的log 还有一个小子服蹦服的 cash report\n求求你们救救服务器吧 他还只是一个孩子\n\n\n\n报错.rar\n(90 KB, 下载次数: 13)\n\n\n\n2018-7-19 20:06 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "sakurakaori",
            "timestamp": 1532002740,
            "txt_content": "我没搞过子服，所以不懂跨服...但是吧，有一种情况是服务器没问题，没有崩，但是你在控制台输入什么指令都没用，/gc都没用，是你线程的问题。不知道独立机是你自己的机器还是租的别人的，但是如果真的128G的DDR4，应该不至于总是cpu100%，可以把你的mod和插件贴出来，也许会有大佬看出其中玄机~"
        },
        {
            "author": "nikissXI",
            "timestamp": 1532004360,
            "txt_content": "是不是有一个报错一直在刷导致卡服"
        },
        {
            "author": "南瓜.",
            "timestamp": 1532014380,
            "txt_content": "你world世界，区块是不是出问题了，是不是有玩家一上服就蹦？"
        },
        {
            "author": "3222577979",
            "timestamp": 1532014920,
            "txt_content": "南瓜. 发表于 2018-7-19 23:33\n你world世界，区块是不是出问题了，是不是有玩家一上服就蹦？\n并不是玩家上来就崩 而是玩家玩了一会才崩"
        },
        {
            "author": "3222577979",
            "timestamp": 1532014920,
            "txt_content": "nikissXI 发表于 2018-7-19 20:46\n是不是有一个报错一直在刷导致卡服\n正常运行的时候并没有报错"
        },
        {
            "author": "3222577979",
            "timestamp": 1532014980,
            "txt_content": "sakurakaori 发表于 2018-7-19 20:19\n我没搞过子服，所以不懂跨服...但是吧，有一种情况是服务器没问题，没有崩，但是你在控制台输入什么指令都 ...\n有10%的插件都是我写的 报告中包含了所有的插件"
        },
        {
            "author": "1255655119",
            "timestamp": 1532019600,
            "txt_content": "上面那几个大佬都在说什么，这个报错不是内存溢出么\n\n\n\n\nIMG_20180720_005816.jpg (223.85 KB, 下载次数: 0)\n\n下载附件\n\n2018-7-20 01:00 上传\n\n\n\n\n"
        },
        {
            "author": "3222577979",
            "timestamp": 1532020320,
            "txt_content": "1255655119 发表于 2018-7-20 01:00\n上面那几个大佬都在说什么，这个报错不是内存溢出么\n我知道是内存溢出 我也用jvisualvm分析了的\n但是我并不知道是什么导致的"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1532020800,
            "txt_content": "3222577979 发表于 2018-7-20 01:12\n我知道是内存溢出 我也用jvisualvm分析了的\n但是我并不知道是什么导致的\n估计是开服的.bat没写好导致的，不知道是哪个帖子把新人都误导了\n开服的参数里面\nXms最小的不要和Xmx最大的一样!可以填写1G或者2G\nXmx则各个服务器总和不要超过系统内存"
        },
        {
            "author": "3222577979",
            "timestamp": 1532039340,
            "txt_content": "shangenbo 发表于 2018-7-20 01:20\n估计是开服的.bat没写好导致的，不知道是哪个帖子把新人都误导了\n开服的参数里面\nXms最小的不要和Xmx最大 ...\n我开服bat都已经写成这样了\n加了很多参数了\n@echo OFF\n:restart\nset a=2\nset b=2\ntitle [苹果-赤壁]@ 当前最大内存%a%G最小内存%b%G 赤壁\ncolor 1c\necho 正在启动服务器...\nSET BINDIR=%~dp0\njava -Xms%b%G -Xmx%a%G -Dfml.ignorePatchDiscrepancies=true -XX:-UseGCOverheadLimit -XX:+UseG1GC -XX:+AggressiveOpts -XX:+UseCompressedOops -jar \"%BINDIR%\\paperclip-916.2.jar\"\necho 像素云提示：重启倒计时: 5 秒\nping -n 2 -w 500 0.0.0.1>nul\necho 像素云提示：重启倒计时: 4 秒\nping -n 2 -w 500 0.0.0.1>nul\necho 像素云提示：重启倒计时: 3 秒\nping -n 2 -w 500 0.0.0.1>nul\necho 像素云提示：重启倒计时: 2 秒\nping -n 2 -w 500 0.0.0.1>nul\necho 像素云提示：重启倒计时: 1 秒\nping -n 2 -w 500 0.0.0.1>nul\ngoto restart\n"
        },
        {
            "author": "ksqeib445",
            "timestamp": 1532053320,
            "txt_content": "你可以试试把b设置成128M或者大些，bc服务器不需要这么多内存"
        },
        {
            "author": "sakurakaori",
            "timestamp": 1532262540,
            "txt_content": "3222577979 发表于 2018-7-19 23:43\n有10%的插件都是我写的 报告中包含了所有的插件\n10%\n我敢说我汉化一个插件，字符也有10%....我都不敢说是我写了10%emmmm\n既然你说插件是你写的，你可以从研究你自己的10%出发，看看是不是自己写的10%出的问题~\n另外....我不知道你填了多少内存，但是你如果有128G内存，你分100G给java也不是不可以~\n我8G内存分了7.5G也ok~你先试试改内存吧"
        },
        {
            "author": "3222577979",
            "timestamp": 1532276760,
            "txt_content": "sakurakaori 发表于 2018-7-22 20:29\n10%\n我敢说我汉化一个插件，字符也有10%....我都不敢说是我写了10%emmmm\n既然你说插件是你写的， ...\n即使我分配了30G内存 也一样崩"
        }
    ]
}