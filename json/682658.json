{
    "title": "怎样才能在命令触发后，才监听事件啊？",
    "author": "JACV",
    "replyCount": 4,
    "timestamp": 1490447340,
    "txt_content": "我写的插件. 想在玩家输入完命令后，才获取玩家放置的东西.\n所以我就在命令那里判断完输入的命令之后，<插件>.getServer().getPluginManager().registerEvents(new <Class>, <插件>)\n注册好像没什么问题. 但是就是每次放方块的时候抛出个这个.\norg.bukkit.event.EventException\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:294) ~[craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at org.bukkit.plugin.RegisteredListener.callEvent(RegisteredListener.java:62) ~[craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at org.bukkit.plugin.SimplePluginManager.fireEvent(SimplePluginManager.java:501) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at org.bukkit.plugin.SimplePluginManager.callEvent(SimplePluginManager.java:486) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at org.bukkit.craftbukkit.v1_7_R4.event.CraftEventFactory.callBlockPlaceEvent(CraftEventFactory.java:147) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.ItemStack.placeItem(ItemStack.java:142) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.PlayerInteractManager.interact(PlayerInteractManager.java:390) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.PlayerConnection.a(PlayerConnection.java:630) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.PacketPlayInBlockPlace.a(SourceFile:60) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.PacketPlayInBlockPlace.handle(SourceFile:9) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.NetworkManager.a(NetworkManager.java:157) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.ServerConnection.c(SourceFile:134) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.MinecraftServer.v(MinecraftServer.java:667) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.DedicatedServer.v(DedicatedServer.java:258) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.MinecraftServer.u(MinecraftServer.java:558) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.MinecraftServer.run(MinecraftServer.java:469) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        at net.minecraft.server.v1_7_R4.ThreadServerApplication.run(SourceFile:628) [craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\nCaused by: java.lang.NullPointerException\n        at io.github.jacv.comforablelife.EventHandlers.CreateEvent.Logging(CreateEvent.java:56) ~[?:?]\n        at io.github.jacv.comforablelife.EventHandlers.CreateEvent.CreateEvent(CreateEvent.java:40) ~[?:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_121]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_121]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:1.8.0_121]\n        at java.lang.reflect.Method.invoke(Unknown Source) ~[?:1.8.0_121]\n        at org.bukkit.plugin.java.JavaPluginLoader$1.execute(JavaPluginLoader.java:292) ~[craftbukkit-1.7.10.jar:git-Bukkit-1.7.9-R0.2-20-g0b2ed13-b3108jnks]\n        ... 16 more\n\n\n那个NullPointerException不知道怎么处理啊. 不写在插件的代码里面取出来. 也就是File file = new file(...) if (!(file.exsit())){ file.createNewFile()); } 的时候根本没问题. 但是一写进插件里面就NullPointerException. 我看别人IO也是这么写的. 为啥我这就抛这个. 我觉得可能是后面这个EventException造成的. 问题是不知道哪里出了问题...",
    "replies": [
        {
            "author": "JACV",
            "timestamp": 1490447580,
            "txt_content": " 本帖最后由 JACV 于 2017-3-25 21:15 编辑 \npublic class CreateEvent implements Listener\n{\n    public static Player player;\n    private HandlerList Handlers = new HandlerList();\n    private static FocusedSign Interface;\n\n    //public static String sep = File.separator;\n    //public static File file = new File(Interface.getDataFolder().toString() + sep + \"Data\");\n\n    @EventHandler\n    public void CreateEvent(BlockPlaceEvent event) throws IOException\n    {\n        Player player = event.getPlayer();\n        //if (player == this.player)\n      //  {\n            Block block = event.getBlockPlaced();\n            ItemStack item = event.getItemInHand();\n            Material material = item.getType();\n            if (material == Material.SIGN)\n            {\n                Location location = block.getLocation();\n                double X = location.getX();\n                double Y = location.getY();\n                double Z = location.getZ();\n                World world = location.getWorld();\n\n                this.Logging(location, X, Y, Z, world);\n\n                player.sendMessage(\"\");\n                Handlers.unregister(this);\n            }\n            else\n            {\n                player.sendMessage(\"I'm sorry. But what you have put is not a SIGN!\");\n                Handlers.unregister(this);\n            }\n       // }\n    }\n\n    private void Logging(Location location, double X, double Y, double Z, World world) throws IOException\n    {\n            String sep = File.separator;\n            File file = new File(Interface.getDataFolder(), \"Data\");\n            BufferedWriter Out = new BufferedWriter(new FileWriter(file, true));\n            BufferedReader In = new BufferedReader(new FileReader(file));\n            String unit;\n            int Index = 1;\n            while ((unit = In.readLine()) != null)\n            {\n                Index++;\n            }\n            In.close();\n            Out.write(Index + \" \" + world + \" \" + X + \" \" + \" \" + Y + \" \" + Z);\n            Out.newLine();\n            Out.close();\n\n\n    }\n\n}复制代码"
        },
        {
            "author": "JACV",
            "timestamp": 1490447760,
            "txt_content": "就是上面这个，看了2小时了都没法解决...就是把玩家放置牌子的位置记录到文件里.不知道哪里有问题..."
        },
        {
            "author": "a8105",
            "timestamp": 1490452860,
            "txt_content": " 本帖最后由 810587921 于 2017-3-25 22:43 编辑 \n\n因为你Interface变量是空的,此外,学会看报错相关的代码行数:\nCaused by: java.lang.NullPointerException\n        at io.github.jacv.comforablelife.EventHandlers.CreateEvent.Logging(CreateEvent.java:56) ~[?:?]\n        at io.github.jacv.comforablelife.EventHandlers.CreateEvent.CreateEvent(CreateEvent.java:40) ~[?:?]红色类名,粗体黑色字为源代码行数\n顺序为从下到上调用"
        },
        {
            "author": "JACV",
            "timestamp": 1490494440,
            "txt_content": "810587921 发表于 2017-3-25 22:41\n因为你Interface变量是空的,此外,学会看报错相关的代码行数:\nCaused by: java.lang.NullPointerException\n  ...\n_(:з」∠)_对哟忘记传了，先感谢，我去试试_(:з」∠)_"
        }
    ]
}