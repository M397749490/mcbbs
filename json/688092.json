{
    "title": "PlaceHolderAPI 如何创建属于自己的变量",
    "author": "Allen-zhang",
    "replyCount": 2,
    "timestamp": 1492853520,
    "txt_content": " 本帖最后由 Allen-zhang 于 2017-4-23 08:37 编辑 \n\n前言:\n\n我们服务器自己写了一套Coins系统\n并且写出来了API\n但是我们无法做到把Coins输出到DeluxeMenu上\n正当我们一筹莫展之际\n我看到了一个教程链接是关于PlaceHolderAPI如何写扩展的\n当时我想到了杜蕾斯是支持Papi的\n于是我就想写一个扩展\n经历过2次失败\n我成功了\n所以我想给大家写这个教程\n\n\n\n教程部分\n\n首先我们打开Eclipse (废话)\n新建一个Java项目\n然后导入PlaceHolderAPI(不要问我这个API在哪里下载)\n导入的图片应该是这个样子的: \n然后创建Plugin.yml\n格式是这样子的\n\n\nname:xxx\nmain:你的包名.你的主类名字\nauthor: allen_zhang (滑稽)\ndepends: [PlaceHolderAPI,你要自己写扩展插件的名称]\n\n\n(在这里给大家提醒一下一个菜鸟问题,当初我是菜鸟的时候(现在依然是)我经常对着Java项目右键新建Plugin.yml,但经历\n了非常恶俗的洗礼之后,我才发现是对着src(默认包)右键)\n\n\n然后我们对着src右键,新建一个包\n注意: 包名必须为me.clip.* 否则PaPi不会读取(反正我就是这样的)\n在包里新建一个Java类,我们把它称为Main.java\n\n\n进入Main.java首先输入\n你该输入的(不要问我什么是你该输入的,就是package 和import)\n除了Bukkit的import以外,我们还要输入以下东西\nimport me.clip.placeholderapi.expansion.PlaceholderExpansion;\nimport 你的插件API所在地，我的是 io.karfunction.karcoins.coins.VaultAPI (你可能会猜到这是什么服务器了)\n\n\n然后输入以下代码\n\n\npublic class Main(你的主类名字,就是我刚才举得例子Main.java)\n//继承作者的恶俗思想\nextends PlaceholderExpansion\n{\npublic boolean canRegister()\n//不要问我这个地方是干什么的,因为一般问的都是新手(不过每个人都是从新手过来的嘛)\n{\n  return Bukkit.getPluginManager().getPlugin(getPlugin()) != null;\n}\n//这个恶俗地方你想删就删没什么大不了的\npublic String getAuthor()\n{\n  return \"allen_zhang\"\n}\n\n\n//这个地方不能删,它是整个变量的前缀.例如我们设置了前缀为KarAPI.则他的变量为%KarAPI_我们设置的变量%\npublic String getIdentifier()\n{\n  return \"KarAPI\"\n}\n\n\n//这个也不能删,是你的插件的名字,区分大小写,不然会恶俗.如果服务器没有这个插件更会恶俗(废话)\npublic String getPlugin()\n{\n  return \"KarVaultAPI\"\n}\n\n\n//这个地方随意,我没删过,不知道删了会怎么样,请各位老爷们试一下\npublic String getVersion()\n{\n  return \"1.0.0\" //这个1.0.0随意,你改成999999都行\n}\n\n\npublic String onPlaceholderRequest(Player p, String identifier)\n{\n //这个东西是玩家不在线的时候的代码\n  if (p == null) {\n    return \"\";\n  }\n  //这个Credits就是变量的后缀,百分号+前缀_后缀+百分号 就是这个变量\n  //这里的变量为%KarAPI_karma%\n    if (identifier.equals(\"karma\")) {\n    return \"\"+VaultAPI.getKarma(p.getName()); //这个是我们自己的API,请对号入座\n    }\n  //这个Coins就是变量的后缀,百分号+前缀_后缀+百分号 就是这个变量\n  //这里的变量为%KarAPI_coins%\n    if (identifier.equals(\"coins\")) {\n    return \"\"+VaultAPI.getCoins(p.getName());  //这个是我们自己的API,请对号入座\n    }\n  //这里的变量为%KarAPI_credits%\n //这个Credits就是变量的后缀,百分号+前缀_后缀+百分号 就是这个变量\n    if (identifier.equals(\"credits\")) {\n    return \"\"+VaultAPI.getCredit(p.getName()); //这个是我们自己的API,请对号入座\n    }\n  return null;\n}\n}\n\n\n\n如果都这个份上了还是不会那就套我帖子里的把,自己替换自己的API与变量\n我只能帮你们到这个份上了\n讲解完毕我现在发出一个模板成品\n\npackage me.clip.placeholder.coins;\n\nimport me.clip.placeholderapi.expansion.PlaceholderExpansion;\nimport org.bukkit.Bukkit;\nimport org.bukkit.entity.Player;\n\nimport io.karfunction.karcoins.coins.VaultAPI;\n\npublic class Main\nextends PlaceholderExpansion\n{\npublic boolean canRegister()\n{\n  return Bukkit.getPluginManager().getPlugin(getPlugin()) != null;\n}\n\npublic String getAuthor()\n{\n  return \"allen_zhang\";\n}\n\npublic String getIdentifier()\n{\n  return \"KarAPI\";\n}\n\npublic String getPlugin()\n{\n  return \"KarCoins\";\n}\n\npublic String getVersion()\n{\n  return \"1.0.0\";\n}\n\npublic String onPlaceholderRequest(Player p, String identifier)\n{\n  if (p == null) {\n    return \"\";\n    }\n\n    if (identifier.equals(\"karma\")) {\n    return \"\"+VaultAPI.getKarma(p.getName()); \n    }\n\n    if (identifier.equals(\"coins\")) {\n    return \"\"+VaultAPI.getCoins(p.getName()); \n    }\n\n    if (identifier.equals(\"credits\")) {\n    return \"\"+VaultAPI.getCredit(p.getName());\n    }\n  return null;\n}\n}\n\n\n最后祝大家都能写出好的PlaceHolder!顺便给我几个人气和金粒呗\n#Support By KarStudio\n\n当前长度: 6381 字节，系统限制: 10 到 1000000 字节\n",
    "replies": [
        {
            "author": "Karmun_",
            "timestamp": 1492861440,
            "txt_content": "666 老张稳！ (话说你一边吐槽一边写)\n在结尾加上一个Support By KarStudio\npls"
        },
        {
            "author": "1305791312",
            "timestamp": 1557342420,
            "txt_content": "6666666666666666666666666666"
        }
    ]
}