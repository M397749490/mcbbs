{
    "title": "[原创][API][数据库] DbLibX —— 基于协程的高效数据库依赖[全版本]",
    "author": "wujipohh",
    "replyCount": 5,
    "timestamp": 1581855900,
    "txt_content": " 本帖最后由 PQguanfang 于 2020-2-16 20:31 编辑 \n\nDbLibX\b通过 Kotlin Coroutine 自动异步操作数据库. 再也不用担心主线程卡死了基于阿里巴巴的 Druid 连接池简洁易操作的 API 接口主要接口：\ncreateAction<R>(sql: kotlin.String, vararg args: kotlin.Any,\n   noinline action: suspend (java.sql.PreparedStatement) -> R)复制代码示例 1：\nval insertAction = \n    createAction<Int>( // Kotlin 可以推断范型类型 此处 Int 可以省略\n            \"INSERT INTO wacban (player, violationId, violationDuration, \n            violationType, checkType, time, extra)\n            VALUES (?, ?, ?, ? ,? ,?, ?)\", // SQL语句\n            player, // 参数 1\n            violationData.violationId, // 参数 2\n            violationData.violationDuration, // 参数...\n            violationData.violationType.toString(),\n            violationData.getCheckType().getName(),\n            violationData.time,\n            violationData.extra) {\n                it.executeUpdate() // 要执行的操作\n            }\n    insertAction.doAction() //返回操作状态复制代码\n\n示例 2：\nval cacheHelperDataAction = \n    createAction(\"select * from wachelper\") { // 构造数据库操作\n        val rs = it.executeQuery() // 执行query\n        val result = ArrayList<String>()\n        while (rs.next()) result.add(rs.getString(\"player\")) // 获取数据\n        result // 闭包返回\n    }\n    cacheBanDataAction.doAction() //执行操作并获取结果复制代码\n\n\n",
    "replies": [
        {
            "author": "Radotar",
            "timestamp": 1582072200,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "kixp",
            "timestamp": 1583757960,
            "txt_content": "PE 1.5装不了啊"
        },
        {
            "author": "yang007",
            "timestamp": 1583952720,
            "txt_content": "直接扔到服务器就行了吗，不需要指令开启？   只会对服务器有好处吧"
        },
        {
            "author": "wujipohh",
            "timestamp": 1583983200,
            "txt_content": "yang007 发表于 2020-3-12 02:52\n直接扔到服务器就行了吗，不需要指令开启？   只会对服务器有好处吧\n需要其他插件调用才有用, 这是一个依赖"
        },
        {
            "author": "1186019009",
            "timestamp": 1584014820,
            "txt_content": "结果数据可以封装吗？"
        }
    ]
}