{
    "title": "MOD服TPS很低，请帮我看下这个如何解决 timings",
    "author": "人称老秀",
    "replyCount": 15,
    "timestamp": 1583832840,
    "txt_content": "\n\n\n\n\nQ`5(7%D5S6@@3W3P@X~NGJ3.png (61.87 KB, 下载次数: 0)\n\n下载附件\n\n2020-3-10 17:33 上传\n\n\n\n\n\nConnection Handler\n这个是什么，该如何结局，求解.\n",
    "replies": [
        {
            "author": "DE_SHARK",
            "timestamp": 1583832840,
            "txt_content": "人称老秀 发表于 2020-3-10 20:08\n我的是1.7.10的MOD服，没有这个选项呀\n\n1.7.10我记得也有啊，配置文件里搜搜关键词network"
        },
        {
            "author": "结城希亚",
            "timestamp": 1583832900,
            "txt_content": "你地皮机器有点太多了，建议用这个插件限制一下\n[管理|机制]ChunkBlocksLimit —— 区域方块限制 可限制模组方块！[全版本]\nhttps://www.mcbbs.net/thread-882041-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n而且你玩家在生存一直跑图，可以尝试用这个插件填充完区块，这样跑图只消耗宽带\n[管理|安全] WorldBorder —— 世界边界★还在担心被跑图吗 【汉化】[全版本]\nhttps://www.mcbbs.net/thread-608265-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n\n通用优化方案：\n1、加装优化插件\n[SCT][优化][付费]LagAssist —— 不可直视的九合一优化插件[1.8-1.14]\nhttps://www.mcbbs.net/thread-881861-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n2、把服务端下spigot.yml文件里的视距view-distance数值改小，最好2-4\n3、把服务端下spigot.yml文件里的max-tick-time数值\n     可以适当减少（降低玩家体验提高tps）或者适当提高（降低tps提高玩家体验）\n4、参考站外一个比较详细的配置优化\nhttps://help.mcstory.net/Optimization.html\n\n\n"
        },
        {
            "author": "落花雨喵",
            "timestamp": 1583833080,
            "txt_content": "发下timgins链接"
        },
        {
            "author": "人称老秀",
            "timestamp": 1583833140,
            "txt_content": "落花雨喵 发表于 2020-3-10 17:38\n发下timgins链接\nhttps://www.spigotmc.org/go/timings?url=gudahuyusa"
        },
        {
            "author": "落花雨喵",
            "timestamp": 1583833440,
            "txt_content": "MOD机器太多, 1.7.10没法做太多优化\nspigot.yml的max-tick-time两个选项可以改小一些"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1583834700,
            "txt_content": " 本帖最后由 EmptyLava 于 2020-3-10 18:07 编辑 \n\n根本原因是cpu不行\n原因(2)\n1.Connection Handler事件 目前站内都没有对这个事件的优化方法\n2.方块实体和区块加载导致的\n优化方案(5)\n1.使用Laggremover,lagassist这种优化插件\n2.windows系统的话,在任务管理器中右键javaw.exe,转详细信息后右键javaw.exe将优先级改为实时,这可以增加cpu的占用率从而提升tps(但服务器重启后需要重新配置,建议配合计划任务)\n3.降低server.properties中的网络压缩阈值为64或48，另外你可以尝试使用一些网络优化插件来降低connection handler这个事件占用\n4.在spigot.yml中降低max-tick-time,可以降低机器等的占用，但是可能机器会运行变满\n5.server.properties中设置view-distance为3-4，另外我觉得这是正常的，不是跑图\n\n\n至于为何connection handler占用那么高，什么是connection handler:\n\n玩家交互的事件都叫connection handler，包括移动事件(玩家位置变化)，实体交互事件(剪羊毛，打怪)等等，这些事件占用高的原因是服务器玩家人太多了和cpu性能过低，timings中也指出 connection handler这个事件很难进行优化"
        },
        {
            "author": "人称老秀",
            "timestamp": 1583838300,
            "txt_content": "EmptyLava 发表于 2020-3-10 18:05\n根本原因是cpu不行\n原因(2)\n1.Connection Handler事件 目前站内都没有对这个事件的优化方法\nserver.properties中的网络压缩阈值是哪个。"
        },
        {
            "author": "EmptyLava",
            "timestamp": 1583838720,
            "txt_content": "人称老秀 发表于 2020-3-10 19:05\nserver.properties中的网络压缩阈值是哪个。\nnetwork-compression-threshold=256 \n修改为64或48\n这一条\n另外对于connection handler这个事件 大家都没有经验 都不能保证优化有效果 如果有效还望你回复我们"
        },
        {
            "author": "DE_SHARK",
            "timestamp": 1583838960,
            "txt_content": " 本帖最后由 DE_SHARK 于 2020-3-10 19:17 编辑 \n\n根本原因是：\n你这个配置根本不适合开mod服务器\n服务器人数不是很多吧，单单玩家连入服务器就占用了一堆资源\nConnection Handler是玩家连接上服务器的事件（即进入服务器）这个就占了39%，我还没见过这样的\n问一下你是什么服务器，版本多少，mod多少，在线人数多少，最重要的是你的vps是什么配置\n建议还是升级你的配置，一般来说，Connection Handler占用不会超过5%"
        },
        {
            "author": "人称老秀",
            "timestamp": 1583839620,
            "txt_content": "DE_SHARK 发表于 2020-3-10 19:16\n根本原因是：\n你这个配置根本不适合开mod服务器\n服务器人数不是很多吧，单单玩家连入服务器就占用了一堆资 ...\nI9 9900K超频自家的"
        },
        {
            "author": "DE_SHARK",
            "timestamp": 1583839860,
            "txt_content": "人称老秀 发表于 2020-3-10 19:27\nI9 9900K超频自家的\n\n那你把整个timings链接发出来\n你还没说mod有多少，玩家有多少，版本是多少。\n盲猜吗？还是算命？"
        },
        {
            "author": "人称老秀",
            "timestamp": 1583839920,
            "txt_content": "DE_SHARK 发表于 2020-3-10 19:31\n那你把整个timings链接发出来\n你还没说mod有多少，玩家有多少，版本是多少。\n盲猜吗？还是算命？ ...\nhttps://timings.spigotmc.org/?url=gudahuyusa"
        },
        {
            "author": "DE_SHARK",
            "timestamp": 1583841060,
            "txt_content": "人称老秀 发表于 2020-3-10 19:32\nhttps://timings.spigotmc.org/?url=gudahuyusa\n\n其他的看起来并没有什么问题，除了那个区块限制插件占用有点高\n关于 Connection Handler ，原文解释：\nConnection Handler (previously labeled Player Tick) is a wide wrapper of many things involving processing a players incoming data to the server. This value being high does not represent a bug itself in \"Connection Handler\", but usually will include timings data from plugins too.  If you are seeing high values here, it could mean you have more players online than your server can support. It is important to remember that Minecraft gets slower every version update, and while you may of been able to support this many players in the past, you might not be able to anymore.  If you are using the player-shuffle setting (has a value other than 0) then that can cause extra lag here, and you should ensure that setting is 0.  Look for other timings such as PlayerMoveEvent, PlayerInteractEvent, PlayerBlockBreakEvent and PlayerBlockPlaceEvent.  Those having high timings will also be counted in this event, but they will be the problem.  There is very little other than player-shuffle (and a future setting) to reduce Connection Handler alone. You must simply lower your player count and ensure no plugins are being slow in the events listed above. \n翻译是：\n连接处理程序（以前被标记为Player Tick）是一个很宽的包装器，它包含了许多处理Player传入服务器的数据的事情。这个值高并不代表“连接处理程序”中的bug本身，但通常也会包括来自插件的计时数据。   如果你在这里看到了很高的价值，这可能意味着你有更多的球员在线比你的服务器可以支持。重要的是要记住，Minecraft的每一个版本更新都会变慢，虽然你可能在过去能够支持这么多玩家，但你可能再也无法支持了。   如果您正在使用player shuffle设置（其值不是0），则会在此处造成额外的延迟，您应该确保该设置为0。   查找其他计时，如PlayerMoveEvent、PlayerInteractEvent、PlayerBlockBreakEvent和PlayerBlockPlaceEvent。   那些有很高的时间安排的人也会被计算在内，但他们将是问题所在。   除了player shuffle（和一个未来的设置）之外，几乎没有什么可以单独减少连接处理程序。你必须简单地降低你的玩家数量，并确保没有插件在上面列出的事件是缓慢的。\n你是自家机器开的服务器，网络不是挺好的吧？我还是头一次看见网络会影响tps\n打开你的server.properties，找到这个\nnetwork-compression-threshold\n设置为256试试（这个是默认值）\n\n\n"
        },
        {
            "author": "人称老秀",
            "timestamp": 1583842080,
            "txt_content": "DE_SHARK 发表于 2020-3-10 19:51\n其他的看起来并没有什么问题，除了那个区块限制插件占用有点高\n关于 Connection Handler ，原文解释：\n我的是1.7.10的MOD服，没有这个选项呀"
        },
        {
            "author": "人称老秀",
            "timestamp": 1583842260,
            "txt_content": "DE_SHARK 发表于 2020-3-10 19:51\n其他的看起来并没有什么问题，除了那个区块限制插件占用有点高\n关于 Connection Handler ，原文解释：\n主体是 工业 神秘 拔刀 植物 AE匠魂 热力\n\n"
        }
    ]
}