{
    "title": "[其他][开源][PCD]ChunkView —— 高自定义的区块查看器！[1.9+]",
    "author": "黑",
    "replyCount": 4,
    "timestamp": 1531932900,
    "txt_content": " 本帖最后由 583736449 于 2018-7-19 00:59 编辑 \n\nChunkView\n高自定义的区块查看器\n当前版本 1.0-SNAPSHOT\n\n功能\n\n本插件适用于派系生存，原创生存等需要占领土地的生存服务器。我之前用过几款占领土地的插件如 LandLord，MassiveFaction 等，在区块的显示上都很不如意。大多都是不能自定义的问题，有些客户端的材质甚至根本看不到。我两年前开过的一个生存服，在区块的显示上用的是站内的一款 ChunkFinder... 我不多说，自行下载尝试。\n\n本插件的粒子及显示坐标均可自定义\n你甚至可以自定义粒子显示在什么位置，以什么样的形式显示。\n\n命令\n\n命令作用权限/chunkview启用或禁用粒子无/chunkview reload重载配置*\n\n配置\n\n# 启用世界\nEnableWorld:\n- 'world'\n\n# 粒子类型\nParticleType: FLAME\n\n# 粒子效果\nParticleLine:\n- '0 0.2 0 0 5 6'\n- '0 0.2 0 0 5 5'\n- '0 0.2 0 0 5 4'\n- '0 0.2 0 0 5 3'\n- '0 0.2 0 0 5 2'\n- '0 0.2 0 0 5 1'\n- '0 0.2 0 0 5 0'\n- '0 0.2 0 0 5 -1'\n- '0 0.2 0 0 5 -2'\n\n# 粒子范围\nParticleRange:\n- '# 0 # 0 # # 0 # # 0 # # 0 # 0 #'\n- '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0'\n- '# 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #'\n- '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0'\n- '# 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #'\n- '# 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #'\n- '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0'\n- '# 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #'\n- '# 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #'\n- '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0'\n- '# 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #'\n- '# 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #'\n- '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0'\n- '# 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #'\n- '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0'\n- '# 0 # 0 # # 0 # # 0 # # 0 # 0 #'复制代码\n截图\n\n\n\n下载\n\n本插件需要 TabooLib 才可运行， 下载地址见个人签名档\n配置文件比较飘逸，具体意义稍后更新，突然懒惰...\n\n\n\n\nChunkView.jar\n(6.04 KB, 下载次数: 16)\n\n\n\n2018-7-19 00:50 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n开源\n\npackage me.skymc.chunkview;\n\nimport com.ilummc.tlib.resources.TLocale;\nimport me.skymc.taboolib.entity.EntityTag;\nimport me.skymc.taboolib.fileutils.ConfigUtils;\nimport me.skymc.taboolib.particle.EffLib;\nimport org.bukkit.Bukkit;\nimport org.bukkit.block.Block;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.command.ConsoleCommandSender;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.entity.Entity;\nimport org.bukkit.entity.Player;\nimport org.bukkit.plugin.java.JavaPlugin;\nimport org.bukkit.scheduler.BukkitRunnable;\nimport org.bukkit.util.NumberConversions;\n\nimport java.util.List;\n\n/**\n * @author sky\n * @Since 2018-07-18 11:06\n */\npublic class ChunkView extends JavaPlugin {\n\n    private FileConfiguration conf;\n    private EffLib particleType;\n    private Boolean[][] particleRange;\n    private ParticleLine[] particleLine;\n    private BukkitRunnable displayRunnable = new BukkitRunnable() {\n        @Override\n        public void run() {\n            List<String> enableWorld = conf.getStringList(\"EnableWorld\");\n            Bukkit.getOnlinePlayers().stream().filter(player -> enableWorld.contains(player.getWorld().getName()) && EntityTag.getInst().getBoolean(\"chunkView\", player)).forEach(player -> displayPlayerChunk(player));\n        }\n    };\n\n    @Override\n    public void onEnable() {\n        reloadConfig();\n        displayRunnable.runTaskTimerAsynchronously(this, 0, conf.getInt(\"ParticleDelay\", 10));\n    }\n\n    @Override\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n        if (sender instanceof ConsoleCommandSender) {\n            sender.sendMessage(\"this command disabled on console.\");\n            return false;\n        }\n        if (args.length == 0) {\n            if (EntityTag.getInst().getBoolean(\"chunkView\", (Entity) sender)) {\n                TLocale.sendTo(\"view-disable\", sender);\n                EntityTag.getInst().set(\"chunkView\", false, (Entity) sender);\n            } else {\n                TLocale.sendTo(\"view-enable\", sender);\n                EntityTag.getInst().set(\"chunkView\", true, (Entity) sender);\n            }\n        } else if (sender.hasPermission(\"*\")) {\n            reloadConfig();\n            sender.sendMessage(\"reload successfully.\");\n        }\n        return true;\n    }\n\n    @Override\n    public void reloadConfig() {\n        conf = ConfigUtils.saveDefaultConfig(this, \"config.yml\");\n        List<String> particleLine = conf.getStringList(\"ParticleLine\");\n        this.particleLine = new ParticleLine[particleLine.size()];\n        for (int i = 0; i < particleLine.size(); i++) {\n            String[] split = particleLine.get(i).split(\" \");\n            this.particleLine[i] = new ParticleLine(\n                    NumberConversions.toFloat(split[0]),\n                    NumberConversions.toFloat(split[1]),\n                    NumberConversions.toFloat(split[2]),\n                    NumberConversions.toInt(split[3]),\n                    NumberConversions.toInt(split[4]),\n                    NumberConversions.toDouble(split[5]));\n        }\n        List<String> particleRange = conf.getStringList(\"ParticleRange\");\n        this.particleRange = new Boolean[16][];\n        for (int i = 0; i < particleRange.size(); i++) {\n            String[] split = particleRange.get(i).split(\" \");\n            Boolean[] range = new Boolean[16];\n            for (int j = 0; j < 16; j++) {\n                range[j] = split[j].equals(\"#\");\n            }\n            this.particleRange[i] = range;\n        }\n        particleType = EffLib.fromName(conf.getString(\"ParticleType\", \"CLOUD\"));\n    }\n\n    public void displayPlayerChunk(Player player) {\n        Block blockStart = player.getLocation().getChunk().getBlock(16, player.getLocation().getBlockY(), 0);\n        for (int x = 0; x < 16; x++) {\n            for (int z = 0; z < 16; z++) {\n                if (particleRange[x][z]) {\n                    Block block = blockStart.getLocation().add(x, 0, z).getBlock();\n                    for (ParticleLine particle : particleLine) {\n                        particleType.display(particle.getOffsetX(), particle.getOffsetY(), particle.getOffsetZ(), particle.getSpeed(), particle.getAmount(), block.getLocation().add(0.5, particle.getOffsetLocation(), 0.5), player);\n                    }\n                }\n            }\n        }\n    }\n\n    class ParticleLine {\n\n        private float offsetX;\n        private float offsetY;\n        private float offsetZ;\n        private int speed;\n        private int amount;\n        private double offsetLocation;\n\n        public ParticleLine(float offsetX, float offsetY, float offsetZ, int speed, int amount, double offsetLocation) {\n            this.offsetX = offsetX;\n            this.offsetY = offsetY;\n            this.offsetZ = offsetZ;\n            this.speed = speed;\n            this.amount = amount;\n            this.offsetLocation = offsetLocation;\n        }\n\n        public float getOffsetX() {\n            return offsetX;\n        }\n\n        public float getOffsetY() {\n            return offsetY;\n        }\n\n        public float getOffsetZ() {\n            return offsetZ;\n        }\n\n        public int getSpeed() {\n            return speed;\n        }\n\n        public int getAmount() {\n            return amount;\n        }\n\n        public double getOffsetLocation() {\n            return offsetLocation;\n        }\n    }\n}复制代码\n插件代码全部原创不存在抄袭/借鉴\n[groupid=1330]PluginsCDTribe[/groupid]",
    "replies": [
        {
            "author": "阿赆丶",
            "timestamp": 1531938000,
            "txt_content": "沙发，支持原创~"
        },
        {
            "author": "ゞ側灬脸〆",
            "timestamp": 1531960320,
            "txt_content": "支持原创 很有逼格"
        },
        {
            "author": "Gyzer",
            "timestamp": 1531969920,
            "txt_content": "很强。支持原创！"
        },
        {
            "author": "a1273374936",
            "timestamp": 1582429860,
            "txt_content": " 挺不错的插件，支持作者 希望能有更棒的作品"
        }
    ]
}