{
    "title": "[已解决] python通过switch跳转程序终止",
    "author": "雨韵",
    "replyCount": 1,
    "timestamp": 1584286200,
    "txt_content": " 本帖最后由 雨韵 于 2020-3-16 09:13 编辑 \n\n我在写一个判断用户掉线重登的脚本，语言Py3.7，\n其中一部分是通过字典映射达到switch跳转的目的，原代码如下：\n\nswitch = {\n    'run': run,\n    'ChangePassword': ChangePassword,\n    'CoverEnterImg': CoverEnterImg,\n    'CoverGameIme': CoverGameIme,\n    'ChangeTallButton': ChangeTalkButton,\n    'AddGameVersion': AddGameVersion,\n    'RemoveGameVersion': RemoveGameVersion,\n    'getColor': getColor\n}  # 注册可用命令\nchoice = input('AURORA >>>')\nprint(choice)  # 调试用|正式版本删除\nswitch.get(choice, default)\n\n\n我通过输入getColor后，程序直接结束\n\n[size=13.0667px]AURORA >>>getColor[size=13.0667px]\n\n[size=13.0667px]getColor\n[size=13.0667px]\n\n[size=13.0667px]进程已结束，退出代码 0\n\n\n子程序getColor的代码如下\n \ndef getColor():\n    scanimg = Image.open(u\"C:/Temp/screenshot.jpg\", 'r')\n    scanimg = np.array(scanimg)\n    color = []\n    if len(scanimg) == 1:\n        print(\"请勿最小化游戏：可以被遮盖但是不能最小化。\\n程序结束。\")\n        time.sleep(10)\n        exit()\n    else:\n        color = scanimg.sum(axis=0)\n        color = color.sum(axis=0)\n    x = len(scanimg[0])\n    y = len(scanimg)\n    r = color[0]\n    r = r/(x*y)\n    g = color[1]\n    g = g/(x*y)\n    b = color[2]\n    b = b/(x*y)\n    color = [int(r), int(g), int(b)]\n    print(color)\n    return color\n\n\n尝试过打断点，仍未找到问题，希望各路大神能予以解惑。\n\n***************************************\n\n原因：switch跳转的映射没有添加括号，\n将switch修改为如下即可。\n\n\nswitch = {\n    'run': run(),\n    'ChangePassword': ChangePassword(),\n    'CoverEnterImg': CoverEnterImg(),\n    'CoverGameIme': CoverGameIme(),\n    'ChangeTallButton': ChangeTalkButton(),\n    'AddGameVersion': AddGameVersion(),\n    'RemoveGameVersion': RemoveGameVersion(),\n    'getColor': getColor()\n}  # 注册可用命令\n",
    "replies": [
        {
            "author": "Style星空",
            "timestamp": 1584291060,
            "txt_content": "坐等大佬回帖，一楼沙发收下"
        }
    ]
}