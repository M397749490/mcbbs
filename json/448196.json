{
    "title": "centos7，开启端口后",
    "author": "风中小筑",
    "replyCount": 1,
    "timestamp": 1432360380,
    "txt_content": "重启端口老是被还原怎么办？",
    "replies": [
        {
            "author": "lsz7575",
            "timestamp": 1432360380,
            "txt_content": "CentOS 7 下使用iptables\nyuik CentOS, Code, Linux, Operation System No Comment ? Close Sidebar 　2014.10.28 \n系统升级到CentOS 7后总感觉iptables怪怪的,比如不管怎么保存重启后都被初始化一下,即便我最后发大绝招启动时候加命令:\n首先iptables-save > /etc/iptables.rules保存当前状态。\n然后再在/etc/rc.local中强制加上\niptables-restore /etc/iptables.rules\n重启后虽然规则生效但仔细看规则还是一些被莫名添加的额外的内容，让人很是不爽。\n\n仔细一google,发现问题之所在了。RedHat在7中更改了系统软件，不再使用iptables作为系统的防火墙，而是使用了FirewallD,但是为了兼容过去的命令也可以使用iptables来设置防护规则，但启动的时候自搞了一套。\n解决方法也很简单。\n首先，可以考虑follow官方的想法转用FirewallD 。其实查看一些官方文档也能用。\n但是，个人觉得若没有显著的提升也可以继续使用原来的iptables.若打算继续使用iptables,可以继续做如下:\n备份当前规则\niptalbes-save > iptables.rules\n禁用FireWallD,安装&启用iptables-services\nsystemctl stop firewalld\nsystemctl mask firewalld\nyum install iptables-services -y\nsystemctl enable iptables\n这时候检查iptables发现规则被清空了\niptables -L -x -n\n将备份的规则还原\niptables-restore iptables.rules\n保存当前规则\n/usr/libexec/iptables/iptables.init save\n若使用minimize版本的安装，可能会出现提示\niptables: Saving firewall rules to /etc/sysconfig/iptables: /etc/init.d/iptables: line 274: restorecon: command not found\n这是因为selinux没有安装的缘故，缺少一个组件。安装policycoreutils即可。\nyum install policycoreutils -y\n"
        }
    ]
}