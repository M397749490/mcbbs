{
    "title": "[补丁]BSPath —— 修复宝石在1.9-1.10的bug[已经修复错误][1.9-1.10]",
    "author": "13230044302yy",
    "replyCount": 11,
    "timestamp": 1473937680,
    "txt_content": " 本帖最后由 1582952890 于 2017-9-16 19:10 编辑 \n用于修复bug\n\n试图使用这bug时会被清理宝石原理:\n使用宝石的时候检测副手物品 如果名字中有 石,或灵\n就触发并清空\n开源:\n\npackage cc.timeland.mc;\n\npublic class BSPath extends org.bukkit.plugin.java.JavaPlugin implements org.bukkit.event.Listener{\n    public void onEnable(){\n    org.bukkit.Bukkit.getServer().getPluginManager().registerEvents(this, this);\n    }\n      @org.bukkit.event.EventHandler(priority=org.bukkit.event.EventPriority.HIGHEST)\n  public void onInventoryClick(org.bukkit.event.inventory.InventoryClickEvent e)\n  {\n      for(String s : e.getWhoClicked().getInventory().getItemInOffHand().getItemMeta().getLore())\n  if(e.getWhoClicked().getInventory().getItemInOffHand().getAmount() !=0 && s.contains(\"5颗同等级宝石\")){\n  e.setCancelled(true);\n  e.getWhoClicked().getInventory().setItemInOffHand(null);\n  e.getWhoClicked().sendMessage(\"使用bug,清空宝石\");\n   return;\n  }\n  }\n    @org.bukkit.event.EventHandler(priority=org.bukkit.event.EventPriority.HIGHEST)\n  public void onRightClick(org.bukkit.event.player.PlayerInteractEvent e)\n  {\n      for(String s : e.getPlayer().getInventory().getItemInOffHand().getItemMeta().getLore())\n    if(e.getPlayer().getInventory().getItemInOffHand().getAmount() !=0 && s.contains(\"5颗同等级宝石\")){\n  e.setCancelled(true);\n  e.getPlayer().getInventory().setItemInOffHand(null);\n  e.getPlayer().sendMessage(\"使用bug,清空宝石\");\n   return;\n  }\n  }\n}\n\n\n\n\n\nBSpath.jar\n(3.73 KB, 下载次数: 78)\n\n\n\n2016-10-4 08:49 上传\n点击文件名下载附件\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "幻境雲達達",
            "timestamp": 1473939360,
            "txt_content": "我觉得把bug收起来比较好。。"
        },
        {
            "author": "13230044302yy",
            "timestamp": 1473939420,
            "txt_content": "XJue_DaDa 发表于 2016-9-15 19:36\n我觉得把bug收起来比较好。。\n太搜集了总是给吐槽"
        },
        {
            "author": "SakuraKooi",
            "timestamp": 1473939720,
            "txt_content": " 本帖最后由 wujinze 于 2016-9-15 19:51 编辑 \n\nlz测试过么?我为什么感觉这代码会出负数bug的样子....\n为何不直接e.getWhoClicked().getInventory().setItemInOffHand(null)\nsetamount(0)似乎会出负数bug吧...?\n我没测试只是看了下代码,如果没问题的话无视吧"
        },
        {
            "author": "SakuraKooi",
            "timestamp": 1473940260,
            "txt_content": " 本帖最后由 wujinze 于 2016-9-15 20:04 编辑 \n13230044302yy 发表于 2016-9-15 19:55\n应该不会有问题,删除物品我都是设置数量为0 的..貌似你这样更简单倒是\n另外只是简单地判断物品名称内是否含有指定文字应该会误清掉玩家用铁砧命名的含有这些字东西吧\n而且还只是一个字...\n我服玩家就经常武器命名里面带灵字(一群中二23333)...拿在副手不就....\n\n另外lz你这代码应该会报错...\n如果副手没有拿着东西应该会出NullPointerException\n"
        },
        {
            "author": "13230044302yy",
            "timestamp": 1473940380,
            "txt_content": "wujinze 发表于 2016-9-15 19:51\n另外只是简单地判断物品名称内是否含有指定文字应该会误清掉玩家用铁砧命名的含有这些字东西吧\n而且还只 ...\n我有空稍作修改就好了 .."
        },
        {
            "author": "13230044302yy",
            "timestamp": 1473940500,
            "txt_content": "wujinze 发表于 2016-9-15 19:42\nlz测试过么?我为什么感觉这代码会出负数bug的样子....\n为何不直接e.getWhoClicked().getInventory().setIte ...\n应该不会有问题,删除物品我都是设置数量为0 的..貌似你这样更简单倒是"
        },
        {
            "author": "pandeen",
            "timestamp": 1474975260,
            "txt_content": "13230044302yy 发表于 2016-9-15 19:53\n我有空稍作修改就好了 ..\n表示补丁有严重bug, 宝石放副手不会消失也无法清楚, 强行推拽有时会复制出新宝石...完毕-_-"
        },
        {
            "author": "13230044302yy",
            "timestamp": 1475542200,
            "txt_content": "pandeen 发表于 2016-9-27 19:21\n表示补丁有严重bug, 宝石放副手不会消失也无法清楚, 强行推拽有时会复制出新宝石...完毕-_- ...\n已经修复"
        },
        {
            "author": "pyb09",
            "timestamp": 1475546340,
            "txt_content": "可能拯救了很多服务器"
        },
        {
            "author": "123飞",
            "timestamp": 1483254420,
            "txt_content": "1.11owo快快支持啊"
        },
        {
            "author": "wuyuhan",
            "timestamp": 1533385320,
            "txt_content": "报错怎么办"
        }
    ]
}