{
    "title": "TPS很低求解！",
    "author": "a369468531",
    "replyCount": 23,
    "timestamp": 1584849840,
    "txt_content": "CPU占用不到40 内存才占50\n50人+就掉到了5-8TPS很苦恼！\nhttps://www.spigotmc.org/go/timings?url=higuwubaqu\n求解！加了优化了！不知道是不是插件导致的。自己也不会看",
    "replies": [
        {
            "author": "EmptyLava",
            "timestamp": 1584849840,
            "txt_content": " 本帖最后由 EmptyLava 于 2020-3-22 12:28 编辑 \n\n由于mojang的屑优化，导致minecraft不能很好的利用多线程，所以cpu占用不可能满，内存的话一个服务器用不了那么多\nPct tick 200%\n原因(1)\n1.主要是实体(100%)\n优化方案(5)\n1.在任务管理器中右键javaw.exe,转详细信息后右键javaw.exe将优先级改为实时,这可以增加cpu的占用率从而提升tps(但服务器重启后需要重新配置,建议配合计划任务)\n2.在spigot.yml中设置\nentity-tracking-range\nanimals: 22\nmonsters: 22\n3.在spigot.yml中设置\nentity-activation-range\nanimals: 18\nmonsters: 22\n4.在bukkit.yml中设置\nmonster-spawns: 3(如果设置过了就增加2)\n5.在bukkit.yml中设置ticks-per内的entity为20左右(如果实体计算太慢将会跳过)\n6.试试优化插件(相同功能的优化插件只能安装一个，多了没意义)\n\n[安全|优化]ClearMob —— 功能全面的异步实体控制与区块优化[1.10-1.14]\nhttps://www.mcbbs.net/thread-915272-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n7.为什么不用群组服呢，可以解决cpu占用低的问题，还能完美利用内存，大幅提升TPS\n8.在bukkit.yml设置为这样\nspawn-limits:\n  monsters: 50\n  animals: 10\n  water-animals: 15\n  ambient: 15复制代码降低玩家周围最多能有多少怪\n按照上述方法优化之后，实体占用大概可以压缩到20%或30%\n\n\n\n\n"
        },
        {
            "author": "SakuraTao",
            "timestamp": 1584850380,
            "txt_content": "主城实体占用很高，是不是NPC很多？"
        },
        {
            "author": "zxzpkcxc2",
            "timestamp": 1584850380,
            "txt_content": "首先可以看下这个帖子https://www.mcbbs.net/thread-916822-1-1.html?cp=8\n关于优化的办法去服务端下的spigot.yml 里面将  \ntile\nentity\n这两项调低，这两项占用服务器资源是非常非常大的（亲测有效）\n这两项数值应该都是50，去看情况调低（总和尽量不要大于50，但也不要小于30）\n或者加插件https://www.mcbbs.net/thread-603072-1-1.html\n至于看情况，如果是mod服就将tile，调更低，是插件服就将entity调更低"
        },
        {
            "author": "结城希亚",
            "timestamp": 1584850440,
            "txt_content": " 本帖最后由 御炎Roinflam 于 2020-3-22 12:16 编辑 \n\n你的实体是真的多，不清理你服务器都爆炸了\n还有，建议删掉你的NoSpawnChunks插件，这玩意负优化\n而且生物移动占的资源也挺多，建议冻结\n\n[优化]Simple Anti-Mob Lag —— 冻结生物以缓解卡服|已兼容至1.15[1.9-1.15]\nhttps://www.mcbbs.net/thread-874306-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n通用优化方案：\n1、加装优化插件\n[SCT][优化][付费]LagAssist —— 不可直视的九合一优化插件[1.8-1.14]\nhttps://www.mcbbs.net/thread-881861-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n2、把服务端下spigot.yml文件里的视距view-distance数值改小，最好2-4\n3、把服务端下spigot.yml文件里的max-tick-time数值\n     可以适当减少（降低玩家体验提高tps）或者适当提高（降低tps提高玩家体验）\n4、参考站外一个比较详细的配置优化\nhttps://help.mcstory.net/Optimization.html\n5、可以尝试通过世界边界插件填充来让跑图不卡\n[管理|安全] WorldBorder —— 世界边界★还在担心被跑图吗 【汉化】[全版本]\nhttps://www.mcbbs.net/thread-608265-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n6、使用插件限制机器数量\n[管理]ChunkBlockLimit ——  可视化的区块限制插件[1.6-1.14.X]\nhttps://www.mcbbs.net/thread-984759-1-1.html\n(出处: Minecraft(我的世界)中文论坛)\n\n不过按你这么说，你貌似是机器本身不行\n升级下你服务器的CPU吧，4GHz差不多够了，你就算是3990x你也带不起模组服啊\n\n"
        },
        {
            "author": "Salt_lovely",
            "timestamp": 1584851040,
            "txt_content": " 本帖最后由 Salt_lovely 于 2020-3-22 12:52 编辑 \n\nminecraft的生物计算几乎是压在一个线程上的：\n      18.50%          45.38%        135.06 s            22.69 ms         1.0               6.0k            spawn - entityTick\n      13.19%          32.36%         96.33 s            16.18 ms         1.0               6.0k            world - entityTick\n       4.47%          10.96%         32.61 s             5.48 ms         1.0               6.0k            p - entityTick\nspawn和world这两个世界的生物太多太卡了\n      43.14%         105.82%        314.98 s            52.91 ms         912           5,426.2k            tickEntity\n生物占用总计这么多。。。那两个世界的生物就占了一大半\n\n推荐解决方法：\n1（推荐）、开群组服\n2、在bukkit.yml里面，降低怪物（monsters）和动物（animals）、蝙蝠（ambient）的上限；拉大刷怪间隔（在ticks-per:下面的monster-spawns:，不要超过10，最好不要超过5）\n3、在spigot.yml里面，降低生物的活动距离（entity-activation-range:下面的各项）和刷怪距离（mob-spawn-range，计算方式是这个数字x16=实际刷怪范围(单位：格)，建议改成4或5，最好不要改成3或以下）\n\n另外，请删除NoSpawnChunks，这个东西对你的服一点用都没有，还吃资源\n我瞎了看错了，请忽略上一句\n另外，请删除NoSpawnChunks，这个东西和AegisClear的功能重复。\n我看到你安装了AegisClear，发一下配置文件，看看为什么没起作用"
        },
        {
            "author": "极光creeper",
            "timestamp": 1584851820,
            "txt_content": "Salt_lovely 发表于 2020-3-22 12:24\nminecraft的生物计算几乎是压在一个线程上的：\n\nspawn和world这两个世界的生物太多太卡了\nNoSpawnChunks: 我躺枪了，wsl \n\n\n\n\nimage.png (445 Bytes, 下载次数: 0)\n\n下载附件\n\n2020-3-22 12:36 上传\n\n\n\n\n\n\n"
        },
        {
            "author": "a369468531",
            "timestamp": 1584852720,
            "txt_content": "御炎Roinflam 发表于 2020-3-22 12:14\n你的实体是真的多，不清理你服务器都爆炸了\n还有，建议删掉你的NoSpawnChunks插件，这玩意负优化\n而且生物 ...\n机子CPU占用稳定是25%-28%.不该吧。。。他啥都不卡就是TPS低。丢精灵啥的慢。我是神奇宝贝服。"
        },
        {
            "author": "a369468531",
            "timestamp": 1584852780,
            "txt_content": "Salt_lovely 发表于 2020-3-22 12:24\nminecraft的生物计算几乎是压在一个线程上的：\n\nspawn和world这两个世界的生物太多太卡了\n嗯嗯。好的。我不知道那个会占资源。我怕俩个卸载区块冲突了然后那个我就禁用了。那个是用的是默认配置。"
        },
        {
            "author": "结城希亚",
            "timestamp": 1584852900,
            "txt_content": "a369468531 发表于 2020-3-22 12:52\n机子CPU占用稳定是25%-28%.不该吧。。。他啥都不卡就是TPS低。丢精灵啥的慢。我是神奇宝贝服。 ...\n不要看占用，看频率\n或者你可以把java优先级改为实时"
        },
        {
            "author": "a369468531",
            "timestamp": 1584852900,
            "txt_content": "zxzpkcxc2 发表于 2020-3-22 12:13\n首先可以看下这个帖子https://www.mcbbs.net/thread-916822-1-1.html?cp=8\n关于优化的办法去服务端下的spig ...\n好的，我尝试下。谢谢、我是神奇宝贝的服"
        },
        {
            "author": "a369468531",
            "timestamp": 1584853020,
            "txt_content": "御炎Roinflam 发表于 2020-3-22 12:55\n不要看占用，看频率\n或者你可以把java优先级改为实时\n好的，感谢"
        },
        {
            "author": "a369468531",
            "timestamp": 1584853080,
            "txt_content": "EmptyLava 发表于 2020-3-22 12:13\n由于mojang的屑优化，导致minecraft不能很好的利用多线程，所以cpu占用不可能满，内存的话一个服务器用不了 ...\n好的，谢谢解答。只是不知道神奇宝贝的实体会不会被控制。毕竟这个一个玩家旁边都会刷个7-8."
        },
        {
            "author": "EmptyLava",
            "timestamp": 1584853620,
            "txt_content": "a369468531 发表于 2020-3-22 12:58\n好的，谢谢解答。只是不知道神奇宝贝的实体会不会被控制。毕竟这个一个玩家旁边都会刷个7-8. ...\n\n限制神奇宝贝的数值你可以尝试下修改关于animals的\n\n但神奇宝贝实体一般占用不高"
        },
        {
            "author": "a369468531",
            "timestamp": 1584854100,
            "txt_content": "EmptyLava 发表于 2020-3-22 13:07\n限制神奇宝贝的数值你可以尝试下修改关于animals的\n\n但神奇宝贝实体一般占用不高 ...\n好的。我会尝试的！感谢！"
        },
        {
            "author": "凉凉丶",
            "timestamp": 1584860460,
            "txt_content": "神奇宝贝TPS低可以尝试更换更强力的CPU，如果你认为你的CPU足够（我的是3970x）开神奇宝贝很稳，那么你可以去尝试清理下生成的神奇宝贝"
        },
        {
            "author": "x269361945",
            "timestamp": 1584885300,
            "txt_content": "可以看看这个https://www.mcbbs.net/thread-478126-1-1.html"
        },
        {
            "author": "13752998871",
            "timestamp": 1584886560,
            "txt_content": "tps可能是因为区块刷怪过多导致的，再加上玩家不断地刷新区块就更不用说了\n还有就是红石\n有一些高频红石不能被检测具体要知道就回复我一下==\n\n给你推荐几个插件，生物堆叠.区块生物上限\n\n可以定时清理实体和掉落物\n\n都可以稳定20tps\n\n谢谢参考"
        },
        {
            "author": "a369468531",
            "timestamp": 1584887520,
            "txt_content": "13752998871 发表于 2020-3-22 22:16\ntps可能是因为区块刷怪过多导致的，再加上玩家不断地刷新区块就更不用说了\n还有就是红石\n有一些高频红石不 ...\n我是神奇宝贝服，也能起到作用么"
        },
        {
            "author": "13752998871",
            "timestamp": 1584887580,
            "txt_content": "a369468531 发表于 2020-3-22 22:32\n我是神奇宝贝服，也能起到作用么\n当然可以除非你让神器宝贝服不刷怪？=="
        },
        {
            "author": "a369468531",
            "timestamp": 1584889200,
            "txt_content": "13752998871 发表于 2020-3-22 22:33\n当然可以除非你让神器宝贝服不刷怪？==\n现在只刷精灵，么有怪"
        },
        {
            "author": "13752998871",
            "timestamp": 1584889560,
            "txt_content": "a369468531 发表于 2020-3-22 23:00\n现在只刷精灵，么有怪\n这就不晓得了，毕竟很少接触神奇宝贝"
        },
        {
            "author": "a369468531",
            "timestamp": 1584896700,
            "txt_content": "zxzpkcxc2 发表于 2020-3-22 12:13\n首先可以看下这个帖子https://www.mcbbs.net/thread-916822-1-1.html?cp=8\n关于优化的办法去服务端下的spig ...\n我之前是6-24\n现在是4-18\n希望能有好转！等明天人多看看。现在才开始搞"
        },
        {
            "author": "a369468531",
            "timestamp": 1584897240,
            "txt_content": "EmptyLava 发表于 2020-3-22 12:13\n由于mojang的屑优化，导致minecraft不能很好的利用多线程，所以cpu占用不可能满，内存的话一个服务器用不了 ...\n我还想问问，这几个都是关于什么的\nentity-tracking-range\nanimals: 22 [我现在的48\nmonsters: 22 [我现在的48\n----------------------\nentity-activation-range\nanimals: 18 [我现在的16\nmonsters: 22 [我现在的24\n----------------------\nmonster-spawns: 3 [我现在是1\n----------------------\n在bukkit.yml中设置ticks-per内的entity为20左右\n这个我在bukkit没找到"
        }
    ]
}