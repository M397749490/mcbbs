{
    "title": "Citizens加载报错.与QuantumRPG同时安装报错",
    "author": "2811443186",
    "replyCount": 6,
    "timestamp": 1596090060,
    "txt_content": "如题。版本:1.14.4\n服务端：Spigot\n\nQuantumRPG版本: 5.0.10\nCitizens版本: 2.0.27\n\nCitizens加载的时候报错:\n[Citizens] Disabling Citizens v2.0.27-SNAPSHOT (build 2038)\n[14:15:46] [Server thread/ERROR]: Error occurred while disabling Citizens v2.0.27-SNAPSHOT (build 2038) (Is it up to date?)\njava.lang.NullPointerException: null\n        at net.citizensnpcs.Citizens.onDisable(Citizens.java:272) ~[?:?]\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:265) ~[spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.java.JavaPluginLoader.disablePlugin(JavaPluginLoader.java:377) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.SimplePluginManager.disablePlugin(SimplePluginManager.java:438) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.citizensnpcs.Citizens.onEnable(Citizens.java:306) [Citizens-2.0.27-b2038.jar:?]\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:263) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:352) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:417) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.enablePlugin(CraftServer.java:461) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.enablePlugins(CraftServer.java:375) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.a(MinecraftServer.java:449) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.DedicatedServer.init(DedicatedServer.java:266) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:775) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_261]\n从而导致QuantumRPG报错\n Error occurred while enabling QuantumRPG v5.0.10 (Is it up to date?)\njava.lang.NoClassDefFoundError: net/citizensnpcs/api/trait/Trait\n        at java.lang.ClassLoader.defineClass1(Native Method) ~[?:1.8.0_261]\n        at java.lang.ClassLoader.defineClass(Unknown Source) ~[?:1.8.0_261]\n        at java.security.SecureClassLoader.defineClass(Unknown Source) ~[?:1.8.0_261]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:131) ~[spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.java.JavaPluginLoader.getClassByName(JavaPluginLoader.java:202) ~[spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:92) ~[spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:81) ~[spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_261]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_261]\n        at su.nightexpress.quantumrpg.modules.list.gems.GemManager.onPostSetup(GemManager.java:58) ~[?:?]\n        at su.fogus.engine.modules.IModule.load(IModule.java:38) ~[?:?]\n        at su.fogus.engine.modules.ModuleManager.register(ModuleManager.java:43) ~[?:?]\n        at su.nightexpress.quantumrpg.modules.ModuleCache.initialize(ModuleCache.java:67) ~[?:?]\n        at su.nightexpress.quantumrpg.QuantumRPG.enable(QuantumRPG.java:112) ~[?:?]\n        at su.fogus.engine.FogusPlugin.loadManagers(FogusPlugin.java:238) ~[?:?]\n        at su.fogus.engine.FogusPlugin.onEnable(FogusPlugin.java:102) ~[?:?]\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:263) ~[spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:352) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:417) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.enablePlugin(CraftServer.java:461) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.enablePlugins(CraftServer.java:375) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.a(MinecraftServer.java:449) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.DedicatedServer.init(DedicatedServer.java:266) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:775) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_261]\nCaused by: java.lang.ClassNotFoundException: net.citizensnpcs.api.trait.Trait\n        at java.net.URLClassLoader.findClass(Unknown Source) ~[?:1.8.0_261]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:135) ~[spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.plugin.java.PluginClassLoader.findClass(PluginClassLoader.java:81) ~[spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_261]\n        at java.lang.ClassLoader.loadClass(Unknown Source) ~[?:1.8.0_261]\n        ... 25 more\n\n进游戏后刷屏报错\n[Server thread/WARN]: [QuantumRPG] Task #63 for QuantumRPG v5.0.10 generated an exception\njava.lang.NoClassDefFoundError: net/citizensnpcs/api/CitizensAPI\n        at su.fogus.engine.hooks.Hooks.isNPC(Hooks.java:144) ~[?:?]\n        at su.nightexpress.quantumrpg.stats.EntityStats.<init>(EntityStats.java:109) ~[?:?]\n        at su.nightexpress.quantumrpg.stats.EntityStats.lambda$1(EntityStats.java:182) ~[?:?]\n        at java.util.HashMap.computeIfAbsent(Unknown Source) ~[?:1.8.0_261]\n        at java.util.Collections$SynchronizedMap.computeIfAbsent(Unknown Source) ~[?:1.8.0_261]\n        at su.nightexpress.quantumrpg.stats.EntityStats.get(EntityStats.java:182) ~[?:?]\n        at su.nightexpress.quantumrpg.manager.EntityManager$StatsUpdater.lambda$0(EntityManager.java:191) ~[?:?]\n        at java.util.Collection.removeIf(Unknown Source) ~[?:1.8.0_261]\n        at su.nightexpress.quantumrpg.manager.EntityManager$StatsUpdater.action(EntityManager.java:189) ~[?:?]\n        at su.fogus.engine.tasks.JTask.lambda$0(JTask.java:39) ~[?:?]\n        at org.bukkit.craftbukkit.v1_14_R1.scheduler.CraftTask.run(CraftTask.java:81) ~[spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at org.bukkit.craftbukkit.v1_14_R1.scheduler.CraftScheduler.mainThreadHeartbeat(CraftScheduler.java:394) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.b(MinecraftServer.java:1022) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.DedicatedServer.b(DedicatedServer.java:393) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.a(MinecraftServer.java:970) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:815) [spigot.jar:git-Spigot-cbd1a1b-009d8af]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_261]\n",
    "replies": [
        {
            "author": "南柯郡守",
            "timestamp": 1596090060,
            "txt_content": "2811443186 发表于 2020-7-30 14:59\n都是对的。而且我这配置文件是默认生成的。我还没改过。\n不仅限于配置文件\n先试试把Citizens文件夹备份然后删掉\n看他重新生成的怎么样"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1596091140,
            "txt_content": "[Citizens] Disabling Citizens v2.0.27-SNAPSHOT (build 2038)\n\n把这一句前面的发出来\n\n可能因为某种原因导致Citizens自己把自己卸载了\n\n大概率是缺少前置或者版本不符"
        },
        {
            "author": "2811443186",
            "timestamp": 1596091980,
            "txt_content": "南柯郡守 发表于 2020-7-30 14:39\n把这一句前面的发出来\n\n可能因为某种原因导致Citizens自己把自己卸载了\n可我配置文件都是全新的啊.\n[Citizens] Enabling Citizens v2.0.27-SNAPSHOT (build 2038)[14:52:19] [Server thread/WARN]: org.bukkit.configuration.InvalidConfigurationException: unacceptable code point ' ' (0x0) special characters are not allowed\nin \"'string'\", position 0\n[14:52:19] [Server thread/WARN]:        at org.bukkit.configuration.file.YamlConfiguration.loadFromString(YamlConfiguration.java:56)\n[14:52:19] [Server thread/WARN]:        at org.bukkit.configuration.file.FileConfiguration.load(FileConfiguration.java:160)\n[14:52:19] [Server thread/WARN]:        at org.bukkit.configuration.file.FileConfiguration.load(FileConfiguration.java:128)\n[14:52:19] [Server thread/WARN]:        at net.citizensnpcs.api.util.YamlStorage.load(YamlStorage.java:88)\n[14:52:19] [Server thread/WARN]:        at net.citizensnpcs.Citizens.createStorage(Citizens.java:121)\n[14:52:19] [Server thread/WARN]:        at net.citizensnpcs.Citizens.onEnable(Citizens.java:303)\n[14:52:19] [Server thread/WARN]:        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:263)\n[14:52:19] [Server thread/WARN]:        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:352)\n[14:52:19] [Server thread/WARN]:        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:417)\n[14:52:19] [Server thread/WARN]:        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.enablePlugin(CraftServer.java:461)\n[14:52:19] [Server thread/WARN]:        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.enablePlugins(CraftServer.java:375)\n[14:52:19] [Server thread/WARN]:        at net.minecraft.server.v1_14_R1.MinecraftServer.a(MinecraftServer.java:449)\n[14:52:19] [Server thread/WARN]:        at net.minecraft.server.v1_14_R1.DedicatedServer.init(DedicatedServer.java:266)\n[14:52:19] [Server thread/WARN]:        at net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:775)\n[14:52:19] [Server thread/WARN]:        at java.lang.Thread.run(Unknown Source)\n[14:52:19] [Server thread/WARN]: Caused by: unacceptable code point ' ' (0x0) special characters are not allowed\nin \"'string'\", position 0\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.reader.StreamReader.update(StreamReader.java:211)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.reader.StreamReader.ensureEnoughData(StreamReader.java:176)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.reader.StreamReader.ensureEnoughData(StreamReader.java:171)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.reader.StreamReader.peek(StreamReader.java:126)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.scanner.ScannerImpl.scanToNextToken(ScannerImpl.java:1177)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.scanner.ScannerImpl.fetchMoreTokens(ScannerImpl.java:287)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.scanner.ScannerImpl.checkToken(ScannerImpl.java:227)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.parser.ParserImpl$ParseImplicitDocumentStart.produce(ParserImpl.java:195)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.parser.ParserImpl.peekEvent(ParserImpl.java:158)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.parser.ParserImpl.checkEvent(ParserImpl.java:148)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.composer.Composer.getSingleNode(Composer.java:107)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.constructor.BaseConstructor.getSingleData(BaseConstructor.java:139)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.Yaml.loadFromReader(Yaml.java:524)\n[14:52:19] [Server thread/WARN]:        at org.yaml.snakeyaml.Yaml.load(Yaml.java:437)\n[14:52:19] [Server thread/WARN]:        at org.bukkit.configuration.file.YamlConfiguration.loadFromString(YamlConfiguration.java:54)\n[14:52:19] [Server thread/WARN]:        ... 14 more\n[14:52:19] [Server thread/ERROR]: [Citizens] 无法载入存档, 禁用中...\n[14:52:19] [Server thread/INFO]: [Citizens] Disabling Citizens v2.0.27-SNAPSHOT (build 2038)"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1596092100,
            "txt_content": "2811443186 发表于 2020-7-30 14:53\n可我配置文件都是全新的啊.\n是不是你自己修改了哪个配置文件\n\n格式错了\n\nhttp://www.bejson.com/validators/yaml_editor/\n\n复制整个配置文件到上面网址来查错"
        },
        {
            "author": "2811443186",
            "timestamp": 1596092340,
            "txt_content": "南柯郡守 发表于 2020-7-30 14:55\n是不是你自己修改了哪个配置文件\n\n格式错了\n都是对的。而且我这配置文件是默认生成的。我还没改过。\n\n\n\nCitizens.zip\n(10.13 KB, 下载次数: 2)\n\n\n\n2020-7-30 14:59 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "2811443186",
            "timestamp": 1596092940,
            "txt_content": "南柯郡守 发表于 2020-7-30 15:02\n不仅限于配置文件\n先试试把Citizens文件夹备份然后删掉\n看他重新生成的怎么样 ...\n重新生成一下就好了\n原来这么简单。。。。。。\n我这电脑不知道怎么回事在后台看不见中文。全是问号。放到VPS上看了一下就明白了"
        }
    ]
}