{
    "title": "如何使用ASM？求字节码dalao帮助！",
    "author": "Freeze_Dolphin",
    "replyCount": 0,
    "timestamp": 1584350460,
    "txt_content": " 本帖最后由 Freeze_Dolphin 于 2020-3-18 14:16 编辑 \n\n想要使用ASM玩字节码\n但是网上的教程貌似与我的情况有点不一样，所以不知道怎么下手\n\n想要把Slimefun的RecipeType.java\n\npackage me.mrCookieSlime.Slimefun.Lists;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport me.mrCookieSlime.CSCoreLibPlugin.general.Inventory.Item.CustomItem;\nimport me.mrCookieSlime.Slimefun.Variables;\nimport me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunGadget;\nimport me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\nimport me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunMachine;\nimport me.mrCookieSlime.Slimefun.api.SlimefunRecipes;\n\nimport org.bukkit.Material;\nimport org.bukkit.inventory.ItemStack;\n\npublic class RecipeType {\n\n        public static final RecipeType MULTIBLOCK = new RecipeType(new CustomItem(Material.BRICK, \"&b复合型方块机器\", 0, new String[] {\"\", \"&a按界面中的上下顺序\", \"&a使用方块在地上搭建\"}));\n        public static final RecipeType ARMOR_FORGE = new RecipeType(new CustomItem(Material.ANVIL, \"&b护甲锻造器\", 0, new String[] {\"\", \"&a使用&e护甲锻造器&a制作\"}), \"ARMOR_FORGE\");\n        public static final RecipeType GRIND_STONE = new RecipeType(new CustomItem(Material.DISPENSER, \"&b磨石\", 0, new String[] {\"\", \"&a使用&e磨石&a制作\"}), \"GRIND_STONE\");\n        public static final RecipeType MOB_DROP = new RecipeType(new CustomItem(Material.MONSTER_EGG, \"&b生物掉落\", 0, new String[] {\"\", \"&a通过杀死特定的生物掉落\"}));\n        public static final RecipeType SMELTERY = new RecipeType(new CustomItem(Material.FURNACE, \"&6冶炼厂\", 0, new String[] {\"\", \"&a使用&e冶炼厂&a制作\"}), \"SMELTERY\");\n        public static final RecipeType ORE_CRUSHER = new RecipeType(new CustomItem(Material.DISPENSER, \"&b碎矿机\", 0, new String[] {\"\", \"&a使用&e碎矿机&a进行粉碎\"}), \"ORE_CRUSHER\");\n        public static final RecipeType GOLD_PAN = new RecipeType(new CustomItem(Material.BOWL, \"&b淘洗盘\", 0, new String[] {\"\", \"&a手持&e淘洗盘&a对砂砾进行淘洗\"}));\n        public static final RecipeType COMPRESSOR = new RecipeType(new CustomItem(Material.PISTON_BASE, \"&b压缩机\", 0, new String[] {\"\", \"&a使用&e压缩机&a进行压缩\"}), \"COMPRESSOR\");\n        public static final RecipeType PRESSURE_CHAMBER = new RecipeType(new CustomItem(Material.GLASS, \"&b压力室\", 0, new String[] {\"\", \"&a使用&e压缩机&a进行压缩加工\"}), \"PRESSURE_CHAMBER\");\n        public static final RecipeType OVEN = new RecipeType(new CustomItem(Material.FURNACE, \"&b烤炉\", 0, new String[] {\"\", \"&a&o在烤炉里制作\"}), \"OVEN\");\n        public static final RecipeType MAGIC_WORKBENCH = new RecipeType(new CustomItem(Material.BOOKSHELF, \"&6魔法合成台\", 0, new String[] {\"\", \"&a使用&e魔法合成台&a进行制作\"}), \"MAGIC_WORKBENCH\");\n        public static final RecipeType ORE_WASHER = new RecipeType(new CustomItem(Material.CAULDRON_ITEM, \"&6洗矿机\", 0, new String[] {\"\", \"&a使用&e洗矿机&a进行制作\"}), \"ORE_WASHER\");\n        public static final RecipeType ENHANCED_CRAFTING_TABLE = new RecipeType(new CustomItem(Material.WORKBENCH, \"&e强化合成台\", 0, new String[] {\"\", \"&a远古工艺的基础合成台\", \"&a普通的合成台无法进行远古工艺制作\"}), \"ENHANCED_CRAFTING_TABLE\");\n        public static final RecipeType JUICER = new RecipeType(new CustomItem(Material.GLASS_BOTTLE, \"&e榨汁机\", 0, new String[] {\"\", \"&a来点美味的果汁?\"}), \"JUICER\");\n        public static final RecipeType ANCIENT_ALTAR = new RecipeType(new CustomItem(Material.ENCHANTMENT_TABLE, \"&4远古祭坛\", 0, new String[] {\"\", \"&d你必须通过使用远古祭坛\", \"&d执行神秘的远古魔法仪式\", \"&d才能合成出这个物品\"}));\n        public static final RecipeType HEATED_PRESSURE_CHAMBER = new RecipeType(new CustomItem(Material.STAINED_GLASS, \"&c热压力室\", 8, new String[] {\"\", \"&a使用&e热压力室\", \"&a来制作这个物品\"}), \"HEATED_PRESSURE_CHAMBER\");\n\n        public static final RecipeType SHAPED_RECIPE = new RecipeType(new CustomItem(Material.WORKBENCH, \"&e有序合成\", 0, new String[] {\"\", \"&a这个合成只需使用普通的合成台\"}));\n        public static final RecipeType SHAPELESS_RECIPE = new RecipeType(new CustomItem(Material.WORKBENCH, \"&e无序合成\", 0, new String[] {\"\", \"&a这个合成只需使用普通的合成台\"}));\n        public static final RecipeType FURNACE = new RecipeType(new CustomItem(Material.FURNACE, \"&e普通熔炉合成\", 0, new String[] {\"\", \"&a&o只需要使用普通的熔炉制作\"}));\n        public static final RecipeType NULL = new RecipeType(null);\n\n        ItemStack item;\n        String machine;\n\n        public RecipeType(ItemStack item) {\n                this.item = item;\n                this.machine = \"\";\n\n        }\n\n        public RecipeType(ItemStack item, String machine) {\n                this.item = item;\n                this.machine = machine;\n\n        }\n\n        public RecipeType(String machine, int seconds, ItemStack[] input, ItemStack[] output) {\n                this.machine = machine;\n                SlimefunItem item = getMachine();\n                this.item = item.getItem();\n                SlimefunRecipes.registerMachineRecipe(machine, seconds, input, output);\n\n        }\n\n        public ItemStack toItem() {\n                return this.item;\n        }\n\n        public SlimefunItem getMachine() {\n                return SlimefunItem.getByID(machine);\n        }\n\n        public static List<ItemStack> getRecipeInputs(SlimefunItem machine) {\n                if (machine == null) return new ArrayList<ItemStack>();\n                List<ItemStack[]> recipes = (machine instanceof SlimefunMachine ? ((SlimefunMachine) machine).getRecipes(): ((SlimefunGadget) machine).getRecipes());\n                List<ItemStack> convertable = new ArrayList<ItemStack>();\n                for (int i = 0; i < recipes.size(); i++) {\n                        if (i % 2 == 0) convertable.add(recipes.get(i)[0]);\n                }\n                return convertable;\n        }\n\n        public static List<ItemStack[]> getRecipeInputList(SlimefunItem machine) {\n                if (machine == null) return new ArrayList<ItemStack[]>();\n                List<ItemStack[]> recipes = (machine instanceof SlimefunMachine ? ((SlimefunMachine) machine).getRecipes(): ((SlimefunGadget) machine).getRecipes());\n                List<ItemStack[]> convertable = new ArrayList<ItemStack[]>();\n                for (int i = 0; i < recipes.size(); i++) {\n                        if (i % 2 == 0) convertable.add(recipes.get(i));\n                }\n                return convertable;\n        }\n\n        public static ItemStack getRecipeOutput(SlimefunItem machine, ItemStack input) {\n                List<ItemStack[]> recipes = (machine instanceof SlimefunMachine ? ((SlimefunMachine) machine).getRecipes(): ((SlimefunGadget) machine).getRecipes());\n                return recipes.get(((getRecipeInputs(machine).indexOf(input) * 2) + 1))[0];\n        }\n\n        public static ItemStack getRecipeOutputList(SlimefunItem machine, ItemStack[] input) {\n                List<ItemStack[]> recipes = (machine instanceof SlimefunMachine ? ((SlimefunMachine) machine).getRecipes(): ((SlimefunGadget) machine).getRecipes());\n                return recipes.get(((getRecipeInputList(machine).indexOf(input) * 2) + 1))[0];\n        }\n}\n复制代码\n\n\n每个实例化的方法（public RecipeType()）中加个\nVariables.recipetypes.add(this);复制代码变成：\n\npackage me.mrCookieSlime.Slimefun.Lists;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport me.mrCookieSlime.CSCoreLibPlugin.general.Inventory.Item.CustomItem;\nimport me.mrCookieSlime.Slimefun.Variables;\nimport me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunGadget;\nimport me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\nimport me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunMachine;\nimport me.mrCookieSlime.Slimefun.api.SlimefunRecipes;\n\nimport org.bukkit.Material;\nimport org.bukkit.inventory.ItemStack;\n\npublic class RecipeType {\n\n \n       public static final RecipeType MULTIBLOCK = new RecipeType(new \nCustomItem(Material.BRICK, \"&b复合型方块机器\", 0, new String[] {\"\", \n\"&a按界面中的上下顺序\", \"&a使用方块在地上搭建\"}));\n        public static final \nRecipeType ARMOR_FORGE = new RecipeType(new CustomItem(Material.ANVIL, \n\"&b护甲锻造器\", 0, new String[] {\"\", \"&a使用&e护甲锻造器&a制作\"}), \n\"ARMOR_FORGE\");\n        public static final RecipeType GRIND_STONE = \nnew RecipeType(new CustomItem(Material.DISPENSER, \"&b磨石\", 0, new \nString[] {\"\", \"&a使用&e磨石&a制作\"}), \"GRIND_STONE\");\n     \n   public static final RecipeType MOB_DROP = new RecipeType(new \nCustomItem(Material.MONSTER_EGG, \"&b生物掉落\", 0, new String[] {\"\", \n\"&a通过杀死特定的生物掉落\"}));\n        public static final RecipeType \nSMELTERY = new RecipeType(new CustomItem(Material.FURNACE, \"&6冶炼厂\", \n0, new String[] {\"\", \"&a使用&e冶炼厂&a制作\"}), \"SMELTERY\");\n    \n    public static final RecipeType ORE_CRUSHER = new RecipeType(new \nCustomItem(Material.DISPENSER, \"&b碎矿机\", 0, new String[] {\"\", \n\"&a使用&e碎矿机&a进行粉碎\"}), \"ORE_CRUSHER\");\n        public \nstatic final RecipeType GOLD_PAN = new RecipeType(new \nCustomItem(Material.BOWL, \"&b淘洗盘\", 0, new String[] {\"\", \n\"&a手持&e淘洗盘&a对砂砾进行淘洗\"}));\n        public static final \nRecipeType COMPRESSOR = new RecipeType(new \nCustomItem(Material.PISTON_BASE, \"&b压缩机\", 0, new String[] {\"\", \n\"&a使用&e压缩机&a进行压缩\"}), \"COMPRESSOR\");\n        public static\n final RecipeType PRESSURE_CHAMBER = new RecipeType(new \nCustomItem(Material.GLASS, \"&b压力室\", 0, new String[] {\"\", \n\"&a使用&e压缩机&a进行压缩加工\"}), \"PRESSURE_CHAMBER\");\n     \n   public static final RecipeType OVEN = new RecipeType(new \nCustomItem(Material.FURNACE, \"&b烤炉\", 0, new String[] {\"\", \n\"&a&o在烤炉里制作\"}), \"OVEN\");\n        public static final \nRecipeType MAGIC_WORKBENCH = new RecipeType(new \nCustomItem(Material.BOOKSHELF, \"&6魔法合成台\", 0, new String[] {\"\", \n\"&a使用&e魔法合成台&a进行制作\"}), \"MAGIC_WORKBENCH\");\n        public\n static final RecipeType ORE_WASHER = new RecipeType(new \nCustomItem(Material.CAULDRON_ITEM, \"&6洗矿机\", 0, new String[] {\"\", \n\"&a使用&e洗矿机&a进行制作\"}), \"ORE_WASHER\");\n        public static\n final RecipeType ENHANCED_CRAFTING_TABLE = new RecipeType(new \nCustomItem(Material.WORKBENCH, \"&e强化合成台\", 0, new String[] {\"\", \n\"&a远古工艺的基础合成台\", \"&a普通的合成台无法进行远古工艺制作\"}), \n\"ENHANCED_CRAFTING_TABLE\");\n        public static final RecipeType \nJUICER = new RecipeType(new CustomItem(Material.GLASS_BOTTLE, \n\"&e榨汁机\", 0, new String[] {\"\", \"&a来点美味的果汁?\"}), \"JUICER\");\n    \n    public static final RecipeType ANCIENT_ALTAR = new RecipeType(new \nCustomItem(Material.ENCHANTMENT_TABLE, \"&4远古祭坛\", 0, new String[] \n{\"\", \"&d你必须通过使用远古祭坛\", \"&d执行神秘的远古魔法仪式\", \"&d才能合成出这个物品\"}));\n \n       public static final RecipeType HEATED_PRESSURE_CHAMBER = new \nRecipeType(new CustomItem(Material.STAINED_GLASS, \"&c热压力室\", 8, new \nString[] {\"\", \"&a使用&e热压力室\", \"&a来制作这个物品\"}), \n\"HEATED_PRESSURE_CHAMBER\");\n\n        public static final \nRecipeType SHAPED_RECIPE = new RecipeType(new \nCustomItem(Material.WORKBENCH, \"&e有序合成\", 0, new String[] {\"\", \n\"&a这个合成只需使用普通的合成台\"}));\n        public static final RecipeType \nSHAPELESS_RECIPE = new RecipeType(new CustomItem(Material.WORKBENCH, \n\"&e无序合成\", 0, new String[] {\"\", \"&a这个合成只需使用普通的合成台\"}));\n     \n   public static final RecipeType FURNACE = new RecipeType(new \nCustomItem(Material.FURNACE, \"&e普通熔炉合成\", 0, new String[] {\"\", \n\"&a&o只需要使用普通的熔炉制作\"}));\n        public static final RecipeType NULL = new RecipeType(null);\n\n        ItemStack item;\n        String machine;\n\n        public RecipeType(ItemStack item) {\n                this.item = item;\n                this.machine = \"\";\n                Variables.recipetypes.add(this);\n\n        }\n\n        public RecipeType(ItemStack item, String machine) {\n                this.item = item;\n                this.machine = machine;\n                Variables.recipetypes.add(this);\n        }\n\n        public RecipeType(String machine, int seconds, ItemStack[] input, ItemStack[] output) {\n                this.machine = machine;\n                SlimefunItem item = getMachine();\n                this.item = item.getItem();\n                SlimefunRecipes.registerMachineRecipe(machine, seconds, input, output);\n                Variables.recipetypes.add(this);\n        }\n\n        public ItemStack toItem() {\n                return this.item;\n        }\n\n        public SlimefunItem getMachine() {\n                return SlimefunItem.getByID(machine);\n        }\n\n        public static List<ItemStack> getRecipeInputs(SlimefunItem machine) {\n                if (machine == null) return new ArrayList<ItemStack>();\n \n               List<ItemStack[]> recipes = (machine instanceof \nSlimefunMachine ? ((SlimefunMachine) machine).getRecipes(): \n((SlimefunGadget) machine).getRecipes());\n                List<ItemStack> convertable = new ArrayList<ItemStack>();\n                for (int i = 0; i < recipes.size(); i++) {\n                        if (i % 2 == 0) convertable.add(recipes.get(i)[0]);\n                }\n                return convertable;\n        }\n\n        public static List<ItemStack[]> getRecipeInputList(SlimefunItem machine) {\n                if (machine == null) return new ArrayList<ItemStack[]>();\n \n               List<ItemStack[]> recipes = (machine instanceof \nSlimefunMachine ? ((SlimefunMachine) machine).getRecipes(): \n((SlimefunGadget) machine).getRecipes());\n                List<ItemStack[]> convertable = new ArrayList<ItemStack[]>();\n                for (int i = 0; i < recipes.size(); i++) {\n                        if (i % 2 == 0) convertable.add(recipes.get(i));\n                }\n                return convertable;\n        }\n\n        public static ItemStack getRecipeOutput(SlimefunItem machine, ItemStack input) {\n \n               List<ItemStack[]> recipes = (machine instanceof \nSlimefunMachine ? ((SlimefunMachine) machine).getRecipes(): \n((SlimefunGadget) machine).getRecipes());\n                return recipes.get(((getRecipeInputs(machine).indexOf(input) * 2) + 1))[0];\n        }\n\n        public static ItemStack getRecipeOutputList(SlimefunItem machine, ItemStack[] input) {\n \n               List<ItemStack[]> recipes = (machine instanceof \nSlimefunMachine ? ((SlimefunMachine) machine).getRecipes(): \n((SlimefunGadget) machine).getRecipes());\n                return recipes.get(((getRecipeInputList(machine).indexOf(input) * 2) + 1))[0];\n        }\n}复制代码\n\n\n然后在me.mrCookieSlime.Slimefun.Variables里加入\npublic static List<RecipeType> recipetypes = new ArrayList<>();复制代码\n\n看了教程也不会，求dalao帮忙QAQ\n\nASM ByteCode Outline给出的代码是\nRecipeType.java: \n\npackage me.Freeze_Dolphin.SlimefunRecipeEditorRL;\nimport org.objectweb.asm.*;\npublic class ASMClassRecipeTypeModify implements Opcodes {\n\n        public static byte[] dump() throws Exception {\n                \n                Main.plug.getLogger().info(\"ASM has started to modify RecipeType.class\");\n                \n                ClassWriter cw = new ClassWriter(Opcodes.ASM5);\n                MethodVisitor mv;\n                cw.visit(52, ACC_PUBLIC + ACC_SUPER, \"me/mrCookieSlime/Slimefun/Lists/RecipeType\", null, \"java/lang/Object\", null);\n\n                cw.visitSource(\"RecipeType.java\", null);\n\n                {\n                        mv = cw.visitMethod(ACC_PUBLIC, \"RecipeType\", \"(Lorg/bukkit/inventory/ItemStack;)V\", null, null);\n                        mv.visitCode();\n                        Label l0 = new Label();\n                        mv.visitLabel(l0);\n                        mv.visitLineNumber(43, l0);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/lang/Object\", \"<init>\", \"()V\", false);\n                        Label l1 = new Label();\n                        mv.visitLabel(l1);\n                        mv.visitLineNumber(44, l1);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitVarInsn(ALOAD, 1);\n                        mv.visitFieldInsn(PUTFIELD, \"me/mrCookieSlime/Slimefun/Lists/RecipeType\", \"item\", \"Lorg/bukkit/inventory/ItemStack;\");\n                        Label l2 = new Label();\n                        mv.visitLabel(l2);\n                        mv.visitLineNumber(45, l2);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitLdcInsn(\"\");\n                        mv.visitFieldInsn(PUTFIELD, \"me/mrCookieSlime/Slimefun/Lists/RecipeType\", \"machine\", \"Ljava/lang/String;\");\n                        Label l3 = new Label();\n                        mv.visitLabel(l3);\n                        mv.visitLineNumber(46, l3);\n                        mv.visitFieldInsn(GETSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"recipetypes\", \"Ljava/util/List;\");\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitMethodInsn(INVOKEINTERFACE, \"java/util/List\", \"add\", \"(Ljava/lang/Object;)Z\", true);\n                        mv.visitInsn(POP);\n                        Label l4 = new Label();\n                        mv.visitLabel(l4);\n                        mv.visitLineNumber(47, l4);\n                        mv.visitInsn(RETURN);\n                        Label l5 = new Label();\n                        mv.visitLabel(l5);\n                        mv.visitLocalVariable(\"this\", \"Lme/mrCookieSlime/Slimefun/Lists/RecipeType;\", null, l0, l5, 0);\n                        mv.visitLocalVariable(\"item\", \"Lorg/bukkit/inventory/ItemStack;\", null, l0, l5, 1);\n                        mv.visitMaxs(2, 2);\n                        mv.visitEnd();\n                }\n                {\n                        mv = cw.visitMethod(ACC_PUBLIC, \"RecipeType\", \"(Lorg/bukkit/inventory/ItemStack;Ljava/lang/String;)V\", null, null);\n                        mv.visitCode();\n                        Label l0 = new Label();\n                        mv.visitLabel(l0);\n                        mv.visitLineNumber(49, l0);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/lang/Object\", \"<init>\", \"()V\", false);\n                        Label l1 = new Label();\n                        mv.visitLabel(l1);\n                        mv.visitLineNumber(50, l1);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitVarInsn(ALOAD, 1);\n                        mv.visitFieldInsn(PUTFIELD, \"me/mrCookieSlime/Slimefun/Lists/RecipeType\", \"item\", \"Lorg/bukkit/inventory/ItemStack;\");\n                        Label l2 = new Label();\n                        mv.visitLabel(l2);\n                        mv.visitLineNumber(51, l2);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitVarInsn(ALOAD, 2);\n                        mv.visitFieldInsn(PUTFIELD, \"me/mrCookieSlime/Slimefun/Lists/RecipeType\", \"machine\", \"Ljava/lang/String;\");\n                        Label l3 = new Label();\n                        mv.visitLabel(l3);\n                        mv.visitLineNumber(52, l3);\n                        mv.visitFieldInsn(GETSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"recipetypes\", \"Ljava/util/List;\");\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitMethodInsn(INVOKEINTERFACE, \"java/util/List\", \"add\", \"(Ljava/lang/Object;)Z\", true);\n                        mv.visitInsn(POP);\n                        Label l4 = new Label();\n                        mv.visitLabel(l4);\n                        mv.visitLineNumber(53, l4);\n                        mv.visitInsn(RETURN);\n                        Label l5 = new Label();\n                        mv.visitLabel(l5);\n                        mv.visitLocalVariable(\"this\", \"Lme/mrCookieSlime/Slimefun/Lists/RecipeType;\", null, l0, l5, 0);\n                        mv.visitLocalVariable(\"item\", \"Lorg/bukkit/inventory/ItemStack;\", null, l0, l5, 1);\n                        mv.visitLocalVariable(\"machine\", \"Ljava/lang/String;\", null, l0, l5, 2);\n                        mv.visitMaxs(2, 3);\n                        mv.visitEnd();\n                }\n                {\n                        mv = cw.visitMethod(ACC_PUBLIC, \"RecipeType\", \"(Ljava/lang/String;I[Lorg/bukkit/inventory/ItemStack;[Lorg/bukkit/inventory/ItemStack;)V\", null, null);\n                        mv.visitCode();\n                        Label l0 = new Label();\n                        mv.visitLabel(l0);\n                        mv.visitLineNumber(55, l0);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/lang/Object\", \"<init>\", \"()V\", false);\n                        Label l1 = new Label();\n                        mv.visitLabel(l1);\n                        mv.visitLineNumber(56, l1);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitVarInsn(ALOAD, 1);\n                        mv.visitFieldInsn(PUTFIELD, \"me/mrCookieSlime/Slimefun/Lists/RecipeType\", \"machine\", \"Ljava/lang/String;\");\n                        Label l2 = new Label();\n                        mv.visitLabel(l2);\n                        mv.visitLineNumber(57, l2);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitMethodInsn(INVOKEVIRTUAL, \"me/mrCookieSlime/Slimefun/Lists/RecipeType\", \"getMachine\", \"()Lme/mrCookieSlime/Slimefun/Objects/SlimefunItem/SlimefunItem;\", false);\n                        mv.visitVarInsn(ASTORE, 5);\n                        Label l3 = new Label();\n                        mv.visitLabel(l3);\n                        mv.visitLineNumber(58, l3);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitVarInsn(ALOAD, 5);\n                        mv.visitMethodInsn(INVOKEVIRTUAL, \"me/mrCookieSlime/Slimefun/Objects/SlimefunItem/SlimefunItem\", \"getItem\", \"()Lorg/bukkit/inventory/ItemStack;\", false);\n                        mv.visitFieldInsn(PUTFIELD, \"me/mrCookieSlime/Slimefun/Lists/RecipeType\", \"item\", \"Lorg/bukkit/inventory/ItemStack;\");\n                        Label l4 = new Label();\n                        mv.visitLabel(l4);\n                        mv.visitLineNumber(59, l4);\n                        mv.visitVarInsn(ALOAD, 1);\n                        mv.visitVarInsn(ILOAD, 2);\n                        mv.visitVarInsn(ALOAD, 3);\n                        mv.visitVarInsn(ALOAD, 4);\n                        mv.visitMethodInsn(INVOKESTATIC, \"me/mrCookieSlime/Slimefun/api/SlimefunRecipes\", \"registerMachineRecipe\", \"(Ljava/lang/String;I[Lorg/bukkit/inventory/ItemStack;[Lorg/bukkit/inventory/ItemStack;)V\", false);\n                        Label l5 = new Label();\n                        mv.visitLabel(l5);\n                        mv.visitLineNumber(60, l5);\n                        mv.visitFieldInsn(GETSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"recipetypes\", \"Ljava/util/List;\");\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitMethodInsn(INVOKEINTERFACE, \"java/util/List\", \"add\", \"(Ljava/lang/Object;)Z\", true);\n                        mv.visitInsn(POP);\n                        Label l6 = new Label();\n                        mv.visitLabel(l6);\n                        mv.visitLineNumber(61, l6);\n                        mv.visitInsn(RETURN);\n                        Label l7 = new Label();\n                        mv.visitLabel(l7);\n                        mv.visitLocalVariable(\"this\", \"Lme/mrCookieSlime/Slimefun/Lists/RecipeType;\", null, l0, l7, 0);\n                        mv.visitLocalVariable(\"machine\", \"Ljava/lang/String;\", null, l0, l7, 1);\n                        mv.visitLocalVariable(\"seconds\", \"I\", null, l0, l7, 2);\n                        mv.visitLocalVariable(\"input\", \"[Lorg/bukkit/inventory/ItemStack;\", null, l0, l7, 3);\n                        mv.visitLocalVariable(\"output\", \"[Lorg/bukkit/inventory/ItemStack;\", null, l0, l7, 4);\n                        mv.visitLocalVariable(\"item\", \"Lme/mrCookieSlime/Slimefun/Objects/SlimefunItem/SlimefunItem;\", null, l3, l7, 5);\n                        mv.visitMaxs(4, 6);\n                        mv.visitEnd();\n                }\n\n\n                cw.visitEnd();\n\n                return cw.toByteArray();\n        }\n}\n复制代码\n\n\nVariables.java: \n\n\npackage me.Freeze_Dolphin.SlimefunRecipeEditorRL;\nimport org.objectweb.asm.*;\npublic class ASMClassVariables implements Opcodes {\n\n        public static byte[] dump() throws Exception {\n                \n                Main.plug.getLogger().info(\"ASM has started to modify Variables.class\");\n                \n                ClassWriter cw = new ClassWriter(Opcodes.ASM5);\n                FieldVisitor fv;\n                MethodVisitor mv;\n                cw.visit(52, ACC_PUBLIC + ACC_SUPER, \"me/mrCookieSlime/Slimefun/Variables\", null, \"java/lang/Object\", null);\n                \n                cw.visitSource(\"Variables.java\", null);\n                \n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"jump\", \"Ljava/util/Map;\", \"Ljava/util/Map<Ljava/util/UUID;Ljava/lang/Boolean;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"damage\", \"Ljava/util/Map;\", \"Ljava/util/Map<Ljava/util/UUID;Ljava/lang/Boolean;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"remove\", \"Ljava/util/Map;\", \"Ljava/util/Map<Ljava/util/UUID;[Lorg/bukkit/entity/Entity;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"mode\", \"Ljava/util/Map;\", \"Ljava/util/Map<Ljava/util/UUID;Ljava/lang/Integer;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"enchanting\", \"Ljava/util/Map;\", \"Ljava/util/Map<Ljava/util/UUID;Ljava/lang/Integer;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"backpack\", \"Ljava/util/Map;\", \"Ljava/util/Map<Ljava/util/UUID;Lorg/bukkit/inventory/ItemStack;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"altarinuse\", \"Ljava/util/HashSet;\", \"Ljava/util/HashSet<Lorg/bukkit/Location;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"soulbound\", \"Ljava/util/Map;\", \"Ljava/util/Map<Ljava/util/UUID;Ljava/util/List<Lorg/bukkit/inventory/ItemStack;>;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"blocks\", \"Ljava/util/List;\", \"Ljava/util/List<Ljava/util/UUID;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"cancelPlace\", \"Ljava/util/List;\", \"Ljava/util/List<Ljava/util/UUID;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"arrows\", \"Ljava/util/Map;\", \"Ljava/util/Map<Ljava/util/UUID;Lorg/bukkit/inventory/ItemStack;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        fv = cw.visitField(ACC_PUBLIC + ACC_STATIC, \"recipetypes\", \"Ljava/util/List;\", \"Ljava/util/List<Lme/mrCookieSlime/Slimefun/Lists/RecipeType;>;\", null);\n                        fv.visitEnd();\n                }\n                {\n                        mv = cw.visitMethod(ACC_STATIC, \"<clinit>\", \"()V\", null, null);\n                        mv.visitCode();\n                        Label l0 = new Label();\n                        mv.visitLabel(l0);\n                        mv.visitLineNumber(18, l0);\n                        mv.visitTypeInsn(NEW, \"java/util/HashMap\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/HashMap\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"jump\", \"Ljava/util/Map;\");\n                        Label l1 = new Label();\n                        mv.visitLabel(l1);\n                        mv.visitLineNumber(19, l1);\n                        mv.visitTypeInsn(NEW, \"java/util/HashMap\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/HashMap\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"damage\", \"Ljava/util/Map;\");\n                        Label l2 = new Label();\n                        mv.visitLabel(l2);\n                        mv.visitLineNumber(20, l2);\n                        mv.visitTypeInsn(NEW, \"java/util/HashMap\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/HashMap\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"remove\", \"Ljava/util/Map;\");\n                        Label l3 = new Label();\n                        mv.visitLabel(l3);\n                        mv.visitLineNumber(21, l3);\n                        mv.visitTypeInsn(NEW, \"java/util/HashMap\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/HashMap\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"mode\", \"Ljava/util/Map;\");\n                        Label l4 = new Label();\n                        mv.visitLabel(l4);\n                        mv.visitLineNumber(23, l4);\n                        mv.visitTypeInsn(NEW, \"java/util/HashMap\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/HashMap\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"enchanting\", \"Ljava/util/Map;\");\n                        Label l5 = new Label();\n                        mv.visitLabel(l5);\n                        mv.visitLineNumber(24, l5);\n                        mv.visitTypeInsn(NEW, \"java/util/HashMap\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/HashMap\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"backpack\", \"Ljava/util/Map;\");\n                        Label l6 = new Label();\n                        mv.visitLabel(l6);\n                        mv.visitLineNumber(25, l6);\n                        mv.visitTypeInsn(NEW, \"java/util/HashSet\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/HashSet\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"altarinuse\", \"Ljava/util/HashSet;\");\n                        Label l7 = new Label();\n                        mv.visitLabel(l7);\n                        mv.visitLineNumber(27, l7);\n                        mv.visitTypeInsn(NEW, \"java/util/HashMap\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/HashMap\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"soulbound\", \"Ljava/util/Map;\");\n                        Label l8 = new Label();\n                        mv.visitLabel(l8);\n                        mv.visitLineNumber(28, l8);\n                        mv.visitTypeInsn(NEW, \"java/util/ArrayList\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/ArrayList\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"blocks\", \"Ljava/util/List;\");\n                        Label l9 = new Label();\n                        mv.visitLabel(l9);\n                        mv.visitLineNumber(29, l9);\n                        mv.visitTypeInsn(NEW, \"java/util/ArrayList\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/ArrayList\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"cancelPlace\", \"Ljava/util/List;\");\n                        Label l10 = new Label();\n                        mv.visitLabel(l10);\n                        mv.visitLineNumber(30, l10);\n                        mv.visitTypeInsn(NEW, \"java/util/HashMap\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/HashMap\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"arrows\", \"Ljava/util/Map;\");\n                        Label l11 = new Label();\n                        mv.visitLabel(l11);\n                        mv.visitLineNumber(32, l11);\n                        mv.visitTypeInsn(NEW, \"java/util/ArrayList\");\n                        mv.visitInsn(DUP);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/util/ArrayList\", \"<init>\", \"()V\", false);\n                        mv.visitFieldInsn(PUTSTATIC, \"me/mrCookieSlime/Slimefun/Variables\", \"recipetypes\", \"Ljava/util/List;\");\n                        mv.visitInsn(RETURN);\n                        mv.visitMaxs(2, 0);\n                        mv.visitEnd();\n                }\n                {\n                        mv = cw.visitMethod(ACC_PUBLIC, \"<init>\", \"()V\", null, null);\n                        mv.visitCode();\n                        Label l0 = new Label();\n                        mv.visitLabel(l0);\n                        mv.visitLineNumber(16, l0);\n                        mv.visitVarInsn(ALOAD, 0);\n                        mv.visitMethodInsn(INVOKESPECIAL, \"java/lang/Object\", \"<init>\", \"()V\", false);\n                        mv.visitInsn(RETURN);\n                        Label l1 = new Label();\n                        mv.visitLabel(l1);\n                        mv.visitLocalVariable(\"this\", \"Lme/mrCookieSlime/Slimefun/Variables;\", null, l0, l1, 0);\n                        mv.visitMaxs(1, 1);\n                        mv.visitEnd();\n                }\n                cw.visitEnd();\n\n                return cw.toByteArray();\n        }\n}\n复制代码\n\n\n我直接在主类中调用：\ntry {\n                        ASMClassRecipeTypeModify.dump();\n                        ASMClassVariables.dump();\n                        plug.getLogger().info(Variables.recipetypes.toString());\n                } catch (Exception e) {\n                        e.printStackTrace();\n                }复制代码然后开服报错：\n[17:08:23 INFO]: [SlimefunRecipeEditorRL] Enabling SlimefunRecipeEditorRL v1.0.1\n[17:08:24 INFO]: [SlimefunRecipeEditorRL] ASM has started to modify RecipeType.class\n[17:08:24 INFO]: [SlimefunRecipeEditorRL] ASM has started to modify Variables.class\n[17:08:24 ERROR]: Error occurred while enabling SlimefunRecipeEditorRL v1.0.1 (Is it up to date?)\njava.lang.NoSuchFieldError: recipetypes\n        at me.Freeze_Dolphin.SlimefunRecipeEditorRL.Main.onEnable(Main.java:50) ~[?:?]\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:271) ~[PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:316) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:407) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.craftbukkit.v1_11_R1.CraftServer.enablePlugin(CraftServer.java:378) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.craftbukkit.v1_11_R1.CraftServer.enablePlugins(CraftServer.java:328) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.craftbukkit.v1_11_R1.CraftServer.reload(CraftServer.java:786) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.Bukkit.reload(Bukkit.java:557) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.command.defaults.ReloadCommand.execute(ReloadCommand.java:53) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:151) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.craftbukkit.v1_11_R1.CraftServer.dispatchCommand(CraftServer.java:675) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at org.bukkit.craftbukkit.v1_11_R1.CraftServer.dispatchServerCommand(CraftServer.java:638) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at net.minecraft.server.v1_11_R1.DedicatedServer.aM(DedicatedServer.java:441) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at net.minecraft.server.v1_11_R1.DedicatedServer.D(DedicatedServer.java:404) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.C(MinecraftServer.java:763) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at net.minecraft.server.v1_11_R1.MinecraftServer.run(MinecraftServer.java:661) [PaperSpigot-1.11.2-b1104.jar:git-Paper-1104]\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_242]\n[17:08:24 INFO]: [SlimefunRecipeEditorRL] Disabling SlimefunRecipeEditorRL v1.0.1\n复制代码\n\n",
    "replies": []
}