{
    "title": "Plugin already initialized!弄了一下午没弄好",
    "author": "white_cola",
    "replyCount": 3,
    "timestamp": 1561457940,
    "txt_content": "代码:\npackage whitelist.main;\n\nimport java.io.File;\nimport java.io.FileInputStream;\n\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.Listener;\nimport org.bukkit.plugin.java.JavaPlugin;\n\nimport com.google.gson.Gson;\nimport com.google.gson.GsonBuilder;\n\n\nimport whitelist.User.ItsUser;\nimport whitelist.listener.ItsListener;\n\n\npublic class TheMain extends JavaPlugin implements Listener{\n        public ItsUser tempu=new ItsUser();\n        \n\n        \n        @Override\n        public void onEnable() {\n                System.out.println(\"白名单系统已经被启动!!!!!!!!!!!!!!!!!!!!!!!!!!11\");\n                Bukkit.getServer().getPluginManager().registerEvents(new ItsListener(), this);\n        }\n\n        public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n                if(command.toString().equalsIgnoreCase(\"white\") && args[0].equalsIgnoreCase(\"add\") && args[2].toString().equals(\"robot\")) {\n                        if(isAgain(args[3])) {\n                                if(!(sender instanceof Player)) {\n                                        if(args[2]!=null && args[1]!=null) {\n\n                                                Player player = Bukkit.getPlayer(args[1].toString());\n\n                                                try {\n                                                        writeJson(args[1],args[3],player.getUniqueId().toString());\n                                                } catch (Exception e) {\n                                                        e.printStackTrace();\n                                                }\n\n                                        }\n\n                                }else {\n                                        sender.sendMessage(\"你无法使用这个指令!\");\n                                }\n                                return true;\n                        }\n                }\n\n\n                if(command.toString().equalsIgnoreCase(\"white\") && args[0].equalsIgnoreCase(\"remove\") && args[2].toString().equals(\"robot\")) {\n                        if(!(sender instanceof Player)) {\n                                deleter(args[1],tempu);\n                        }\n                        return true;\n                }\n\n\n\n\n                return false;\n        }\n        \n        public void writeJson(String PlayerName,String QQnum,String uuid) throws Exception {\n                {\n                        tempu =new ItsUser();\n                        FileInputStream input=new FileInputStream(new File(\"plugins\\\\\\\\SetHome\\\\\\\\WhiteList.json\"));\n                        byte[] temp=new byte[input.available()];\n                        input.read(temp, 0, temp.length);\n                        input.close();\n                        String users=new String(temp);\n                        Gson gson =new GsonBuilder().setLenient().setPrettyPrinting().enableComplexMapKeySerialization().create();\n                        tempu =gson.fromJson(users, ItsUser.class);\n                        if(tempu==null){\n                                tempu=new ItsUser();\n                        }\n                        ItsUser.Player tempd=new ItsUser().new Player();\n                        tempd.username=PlayerName;\n                        tempd.QQnum=QQnum;\n                        tempd.UUID=uuid;\n                        deleter(tempd.QQnum,tempu);\n                        tempu.Players.add(tempd);\n                        String gs = gson.toJson(tempu,ItsUser.class);\n                        FileOutputStream tempawa = new FileOutputStream(new File(\"plugins\\\\\\\\SetHome\\\\\\\\WhiteList.json\"));\n                        tempawa.write(gs.getBytes());\n                        tempawa.close();\n\n\n                }\n        }\n        public void deleter(String QQnum,ItsUser tempu) {\n                for(int i=0;i<tempu.Players.size();i++){\n                        if(tempu.Players.get(i).QQnum==QQnum){\n                                tempu.Players.remove(i);\n                                break;\n                        }\n                }\n        }\n        public boolean isAgain(String QQnum) {\n                for(int i=0;i<tempu.Players.size();i++){\n                        if(tempu.Players.get(i).QQnum==QQnum){\n                                return true;\n                        }\n                }\n                return false;\n        }\n        public boolean isExist(String uuid) {\n                try(FileInputStream input=new FileInputStream(new File(\"plugins\\\\\\\\SetHome\\\\\\\\WhiteList.json\"));){\n                        byte[] temp=new byte[input.available()];\n                        input.read(temp, 0, temp.length);\n                        return temp.toString().contains(uuid);\n\n                }catch(IOException e) {\n                        e.printStackTrace();\n                        System.out.println(\"检测json是否存在出现问题!文件可能json不存在\");\n\n                }\n                return false;\n        }\n}\n复制代码报错:\n[18:15:55] [Server thread/INFO]: 白名单系统已经被启动!!!!!!!!!!!!!!!!!!!!!!!!!!11\n[18:15:55] [Server thread/ERROR]: Error occurred while enabling alist v0.1 (Is it up to date?)\njava.lang.IllegalArgumentException: Plugin already initialized!\n        at org.bukkit.plugin.java.PluginClassLoader.initialize(PluginClassLoader.java:167) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.plugin.java.JavaPlugin.<init>(JavaPlugin.java:52) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at whitelist.main.TheMain.<init>(TheMain.java:25) ~[?:?]\n        at whitelist.listener.ItsListener.<init>(ItsListener.java:15) ~[?:?]\n        at whitelist.main.TheMain.onEnable(TheMain.java:33) ~[?:?]\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:263) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:352) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:416) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.enablePlugin(CraftServer.java:458) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.enablePlugins(CraftServer.java:372) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.reload(CraftServer.java:805) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.Bukkit.reload(Bukkit.java:576) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.command.defaults.ReloadCommand.execute(ReloadCommand.java:27) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:149) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.dispatchCommand(CraftServer.java:707) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.dispatchServerCommand(CraftServer.java:692) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at net.minecraft.server.v1_14_R1.DedicatedServer.handleCommandQueue(DedicatedServer.java:433) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at net.minecraft.server.v1_14_R1.DedicatedServer.b(DedicatedServer.java:397) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.a(MinecraftServer.java:957) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at net.minecraft.server.v1_14_R1.MinecraftServer.run(MinecraftServer.java:802) [spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_202]\nCaused by: java.lang.IllegalStateException: Initial initialization\n        at org.bukkit.plugin.java.PluginClassLoader.initialize(PluginClassLoader.java:170) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.plugin.java.JavaPlugin.<init>(JavaPlugin.java:52) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at whitelist.main.TheMain.<init>(TheMain.java:25) ~[?:?]\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[?:1.8.0_202]\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) ~[?:1.8.0_202]\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) ~[?:1.8.0_202]\n        at java.lang.reflect.Constructor.newInstance(Unknown Source) ~[?:1.8.0_202]\n        at java.lang.Class.newInstance(Unknown Source) ~[?:1.8.0_202]\n        at org.bukkit.plugin.java.PluginClassLoader.<init>(PluginClassLoader.java:71) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.plugin.java.JavaPluginLoader.loadPlugin(JavaPluginLoader.java:135) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.plugin.SimplePluginManager.loadPlugin(SimplePluginManager.java:333) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager.java:252) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.loadPlugins(CraftServer.java:347) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        at org.bukkit.craftbukkit.v1_14_R1.CraftServer.reload(CraftServer.java:803) ~[spigot-1.14.jar:git-Spigot-1eece4f-09a453a]\n        ... 10 more\n\n\n\n求大佬们帮忙看看",
    "replies": [
        {
            "author": "海螺螺",
            "timestamp": 1561458180,
            "txt_content": "你在 ItsListener.java:15 用了 new TheMain()，不能这么用，你要获取你主类的实例可以 JavaPlugin.getPlugin(TheMain.class)"
        },
        {
            "author": "星",
            "timestamp": 1561458240,
            "txt_content": " 本帖最后由 小星啊啊啊 于 2019-6-25 18:25 编辑 \n\n请检查你是否有两个主类(继承了两次JavaPlugin)\n或者是否new 了主类\n或者检查你是否装了两个一样的插件\n\n"
        },
        {
            "author": "white_cola",
            "timestamp": 1561458480,
            "txt_content": "754503921 发表于 2019-6-25 18:23\n你在 ItsListener.java:15 用了 new TheMain()，不能这么用，你要获取你主类的实例可以 JavaPlugin.getPlug ...\n好了,谢谢大佬!!!!"
        }
    ]
}