{
    "title": "关于在Bukkit不同版本中获取TileEntity的问题",
    "author": "William_Shi",
    "replyCount": 3,
    "timestamp": 1591494720,
    "txt_content": " 本帖最后由 William_Shi 于 2020-6-7 10:23 编辑 \n\n我一开始拿1.12.2的BukkitAPI进行开发\n然后使用的是CraftWorld#getTileEntityAt\n因为world接口是由craftworld来实现的所以反射调用的时候直接对着他用就可以了\n现在又开始使用1.15.2的API\nCraftChunk和CraftWorld都没这个方法了\n转而使用\npublic class CraftBlockEntityState<T extends TileEntity> extends CraftBlockState implements TileState \n的getTileEntity\n\n想问下这个原来使用起来传入xyz坐标的方法\n改成这个先tilestate后tile entity\n那么tile state 到底是作为怎样的一种 东西 而存在？\n究竟是BlockState 还是 Tile Entity？",
    "replies": [
        {
            "author": "Ir.Nep",
            "timestamp": 1591506660,
            "txt_content": "Spigot-API原文Represents a block state that also hosts a tile entity at the given location.\nTileState属于BlockState，TileState比BlockState多拥有了一个可以持久化存储的TileEntity"
        },
        {
            "author": "夏雨吖",
            "timestamp": 1591536120,
            "txt_content": "((CraftChunk)chunk).getHandle().getTileEntities().get(new BlockPosition(x, y, z))之前就给你说了用nms你是直接无视我了？"
        },
        {
            "author": "William_Shi",
            "timestamp": 1591538100,
            "txt_content": "M8_mve 发表于 2020-6-7 21:22\n((CraftChunk)chunk).getHandle().getTileEntities().get(new BlockPosition(x, y, z))之前就给你说了用nms ...\n还引入block pos 就不需要了\n\n现在我在使用的方法是\n\n1.12就直接 craftworld getTileEntityAt\n因为是反射，Bukkit#getWorld得到的就是obc的world\n\n1.15就直接取BlockState\n看是不是TileState\n如果是，那么就直接转成这个实现类\n\n因为这个CraftBlockEntityState\n在1.12就有了\n但是1.12没有TileState这个东西\n所以使用getTileEntityAt来规避了\n"
        }
    ]
}