{
    "title": "浅谈Mc中递归的实现(cb)",
    "author": "彪悍的新手",
    "replyCount": 4,
    "timestamp": 1499063520,
    "txt_content": " 本帖最后由 彪悍的新手 于 2017-7-3 15:04 编辑 \n\n\n前言\n\n调用自身的操作叫做递归\n本贴讨论较为基础的递归操作\n(本帖将一串命令方块看似一个函数)\n(部分图片来源网络，如果侵权请联系本人删除)\n\n\n\n在函数尾部的递归\n\n这个就像是首位相接的的命令方块串\n实现的方式有很多种\n跳出递归可以使用scb来判断次数或者更多的条件限制\n譬如这样\n/scoreboard players test @p f 0 100\n/setblock x y z redstone_block复制代码\n与其说是递归\n不如说更像是for循环\n\n\n\n\np1.png (15.39 KB, 下载次数: 0)\n\n下载附件\n\n2017-7-3 13:48 上传\n\n\n\n\n\n\n\n\n更加复杂的递归\n\n如果我们可以在mc中画一个二叉树，那就不是很好办了。\n\n\n\n\np2.jpg (22.58 KB, 下载次数: 0)\n\n下载附件\n\n2017-7-3 13:51 上传\n\n\n\n\n\n\n先从简单的想起\n例如一个在“函数”中部的递归\n先执行完前半部分，然后执行递归\n然后执行后半部分\n例如下图\n\n\n\n\np3.png (13.08 KB, 下载次数: 0)\n\n下载附件\n\n2017-7-3 13:55 上传\n\n\n\n\n\n最后再执行尾部\n从图上可以很好看出执行过程\n\n然而这样会遇到一个问题\n\n\n\n\np4.png (140.68 KB, 下载次数: 0)\n\n下载附件\n\n2017-7-3 13:59 上传\n\n\n\n\n\n例如图上红圈处是递归部分\n而当第一次执行到这里时\n第二次就开始了\n第一次执行到下一个时\n第二次才执行到第二个CB\n显然不符合要求\n而且一旦执行次数多\n就有BUG的可能性\n所以这种情况下\n必须只有在前一个函数彻底执行完毕才可以继续往下\n可以将函数分段，分为递归前和递归后两段\n\n\n\n\np5.png (84.5 KB, 下载次数: 0)\n\n下载附件\n\n2017-7-3 14:29 上传\n\n\n\n\n\n多增加一些判断来进行回调\n只有模拟计算机中函数的操作才可以\n每当函数被调用时\n申请一个空间\n函数调用结束时，\n删除空间\n也就是说用类似clone的命令将整个CB串复制\n然后再执行\n也许有人会问，那样的话复制的位置怎么办\n可以用如盔甲架这样的实体一个一个的复制（execute）\n然后调用结束时同时删除盔甲架和临时的CB串\n函数头:\n    压入栈;\n函数中段:\n    执行任务;\n函数尾:\n    弹出栈;\n\n\n\n递归:\n    申请新栈;\n    将下个函数压入栈（重复函数头）;\n复制代码\n\n\n形式参数的传递\n\n很显然递归中有一个参数在传递\n这里可以用一个计分板中的各种盔甲架的分数来传递\n用scoreboard players operation来操作\n最后刚好可以把盔甲架来删除\n\nTips:标记一个计分板可以使用先后出现的时间来操作，如果递归在函数中不多（≤1）的情况下可以采用每次召唤新盔甲架时分数+1，然后第一次就是1，第二次就是2……这样可能可以做到（伪）地址传递。如果递归较多，那可能只能表示一次节点上的所有盔甲架。\n\n\n\n其他可能实现的方式\n\n前面讲到利用/clone来操作的方法\n现在我发现一种（似乎）更加优秀的方法\n但是还有点未知的地方\n比如如何回调还是没有准确的方法\n就是让盔甲架之类的实体召唤更多的盔甲架，然而删除自己，让其他盔甲架执行命令\n适合简单的（伪）递归操作\n\n\n\n后记\n\n由于各种懒癌，本人暂时没有成品，但是理论上是可行的，如果有其他的想法希望能通知我一声XD。\n可能具体制作起来还是有一点困难，希望各位大佬多给点意见。\n\n@LBL_CB @阴阳师元素祭祀 @MsYqgzt @乙烯_中国 @FHC红石 \n[groupid=1009]The Command's Power[/groupid]",
    "replies": [
        {
            "author": "pca006132",
            "timestamp": 1499064060,
            "txt_content": " 本帖最后由 pca006132 于 2017-7-3 14:48 编辑 \n\n我看到函数还以为是说的命令函数(function)...\n\n其实命令方块的递归还是把递归变为stack + 循环比较好...把分数、当前状态放进stack里然后循环下一遍，那样就不需要那么多组cb了。\n至于暂停的部分可以利用auto:0b，用marker execute的话还是比较方便的\n毕竟cb不是编程，cb优化不代表编程优化，编程优化不代表cb优化，申请空间啥的不是所有人都知道，也没必要说得那么复杂\n"
        },
        {
            "author": "langyo_v3",
            "timestamp": 1499065140,
            "txt_content": "其实……你只要实现一个只暴露接口的栈不就好了？"
        },
        {
            "author": "归燕",
            "timestamp": 1499078460,
            "txt_content": "表示完全看不懂\n楼主真的很6\n这是真心话\n我自认为我没有在水"
        },
        {
            "author": "QAQda",
            "timestamp": 1499313480,
            "txt_content": "好东西=0="
        }
    ]
}