{
    "title": "监听事件问题",
    "author": "CCxia",
    "replyCount": 6,
    "timestamp": 1551203340,
    "txt_content": "我想每时每刻都能获取到玩家以及玩家的信息，这个该怎么实现？要在哪个位置写？\n比如我创建了一个新附魔类型，每个生物只要靠近玩家就会受到伤害，该如何获得玩家的实时位置信息？",
    "replies": [
        {
            "author": "CCxia",
            "timestamp": 1551203520,
            "txt_content": "版本是1.12.2，forge实现"
        },
        {
            "author": "粘兽",
            "timestamp": 1551207000,
            "txt_content": "监听PlayerMoveEvent即可"
        },
        {
            "author": "3TUSK",
            "timestamp": 1551220800,
            "txt_content": "@SubscribeEvent\npublic static void onTick(TickEvent.PlayerTickEvent event) {\n    if (event.side == Side.SERVER) { // 客户端上不应出现游戏逻辑\n        EntityPlayer player = event.player;\n        if (event.phase == TickEvent.Phase.END) { // 也可以是 TickEvent.Phase.START，取决于实际情况。START 在 tick 之前发布，END 则是之后\n            // 你要的逻辑。\n            for (EntityMob mob : player.world.getEntitiesWithinAABB(EntityMob.class, new AxisAlignedBB(-5, -5, -5, 5, 5, 5))) {\n                mob.setDead();\n            }\n        }\n    }\n}复制代码"
        },
        {
            "author": "CCxia",
            "timestamp": 1551235920,
            "txt_content": "u.s.knowledge 发表于 2019-2-27 06:40\n谢谢大佬了，大致写法都没问题了，把括号里的数字加上player.posX/Y/Z就行了"
        },
        {
            "author": "RaycusMX",
            "timestamp": 1551261480,
            "txt_content": "u.s.knowledge 发表于 2019-2-27 06:40\n客户端是可以出现游戏逻辑的，因为客户端里也有一个内置服务端。"
        },
        {
            "author": "3TUSK",
            "timestamp": 1551296640,
            "txt_content": "RaycusMX 发表于 2019-2-27 17:58\n客户端是可以出现游戏逻辑的，因为客户端里也有一个内置服务端。\n你说的是物理客户端上有一个逻辑服务器。游戏逻辑一定会在逻辑服务器上发生，而不是逻辑客户端上。（虽然逻辑客户端一定会出现在物理客户端上就是了。）\n\n// 也就是说——这样写更 robust 一些\nif (!world.isRemote) {\n    // 逻辑\n}\n\n// 对于上面的代码，那就是：\nif (!player.world.isRemote) {\n    // 逻辑\n}复制代码"
        }
    ]
}