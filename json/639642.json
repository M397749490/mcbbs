{
    "title": "[安全|修正]AntiDeathBug v1.1.1——自动修复0血BUG[1.7.10]",
    "author": "hammer354",
    "replyCount": 65,
    "timestamp": 1475678700,
    "txt_content": " 本帖最后由 hammer354 于 2017-9-15 14:45 编辑 \n卡0血指的是服务器内个别玩家血量为0但未死亡，仍可移动和攻击但不可被攻击，打不开背包并无法捡起掉落物的情况，处理方法一般是删除world/playerdata内指定玩家的数据文件。但按照此方法修复的话玩家的背包、个别Mod的数据记录（如神秘时代4的研究进程）都将重置，若被玩家故意卡出并用于PvP、刷副本，将极大的影响服务器的平衡性。\n以上介绍引用自zzx19991105的NBTFixer插件发布帖，其实在TA发布插件之前我已开发过相同功能的插件，只不过没有发布，由于TA发布的插件存在使金苹果无效的Bug，而我的插件没有这个问题，所以决定发布我的插件。\n\n使用前：\n\n\n\n\n2016-10-04_17.46.23.jpg (110.81 KB, 下载次数: 15)\n\n下载附件\n\n2016-10-5 22:30 上传\n\n\n\n\n\n使用后：\n\n\n\n\n2016-10-04_17.46.39.png (248.87 KB, 下载次数: 15)\n\n下载附件\n\n2016-10-5 22:38 上传\n\n\n\n\n\n卡出0血后插件将自动修复并提示，此提示仅当事玩家、OP和控制台可见。\n\n配置文件：\n每隔多少秒检查一次玩家？插件记录各个玩家的上线时间，每隔一段时间对该玩家进行检查，不是同时检查全部玩家，因此不会造成卡顿。\ninterval: 5\n\n前置插件：\nPowerNBT\n\n下载：\n\n\n\nAntiDeathBug.jar\n(14.75 KB, 下载次数: 1608)\n\n\n\n2017-9-15 14:43 上传\n点击文件名下载附件\nv1.1.1\n\n\n\n\n\n\n旧版本：\n\n\n\n\nAntiDeathBug.jar\n(14.71 KB, 下载次数: 711)\n\n\n\n2016-11-27 16:15 上传\n点击文件名下载附件\nv1.1\n\n\n\n\n\n\n\n\nAntiDeathBug.jar\n(2.13 KB, 下载次数: 99)\n\n\n\n2016-10-5 22:46 上传\n点击文件名下载附件\nv1.0\n\n\n\n\n\n\n更新日志：\n2017/09/15更新v1.1.1：修复高版本服务端无法使用的问题\n2016/11/27更新v1.1：修复卡顿问题、添加配置文件",
    "replies": [
        {
            "author": "kkk154",
            "timestamp": 1475686920,
            "txt_content": "话说，这个插件不会生成配置文件的吗？"
        },
        {
            "author": "堕星辰",
            "timestamp": 1475698320,
            "txt_content": "这个bug1.8还有么?"
        },
        {
            "author": "hammer354",
            "timestamp": 1475718540,
            "txt_content": "堕星辰 发表于 2016-10-6 04:12\n这个bug1.8还有么?\n不清楚，我只在1.7.10的Mod服遇到过。"
        },
        {
            "author": "hammer354",
            "timestamp": 1475719320,
            "txt_content": "kkk154 发表于 2016-10-6 01:02\n话说，这个插件不会生成配置文件的吗？\n不会的，不需要。"
        },
        {
            "author": "azbh111",
            "timestamp": 1475981880,
            "txt_content": "这个插件卡服\n有多卡呢\n服务器在线30人 用timings统计了一小时\n发现这个插件使用资源占了60%  人越多越明显,大部分CPU都被这插件占去了"
        },
        {
            "author": "Lodest",
            "timestamp": 1479033780,
            "txt_content": "此插件卡服务器严重······有时候会造成严重的滞后，或者玩家退出后不能正常登陆，服务器卡死（并不崩溃···），只能靠重启解决"
        },
        {
            "author": "zx1466164798",
            "timestamp": 1479042840,
            "txt_content": "有这个bug马？"
        },
        {
            "author": "hammer354",
            "timestamp": 1480237980,
            "txt_content": "zx1466164798 发表于 2016-11-13 21:14\n有这个bug马？\n有，可能你还没遇到。"
        },
        {
            "author": "hammer354",
            "timestamp": 1480238160,
            "txt_content": "azbh111 发表于 2016-10-9 10:58\n这个插件卡服\n有多卡呢\n服务器在线30人 用timings统计了一小时\n已修复，请下载新版本。"
        },
        {
            "author": "hammer354",
            "timestamp": 1480238220,
            "txt_content": "Lodest 发表于 2016-11-13 18:43\n此插件卡服务器严重······有时候会造成严重的滞后，或者玩家退出后不能正常登陆，服务器卡死（并不崩 ...\n已修复，请下载新版本。"
        },
        {
            "author": "328978983",
            "timestamp": 1480679220,
            "txt_content": "NBTFixer可以用，但是这个插件不行。。。"
        },
        {
            "author": "328978983",
            "timestamp": 1480680960,
            "txt_content": "328978983 发表于 2016-12-2 19:47\nNBTFixer可以用，但是这个插件不行。。。\n噢，好像是修复方式不同耶。NBTFixer装上去以后就会立即修复有问题的，但是这个插件好像不能修复已出现bug的玩家吧，是装上这个插件以后，出现了bug才会修复的。"
        },
        {
            "author": "hammer354",
            "timestamp": 1481548980,
            "txt_content": " 本帖最后由 hammer354 于 2017-9-15 14:49 编辑 \n328978983 发表于 2016-12-2 20:16\n噢，好像是修复方式不同耶。NBTFixer装上去以后就会立即修复有问题的，但是这个插件好像不能修复已出现bu ...\n这个插件和NBTFixer的工作方式类似，已出现Bug的一样可以修复。"
        },
        {
            "author": "阿瑞zhu",
            "timestamp": 1481950980,
            "txt_content": "这个bug之前烦我半天，谢谢楼主"
        },
        {
            "author": "hlrlqy",
            "timestamp": 1481977920,
            "txt_content": "你好 我是NBTFixer的作者 我比对了你和我代码的区别 +\n你的playerData.put(\"AbsorptionAmount\", Float.valueOf(0.0F));\n          playerData.put(\"HealF\", Float.valueOf(20.0F));\n          AntiDeathBug.this.manager.write(this.val$player, playerData);复制代码\n我的 n.remove(\"AbsorptionAmount\");\n      n.put(\"AbsorptionAmount\", Float.valueOf(0.0F));\n      n.put(\"HealF\", Float.valueOf(20.0F));\n      this.nbt.write(e.getPlayer(), n);复制代码\n我不知道为什么会导致金苹果失效 是因为移除那个标签的问题吗？"
        },
        {
            "author": "hammer354",
            "timestamp": 1482040080,
            "txt_content": "hlrlqy 发表于 2016-12-17 20:32\n你好 我是NBTFixer的作者 我比对了你和我代码的区别 +\n你的\n我的\n出现0血Bug时AbsorptionAmount会变成NaN，使用金苹果时会从0变成其他数值，你的判断方式是检查到数值不为0就修复，所以使金苹果失效。此外你监听了玩家移动事件来进行检查，然而该事件触发频率很高，移动很小的距离都会触发好几次，所以导致严重卡服。"
        },
        {
            "author": "hlrlqy",
            "timestamp": 1482049560,
            "txt_content": "hammer354 发表于 2016-12-18 13:48\n出现0血Bug时AbsorptionAmount会变成NaN，使用金苹果时会从0变成其他数值，你的判断方式是检查到数值不为 ...\n效率问题我在第二个版本已经修复 但没发布 我看你写的也是直接改成0 谢谢提供思路 打算下周更新"
        },
        {
            "author": "1349259747",
            "timestamp": 1482648540,
            "txt_content": "好东西啊。。。。。。。。。。。。"
        },
        {
            "author": "EsHappyさん",
            "timestamp": 1484054220,
            "txt_content": "装了卡服，TPS问题降低很严重，独立机。"
        },
        {
            "author": "hammer354",
            "timestamp": 1484226180,
            "txt_content": "zz1171705171 发表于 2017-1-10 21:17\n装了卡服，TPS问题降低很严重，独立机。\n请检查你下载的是否为v1.1的新版本，而不是v1.0的旧版本。"
        },
        {
            "author": "丁帅淇",
            "timestamp": 1486284780,
            "txt_content": "堕星辰 发表于 2016-10-6 04:12\n这个bug1.8还有么?\n有我服务器就是  0血无敌"
        },
        {
            "author": "pzhYelanG",
            "timestamp": 1498889520,
            "txt_content": "为什么前置下载不了"
        },
        {
            "author": "天真大大",
            "timestamp": 1500632640,
            "txt_content": "有1.7.2的吗"
        },
        {
            "author": "hammer354",
            "timestamp": 1501937460,
            "txt_content": "pzhYelanG 发表于 2017-7-1 14:12\n为什么前置下载不了\n国外网站如果访问不了建议翻墙"
        },
        {
            "author": "hammer354",
            "timestamp": 1501937580,
            "txt_content": "天真大大 发表于 2017-7-21 18:24\n有1.7.2的吗\n应该通用的"
        },
        {
            "author": "FG。",
            "timestamp": 1503124020,
            "txt_content": "interval: 5           这个是隔五秒检查一次吗0.0         我可以在config.yml中修改为interval: 60或者interval: 300吗  "
        },
        {
            "author": "FG。",
            "timestamp": 1503322500,
            "txt_content": "这个插件为什么没有用啊，别人发生了假死还是一样啊0.0"
        },
        {
            "author": "2696853514",
            "timestamp": 1503714000,
            "txt_content": "为什么出现BUG后依然是0血，等了好几个小时才恢复，然后恢复过程中打一下就又成0血了"
        },
        {
            "author": "wy5629841",
            "timestamp": 1503821880,
            "txt_content": "你好请问1.10.2能用吗"
        },
        {
            "author": "力挽狂澜99v",
            "timestamp": 1504363260,
            "txt_content": "我KC端 不生成配置文件 是1.1 很奇怪"
        },
        {
            "author": "hammer354",
            "timestamp": 1505458320,
            "txt_content": "FG。 发表于 2017-8-19 14:27\ninterval: 5           这个是隔五秒检查一次吗0.0         我可以在config.yml中修改为interval: 60或者in ...\n是的，不过不建议把间隔调那么大。"
        },
        {
            "author": "hammer354",
            "timestamp": 1505458440,
            "txt_content": "FG。 发表于 2017-8-21 21:35\n这个插件为什么没有用啊，别人发生了假死还是一样啊0.0\n请确定安装了前置插件，并检查日志中这个插件是否正常加载。"
        },
        {
            "author": "hammer354",
            "timestamp": 1505463420,
            "txt_content": "2696853514 发表于 2017-8-26 10:20\n为什么出现BUG后依然是0血，等了好几个小时才恢复，然后恢复过程中打一下就又成0血了 ...\n除非你修改了间隔时间，否则不可能要好几个小时才修复，另外检查下插件是否成功加载。"
        },
        {
            "author": "hammer354",
            "timestamp": 1505463480,
            "txt_content": "wy5629841 发表于 2017-8-27 16:18\n你好请问1.10.2能用吗\n新版本已可用"
        },
        {
            "author": "hammer354",
            "timestamp": 1505463540,
            "txt_content": "力挽狂澜99v 发表于 2017-9-2 22:41\n我KC端 不生成配置文件 是1.1 很奇怪\n检查下是否安装了前置插件，插件是否正常加载。"
        },
        {
            "author": "mynameisAide",
            "timestamp": 1505466480,
            "txt_content": "支持支持"
        },
        {
            "author": "天真大大",
            "timestamp": 1507036560,
            "txt_content": "有1.7.2的吗？\n有的话加我QQ619700753"
        },
        {
            "author": "Ghostxy",
            "timestamp": 1507048320,
            "txt_content": "只支持1.7.10？"
        },
        {
            "author": "hammer354",
            "timestamp": 1507103760,
            "txt_content": "天真大大 发表于 2017-10-3 21:16\n有1.7.2的吗？\n有的话加我QQ619700753\n没有支持更低版本的打算"
        },
        {
            "author": "hammer354",
            "timestamp": 1507103760,
            "txt_content": "Ghostxy 发表于 2017-10-4 00:32\n只支持1.7.10？\n理论上向上兼容"
        },
        {
            "author": "hzc743514984",
            "timestamp": 1551799560,
            "txt_content": "修复服务器卡顿的BUG了吗？"
        },
        {
            "author": "shipuni",
            "timestamp": 1558367340,
            "txt_content": "单机可以用吗"
        },
        {
            "author": "sg1552914356",
            "timestamp": 1558524660,
            "txt_content": "感谢大佬分享"
        },
        {
            "author": "li12332112",
            "timestamp": 1559138880,
            "txt_content": "感谢分享，以前卡了0血bug只能让寰宇剑砍死就很不方便"
        },
        {
            "author": "xiaoyaodexiaoli",
            "timestamp": 1560144660,
            "txt_content": "从另一个功能一样的插件贴过来的，那个真的卡死了，用用这个试试"
        },
        {
            "author": "xiaoyaodexiaoli",
            "timestamp": 1560230280,
            "txt_content": "楼主，没法用啊，配置文件都已确认过已生成，但是零血BUG出来后还是没有修复啊，配置文件没有调"
        },
        {
            "author": "xiaoyaodexiaoli",
            "timestamp": 1560230760,
            "txt_content": "好吧我收回我的话，我发现是前置的问题，我下载了不一样的前置就好了，很好用，谢谢楼主"
        },
        {
            "author": "FZyang",
            "timestamp": 1560476640,
            "txt_content": "MCBBS有你更精彩~"
        },
        {
            "author": "BlueHalo",
            "timestamp": 1560559860,
            "txt_content": "所以说，这个bug对非rpg服基本没有影响咯"
        },
        {
            "author": "BlueHalo",
            "timestamp": 1560560160,
            "txt_content": "幸好留意了一下“可以吃金PP”那句话，不然就误认为是抄袭了qwq"
        },
        {
            "author": "MC_XO",
            "timestamp": 1563221400,
            "txt_content": "收藏了留着备用"
        },
        {
            "author": "夕离丶",
            "timestamp": 1563247740,
            "txt_content": "一直卡0血！这样的bug很凡人！但是使用这个插件后！awa"
        },
        {
            "author": "东药君",
            "timestamp": 1581215700,
            "txt_content": "堕星辰 发表于 2016-10-6 04:12\n这个bug1.8还有么?\n有的呢。。\n我朋友就卡出来了。。"
        },
        {
            "author": "634561738",
            "timestamp": 1582542780,
            "txt_content": "请问一下楼主，我的服务器因为这个插件卡服，而且不能删除，删除的话服务器启动不了，然后不删除插件的情况下运行了几个小时，现在服务器不管删不删除都启动不了了，求个解决方案"
        },
        {
            "author": "Elphant_LK",
            "timestamp": 1582681680,
            "txt_content": "nbt也装了 插件也装了 没反应啊"
        },
        {
            "author": "hudie_",
            "timestamp": 1586870100,
            "txt_content": "我正好遇到这个问题 谢谢 哈 我正好需要插件"
        },
        {
            "author": "方块大师",
            "timestamp": 1587543060,
            "txt_content": "bug超难受。谢谢楼主"
        },
        {
            "author": "3139286275",
            "timestamp": 1598199900,
            "txt_content": "没遇见过"
        },
        {
            "author": "妹妹大人",
            "timestamp": 1598410980,
            "txt_content": "3139286275 发表于 2020-8-24 00:25\n没遇见过\n貌似零血BUG是伤害数据过大导致的，一般生存服不会遇见。"
        },
        {
            "author": "黑星星",
            "timestamp": 1601976600,
            "txt_content": "634561738 发表于 2020-2-24 19:13\n请问一下楼主，我的服务器因为这个插件卡服，而且不能删除，删除的话服务器启动不了，然后不删除插件的情况 ...\n和我遇到的情况一样，求作者解决"
        },
        {
            "author": "cqdada",
            "timestamp": 1602590340,
            "txt_content": "很我可以需要先用上了"
        },
        {
            "author": "NiXi_Wind",
            "timestamp": 1610947200,
            "txt_content": "谢谢楼主分享哦~"
        },
        {
            "author": "1070150591",
            "timestamp": 1611130800,
            "txt_content": "1.12.2猫端似乎没有作用\n查看玩家dat文件发现health=NaN\n装了插件后也没有自动更改玩家的NBT标签"
        },
        {
            "author": "jiang20050714",
            "timestamp": 1611193140,
            "txt_content": "终于找到这个插件了，感谢"
        },
        {
            "author": "虎牙游舒锴",
            "timestamp": 1612504560,
            "txt_content": "插件挺好"
        }
    ]
}