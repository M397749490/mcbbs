{
    "title": "VaultAPI导入完毕后，怎么才可以进行金币操作",
    "author": "枫黎秋",
    "replyCount": 7,
    "timestamp": 1588572180,
    "txt_content": "导入完毕VaultAPI后，怎样才可以进行减少或者增加玩家的金币，求大佬帮助",
    "replies": [
        {
            "author": "南柯郡守",
            "timestamp": 1588573260,
            "txt_content": " 本帖最后由 南柯郡守 于 2020-5-4 14:23 编辑 \n\nVault有实例教程的if(!setupEconomy()) {\n    getServer().getPluginManager().disablePlugin(this);\n    this.getPluginLoader().disablePlugin(this);\n    throw new RuntimeException(\"§5未检测到或未正确安装Vault,插件无法运行！\");\n                }复制代码boolean setupEconomy() {\n    if(Bukkit.getPluginManager().getPlugin(\"Vault\")==null) {\n        return false;\n    }\n    RegisteredServiceProvider<Economy> rsp = getServer().getServicesManager().getRegistration(Economy.class);\n    if (rsp == null) {\n        return false;\n    }\n    econ = rsp.getProvider();\n    return econ != null;\n}复制代码\n\n以上代码摘自Vault实例教程并稍加改动\n\n\n第一段代码放在onEnable()中第二段是一个方法\n"
        },
        {
            "author": "枫黎秋",
            "timestamp": 1588573380,
            "txt_content": "南柯郡守 发表于 2020-5-4 14:21\nVault有实例教程的\n\n以上代码摘自Vault实例教程并稍加改动\n请问大佬，检测完安装了Vault插件后，减少玩家金币怎么操作？"
        },
        {
            "author": "枫黎秋",
            "timestamp": 1588573620,
            "txt_content": "南柯郡守 发表于 2020-5-4 14:21\nVault有实例教程的if(r.transactionSuccess()) {\n                sender.sendMessage(String.format(\"You were given %s and now have %s\", econ.format(r.amount), econ.format(r.balance)));\n            } else {\n                sender.sendMessage(String.format(\"An error occured: %s\", r.errorMessage));\n            }复制代码"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1588573680,
            "txt_content": "枫黎秋 发表于 2020-5-4 14:23\n请问大佬，检测完安装了Vault插件后，减少玩家金币怎么操作？\n\n    Player player = e.getPlayer();\n    double amount = 100d;//100块钱\n    EconomyResponse r = econ.withdrawPlayer(player, amount);//扣除玩家100块钱\n    if(r.transactionSuccess()) {\n        //如果扣钱成功 执行这里\n    }else {\n        //如果扣钱失败 执行这里\n    }\n    EconomyResponse rs = econ.depositPlayer(player, amount);//给玩家玩家100块钱\n    if(rs.transactionSuccess()) {\n        //如果给钱成功 执行这里\n    }else {\n        //如果给钱失败 执行这里\n    }\n复制代码"
        },
        {
            "author": "枫黎秋",
            "timestamp": 1588573860,
            "txt_content": "南柯郡守 发表于 2020-5-4 14:28\n感谢大佬"
        },
        {
            "author": "Ray_Hughes",
            "timestamp": 1588813980,
            "txt_content": "虽然lz解决了 但是我还是来补一刀\n\n不用那么麻烦的 来听我一言 只用一行\n不需要注册 直接写 \nTabooLibAPI.getPluginBridge().economyGive(p,value);\n\nTabooLibAPI.getPluginBridge().economyTake(p,value);\n\nTabooLib5 温柔代码 方便世界"
        },
        {
            "author": "枫黎秋",
            "timestamp": 1588814220,
            "txt_content": "Ray_Hughes 发表于 2020-5-7 09:13\n虽然lz解决了 但是我还是来补一刀\n\n不用那么麻烦的 来听我一言 只用一行\n感谢大佬，学到了"
        }
    ]
}