{
    "title": "Tiger的插件开发  监听器（6） 从入门到精通",
    "author": "tiger999",
    "replyCount": 10,
    "timestamp": 1450882020,
    "txt_content": " 本帖最后由 tiger999 于 2016-8-15 12:35 编辑 \n\n没想到我居然刚写完，第二篇就继续写了。。。大家不必感到奇怪，我是一个小学生(请大家不要误解，也不要吐槽，我是一个纯洁的小学生)\n上节课我布置了作业^_^，那么无论看了答案的童鞋是发现自己对了还是错了，都给自己鼓掌，当然，除了那些连作业都没有做的人-_-\n答案是\n\n//首先说一下，我的答案是实现的一种，大家的答案假如和我的方式不一样的话，可以在下楼回复哦！\n//还有一个就是，我读取的message路径里的东西\npackage com.github.tiger;\nimport java.io.File;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.plugin.java.JavaPlugin;\npublic class MyFirstPlugin extends JavaPlugin{\n public void onEnable() {\n    if(!getDataFolder().exists()) {\n      getDataFolder().mkdir();\n    }\n    File file=new File(getDataFolder(),\"config.yml\");\n    if (!(file.exists())) {saveDefaultConfig();}\n    reloadConfig();\n    getLogger().info(\"启用完毕！\");\n  }\n public void onDisable(){\n  \n }\n @Override\n public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args){if (cmd.getName().equalsIgnoreCase(\"tiger\")){\n  if (args[0].equalsIgnoreCase(\"msg\")){\n   String msg=getConfig().getString(\"message\");\n   sender.sendMessage(msg);\n  }\n  return true;\n }\n return false;\n }\n}\nConfig文件里面的话就是\nmessage:\n\n\n你对了吗？\n\nOK，我们开始讲监听器，监听器这鬼东西，真是不好说\n说监听之前，得先说说什么是事件\n什么事件呢？\n事件的意思大家可能都是发生了什么新闻之类的啊\n插件里面的事件也是新闻，当然，不是大事，而是微不足道的小事，小到玩家移动，水流动，玩家捡起东西......\n那么，监听器就是去监听，并会把这个事件返回给插件，插件就根据这些信息进行各种各样的事情\n我们首先先做一个监听器，不监听，怎么可以呢？\n我们首先先创建一个空的插件(详细)\n这次和以前有一点不同，我们首先把命令执行器删掉\n然后呢，我们把\npublic class xxxxx extends JavaPlugin\n这里后面加上一个implements Listener\nOK，现在添加了一个监听器，但是还不够，我们添加了是添加了，但是还得注册一下，我们上节课讲了onEnable()，所以呢，我们就在onEnable里面来注册\n我们在里面加上\nBukkit.getPluginManager().registerEvents(this, this);\nYEAH，一个可以用的监听器就制作好了，可是问题是我们还没有给他任务，他都不知道是干什么，怎么用(观众:小编！)\n呵呵，这里我们在里面加一个\n@EventHandler\n@EventHandler表明下面{}里面的东西是监听的东西\n我们写了以后，在@EventHandler下面写\npublic void xxx(监听器种类 evt){\n}\n比如说\npublic void PlayerJoin(PlayerJoinEvent evt){\n}\nOK，这个就是当玩家登陆时触发的监听器\n当然，他监听到了，会返回信息给你，准确来说，是他有许多的method\n比如说，我上面写的那个，他就有一个getPlayer()\n那么我要获取那个玩家就是\nPlayer player=evt.getPlayer()\n这样子，evt.是什么意思呢？evt.大家可以理解为，监听器创建了一个盒子，就是evt盒子，里面有许多的信息，他就在evt这个盒子里面找东西\n监听器也有许多不同的种类，比如说\npublic void PlayerMove(PlayerMoveEvent evt){\n}\n这个就是当一个玩家移动时候触发的，他的PlayerMoveEvent是这样的\nPlayerMoveEvent(Player player, Location from, Location to) \n那么，他就会给你返回Player(玩家) from(从哪里) to(到哪里)\n他的Method就有\ngetPlayer()\ngetTo()\ngetFrom()\nOK，我们做到了这些，我们就可以用这些来做一个东西\n比如说，当一个玩家登陆的时候他就显示欢迎(玩家名)\n @EventHandler\n public void onPlayerJoin(PlayerJoinEvent evt){\n  Player p=evt.getPlayer();\n  Bukkit.broadcastMessage(\"欢迎玩家\"+p.getName());\n }\nOK，这里有一个Bukkit.broadcastMessage()就是给全服发信息\n就这么的简单！\n我们还可以再加一个\np.sendMessage(\"欢迎你！\");\n这样子，这个sendMessage()就是给某个玩家发东西，这里我就是给p发东西，p就是登陆的玩家！\n大家可能还有许多疑问，有哪些其他种类的呢？大家可以去看API\nAPI\n这个东西里面是整个插件核心里面的东西里面的所有东西几乎都有！\n大家可以找到event，在里面找你要的东西\n作业:\n结合上次作业和API，做一个玩家加入游戏的时候，读取config并显示出去\n回到索引贴\n\n\n",
    "replies": [
        {
            "author": "RecursiveG",
            "timestamp": 1450883700,
            "txt_content": " 本帖最后由 RecursiveG 于 2015-12-23 23:18 编辑 \n\n教程贴要求正确使用[code]标记包围代码。请楼主修改"
        },
        {
            "author": "tiger999",
            "timestamp": 1450965660,
            "txt_content": "RecursiveG 发表于 2015-12-23 23:15\n教程贴要求正确使用[code]标记包围代码。请楼主修改\n不是我不想用，是每次一用code\n他就会出现成堆成堆的乱码{:10_530:}"
        },
        {
            "author": "爱杂食的圳",
            "timestamp": 1451699280,
            "txt_content": "tiger999 发表于 2015-12-24 22:01\n不是我不想用，是每次一用code\n他就会出现成堆成堆的乱码\ntiger999大大，您可以尝试使用World文档，然后截图。\n使用图床上传，这样效果会比较好。【图床是有免费的】"
        },
        {
            "author": "tiger999",
            "timestamp": 1451710860,
            "txt_content": "爱杂食的圳 发表于 2016-1-2 09:48\ntiger999大大，您可以尝试使用World文档，然后截图。\n使用图床上传，这样效果会比较好。【图床是有免费的 ...\n嗯，好的！"
        },
        {
            "author": "抑制不住的",
            "timestamp": 1451798160,
            "txt_content": "顶楼主，长知识了，原来还有这个玩意"
        },
        {
            "author": "tiger999",
            "timestamp": 1451823900,
            "txt_content": "抑制不住的 发表于 2016-1-3 13:16\n顶楼主，长知识了，原来还有这个玩意\n谢谢你的支持！"
        },
        {
            "author": "抑制不住的",
            "timestamp": 1451887500,
            "txt_content": "tiger999 发表于 2016-1-3 20:25\n谢谢你的支持！\n不用谢~！应该的"
        },
        {
            "author": "萌萌的包子",
            "timestamp": 1452007800,
            "txt_content": "API怎么查看o(╯□╰)o"
        },
        {
            "author": "tiger999",
            "timestamp": 1452082080,
            "txt_content": "包淞中 发表于 2016-1-5 23:30\nAPI怎么查看o(╯□╰)o\n我会专门写一篇的！"
        },
        {
            "author": "萌萌的包子",
            "timestamp": 1452145140,
            "txt_content": "tiger999 发表于 2016-1-6 20:08\n我会专门写一篇的！\n谢谢啦，因为不会查看API很多方法都不会用o(╯□╰)o"
        }
    ]
}