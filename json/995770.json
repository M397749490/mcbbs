{
    "title": "如何判断玩家受伤的原因？",
    "author": "lmhppt",
    "replyCount": 7,
    "timestamp": 1585036680,
    "txt_content": "RT，Bukkit1.8.X\n举个栗子：在玩家被火烧的时候，发送一个标题“你被火烧ing”\n以及在玩家被玩家打的时候，发送一句话之类的\n\n球球各位了~",
    "replies": [
        {
            "author": "橙汁awa",
            "timestamp": 1585038600,
            "txt_content": "MCBBS,有你更精彩！"
        },
        {
            "author": "洞穴夜莺",
            "timestamp": 1585058880,
            "txt_content": "假设有一EntityDamageEvent叫ev\nif(ev.getCause()==DamageCause.FIRE){\n...\n}"
        },
        {
            "author": "1157173310",
            "timestamp": 1585059000,
            "txt_content": "参考：https://hub.spigotmc.org/javadoc ... ityDamageEvent.html\n    @EventHandler\n    public void onEntityDamage(EntityDamageEvent event) {\n        // 如果事件是由玩家发出的\n        if (event.getEntity() instanceof Player) {\n            //当一个实体攻击另一个实体时执行下面的代码。\n            if (event.getCause() == EntityDamageEvent.DamageCause.ENTITY_ATTACK) {\n                event.getDamage(); // 获取事件伤害\n                event.getFinalDamage(); // 获取经过盔甲保护之类的保护过后的实际伤害\n                event.getEntity().getLastDamageCause().getEntity().getName(); // 获取来源实体的名字\n                event.getEntity().sendMessage(\"您被其他玩家打了\");\n            }\n        }\n    }复制代码"
        },
        {
            "author": "walle1996",
            "timestamp": 1585099380,
            "txt_content": "解决了吗老哥····"
        },
        {
            "author": "lmhppt",
            "timestamp": 1585102380,
            "txt_content": "1157173310 发表于 2020-3-24 22:10\n参考：https://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/entity/EntityDamageEvent.html\n能把来源实体（如果是个玩家的话）转化为玩家（Player）类型嘛"
        },
        {
            "author": "1157173310",
            "timestamp": 1585119600,
            "txt_content": "lmhppt 发表于 2020-3-25 10:13\n能把来源实体（如果是个玩家的话）转化为玩家（Player）类型嘛\n强制转换下 应该是可以的"
        },
        {
            "author": "南柯郡守",
            "timestamp": 1585150320,
            "txt_content": "@EventHandler\n        public void onInventoryClose(EntityDamageByEntityEvent e) {\n    if(e.getDamager() instanceof Player&&e.getEntity() instanceof Player) {//判断是玩家打了玩家\n        Player Damager = (Player)e.getDamager();//获取攻击者\n        Player Damagee = (Player)e.getEntity();//获取受害者\n        if(e.getCause()==DamageCause.FIRE) {\n            Bukkit.broadcastMessage(Damagee.getName() + \"被\" +Damager.getName() + \"用火点燃了\");\n        }\n    }\n        }复制代码大概就这样\n"
        }
    ]
}