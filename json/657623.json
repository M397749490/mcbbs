{
    "title": "箱子gui操作的请教",
    "author": "qq245271830",
    "replyCount": 3,
    "timestamp": 1482976440,
    "txt_content": " 本帖最后由 qq245271830 于 2016-12-29 20:30 编辑 \n\n监听库存点击事件下. event.getInvetory()是获取事件完成之前的库存.  如果想要获取事件完成之后的库存应该用什么样的思路?",
    "replies": [
        {
            "author": "X_mingyu",
            "timestamp": 1486106820,
            "txt_content": "event.getClickedInvetory()"
        },
        {
            "author": "602723113",
            "timestamp": 1486117320,
            "txt_content": "lz呀..我不明白你要干啥而InventoryClickEvent 是点击一下就会触发一下，事件完成后还是event.getInventory()"
        },
        {
            "author": "andylizi",
            "timestamp": 1486526700,
            "txt_content": " 本帖最后由 andylizi 于 2017-2-8 12:07 编辑 \n\n事件监听方法的 @EventHandler 参数中将 priority 设为 MONITOR， ignoreCancelled 设为 true\nfinal Inventory inv = event.getInventory();\nnew BukkitRunnable(){\n    @Override\n    public void run(){\n        // 这时，inv 就是事件全部完成之后的了\n    }\n}.runTask(主类实例引用);复制代码其实原理就是，延迟1tick再进行操作，这时（1tick后）这整个事件已经全部完成了（所有绑定监听器全部触发完毕了），因此 inv 的状态就是事件执行完毕之后的了\n如果 priority 不是 MONITOR （MONITOR意味着这个监听器会最后一个被触发），或 ignoreCancelled 不是 true（设为true后，如果前面已经有其他监听器把这个事件取消了，这个监听器就不会再被触发了），可能在特定情况下出现一些奇怪bug\n\n啊对了，在java8之前，想在匿名内部类里取得内部类外部的变量，需要给变量加上 final 修饰符。因此如果你在上述实例代码的 run() 方法中要使用 event 变量的话，得在参数里将其修饰为 final 的\n\n论坛居然有叫 EventHandler 的用户。。"
        }
    ]
}