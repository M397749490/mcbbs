{
    "title": "调用skillapi玩家职业等级",
    "author": "悠然学院",
    "replyCount": 2,
    "timestamp": 1540202640,
    "txt_content": " 本帖最后由 梦萍_云皓 于 2018-10-22 18:08 编辑 \npackage com.qingfu.Attack;\nimport org.bukkit.Bukkit;\nimport org.bukkit.entity.Entity;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.entity.EntityDamageByEntityEvent;\nimport org.bukkit.plugin.java.JavaPlugin;\n\nimport com.sucy.skill.SkillAPI;\nimport com.sucy.skill.api.player.*;\nimport com.qingfu.Attack.command.AttackCommand;\nimport com.sucy.skill.api.player.PlayerClass;\n\npublic class Attack extends JavaPlugin implements Listener{\n        \n        public void onEnable() {\n                getServer().getPluginManager().registerEvents(this, this);\n                getServer().getConsoleSender().sendMessage(\"§a[qfAttack] 已加载\");\n                Bukkit.getPluginCommand(\"qfattack\").setExecutor(new AttackCommand(this));\n                saveDefaultConfig();\n        }\n        /*\n         * 判断被攻击对象是否为玩家\n         * 如果不是则判断被攻击对象的名字\n         * 对被攻击对象的名字进行分割,获得怪物以名字自定义的等级\n         * 然后如果玩家skillapi等级-怪物等级>配置文件所填写的数值\n         * 则无法攻击，并提示\n         */\n        @EventHandler\n    public void onPlayerAttack(EntityDamageByEntityEvent event) {\n                Entity entity = event.getEntity();\n        if (entity.getCustomName() == null || !entity.getCustomName().contains(\":\")) { return;}\n        int level = Integer.parseInt(entity.getCustomName().split(\":\")[1]);\n        if(entity instanceof Player) {\n                return;\n            }\n        if(做玩家等级-怪物等级的判断){\n                event.setCancelled(true);\n            }\n        if (!(event.getDamager() instanceof Player)) return;\n        Player player = (Player) event.getDamager();\n        player.sendMessage(\"§7[§eqfattack§7] §e> §7你无法攻击等级过低的boss!\");\n    }\n\n\n}复制代码是的，我不知道应该如何获取玩家的skillapi等级，哪个大佬给下获取等级的完整代码？",
    "replies": [
        {
            "author": "粘兽",
            "timestamp": 1540202640,
            "txt_content": "        Player player = e.getPlayer();\n        PlayerAccounts accountData = SkillAPI.getPlayerAccountData(player);\n        PlayerClass mainClass = accountData.getActiveData().getMainClass();\n        player.sendMessage(\"当前等级 :\"+mainClass.getLevel());复制代码"
        },
        {
            "author": "qsxzaqq",
            "timestamp": 1540203000,
            "txt_content": "SkillAPI.getPlayerData(玩家).getClass(职业).getLevel();"
        }
    ]
}