{
    "title": "[1.7.10,1.12.2][CNPC]NPC脚本注册指令",
    "author": "Hueihuea",
    "replyCount": 16,
    "timestamp": 1561960200,
    "txt_content": " 本帖最后由 Hueihuea 于 2020-8-24 23:29 编辑 \n\n技术有限 仅供参考\n\n1.12.2发现存在兼容性问题 而且高版本npc已经支持注册指令 推荐使用npc提供的API\n\n先上代码\n/**\n*@Author Hueihuea\n*/\n\nfunction Command(name,usage){\n this.getCommandName=function(){\n  /*String getCommandName()\n  *应返回指令的名字\n  *如:/noppes 则返回noppes\n  */\n };\n this.getCommandUsage=function(sender){\n  /*String getCommandUsage(ICommandSender sender)\n  *应返回指令的用法\n  *当玩家输入\"/help 你的指令名\" 的时候就会出现\n  *sender:指令发送者 可能是玩家 控制台 命令方块 或者其他什么\n  */\n };\n this.processCommand=function(sender,args){\n  /*void processCommand(ICommandSender sender, String[] args)\n  *在玩家使用该指令时会调用本函数\n  *sender:指令发送者 可能是玩家 控制台 命令方块 或者其他什么\n  *args:指令的参数\n  */\n };\n this.addTabCompletionOptions=function(sender,args){\n  return null;\n  /*List addTabCompletionOptions(ICommandSender sender, String[] args)\n  *用于tab自动补全\n  *应返回补全后的参数\n  *sender:指令发送者 可能是玩家 控制台 命令方块 或者其他什么\n  *args:指令的参数\n  */\n };\n this.getRequiredPermissionLevel=function(){\n  return 4;\n  /*int getRequiredPermissionLevel\n  *指令所需的权限 0表示所有人可用 4表示OP可用\n  *应返回权限等级\n  */\n }\n //上方函数以1.7.10的方法为准\n //1.12.2修改函数时补全参数后通用。\n this.getMCCommand=function(){\n  var CommandBase=Java.type(\"net.minecraft.command.CommandBase\");\n  var MCCommand=Java.extend(CommandBase,{\n   func_71517_b:this.getCommandName,\n   func_71518_a:this.getCommandUsage,\n   func_71515_b:this.processCommand,\n   func_71516_a:this.addTabCompletionOptions,\n   func_82362_a:this.getRequiredPermissionLevel,\n   /*下方是对1.12.2的兼容*/\n   func_184881_a:this.processCommand,\n   func_184883_a:this.addTabCompletionOptions\n  });\n  return new MCCommand();\n }\n}\nfunction registerCommand(command){\n var MinecraftServer=Java.type(\"net.minecraft.server.MinecraftServer\");\n var server=MinecraftServer.func_71276_C();\n     if(!(command instanceof Command)){\n     return;\n    }\n    server.func_71187_D().func_71560_a(command.getMCCommand())\n}复制代码\n其实我觉得注释说的够清楚的了\n再放一个示例\nvar EntityPlayerMP=Java.type(\"net.minecraft.entity.player.EntityPlayerMP\");\nvar command=new Command();\ncommand.getCommandName=function(){\n return \"test\";\n}\ncommand.getCommandUsage=function(sender){\n return \"/test\";\n}\ncommand.processCommand=function(sender,args){\n var ScriptPlayer=Java.type(\"noppes.npcs.scripted.ScriptPlayer\");\n    if(!(sender instanceof EntityPlayerMP)){\n     return;\n    }\n var player=new ScriptPlayer(sender);\n player.sendMessage(\"good\");\n return;\n}\nregisterCommand(command);复制代码然后放上面示例的效果图\n\n\n\n\nWZCXZ5A(0O{1UUBICO1O6]4.png (37.66 KB, 下载次数: 4)\n\n下载附件\n\n2019-7-1 13:49 上传\n\n\n\n\n\n\n教程就是要干净利落不能水\n(确信)\n[groupid=1595]CNPC Script Studio[/groupid]",
    "replies": [
        {
            "author": "東風",
            "timestamp": 1561965960,
            "txt_content": "好酷炫的教程/喝茶\n不过教程不应该讲一讲怎么用吗？光拿着这个代码我还是不知道怎么搞/笑哭"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1561966440,
            "txt_content": "东风4B-9319 发表于 2019-7-1 15:26\n好酷炫的教程/喝茶\n不过教程不应该讲一讲怎么用吗？光拿着这个代码我还是不知道怎么搞/笑哭 ...\n我觉得注释说的够清楚了鸭"
        },
        {
            "author": "NoName德里奇",
            "timestamp": 1561968180,
            "txt_content": "这个我拿回去试试看... 我觉得很牛批"
        },
        {
            "author": "lzh最帅",
            "timestamp": 1561975680,
            "txt_content": "返回没有权限使用怎么解决"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1561984260,
            "txt_content": "lzh最帅 发表于 2019-7-1 18:08\n返回没有权限使用怎么解决\nemmm\n好的\n过会添加一个调权限等级的"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1561985940,
            "txt_content": "lzh最帅 发表于 2019-7-1 18:08\n返回没有权限使用怎么解决\n已添加getRequiredPermissionLevel"
        },
        {
            "author": "lzh最帅",
            "timestamp": 1561989420,
            "txt_content": "skpsk自己家 发表于 2019-7-1 20:59\n已添加getRequiredPermissionLevel\n还是不行"
        },
        {
            "author": "Hueihuea",
            "timestamp": 1561992300,
            "txt_content": "lzh最帅 发表于 2019-7-1 21:57\n还是不行\n?\n您怎么写的"
        },
        {
            "author": "東風",
            "timestamp": 1562034000,
            "txt_content": "skpsk自己家 发表于 2019-7-1 15:34\n我觉得注释说的够清楚了鸭\n好的，感谢感谢/喝茶"
        },
        {
            "author": "小浩qwq",
            "timestamp": 1571359140,
            "txt_content": "啊哈，灰佬这个脚本是非常有用的干货"
        },
        {
            "author": "油漆",
            "timestamp": 1573277580,
            "txt_content": "(╥╯^╰╥)看不懂，脚本萌新这在逼逼赖赖，话说可以直接打出来脚本吗？然后再解释，否则不知道那些要删那些不要(╥╯^╰╥)"
        },
        {
            "author": "houyouxiang1234",
            "timestamp": 1586846040,
            "txt_content": "哈哈哈看不懂"
        },
        {
            "author": "c128",
            "timestamp": 1588202220,
            "txt_content": "厉害了，大佬"
        },
        {
            "author": "YueRou",
            "timestamp": 1598280060,
            "txt_content": "我只能说NB"
        },
        {
            "author": "qq1355754011",
            "timestamp": 1609756020,
            "txt_content": "我拿走试试看 感谢楼主"
        },
        {
            "author": "安营",
            "timestamp": 1612704300,
            "txt_content": "阿巴阿巴，网易太垃圾了，npc都没了"
        }
    ]
}