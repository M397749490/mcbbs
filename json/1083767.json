{
    "title": "如何让发送的信息可点击执行指令",
    "author": "殇晨呦",
    "replyCount": 3,
    "timestamp": 1595393520,
    "txt_content": "翻了半天没找到方法。。",
    "replies": [
        {
            "author": "AzureHanChen",
            "timestamp": 1595395080,
            "txt_content": "https://www.mcbbs.net/thread-812136-1-1.html"
        },
        {
            "author": "William_Shi",
            "timestamp": 1595395080,
            "txt_content": " 本帖最后由 William_Shi 于 2020-7-22 17:56 编辑 \n\nhttps://www.mcbbs.net/thread-812136-1-1.html\n别给我发卡啊。。。我这是真的几乎同一时间发送了。。。重复了。。。。。不是有意复读的。。。\n\n再加一句好了：使用net.md_5.bungee的聊天API\n\n当然也可以是直接tellraw一段json，本质上其实是发送了一个数据包，是json。\n聊天组件API就是生成了json文本"
        },
        {
            "author": "结城希亚",
            "timestamp": 1595401200,
            "txt_content": " 本帖最后由 结城希亚 于 2020-7-22 15:10 编辑 \n\npackage pers.tany.advancedcommandbind;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.entity.Player;\n\nimport net.md_5.bungee.api.ChatColor;\nimport net.md_5.bungee.api.chat.ClickEvent;\nimport net.md_5.bungee.api.chat.ComponentBuilder;\nimport net.md_5.bungee.api.chat.HoverEvent;\nimport net.md_5.bungee.api.chat.TextComponent;\n\npublic class BungeeWay {\n//        向玩家发送信息，鼠标放上去后会显示其他信息\n        public static void SendShowMessage(Player player,String message,String showmessage) {\n                TextComponent send = new TextComponent(ChatColor.translateAlternateColorCodes('&', message));\n                send.setHoverEvent(new HoverEvent(HoverEvent.Action.SHOW_TEXT,new ComponentBuilder(ChatColor.translateAlternateColorCodes('&', showmessage)).create()));\n                if(player==null) {\n                        Bukkit.spigot().broadcast(send);\n                        return;\n                }\n                player.spigot().sendMessage(send);\n        }\n        \n//        向玩家发送信息，鼠标放上去后会显示物品信息\n        public static void SendShowItemMessage(Player player,String message,String showmessage) {\n                TextComponent send = new TextComponent(ChatColor.translateAlternateColorCodes('&', message));\n                send.setHoverEvent(new HoverEvent(HoverEvent.Action.SHOW_ITEM,new ComponentBuilder(ChatColor.translateAlternateColorCodes('&', showmessage)).create()));\n                if(player==null) {\n                        Bukkit.spigot().broadcast(send);\n                        return;\n                }\n                player.spigot().sendMessage(send);\n        }\n        \n//        其中一段字符串显示信息\n        public static void SendPartShowMessage(Player player,String message,String part,String changemessage,String showmessage) {\n                part = part.replace(\"[\", \"\").replace(\"]\", \"\");\n                message = message.replace(\"[\", \"\").replace(\"]\", \"\");\n                if(message.contains(part)) {\n                        TextComponent all = new TextComponent(\"\");\n                        Boolean first = true;\n                        while(message.contains(part)) {\n                                if(first)\n                                try {\n                                        all.addExtra(new TextComponent(ChatColor.translateAlternateColorCodes('&', message.split(part)[0])));\n                                }catch (ArrayIndexOutOfBoundsException e) {\n                                        \n                                }\n                                TextComponent parts = new TextComponent(new TextComponent(ChatColor.translateAlternateColorCodes('&', part.replace(part, changemessage))));\n                                parts.setHoverEvent(new HoverEvent(HoverEvent.Action.SHOW_TEXT,new ComponentBuilder(ChatColor.translateAlternateColorCodes('&', showmessage)).create()));\n                                all.addExtra(parts);\n                                try {\n                                        all.addExtra(new TextComponent(ChatColor.translateAlternateColorCodes('&', message.split(part)[1])));\n                                }catch (ArrayIndexOutOfBoundsException e) {\n                                        \n                                }\n                                first=false;\n                                message = message.replaceFirst(part, \"\");\n                        }\n                        if(player==null) {\n                                Bukkit.spigot().broadcast(all);\n                                return;\n                        }\n                        player.spigot().sendMessage(all);\n                } else {\n                        player.sendMessage(ChatColor.translateAlternateColorCodes('&', message));\n                        return;\n                }\n        }\n        \n//        其中一段字符串显示物品信息\n        public static void SendPartShowItemMessage(Player player,String message,String part,String changemessage,String showitem) {\n                part = part.replace(\"[\", \"\").replace(\"]\", \"\");\n                message = message.replace(\"[\", \"\").replace(\"]\", \"\");\n                if(message.contains(part)) {\n                        TextComponent all = new TextComponent(\"\");\n                        Boolean first = true;\n                        while(message.contains(part)) {\n                                if(first)\n                                try {\n                                        all.addExtra(new TextComponent(ChatColor.translateAlternateColorCodes('&', message.split(part)[0])));\n                                }catch (ArrayIndexOutOfBoundsException e) {\n                                        \n                                }\n                                TextComponent parts = new TextComponent(new TextComponent(ChatColor.translateAlternateColorCodes('&', part.replace(part, changemessage))));\n                                parts.setHoverEvent(new HoverEvent(HoverEvent.Action.SHOW_ITEM,new ComponentBuilder(ChatColor.translateAlternateColorCodes('&', showitem)).create()));\n                                all.addExtra(parts);\n                                try {\n                                        all.addExtra(new TextComponent(ChatColor.translateAlternateColorCodes('&', message.split(part)[1])));\n                                }catch (ArrayIndexOutOfBoundsException e) {\n                                        \n                                }\n                                first=false;\n                                message = message.replaceFirst(part, \"\");\n                        }\n                        if(player==null) {\n                                Bukkit.spigot().broadcast(all);\n                                return;\n                        }\n                        player.spigot().sendMessage(all);\n                } else {\n                        player.sendMessage(ChatColor.translateAlternateColorCodes('&', message));\n                        return;\n                }\n        }\n\n        //                向玩家发送信息，鼠标放上去后会显示其他信息\n        //                usecommand为true时，直接执行command，否则会在聊天框填充对应内容（指令需带/）\n                        public static void SendCommandMessage(Player player,String message,String showmessage,String command,Boolean usecommand) {\n                                TextComponent send = new TextComponent(ChatColor.translateAlternateColorCodes('&', message));\n                                String value = null;\n                                if(usecommand) {\n                                        value = \"RUN_COMMAND\";\n                                } else {\n                                        value = \"SUGGEST_COMMAND\";\n                                }\n                                send.setClickEvent(new ClickEvent(ClickEvent.Action.valueOf(value), command));\n                                send.setHoverEvent(new HoverEvent(HoverEvent.Action.SHOW_TEXT,new ComponentBuilder(ChatColor.translateAlternateColorCodes('&', showmessage)).create()));\n                                if(player==null) {\n                                        Bukkit.spigot().broadcast(send);\n                                        return;\n                                }\n                                player.spigot().sendMessage(send);\n                        }\n                        \n        //                向玩家发送信息，鼠标放上去后会显示物品信息\n        //                usecommand为true时，直接执行command，否则会在聊天框填充对应内容（指令需带/）\n                        public static void SendCommandItemMessage(Player player,String message,String showitem,String command,Boolean usecommand) {\n                                TextComponent send = new TextComponent(ChatColor.translateAlternateColorCodes('&', message));\n                                String value = null;\n                                if(usecommand) {\n                                        value = \"RUN_COMMAND\";\n                                } else {\n                                        value = \"SUGGEST_COMMAND\";\n                                }\n                                send.setClickEvent(new ClickEvent(ClickEvent.Action.valueOf(value), command));\n                                send.setHoverEvent(new HoverEvent(HoverEvent.Action.SHOW_ITEM,new ComponentBuilder(ChatColor.translateAlternateColorCodes('&', showitem)).create()));\n                                if(player==null) {\n                                        Bukkit.spigot().broadcast(send);\n                                        return;\n                                }\n                                player.spigot().sendMessage(send);\n                        }\n                        \n//                        其中一段字符串显示信息，并且点击后执行\n                        public static void SendPartShowCommandMessage(Player player,String message,String part,String changemessage,String showmessage,String command,Boolean usecommand) {\n                                part = part.replace(\"[\", \"\").replace(\"]\", \"\");\n                                message = message.replace(\"[\", \"\").replace(\"]\", \"\");\n                                if(message.contains(part)) {\n                                        TextComponent all = new TextComponent(\"\");\n                                        Boolean first = true;\n                                        while(message.contains(part)) {\n                                                if(first)\n                                                try {\n                                                        all.addExtra(new TextComponent(ChatColor.translateAlternateColorCodes('&', message.split(part)[0])));\n                                                }catch (ArrayIndexOutOfBoundsException e) {\n                                                        \n                                                }\n                                                TextComponent parts = new TextComponent(new TextComponent(ChatColor.translateAlternateColorCodes('&', part.replace(part, changemessage))));\n                                                parts.setHoverEvent(new HoverEvent(HoverEvent.Action.SHOW_TEXT,new ComponentBuilder(ChatColor.translateAlternateColorCodes('&', showmessage)).create()));\n                                                String value = null;\n                                                if(usecommand) {\n                                                        value = \"RUN_COMMAND\";\n                                                } else {\n                                                        value = \"SUGGEST_COMMAND\";\n                                                }\n                                                parts.setClickEvent(new ClickEvent(ClickEvent.Action.valueOf(value), command));\n                                                all.addExtra(parts);\n                                                try {\n                                                        all.addExtra(new TextComponent(ChatColor.translateAlternateColorCodes('&', message.split(part)[1])));\n                                                }catch (ArrayIndexOutOfBoundsException e) {\n                                                        \n                                                }\n                                                first=false;\n                                                message = message.replaceFirst(part, \"\");\n                                        }\n                                        if(player==null) {\n                                                Bukkit.spigot().broadcast(all);\n                                                return;\n                                        }\n                                        player.spigot().sendMessage(all);\n                                } else {\n                                        player.sendMessage(ChatColor.translateAlternateColorCodes('&', message));\n                                        return;\n                                }\n                        }\n                        \n//                        其中一段字符串显示物品信息，并且点击后执行\n                        public static void SendPartShowCommandItemMessage(Player player,String message,String part,String changemessage,String showitem,String command,Boolean usecommand) {\n                                part = part.replace(\"[\", \"\").replace(\"]\", \"\");\n                                message = message.replace(\"[\", \"\").replace(\"]\", \"\");\n                                if(message.contains(part)) {\n                                        TextComponent all = new TextComponent(\"\");\n                                        Boolean first = true;\n                                        while(message.contains(part)) {\n                                                if(first)\n                                                try {\n                                                        all.addExtra(new TextComponent(ChatColor.translateAlternateColorCodes('&', message.split(part)[0])));\n                                                }catch (ArrayIndexOutOfBoundsException e) {\n                                                        \n                                                }\n                                                TextComponent parts = new TextComponent(new TextComponent(ChatColor.translateAlternateColorCodes('&', part.replace(part, changemessage))));\n                                                parts.setHoverEvent(new HoverEvent(HoverEvent.Action.SHOW_ITEM,new ComponentBuilder(ChatColor.translateAlternateColorCodes('&', showitem)).create()));\n                                                String value = null;\n                                                if(usecommand) {\n                                                        value = \"RUN_COMMAND\";\n                                                } else {\n                                                        value = \"SUGGEST_COMMAND\";\n                                                }\n                                                parts.setClickEvent(new ClickEvent(ClickEvent.Action.valueOf(value), command));\n                                                all.addExtra(parts);\n                                                try {\n                                                        all.addExtra(new TextComponent(ChatColor.translateAlternateColorCodes('&', message.split(part)[1])));\n                                                }catch (ArrayIndexOutOfBoundsException e) {\n                                                        \n                                                }\n                                                first=false;\n                                                message = message.replaceFirst(part, \"\");\n                                        }\n                                        if(player==null) {\n                                                Bukkit.spigot().broadcast(all);\n                                                return;\n                                        }\n                                        player.spigot().sendMessage(all);\n                                } else {\n                                        player.sendMessage(ChatColor.translateAlternateColorCodes('&', message));\n                                        return;\n                                }\n                        }\n}\n\n复制代码\n\n\n\nBungeeWay.zip\n(1.34 KB, 下载次数: 2)\n\n\n\n2020-7-22 15:10 上传\n点击文件名下载附件\n\n\n\n\n\n\n\n自己写了个方法类\n有需要可以拿去用\n"
        }
    ]
}