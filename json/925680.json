{
    "title": "timings分析：为什么每隔半小时tps就会降低一两秒",
    "author": "ailiyixi",
    "replyCount": 7,
    "timestamp": 1573411500,
    "txt_content": " 本帖最后由 bailiyixi 于 2019-11-11 22:16 编辑 \n\n第一次以为是异步创世神的锅，删掉之后问题依旧存在：https://timings.aikar.co/?id=b14 ... c10f0a2993f#timings\n第二次暂时怀疑是ProtocolLib的锅，但是这插件不能删啊：https://timings.aikar.co/?id=820 ... 8b985c9f4ee#timings\ntps优化很好一直维持在20，但固定每隔30分钟tps就会丢失18-24%，持续大概两秒左右，如能解决，金粒不是问题。\n\n非autosave问题，已经关闭该功能。\n跟某个世界也没关系，卸载掉timings报告中占用较高的世界后下次会换另一个世界占用过高。",
    "replies": [
        {
            "author": "a1294790523",
            "timestamp": 1573411500,
            "txt_content": "bailiyixi 发表于 2019-11-11 22:16\nhttps://timings.aikar.co/?id=daa5dc272dc946d782f790f0d0a85717#plugins\n关掉之后没有解决，这次变成了 ...\nhttps://bstats.org/getting-started\n\nDisabling bStats\n\nIf you don't want bStats to collect data from your server, you can disable it in the bStats config file. This file can be found in the /plugins/bStats/ folder.\nbStats has nearly no effect on your server's performance and the sent data is completely anonymous. The collected data is important information for plugin authors to improve their plugins and keep motivated. To value their work and effort, please keep bStats enabled.\n复制代码\nbstats文件夹里面应该有吧...."
        },
        {
            "author": "a1294790523",
            "timestamp": 1573453020,
            "txt_content": " 本帖最后由 a1294790523 于 2019-11-11 14:19 编辑 \n\n看了下你第二个Timings中的几个卡顿小波峰\n基本可以确定罪魁祸首是com.comphenix.protocol.metrics.Metrics\n也就是ProtocolLib的统计访问网络导致的问题（后面看源码的注释说收集数据是同步进行，网络连接传递是异步进行）\n但是这与你的第一个的情况相违背....\n但是我看了看源码：https://github.com/dmulloy2/Prot ... s/Metrics.java#L143\n  /**\n     * Starts the Scheduler which submits our data every 30 minutes.\n     */\n完全一致的时间段，所以先把统计和更新提示关了看看吧：\nhttps://www.spigotmc.org/resources/protocollib.1997/\nauto updater.notify: false #Inform any player with the permission protocol.info when a new version of ProtocolLib is out.\nauto updater.download: false #Automatically download and install the newest version of ProtocolLib. The installation will take effect when the server restarts.\nauto updater.delay: 43200 #The number of seconds between each check for a new update.\nauto updater.last: 0 #This simply records the last time (in seconds since 01.01.1970) an update check was performed. Set it to 0 to force a new update check.\nmetrics: false#If TRUE, ProtocolLib will publish anonymous usage data to mcstats.org. Set it to FALSE to opt-out.\nbackground compiler: true #If TRUE, ProtocolLib will try and improve performance by replacing reflection with compiled code on-the-fly.\nignore version check: None #Force ProtocolLib to start for a specified Minecraft version, even if it is incompatible."
        },
        {
            "author": "Minecraft小橙",
            "timestamp": 1573453080,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "Minecraft小橙",
            "timestamp": 1573453140,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "ailiyixi",
            "timestamp": 1573481760,
            "txt_content": "a1294790523 发表于 2019-11-11 14:17\n看了下你第二个Timings中的几个卡顿小波峰\n基本可以确定罪魁祸首是com.comphenix.protocol.metrics.Metrics ...\nhttps://timings.aikar.co/?id=daa ... 0f0d0a85717#plugins\n关掉之后没有解决，这次变成了betonquest的metrics每30分钟占用一次了，但是插件里没有对应配置……\n我把悬赏涨到1000金粒了，求大佬救命！"
        },
        {
            "author": "in77",
            "timestamp": 1573494420,
            "txt_content": "感觉是NPC的问题Citizen请求的ProtocolLib\n\n\n\n\n\nScreenshot 2019-11-12 at 01.44.54.png\n(303.45 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-11-12 01:46 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "apzt",
            "timestamp": 1573528860,
            "txt_content": "卧槽。。。1000金粒"
        }
    ]
}