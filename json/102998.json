{
    "title": "[有原始碼] 驗證正版服務伺服器 - 驗證玩家是否正版",
    "author": "JLChnToZ",
    "replyCount": 8,
    "timestamp": 1364540280,
    "txt_content": "大家好, 我又回來了...\n\n這次我來分享的是一個自製的正版驗證服務的服務器, 主要用途是提供任何需要驗證 Minecraft 正版的網站... 或者需要弄正版權限分流的多人服務器 (需要有網頁介面) 使用的 (舉例說, 我開設服務器想做到正版的權限比較多, 那麼我就可以做一個正版驗證網頁介面, 再啟動這個專門用來驗證正版的服務器), 這工具就正合你意了.\n\n你可以把這個服務器看作是一個除了登入就沒有其他功能的 Minecraft 多人服務器, 因為其原理就是偽裝成一般正版多人服務器那樣提供需要驗證的玩家登入, 當驗證成功後, 就會向指定的網頁 (如 PHP) 發送玩家 ID 和產生出來的驗證碼 (不是和官方的服務器溝通用的那個 sessionID, 而是另外產生出來的), 同時也把驗證碼發回給玩家. 這個時候只需要在指定的網頁輸入驗證碼以供核對就可以了.\n\n驗證服務器的設置方法:\n系統需求: 有安裝 .NET Framework 的 Windows 平台; 或有安裝 Mono Framework 的 Linux 或 Mac 平台\n解壓縮下載回來的檔案使用記事本編輯 ChraftMCPaidVerify.exe.config, 以下是設定值的意思, 不明白的話可以參考默認的設定方法:port = 接口\nmotd = 查詢服務器列表時顯示的名稱\nserverVersion = 偽裝的服務器版本 (這是在服務器列表中顯示的版本. 其實如果通訊協定的版本是一樣的話, 不管客戶端用甚麼版本也沒關係)\nonlinePlayers = 偽裝的線上人數\nmaxPlayers = 偽裝的最大線上人數\nsuccessWebPage = 驗證成功時傳送驗證碼到網頁服務器網址，請把 {0} 放在玩家名稱的部分, {1} 放在驗證碼的部分, {2} 放在客戶端的 IP 部分.\ntokenInvalidText = 驗證 Token 時不正確所顯示的訊息\nverifyFailText = 給不是正版的玩家所顯示的訊息 \nsuccessText = 給驗證成功的玩家的訊息, 請把 {0} 放在驗證碼的部分.复制代码在 Windows 下雙按 ChraftMCPaidVerify.exe 就可以啟動服務器了. (如果是使用 Linux / Mac 的話，也可以利用 Mono Framework 來執行: mono-service ChraftMCPaidVerify.exe)\n\n\n需要驗證的玩家的使用方法在 Minecraft 點選多人遊戲模式點選直接登入 (Direct Connect)輸入驗證系統的 IP / 網址, 再登入 (假設驗證服務器寄存了在 example.com 的 25568 號接口, 就輸入 example.com:25568)如果是正版的話, 稍等一下就會收到驗證碼把驗證碼輸入在指定的網頁即完成驗證程序\n\n\n執行結果:\n\n\n下載點:\n可運行的主程式 病毒掃瞄結果\n原始碼 病毒掃瞄結果\n\n希望這工具對有需要的人有幫助吧",
    "replies": [
        {
            "author": "ZENONIA4",
            "timestamp": 1364545200,
            "txt_content": "顶一个。。。"
        },
        {
            "author": "米汤",
            "timestamp": 1364545380,
            "txt_content": "顶一个。。。"
        },
        {
            "author": "qwer14782",
            "timestamp": 1374662880,
            "txt_content": " 本帖最后由 qwer14782 于 2013-7-24 18:51 编辑 \n\n關於successWebPage這該怎設定?\n抱歉挖古文 因為我沒看到其他篇這種的了"
        },
        {
            "author": "gooding300",
            "timestamp": 1397355180,
            "txt_content": "敢不敢不用115"
        },
        {
            "author": "JLChnToZ",
            "timestamp": 1397465100,
            "txt_content": "qwer14782 发表于 2013-7-24 18:48\n關於successWebPage這該怎設定?\n抱歉挖古文 因為我沒看到其他篇這種的了\n最簡單的用法是用網頁伺服器\n\n例如 PHP:<?php\n$mysqlhost = 'localhost';\n$username = 'user';\n$password = 'pass';\n$database = 'dbname';\n$table = 'verify';\nfunction getVars($varName) {\n  if(isset($_POST[$varName])) return $_POST[$varName];\n  else if(isset($_GET[$varName])) return $_GET[$varName];\n  else return '';\n}\nheader('Cache-Control: no-cache, must-revalidate');\nheader('Expires: Sat, 01 Jan 2000 00:00:00 GMT');\nheader('Access-Control-Allow-Origin: *');\nmysql_connect($mysqlhost, $username, $password);\n@mysql_select_db($database) or die('database_error');\n$serverhosts = array('localhost', '127.0.0.1');\n$user = trim(getVars('user'));\n$code = trim(getVars('code'));\nif($user != '' && $code != '') {\n  if(in_array($_SERVER['HTTP_HOST'], $serverhosts)) {\n    mysql_query(\"REPLACE INTO $table (`DT`, `USER`, `CODE`) VALUES (NOW(), '$user', '$code')\");\n  } else {\n    mysql_query(\"DELETE FROM $table WHERE `DT` >= DATE_SUB(NOW(), INTERVAL 15 MINUTE) AND `USER` = '$user' AND `CODE` = '$code'\");\n  }\n  echo (mysql_affected_rows() > 0) ? 'true' : 'false';\n  mysql_query(\"DELETE FROM $table WHERE `DT` < DATE_SUB(NOW(), INTERVAL 15 MINUTE)\");\n} else {\n  echo 'bad_request';\n}\nmysql_close();\n?>复制代码這段 PHP 的作用是接收驗證, 再把驗證碼暫存在 MySQL\n\n然後就在設置改網址即可"
        },
        {
            "author": "wxr155",
            "timestamp": 1397465880,
            "txt_content": "好评！！！！！"
        },
        {
            "author": "shenmadetoufa",
            "timestamp": 1399466580,
            "txt_content": "怒赞！对于正版鼓励的服务器来说简直特别有用呢0w0~"
        },
        {
            "author": "神的鄙视圣",
            "timestamp": 1562125380,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        }
    ]
}