{
    "title": "分享两个批处理，用于一键备份存档和一键恢复存档",
    "author": "xiangjiao2256",
    "replyCount": 2,
    "timestamp": 1438518540,
    "txt_content": " 本帖最后由 xiangjiao2256 于 2016-7-18 21:10 编辑 \n\n更新了一下代码感觉能够略微提高用户体验\n写在前面\n\n1、楼主使用windows 10，mc1.8版本测试，包括mod，能够成功完成备份和恢复；\n2、如果你觉得不错拿来使用，请先备份好存档测试一下功能，防止意外，本帖仅分享不承担责任；\n3、两个批处理一为存档备份，另一个为存档恢复。使用时，至少要退出到mc的标题界面，也就是点完保存退出游戏的那个界面，当然完全退出更没问题；\n4、本帖所用代码为楼主强行学习自主编写，部分借助网络上现有代码，也在百度知道上进行提问得到网友协助，如果太业余还请原谅，如需转载还请注明此帖。\n\n代码分享\n\n业余水平，如果效率低还请见谅，有更好的方法欢迎更正。\n\n一键备份\n====================不要复制我，我是分割线====================\n@echo off\nset mm=%date:~5,2%\nset dd=%date:~8,2%\nset num=1\nset aa=the\nset bb=15\nset xx=备份地址（例如C:\\我是备份，无需引号，使用时请将红字完全删除）\nset yy=原存档地址（例如C:\\.minecraft\\saves\\新的世界，无需引号，使用时请将红字完全删除）\nset name=%mm%%dd%%aa%%num%\ncd %xx%\nif exist %name% goto A\nif not exist %name% goto B\n:A\nset /a num+=1\nset name=%mm%%dd%%aa%%num%\nif exist %name% goto A\n:B\nmd %name%\nxcopy %yy% %name% /e \necho 备份完成\nfor /f \"tokens=*\" %%i in ('dir /ad /b \"%xx%\"') do set /a count+=1\necho 备份数量为%count%\nif %count% gtr %bb% goto C\nif %count% leq %bb% echo 备份结束 \ngoto E\n:C\necho 备份数量超过%bb%，删除时间最早的备份\nfor /f \"delims=\" %%a in ('dir /ad /od /b %xx%') do (\nset \"folder==%%a\" \ngoto D\n)\n:D\nrd /s /q %folder%\necho 删除时间最早的备份完成\necho 当前存档备份结束\n:E\npause\n====================也不要复制我，我也是分割线====================\n\n\n一键恢复存档\n====================别复制我，我还是分割线====================\n@echo off\necho 恢复存档前请先确保游戏已经退出到初始界面\necho 恢复过程不可逆,现在的存档将被删除\nset xx=备份地址（例如C:\\我是备份，无需引号，使用时请将红字完全删除）\nset yy=原存档地址（例如C:\\.minecraft\\saves\\新的世界，无需引号，使用时请将红字完全删除）\nfor /f \"delims=\" %%a in  ('dir /ad /od /b %xx%') do (set \"folder=%%a\")\necho 最新的备份是:%folder%\n@set /p a=是否要恢复该存档？（输入y开始恢复）\nif \"%a%\"==\"y\" goto A \ngoto B\n:A\nrd /s /q %yy%\nmd %yy%\ncd %xx%\nxcopy %folder% %yy% /d /e\n:B\necho 结束\npause\n====================别理我，我真的是分割线====================\n\n使用教程\n\n1、将两段代码分别复制到两个txt内；\n2、红色文字为必改内容\n原存档地址更改示例 C:\\.minecraft\\saves\\新的世界 （此处一定要包括盘符的完整地址，并且完整到需要存的这个档的世界的名称，如果没有更改，默认为“新的世界”，如果建立多个没有更改名字的世界，会自动命名为“新的世界-”、“新的世界--”……）；备份地址更改示例 C:\\我是备份 （此处一定要包括盘符的完整地址，这是用来存放备份的目录地址，该地址要求仅用来存放备份，并且要将之前的备份删除或者按下面所说的格式来更改成符合格式的备份）；\n3、蓝色文字为选改内容\n蓝色文字the为间隔字符，你可以自己更改为其他字符（但注意不要更改到敏感字符会被识别成语句）。存档默认命名为“当前月日+the+编号”，例如我这是发帖当天的第一次备份，就会自动生成名为“0802the1”（不含双引号）的备份目录，同理，7月30日的第四次存档自动命名为“0730the4”（不含双引号）；蓝色文字15，此处为最大备份的数量，也就是说最多备份15个，如果有第16个存档，就会自动删除最早的存档（此处的原理是只要大于15就删除最早创建的一个文件夹，而不识别到底是是什么文件夹，如果在备份地址里头放了其他的文件夹也会惨遭毒手，所以还请设置一个专门用来备份的文件夹）；\n4、将txt更改为bat即可使用，bat文件放在哪里都不影响使用。两个批处理使用时，至少要退出到mc的标题界面。”备份存档“直接就会运行结束然后提示按任意键退出，“恢复存档”会需输入一个\"y\"来验证，防止误点击。不会改后缀请自行上网搜索。\n5、在win10系统下，你可能需要管理员权限来使用此批处理，代码已经完全公开，可以自行审阅其安全性。\n\n\n\n\n\n\n",
    "replies": [
        {
            "author": "tdiant",
            "timestamp": 1438519020,
            "txt_content": "版头说的很明确了\n您可以学习与分享包括红石、铁路、生产、建筑、冒险等等属于PC原版单人游戏生存创造过程中的一切经历体验和技巧心得。\n属于PC原版的内容！\n\n=A= 这些内容应该发在编程开发版"
        },
        {
            "author": "xiangjiao2256",
            "timestamp": 1438520280,
            "txt_content": "tdiant 发表于 2015-8-2 20:37\n版头说的很明确了\n您可以学习与分享包括红石、铁路、生产、建筑、冒险等等属于PC原版单人游戏生存创造过程 ...\n啊，不好意思，我这里网太卡了，刷这个页面都要好几次。\n已经被搬到别的板块了，谢谢提醒。"
        }
    ]
}