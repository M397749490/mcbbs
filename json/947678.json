{
    "title": "如何实现function的if-else以及变量的或判断",
    "author": "‮ebotanihS",
    "replyCount": 1,
    "timestamp": 1580221320,
    "txt_content": "很抱歉我在用一般程序语言的思维使用Minecraft的命令系统。\n\n我在试图构思这样的代码：\nif(cond.a == 1 && cond.b == 1)\n        AwesomePlayer.someScore = 2\nelse if(cond.a == 1 || cond.b == 1)\n        AwesomePlayer.someScore = 1\nelse\n        AwesomePlayer.someScore = 0复制代码\n\n但是，当我试图把以上代码转换为mcfunction的时候，我发现两个问题：\n\n第一，与判断可以用两个if子命令来实现，但是或判断需要怎么实现呢？\n\n对于这个问题，我查到的一个方案是使用tag+选择器，但是我的应用对象是虚拟变量而不是实体。\n\n而我自己想到的方案是两条判断条件单独写一条命令，但我担心这会尝试一些额外的开销：\n\nexecute if a cond = 1 const run ...(设置分数)\nexecute if b cond = 1 const run ...(设置分数) 复制代码\n\n请问这样的实现合理吗？或者有一些更优雅的写法？\n\n第二，如何让if-else不执行其它分支？\n\n对于命令方块而言，可以通过blockdata的设置去实现分支，但是mcfunction没有方块可以交互，又应该怎样确保不执行其它分支呢？\n\n我的想法是，把每一个if的代码块都拆开，然后设置一个flag。如果这个flag没有清除，就可以进入该代码块执行，并且代码块在最后清除这个flag。\n\n\nscoreboard player set if flag 1\nexecute if if flag = 1 const if a cond = 1 const run function test:if_block_a_eq_1\nexecute if if flag = 1 const if b cond = 1 const run function test:if_block_b_eq_1\n\n# test:if_block_a_eq_1\n...\nscoreboard player set if flag 0\n复制代码\n\n这是一个好的设计吗？有没有更加优雅的写法？\n\n\n\n期盼您的解答！",
    "replies": [
        {
            "author": "匿名",
            "timestamp": 1580221320,
            "txt_content": "圈内有人，匿了。\n\n1. 非常合理。此外提供另一个思路，众所周知，「且」是「乘」，「或」是「加」。\n2. 是。更优雅的办法没有，但是有更烂的办法，也就是并不分成多个函数，而是在后续每个命令前面加一个 execute if 判断 flag。\n\n最后，停下你优化的脚步。在命令真正开始卡之前考虑细节优化都是耍流氓。不对，真正开始卡了你优化这些细节也没用。记分版相关操作是命令中性能最高的东西之一，真正需要避免的是对实体、方块实体 NBT 的访问、修改等操作。\n\n以上。"
        }
    ]
}