{
    "title": "Minecraft服务器网络延迟太高？教你优化服务器网络！",
    "author": "RONGYAO749",
    "replyCount": 24,
    "timestamp": 1586052180,
    "txt_content": " 本帖最后由 RONGYAO749 于 2020-12-23 15:57 编辑 \n\n本教程只适用于Linux以及Minecraft Java Edition再一次在开头强调！操作前：请备份重要数据！请备份重要数据！请备份重要数据！\n有时候玩家总是埋怨服务器太卡？\n服务器TPS不低\n但玩家延迟高到爆炸？\n服务器线路垃圾但却没钱用更好的线路？\n那么这篇教程将会用最简单的方法优化你的服务器线路！\n*一，关于加速工具*\n      本教程采用BBR作为加速工具，我个人不太推荐锐速来对服务器进行加速，因为锐速以及年久失修了（笑）。那么BBR是什么？BBR是来自于Google的黑科技，目的是通过优化和控制TCP的拥塞，充分利用带宽并降低延迟，起到神奇般的加速效果。\n      如果你的Linux版本内核是4.9及以上的，那么恭喜你，你的内核以及拥有了BBR这个特性，只需开启即可。\n\n\n*二，BBR的安装与使用*\n\n     这里以CentOS7.6作为演示。     输入wget -N --no-check-certificate \"https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh\"\n\n\n\n\nQQ截图20200405101503.png (21.29 KB, 下载次数: 17)\n\n下载附件\n\n2020-4-5 10:15 上传\n\n\n\n\n\n     会获得一个名叫tcp.sh的脚本\n\n\n\n\nQQ截图20200405101614.png (2.6 KB, 下载次数: 6)\n\n下载附件\n\n2020-4-5 10:16 上传\n\n\n\n\n\n     输入chmod +x tcp.sh——给予这个脚本权限运行     然后输入./tcp.sh\n\n\n\n\nQQ截图20200405101534.png (14.58 KB, 下载次数: 12)\n\n下载附件\n\n2020-4-5 10:16 上传\n\n\n\n\n\n这里可以看到，系统以及给我预装了锐速内核，我前文提到，我个人并不推荐使用锐速内核如何，我们现在输入2，安装BBR Plus内核这个时候肯定会有人问了，你不是说安装bbr吗怎么现在又安装bbr plus呢？先别急，听我慢慢解释bbr plus，顾名思义，是bbr的改进版这个版本相对bbr来说，改进了许多方面的内容。基于bbr强大算法上，进一步优化！说那么多也是费力，举个真实的例子吧      我的一台香港的机子，我拿他做个人网盘，但是我下载的时候只有可怜的100KB/s，后来我使用了bbr加速之后，速度提高到了500KB/s，但我嫌还不够，继续用bbr plus加速一下，你猜猜速度到了多少，下载速度达到了2MB/s！\n这样我们可以换算一下，bbr plus的优化效果相对bbr可以高达4倍（这个换算有点不恰当了，狗头），所以选择bbr plus他不香吗\n\n那么我们继续教程，刚刚说到哪儿了？刚刚说到替换成bbr plus内核了。\n注意1：如果你的机子不是基于kvm的虚拟机或者是物理机，是无法更换内核的！注意2：更换内核前请备份机中重要数据，否则后果自负！注意3：如果出现网络错误请立刻停止脚本的执行！否则脚本将会继续卸载内核如果你的机子虚拟化方式是LXC之类的，直接根据你系统自带安装的加速内核，选择对应的加速方式安装就行了（个人在这里不太推荐使用BBR魔改版）\n我们输入2，然后回车，静等内核安装完成即可\n\n\n\n\n\nQQ截图20200405103650.png (30.58 KB, 下载次数: 9)\n\n下载附件\n\n2020-4-5 10:36 上传\n\n\n\n\n\nPS：由于天朝网络的特殊性，下载内核的时候可能会很久很久，甚至无法连接。PS2：安装的速度取决于你机子的配置PS3：如果安装的时候出现如下图的提示，选择No回车即可\n\n\n\n\n2018-11-29_185659.jpg (35.48 KB, 下载次数: 4)\n\n下载附件\n\n2020-4-5 10:37 上传\n\n\n\n\n\n安装完成后它会提示你是否重启，输入y重启即可\n\n\n\n\n\nQQ截图20200405103831.png (4.58 KB, 下载次数: 10)\n\n下载附件\n\n2020-4-5 10:39 上传\n\n\n\n\n\n重启完成后，再次输入./tcp.sh进入脚本进入脚本后输入对应的加速模块，回车即可完成！\n\n\n\n\n\nQQ截图20200405104540.png (14.66 KB, 下载次数: 4)\n\n下载附件\n\n2020-4-5 10:46 上传\n\n\n\n\n\n*三，一些常见的问题*BBR效果显著的地方：1.线路比较垃圾的服务器显著2.使用共享宽带时的高峰环境下效果显著3.在不太稳定的家庭网络下有一定的作用\nBBR效果不太显著的情况：1.宽带是独享宽带，不存在高峰2.你服务器线路已经垃圾到没得救的地步了（手动狗头）\n使用了bbr之后还会卡顿？1.继续完看我的贴子2.你的服务器线路真的没得救了\n待补充……\n\n*四，点睛之笔*你以为这个贴子就这样完了，没那么简单！打开你服务端根目录下的server.properties找到network-compression-threshold=256看见这个没有，把他改成128或者较小的值可以换取一部分性能来提高网络流畅性如果你的机子性能不是很好，建议你改成128站内有贴子说的很详细，这里我就不在赘述\n\n\n\n\nQQ截图20200405105802.png (1.6 KB, 下载次数: 7)\n\n下载附件\n\n2020-4-5 10:58 上传\n\n\n\n\n\n\n最后各位坛友多给些人气和金粒呗，写了几个小时不容易\n\n\n",
    "replies": [
        {
            "author": "小军最帅",
            "timestamp": 1588218300,
            "txt_content": "感谢楼主分享"
        },
        {
            "author": "南京扛把子",
            "timestamp": 1588276740,
            "txt_content": "掐头去尾 博客文章有了"
        },
        {
            "author": "RONGYAO749",
            "timestamp": 1589033940,
            "txt_content": "14907471 发表于 2020-5-1 03:59\n掐头去尾 博客文章有了\n如果个个都会看博客也不会来bbs看了"
        },
        {
            "author": "qpaozi",
            "timestamp": 1592189160,
            "txt_content": "我想请问一下，我的服务器延迟很大，所有人玩都很卡，挖方块回弹这种，服务器版本是1.12.2，主要mod有 神秘6 暮色森林 工业2 植物魔法 拔刀剑 僵尸意志，服务器租的阿里云的，配置是 4核8G，带宽10MB峰值，专用网络。\n就配置来说我觉得是完全带的动这个服的，就是不知道什么原因延迟超高，是不是我哪里配置出了问题？"
        },
        {
            "author": "RONGYAO749",
            "timestamp": 1592571720,
            "txt_content": "qpaozi 发表于 2020-6-15 10:46\n我想请问一下，我的服务器延迟很大，所有人玩都很卡，挖方块回弹这种，服务器版本是1.12.2，主要mod有 神秘 ...\n带宽占满，控制人口和带宽消耗即可"
        },
        {
            "author": "RONGYAO749",
            "timestamp": 1592571840,
            "txt_content": "qpaozi 发表于 2020-6-15 10:46\n我想请问一下，我的服务器延迟很大，所有人玩都很卡，挖方块回弹这种，服务器版本是1.12.2，主要mod有 神秘 ...\n我服务器配置和你一样，主要是有时人太多导致上传带宽被吃满导致玩家延迟高。适当控制，而且10M开服，尤其Mod服可能会有些力不从心。建议把宽带计费模式改成按量计费，成本低且快。但是被ddos或者压测的时候就很心疼了xd"
        },
        {
            "author": "hjyy0410",
            "timestamp": 1595052780,
            "txt_content": "按量计费成本低？我感觉你在骗我。。。"
        },
        {
            "author": "茶太。",
            "timestamp": 1595314380,
            "txt_content": "感谢楼主，按照此方法优化之后稳定了不少"
        },
        {
            "author": "812257301",
            "timestamp": 1602398880,
            "txt_content": "服务器重启半天都启动不了。。。"
        },
        {
            "author": "RONGYAO749",
            "timestamp": 1602400260,
            "txt_content": "812257301 发表于 2020-10-11 14:48\n服务器重启半天都启动不了。。。\n应该是下载的时候出现错误，但脚本会继续执行卸载内核，建议重装系统了"
        },
        {
            "author": "812257301",
            "timestamp": 1602400260,
            "txt_content": "重启过后，服务器启动不了了- -。。。只有重装"
        },
        {
            "author": "RONGYAO749",
            "timestamp": 1602400440,
            "txt_content": "812257301 发表于 2020-10-11 15:11\n重启过后，服务器启动不了了- -。。。只有重装\n看上面，贴子也说了更换前要备份数据，如果出现意外可以将损失降到最低"
        },
        {
            "author": "fffilm",
            "timestamp": 1602768480,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "waidao",
            "timestamp": 1602946320,
            "txt_content": "楼主我想问一下，如果说我用电脑ping我的ip延迟正常，但是游戏链接就会延迟很高甚至上千的话会是什么问题"
        },
        {
            "author": "Zengdadawang",
            "timestamp": 1602992700,
            "txt_content": "感觉只有一点用"
        },
        {
            "author": "qq1033294548",
            "timestamp": 1608632520,
            "txt_content": " 本帖最后由 qq1033294548 于 2020-12-22 18:27 编辑 \n\n按照教程输入2安装内核后输入y重启后,远程ssh无法连接.安全组设置也没问题.那么问题来了,现在除了重装系统外有什么方法还原吗?另外服务器的数据怎么办...没办法远程连接,无法导出数据...所以,希望后来人能够看到这层楼.养成先看评论的习惯 : ) 我也没有看到十月份的那位兄台的评论...."
        },
        {
            "author": "qq1033294548",
            "timestamp": 1608632760,
            "txt_content": "812257301 发表于 2020-10-11 15:11\n重启过后，服务器启动不了了- -。。。只有重装\nok 你不是一个人.还有我陪你...."
        },
        {
            "author": "RONGYAO749",
            "timestamp": 1608709560,
            "txt_content": " 本帖最后由 RONGYAO749 于 2020-12-23 15:48 编辑 \nqq1033294548 发表于 2020-12-22 18:22\n按照教程输入2安装内核后输入y重启后,远程ssh无法连接.安全组设置也没问题.那么问题来了,现在除了重装系统 ...\n下载内核时可能连接失败，但脚本会继续卸载内核重启后导致。而且我在贴子里也说了使用前必须备份，如果玩家数据使用另外一个分区/数据盘备份的话可以直接重装系统，无法的话尝试提交工单给服务商\n注意2：更换内核前请备份机中重要数据，否则后果自负！\n"
        },
        {
            "author": "RONGYAO749",
            "timestamp": 1608709980,
            "txt_content": "waidao 发表于 2020-10-17 22:52\n楼主我想问一下，如果说我用电脑ping我的ip延迟正常，但是游戏链接就会延迟很高甚至上千的话会是什么问题 ...\n服务器带宽太小"
        },
        {
            "author": "nethcx",
            "timestamp": 1609332300,
            "txt_content": "安了7也显示没有模块咋办"
        },
        {
            "author": "四月",
            "timestamp": 1609396620,
            "txt_content": "好帖子，谢谢大佬的教程"
        },
        {
            "author": "阿莎蕊雅同学",
            "timestamp": 1609618560,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "死亡昙花一现",
            "timestamp": 1611657900,
            "txt_content": "没成功卡死在第一步了 请确定此网址能打开"
        },
        {
            "author": "ksqeib",
            "timestamp": 1611716580,
            "txt_content": "硬核linux教程 感谢lz分享"
        }
    ]
}