{
    "title": "很多人都做过的原版显血教程，1.13单人",
    "author": "qaz1-qaz1-",
    "replyCount": 22,
    "timestamp": 1534650360,
    "txt_content": " 本帖最后由 qaz1-qaz1- 于 2018-8-19 15:20 编辑 \n引言这个东西肯定有很多人比我先做，但是我（为）还（了）是（水）要发这篇帖子，不说了，进（大）入（家）正（开）题（喷）。\n命令实现初始化函数 - load.mcfunction\n\n<font size=\"3\">scoreboard objectives add rotate dummy\nscoreboard objectives add health_show dummy [\"health\"]</font>复制代码开始计算 - start.mcfunction\n\n<font size=\"3\">execute store result score @p rotate run data get entity @p Rotation[0]</font>复制代码\n对每个生物递归 - test.mcfunction\n\ntag @e[limit=1,tag=ready_tester] add is_testing\ntag @e[limit=1,tag=is_testing] remove ready_tester\nexecute positioned as @p facing entity @e[limit=1,tag=is_testing] feet run tp @e[tag=rotation_tester] ~ ~ ~ ~ ~\nexecute store result score @e[limit=1,tag=is_testing] rotate run data get entity @e[tag=rotation_tester,limit=1] Rotation[0]\nscoreboard players operation @e[limit=1,tag=is_testing] rotate -= @p rotate\nexecute if entity @e[tag=is_testing,scores={rotate=-365..-355}] run function show_health:show\nexecute if entity @e[tag=is_testing,scores={rotate=-5..5}] run function show_health:show\nexecute if entity @e[tag=is_testing,scores={rotate=355..365}] run function show_health:show\ntag @e[tag=is_testing] remove is_testing\nfunction show_health:start_test复制代码\n辅助递归函数 - start_test.mcfunction\n\n<font size=\"3\">execute at @p if entity @e[distance=..4,tag=ready_tester] run function show_health:test</font>复制代码\n显示函数 - show.mcfunction\n\n<font size=\"3\">tag @e[tag=is_testing] add testing_true\neffect give @e[tag=is_testing] minecraft:glowing 1\nexecute store result score health health_show run data get entity @e[tag=is_testing,limit=1] Health</font>复制代码\n思路这里在初始化的时候生成了2个记分板\n rotate 测试以及运算实体的水平偏转角度 health_show 用于显示生命值先在自己的上方生成一个盔甲架，然后用execute facing ... run tp ... 将它旋转到头朝向每一个实体\n然后将他与自己的旋转角度相减，接近 0，360 或 -360 的生物就是我们面向的。\n最后，在进行输出就可以了。\n命令解析本来想要找一找有没有可以直接看出面向那个实体的命令，但是发现然而并没有，所以我就只能写一个函数来进行运算。\n下面列出用到的tag\nrotation_tester  用于旋转的盔甲架tester 所有在范围内的测试者ready_tester 还没有被测试的测试者testing_true 测试成功的实体is_testing 正在测试的测试者具体就是tag的加加减减，就不细说了，主要说用到了execute facing ... 指令，在官方维基解释如下\n将命令朝向改为朝向指定的坐标或实体所处的位置，不改变命令执行者和执行位置。\n语法\n... facing <坐标> ...... facing entity <实体> (eyes|feet) ...\n参数\n坐标：需要朝向的坐标，格式为<x> <y> <z>，可以使用波浪号和插入符。执行朝向将会是朝向该坐标。实体：需要朝向的实体，可以是玩家名、UUID或目标选择器。执行朝向将会是朝向该实体。\neyes|feet（仅在entity模式可用）\n确定朝向实体眼睛还是脚的位置。\n\n注：以上为了内容的显示，格式有修改，具体见原文\n于是，我就用了\n<font size=\"3\">execute positioned as @p facing entity @e[limit=1,tag=is_testing] feet run tp @e[tag=rotation_tester] ~ ~ ~ ~ ~</font>复制代码来将盔甲架不断tp到实体的朝向以进行比较，其他的我就不细讲了，谁都会的。\n还有想说的这个函数包仅限于单人，在多人模式中使用会出现不可预料的后果，因为没有区分玩家的记分板，但是如果加入了execute或许可以试一试。所以实用性并不强。\n这个函数因为要进行多次迭代，所以就没有用tick标签，防止关不掉造成崩溃，但是经过测试，高频接入命令方块好像没什么问题，这就是你不写标签的理由吗。\n反正没什么好说的，就不发数据包了。\n对于扩展到多人以一些想法\n首先可以建一个区别玩家的记分板，将每个玩家的分数调制不同，在赋值到盔甲架上即可。\n可以用 title subtile 进行显示，每个玩家都可以不一样，甚至可以用bossbar（丧心病狂）\n\n\n就讲到这里，差不多了\n\n\n参考：\nhttps://minecraft-zh.gamepedia.com/%E5%91%BD%E4%BB%A4#title Minecraft Wiki - 命令 title\nhttps://minecraft-zh.gamepedia.com/%E5%91%BD%E4%BB%A4#execute Minecraft Wiki - 命令 execute\n\n\n\n",
    "replies": [
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1534652280,
            "txt_content": "Belanga 发表于 2018-8-19 12:20\n没记错的话scoreboard有一个判据叫玩家的血量....然后你在/scoreboard objectives setdisplay就行了\n但是我要做生物的，那个只有判定玩家的"
        },
        {
            "author": "Belanga",
            "timestamp": 1534652400,
            "txt_content": " 本帖最后由 Belanga 于 2018-8-19 12:24 编辑 \n\n没记错的话scoreboard有一个判据叫玩家的血量....然后你在/scoreboard objectives setdisplay就行了\n\n"
        },
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1534653480,
            "txt_content": "为什么命令那一边总会蹦出<div></div>啊，删都删不掉"
        },
        {
            "author": "夏逆大大",
            "timestamp": 1534656960,
            "txt_content": "很好哦，支持一下"
        },
        {
            "author": "Rain_Effect",
            "timestamp": 1534661760,
            "txt_content": "可惜不发一点例图嘛...还是有点在意效果的"
        },
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1534662540,
            "txt_content": "Rain_Effect 发表于 2018-8-19 14:56\n可惜不发一点例图嘛...还是有点在意效果的\n我已经补贴上了。"
        },
        {
            "author": "《企启》",
            "timestamp": 1534676400,
            "txt_content": "可以，这玩意在1.13方便多了\n我以前在1.12做过一个就需要重制整个战斗系统和穷举生物（和Blife的一张地图一样）\nLZ最近很高产啊，要dalao的节奏"
        },
        {
            "author": "1756746217",
            "timestamp": 1534686000,
            "txt_content": "原谅我看不懂"
        },
        {
            "author": "ruhuasiyu",
            "timestamp": 1534691400,
            "txt_content": "http://www.mcbbs.net/thread-796669-1-1.html\nhttp://www.mcbbs.net/thread-796317-1-1.html\n这两个帖子用的方法可以更有效地选择范围，你可以看下"
        },
        {
            "author": "qaz1-qaz1-",
            "timestamp": 1535163540,
            "txt_content": "ruhuasiyu 发表于 2018-8-19 23:10\nhttp://www.mcbbs.net/thread-796669-1-1.html\nhttp://www.mcbbs.net/thread-796317-1-1.html\n这两个帖子用 ...\n谢谢啦！"
        },
        {
            "author": "rabbit_A",
            "timestamp": 1535413140,
            "txt_content": "有意思，学到了"
        },
        {
            "author": "1669349981",
            "timestamp": 1535413620,
            "txt_content": "能显血就很不错了，支持"
        },
        {
            "author": "sevevss",
            "timestamp": 1540225920,
            "txt_content": "\n能显血就很不错了，支持"
        },
        {
            "author": "残梦♂",
            "timestamp": 1540689540,
            "txt_content": "萌新表示看不懂了"
        },
        {
            "author": "灰常利害",
            "timestamp": 1541045400,
            "txt_content": "好复杂呀。。"
        },
        {
            "author": "1031304676",
            "timestamp": 1541178660,
            "txt_content": "感谢分享"
        },
        {
            "author": "错泪c",
            "timestamp": 1541222640,
            "txt_content": "学到了！每次有你更精彩！！！！"
        },
        {
            "author": "s1s2ss3456",
            "timestamp": 1541299380,
            "txt_content": "感谢感谢楼主，"
        },
        {
            "author": "loulicon",
            "timestamp": 1541326920,
            "txt_content": "不明觉厉的感觉"
        },
        {
            "author": "wzylove",
            "timestamp": 1541336100,
            "txt_content": "路过来看看"
        },
        {
            "author": "非道",
            "timestamp": 1542509760,
            "txt_content": "服务器可以吗"
        },
        {
            "author": "TATTATQWQ",
            "timestamp": 1544455080,
            "txt_content": "大神，收下我的膝盖"
        }
    ]
}