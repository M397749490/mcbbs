{
    "title": "Spigot插件开发教程-给你的插件添加一个命令（新编版）",
    "author": "彪悍的新手",
    "replyCount": 32,
    "timestamp": 1438921920,
    "txt_content": " 本帖最后由 彪悍的新手 于 2017-1-16 20:31 编辑 \n\n\n1、给你的插件添加一个命令（新编版）\n\n上一章地址：\nhttp://www.mcbbs.net/thread-482197-1-1.html\n注意：在此章之后图片量急剧减少。\n\n1、在plugin.yml里添加代码\n\n在plugin.yml里添加：\ncommands:\n  主命令名:           #不加斜杠\n    description: Error\n    usage: /主命令名         #有斜杠\n复制代码\n填完之后像这样：（注意主命令名不需要带斜杠）\nname: MySpigotPlugin\nmain: com.abc.MySpigotPlugin\nversion: 1.1\ncommands:\n   command:\n     description: 这是一个命令\n     usage: /command\n复制代码\n\n\n2、在主类里写代码\n\n我们再看到主类：\n添加这样一段方法：（这里以命令/test为例子）\n@Override\n    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args){\n        if(cmd.getName().equalsIgnoreCase(\"test\")){ //如果输入\"/test\"则返回true\n                return true;\n        }\n        // 如果不是test，则返回false，如果你没有添加这个命令，系统就会显示：“没有这个命令”\n        return false; \n    }复制代码\n重要部分：\n@Override\n    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args){\n        if(cmd.getName().equalsIgnoreCase(\"test\")){ //如果输入\"/test\"则返回true\n                return true;\n        }\n        // 如果不是test，则返回false，如果你没有添加这个命令，系统就会显示：“没有这个命令”\n        return false; \n    }\n看上面的\npublic boolean onCommand(CommandSender sender, Command cmd, String label, String[] args){}复制代码这个就是命令执行器然后要导入包：\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;复制代码\n\n\n\n3、填写命令执行器：\n\n\n很简单，加入一句：\nsender.sendMessage(\"你好！\");复制代码\n意思就是输出“你好！”这个字符串。\n以下是全部的命令：\npackage biaoxin.mcbbs;\n\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class BattntPluginMain extends JavaPlugin {\n        @Override\n    public void onEnable() {\n            //启用插件时自动发出\n    }\n\n    @Override\n    public void onDisable() {\n            //关闭插件时自动发出\n    }\n    \n    @Override\n    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args){\n        if(cmd.getName().equalsIgnoreCase(\"test\")){ //如果输入\"test\"则返回true\n                sender.sendMessage(\"你好！\");\n                return true;\n        }\n        // 如果不是test，则返回false，如果你没有添加这个命令，系统就会显示：“没有这个命令”\n        return false; \n    }\n}\n\n                复制代码\n\n\n4、执行效果：\n\n\n\n\n\n1.png (64.94 KB, 下载次数: 9)\n\n下载附件\n\n2017-1-16 20:17 上传\n\n\n\n\n\n[groupid=1009]The Command's Power[/groupid]",
    "replies": [
        {
            "author": "云闪",
            "timestamp": 1438926000,
            "txt_content": "还是不知道和Bukkit有什么区别_(:_」∠)_而且你命令那里import的也是bukkit的类_(:_」∠)_这是传说中的高端水贴吗_(:_」∠)_"
        },
        {
            "author": "彪悍的新手",
            "timestamp": 1438930980,
            "txt_content": "splt 发表于 2015-8-7 13:40\n还是不知道和Bukkit有什么区别_(:_」∠)_而且你命令那里import的也是bukkit的类_(:_」∠)_这是传说中的高端 ...\n本来只是按草稿，结果发出去了······"
        },
        {
            "author": "123645525",
            "timestamp": 1438935360,
            "txt_content": "坚持来看教程"
        },
        {
            "author": "HuaiYang",
            "timestamp": 1448696580,
            "txt_content": "[15:41:56] [Server thread/ERROR]: Could not load 'plugins\\Myplugin.jar' in folder 'plugins'\norg.bukkit.plugin.InvalidDescriptionException: commands are of wrong type\n        at org.bukkit.plugin.PluginDescriptionFile.loadMap(PluginDescriptionFile.java:946) ~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.bukkit.plugin.PluginDescriptionFile.<init>(PluginDescriptionFile.java:232) ~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.bukkit.plugin.java.JavaPluginLoader.getPluginDescription(JavaPluginLoader.java:159) ~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager.java:133) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.bukkit.craftbukkit.v1_8_R3.CraftServer.loadPlugins(CraftServer.java:291) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at net.minecraft.server.v1_8_R3.DedicatedServer.init(DedicatedServer.java:202) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at net.minecraft.server.v1_8_R3.MinecraftServer.run(MinecraftServer.java:560) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_60]\nCaused by: java.lang.ClassCastException: java.lang.String cannot be cast to java.util.Map\n        at org.bukkit.plugin.PluginDescriptionFile.loadMap(PluginDescriptionFile.java:928) ~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        ... 7 more\n[15:41:56] [Server thread/INFO]: Set PluginClassLoader as parallel capable复制代码\n@彪悍的新手 求解哪里错了？"
        },
        {
            "author": "周润发",
            "timestamp": 1450012980,
            "txt_content": "[21:12:25 ERROR]: Could not load 'plugins\\MyPlugin.jar' in folder 'plugins'\norg.bukkit.plugin.InvalidDescriptionException: Invalid plugin.yml\n        at org.bukkit.plugin.java.JavaPluginLoader.getPluginDescription(JavaPlug\ninLoader.java:164) ~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-\nf6fba00-9935adc]\n        at org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager\n.java:133) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9\n935adc]\n        at org.bukkit.craftbukkit.v1_8_R3.CraftServer.loadPlugins(CraftServer.ja\nva:291) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935\nadc]\n        at org.bukkit.craftbukkit.v1_8_R3.CraftServer.reload(CraftServer.java:74\n1) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.bukkit.Bukkit.reload(Bukkit.java:534) [PaperSpigot-1.8.8-R0.1-SNA\nPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.bukkit.command.defaults.ReloadCommand.execute(ReloadCommand.java:\n25) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:14\n1) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.bukkit.craftbukkit.v1_8_R3.CraftServer.dispatchCommand(CraftServe\nr.java:640) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-\n9935adc]\n        at org.bukkit.craftbukkit.v1_8_R3.CraftServer.dispatchServerCommand(Craf\ntServer.java:626) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6\nfba00-9935adc]\n        at net.minecraft.server.v1_8_R3.DedicatedServer.aO(DedicatedServer.java:\n415) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc\n]\n        at net.minecraft.server.v1_8_R3.DedicatedServer.B(DedicatedServer.java:3\n79) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n\n        at net.minecraft.server.v1_8_R3.MinecraftServer.A(MinecraftServer.java:7\n10) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n\n        at net.minecraft.server.v1_8_R3.MinecraftServer.run(MinecraftServer.java\n:613) [PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935ad\nc]\n        at java.lang.Thread.run(Unknown Source) [?:1.8.0_65]\nCaused by: org.yaml.snakeyaml.error.YAMLException: java.nio.charset.MalformedInp\nutException: Input length = 1\n        at org.yaml.snakeyaml.reader.StreamReader.update(StreamReader.java:200)\n~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.yaml.snakeyaml.reader.StreamReader.<init>(StreamReader.java:60) ~\n[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.yaml.snakeyaml.Yaml.load(Yaml.java:381) ~[PaperSpigot-1.8.8-R0.1-\nSNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.bukkit.plugin.PluginDescriptionFile.<init>(PluginDescriptionFile.\njava:232) ~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9\n935adc]\n        at org.bukkit.plugin.java.JavaPluginLoader.getPluginDescription(JavaPlug\ninLoader.java:159) ~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-\nf6fba00-9935adc]\n        ... 13 more\nCaused by: java.nio.charset.MalformedInputException: Input length = 1\n        at java.nio.charset.CoderResult.throwException(Unknown Source) ~[?:1.8.0\n_65]\n        at sun.nio.cs.StreamDecoder.implRead(Unknown Source) ~[?:1.8.0_65]\n        at sun.nio.cs.StreamDecoder.read(Unknown Source) ~[?:1.8.0_65]\n        at java.io.InputStreamReader.read(Unknown Source) ~[?:1.8.0_65]\n        at org.yaml.snakeyaml.reader.UnicodeReader.read(UnicodeReader.java:123)\n~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at java.io.Reader.read(Unknown Source) ~[?:1.8.0_65]\n        at org.yaml.snakeyaml.reader.StreamReader.update(StreamReader.java:184)\n~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.yaml.snakeyaml.reader.StreamReader.<init>(StreamReader.java:60) ~\n[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.yaml.snakeyaml.Yaml.load(Yaml.java:381) ~[PaperSpigot-1.8.8-R0.1-\nSNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9935adc]\n        at org.bukkit.plugin.PluginDescriptionFile.<init>(PluginDescriptionFile.\njava:232) ~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-f6fba00-9\n935adc]\n        at org.bukkit.plugin.java.JavaPluginLoader.getPluginDescription(JavaPlug\ninLoader.java:159) ~[PaperSpigot-1.8.8-R0.1-SNAPSHOT-latest.jar:git-PaperSpigot-\nf6fba00-9935adc]\n        ... 13 more"
        },
        {
            "author": "可可可可可乐",
            "timestamp": 1450197180,
            "txt_content": "╭(°A°`)╮不一起讲权限么"
        },
        {
            "author": "kjkj2173135",
            "timestamp": 1456108020,
            "txt_content": "请问@Override有什么用?\n我学java没有听说过"
        },
        {
            "author": "q513902026",
            "timestamp": 1456188480,
            "txt_content": " 本帖最后由 q513902026 于 2016-2-23 08:50 编辑 \nHuaiYang 发表于 2015-11-28 15:43\n@彪悍的新手 求解哪里错了？\n命令类型错误 请贴出plugin.yml看看\n\n@hushubao \n无效的plugin.yml 贴出plugin.yml看看"
        },
        {
            "author": "迷の十六",
            "timestamp": 1460216340,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "q513902026",
            "timestamp": 1460219340,
            "txt_content": "迷の十六 发表于 2016-4-9 23:39\n我也和上面的问题一样\n请注意一下plugin.yml的编码格式"
        },
        {
            "author": "迷の十六",
            "timestamp": 1460219820,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "q513902026",
            "timestamp": 1460223480,
            "txt_content": "迷の十六 发表于 2016-4-10 00:37\nUTF-8 对吗\nhttp://wiki.bukkit.org/Plugin_YAML\n\nname: MonsterC\nmain: com.zdds.plugin.MonsterC\nversion: 1.1\ncommands:\n  MonsterC:\n    description: 小提示(插件名)\n    usage: 插件名复制代码"
        },
        {
            "author": "迷の十六",
            "timestamp": 1460224260,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        },
        {
            "author": "q513902026",
            "timestamp": 1460225100,
            "txt_content": "迷の十六 发表于 2016-4-10 01:51\n改完这样以后 还是会报错_(:зゝ∠)_\nmain: com.zdds.plugin.MonsterC.MonsterC"
        },
        {
            "author": "迷の十六",
            "timestamp": 1460227200,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽\n"
        },
        {
            "author": "q513902026",
            "timestamp": 1460254140,
            "txt_content": "迷の十六 发表于 2016-4-10 02:40\n灰常感谢 大触(腿)_(:зゝ∠)_还是会报错哦\njava.io.FileNotFoundException: Jar does not contain plugin.yml\n你打包后的插件 并不存在plugin.yml"
        },
        {
            "author": "Li_peiang",
            "timestamp": 1487569080,
            "txt_content": "笨学生冒昧提问：请问核心文件（20MB）能当api在eclipse导入吗 还是说核心文件开服 api编程 互不相干"
        },
        {
            "author": "叶米柯",
            "timestamp": 1487578380,
            "txt_content": "package plugin;\n\npublic final class MyPlugin extends JavaPlugin{\n    private final static CommandExecutor COMMAND = new Reload();\n\n    @Override\n    public void onEnable(){\n        getCommand(\"reload\").setExecutor(COMMAND);\n    }\n}复制代码\npackage plugin.commands;\n\npublic final class Reload implements CommandExecutor {\n    @Override\n    public void onCommand(CommandSender sender, Command command, String label, String[] args){\n        // TODO Implementations here\n    }\n}复制代码\n\n岂不美哉？"
        },
        {
            "author": "小_丰",
            "timestamp": 1502546220,
            "txt_content": "看Java新人们(我也是A.A)全都有加载不了插件的这些问题 何不另发一个帖子 说一说解决方案呢"
        },
        {
            "author": "457725806",
            "timestamp": 1504071540,
            "txt_content": "MCBBS有你更精彩~"
        },
        {
            "author": "轻光233",
            "timestamp": 1528857360,
            "txt_content": "kjkj2173135 发表于 2016-2-22 10:27\n请问@Override有什么用?\n我学java没有听说过\n是一个自定义注解，写在方法上面，表示这个方法重写了父类的同名方法"
        },
        {
            "author": "805781737",
            "timestamp": 1544455500,
            "txt_content": "package com.zxcsqq;\n\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class GuessPoints extends JavaPlugin {\n        public void onLoad(){\n                getLogger().info(\"[GuessPoints]：插件已加载\");\n        }\n        public void onEnable(){\n                getLogger().info(\"[GuessPoints]：插件已启用\");\n        }\n        public void onDisable(){\n                getLogger().info(\"[GuessPoints]：插件已关闭\");\n        }\n        @Override\n    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args){\n        if(cmd.getName().equalsIgnoreCase(\"test\")){ //如果输入\"test\"则返回true\n                sender.sendMessage(\"你好！\");\n                return true;\n        }\n        // 如果不是test，则返回false，如果你没有添加这个命令，系统就会显示：“没有这个命令”\n        return false; \n    }\n}复制代码\n\n\n\n\n\n\n\n\n没有用\n输入test没有反映 未知命令"
        },
        {
            "author": "MC2号",
            "timestamp": 1560679620,
            "txt_content": "805781737 发表于 2018-12-10 23:25\n没有用\n输入test没有反映 未知命令\n我也是说未知的命令"
        },
        {
            "author": "丶桐谷和人",
            "timestamp": 1561108440,
            "txt_content": "kjkj2173135 发表于 2016-2-22 10:27\n请问@Override有什么用?\n我学java没有听说过\nOverride是重写，还有个Over什么的是重载。"
        },
        {
            "author": "幻刺呀",
            "timestamp": 1561192140,
            "txt_content": "教程不错 膜拜大佬"
        },
        {
            "author": "5352",
            "timestamp": 1565435280,
            "txt_content": "为什么服务器没加载我的插件？"
        },
        {
            "author": "5352",
            "timestamp": 1565440860,
            "txt_content": "楼主说句话啊，看来这帖被弃坑了"
        },
        {
            "author": "2408760644",
            "timestamp": 1570077780,
            "txt_content": "这是怎么回事呢\n\n\n\n\n\nTIM图片20181003142955.png\n(32.26 KB, 下载次数: 1)\n\n\n\n\n下载附件\n\n\n2018-10-3 14:33 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTIM截图20191003124129.png\n(74.03 KB, 下载次数: 0)\n\n\n\n\n下载附件\n\n\n2019-10-3 12:43 上传\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
        },
        {
            "author": "Dogend",
            "timestamp": 1570455120,
            "txt_content": "805781737 发表于 2018-12-10 23:25\n没有用\n输入test没有反映 未知命令\n你要把 test 放到plugin.yml里"
        },
        {
            "author": "anan876",
            "timestamp": 1570616580,
            "txt_content": "老哥，会不会脚本啊，会的话帮个忙"
        },
        {
            "author": "红尘红尘y",
            "timestamp": 1581829020,
            "txt_content": "提示: 作者被禁止或删除 内容自动屏蔽"
        },
        {
            "author": "逗比M",
            "timestamp": 1590111720,
            "txt_content": "通俗易懂的教程"
        }
    ]
}