{
    "title": "[已解决]与临时给予OP或权限相关的问题",
    "author": "小烦",
    "replyCount": 5,
    "timestamp": 1485086700,
    "txt_content": " 本帖最后由 小烦 于 2017-1-24 17:32 编辑 \n\n好久没玩mc以及mc相关的东西了。\n终于寒假也是没有时间，\n但还是向写一点小插件玩玩。。目前正在写一个小红包插件。\n在临时给玩家添加权限的时候我突然有了个疑问。。\n\n我们有时为了临时让玩家做一些“越权”的事，\n会临时给玩家op\nPlayer.setOp(true);复制代码\n再执行相关动作\n之后取消\nPlayer.setOp(false);复制代码\n或临时给玩家某个权限（利用Valut或其他API）\n再执行相关动作，之后取消\n\n那么如果服务器执行到Player.setOp(true);的瞬间，服务器关了或蹦了，之后再开服，玩家是否就是op了呢？\n\n\n谢谢\n",
    "replies": [
        {
            "author": "coderzeng",
            "timestamp": 1485103200,
            "txt_content": "一般不考虑,实在要解决就把临时op的列表先写到配置里再给权限,撤权限之后再删"
        },
        {
            "author": "langyo",
            "timestamp": 1485107580,
            "txt_content": "你如果担心这个，你可以试着这么架构：在每次开服时检查一遍实际OP名单，以上一次的OP名单做对照，并将该成为OP的提升，普通玩家直接撤销\n然后，保存配置文件，把现在实际OP再备份一次，如果有后台检测到非红包插件的OP升职降职操作，就再修改配置文件\n\n这样子你就没什么好担心的了"
        },
        {
            "author": "小烦",
            "timestamp": 1485143520,
            "txt_content": "langyo 发表于 2017-1-23 01:53\n你如果担心这个，你可以试着这么架构：在每次开服时检查一遍实际OP名单，以上一次的OP名单做对照，并将该成 ...\n啊多谢。。\n我主要是有疑惑会不会出这种问题，\n嗯"
        },
        {
            "author": "langyo",
            "timestamp": 1485231300,
            "txt_content": "吕乐乐 发表于 2017-1-24 11:42\n你想多了，不会的噢。\n个人理解监听器会执行后才会关闭服务器，\n除非服务器是被shutdown的\n这种问题的解决方案你还没说呢…\n方法也很简单，备份OP名单，每次开服就还原…游戏内部通过正常指令弄得OP要动态写进名单…"
        },
        {
            "author": "云闪",
            "timestamp": 1485306660,
            "txt_content": "理论上应该是有可能的，但是...服务器在那千分之几秒崩的概率...可以忽略不计"
        }
    ]
}